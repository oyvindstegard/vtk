/*
Copyright (c) 2003-2010, CKSource - Frederico Knabben. All rights reserved.
For licensing, see LICENSE.html or http://ckeditor.com/license
*/

(function(){if(!window.CKEDITOR)window.CKEDITOR=(function(){var h={timestamp:'ABH04T8',version:'3.4.3',revision:'6236',_:{},status:'unloaded',basePath:(function(){var k=window.CKEDITOR_BASEPATH||'';if(!k){var l=document.getElementsByTagName('script');for(var m=0;m<l.length;m++){var n=l[m].src.match(/(^|.*[\\\/])ckeditor(?:_basic)?(?:_source)?.js(?:\?.*)?$/i);if(n){k=n[1];break;}}}if(k.indexOf('://')==-1)if(k.indexOf('/')===0)k=location.href.match(/^.*?:\/\/[^\/]*/)[0]+k;else k=location.href.match(/^[^\?]*\/(?:)/)[0]+k;if(!k)throw 'The CKEditor installation path could not be automatically detected. Please set the global variable "CKEDITOR_BASEPATH" before creating editor instances.';return k;})(),getUrl:function(k){if(k.indexOf('://')==-1&&k.indexOf('/')!==0)k=this.basePath+k;if(this.timestamp&&k.charAt(k.length-1)!='/'&&!/[&?]t=/.test(k))k+=(k.indexOf('?')>=0?'&':'?')+'t='+this.timestamp;return k;}},i=window.CKEDITOR_GETURL;if(i){var j=h.getUrl;h.getUrl=function(k){return i.call(h,k)||j.call(h,k);};}return h;})();var h=CKEDITOR;if(!h.event){h.event=function(){};h.event.implementOn=function(i){var j=h.event.prototype;for(var k in j){if(i[k]==undefined)i[k]=j[k];}};h.event.prototype=(function(){var i=function(k){var l=k.getPrivate&&k.getPrivate()||k._||(k._={});return l.events||(l.events={});},j=function(k){this.name=k;this.listeners=[];};j.prototype={getListenerIndex:function(k){for(var l=0,m=this.listeners;l<m.length;l++){if(m[l].fn==k)return l;}return-1;}};return{on:function(k,l,m,n,o){var p=i(this),q=p[k]||(p[k]=new j(k));if(q.getListenerIndex(l)<0){var r=q.listeners;if(!m)m=this;if(isNaN(o))o=10;var s=this,t=function(v,w,x,y){var z={name:k,sender:this,editor:v,data:w,listenerData:n,stop:x,cancel:y,removeListener:function(){s.removeListener(k,l);}};l.call(m,z);return z.data;};t.fn=l;t.priority=o;for(var u=r.length-1;u>=0;u--){if(r[u].priority<=o){r.splice(u+1,0,t);return;}}r.unshift(t);}},fire:(function(){var k=false,l=function(){k=true;},m=false,n=function(){m=true;};return function(o,p,q){var r=i(this)[o],s=k,t=m;k=m=false;if(r){var u=r.listeners;if(u.length){u=u.slice(0);for(var v=0;v<u.length;v++){var w=u[v].call(this,q,p,l,n);if(typeof w!='undefined')p=w;if(k||m)break;}}}var x=m||(typeof p=='undefined'?false:p);k=s;m=t;return x;};})(),fireOnce:function(k,l,m){var n=this.fire(k,l,m);delete i(this)[k];return n;},removeListener:function(k,l){var m=i(this)[k];if(m){var n=m.getListenerIndex(l);if(n>=0)m.listeners.splice(n,1);}},hasListeners:function(k){var l=i(this)[k];
return l&&l.listeners.length>0;}};})();}if(!h.editor){h.ELEMENT_MODE_NONE=0;h.ELEMENT_MODE_REPLACE=1;h.ELEMENT_MODE_APPENDTO=2;h.editor=function(i,j,k,l){var m=this;m._={instanceConfig:i,element:j,data:l};m.elementMode=k||0;h.event.call(m);m._init();};h.editor.replace=function(i,j){var k=i;if(typeof k!='object'){k=document.getElementById(i);if(!k){var l=0,m=document.getElementsByName(i);while((k=m[l++])&&k.tagName.toLowerCase()!='textarea'){}}if(!k)throw '[CKEDITOR.editor.replace] The element with id or name "'+i+'" was not found.';}k.style.visibility='hidden';return new h.editor(j,k,1);};h.editor.appendTo=function(i,j,k){var l=i;if(typeof l!='object'){l=document.getElementById(i);if(!l)throw '[CKEDITOR.editor.appendTo] The element with id "'+i+'" was not found.';}return new h.editor(j,l,2,k);};h.editor.prototype={_init:function(){var i=h.editor._pending||(h.editor._pending=[]);i.push(this);},fire:function(i,j){return h.event.prototype.fire.call(this,i,j,this);},fireOnce:function(i,j){return h.event.prototype.fireOnce.call(this,i,j,this);}};h.event.implementOn(h.editor.prototype,true);}if(!h.env)h.env=(function(){var i=navigator.userAgent.toLowerCase(),j=window.opera,k={ie:/*@cc_on!@*/false,opera:!!j&&j.version,webkit:i.indexOf(' applewebkit/')>-1,air:i.indexOf(' adobeair/')>-1,mac:i.indexOf('macintosh')>-1,quirks:document.compatMode=='BackCompat',mobile:i.indexOf('mobile')>-1,isCustomDomain:function(){if(!this.ie)return false;var n=document.domain,o=window.location.hostname;return n!=o&&n!='['+o+']';}};k.gecko=navigator.product=='Gecko'&&!k.webkit&&!k.opera;var l=0;if(k.ie){l=parseFloat(i.match(/msie (\d+)/)[1]);k.ie8=!!document.documentMode;k.ie8Compat=document.documentMode==8;k.ie7Compat=l==7&&!document.documentMode||document.documentMode==7;k.ie6Compat=l<7||k.quirks;}if(k.gecko){var m=i.match(/rv:([\d\.]+)/);if(m){m=m[1].split('.');l=m[0]*10000+(m[1]||0)*100+ +(m[2]||0);}}if(k.opera)l=parseFloat(j.version());if(k.air)l=parseFloat(i.match(/ adobeair\/(\d+)/)[1]);if(k.webkit)l=parseFloat(i.match(/ applewebkit\/(\d+)/)[1]);k.version=l;k.isCompatible=!k.mobile&&(k.ie&&l>=6||k.gecko&&l>=10801||k.opera&&l>=9.5||k.air&&l>=1||k.webkit&&l>=522||false);k.cssClass='cke_browser_'+(k.ie?'ie':k.gecko?'gecko':k.opera?'opera':k.air?'air':k.webkit?'webkit':'unknown');if(k.quirks)k.cssClass+=' cke_browser_quirks';if(k.ie){k.cssClass+=' cke_browser_ie'+(k.version<7?'6':k.version>=8?document.documentMode:'7');if(k.quirks)k.cssClass+=' cke_browser_iequirks';
}if(k.gecko&&l<10900)k.cssClass+=' cke_browser_gecko18';return k;})();var i=h.env;var j=i.ie;if(h.status=='unloaded')(function(){h.event.implementOn(h);h.loadFullCore=function(){if(h.status!='basic_ready'){h.loadFullCore._load=1;return;}delete h.loadFullCore;var l=document.createElement('script');l.type='text/javascript';l.src=h.basePath+'ckeditor.js';document.getElementsByTagName('head')[0].appendChild(l);};h.loadFullCoreTimeout=0;h.replaceClass='ckeditor';h.replaceByClassEnabled=1;var k=function(l,m,n,o){if(i.isCompatible){if(h.loadFullCore)h.loadFullCore();var p=n(l,m,o);h.add(p);return p;}return null;};h.replace=function(l,m){return k(l,m,h.editor.replace);};h.appendTo=function(l,m,n){return k(l,m,h.editor.appendTo,n);};h.add=function(l){var m=this._.pending||(this._.pending=[]);m.push(l);};h.replaceAll=function(){var l=document.getElementsByTagName('textarea');for(var m=0;m<l.length;m++){var n=null,o=l[m],p=o.name;if(!o.name&&!o.id)continue;if(typeof arguments[0]=='string'){var q=new RegExp('(?:^|\\s)'+arguments[0]+'(?:$|\\s)');if(!q.test(o.className))continue;}else if(typeof arguments[0]=='function'){n={};if(arguments[0](o,n)===false)continue;}this.replace(o,n);}};(function(){var l=function(){var m=h.loadFullCore,n=h.loadFullCoreTimeout;if(h.replaceByClassEnabled)h.replaceAll(h.replaceClass);h.status='basic_ready';if(m&&m._load)m();else if(n)setTimeout(function(){if(h.loadFullCore)h.loadFullCore();},n*1000);};if(window.addEventListener)window.addEventListener('load',l,false);else if(window.attachEvent)window.attachEvent('onload',l);})();h.status='basic_loaded';})();h.dom={};var k=h.dom;(function(){var l=[];h.on('reset',function(){l=[];});h.tools={arrayCompare:function(m,n){if(!m&&!n)return true;if(!m||!n||m.length!=n.length)return false;for(var o=0;o<m.length;o++){if(m[o]!=n[o])return false;}return true;},clone:function(m){var n;if(m&&m instanceof Array){n=[];for(var o=0;o<m.length;o++)n[o]=this.clone(m[o]);return n;}if(m===null||typeof m!='object'||m instanceof String||m instanceof Number||m instanceof Boolean||m instanceof Date||m instanceof RegExp)return m;n=new m.constructor();for(var p in m){var q=m[p];n[p]=this.clone(q);}return n;},capitalize:function(m){return m.charAt(0).toUpperCase()+m.substring(1).toLowerCase();},extend:function(m){var n=arguments.length,o,p;if(typeof (o=arguments[n-1])=='boolean')n--;else if(typeof (o=arguments[n-2])=='boolean'){p=arguments[n-1];n-=2;}for(var q=1;q<n;q++){var r=arguments[q];for(var s in r){if(o===true||m[s]==undefined)if(!p||s in p)m[s]=r[s];
}}return m;},prototypedCopy:function(m){var n=function(){};n.prototype=m;return new n();},isArray:function(m){return!!m&&m instanceof Array;},isEmpty:function(m){for(var n in m){if(m.hasOwnProperty(n))return false;}return true;},cssStyleToDomStyle:(function(){var m=document.createElement('div').style,n=typeof m.cssFloat!='undefined'?'cssFloat':typeof m.styleFloat!='undefined'?'styleFloat':'float';return function(o){if(o=='float')return n;else return o.replace(/-./g,function(p){return p.substr(1).toUpperCase();});};})(),buildStyleHtml:function(m){m=[].concat(m);var n,o=[];for(var p=0;p<m.length;p++){n=m[p];if(/@import|[{}]/.test(n))o.push('<style>'+n+'</style>');else o.push('<link type="text/css" rel=stylesheet href="'+n+'">');}return o.join('');},htmlEncode:function(m){var n=function(r){var s=new k.element('span');s.setText(r);return s.getHtml();},o=n('\n').toLowerCase()=='<br>'?function(r){return n(r).replace(/<br>/gi,'\n');}:n,p=n('>')=='>'?function(r){return o(r).replace(/>/g,'&gt;');}:o,q=n('  ')=='&nbsp; '?function(r){return p(r).replace(/&nbsp;/g,' ');}:p;this.htmlEncode=q;return this.htmlEncode(m);},htmlEncodeAttr:function(m){return m.replace(/"/g,'&quot;').replace(/</g,'&lt;').replace(/>/g,'&gt;');},getNextNumber:(function(){var m=0;return function(){return++m;};})(),getNextId:function(){return 'cke_'+this.getNextNumber();},override:function(m,n){return n(m);},setTimeout:function(m,n,o,p,q){if(!q)q=window;if(!o)o=q;return q.setTimeout(function(){if(p)m.apply(o,[].concat(p));else m.apply(o);},n||0);},trim:(function(){var m=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(n){return n.replace(m,'');};})(),ltrim:(function(){var m=/^[ \t\n\r]+/g;return function(n){return n.replace(m,'');};})(),rtrim:(function(){var m=/[ \t\n\r]+$/g;return function(n){return n.replace(m,'');};})(),indexOf:Array.prototype.indexOf?function(m,n){return m.indexOf(n);}:function(m,n){for(var o=0,p=m.length;o<p;o++){if(m[o]===n)return o;}return-1;},bind:function(m,n){return function(){return m.apply(n,arguments);};},createClass:function(m){var n=m.$,o=m.base,p=m.privates||m._,q=m.proto,r=m.statics;if(p){var s=n;n=function(){var w=this;var t=w._||(w._={});for(var u in p){var v=p[u];t[u]=typeof v=='function'?h.tools.bind(v,w):v;}s.apply(w,arguments);};}if(o){n.prototype=this.prototypedCopy(o.prototype);n.prototype['constructor']=n;n.prototype.base=function(){this.base=o.prototype.base;o.apply(this,arguments);this.base=arguments.callee;};}if(q)this.extend(n.prototype,q,true);if(r)this.extend(n,r,true);
return n;},addFunction:function(m,n){return l.push(function(){m.apply(n||this,arguments);})-1;},removeFunction:function(m){l[m]=null;},callFunction:function(m){var n=l[m];return n&&n.apply(window,Array.prototype.slice.call(arguments,1));},cssLength:(function(){var m=/^\d+(?:\.\d+)?$/;return function(n){return n+(m.test(n)?'px':'');};})(),repeat:function(m,n){return new Array(n+1).join(m);},tryThese:function(){var m;for(var n=0,o=arguments.length;n<o;n++){var p=arguments[n];try{m=p();break;}catch(q){}}return m;},genKey:function(){return Array.prototype.slice.call(arguments).join('-');}};})();var l=h.tools;h.dtd=(function(){var m=l.extend,n={isindex:1,fieldset:1},o={input:1,button:1,select:1,textarea:1,label:1},p=m({a:1},o),q=m({iframe:1},p),r={hr:1,ul:1,menu:1,div:1,blockquote:1,noscript:1,table:1,center:1,address:1,dir:1,pre:1,h5:1,dl:1,h4:1,noframes:1,h6:1,ol:1,h1:1,h3:1,h2:1},s={ins:1,del:1,script:1,style:1},t=m({b:1,acronym:1,bdo:1,'var':1,'#':1,abbr:1,code:1,br:1,i:1,cite:1,kbd:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,dfn:1,span:1},s),u=m({sub:1,img:1,object:1,sup:1,basefont:1,map:1,applet:1,font:1,big:1,small:1},t),v=m({p:1},u),w=m({iframe:1},u,o),x={img:1,noscript:1,br:1,kbd:1,center:1,button:1,basefont:1,h5:1,h4:1,samp:1,h6:1,ol:1,h1:1,h3:1,h2:1,form:1,font:1,'#':1,select:1,menu:1,ins:1,abbr:1,label:1,code:1,table:1,script:1,cite:1,input:1,iframe:1,strong:1,textarea:1,noframes:1,big:1,small:1,span:1,hr:1,sub:1,bdo:1,'var':1,div:1,object:1,sup:1,strike:1,dir:1,map:1,dl:1,applet:1,del:1,isindex:1,fieldset:1,ul:1,b:1,acronym:1,a:1,blockquote:1,i:1,u:1,s:1,tt:1,address:1,q:1,pre:1,p:1,em:1,dfn:1},y=m({a:1},w),z={tr:1},A={'#':1},B=m({param:1},x),C=m({form:1},n,q,r,v),D={li:1},E={style:1,script:1},F={base:1,link:1,meta:1,title:1},G=m(F,E),H={head:1,body:1},I={html:1},J={address:1,blockquote:1,center:1,dir:1,div:1,dl:1,fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hr:1,isindex:1,menu:1,noframes:1,ol:1,p:1,pre:1,table:1,ul:1};return{$nonBodyContent:m(I,H,F),$block:J,$blockLimit:{body:1,div:1,td:1,th:1,caption:1,form:1},$inline:y,$body:m({script:1,style:1},J),$cdata:{script:1,style:1},$empty:{area:1,base:1,br:1,col:1,hr:1,img:1,input:1,link:1,meta:1,param:1},$listItem:{dd:1,dt:1,li:1},$list:{ul:1,ol:1,dl:1},$nonEditable:{applet:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,script:1,textarea:1,param:1},$removeEmpty:{abbr:1,acronym:1,address:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,'var':1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},html:H,head:G,style:A,script:A,body:C,base:{},link:{},meta:{},title:A,col:{},tr:{td:1,th:1},img:{},colgroup:{col:1},noscript:C,td:C,br:{},th:C,center:C,kbd:y,button:m(v,r),basefont:{},h5:y,h4:y,samp:y,h6:y,ol:D,h1:y,h3:y,option:A,h2:y,form:m(n,q,r,v),select:{optgroup:1,option:1},font:y,ins:y,menu:D,abbr:y,label:y,table:{thead:1,col:1,tbody:1,tr:1,colgroup:1,caption:1,tfoot:1},code:y,script:A,tfoot:z,cite:y,li:C,input:{},iframe:C,strong:y,textarea:A,noframes:C,big:y,small:y,span:y,hr:{},dt:y,sub:y,optgroup:{option:1},param:{},bdo:y,'var':y,div:C,object:B,sup:y,dd:C,strike:y,area:{},dir:D,map:m({area:1,form:1,p:1},n,s,r),applet:B,dl:{dt:1,dd:1},del:y,isindex:{},fieldset:m({legend:1},x),thead:z,ul:D,acronym:y,b:y,a:w,blockquote:C,caption:y,i:y,u:y,tbody:z,s:y,address:m(q,v),tt:y,legend:y,q:y,pre:m(t,p),p:y,em:y,dfn:y};
})();var m=h.dtd;k.event=function(n){this.$=n;};k.event.prototype={getKey:function(){return this.$.keyCode||this.$.which;},getKeystroke:function(){var o=this;var n=o.getKey();if(o.$.ctrlKey||o.$.metaKey)n+=1000;if(o.$.shiftKey)n+=2000;if(o.$.altKey)n+=4000;return n;},preventDefault:function(n){var o=this.$;if(o.preventDefault)o.preventDefault();else o.returnValue=false;if(n)this.stopPropagation();},stopPropagation:function(){var n=this.$;if(n.stopPropagation)n.stopPropagation();else n.cancelBubble=true;},getTarget:function(){var n=this.$.target||this.$.srcElement;return n?new k.node(n):null;}};h.CTRL=1000;h.SHIFT=2000;h.ALT=4000;k.domObject=function(n){if(n)this.$=n;};k.domObject.prototype=(function(){var n=function(o,p){return function(q){if(typeof h!='undefined')o.fire(p,new k.event(q));};};return{getPrivate:function(){var o;if(!(o=this.getCustomData('_')))this.setCustomData('_',o={});return o;},on:function(o){var r=this;var p=r.getCustomData('_cke_nativeListeners');if(!p){p={};r.setCustomData('_cke_nativeListeners',p);}if(!p[o]){var q=p[o]=n(r,o);if(r.$.attachEvent)r.$.attachEvent('on'+o,q);else if(r.$.addEventListener)r.$.addEventListener(o,q,!!h.event.useCapture);}return h.event.prototype.on.apply(r,arguments);},removeListener:function(o){var r=this;h.event.prototype.removeListener.apply(r,arguments);if(!r.hasListeners(o)){var p=r.getCustomData('_cke_nativeListeners'),q=p&&p[o];if(q){if(r.$.detachEvent)r.$.detachEvent('on'+o,q);else if(r.$.removeEventListener)r.$.removeEventListener(o,q,false);delete p[o];}}},removeAllListeners:function(){var r=this;var o=r.getCustomData('_cke_nativeListeners');for(var p in o){var q=o[p];if(r.$.detachEvent)r.$.detachEvent('on'+p,q);else if(r.$.removeEventListener)r.$.removeEventListener(p,q,false);delete o[p];}}};})();(function(n){var o={};h.on('reset',function(){o={};});n.equals=function(p){return p&&p.$===this.$;};n.setCustomData=function(p,q){var r=this.getUniqueId(),s=o[r]||(o[r]={});s[p]=q;return this;};n.getCustomData=function(p){var q=this.$._cke_expando,r=q&&o[q];return r&&r[p];};n.removeCustomData=function(p){var q=this.$._cke_expando,r=q&&o[q],s=r&&r[p];if(typeof s!='undefined')delete r[p];return s||null;};n.clearCustomData=function(){this.removeAllListeners();var p=this.$._cke_expando;p&&delete o[p];};n.getUniqueId=function(){return this.$._cke_expando||(this.$._cke_expando=l.getNextNumber());};h.event.implementOn(n);})(k.domObject.prototype);k.window=function(n){k.domObject.call(this,n);};k.window.prototype=new k.domObject();
l.extend(k.window.prototype,{focus:function(){if(i.webkit&&this.$.parent)this.$.parent.focus();this.$.focus();},getViewPaneSize:function(){var n=this.$.document,o=n.compatMode=='CSS1Compat';return{width:(o?n.documentElement.clientWidth:n.body.clientWidth)||0,height:(o?n.documentElement.clientHeight:n.body.clientHeight)||0};},getScrollPosition:function(){var n=this.$;if('pageXOffset' in n)return{x:n.pageXOffset||0,y:n.pageYOffset||0};else{var o=n.document;return{x:o.documentElement.scrollLeft||o.body.scrollLeft||0,y:o.documentElement.scrollTop||o.body.scrollTop||0};}}});k.document=function(n){k.domObject.call(this,n);};var n=k.document;n.prototype=new k.domObject();l.extend(n.prototype,{appendStyleSheet:function(o){if(this.$.createStyleSheet)this.$.createStyleSheet(o);else{var p=new k.element('link');p.setAttributes({rel:'stylesheet',type:'text/css',href:o});this.getHead().append(p);}},appendStyleText:function(o){var r=this;if(r.$.createStyleSheet){var p=r.$.createStyleSheet('');p.cssText=o;}else{var q=new k.element('style',r);q.append(new k.text(o,r));r.getHead().append(q);}},createElement:function(o,p){var q=new k.element(o,this);if(p){if(p.attributes)q.setAttributes(p.attributes);if(p.styles)q.setStyles(p.styles);}return q;},createText:function(o){return new k.text(o,this);},focus:function(){this.getWindow().focus();},getById:function(o){var p=this.$.getElementById(o);return p?new k.element(p):null;},getByAddress:function(o,p){var q=this.$.documentElement;for(var r=0;q&&r<o.length;r++){var s=o[r];if(!p){q=q.childNodes[s];continue;}var t=-1;for(var u=0;u<q.childNodes.length;u++){var v=q.childNodes[u];if(p===true&&v.nodeType==3&&v.previousSibling&&v.previousSibling.nodeType==3)continue;t++;if(t==s){q=v;break;}}}return q?new k.node(q):null;},getElementsByTag:function(o,p){if(!(j&&!(document.documentMode>8))&&p)o=p+':'+o;return new k.nodeList(this.$.getElementsByTagName(o));},getHead:function(){var o=this.$.getElementsByTagName('head')[0];o=new k.element(o);return(this.getHead=function(){return o;})();},getBody:function(){var o=new k.element(this.$.body);return(this.getBody=function(){return o;})();},getDocumentElement:function(){var o=new k.element(this.$.documentElement);return(this.getDocumentElement=function(){return o;})();},getWindow:function(){var o=new k.window(this.$.parentWindow||this.$.defaultView);return(this.getWindow=function(){return o;})();}});k.node=function(o){if(o){switch(o.nodeType){case 9:return new n(o);case 1:return new k.element(o);case 3:return new k.text(o);
}k.domObject.call(this,o);}return this;};k.node.prototype=new k.domObject();h.NODE_ELEMENT=1;h.NODE_DOCUMENT=9;h.NODE_TEXT=3;h.NODE_COMMENT=8;h.NODE_DOCUMENT_FRAGMENT=11;h.POSITION_IDENTICAL=0;h.POSITION_DISCONNECTED=1;h.POSITION_FOLLOWING=2;h.POSITION_PRECEDING=4;h.POSITION_IS_CONTAINED=8;h.POSITION_CONTAINS=16;l.extend(k.node.prototype,{appendTo:function(o,p){o.append(this,p);return o;},clone:function(o,p){var q=this.$.cloneNode(o);if(!p){var r=function(s){if(s.nodeType!=1)return;s.removeAttribute('id',false);s.removeAttribute('_cke_expando',false);var t=s.childNodes;for(var u=0;u<t.length;u++)r(t[u]);};r(q);}return new k.node(q);},hasPrevious:function(){return!!this.$.previousSibling;},hasNext:function(){return!!this.$.nextSibling;},insertAfter:function(o){o.$.parentNode.insertBefore(this.$,o.$.nextSibling);return o;},insertBefore:function(o){o.$.parentNode.insertBefore(this.$,o.$);return o;},insertBeforeMe:function(o){this.$.parentNode.insertBefore(o.$,this.$);return o;},getAddress:function(o){var p=[],q=this.getDocument().$.documentElement,r=this.$;while(r&&r!=q){var s=r.parentNode,t=-1;if(s){for(var u=0;u<s.childNodes.length;u++){var v=s.childNodes[u];if(o&&v.nodeType==3&&v.previousSibling&&v.previousSibling.nodeType==3)continue;t++;if(v==r)break;}p.unshift(t);}r=s;}return p;},getDocument:function(){var o=new n(this.$.ownerDocument||this.$.parentNode.ownerDocument);return(this.getDocument=function(){return o;})();},getIndex:function(){var o=this.$,p=o.parentNode&&o.parentNode.firstChild,q=-1;while(p){q++;if(p==o)return q;p=p.nextSibling;}return-1;},getNextSourceNode:function(o,p,q){if(q&&!q.call){var r=q;q=function(u){return!u.equals(r);};}var s=!o&&this.getFirst&&this.getFirst(),t;if(!s){if(this.type==1&&q&&q(this,true)===false)return null;s=this.getNext();}while(!s&&(t=(t||this).getParent())){if(q&&q(t,true)===false)return null;s=t.getNext();}if(!s)return null;if(q&&q(s)===false)return null;if(p&&p!=s.type)return s.getNextSourceNode(false,p,q);return s;},getPreviousSourceNode:function(o,p,q){if(q&&!q.call){var r=q;q=function(u){return!u.equals(r);};}var s=!o&&this.getLast&&this.getLast(),t;if(!s){if(this.type==1&&q&&q(this,true)===false)return null;s=this.getPrevious();}while(!s&&(t=(t||this).getParent())){if(q&&q(t,true)===false)return null;s=t.getPrevious();}if(!s)return null;if(q&&q(s)===false)return null;if(p&&s.type!=p)return s.getPreviousSourceNode(false,p,q);return s;},getPrevious:function(o){var p=this.$,q;do{p=p.previousSibling;q=p&&new k.node(p);
}while(q&&o&&!o(q))return q;},getNext:function(o){var p=this.$,q;do{p=p.nextSibling;q=p&&new k.node(p);}while(q&&o&&!o(q))return q;},getParent:function(){var o=this.$.parentNode;return o&&o.nodeType==1?new k.node(o):null;},getParents:function(o){var p=this,q=[];do q[o?'push':'unshift'](p);while(p=p.getParent())return q;},getCommonAncestor:function(o){var q=this;if(o.equals(q))return q;if(o.contains&&o.contains(q))return o;var p=q.contains?q:q.getParent();do{if(p.contains(o))return p;}while(p=p.getParent())return null;},getPosition:function(o){var p=this.$,q=o.$;if(p.compareDocumentPosition)return p.compareDocumentPosition(q);if(p==q)return 0;if(this.type==1&&o.type==1){if(p.contains){if(p.contains(q))return 16+4;if(q.contains(p))return 8+2;}if('sourceIndex' in p)return p.sourceIndex<0||q.sourceIndex<0?1:p.sourceIndex<q.sourceIndex?4:2;}var r=this.getAddress(),s=o.getAddress(),t=Math.min(r.length,s.length);for(var u=0;u<=t-1;u++){if(r[u]!=s[u]){if(u<t)return r[u]<s[u]?4:2;break;}}return r.length<s.length?16+4:8+2;},getAscendant:function(o,p){var q=this.$;if(!p)q=q.parentNode;while(q){if(q.nodeName&&q.nodeName.toLowerCase()==o)return new k.node(q);q=q.parentNode;}return null;},hasAscendant:function(o,p){var q=this.$;if(!p)q=q.parentNode;while(q){if(q.nodeName&&q.nodeName.toLowerCase()==o)return true;q=q.parentNode;}return false;},move:function(o,p){o.append(this.remove(),p);},remove:function(o){var p=this.$,q=p.parentNode;if(q){if(o)for(var r;r=p.firstChild;)q.insertBefore(p.removeChild(r),p);q.removeChild(p);}return this;},replace:function(o){this.insertBefore(o);o.remove();},trim:function(){this.ltrim();this.rtrim();},ltrim:function(){var r=this;var o;while(r.getFirst&&(o=r.getFirst())){if(o.type==3){var p=l.ltrim(o.getText()),q=o.getLength();if(!p){o.remove();continue;}else if(p.length<q){o.split(q-p.length);r.$.removeChild(r.$.firstChild);}}break;}},rtrim:function(){var r=this;var o;while(r.getLast&&(o=r.getLast())){if(o.type==3){var p=l.rtrim(o.getText()),q=o.getLength();if(!p){o.remove();continue;}else if(p.length<q){o.split(p.length);r.$.lastChild.parentNode.removeChild(r.$.lastChild);}}break;}if(!j&&!i.opera){o=r.$.lastChild;if(o&&o.type==1&&o.nodeName.toLowerCase()=='br')o.parentNode.removeChild(o);}},isReadOnly:function(){var o=this;while(o){if(o.type==1){if(o.is('body')||o.getCustomData('_cke_notReadOnly'))break;if(o.getAttribute('contentEditable')=='false')return o;else if(o.getAttribute('contentEditable')=='true')break;}o=o.getParent();}return false;
}});k.nodeList=function(o){this.$=o;};k.nodeList.prototype={count:function(){return this.$.length;},getItem:function(o){var p=this.$[o];return p?new k.node(p):null;}};k.element=function(o,p){if(typeof o=='string')o=(p?p.$:document).createElement(o);k.domObject.call(this,o);};var o=k.element;o.get=function(p){return p&&(p.$?p:new o(p));};o.prototype=new k.node();o.createFromHtml=function(p,q){var r=new o('div',q);r.setHtml(p);return r.getFirst().remove();};o.setMarker=function(p,q,r,s){var t=q.getCustomData('list_marker_id')||q.setCustomData('list_marker_id',l.getNextNumber()).getCustomData('list_marker_id'),u=q.getCustomData('list_marker_names')||q.setCustomData('list_marker_names',{}).getCustomData('list_marker_names');p[t]=q;u[r]=1;return q.setCustomData(r,s);};o.clearAllMarkers=function(p){for(var q in p)o.clearMarkers(p,p[q],1);};o.clearMarkers=function(p,q,r){var s=q.getCustomData('list_marker_names'),t=q.getCustomData('list_marker_id');for(var u in s)q.removeCustomData(u);q.removeCustomData('list_marker_names');if(r){q.removeCustomData('list_marker_id');delete p[t];}};l.extend(o.prototype,{type:1,addClass:function(p){var q=this.$.className;if(q){var r=new RegExp('(?:^|\\s)'+p+'(?:\\s|$)','');if(!r.test(q))q+=' '+p;}this.$.className=q||p;},removeClass:function(p){var q=this.getAttribute('class');if(q){var r=new RegExp('(?:^|\\s+)'+p+'(?=\\s|$)','i');if(r.test(q)){q=q.replace(r,'').replace(/^\s+/,'');if(q)this.setAttribute('class',q);else this.removeAttribute('class');}}},hasClass:function(p){var q=new RegExp('(?:^|\\s+)'+p+'(?=\\s|$)','');return q.test(this.getAttribute('class'));},append:function(p,q){var r=this;if(typeof p=='string')p=r.getDocument().createElement(p);if(q)r.$.insertBefore(p.$,r.$.firstChild);else r.$.appendChild(p.$);return p;},appendHtml:function(p){var r=this;if(!r.$.childNodes.length)r.setHtml(p);else{var q=new o('div',r.getDocument());q.setHtml(p);q.moveChildren(r);}},appendText:function(p){if(this.$.text!=undefined)this.$.text+=p;else this.append(new k.text(p));},appendBogus:function(){var r=this;var p=r.getLast();while(p&&p.type==3&&!l.rtrim(p.getText()))p=p.getPrevious();if(!p||!p.is||!p.is('br')){var q=i.opera?r.getDocument().createText(''):r.getDocument().createElement('br');i.gecko&&q.setAttribute('type','_moz');r.append(q);}},breakParent:function(p){var s=this;var q=new k.range(s.getDocument());q.setStartAfter(s);q.setEndAfter(p);var r=q.extractContents();q.insertNode(s.remove());r.insertAfterNode(s);},contains:j||i.webkit?function(p){var q=this.$;
return p.type!=1?q.contains(p.getParent().$):q!=p.$&&q.contains(p.$);}:function(p){return!!(this.$.compareDocumentPosition(p.$)&16);},focus:function(){try{this.$.focus();}catch(p){}},getHtml:function(){var p=this.$.innerHTML;return j?p.replace(/<\?[^>]*>/g,''):p;},getOuterHtml:function(){var q=this;if(q.$.outerHTML)return q.$.outerHTML.replace(/<\?[^>]*>/,'');var p=q.$.ownerDocument.createElement('div');p.appendChild(q.$.cloneNode(true));return p.innerHTML;},setHtml:function(p){return this.$.innerHTML=p;},setText:function(p){o.prototype.setText=this.$.innerText!=undefined?function(q){return this.$.innerText=q;}:function(q){return this.$.textContent=q;};return this.setText(p);},getAttribute:(function(){var p=function(q){return this.$.getAttribute(q,2);};if(j&&(i.ie7Compat||i.ie6Compat))return function(q){var u=this;switch(q){case 'class':q='className';break;case 'tabindex':var r=p.call(u,q);if(r!==0&&u.$.tabIndex===0)r=null;return r;break;case 'checked':var s=u.$.attributes.getNamedItem(q),t=s.specified?s.nodeValue:u.$.checked;return t?'checked':null;case 'hspace':return u.$.hspace;case 'style':return u.$.style.cssText;}return p.call(u,q);};else return p;})(),getChildren:function(){return new k.nodeList(this.$.childNodes);},getComputedStyle:j?function(p){return this.$.currentStyle[l.cssStyleToDomStyle(p)];}:function(p){return this.getWindow().$.getComputedStyle(this.$,'').getPropertyValue(p);},getDtd:function(){var p=m[this.getName()];this.getDtd=function(){return p;};return p;},getElementsByTag:n.prototype.getElementsByTag,getTabIndex:j?function(){var p=this.$.tabIndex;if(p===0&&!m.$tabIndex[this.getName()]&&parseInt(this.getAttribute('tabindex'),10)!==0)p=-1;return p;}:i.webkit?function(){var p=this.$.tabIndex;if(p==undefined){p=parseInt(this.getAttribute('tabindex'),10);if(isNaN(p))p=-1;}return p;}:function(){return this.$.tabIndex;},getText:function(){return this.$.textContent||this.$.innerText||'';},getWindow:function(){return this.getDocument().getWindow();},getId:function(){return this.$.id||null;},getNameAtt:function(){return this.$.name||null;},getName:function(){var p=this.$.nodeName.toLowerCase();if(j&&!(document.documentMode>8)){var q=this.$.scopeName;if(q!='HTML')p=q.toLowerCase()+':'+p;}return(this.getName=function(){return p;})();},getValue:function(){return this.$.value;},getFirst:function(p){var q=this.$.firstChild,r=q&&new k.node(q);if(r&&p&&!p(r))r=r.getNext(p);return r;},getLast:function(p){var q=this.$.lastChild,r=q&&new k.node(q);if(r&&p&&!p(r))r=r.getPrevious(p);
return r;},getStyle:function(p){return this.$.style[l.cssStyleToDomStyle(p)];},is:function(){var p=this.getName();for(var q=0;q<arguments.length;q++){if(arguments[q]==p)return true;}return false;},isEditable:function(){var p=this.getName(),q=!m.$nonEditable[p]&&(m[p]||m.span);return q&&q['#'];},isIdentical:function(p){if(this.getName()!=p.getName())return false;var q=this.$.attributes,r=p.$.attributes,s=q.length,t=r.length;for(var u=0;u<s;u++){var v=q[u];if((!j||v.specified&&v.nodeName!='_cke_expando')&&v.nodeValue!=p.getAttribute(v.nodeName))return false;}if(j)for(u=0;u<t;u++){v=r[u];if(v.specified&&v.nodeName!='_cke_expando'&&v.nodeValue!=this.getAttribute(v.nodeName))return false;}return true;},isVisible:function(){var p=!!this.$.offsetHeight&&this.getComputedStyle('visibility')!='hidden',q,r;if(p&&(i.webkit||i.opera)){q=this.getWindow();if(!q.equals(h.document.getWindow())&&(r=q.$.frameElement))p=new o(r).isVisible();}return p;},isEmptyInlineRemoveable:function(){if(!m.$removeEmpty[this.getName()])return false;var p=this.getChildren();for(var q=0,r=p.count();q<r;q++){var s=p.getItem(q);if(s.type==1&&s.getAttribute('_cke_bookmark'))continue;if(s.type==1&&!s.isEmptyInlineRemoveable()||s.type==3&&l.trim(s.getText()))return false;}return true;},hasAttributes:j&&(i.ie7Compat||i.ie6Compat)?function(){var p=this.$.attributes;for(var q=0;q<p.length;q++){var r=p[q];switch(r.nodeName){case 'class':if(this.getAttribute('class'))return true;case '_cke_expando':continue;default:if(r.specified)return true;}}return false;}:function(){var p=this.$.attributes,q=p.length,r={_cke_expando:1,_moz_dirty:1};return q>0&&(q>2||!r[p[0].nodeName]||q==2&&!r[p[1].nodeName]);},hasAttribute:function(p){var q=this.$.attributes.getNamedItem(p);return!!(q&&q.specified);},hide:function(){this.setStyle('display','none');},moveChildren:function(p,q){var r=this.$;p=p.$;if(r==p)return;var s;if(q)while(s=r.lastChild)p.insertBefore(r.removeChild(s),p.firstChild);else while(s=r.firstChild)p.appendChild(r.removeChild(s));},mergeSiblings:(function(){function p(q,r,s){if(r&&r.type==1){var t=[];while(r.getAttribute('_cke_bookmark')||r.isEmptyInlineRemoveable()){t.push(r);r=s?r.getNext():r.getPrevious();if(!r||r.type!=1)return;}if(q.isIdentical(r)){var u=s?q.getLast():q.getFirst();while(t.length)t.shift().move(q,!s);r.moveChildren(q,!s);r.remove();if(u&&u.type==1)u.mergeSiblings();}}};return function(){var q=this;if(!(m.$removeEmpty[q.getName()]||q.is('a')))return;p(q,q.getNext(),true);p(q,q.getPrevious());
};})(),show:function(){this.setStyles({display:'',visibility:''});},setAttribute:(function(){var p=function(q,r){this.$.setAttribute(q,r);return this;};if(j&&(i.ie7Compat||i.ie6Compat))return function(q,r){var s=this;if(q=='class')s.$.className=r;else if(q=='style')s.$.style.cssText=r;else if(q=='tabindex')s.$.tabIndex=r;else if(q=='checked')s.$.checked=r;else p.apply(s,arguments);return s;};else return p;})(),setAttributes:function(p){for(var q in p)this.setAttribute(q,p[q]);return this;},setValue:function(p){this.$.value=p;return this;},removeAttribute:(function(){var p=function(q){this.$.removeAttribute(q);};if(j&&(i.ie7Compat||i.ie6Compat))return function(q){if(q=='class')q='className';else if(q=='tabindex')q='tabIndex';p.call(this,q);};else return p;})(),removeAttributes:function(p){if(l.isArray(p))for(var q=0;q<p.length;q++)this.removeAttribute(p[q]);else for(var r in p)p.hasOwnProperty(r)&&this.removeAttribute(r);},removeStyle:function(p){var q=this;q.setStyle(p,'');if(q.$.style.removeAttribute)q.$.style.removeAttribute(l.cssStyleToDomStyle(p));if(!q.$.style.cssText)q.removeAttribute('style');},setStyle:function(p,q){this.$.style[l.cssStyleToDomStyle(p)]=q;return this;},setStyles:function(p){for(var q in p)this.setStyle(q,p[q]);return this;},setOpacity:function(p){if(j){p=Math.round(p*100);this.setStyle('filter',p>=100?'':'progid:DXImageTransform.Microsoft.Alpha(opacity='+p+')');}else this.setStyle('opacity',p);},unselectable:i.gecko?function(){this.$.style.MozUserSelect='none';this.on('dragstart',function(p){p.data.preventDefault();});}:i.webkit?function(){this.$.style.KhtmlUserSelect='none';this.on('dragstart',function(p){p.data.preventDefault();});}:function(){if(j||i.opera){var p=this.$,q,r=0;p.unselectable='on';while(q=p.all[r++])switch(q.tagName.toLowerCase()){case 'iframe':case 'textarea':case 'input':case 'select':break;default:q.unselectable='on';}}},getPositionedAncestor:function(){var p=this;while(p.getName()!='html'){if(p.getComputedStyle('position')!='static')return p;p=p.getParent();}return null;},getDocumentPosition:function(p){var K=this;var q=0,r=0,s=K.getDocument().getBody(),t=K.getDocument().$.compatMode=='BackCompat',u=K.getDocument();if(document.documentElement.getBoundingClientRect){var v=K.$.getBoundingClientRect(),w=u.$,x=w.documentElement,y=x.clientTop||s.$.clientTop||0,z=x.clientLeft||s.$.clientLeft||0,A=true;if(j){var B=u.getDocumentElement().contains(K),C=u.getBody().contains(K);A=t&&C||!t&&B;}if(A){q=v.left+(!t&&x.scrollLeft||s.$.scrollLeft);
q-=z;r=v.top+(!t&&x.scrollTop||s.$.scrollTop);r-=y;}}else{var D=K,E=null,F;while(D&&!(D.getName()=='body'||D.getName()=='html')){q+=D.$.offsetLeft-D.$.scrollLeft;r+=D.$.offsetTop-D.$.scrollTop;if(!D.equals(K)){q+=D.$.clientLeft||0;r+=D.$.clientTop||0;}var G=E;while(G&&!G.equals(D)){q-=G.$.scrollLeft;r-=G.$.scrollTop;G=G.getParent();}E=D;D=(F=D.$.offsetParent)?new o(F):null;}}if(p){var H=K.getWindow(),I=p.getWindow();if(!H.equals(I)&&H.$.frameElement){var J=new o(H.$.frameElement).getDocumentPosition(p);q+=J.x;r+=J.y;}}if(!document.documentElement.getBoundingClientRect)if(i.gecko&&!t){q+=K.$.clientLeft?1:0;r+=K.$.clientTop?1:0;}return{x:q,y:r};},scrollIntoView:function(p){var v=this;var q=v.getWindow(),r=q.getViewPaneSize().height,s=r*-1;if(p)s+=r;else{s+=v.$.offsetHeight||0;s+=parseInt(v.getComputedStyle('marginBottom')||0,10)||0;}var t=v.getDocumentPosition();s+=t.y;s=s<0?0:s;var u=q.getScrollPosition().y;if(s>u||s<u-r)q.$.scrollTo(0,s);},setState:function(p){var q=this;switch(p){case 1:q.addClass('cke_on');q.removeClass('cke_off');q.removeClass('cke_disabled');break;case 0:q.addClass('cke_disabled');q.removeClass('cke_off');q.removeClass('cke_on');break;default:q.addClass('cke_off');q.removeClass('cke_on');q.removeClass('cke_disabled');break;}},getFrameDocument:function(){var p=this.$;try{p.contentWindow.document;}catch(q){p.src=p.src;if(j&&i.version<7)window.showModalDialog('javascript:document.write("<script>window.setTimeout(function(){window.close();},50);</script>")');}return p&&new n(p.contentWindow.document);},copyAttributes:function(p,q){var w=this;var r=w.$.attributes;q=q||{};for(var s=0;s<r.length;s++){var t=r[s],u=t.nodeName.toLowerCase(),v;if(u in q)continue;if(u=='checked'&&(v=w.getAttribute(u)))p.setAttribute(u,v);else if(t.specified||j&&t.nodeValue&&u=='value'){v=w.getAttribute(u);if(v===null)v=t.nodeValue;p.setAttribute(u,v);}}if(w.$.style.cssText!=='')p.$.style.cssText=w.$.style.cssText;},renameNode:function(p){var s=this;if(s.getName()==p)return;var q=s.getDocument(),r=new o(p,q);s.copyAttributes(r);s.moveChildren(r);s.getParent()&&s.$.parentNode.replaceChild(r.$,s.$);r.$._cke_expando=s.$._cke_expando;s.$=r.$;},getChild:function(p){var q=this.$;if(!p.slice)q=q.childNodes[p];else while(p.length>0&&q)q=q.childNodes[p.shift()];return q?new k.node(q):null;},getChildCount:function(){return this.$.childNodes.length;},disableContextMenu:function(){this.on('contextmenu',function(p){if(!p.data.getTarget().hasClass('cke_enable_context_menu'))p.data.preventDefault();
});},setSize:(function(){var p={width:['border-left-width','border-right-width','padding-left','padding-right'],height:['border-top-width','border-bottom-width','padding-top','padding-bottom']};return function(q,r,s){if(typeof r=='number'){if(s&&!(j&&i.quirks)){var t=0;for(var u=0,v=p[q].length;u<v;u++)t+=parseInt(this.getComputedStyle(p[q][u])||0,10)||0;r-=t;}this.setStyle(q,r+'px');}};})(),getDirection:function(p){return p?this.getComputedStyle('direction'):this.getStyle('direction')||this.getAttribute('dir');}});h.command=function(p,q){this.uiItems=[];this.exec=function(r){if(this.state==0)return false;if(this.editorFocus)p.focus();return q.exec.call(this,p,r)!==false;};l.extend(this,q,{modes:{wysiwyg:1},editorFocus:1,state:2});h.event.call(this);};h.command.prototype={enable:function(){var p=this;if(p.state==0)p.setState(!p.preserveState||typeof p.previousState=='undefined'?2:p.previousState);},disable:function(){this.setState(0);},setState:function(p){var q=this;if(q.state==p)return false;q.previousState=q.state;q.state=p;q.fire('state');return true;},toggleState:function(){var p=this;if(p.state==2)p.setState(1);else if(p.state==1)p.setState(2);}};h.event.implementOn(h.command.prototype,true);h.ENTER_P=1;h.ENTER_BR=2;h.ENTER_DIV=3;h.config={customConfig:'config.js',autoUpdateElement:true,baseHref:'',contentsCss:h.basePath+'contents.css',contentsLangDirection:'ui',contentsLanguage:'',language:'',defaultLanguage:'en',enterMode:1,forceEnterMode:false,shiftEnterMode:2,corePlugins:'',docType:'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">',bodyId:'',bodyClass:'',fullPage:false,height:200,plugins:'about,a11yhelp,basicstyles,bidi,blockquote,button,clipboard,colorbutton,colordialog,contextmenu,dialogadvtab,div,elementspath,enterkey,entities,filebrowser,find,flash,font,format,forms,horizontalrule,htmldataprocessor,image,indent,justify,keystrokes,link,list,liststyle,maximize,newpage,pagebreak,pastefromword,pastetext,popup,preview,print,removeformat,resize,save,scayt,smiley,showblocks,showborders,sourcearea,stylescombo,table,tabletools,specialchar,tab,templates,toolbar,undo,wysiwygarea,wsc',extraPlugins:'',removePlugins:'',protectedSource:[],tabIndex:0,theme:'default',skin:'kama',width:'',baseFloatZIndex:10000};var p=h.config;h.focusManager=function(q){if(q.focusManager)return q.focusManager;this.hasFocus=false;this._={editor:q};return this;};h.focusManager.prototype={focus:function(){var r=this;
if(r._.timer)clearTimeout(r._.timer);if(!r.hasFocus){if(h.currentInstance)h.currentInstance.focusManager.forceBlur();var q=r._.editor;q.container.getChild(1).addClass('cke_focus');r.hasFocus=true;q.fire('focus');}},blur:function(){var q=this;if(q._.timer)clearTimeout(q._.timer);q._.timer=setTimeout(function(){delete q._.timer;q.forceBlur();},100);},forceBlur:function(){if(this.hasFocus){var q=this._.editor;q.container.getChild(1).removeClass('cke_focus');this.hasFocus=false;q.fire('blur');}}};(function(){var q={};h.lang={languages:{af:1,ar:1,bg:1,bn:1,bs:1,ca:1,cs:1,cy:1,da:1,de:1,el:1,'en-au':1,'en-ca':1,'en-gb':1,en:1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fo:1,'fr-ca':1,fr:1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,is:1,it:1,ja:1,km:1,ko:1,lt:1,lv:1,mn:1,ms:1,nb:1,nl:1,no:1,pl:1,'pt-br':1,pt:1,ro:1,ru:1,sk:1,sl:1,'sr-latn':1,sr:1,sv:1,th:1,tr:1,uk:1,vi:1,'zh-cn':1,zh:1},load:function(r,s,t){if(!r||!h.lang.languages[r])r=this.detect(s,r);if(!this[r])h.scriptLoader.load(h.getUrl('lang/'+r+'.js'),function(){t(r,this[r]);},this);else t(r,this[r]);},detect:function(r,s){var t=this.languages;s=s||navigator.userLanguage||navigator.language;var u=s.toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/),v=u[1],w=u[2];if(t[v+'-'+w])v=v+'-'+w;else if(!t[v])v=null;h.lang.detect=v?function(){return v;}:function(x){return x;};return v||r;}};})();h.scriptLoader=(function(){var q={},r={};return{load:function(s,t,u,v,w){var x=typeof s=='string';if(x)s=[s];if(!u)u=h;var y=s.length,z=[],A=[],B=function(G){if(t)if(x)t.call(u,G);else t.call(u,z,A);};if(y===0){B(true);return;}var C=function(G,H){(H?z:A).push(G);if(--y<=0){w&&h.document.getDocumentElement().removeStyle('cursor');B(H);}},D=function(G,H){q[G]=1;var I=r[G];delete r[G];for(var J=0;J<I.length;J++)I[J](G,H);},E=function(G){if(v!==true&&q[G]){C(G,true);return;}var H=r[G]||(r[G]=[]);H.push(C);if(H.length>1)return;var I=new o('script');I.setAttributes({type:'text/javascript',src:G});if(t)if(j)I.$.onreadystatechange=function(){if(I.$.readyState=='loaded'||I.$.readyState=='complete'){I.$.onreadystatechange=null;D(G,true);}};else{I.$.onload=function(){setTimeout(function(){D(G,true);},0);};I.$.onerror=function(){D(G,false);};}I.appendTo(h.document.getHead());};w&&h.document.getDocumentElement().setStyle('cursor','wait');for(var F=0;F<y;F++)E(s[F]);},loadCode:function(s){var t=new o('script');t.setAttribute('type','text/javascript');t.appendText(s);t.appendTo(h.document.getHead());}};})();h.resourceManager=function(q,r){var s=this;s.basePath=q;s.fileName=r;
s.registered={};s.loaded={};s.externals={};s._={waitingList:{}};};h.resourceManager.prototype={add:function(q,r){if(this.registered[q])throw '[CKEDITOR.resourceManager.add] The resource name "'+q+'" is already registered.';h.fire(q+l.capitalize(this.fileName)+'Ready',this.registered[q]=r||{});},get:function(q){return this.registered[q]||null;},getPath:function(q){var r=this.externals[q];return h.getUrl(r&&r.dir||this.basePath+q+'/');},getFilePath:function(q){var r=this.externals[q];return h.getUrl(this.getPath(q)+(r&&typeof r.file=='string'?r.file:this.fileName+'.js'));},addExternal:function(q,r,s){q=q.split(',');for(var t=0;t<q.length;t++){var u=q[t];this.externals[u]={dir:r,file:s};}},load:function(q,r,s){if(!l.isArray(q))q=q?[q]:[];var t=this.loaded,u=this.registered,v=[],w={},x={};for(var y=0;y<q.length;y++){var z=q[y];if(!z)continue;if(!t[z]&&!u[z]){var A=this.getFilePath(z);v.push(A);if(!(A in w))w[A]=[];w[A].push(z);}else x[z]=this.get(z);}h.scriptLoader.load(v,function(B,C){if(C.length)throw '[CKEDITOR.resourceManager.load] Resource name "'+w[C[0]].join(',')+'" was not found at "'+C[0]+'".';for(var D=0;D<B.length;D++){var E=w[B[D]];for(var F=0;F<E.length;F++){var G=E[F];x[G]=this.get(G);t[G]=1;}}r.call(s,x);},this);}};h.plugins=new h.resourceManager('plugins/','plugin');var q=h.plugins;q.load=l.override(q.load,function(r){return function(s,t,u){var v={},w=function(x){r.call(this,x,function(y){l.extend(v,y);var z=[];for(var A in y){var B=y[A],C=B&&B.requires;if(C)for(var D=0;D<C.length;D++){if(!v[C[D]])z.push(C[D]);}}if(z.length)w.call(this,z);else{for(A in v){B=v[A];if(B.onLoad&&!B.onLoad._called){B.onLoad();B.onLoad._called=1;}}if(t)t.call(u||window,v);}},this);};w.call(this,s);};});q.setLang=function(r,s,t){var u=this.get(r),v=u.lang||(u.lang={});v[s]=t;};(function(){var r={},s=function(t,u){var v=function(){w.removeAllListeners();r[t]=1;u();},w=new o('img');w.on('load',v);w.on('error',v);w.setAttribute('src',t);};h.imageCacher={load:function(t,u){var v=t.length,w=new h.event();w.on('loaded',function(){w.finished=1;});if(u)w.on('loaded',u);var x=function(){if(--v===0)w.fire('loaded');};for(var y=0;y<t.length;y++){var z=t[y];if(r[z])x();else s(z,x);}return w;}};})();h.skins=(function(){var r={},s={},t={},u=function(v,w,x,y){var z=r[w];if(!v.skin){v.skin=z;if(z.init)z.init(v);}var A=function(K){for(var L=0;L<K.length;L++)K[L]=h.getUrl(t[w]+K[L]);};function B(K,L){return K.replace(/url\s*\(([\s'"]*)(.*?)([\s"']*)\)/g,function(M,N,O,P){if(/^\/|^\w?:/.test(O))return M;
else return 'url('+L+N+O+P+')';});};var C=z.preload;if(C&&C.length>0){if(!s[w]){A(C);s[w]=h.imageCacher.load(C);}if(!s[w].finished){s[w].on('loaded',function(){u(v,w,x,y);});return;}}x=z[x];var D=!x||!!x._isLoaded;if(D)y&&y();else{var E=x._pending||(x._pending=[]);E.push(y);if(E.length>1)return;var F=!x.css||!x.css.length,G=!x.js||!x.js.length,H=function(){if(F&&G){x._isLoaded=1;for(var K=0;K<E.length;K++){if(E[K])E[K]();}}};if(!F){var I=x.css;if(l.isArray(I)){A(I);for(var J=0;J<I.length;J++)h.document.appendStyleSheet(I[J]);}else{I=B(I,h.getUrl(t[w]));h.document.appendStyleText(I);}x.css=I;F=1;}if(!G){A(x.js);h.scriptLoader.load(x.js,function(){G=1;H();});}H();}};return{add:function(v,w){r[v]=w;w.skinPath=t[v]||(t[v]=h.getUrl('skins/'+v+'/'));},load:function(v,w,x){var y=v.skinName,z=v.skinPath;if(r[y])u(v,y,w,x);else{t[y]=z;h.scriptLoader.load(h.getUrl(z+'skin.js'),function(){u(v,y,w,x);});}}};})();h.themes=new h.resourceManager('themes/','theme');h.ui=function(r){if(r.ui)return r.ui;this._={handlers:{},items:{},editor:r};return this;};var r=h.ui;r.prototype={add:function(s,t,u){this._.items[s]={type:t,command:u.command||null,args:Array.prototype.slice.call(arguments,2)};},create:function(s){var x=this;var t=x._.items[s],u=t&&x._.handlers[t.type],v=t&&t.command&&x._.editor.getCommand(t.command),w=u&&u.create.apply(x,t.args);if(v)v.uiItems.push(w);return w;},addHandler:function(s,t){this._.handlers[s]=t;}};(function(){var s=0,t=function(){var E='editor'+ ++s;return h.instances&&h.instances[E]?t():E;},u={},v=function(E){var F=E.config.customConfig;if(!F)return false;F=h.getUrl(F);var G=u[F]||(u[F]={});if(G.fn){G.fn.call(E,E.config);if(h.getUrl(E.config.customConfig)==F||!v(E))E.fireOnce('customConfigLoaded');}else h.scriptLoader.load(F,function(){if(h.editorConfig)G.fn=h.editorConfig;else G.fn=function(){};v(E);});return true;},w=function(E,F){E.on('customConfigLoaded',function(){if(F){if(F.on)for(var G in F.on)E.on(G,F.on[G]);l.extend(E.config,F,true);delete E.config.on;}x(E);});if(F&&F.customConfig!=undefined)E.config.customConfig=F.customConfig;if(!v(E))E.fireOnce('customConfigLoaded');},x=function(E){var F=E.config.skin.split(','),G=F[0],H=h.getUrl(F[1]||'skins/'+G+'/');E.skinName=G;E.skinPath=H;E.skinClass='cke_skin_'+G;E.tabIndex=E.config.tabIndex||E.element.getAttribute('tabindex')||0;E.fireOnce('configLoaded');A(E);},y=function(E){h.lang.load(E.config.language,E.config.defaultLanguage,function(F,G){E.langCode=F;E.lang=l.prototypedCopy(G);if(i.gecko&&i.version<10900&&E.lang.dir=='rtl')E.lang.dir='ltr';
var H=E.config;H.contentsLangDirection=='ui'&&(H.contentsLangDirection=E.lang.dir);z(E);});},z=function(E){var F=E.config,G=F.plugins,H=F.extraPlugins,I=F.removePlugins;if(H){var J=new RegExp('(?:^|,)(?:'+H.replace(/\s*,\s*/g,'|')+')(?=,|$)','g');G=G.replace(J,'');G+=','+H;}if(I){J=new RegExp('(?:^|,)(?:'+I.replace(/\s*,\s*/g,'|')+')(?=,|$)','g');G=G.replace(J,'');}q.load(G.split(','),function(K){var L=[],M=[],N=[];E.plugins=K;for(var O in K){var P=K[O],Q=P.lang,R=q.getPath(O),S=null;P.path=R;if(Q){S=l.indexOf(Q,E.langCode)>=0?E.langCode:Q[0];if(!P.lang[S])N.push(h.getUrl(R+'lang/'+S+'.js'));else{l.extend(E.lang,P.lang[S]);S=null;}}M.push(S);L.push(P);}h.scriptLoader.load(N,function(){var T=['beforeInit','init','afterInit'];for(var U=0;U<T.length;U++)for(var V=0;V<L.length;V++){var W=L[V];if(U===0&&M[V]&&W.lang)l.extend(E.lang,W.lang[M[V]]);if(W[T[U]])W[T[U]](E);}E.fire('pluginsLoaded');B(E);});});},A=function(E){h.skins.load(E,'editor',function(){y(E);});},B=function(E){var F=E.config.theme;h.themes.load(F,function(){var G=E.theme=h.themes.get(F);G.path=h.themes.getPath(F);G.build(E);if(E.config.autoUpdateElement)C(E);});},C=function(E){var F=E.element;if(E.elementMode==1&&F.is('textarea')){var G=F.$.form&&new o(F.$.form);if(G){function H(){E.updateElement();};G.on('submit',H);if(!G.$.submit.nodeName)G.$.submit=l.override(G.$.submit,function(I){return function(){E.updateElement();if(I.apply)I.apply(this,arguments);else I();};});E.on('destroy',function(){G.removeListener('submit',H);});}}};function D(){var E,F=this._.commands,G=this.mode;for(var H in F){E=F[H];E[E.startDisabled?'disable':E.modes[G]?'enable':'disable']();}};h.editor.prototype._init=function(){var G=this;var E=o.get(G._.element),F=G._.instanceConfig;delete G._.element;delete G._.instanceConfig;G._.commands={};G._.styles=[];G.element=E;G.name=E&&G.elementMode==1&&(E.getId()||E.getNameAtt())||t();if(G.name in h.instances)throw '[CKEDITOR.editor] The instance "'+G.name+'" already exists.';G.id=l.getNextId();G.config=l.prototypedCopy(p);G.ui=new r(G);G.focusManager=new h.focusManager(G);h.fire('instanceCreated',null,G);G.on('mode',D,null,null,1);w(G,F);};})();l.extend(h.editor.prototype,{addCommand:function(s,t){return this._.commands[s]=new h.command(this,t);},addCss:function(s){this._.styles.push(s);},destroy:function(s){var y=this;if(!s)y.updateElement();if(y.mode)y._.modes[y.mode].unload(y.getThemeSpace('contents'));y.theme.destroy(y);var t,u=0,v,w,x;if(y.toolbox){t=y.toolbox.toolbars;for(;u<t.length;
u++){w=t[u].items;for(v=0;v<w.length;v++){x=w[v];if(x.clickFn)l.removeFunction(x.clickFn);if(x.keyDownFn)l.removeFunction(x.keyDownFn);if(x.index)r.button._.instances[x.index]=null;}}}if(y.contextMenu)l.removeFunction(y.contextMenu._.functionId);if(y._.filebrowserFn)l.removeFunction(y._.filebrowserFn);y.fire('destroy');h.remove(y);h.fire('instanceDestroyed',null,y);},execCommand:function(s,t){var u=this.getCommand(s),v={name:s,commandData:t,command:u};if(u&&u.state!=0)if(this.fire('beforeCommandExec',v)!==true){v.returnValue=u.exec(v.commandData);if(!u.async&&this.fire('afterCommandExec',v)!==true)return v.returnValue;}return false;},getCommand:function(s){return this._.commands[s];},getData:function(){var u=this;u.fire('beforeGetData');var s=u._.data;if(typeof s!='string'){var t=u.element;if(t&&u.elementMode==1)s=t.is('textarea')?t.getValue():t.getHtml();else s='';}s={dataValue:s};u.fire('getData',s);return s.dataValue;},getSnapshot:function(){var s=this.fire('getSnapshot');if(typeof s!='string'){var t=this.element;if(t&&this.elementMode==1)s=t.is('textarea')?t.getValue():t.getHtml();}return s;},loadSnapshot:function(s){this.fire('loadSnapshot',s);},setData:function(s,t){if(t)this.on('dataReady',function(v){v.removeListener();t.call(v.editor);});var u={dataValue:s};this.fire('setData',u);this._.data=u.dataValue;this.fire('afterSetData',u);},insertHtml:function(s){this.fire('insertHtml',s);},insertElement:function(s){this.fire('insertElement',s);},checkDirty:function(){return this.mayBeDirty&&this._.previousValue!==this.getSnapshot();},resetDirty:function(){if(this.mayBeDirty)this._.previousValue=this.getSnapshot();},updateElement:function(){var u=this;var s=u.element;if(s&&u.elementMode==1){var t=u.getData();if(u.config.htmlEncodeOutput)t=l.htmlEncode(t);if(s.is('textarea'))s.setValue(t);else s.setHtml(t);}}});h.on('loaded',function(){var s=h.editor._pending;if(s){delete h.editor._pending;for(var t=0;t<s.length;t++)s[t]._init();}});h.htmlParser=function(){this._={htmlPartsRegex:new RegExp("<(?:(?:\\/([^>]+)>)|(?:!--([\\S|\\s]*?)-->)|(?:([^\\s>]+)\\s*((?:(?:[^\"'>]+)|(?:\"[^\"]*\")|(?:'[^']*'))*)\\/?>))",'g')};};(function(){var s=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,t={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1};h.htmlParser.prototype={onTagOpen:function(){},onTagClose:function(){},onText:function(){},onCDATA:function(){},onComment:function(){},parse:function(u){var H=this;
var v,w,x=0,y;while(v=H._.htmlPartsRegex.exec(u)){var z=v.index;if(z>x){var A=u.substring(x,z);if(y)y.push(A);else H.onText(A);}x=H._.htmlPartsRegex.lastIndex;if(w=v[1]){w=w.toLowerCase();if(y&&m.$cdata[w]){H.onCDATA(y.join(''));y=null;}if(!y){H.onTagClose(w);continue;}}if(y){y.push(v[0]);continue;}if(w=v[3]){w=w.toLowerCase();if(/="/.test(w))continue;var B={},C,D=v[4],E=!!(D&&D.charAt(D.length-1)=='/');if(D)while(C=s.exec(D)){var F=C[1].toLowerCase(),G=C[2]||C[3]||C[4]||'';if(!G&&t[F])B[F]=F;else B[F]=G;}H.onTagOpen(w,B,E);if(!y&&m.$cdata[w])y=[];continue;}if(w=v[2])H.onComment(w);}if(u.length>x)H.onText(u.substring(x,u.length));}};})();h.htmlParser.comment=function(s){this.value=s;this._={isBlockLike:false};};h.htmlParser.comment.prototype={type:8,writeHtml:function(s,t){var u=this.value;if(t){if(!(u=t.onComment(u,this)))return;if(typeof u!='string'){u.parent=this.parent;u.writeHtml(s,t);return;}}s.comment(u);}};(function(){var s=/[\t\r\n ]{2,}|[\t\r\n]/g;h.htmlParser.text=function(t){this.value=t;this._={isBlockLike:false};};h.htmlParser.text.prototype={type:3,writeHtml:function(t,u){var v=this.value;if(u&&!(v=u.onText(v,this)))return;t.text(v);}};})();(function(){h.htmlParser.cdata=function(s){this.value=s;};h.htmlParser.cdata.prototype={type:3,writeHtml:function(s){s.write(this.value);}};})();h.htmlParser.fragment=function(){this.children=[];this.parent=null;this._={isBlockLike:true,hasInlineStarted:false};};(function(){var s={colgroup:1,dd:1,dt:1,li:1,option:1,p:1,td:1,tfoot:1,th:1,thead:1,tr:1},t=l.extend({table:1,ul:1,ol:1,dl:1},m.table,m.ul,m.ol,m.dl),u=m.$list,v=m.$listItem;h.htmlParser.fragment.fromHtml=function(w,x){var y=new h.htmlParser(),z=[],A=new h.htmlParser.fragment(),B=[],C=[],D=A,E=false,F;function G(L){var M;if(B.length>0)for(var N=0;N<B.length;N++){var O=B[N],P=O.name,Q=m[P],R=D.name&&m[D.name];if((!R||R[P])&&(!L||!Q||Q[L]||!m[L])){if(!M){H();M=1;}O=O.clone();O.parent=D;D=O;B.splice(N,1);N--;}}};function H(L){while(C.length-(L||0)>0)D.add(C.shift());};function I(L,M,N){M=M||D||A;if(x&&!M.type){var O,P;if(L.attributes&&(P=L.attributes._cke_real_element_type))O=P;else O=L.name;if(O&&!(O in m.$body)&&!(O in m.$nonBodyContent)){var Q=D;D=M;y.onTagOpen(x,{});M=D;if(N)D=Q;}}if(L._.isBlockLike&&L.name!='pre'){var R=L.children.length,S=L.children[R-1],T;if(S&&S.type==3)if(!(T=l.rtrim(S.value)))L.children.length=R-1;else S.value=T;}M.add(L);if(L.returnPoint){D=L.returnPoint;delete L.returnPoint;}};y.onTagOpen=function(L,M,N){var O=new h.htmlParser.element(L,M);
if(O.isUnknown&&N)O.isEmpty=true;if(m.$removeEmpty[L]){B.push(O);return;}else if(L=='pre')E=true;else if(L=='br'&&E){D.add(new h.htmlParser.text('\n'));return;}if(L=='br'){C.push(O);return;}var P=D.name,Q=P&&(m[P]||(D._.isBlockLike?m.div:m.span));if(Q&&!O.isUnknown&&!D.isUnknown&&!Q[L]){var R=false,S;if(L in u&&P in u){var T=D.children,U=T[T.length-1];if(!(U&&U.name in v))I(U=new h.htmlParser.element('li'),D);F=D,S=U;}else if(L==P)I(D,D.parent);else if(L in m.$listItem){y.onTagOpen('ul',{});S=D;R=true;}else{if(t[P]){if(!F)F=D;}else{I(D,D.parent,true);if(!s[P])B.unshift(D);}R=true;}if(S)D=S;else D=D.returnPoint||D.parent;if(R){y.onTagOpen.apply(this,arguments);return;}}G(L);H();O.parent=D;O.returnPoint=F;F=0;if(O.isEmpty)I(O);else D=O;};y.onTagClose=function(L){for(var M=B.length-1;M>=0;M--){if(L==B[M].name){B.splice(M,1);return;}}var N=[],O=[],P=D;while(P.type&&P.name!=L){if(!P._.isBlockLike)O.unshift(P);N.push(P);P=P.parent;}if(P.type){for(M=0;M<N.length;M++){var Q=N[M];I(Q,Q.parent);}D=P;if(D.name=='pre')E=false;if(P._.isBlockLike)H();I(P,P.parent);if(P==D)D=D.parent;B=B.concat(O);}if(L=='body')x=false;};y.onText=function(L){if(!D._.hasInlineStarted&&!E){L=l.ltrim(L);if(L.length===0)return;}H();G();if(x&&(!D.type||D.name=='body')&&l.trim(L))this.onTagOpen(x,{});if(!E)L=L.replace(/[\t\r\n ]{2,}|[\t\r\n]/g,' ');D.add(new h.htmlParser.text(L));};y.onCDATA=function(L){D.add(new h.htmlParser.cdata(L));};y.onComment=function(L){G();D.add(new h.htmlParser.comment(L));};y.parse(w);H(!j&&1);while(D.type){var J=D.parent,K=D;if(x&&(!J.type||J.name=='body')&&!m.$body[K.name]){D=J;y.onTagOpen(x,{});J=D;}J.add(K);D=J;}return A;};h.htmlParser.fragment.prototype={add:function(w){var z=this;var x=z.children.length,y=x>0&&z.children[x-1]||null;if(y){if(w._.isBlockLike&&y.type==3){y.value=l.rtrim(y.value);if(y.value.length===0){z.children.pop();z.add(w);return;}}y.next=w;}w.previous=y;w.parent=z;z.children.push(w);z._.hasInlineStarted=w.type==3||w.type==1&&!w._.isBlockLike;},writeHtml:function(w,x){var y;this.filterChildren=function(){var z=new h.htmlParser.basicWriter();this.writeChildrenHtml.call(this,z,x,true);var A=z.getHtml();this.children=new h.htmlParser.fragment.fromHtml(A).children;y=1;};!this.name&&x&&x.onFragment(this);this.writeChildrenHtml(w,y?null:x);},writeChildrenHtml:function(w,x){for(var y=0;y<this.children.length;y++)this.children[y].writeHtml(w,x);}};})();h.htmlParser.element=function(s,t){var y=this;y.name=s;y.attributes=t||(t={});y.children=[];var u=t._cke_real_element_type||s,v=m,w=!!(v.$nonBodyContent[u]||v.$block[u]||v.$listItem[u]||v.$tableContent[u]||v.$nonEditable[u]||u=='br'),x=!!v.$empty[s];
y.isEmpty=x;y.isUnknown=!v[s];y._={isBlockLike:w,hasInlineStarted:x||!w};};(function(){var s=function(t,u){t=t[0];u=u[0];return t<u?-1:t>u?1:0;};h.htmlParser.element.prototype={type:1,add:h.htmlParser.fragment.prototype.add,clone:function(){return new h.htmlParser.element(this.name,this.attributes);},writeHtml:function(t,u){var v=this.attributes,w=this,x=w.name,y,z,A,B;w.filterChildren=function(){if(!B){var G=new h.htmlParser.basicWriter();h.htmlParser.fragment.prototype.writeChildrenHtml.call(w,G,u);w.children=new h.htmlParser.fragment.fromHtml(G.getHtml()).children;B=1;}};if(u){for(;;){if(!(x=u.onElementName(x)))return;w.name=x;if(!(w=u.onElement(w)))return;w.parent=this.parent;if(w.name==x)break;if(w.type!=1){w.writeHtml(t,u);return;}x=w.name;if(!x){this.writeChildrenHtml.call(w,t,B?null:u);return;}}v=w.attributes;}t.openTag(x,v);var C=[];for(var D=0;D<2;D++)for(y in v){z=y;A=v[y];if(D==1)C.push([y,A]);else if(u){for(;;){if(!(z=u.onAttributeName(y))){delete v[y];break;}else if(z!=y){delete v[y];y=z;continue;}else break;}if(z)if((A=u.onAttribute(w,z,A))===false)delete v[z];else v[z]=A;}}if(t.sortAttributes)C.sort(s);var E=C.length;for(D=0;D<E;D++){var F=C[D];t.attribute(F[0],F[1]);}t.openTagClose(x,w.isEmpty);if(!w.isEmpty){this.writeChildrenHtml.call(w,t,B?null:u);t.closeTag(x);}},writeChildrenHtml:function(t,u){h.htmlParser.fragment.prototype.writeChildrenHtml.apply(this,arguments);}};})();(function(){h.htmlParser.filter=l.createClass({$:function(x){this._={elementNames:[],attributeNames:[],elements:{$length:0},attributes:{$length:0}};if(x)this.addRules(x,10);},proto:{addRules:function(x,y){var z=this;if(typeof y!='number')y=10;t(z._.elementNames,x.elementNames,y);t(z._.attributeNames,x.attributeNames,y);u(z._.elements,x.elements,y);u(z._.attributes,x.attributes,y);z._.text=v(z._.text,x.text,y)||z._.text;z._.comment=v(z._.comment,x.comment,y)||z._.comment;z._.root=v(z._.root,x.root,y)||z._.root;},onElementName:function(x){return s(x,this._.elementNames);},onAttributeName:function(x){return s(x,this._.attributeNames);},onText:function(x){var y=this._.text;return y?y.filter(x):x;},onComment:function(x,y){var z=this._.comment;return z?z.filter(x,y):x;},onFragment:function(x){var y=this._.root;return y?y.filter(x):x;},onElement:function(x){var C=this;var y=[C._.elements['^'],C._.elements[x.name],C._.elements.$],z,A;for(var B=0;B<3;B++){z=y[B];if(z){A=z.filter(x,C);if(A===false)return null;if(A&&A!=x)return C.onNode(A);if(x.parent&&!x.name)break;}}return x;},onNode:function(x){var y=x.type;
return y==1?this.onElement(x):y==3?new h.htmlParser.text(this.onText(x.value)):y==8?new h.htmlParser.comment(this.onComment(x.value)):null;},onAttribute:function(x,y,z){var A=this._.attributes[y];if(A){var B=A.filter(z,x,this);if(B===false)return false;if(typeof B!='undefined')return B;}return z;}}});function s(x,y){for(var z=0;x&&z<y.length;z++){var A=y[z];x=x.replace(A[0],A[1]);}return x;};function t(x,y,z){if(typeof y=='function')y=[y];var A,B,C=x.length,D=y&&y.length;if(D){for(A=0;A<C&&x[A].pri<z;A++){}for(B=D-1;B>=0;B--){var E=y[B];if(E){E.pri=z;x.splice(A,0,E);}}}};function u(x,y,z){if(y)for(var A in y){var B=x[A];x[A]=v(B,y[A],z);if(!B)x.$length++;}};function v(x,y,z){if(y){y.pri=z;if(x){if(!x.splice){if(x.pri>z)x=[y,x];else x=[x,y];x.filter=w;}else t(x,y,z);return x;}else{y.filter=y;return y;}}};function w(x){var y=x.type||x instanceof h.htmlParser.fragment;for(var z=0;z<this.length;z++){if(y)var A=x.type,B=x.name;var C=this[z],D=C.apply(window,arguments);if(D===false)return D;if(y){if(D&&(D.name!=B||D.type!=A))return D;}else if(typeof D!='string')return D;D!=undefined&&(x=D);}return x;};})();h.htmlParser.basicWriter=l.createClass({$:function(){this._={output:[]};},proto:{openTag:function(s,t){this._.output.push('<',s);},openTagClose:function(s,t){if(t)this._.output.push(' />');else this._.output.push('>');},attribute:function(s,t){if(typeof t=='string')t=l.htmlEncodeAttr(t);this._.output.push(' ',s,'="',t,'"');},closeTag:function(s){this._.output.push('</',s,'>');},text:function(s){this._.output.push(s);},comment:function(s){this._.output.push('<!--',s,'-->');},write:function(s){this._.output.push(s);},reset:function(){this._.output=[];this._.indent=false;},getHtml:function(s){var t=this._.output.join('');if(s)this.reset();return t;}}});delete h.loadFullCore;h.instances={};h.document=new n(document);h.add=function(s){h.instances[s.name]=s;s.on('focus',function(){if(h.currentInstance!=s){h.currentInstance=s;h.fire('currentInstance');}});s.on('blur',function(){if(h.currentInstance==s){h.currentInstance=null;h.fire('currentInstance');}});};h.remove=function(s){delete h.instances[s.name];};h.on('instanceDestroyed',function(){if(l.isEmpty(this.instances))h.fire('reset');});h.TRISTATE_ON=1;h.TRISTATE_OFF=2;h.TRISTATE_DISABLED=0;k.comment=l.createClass({base:k.node,$:function(s,t){if(typeof s=='string')s=(t?t.$:document).createComment(s);this.base(s);},proto:{type:8,getOuterHtml:function(){return '<!--'+this.$.nodeValue+'-->';}}});(function(){var s={address:1,blockquote:1,dl:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,li:1,dt:1,dd:1},t={body:1,div:1,table:1,tbody:1,tr:1,td:1,th:1,caption:1,form:1},u=function(v){var w=v.getChildren();
for(var x=0,y=w.count();x<y;x++){var z=w.getItem(x);if(z.type==1&&m.$block[z.getName()])return true;}return false;};k.elementPath=function(v){var B=this;var w=null,x=null,y=[],z=v;while(z){if(z.type==1){if(!B.lastElement)B.lastElement=z;var A=z.getName();if(j&&z.$.scopeName!='HTML')A=z.$.scopeName.toLowerCase()+':'+A;if(!x){if(!w&&s[A])w=z;if(t[A])if(!w&&A=='div'&&!u(z))w=z;else x=z;}y.push(z);if(A=='body')break;}z=z.getParent();}B.block=w;B.blockLimit=x;B.elements=y;};})();k.elementPath.prototype={compare:function(s){var t=this.elements,u=s&&s.elements;if(!u||t.length!=u.length)return false;for(var v=0;v<t.length;v++){if(!t[v].equals(u[v]))return false;}return true;},contains:function(s){var t=this.elements;for(var u=0;u<t.length;u++){if(t[u].getName() in s)return t[u];}return null;}};k.text=function(s,t){if(typeof s=='string')s=(t?t.$:document).createTextNode(s);this.$=s;};k.text.prototype=new k.node();l.extend(k.text.prototype,{type:3,getLength:function(){return this.$.nodeValue.length;},getText:function(){return this.$.nodeValue;},split:function(s){var x=this;if(j&&s==x.getLength()){var t=x.getDocument().createText('');t.insertAfter(x);return t;}var u=x.getDocument(),v=new k.text(x.$.splitText(s),u);if(i.ie8){var w=new k.text('',u);w.insertAfter(v);w.remove();}return v;},substring:function(s,t){if(typeof t!='number')return this.$.nodeValue.substr(s);else return this.$.nodeValue.substring(s,t);}});k.documentFragment=function(s){s=s||h.document;this.$=s.$.createDocumentFragment();};l.extend(k.documentFragment.prototype,o.prototype,{type:11,insertAfterNode:function(s){s=s.$;s.parentNode.insertBefore(this.$,s.nextSibling);}},true,{append:1,appendBogus:1,getFirst:1,getLast:1,appendTo:1,moveChildren:1,insertBefore:1,insertAfterNode:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,getChildCount:1,getChild:1,getChildren:1});(function(){function s(z,A){if(this._.end)return null;var B,C=this.range,D,E=this.guard,F=this.type,G=z?'getPreviousSourceNode':'getNextSourceNode';if(!this._.start){this._.start=1;C.trim();if(C.collapsed){this.end();return null;}}if(!z&&!this._.guardLTR){var H=C.endContainer,I=H.getChild(C.endOffset);this._.guardLTR=function(M,N){return(!N||!H.equals(M))&&(!I||!M.equals(I))&&(M.type!=1||!N||M.getName()!='body');};}if(z&&!this._.guardRTL){var J=C.startContainer,K=C.startOffset>0&&J.getChild(C.startOffset-1);this._.guardRTL=function(M,N){return(!N||!J.equals(M))&&(!K||!M.equals(K))&&(M.type!=1||!N||M.getName()!='body');};}var L=z?this._.guardRTL:this._.guardLTR;
if(E)D=function(M,N){if(L(M,N)===false)return false;return E(M,N);};else D=L;if(this.current)B=this.current[G](false,F,D);else if(z){B=C.endContainer;if(C.endOffset>0){B=B.getChild(C.endOffset-1);if(D(B)===false)B=null;}else B=D(B,true)===false?null:B.getPreviousSourceNode(true,F,D);}else{B=C.startContainer;B=B.getChild(C.startOffset);if(B){if(D(B)===false)B=null;}else B=D(C.startContainer,true)===false?null:C.startContainer.getNextSourceNode(true,F,D);}while(B&&!this._.end){this.current=B;if(!this.evaluator||this.evaluator(B)!==false){if(!A)return B;}else if(A&&this.evaluator)return false;B=B[G](false,F,D);}this.end();return this.current=null;};function t(z){var A,B=null;while(A=s.call(this,z))B=A;return B;};k.walker=l.createClass({$:function(z){this.range=z;this._={};},proto:{end:function(){this._.end=1;},next:function(){return s.call(this);},previous:function(){return s.call(this,1);},checkForward:function(){return s.call(this,0,1)!==false;},checkBackward:function(){return s.call(this,1,1)!==false;},lastForward:function(){return t.call(this);},lastBackward:function(){return t.call(this,1);},reset:function(){delete this.current;this._={};}}});var u={block:1,'list-item':1,table:1,'table-row-group':1,'table-header-group':1,'table-footer-group':1,'table-row':1,'table-column-group':1,'table-column':1,'table-cell':1,'table-caption':1};o.prototype.isBlockBoundary=function(z){var A=l.extend({},m.$block,z||{});return this.getComputedStyle('float')=='none'&&u[this.getComputedStyle('display')]||A[this.getName()];};k.walker.blockBoundary=function(z){return function(A,B){return!(A.type==1&&A.isBlockBoundary(z));};};k.walker.listItemBoundary=function(){return this.blockBoundary({br:1});};k.walker.bookmark=function(z,A){function B(C){return C&&C.getName&&C.getName()=='span'&&C.hasAttribute('_cke_bookmark');};return function(C){var D,E;D=C&&!C.getName&&(E=C.getParent())&&B(E);D=z?D:D||B(C);return!!(A^D);};};k.walker.whitespaces=function(z){return function(A){var B=A&&A.type==3&&!l.trim(A.getText());return!!(z^B);};};k.walker.invisible=function(z){var A=k.walker.whitespaces();return function(B){var C=A(B)||B.is&&!B.$.offsetHeight;return!!(z^C);};};var v=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,w=k.walker.whitespaces(1),x=k.walker.bookmark(0,1),y=function(z){return x(z)&&w(z);};o.prototype.getBogus=function(){var z=this.getLast(y);if(z&&(!j?z.is&&z.is('br'):z.getText&&v.test(z.getText())))return z;return false;};})();k.range=function(s){var t=this;t.startContainer=null;t.startOffset=null;
t.endContainer=null;t.endOffset=null;t.collapsed=true;t.document=s;};(function(){var s=function(A){A.collapsed=A.startContainer&&A.endContainer&&A.startContainer.equals(A.endContainer)&&A.startOffset==A.endOffset;},t=function(A,B,C){A.optimizeBookmark();var D=A.startContainer,E=A.endContainer,F=A.startOffset,G=A.endOffset,H,I;if(E.type==3)E=E.split(G);else if(E.getChildCount()>0)if(G>=E.getChildCount()){E=E.append(A.document.createText(''));I=true;}else E=E.getChild(G);if(D.type==3){D.split(F);if(D.equals(E))E=D.getNext();}else if(!F){D=D.getFirst().insertBeforeMe(A.document.createText(''));H=true;}else if(F>=D.getChildCount()){D=D.append(A.document.createText(''));H=true;}else D=D.getChild(F).getPrevious();var J=D.getParents(),K=E.getParents(),L,M,N;for(L=0;L<J.length;L++){M=J[L];N=K[L];if(!M.equals(N))break;}var O=C,P,Q,R,S;for(var T=L;T<J.length;T++){P=J[T];if(O&&!P.equals(D))Q=O.append(P.clone());R=P.getNext();while(R){if(R.equals(K[T])||R.equals(E))break;S=R.getNext();if(B==2)O.append(R.clone(true));else{R.remove();if(B==1)O.append(R);}R=S;}if(O)O=Q;}O=C;for(var U=L;U<K.length;U++){P=K[U];if(B>0&&!P.equals(E))Q=O.append(P.clone());if(!J[U]||P.$.parentNode!=J[U].$.parentNode){R=P.getPrevious();while(R){if(R.equals(J[U])||R.equals(D))break;S=R.getPrevious();if(B==2)O.$.insertBefore(R.$.cloneNode(true),O.$.firstChild);else{R.remove();if(B==1)O.$.insertBefore(R.$,O.$.firstChild);}R=S;}}if(O)O=Q;}if(B==2){var V=A.startContainer;if(V.type==3){V.$.data+=V.$.nextSibling.data;V.$.parentNode.removeChild(V.$.nextSibling);}var W=A.endContainer;if(W.type==3&&W.$.nextSibling){W.$.data+=W.$.nextSibling.data;W.$.parentNode.removeChild(W.$.nextSibling);}}else{if(M&&N&&(D.$.parentNode!=M.$.parentNode||E.$.parentNode!=N.$.parentNode)){var X=N.getIndex();if(H&&N.$.parentNode==D.$.parentNode)X--;A.setStart(N.getParent(),X);}A.collapse(true);}if(H)D.remove();if(I&&E.$.parentNode)E.remove();},u={abbr:1,acronym:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,'var':1};function v(A){var B=false,C=k.walker.bookmark(true);return function(D){if(C(D))return true;if(D.type==3){if(l.trim(D.getText()).length)return false;}else if(D.type==1)if(!u[D.getName()])if(!A&&!j&&D.getName()=='br'&&!B)B=true;else return false;return true;};};function w(A){return A.type!=3&&A.getName() in m.$removeEmpty||!l.trim(A.getText())||A.getParent().hasAttribute('_cke_bookmark');};var x=new k.walker.whitespaces(),y=new k.walker.bookmark();
function z(A){return!x(A)&&!y(A);};k.range.prototype={clone:function(){var B=this;var A=new k.range(B.document);A.startContainer=B.startContainer;A.startOffset=B.startOffset;A.endContainer=B.endContainer;A.endOffset=B.endOffset;A.collapsed=B.collapsed;return A;},collapse:function(A){var B=this;if(A){B.endContainer=B.startContainer;B.endOffset=B.startOffset;}else{B.startContainer=B.endContainer;B.startOffset=B.endOffset;}B.collapsed=true;},cloneContents:function(){var A=new k.documentFragment(this.document);if(!this.collapsed)t(this,2,A);return A;},deleteContents:function(){if(this.collapsed)return;t(this,0);},extractContents:function(){var A=new k.documentFragment(this.document);if(!this.collapsed)t(this,1,A);return A;},createBookmark:function(A){var G=this;var B,C,D,E,F=G.collapsed;B=G.document.createElement('span');B.setAttribute('_cke_bookmark',1);B.setStyle('display','none');B.setHtml('&nbsp;');if(A){D='cke_bm_'+l.getNextNumber();B.setAttribute('id',D+'S');}if(!F){C=B.clone();C.setHtml('&nbsp;');if(A)C.setAttribute('id',D+'E');E=G.clone();E.collapse();E.insertNode(C);}E=G.clone();E.collapse(true);E.insertNode(B);if(C){G.setStartAfter(B);G.setEndBefore(C);}else G.moveToPosition(B,4);return{startNode:A?D+'S':B,endNode:A?D+'E':C,serializable:A,collapsed:F};},createBookmark2:function(A){var I=this;var B=I.startContainer,C=I.endContainer,D=I.startOffset,E=I.endOffset,F=I.collapsed,G,H;if(!B||!C)return{start:0,end:0};if(A){if(B.type==1){G=B.getChild(D);if(G&&G.type==3&&D>0&&G.getPrevious().type==3){B=G;D=0;}}while(B.type==3&&(H=B.getPrevious())&&H.type==3){B=H;D+=H.getLength();}if(!F){if(C.type==1){G=C.getChild(E);if(G&&G.type==3&&E>0&&G.getPrevious().type==3){C=G;E=0;}}while(C.type==3&&(H=C.getPrevious())&&H.type==3){C=H;E+=H.getLength();}}}return{start:B.getAddress(A),end:F?null:C.getAddress(A),startOffset:D,endOffset:E,normalized:A,collapsed:F,is2:true};},moveToBookmark:function(A){var I=this;if(A.is2){var B=I.document.getByAddress(A.start,A.normalized),C=A.startOffset,D=A.end&&I.document.getByAddress(A.end,A.normalized),E=A.endOffset;I.setStart(B,C);if(D)I.setEnd(D,E);else I.collapse(true);}else{var F=A.serializable,G=F?I.document.getById(A.startNode):A.startNode,H=F?I.document.getById(A.endNode):A.endNode;I.setStartBefore(G);G.remove();if(H){I.setEndBefore(H);H.remove();}else I.collapse(true);}},getBoundaryNodes:function(){var F=this;var A=F.startContainer,B=F.endContainer,C=F.startOffset,D=F.endOffset,E;if(A.type==1){E=A.getChildCount();if(E>C)A=A.getChild(C);
else if(E<1)A=A.getPreviousSourceNode();else{A=A.$;while(A.lastChild)A=A.lastChild;A=new k.node(A);A=A.getNextSourceNode()||A;}}if(B.type==1){E=B.getChildCount();if(E>D)B=B.getChild(D).getPreviousSourceNode(true);else if(E<1)B=B.getPreviousSourceNode();else{B=B.$;while(B.lastChild)B=B.lastChild;B=new k.node(B);}}if(A.getPosition(B)&2)A=B;return{startNode:A,endNode:B};},getCommonAncestor:function(A,B){var F=this;var C=F.startContainer,D=F.endContainer,E;if(C.equals(D)){if(A&&C.type==1&&F.startOffset==F.endOffset-1)E=C.getChild(F.startOffset);else E=C;}else E=C.getCommonAncestor(D);return B&&!E.is?E.getParent():E;},optimize:function(){var C=this;var A=C.startContainer,B=C.startOffset;if(A.type!=1)if(!B)C.setStartBefore(A);else if(B>=A.getLength())C.setStartAfter(A);A=C.endContainer;B=C.endOffset;if(A.type!=1)if(!B)C.setEndBefore(A);else if(B>=A.getLength())C.setEndAfter(A);},optimizeBookmark:function(){var C=this;var A=C.startContainer,B=C.endContainer;if(A.is&&A.is('span')&&A.hasAttribute('_cke_bookmark'))C.setStartAt(A,3);if(B&&B.is&&B.is('span')&&B.hasAttribute('_cke_bookmark'))C.setEndAt(B,4);},trim:function(A,B){var I=this;var C=I.startContainer,D=I.startOffset,E=I.collapsed;if((!A||E)&&C&&C.type==3){if(!D){D=C.getIndex();C=C.getParent();}else if(D>=C.getLength()){D=C.getIndex()+1;C=C.getParent();}else{var F=C.split(D);D=C.getIndex()+1;C=C.getParent();if(I.startContainer.equals(I.endContainer))I.setEnd(F,I.endOffset-I.startOffset);else if(C.equals(I.endContainer))I.endOffset+=1;}I.setStart(C,D);if(E){I.collapse(true);return;}}var G=I.endContainer,H=I.endOffset;if(!(B||E)&&G&&G.type==3){if(!H){H=G.getIndex();G=G.getParent();}else if(H>=G.getLength()){H=G.getIndex()+1;G=G.getParent();}else{G.split(H);H=G.getIndex()+1;G=G.getParent();}I.setEnd(G,H);}},enlarge:function(A){switch(A){case 1:if(this.collapsed)return;var B=this.getCommonAncestor(),C=this.document.getBody(),D,E,F,G,H,I=false,J,K,L=this.startContainer,M=this.startOffset;if(L.type==3){if(M){L=!l.trim(L.substring(0,M)).length&&L;I=!!L;}if(L)if(!(G=L.getPrevious()))F=L.getParent();}else{if(M)G=L.getChild(M-1)||L.getLast();if(!G)F=L;}while(F||G){if(F&&!G){if(!H&&F.equals(B))H=true;if(!C.contains(F))break;if(!I||F.getComputedStyle('display')!='inline'){I=false;if(H)D=F;else this.setStartBefore(F);}G=F.getPrevious();}while(G){J=false;if(G.type==3){K=G.getText();if(/[^\s\ufeff]/.test(K))G=null;J=/[\s\ufeff]$/.test(K);}else if(G.$.offsetWidth>0&&!G.getAttribute('_cke_bookmark'))if(I&&m.$removeEmpty[G.getName()]){K=G.getText();
if(/[^\s\ufeff]/.test(K))G=null;else{var N=G.$.all||G.$.getElementsByTagName('*');for(var O=0,P;P=N[O++];){if(!m.$removeEmpty[P.nodeName.toLowerCase()]){G=null;break;}}}if(G)J=!!K.length;}else G=null;if(J)if(I){if(H)D=F;else if(F)this.setStartBefore(F);}else I=true;if(G){var Q=G.getPrevious();if(!F&&!Q){F=G;G=null;break;}G=Q;}else F=null;}if(F)F=F.getParent();}L=this.endContainer;M=this.endOffset;F=G=null;H=I=false;if(L.type==3){L=!l.trim(L.substring(M)).length&&L;I=!(L&&L.getLength());if(L)if(!(G=L.getNext()))F=L.getParent();}else{G=L.getChild(M);if(!G)F=L;}while(F||G){if(F&&!G){if(!H&&F.equals(B))H=true;if(!C.contains(F))break;if(!I||F.getComputedStyle('display')!='inline'){I=false;if(H)E=F;else if(F)this.setEndAfter(F);}G=F.getNext();}while(G){J=false;if(G.type==3){K=G.getText();if(/[^\s\ufeff]/.test(K))G=null;J=/^[\s\ufeff]/.test(K);}else if(G.$.offsetWidth>0&&!G.getAttribute('_cke_bookmark'))if(I&&m.$removeEmpty[G.getName()]){K=G.getText();if(/[^\s\ufeff]/.test(K))G=null;else{N=G.$.all||G.$.getElementsByTagName('*');for(O=0;P=N[O++];){if(!m.$removeEmpty[P.nodeName.toLowerCase()]){G=null;break;}}}if(G)J=!!K.length;}else G=null;if(J)if(I)if(H)E=F;else this.setEndAfter(F);if(G){Q=G.getNext();if(!F&&!Q){F=G;G=null;break;}G=Q;}else F=null;}if(F)F=F.getParent();}if(D&&E){B=D.contains(E)?E:D;this.setStartBefore(B);this.setEndAfter(B);}break;case 2:case 3:var R=new k.range(this.document);C=this.document.getBody();R.setStartAt(C,1);R.setEnd(this.startContainer,this.startOffset);var S=new k.walker(R),T,U,V=k.walker.blockBoundary(A==3?{br:1}:null),W=function(Y){var Z=V(Y);if(!Z)T=Y;return Z;},X=function(Y){var Z=W(Y);if(!Z&&Y.is&&Y.is('br'))U=Y;return Z;};S.guard=W;F=S.lastBackward();T=T||C;this.setStartAt(T,!T.is('br')&&(!F&&this.checkStartOfBlock()||F&&T.contains(F))?1:4);R=this.clone();R.collapse();R.setEndAt(C,2);S=new k.walker(R);S.guard=A==3?X:W;T=null;F=S.lastForward();T=T||C;this.setEndAt(T,!F&&this.checkEndOfBlock()||F&&T.contains(F)?2:3);if(U)this.setEndAfter(U);}},shrink:function(A,B){if(!this.collapsed){A=A||2;var C=this.clone(),D=this.startContainer,E=this.endContainer,F=this.startOffset,G=this.endOffset,H=this.collapsed,I=1,J=1;if(D&&D.type==3)if(!F)C.setStartBefore(D);else if(F>=D.getLength())C.setStartAfter(D);else{C.setStartBefore(D);I=0;}if(E&&E.type==3)if(!G)C.setEndBefore(E);else if(G>=E.getLength())C.setEndAfter(E);else{C.setEndAfter(E);J=0;}var K=new k.walker(C),L=k.walker.bookmark();K.evaluator=function(P){return P.type==(A==1?1:3);};var M;
K.guard=function(P,Q){if(L(P))return true;if(A==1&&P.type==3)return false;if(Q&&P.equals(M))return false;if(!Q&&P.type==1)M=P;return true;};if(I){var N=K[A==1?'lastForward':'next']();N&&this.setStartAt(N,B?1:3);}if(J){K.reset();var O=K[A==1?'lastBackward':'previous']();O&&this.setEndAt(O,B?2:4);}return!!(I||J);}},insertNode:function(A){var E=this;E.optimizeBookmark();E.trim(false,true);var B=E.startContainer,C=E.startOffset,D=B.getChild(C);if(D)A.insertBefore(D);else B.append(A);if(A.getParent().equals(E.endContainer))E.endOffset++;E.setStartBefore(A);},moveToPosition:function(A,B){this.setStartAt(A,B);this.collapse(true);},selectNodeContents:function(A){this.setStart(A,0);this.setEnd(A,A.type==3?A.getLength():A.getChildCount());},setStart:function(A,B){var C=this;if(A.type==1&&m.$empty[A.getName()])B=A.getIndex(),A=A.getParent();C.startContainer=A;C.startOffset=B;if(!C.endContainer){C.endContainer=A;C.endOffset=B;}s(C);},setEnd:function(A,B){var C=this;if(A.type==1&&m.$empty[A.getName()])B=A.getIndex()+1,A=A.getParent();C.endContainer=A;C.endOffset=B;if(!C.startContainer){C.startContainer=A;C.startOffset=B;}s(C);},setStartAfter:function(A){this.setStart(A.getParent(),A.getIndex()+1);},setStartBefore:function(A){this.setStart(A.getParent(),A.getIndex());},setEndAfter:function(A){this.setEnd(A.getParent(),A.getIndex()+1);},setEndBefore:function(A){this.setEnd(A.getParent(),A.getIndex());},setStartAt:function(A,B){var C=this;switch(B){case 1:C.setStart(A,0);break;case 2:if(A.type==3)C.setStart(A,A.getLength());else C.setStart(A,A.getChildCount());break;case 3:C.setStartBefore(A);break;case 4:C.setStartAfter(A);}s(C);},setEndAt:function(A,B){var C=this;switch(B){case 1:C.setEnd(A,0);break;case 2:if(A.type==3)C.setEnd(A,A.getLength());else C.setEnd(A,A.getChildCount());break;case 3:C.setEndBefore(A);break;case 4:C.setEndAfter(A);}s(C);},fixBlock:function(A,B){var E=this;var C=E.createBookmark(),D=E.document.createElement(B);E.collapse(A);E.enlarge(2);E.extractContents().appendTo(D);D.trim();if(!j)D.appendBogus();E.insertNode(D);E.moveToBookmark(C);return D;},splitBlock:function(A){var K=this;var B=new k.elementPath(K.startContainer),C=new k.elementPath(K.endContainer),D=B.blockLimit,E=C.blockLimit,F=B.block,G=C.block,H=null;if(!D.equals(E))return null;if(A!='br'){if(!F){F=K.fixBlock(true,A);G=new k.elementPath(K.endContainer).block;}if(!G)G=K.fixBlock(false,A);}var I=F&&K.checkStartOfBlock(),J=G&&K.checkEndOfBlock();K.deleteContents();if(F&&F.equals(G))if(J){H=new k.elementPath(K.startContainer);
K.moveToPosition(G,4);G=null;}else if(I){H=new k.elementPath(K.startContainer);K.moveToPosition(F,3);F=null;}else{G=K.splitElement(F);if(!j&&!F.is('ul','ol'))F.appendBogus();}return{previousBlock:F,nextBlock:G,wasStartOfBlock:I,wasEndOfBlock:J,elementPath:H};},splitElement:function(A){var D=this;if(!D.collapsed)return null;D.setEndAt(A,2);var B=D.extractContents(),C=A.clone(false);B.appendTo(C);C.insertAfter(A);D.moveToPosition(A,4);return C;},checkBoundaryOfElement:function(A,B){var C=B==1,D=this.clone();D.collapse(C);D[C?'setStartAt':'setEndAt'](A,C?1:2);var E=new k.walker(D);E.evaluator=w;return E[C?'checkBackward':'checkForward']();},checkStartOfBlock:function(){var G=this;var A=G.startContainer,B=G.startOffset;if(B&&A.type==3){var C=l.ltrim(A.substring(0,B));if(C.length)return false;}G.trim();var D=new k.elementPath(G.startContainer),E=G.clone();E.collapse(true);E.setStartAt(D.block||D.blockLimit,1);var F=new k.walker(E);F.evaluator=v(true);return F.checkBackward();},checkEndOfBlock:function(){var G=this;var A=G.endContainer,B=G.endOffset;if(A.type==3){var C=l.rtrim(A.substring(B));if(C.length)return false;}G.trim();var D=new k.elementPath(G.endContainer),E=G.clone();E.collapse(false);E.setEndAt(D.block||D.blockLimit,2);var F=new k.walker(E);F.evaluator=v(false);return F.checkForward();},moveToElementEditablePosition:function(A,B){var C;if(m.$empty[A.getName()])return false;while(A&&A.type==1){C=A.isEditable();if(C)this.moveToPosition(A,B?2:1);else if(m.$inline[A.getName()]){this.moveToPosition(A,B?4:3);return true;}if(m.$empty[A.getName()])A=A[B?'getPrevious':'getNext'](z);else A=A[B?'getLast':'getFirst'](z);if(A&&A.type==3){this.moveToPosition(A,B?4:3);return true;}}return C;},moveToElementEditStart:function(A){return this.moveToElementEditablePosition(A);},moveToElementEditEnd:function(A){return this.moveToElementEditablePosition(A,true);},getEnclosedNode:function(){var A=this.clone();A.optimize();if(A.startContainer.type!=1||A.endContainer.type!=1)return null;var B=new k.walker(A),C=k.walker.bookmark(true),D=k.walker.whitespaces(true),E=function(G){return D(G)&&C(G);};A.evaluator=E;var F=B.next();B.reset();return F&&F.equals(B.previous())?F:null;},getTouchedStartNode:function(){var A=this.startContainer;if(this.collapsed||A.type!=1)return A;return A.getChild(this.startOffset)||A;},getTouchedEndNode:function(){var A=this.endContainer;if(this.collapsed||A.type!=1)return A;return A.getChild(this.endOffset-1)||A;}};})();h.POSITION_AFTER_START=1;h.POSITION_BEFORE_END=2;
h.POSITION_BEFORE_START=3;h.POSITION_AFTER_END=4;h.ENLARGE_ELEMENT=1;h.ENLARGE_BLOCK_CONTENTS=2;h.ENLARGE_LIST_ITEM_CONTENTS=3;h.START=1;h.END=2;h.STARTEND=3;h.SHRINK_ELEMENT=1;h.SHRINK_TEXT=2;(function(){k.rangeList=function(u){if(u instanceof k.rangeList)return u;if(!u)u=[];else if(u instanceof k.range)u=[u];return l.extend(u,s);};var s={createIterator:function(){var u=this,v=k.walker.bookmark(),w=function(z){return!(z.is&&z.is('tr'));},x=[],y;return{getNextRange:function(z){y=y==undefined?0:y+1;var A=u[y];if(A&&u.length>1){if(!y)for(var B=u.length-1;B>=0;B--)x.unshift(u[B].createBookmark(true));if(z){var C=0;while(u[y+C+1]){var D=A.document,E=0,F=D.getById(x[C].endNode),G=D.getById(x[C+1].startNode),H;while(1){H=F.getNextSourceNode(false);if(!G.equals(H)){if(v(H)||H.type==1&&H.isBlockBoundary()){F=H;continue;}}else E=1;break;}if(!E)break;C++;}}A.moveToBookmark(x.shift());var H;while(C--){H=u[++y];H.moveToBookmark(x.shift());A.setEnd(H.endContainer,H.endOffset);}}return A;}};},createBookmarks:function(u){var z=this;var v=[],w;for(var x=0;x<z.length;x++){v.push(w=z[x].createBookmark(u,true));for(var y=x+1;y<z.length;y++){z[y]=t(w,z[y]);z[y]=t(w,z[y],true);}}return v;},createBookmarks2:function(u){var v=[];for(var w=0;w<this.length;w++)v.push(this[w].createBookmark2(u));return v;},moveToBookmarks:function(u){for(var v=0;v<this.length;v++)this[v].moveToBookmark(u[v]);}};function t(u,v,w){var x=u.serializable,y=v[w?'endContainer':'startContainer'],z=w?'endOffset':'startOffset',A=x?v.document.getById(u.startNode):u.startNode,B=x?v.document.getById(u.endNode):u.endNode;if(y.equals(A.getPrevious())){v.startOffset=v.startOffset-y.getLength()-B.getPrevious().getLength();y=B.getNext();}else if(y.equals(B.getPrevious())){v.startOffset=v.startOffset-y.getLength();y=B.getNext();}y.equals(A.getParent())&&v[z]++;y.equals(B.getParent())&&v[z]++;v[w?'endContainer':'startContainer']=y;return v;};})();(function(){if(i.webkit){i.hc=false;return;}var s=j&&i.version<7,t=j&&i.version==7,u=s?h.basePath+'images/spacer.gif':t?'about:blank':'data:image/png;base64,',v=o.createFromHtml('<div style="width:0px;height:0px;position:absolute;left:-10000px;background-image:url('+u+')"></div>',h.document);v.appendTo(h.document.getHead());try{i.hc=v.getComputedStyle('background-image')=='none';}catch(w){i.hc=false;}if(i.hc)i.cssClass+=' cke_hc';v.remove();})();q.load(p.corePlugins.split(','),function(){h.status='loaded';h.fire('loaded');var s=h._.pending;if(s){delete h._.pending;for(var t=0;
t<s.length;t++)h.add(s[t]);}});if(j)try{document.execCommand('BackgroundImageCache',false,true);}catch(s){}h.skins.add('kama',(function(){var t=[],u='cke_ui_color';if(j&&i.version<7)t.push('icons.png','images/sprites_ie6.png','images/dialog_sides.gif');return{preload:t,editor:{css:['editor.css']},dialog:{css:['dialog.css']},templates:{css:['templates.css']},margins:[0,0,0,0],init:function(v){if(v.config.width&&!isNaN(v.config.width))v.config.width-=12;var w=[],x=/\$color/g,y='/* UI Color Support */.cke_skin_kama .cke_menuitem .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a:focus .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a:active .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover .cke_label,.cke_skin_kama .cke_menuitem a:focus .cke_label,.cke_skin_kama .cke_menuitem a:active .cke_label{\tbackground-color: $color !important;}.cke_skin_kama .cke_menuitem a.cke_disabled:hover .cke_label,.cke_skin_kama .cke_menuitem a.cke_disabled:focus .cke_label,.cke_skin_kama .cke_menuitem a.cke_disabled:active .cke_label{\tbackground-color: transparent !important;}.cke_skin_kama .cke_menuitem a.cke_disabled:hover .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a.cke_disabled:focus .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a.cke_disabled:active .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuitem a.cke_disabled .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuseparator{\tbackground-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover,.cke_skin_kama .cke_menuitem a:focus,.cke_skin_kama .cke_menuitem a:active{\tbackground-color: $color !important;}';if(i.webkit){y=y.split('}').slice(0,-1);for(var z=0;z<y.length;z++)y[z]=y[z].split('{');}function A(D){var E=D.getById(u);if(!E){E=D.getHead().append('style');E.setAttribute('id',u);E.setAttribute('type','text/css');}return E;};function B(D,E,F){var G,H,I;for(var J=0;J<D.length;J++){if(i.webkit)for(H=0;H<E.length;H++){I=E[H][1];for(G=0;G<F.length;G++)I=I.replace(F[G][0],F[G][1]);D[J].$.sheet.addRule(E[H][0],I);}else{I=E;for(G=0;G<F.length;G++)I=I.replace(F[G][0],F[G][1]);if(j)D[J].$.styleSheet.cssText+=I;else D[J].$.innerHTML+=I;}}};var C=/\$color/g;l.extend(v,{uiColor:null,getUiColor:function(){return this.uiColor;
},setUiColor:function(D){var E,F=A(h.document),G='.'+v.id,H=[G+' .cke_wrapper',G+'_dialog .cke_dialog_contents',G+'_dialog a.cke_dialog_tab',G+'_dialog .cke_dialog_footer'].join(','),I='background-color: $color !important;';if(i.webkit)E=[[H,I]];else E=H+'{'+I+'}';return(this.setUiColor=function(J){var K=[[C,J]];v.uiColor=J;B([F],E,K);B(w,y,K);})(D);}});v.on('menuShow',function(D){var E=D.data[0],F=E.element.getElementsByTag('iframe').getItem(0).getFrameDocument();if(!F.getById('cke_ui_color')){var G=A(F);w.push(G);var H=v.getUiColor();if(H)B([G],y,[[C,H]]);}});if(v.config.uiColor)v.setUiColor(v.config.uiColor);}};})());(function(){h.dialog?t():h.on('dialogPluginReady',t);function t(){h.dialog.on('resize',function(u){var v=u.data,w=v.width,x=v.height,y=v.dialog,z=y.parts.contents;if(v.skin!='kama')return;z.setStyles({width:w+'px',height:x+'px'});setTimeout(function(){var A=y.parts.dialog.getChild([0,0,0]),B=A.getChild(0),C=A.getChild(2);C.setStyle('width',B.$.offsetWidth+'px');C=A.getChild(7);C.setStyle('width',B.$.offsetWidth-28+'px');C=A.getChild(4);C.setStyle('height',x+B.getChild(0).$.offsetHeight+'px');C=A.getChild(5);C.setStyle('height',x+B.getChild(0).$.offsetHeight+'px');},100);});};})();q.add('about',{requires:['dialog'],init:function(t){var u=t.addCommand('about',new h.dialogCommand('about'));u.modes={wysiwyg:1,source:1};u.canUndo=false;t.ui.addButton('About',{label:t.lang.about.title,command:'about'});h.dialog.add('about',this.path+'dialogs/about.js');}});(function(){var t='a11yhelp',u='a11yHelp';q.add(t,{availableLangs:{en:1,he:1},init:function(v){var w=this;v.addCommand(u,{exec:function(){var x=v.langCode;x=w.availableLangs[x]?x:'en';h.scriptLoader.load(h.getUrl(w.path+'lang/'+x+'.js'),function(){l.extend(v.lang,w.lang[x]);v.openDialog(u);});},modes:{wysiwyg:1,source:1},canUndo:false});h.dialog.add(u,this.path+'dialogs/a11yhelp.js');}});})();q.add('basicstyles',{requires:['styles','button'],init:function(t){var u=function(x,y,z,A){var B=new h.style(A);t.attachStyleStateChange(B,function(C){t.getCommand(z).setState(C);});t.addCommand(z,new h.styleCommand(B));t.ui.addButton(x,{label:y,command:z});},v=t.config,w=t.lang;u('Bold',w.bold,'bold',v.coreStyles_bold);u('Italic',w.italic,'italic',v.coreStyles_italic);u('Underline',w.underline,'underline',v.coreStyles_underline);u('Strike',w.strike,'strike',v.coreStyles_strike);u('Subscript',w.subscript,'subscript',v.coreStyles_subscript);u('Superscript',w.superscript,'superscript',v.coreStyles_superscript);
}});p.coreStyles_bold={element:'strong',overrides:'b'};p.coreStyles_italic={element:'em',overrides:'i'};p.coreStyles_underline={element:'u'};p.coreStyles_strike={element:'strike'};p.coreStyles_subscript={element:'sub'};p.coreStyles_superscript={element:'sup'};(function(){var t={table:1,tbody:1,ul:1,ol:1,blockquote:1,div:1,tr:1},u={},v={};l.extend(u,t,{tr:1,p:1,div:1,li:1});l.extend(v,u,{td:1});function w(D){x(D);y(D);};function x(D){var E=D.editor,F=D.data.path,G=E.config.useComputedState,H;G=G===undefined||G;if(!G)H=z(F.lastElement);H=H||F.block||F.blockLimit;if(!H||H.getName()=='body')return;var I=G?H.getComputedStyle('direction'):H.getStyle('direction')||H.getAttribute('dir');E.getCommand('bidirtl').setState(I=='rtl'?1:2);E.getCommand('bidiltr').setState(I=='ltr'?1:2);};function y(D){var E=D.editor,F=E.container.getChild(1),G=D.data.path.block||D.data.path.blockLimit;if(G&&E.lang.dir!=G.getComputedStyle('direction'))F.addClass('cke_mixed_dir_content');else F.removeClass('cke_mixed_dir_content');};function z(D){while(D&&!(D.getName() in v||D.is('body'))){var E=D.getParent();if(!E)break;D=E;}return D;};function A(D,E,F,G){o.setMarker(G,D,'bidi_processed',1);var H=D;while((H=H.getParent())&&!H.is('body')){if(H.getCustomData('bidi_processed')){D.removeStyle('direction');D.removeAttribute('dir');return null;}}var I='useComputedState' in F.config?F.config.useComputedState:1,J=I?D.getComputedStyle('direction'):D.getStyle('direction')||D.hasAttribute('dir');if(J==E)return null;var K=I?J:D.getComputedStyle('direction');D.removeStyle('direction');if(I){D.removeAttribute('dir');if(E!=D.getComputedStyle('direction'))D.setAttribute('dir',E);}else D.setAttribute('dir',E);if(E!=K)F.fire('dirChanged',{node:D,dir:E});F.forceNextSelectionCheck();return null;};function B(D,E){var F=D.getCommonAncestor(false,true);D.enlarge(2);if(D.checkBoundaryOfElement(F,1)&&D.checkBoundaryOfElement(F,2)){var G;while(F&&F.type==1&&(G=F.getParent())&&G.getChildCount()==1&&(!(F.getName() in E)||G.getName() in E))F=G;return F.type==1&&F.getName() in E&&F;}};function C(D){return function(E){var F=E.getSelection(),G=E.config.enterMode,H=F.getRanges();if(H&&H.length){var I={},J=F.createBookmarks(),K=H.createIterator(),L,M=0;while(L=K.getNextRange(1)){var N=L.getEnclosedNode();if(!N||N&&!(N.type==1&&N.getName() in u))N=B(L,t);if(N&&!N.isReadOnly())A(N,D,E,I);var O,P,Q=new k.walker(L),R=J[M].startNode,S=J[M++].endNode;Q.evaluator=function(T){return!!(T.type==1&&T.getName() in t&&!(T.getName()==(G==1)?'p':'div'&&T.getParent().type==1&&T.getParent().getName()=='blockquote')&&T.getPosition(R)&2&&(T.getPosition(S)&4+16)==4);
};while(P=Q.next())A(P,D,E,I);O=L.createIterator();O.enlargeBr=G!=2;while(P=O.getNextParagraph(G==1?'p':'div'))!P.isReadOnly()&&A(P,D,E,I);}o.clearAllMarkers(I);E.forceNextSelectionCheck();F.selectBookmarks(J);E.focus();}};};q.add('bidi',{requires:['styles','button'],init:function(D){var E=function(G,H,I,J){D.addCommand(I,new h.command(D,{exec:J}));D.ui.addButton(G,{label:H,command:I});},F=D.lang.bidi;E('BidiLtr',F.ltr,'bidiltr',C('ltr'));E('BidiRtl',F.rtl,'bidirtl',C('rtl'));D.on('selectionChange',w);}});})();(function(){function t(x,y){var z=y.block||y.blockLimit;if(!z||z.getName()=='body')return 2;if(z.getAscendant('blockquote',true))return 1;return 2;};function u(x){var y=x.editor,z=y.getCommand('blockquote');z.state=t(y,x.data.path);z.fire('state');};function v(x){for(var y=0,z=x.getChildCount(),A;y<z&&(A=x.getChild(y));y++){if(A.type==1&&A.isBlockBoundary())return false;}return true;};var w={exec:function(x){var y=x.getCommand('blockquote').state,z=x.getSelection(),A=z&&z.getRanges(true)[0];if(!A)return;var B=z.createBookmarks();if(j){var C=B[0].startNode,D=B[0].endNode,E;if(C&&C.getParent().getName()=='blockquote'){E=C;while(E=E.getNext()){if(E.type==1&&E.isBlockBoundary()){C.move(E,true);break;}}}if(D&&D.getParent().getName()=='blockquote'){E=D;while(E=E.getPrevious()){if(E.type==1&&E.isBlockBoundary()){D.move(E);break;}}}}var F=A.createIterator(),G;if(y==2){var H=[];while(G=F.getNextParagraph())H.push(G);if(H.length<1){var I=x.document.createElement(x.config.enterMode==1?'p':'div'),J=B.shift();A.insertNode(I);I.append(new k.text('\ufeff',x.document));A.moveToBookmark(J);A.selectNodeContents(I);A.collapse(true);J=A.createBookmark();H.push(I);B.unshift(J);}var K=H[0].getParent(),L=[];for(var M=0;M<H.length;M++){G=H[M];K=K.getCommonAncestor(G.getParent());}var N={table:1,tbody:1,tr:1,ol:1,ul:1};while(N[K.getName()])K=K.getParent();var O=null;while(H.length>0){G=H.shift();while(!G.getParent().equals(K))G=G.getParent();if(!G.equals(O))L.push(G);O=G;}while(L.length>0){G=L.shift();if(G.getName()=='blockquote'){var P=new k.documentFragment(x.document);while(G.getFirst()){P.append(G.getFirst().remove());H.push(P.getLast());}P.replace(G);}else H.push(G);}var Q=x.document.createElement('blockquote');Q.insertBefore(H[0]);while(H.length>0){G=H.shift();Q.append(G);}}else if(y==1){var R=[],S={};while(G=F.getNextParagraph()){var T=null,U=null;while(G.getParent()){if(G.getParent().getName()=='blockquote'){T=G.getParent();U=G;break;}G=G.getParent();}if(T&&U&&!U.getCustomData('blockquote_moveout')){R.push(U);
o.setMarker(S,U,'blockquote_moveout',true);}}o.clearAllMarkers(S);var V=[],W=[];S={};while(R.length>0){var X=R.shift();Q=X.getParent();if(!X.getPrevious())X.remove().insertBefore(Q);else if(!X.getNext())X.remove().insertAfter(Q);else{X.breakParent(X.getParent());W.push(X.getNext());}if(!Q.getCustomData('blockquote_processed')){W.push(Q);o.setMarker(S,Q,'blockquote_processed',true);}V.push(X);}o.clearAllMarkers(S);for(M=W.length-1;M>=0;M--){Q=W[M];if(v(Q))Q.remove();}if(x.config.enterMode==2){var Y=true;while(V.length){X=V.shift();if(X.getName()=='div'){P=new k.documentFragment(x.document);var Z=Y&&X.getPrevious()&&!(X.getPrevious().type==1&&X.getPrevious().isBlockBoundary());if(Z)P.append(x.document.createElement('br'));var aa=X.getNext()&&!(X.getNext().type==1&&X.getNext().isBlockBoundary());while(X.getFirst())X.getFirst().remove().appendTo(P);if(aa)P.append(x.document.createElement('br'));P.replace(X);Y=false;}}}}z.selectBookmarks(B);x.focus();}};q.add('blockquote',{init:function(x){x.addCommand('blockquote',w);x.ui.addButton('Blockquote',{label:x.lang.blockquote,command:'blockquote'});x.on('selectionChange',u);},requires:['domiterator']});})();q.add('button',{beforeInit:function(t){t.ui.addHandler(1,r.button.handler);}});h.UI_BUTTON=1;r.button=function(t){l.extend(this,t,{title:t.label,className:t.className||t.command&&'cke_button_'+t.command||'',click:t.click||(function(u){u.execCommand(t.command);})});this._={};};r.button.handler={create:function(t){return new r.button(t);}};r.button.prototype={canGroup:true,render:function(t,u){var v=i,w=this._.id=l.getNextId(),x='',y=this.command,z,A;this._.editor=t;var B={id:w,button:this,editor:t,focus:function(){var E=h.document.getById(w);E.focus();},execute:function(){this.button.click(t);}};B.clickFn=z=l.addFunction(B.execute,B);B.index=A=r.button._.instances.push(B)-1;if(this.modes){var C={};t.on('beforeModeUnload',function(){C[t.mode]=this._.state;},this);t.on('mode',function(){var E=t.mode;this.setState(this.modes[E]?C[E]!=undefined?C[E]:2:0);},this);}else if(y){y=t.getCommand(y);if(y){y.on('state',function(){this.setState(y.state);},this);x+='cke_'+(y.state==1?'on':y.state==0?'disabled':'off');}}if(!y)x+='cke_off';if(this.className)x+=' '+this.className;u.push('<span class="cke_button">','<a id="',w,'" class="',x,'"',v.gecko&&v.version>=10900&&!v.hc?'':'" href="javascript:void(\''+(this.title||'').replace("'",'')+"')\"",' title="',this.title,'" tabindex="-1" hidefocus="true" role="button" aria-labelledby="'+w+'_label"'+(this.hasArrow?' aria-haspopup="true"':''));
if(v.opera||v.gecko&&v.mac)u.push(' onkeypress="return false;"');if(v.gecko)u.push(' onblur="this.style.cssText = this.style.cssText;"');u.push(' onkeydown="return CKEDITOR.ui.button._.keydown(',A,', event);" onfocus="return CKEDITOR.ui.button._.focus(',A,', event);" onclick="CKEDITOR.tools.callFunction(',z,', this); return false;"><span class="cke_icon"');if(this.icon){var D=(this.iconOffset||0)*-16;u.push(' style="background-image:url(',h.getUrl(this.icon),');background-position:0 '+D+'px;"');}u.push('>&nbsp;</span><span id="',w,'_label" class="cke_label">',this.label,'</span>');if(this.hasArrow)u.push('<span class="cke_buttonarrow">'+(i.hc?'&#9660;':'&nbsp;')+'</span>');u.push('</a>','</span>');if(this.onRender)this.onRender();return B;},setState:function(t){if(this._.state==t)return false;this._.state=t;var u=h.document.getById(this._.id);if(u){u.setState(t);t==0?u.setAttribute('aria-disabled',true):u.removeAttribute('aria-disabled');t==1?u.setAttribute('aria-pressed',true):u.removeAttribute('aria-pressed');return true;}else return false;}};r.button._={instances:[],keydown:function(t,u){var v=r.button._.instances[t];if(v.onkey){u=new k.event(u);return v.onkey(v,u.getKeystroke())!==false;}},focus:function(t,u){var v=r.button._.instances[t],w;if(v.onfocus)w=v.onfocus(v,new k.event(u))!==false;if(i.gecko&&i.version<10900)u.preventBubble();return w;}};r.prototype.addButton=function(t,u){this.add(t,1,u);};h.on('reset',function(){r.button._.instances=[];});(function(){var t=function(A,B){var C=A.document,D=C.getBody(),E=0,F=function(){E=1;};D.on(B,F);(i.version>7?C.$:C.$.selection.createRange()).execCommand(B);D.removeListener(B,F);return E;},u=j?function(A,B){return t(A,B);}:function(A,B){try{return A.document.$.execCommand(B);}catch(C){return false;}},v=function(A){this.type=A;this.canUndo=this.type=='cut';};v.prototype={exec:function(A,B){this.type=='cut'&&z(A);var C=u(A,this.type);if(!C)alert(A.lang.clipboard[this.type+'Error']);return C;}};var w={canUndo:false,exec:j?function(A){A.focus();if(!A.document.getBody().fire('beforepaste')&&!t(A,'paste')){A.fire('pasteDialog');return false;}}:function(A){try{if(!A.document.getBody().fire('beforepaste')&&!A.document.$.execCommand('Paste',false,null))throw 0;}catch(B){setTimeout(function(){A.fire('pasteDialog');},0);return false;}}},x=function(A){if(this.mode!='wysiwyg')return;switch(A.data.keyCode){case 1000+86:case 2000+45:var B=this.document.getBody();if(!j&&B.fire('beforepaste'))A.cancel();else if(i.opera||i.gecko&&i.version<10900)B.fire('paste');
return;case 1000+88:case 2000+46:var C=this;this.fire('saveSnapshot');setTimeout(function(){C.fire('saveSnapshot');},0);}};function y(A,B,C){var D=this.document;if(D.getById('cke_pastebin'))return;if(B=='text'&&A.data&&A.data.$.clipboardData){var E=A.data.$.clipboardData.getData('text/plain');if(E){A.data.preventDefault();C(E);return;}}var F=this.getSelection(),G=new k.range(D),H=new o(B=='text'?'textarea':i.webkit?'body':'div',D);H.setAttribute('id','cke_pastebin');i.webkit&&H.append(D.createText('\xa0'));D.getBody().append(H);H.setStyles({position:'absolute',top:F.getStartElement().getDocumentPosition().y+'px',width:'1px',height:'1px',overflow:'hidden'});H.setStyle(this.config.contentsLangDirection=='ltr'?'left':'right','-1000px');var I=F.createBookmarks();if(B=='text'){if(j){var J=D.getBody().$.createTextRange();J.moveToElementText(H.$);J.execCommand('Paste');A.data.preventDefault();}else{D.$.designMode='off';H.$.focus();}}else{G.setStartAt(H,1);G.setEndAt(H,2);G.select(true);}window.setTimeout(function(){B=='text'&&!j&&(D.$.designMode='on');H.remove();var K;H=i.webkit&&(K=H.getFirst())&&K.is&&K.hasClass('Apple-style-span')?K:H;F.selectBookmarks(I);C(H['get'+(B=='text'?'Value':'Html')]());},0);};function z(A){if(!j||i.quirks)return;var B=A.getSelection(),C;if(B.getType()==3&&(C=B.getSelectedElement())){var D=B.getRanges()[0],E=A.document.createText('');E.insertBefore(C);D.setStartBefore(E);D.setEndAfter(C);B.selectRanges([D]);setTimeout(function(){if(C.getParent()){E.remove();B.selectElement(C);}},0);}};q.add('clipboard',{requires:['dialog','htmldataprocessor'],init:function(A){A.on('paste',function(F){var G=F.data;if(G.html)A.insertHtml(G.html);else if(G.text)A.insertText(G.text);},null,null,1000);A.on('pasteDialog',function(F){setTimeout(function(){A.openDialog('paste');},0);});function B(F,G,H,I){var J=A.lang[G];A.addCommand(G,H);A.ui.addButton(F,{label:J,command:G});if(A.addMenuItems)A.addMenuItem(G,{label:J,command:G,group:'clipboard',order:I});};B('Cut','cut',new v('cut'),1);B('Copy','copy',new v('copy'),4);B('Paste','paste',w,8);h.dialog.add('paste',h.getUrl(this.path+'dialogs/paste.js'));A.on('key',x,A);var C=A.config.forcePasteAsPlainText?'text':'html';A.on('contentDom',function(){var F=A.document.getBody();F.on(C=='text'&&j||i.webkit?'paste':'beforepaste',function(G){if(D)return;y.call(A,G,C,function(H){if(!H)return;var I={};I[C]=H;A.fire('paste',I);});});F.on('beforecut',function(){!D&&z(A);});});if(A.contextMenu){var D;function E(F){j&&(D=1);
var G=A.document.$.queryCommandEnabled(F)?2:0;D=0;return G;};A.contextMenu.addListener(function(F,G){var H=G.getCommonAncestor().isReadOnly();return{cut:!H&&E('Cut'),copy:E('Copy'),paste:!H&&(i.webkit?2:E('Paste'))};});}}});})();q.add('colorbutton',{requires:['panelbutton','floatpanel','styles'],init:function(t){var u=t.config,v=t.lang.colorButton,w;if(!i.hc){x('TextColor','fore',v.textColorTitle);x('BGColor','back',v.bgColorTitle);}function x(z,A,B){t.ui.add(z,4,{label:B,title:B,className:'cke_button_'+z.toLowerCase(),modes:{wysiwyg:1},panel:{css:t.skin.editor.css,attributes:{role:'listbox','aria-label':v.panelTitle}},onBlock:function(C,D){D.autoSize=true;D.element.addClass('cke_colorblock');D.element.setHtml(y(C,A));D.element.getDocument().getBody().setStyle('overflow','hidden');var E=D.keys,F=t.lang.dir=='rtl';E[F?37:39]='next';E[40]='next';E[9]='next';E[F?39:37]='prev';E[38]='prev';E[2000+9]='prev';E[32]='click';}});};function y(z,A){var B=[],C=u.colorButton_colors.split(','),D=C.length+(u.colorButton_enableMore?2:1),E=l.addFunction(function(K,L){if(K=='?'){var M=arguments.callee;function N(P){this.removeListener('ok',N);this.removeListener('cancel',N);P.name=='ok'&&M(this.getContentElement('picker','selectedColor').getValue(),L);};t.openDialog('colordialog',function(){this.on('ok',N);this.on('cancel',N);});return;}t.focus();z.hide();t.fire('saveSnapshot');new h.style(u['colorButton_'+L+'Style'],{color:'inherit'}).remove(t.document);if(K){var O=u['colorButton_'+L+'Style'];O.childRule=L=='back'?function(){return false;}:function(P){return P.getName()!='a';};new h.style(O,{color:K}).apply(t.document);}t.fire('saveSnapshot');});B.push('<a class="cke_colorauto" _cke_focus=1 hidefocus=true title="',v.auto,'" onclick="CKEDITOR.tools.callFunction(',E,",null,'",A,"');return false;\" href=\"javascript:void('",v.auto,'\')" role="option" aria-posinset="1" aria-setsize="',D,'"><table role="presentation" cellspacing=0 cellpadding=0 width="100%"><tr><td><span class="cke_colorbox" style="background-color:#000"></span></td><td colspan=7 align=center>',v.auto,'</td></tr></table></a><table role="presentation" cellspacing=0 cellpadding=0 width="100%">');for(var F=0;F<C.length;F++){if(F%8===0)B.push('</tr><tr>');var G=C[F].split('/'),H=G[0],I=G[1]||H;if(!G[1])H='#'+H.replace(/^(.)(.)(.)$/,'$1$1$2$2$3$3');var J=t.lang.colors[I]||I;B.push('<td><a class="cke_colorbox" _cke_focus=1 hidefocus=true title="',J,'" onclick="CKEDITOR.tools.callFunction(',E,",'",H,"','",A,"'); return false;\" href=\"javascript:void('",J,'\')" role="option" aria-posinset="',F+2,'" aria-setsize="',D,'"><span class="cke_colorbox" style="background-color:#',I,'"></span></a></td>');
}if(u.colorButton_enableMore===undefined||u.colorButton_enableMore)B.push('</tr><tr><td colspan=8 align=center><a class="cke_colormore" _cke_focus=1 hidefocus=true title="',v.more,'" onclick="CKEDITOR.tools.callFunction(',E,",'?','",A,"');return false;\" href=\"javascript:void('",v.more,"')\"",' role="option" aria-posinset="',D,'" aria-setsize="',D,'">',v.more,'</a></td>');B.push('</tr></table>');return B.join('');};}});p.colorButton_colors='000,800000,8B4513,2F4F4F,008080,000080,4B0082,696969,B22222,A52A2A,DAA520,006400,40E0D0,0000CD,800080,808080,F00,FF8C00,FFD700,008000,0FF,00F,EE82EE,A9A9A9,FFA07A,FFA500,FFFF00,00FF00,AFEEEE,ADD8E6,DDA0DD,D3D3D3,FFF0F5,FAEBD7,FFFFE0,F0FFF0,F0FFFF,F0F8FF,E6E6FA,FFF';p.colorButton_foreStyle={element:'span',styles:{color:'#(color)'},overrides:[{element:'font',attributes:{color:null}}]};p.colorButton_backStyle={element:'span',styles:{'background-color':'#(color)'}};(function(){q.colordialog={init:function(t){t.addCommand('colordialog',new h.dialogCommand('colordialog'));h.dialog.add('colordialog',this.path+'dialogs/colordialog.js');}};q.add('colordialog',q.colordialog);})();q.add('contextmenu',{requires:['menu'],beforeInit:function(t){t.contextMenu=new q.contextMenu(t);t.addCommand('contextMenu',{exec:function(){t.contextMenu.show(t.document.getBody());}});}});q.contextMenu=l.createClass({$:function(t){this.id=l.getNextId();this.editor=t;this._.listeners=[];this._.functionId=l.addFunction(function(u){this._.panel.hide();t.focus();t.execCommand(u);},this);this.definition={panel:{className:t.skinClass+' cke_contextmenu',attributes:{'aria-label':t.lang.contextmenu.options}}};},_:{onMenu:function(t,u,v,w){var x=this._.menu,y=this.editor;if(x){x.hide();x.removeAll();}else{x=this._.menu=new h.menu(y,this.definition);x.onClick=l.bind(function(H){x.hide();if(H.onClick)H.onClick();else if(H.command)y.execCommand(H.command);},this);x.onEscape=function(H){var I=this.parent;if(I){I._.panel.hideChild();var J=I._.panel._.panel._.currentBlock,K=J._.focusIndex;J._.markItem(K);}else if(H==27){this.hide();y.focus();}return false;};}var z=this._.listeners,A=[],B=this.editor.getSelection(),C=B&&B.getStartElement();x.onHide=l.bind(function(){x.onHide=null;if(j){var H=y.getSelection();H&&H.unlock();}this.onHide&&this.onHide();},this);for(var D=0;D<z.length;D++){var E=z[D](C,B);if(E)for(var F in E){var G=this.editor.getMenuItem(F);if(G){G.state=E[F];x.add(G);}}}x.items.length&&x.show(t,u||(y.lang.dir=='rtl'?2:1),v,w);}},proto:{addTarget:function(t,u){if(i.opera&&!('oncontextmenu' in document.body)){var v;
t.on('mousedown',function(z){z=z.data;if(z.$.button!=2){if(z.getKeystroke()==1000+1)t.fire('contextmenu',z);return;}if(u&&(i.mac?z.$.metaKey:z.$.ctrlKey))return;var A=z.getTarget();if(!v){var B=A.getDocument();v=B.createElement('input');v.$.type='button';B.getBody().append(v);}v.setAttribute('style','position:absolute;top:'+(z.$.clientY-2)+'px;left:'+(z.$.clientX-2)+'px;width:5px;height:5px;opacity:0.01');});t.on('mouseup',function(z){if(v){v.remove();v=undefined;t.fire('contextmenu',z.data);}});}t.on('contextmenu',function(z){var A=z.data;if(u&&(i.webkit?w:i.mac?A.$.metaKey:A.$.ctrlKey))return;A.preventDefault();var B=A.getTarget().getDocument().getDocumentElement(),C=A.$.clientX,D=A.$.clientY;l.setTimeout(function(){this.show(B,null,C,D);},0,this);},this);if(i.opera)t.on('keypress',function(z){var A=z.data;if(A.$.keyCode===0)A.preventDefault();});if(i.webkit){var w,x=function(z){w=i.mac?z.data.$.metaKey:z.data.$.ctrlKey;},y=function(){w=0;};t.on('keydown',x);t.on('keyup',y);t.on('contextmenu',y);}},addListener:function(t){this._.listeners.push(t);},show:function(t,u,v,w){this.editor.focus();if(j){var x=this.editor.getSelection();x&&x.lock();}this._.onMenu(t||h.document.getDocumentElement(),u,v||0,w||0);}}});(function(){function t(v){var w=this.att,x=v&&v.hasAttribute(w)&&v.getAttribute(w)||'';if(x!==undefined)this.setValue(x);};function u(){var v;for(var w=0;w<arguments.length;w++){if(arguments[w] instanceof o){v=arguments[w];break;}}if(v){var x=this.att,y=this.getValue();if(x=='dir'){var z=v.getAttribute(x);if(z!=y&&v.getParent())this._.dialog._.editor.fire('dirChanged',{node:v,dir:y||v.getDirection(1)});}if(y)v.setAttribute(x,y);else v.removeAttribute(x,y);}};q.add('dialogadvtab',{createAdvancedTab:function(v,w){if(!w)w={id:1,dir:1,classes:1,styles:1};var x=v.lang.common,y={id:'advanced',label:x.advancedTab,title:x.advancedTab,elements:[{type:'vbox',padding:1,children:[]}]},z=[];if(w.id||w.dir){if(w.id)z.push({id:'advId',att:'id',type:'text',label:x.id,setup:t,commit:u});if(w.dir)z.push({id:'advLangDir',att:'dir',type:'select',label:x.langDir,'default':'',style:'width:100%',items:[[x.notSet,''],[x.langDirLTR,'ltr'],[x.langDirRTL,'rtl']],setup:t,commit:u});y.elements[0].children.push({type:'hbox',widths:['50%','50%'],children:[].concat(z)});}if(w.styles||w.classes){z=[];if(w.styles)z.push({id:'advStyles',att:'style',type:'text',label:x.styles,'default':'',getStyle:function(A,B){var C=this.getValue().match(new RegExp(A+'\\s*:s*([^;]*)','i'));return C?C[1]:B;
},updateStyle:function(A,B){var C=this.getValue();if(C)C=C.replace(new RegExp('\\s*'+A+'s*:[^;]*(?:$|;s*)','i'),'').replace(/^[;\s]+/,'').replace(/\s+$/,'');if(B){C&&!/;\s*$/.test(C)&&(C+='; ');C+=A+': '+B;}this.setValue(C,1);},setup:t,commit:u});if(w.classes)z.push({type:'hbox',widths:['45%','55%'],children:[{id:'advCSSClasses',att:'class',type:'text',label:x.cssClasses,'default':'',setup:t,commit:u}]});y.elements[0].children.push({type:'hbox',widths:['50%','50%'],children:[].concat(z)});}return y;}});})();(function(){q.add('div',{requires:['editingblock','domiterator','styles'],init:function(t){var u=t.lang.div;t.addCommand('creatediv',new h.dialogCommand('creatediv'));t.addCommand('editdiv',new h.dialogCommand('editdiv'));t.addCommand('removediv',{exec:function(v){var w=v.getSelection(),x=w&&w.getRanges(),y,z=w.createBookmarks(),A,B=[];function C(E){var F=new k.elementPath(E),G=F.blockLimit,H=G.is('div')&&G;if(H&&!H.getAttribute('_cke_div_added')){B.push(H);H.setAttribute('_cke_div_added');}};for(var D=0;D<x.length;D++){y=x[D];if(y.collapsed)C(w.getStartElement());else{A=new k.walker(y);A.evaluator=C;A.lastForward();}}for(D=0;D<B.length;D++)B[D].remove(true);w.selectBookmarks(z);}});t.ui.addButton('CreateDiv',{label:u.toolbar,command:'creatediv'});if(t.addMenuItems){t.addMenuItems({editdiv:{label:u.edit,command:'editdiv',group:'div',order:1},removediv:{label:u.remove,command:'removediv',group:'div',order:5}});if(t.contextMenu)t.contextMenu.addListener(function(v,w){if(!v||v.isReadOnly())return null;var x=new k.elementPath(v),y=x.blockLimit;if(y&&y.getAscendant('div',true))return{editdiv:2,removediv:2};return null;});}h.dialog.add('creatediv',this.path+'dialogs/div.js');h.dialog.add('editdiv',this.path+'dialogs/div.js');}});})();(function(){var t={toolbarFocus:{exec:function(v){var w=v._.elementsPath.idBase,x=h.document.getById(w+'0');if(x)x.focus();}}},u='<span class="cke_empty">&nbsp;</span>';q.add('elementspath',{requires:['selection'],init:function(v){var w='cke_path_'+v.name,x,y=function(){if(!x)x=h.document.getById(w);return x;},z='cke_elementspath_'+l.getNextNumber()+'_';v._.elementsPath={idBase:z,filters:[]};v.on('themeSpace',function(A){if(A.data.space=='bottom')A.data.html+='<span id="'+w+'_label" class="cke_voice_label">'+v.lang.elementsPath.eleLabel+'</span>'+'<div id="'+w+'" class="cke_path" role="group" aria-labelledby="'+w+'_label">'+u+'</div>';});v.on('selectionChange',function(A){var B=i,C=A.data.selection,D=C.getStartElement(),E=[],F=A.editor,G=F._.elementsPath.list=[],H=F._.elementsPath.filters;
while(D){var I=0;for(var J=0;J<H.length;J++){if(H[J](D)===false){I=1;break;}}if(!I){var K=G.push(D)-1,L;if(D.getAttribute('_cke_real_element_type'))L=D.getAttribute('_cke_real_element_type');else L=D.getName();var M='';if(B.opera||B.gecko&&B.mac)M+=' onkeypress="return false;"';if(B.gecko)M+=' onblur="this.style.cssText = this.style.cssText;"';var N=F.lang.elementsPath.eleTitle.replace(/%1/,L);E.unshift('<a id="',z,K,'" href="javascript:void(\'',L,'\')" tabindex="-1" title="',N,'"'+(i.gecko&&i.version<10900?' onfocus="event.preventBubble();"':'')+' hidefocus="true" '+" onkeydown=\"return CKEDITOR._.elementsPath.keydown('",F.name,"',",K,', event);"'+M," onclick=\"return CKEDITOR._.elementsPath.click('",F.name,"',",K,');"',' role="button" aria-labelledby="'+z+K+'_label">',L,'<span id="',z,K,'_label" class="cke_label">'+N+'</span>','</a>');}if(L=='body')break;D=D.getParent();}y().setHtml(E.join('')+u);});v.on('contentDomUnload',function(){x&&x.setHtml(u);});v.addCommand('elementsPathFocus',t.toolbarFocus);}});})();h._.elementsPath={click:function(t,u){var v=h.instances[t];v.focus();var w=v._.elementsPath.list[u];if(w.is('body')){var x=new k.range(v.document);x.selectNodeContents(w);x.select();}else v.getSelection().selectElement(w);return false;},keydown:function(t,u,v){var w=r.button._.instances[u],x=h.instances[t],y=x._.elementsPath.idBase,z;v=new k.event(v);var A=x.lang.dir=='rtl';switch(v.getKeystroke()){case A?39:37:case 9:z=h.document.getById(y+(u+1));if(!z)z=h.document.getById(y+'0');z.focus();return false;case A?37:39:case 2000+9:z=h.document.getById(y+(u-1));if(!z)z=h.document.getById(y+(x._.elementsPath.list.length-1));z.focus();return false;case 27:x.focus();return false;case 13:case 32:this.click(t,u);return false;}return true;}};(function(){q.add('enterkey',{requires:['keystrokes','indent'],init:function(A){var B=A.specialKeys;B[13]=y;B[2000+13]=x;}});q.enterkey={enterBlock:function(A,B,C,D){C=C||z(A);if(!C)return;var E=C.document;if(C.checkStartOfBlock()&&C.checkEndOfBlock()){var F=new k.elementPath(C.startContainer),G=F.block;if(G&&(G.is('li')||G.getParent().is('li'))){A.execCommand('outdent');return;}}var H=B==3?'div':'p',I=C.splitBlock(H);if(!I)return;var J=I.previousBlock,K=I.nextBlock,L=I.wasStartOfBlock,M=I.wasEndOfBlock,N;if(K){N=K.getParent();if(N.is('li')){K.breakParent(N);K.move(K.getNext(),1);}}else if(J&&(N=J.getParent())&&N.is('li')){J.breakParent(N);C.moveToElementEditStart(J.getNext());J.move(J.getPrevious());}if(!L&&!M){if(K.is('li')&&(N=K.getFirst(k.walker.invisible(true)))&&N.is&&N.is('ul','ol'))(j?E.createText('\xa0'):E.createElement('br')).insertBefore(N);
if(K)C.moveToElementEditStart(K);}else{var O,P;if(J){if(J.is('li')||!w.test(J.getName()))O=J.clone();}else if(K)O=K.clone();if(!O){O=E.createElement(H);if(J&&(P=J.getDirection()))O.setAttribute('dir',P);}else if(D&&!O.is('li'))O.renameNode(H);var Q=I.elementPath;if(Q)for(var R=0,S=Q.elements.length;R<S;R++){var T=Q.elements[R];if(T.equals(Q.block)||T.equals(Q.blockLimit))break;if(m.$removeEmpty[T.getName()]){T=T.clone();O.moveChildren(T);O.append(T);}}if(!j)O.appendBogus();C.insertNode(O);if(j&&L&&(!M||!J.getChildCount())){C.moveToElementEditStart(M?J:O);C.select();}C.moveToElementEditStart(L&&!M?K:O);}if(!j)if(K){var U=E.createElement('span');U.setHtml('&nbsp;');C.insertNode(U);U.scrollIntoView();C.deleteContents();}else O.scrollIntoView();C.select();},enterBr:function(A,B,C,D){C=C||z(A);if(!C)return;var E=C.document,F=B==3?'div':'p',G=C.checkEndOfBlock(),H=new k.elementPath(A.getSelection().getStartElement()),I=H.block,J=I&&H.block.getName(),K=false;if(!D&&J=='li'){v(A,B,C,D);return;}if(!D&&G&&w.test(J)){var L,M;if(M=I.getDirection()){L=E.createElement('div');L.setAttribute('dir',M);L.insertAfter(I);C.setStart(L,0);}else{E.createElement('br').insertAfter(I);if(i.gecko)E.createText('').insertAfter(I);C.setStartAt(I.getNext(),j?3:1);}}else{var N;K=J=='pre';if(K&&!i.gecko)N=E.createText(j?'\r':'\n');else N=E.createElement('br');C.deleteContents();C.insertNode(N);if(!j)E.createText('\ufeff').insertAfter(N);if(G&&!j)N.getParent().appendBogus();if(!j)N.getNext().$.nodeValue='';if(j)C.setStartAt(N,4);else C.setStartAt(N.getNext(),1);if(!j){var O=null;if(!i.gecko){O=E.createElement('span');O.setHtml('&nbsp;');}else O=E.createElement('br');O.insertBefore(N.getNext());O.scrollIntoView();O.remove();}}C.collapse(true);C.select(K);}};var t=q.enterkey,u=t.enterBr,v=t.enterBlock,w=/^h[1-6]$/;function x(A){if(A.mode!='wysiwyg')return false;if(A.getSelection().getStartElement().hasAscendant('pre',true)){setTimeout(function(){v(A,A.config.enterMode,null,true);},0);return true;}else return y(A,A.config.shiftEnterMode,1);};function y(A,B,C){C=A.config.forceEnterMode||C;if(A.mode!='wysiwyg')return false;if(!B)B=A.config.enterMode;setTimeout(function(){A.fire('saveSnapshot');if(B==2||A.getSelection().getStartElement().hasAscendant('pre',1))u(A,B,null,C);else v(A,B,null,C);},0);return true;};function z(A){var B=A.getSelection().getRanges(true);for(var C=B.length-1;C>0;C--)B[C].deleteContents();return B[0];};})();(function(){var t='nbsp,gt,lt,quot',u='iexcl,cent,pound,curren,yen,brvbar,sect,uml,copy,ordf,laquo,not,shy,reg,macr,deg,plusmn,sup2,sup3,acute,micro,para,middot,cedil,sup1,ordm,raquo,frac14,frac12,frac34,iquest,times,divide,fnof,bull,hellip,prime,Prime,oline,frasl,weierp,image,real,trade,alefsym,larr,uarr,rarr,darr,harr,crarr,lArr,uArr,rArr,dArr,hArr,forall,part,exist,empty,nabla,isin,notin,ni,prod,sum,minus,lowast,radic,prop,infin,ang,and,or,cap,cup,int,there4,sim,cong,asymp,ne,equiv,le,ge,sub,sup,nsub,sube,supe,oplus,otimes,perp,sdot,lceil,rceil,lfloor,rfloor,lang,rang,loz,spades,clubs,hearts,diams,circ,tilde,ensp,emsp,thinsp,zwnj,zwj,lrm,rlm,ndash,mdash,lsquo,rsquo,sbquo,ldquo,rdquo,bdquo,dagger,Dagger,permil,lsaquo,rsaquo,euro',v='Agrave,Aacute,Acirc,Atilde,Auml,Aring,AElig,Ccedil,Egrave,Eacute,Ecirc,Euml,Igrave,Iacute,Icirc,Iuml,ETH,Ntilde,Ograve,Oacute,Ocirc,Otilde,Ouml,Oslash,Ugrave,Uacute,Ucirc,Uuml,Yacute,THORN,szlig,agrave,aacute,acirc,atilde,auml,aring,aelig,ccedil,egrave,eacute,ecirc,euml,igrave,iacute,icirc,iuml,eth,ntilde,ograve,oacute,ocirc,otilde,ouml,oslash,ugrave,uacute,ucirc,uuml,yacute,thorn,yuml,OElig,oelig,Scaron,scaron,Yuml',w='Alpha,Beta,Gamma,Delta,Epsilon,Zeta,Eta,Theta,Iota,Kappa,Lambda,Mu,Nu,Xi,Omicron,Pi,Rho,Sigma,Tau,Upsilon,Phi,Chi,Psi,Omega,alpha,beta,gamma,delta,epsilon,zeta,eta,theta,iota,kappa,lambda,mu,nu,xi,omicron,pi,rho,sigmaf,sigma,tau,upsilon,phi,chi,psi,omega,thetasym,upsih,piv';
function x(y,z){var A={},B=[],C={nbsp:'\xa0',shy:'­',gt:'>',lt:'<'};y=y.replace(/\b(nbsp|shy|gt|lt|amp)(?:,|$)/g,function(H,I){var J=z?'&'+I+';':C[I],K=z?C[I]:'&'+I+';';A[J]=K;B.push(J);return '';});if(!z){y=y.split(',');var D=document.createElement('div'),E;D.innerHTML='&'+y.join(';&')+';';E=D.innerHTML;D=null;for(var F=0;F<E.length;F++){var G=E.charAt(F);A[G]='&'+y[F]+';';B.push(G);}}A.regex=B.join(z?'|':'');return A;};q.add('entities',{afterInit:function(y){var z=y.config,A=y.dataProcessor,B=A&&A.htmlFilter;if(B){var C=t;if(z.entities){C+=','+u;if(z.entities_latin)C+=','+v;if(z.entities_greek)C+=','+w;if(z.entities_additional)C+=','+z.entities_additional;}var D=x(C),E='['+D.regex+']';delete D.regex;if(z.entities&&z.entities_processNumerical)E='[^ -~]|'+E;E=new RegExp(E,'g');function F(J){return z.entities_processNumerical=='force'||!D[J]?'&#'+J.charCodeAt(0)+';':D[J];};var G=x([t,'shy'].join(','),true),H=new RegExp(G.regex,'g');function I(J){return G[J];};B.addRules({text:function(J){return J.replace(H,I).replace(E,F);}});}}});})();p.entities=true;p.entities_latin=true;p.entities_greek=true;p.entities_additional='#39';(function(){function t(C,D){var E=[];if(!D)return C;else for(var F in D)E.push(F+'='+encodeURIComponent(D[F]));return C+(C.indexOf('?')!=-1?'&':'?')+E.join('&');};function u(C){C+='';var D=C.charAt(0).toUpperCase();return D+C.substr(1);};function v(C){var J=this;var D=J.getDialog(),E=D.getParentEditor();E._.filebrowserSe=J;var F=E.config['filebrowser'+u(D.getName())+'WindowWidth']||E.config.filebrowserWindowWidth||'80%',G=E.config['filebrowser'+u(D.getName())+'WindowHeight']||E.config.filebrowserWindowHeight||'70%',H=J.filebrowser.params||{};H.CKEditor=E.name;H.CKEditorFuncNum=E._.filebrowserFn;if(!H.langCode)H.langCode=E.langCode;var I=t(J.filebrowser.url,H);E.popup(I,F,G,E.config.fileBrowserWindowFeatures);};function w(C){var F=this;var D=F.getDialog(),E=D.getParentEditor();E._.filebrowserSe=F;if(!D.getContentElement(F['for'][0],F['for'][1]).getInputElement().$.value)return false;if(!D.getContentElement(F['for'][0],F['for'][1]).getAction())return false;return true;};function x(C,D,E){var F=E.params||{};F.CKEditor=C.name;F.CKEditorFuncNum=C._.filebrowserFn;if(!F.langCode)F.langCode=C.langCode;D.action=t(E.url,F);D.filebrowser=E;};function y(C,D,E,F){var G,H;for(var I in F){G=F[I];if(G.type=='hbox'||G.type=='vbox')y(C,D,E,G.children);if(!G.filebrowser)continue;if(typeof G.filebrowser=='string'){var J={action:G.type=='fileButton'?'QuickUpload':'Browse',target:G.filebrowser};
G.filebrowser=J;}if(G.filebrowser.action=='Browse'){var K=G.filebrowser.url;if(K===undefined){K=C.config['filebrowser'+u(D)+'BrowseUrl'];if(K===undefined)K=C.config.filebrowserBrowseUrl;}if(K){G.onClick=v;G.filebrowser.url=K;G.hidden=false;}}else if(G.filebrowser.action=='QuickUpload'&&G['for']){var K=G.filebrowser.url;if(K===undefined){K=C.config['filebrowser'+u(D)+'UploadUrl'];if(K===undefined)K=C.config.filebrowserUploadUrl;}if(K){var L=G.onClick;G.onClick=function(M){var N=M.sender;if(L&&L.call(N,M)===false)return false;return w.call(N,M);};G.filebrowser.url=K;G.hidden=false;x(C,E.getContents(G['for'][0]).get(G['for'][1]),G.filebrowser);}}}};function z(C,D){var E=D.getDialog(),F=D.filebrowser.target||null;C=C.replace(/#/g,'%23');if(F){var G=F.split(':'),H=E.getContentElement(G[0],G[1]);if(H){H.setValue(C);E.selectPage(G[0]);}}};function A(C,D,E){if(E.indexOf(';')!==-1){var F=E.split(';');for(var G=0;G<F.length;G++){if(A(C,D,F[G]))return true;}return false;}var H=C.getContents(D).get(E).filebrowser;return H&&H.url;};function B(C,D){var H=this;var E=H._.filebrowserSe.getDialog(),F=H._.filebrowserSe['for'],G=H._.filebrowserSe.filebrowser.onSelect;if(F)E.getContentElement(F[0],F[1]).reset();if(typeof D=='function'&&D.call(H._.filebrowserSe)===false)return;if(G&&G.call(H._.filebrowserSe,C,D)===false)return;if(typeof D=='string'&&D)alert(D);if(C)z(C,H._.filebrowserSe);};q.add('filebrowser',{init:function(C,D){C._.filebrowserFn=l.addFunction(B,C);}});h.on('dialogDefinition',function(C){var D=C.data.definition,E;for(var F in D.contents){if(E=D.contents[F]){y(C.editor,C.data.name,D,E.elements);if(E.hidden&&E.filebrowser)E.hidden=!A(D,E.id,E.filebrowser);}}});})();q.add('find',{init:function(t){var u=q.find;t.ui.addButton('Find',{label:t.lang.findAndReplace.find,command:'find'});var v=t.addCommand('find',new h.dialogCommand('find'));v.canUndo=false;t.ui.addButton('Replace',{label:t.lang.findAndReplace.replace,command:'replace'});var w=t.addCommand('replace',new h.dialogCommand('replace'));w.canUndo=false;h.dialog.add('find',this.path+'dialogs/find.js');h.dialog.add('replace',this.path+'dialogs/find.js');},requires:['styles']});p.find_highlight={element:'span',styles:{'background-color':'#004',color:'#fff'}};(function(){var t=/\.swf(?:$|\?)/i,u=l.cssLength;function v(x){var y=x.attributes;return y.type=='application/x-shockwave-flash'||t.test(y.src||'');};function w(x,y){var z=x.createFakeParserElement(y,'cke_flash','flash',true),A=z.attributes.style||'',B=y.attributes.width,C=y.attributes.height;
if(typeof B!='undefined')A=z.attributes.style=A+'width:'+u(B)+';';if(typeof C!='undefined')A=z.attributes.style=A+'height:'+u(C)+';';return z;};q.add('flash',{init:function(x){x.addCommand('flash',new h.dialogCommand('flash'));x.ui.addButton('Flash',{label:x.lang.common.flash,command:'flash'});h.dialog.add('flash',this.path+'dialogs/flash.js');x.addCss('img.cke_flash{background-image: url('+h.getUrl(this.path+'images/placeholder.png')+');'+'background-position: center center;'+'background-repeat: no-repeat;'+'border: 1px solid #a9a9a9;'+'width: 80px;'+'height: 80px;'+'}');if(x.addMenuItems)x.addMenuItems({flash:{label:x.lang.flash.properties,command:'flash',group:'flash'}});x.on('doubleclick',function(y){var z=y.data.element;if(z.is('img')&&z.getAttribute('_cke_real_element_type')=='flash')y.data.dialog='flash';});if(x.contextMenu)x.contextMenu.addListener(function(y,z){if(y&&y.is('img')&&!y.isReadOnly()&&y.getAttribute('_cke_real_element_type')=='flash')return{flash:2};});},afterInit:function(x){var y=x.dataProcessor,z=y&&y.dataFilter;if(z)z.addRules({elements:{'cke:object':function(A){var B=A.attributes,C=B.classid&&String(B.classid).toLowerCase();if(!C){for(var D=0;D<A.children.length;D++){if(A.children[D].name=='cke:embed'){if(!v(A.children[D]))return null;return w(x,A);}}return null;}return w(x,A);},'cke:embed':function(A){if(!v(A))return null;return w(x,A);}}},5);},requires:['fakeobjects']});})();l.extend(p,{flashEmbedTagOnly:false,flashAddEmbedTag:true,flashConvertOnEdit:false});(function(){function t(u,v,w,x,y,z,A){var B=u.config,C=y.split(';'),D=[],E={};for(var F=0;F<C.length;F++){var G=C[F];if(G){G=G.split('/');var H={},I=C[F]=G[0];H[w]=D[F]=G[1]||I;E[I]=new h.style(A,H);E[I]._.definition.name=I;}else C.splice(F--,1);}u.ui.addRichCombo(v,{label:x.label,title:x.panelTitle,className:'cke_'+(w=='size'?'fontSize':'font'),panel:{css:u.skin.editor.css.concat(B.contentsCss),multiSelect:false,attributes:{'aria-label':x.panelTitle}},init:function(){this.startGroup(x.panelTitle);for(var J=0;J<C.length;J++){var K=C[J];this.add(K,E[K].buildPreview(),K);}},onClick:function(J){u.focus();u.fire('saveSnapshot');var K=E[J];if(this.getValue()==J)K.remove(u.document);else K.apply(u.document);u.fire('saveSnapshot');},onRender:function(){u.on('selectionChange',function(J){var K=this.getValue(),L=J.data.path,M=L.elements;for(var N=0,O;N<M.length;N++){O=M[N];for(var P in E){if(E[P].checkElementRemovable(O,true)){if(P!=K)this.setValue(P);return;}}}this.setValue('',z);},this);
}});};q.add('font',{requires:['richcombo','styles'],init:function(u){var v=u.config;t(u,'Font','family',u.lang.font,v.font_names,v.font_defaultLabel,v.font_style);t(u,'FontSize','size',u.lang.fontSize,v.fontSize_sizes,v.fontSize_defaultLabel,v.fontSize_style);}});})();p.font_names='Arial/Arial, Helvetica, sans-serif;Comic Sans MS/Comic Sans MS, cursive;Courier New/Courier New, Courier, monospace;Georgia/Georgia, serif;Lucida Sans Unicode/Lucida Sans Unicode, Lucida Grande, sans-serif;Tahoma/Tahoma, Geneva, sans-serif;Times New Roman/Times New Roman, Times, serif;Trebuchet MS/Trebuchet MS, Helvetica, sans-serif;Verdana/Verdana, Geneva, sans-serif';p.font_defaultLabel='';p.font_style={element:'span',styles:{'font-family':'#(family)'},overrides:[{element:'font',attributes:{face:null}}]};p.fontSize_sizes='8/8px;9/9px;10/10px;11/11px;12/12px;14/14px;16/16px;18/18px;20/20px;22/22px;24/24px;26/26px;28/28px;36/36px;48/48px;72/72px';p.fontSize_defaultLabel='';p.fontSize_style={element:'span',styles:{'font-size':'#(size)'},overrides:[{element:'font',attributes:{size:null}}]};q.add('format',{requires:['richcombo','styles'],init:function(t){var u=t.config,v=t.lang.format,w=u.format_tags.split(';'),x={};for(var y=0;y<w.length;y++){var z=w[y];x[z]=new h.style(u['format_'+z]);x[z]._.enterMode=t.config.enterMode;}t.ui.addRichCombo('Format',{label:v.label,title:v.panelTitle,className:'cke_format',panel:{css:t.skin.editor.css.concat(u.contentsCss),multiSelect:false,attributes:{'aria-label':v.panelTitle}},init:function(){this.startGroup(v.panelTitle);for(var A in x){var B=v['tag_'+A];this.add(A,'<'+A+'>'+B+'</'+A+'>',B);}},onClick:function(A){t.focus();t.fire('saveSnapshot');x[A].apply(t.document);setTimeout(function(){t.fire('saveSnapshot');},0);},onRender:function(){t.on('selectionChange',function(A){var B=this.getValue(),C=A.data.path;for(var D in x){if(x[D].checkActive(C)){if(D!=B)this.setValue(D,t.lang.format['tag_'+D]);return;}}this.setValue('');},this);}});}});p.format_tags='p;h1;h2;h3;h4;h5;h6;pre;address;div';p.format_p={element:'p'};p.format_div={element:'div'};p.format_pre={element:'pre'};p.format_address={element:'address'};p.format_h1={element:'h1'};p.format_h2={element:'h2'};p.format_h3={element:'h3'};p.format_h4={element:'h4'};p.format_h5={element:'h5'};p.format_h6={element:'h6'};q.add('forms',{init:function(t){var u=t.lang;t.addCss('form{border: 1px dotted #FF0000;padding: 2px;}\n');t.addCss('img.cke_hidden{background-image: url('+h.getUrl(this.path+'images/hiddenfield.gif')+');'+'background-position: center center;'+'background-repeat: no-repeat;'+'border: 1px solid #a9a9a9;'+'width: 16px !important;'+'height: 16px !important;'+'}');
var v=function(x,y,z){t.addCommand(y,new h.dialogCommand(y));t.ui.addButton(x,{label:u.common[x.charAt(0).toLowerCase()+x.slice(1)],command:y});h.dialog.add(y,z);},w=this.path+'dialogs/';v('Form','form',w+'form.js');v('Checkbox','checkbox',w+'checkbox.js');v('Radio','radio',w+'radio.js');v('TextField','textfield',w+'textfield.js');v('Textarea','textarea',w+'textarea.js');v('Select','select',w+'select.js');v('Button','button',w+'button.js');v('ImageButton','imagebutton',q.getPath('image')+'dialogs/image.js');v('HiddenField','hiddenfield',w+'hiddenfield.js');if(t.addMenuItems)t.addMenuItems({form:{label:u.form.menu,command:'form',group:'form'},checkbox:{label:u.checkboxAndRadio.checkboxTitle,command:'checkbox',group:'checkbox'},radio:{label:u.checkboxAndRadio.radioTitle,command:'radio',group:'radio'},textfield:{label:u.textfield.title,command:'textfield',group:'textfield'},hiddenfield:{label:u.hidden.title,command:'hiddenfield',group:'hiddenfield'},imagebutton:{label:u.image.titleButton,command:'imagebutton',group:'imagebutton'},button:{label:u.button.title,command:'button',group:'button'},select:{label:u.select.title,command:'select',group:'select'},textarea:{label:u.textarea.title,command:'textarea',group:'textarea'}});if(t.contextMenu){t.contextMenu.addListener(function(x){if(x&&x.hasAscendant('form',true)&&!x.isReadOnly())return{form:2};});t.contextMenu.addListener(function(x){if(x&&!x.isReadOnly()){var y=x.getName();if(y=='select')return{select:2};if(y=='textarea')return{textarea:2};if(y=='input'){var z=x.getAttribute('type');if(z=='text'||z=='password')return{textfield:2};if(z=='button'||z=='submit'||z=='reset')return{button:2};if(z=='checkbox')return{checkbox:2};if(z=='radio')return{radio:2};if(z=='image')return{imagebutton:2};}if(y=='img'&&x.getAttribute('_cke_real_element_type')=='hiddenfield')return{hiddenfield:2};}});}t.on('doubleclick',function(x){var y=x.data.element;if(y.is('form'))x.data.dialog='form';else if(y.is('select'))x.data.dialog='select';else if(y.is('textarea'))x.data.dialog='textarea';else if(y.is('img')&&y.getAttribute('_cke_real_element_type')=='hiddenfield')x.data.dialog='hiddenfield';else if(y.is('input')){var z=y.getAttribute('type');switch(z){case 'text':case 'password':x.data.dialog='textfield';break;case 'button':case 'submit':case 'reset':x.data.dialog='button';break;case 'checkbox':x.data.dialog='checkbox';break;case 'radio':x.data.dialog='radio';break;case 'image':x.data.dialog='imagebutton';break;}}});},afterInit:function(t){var u=t.dataProcessor,v=u&&u.htmlFilter,w=u&&u.dataFilter;
if(j)v&&v.addRules({elements:{input:function(x){var y=x.attributes,z=y.type;if(z=='checkbox'||z=='radio')y.value=='on'&&delete y.value;}}});if(w)w.addRules({elements:{input:function(x){if(x.attributes.type=='hidden')return t.createFakeParserElement(x,'cke_hidden','hiddenfield');}}});},requires:['image','fakeobjects']});if(j)o.prototype.hasAttribute=function(t){var w=this;var u=w.$.attributes.getNamedItem(t);if(w.getName()=='input')switch(t){case 'class':return w.$.className.length>0;case 'checked':return!!w.$.checked;case 'value':var v=w.getAttribute('type');if(v=='checkbox'||v=='radio')return w.$.value!='on';break;default:}return!!(u&&u.specified);};(function(){var t={canUndo:false,exec:function(v){v.insertElement(v.document.createElement('hr'));}},u='horizontalrule';q.add(u,{init:function(v){v.addCommand(u,t);v.ui.addButton('HorizontalRule',{label:v.lang.horizontalrule,command:u});}});})();(function(){var t=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,u='{cke_protected}';function v(aa){var ab=aa.children.length,ac=aa.children[ab-1];while(ac&&ac.type==3&&!l.trim(ac.value))ac=aa.children[--ab];return ac;};function w(aa,ab){var ac=aa.children,ad=v(aa);if(ad){if((ab||!j)&&ad.type==1&&ad.name=='br')ac.pop();if(ad.type==3&&t.test(ad.value))ac.pop();}};function x(aa,ab){if(ab&&j&&(document.documentMode>7||aa.name in m.tr||aa.name in m.$listItem))return false;var ac=v(aa);return!ac||ac.type==1&&ac.name=='br'||aa.name=='form'&&ac.name=='input';};function y(aa){w(aa,true);if(x(aa,true))if(j)aa.add(new h.htmlParser.text('\xa0'));else aa.add(new h.htmlParser.element('br',{}));};function z(aa){w(aa);if(x(aa))aa.add(new h.htmlParser.text('\xa0'));};var A=m,B=l.extend({},A.$block,A.$listItem,A.$tableContent);for(var C in B){if(!('br' in A[C]))delete B[C];}delete B.pre;var D={elements:{},attributeNames:[[/^on/,'_cke_pa_on']]},E={elements:{}};for(C in B)E.elements[C]=y;var F={elementNames:[[/^cke:/,''],[/^\?xml:namespace$/,'']],attributeNames:[[/^_cke_(saved|pa)_/,''],[/^_cke.*/,''],['hidefocus','']],elements:{$:function(aa){var ab=aa.attributes;if(ab){if(ab.cke_temp)return false;var ac=['name','href','src'],ad;for(var ae=0;ae<ac.length;ae++){ad='_cke_saved_'+ac[ae];ad in ab&&delete ab[ac[ae]];}}return aa;},embed:function(aa){var ab=aa.parent;if(ab&&ab.name=='object'){var ac=ab.attributes.width,ad=ab.attributes.height;ac&&(aa.attributes.width=ac);ad&&(aa.attributes.height=ad);}},param:function(aa){aa.children=[];aa.isEmpty=true;return aa;},a:function(aa){if(!(aa.children.length||aa.attributes.name||aa.attributes._cke_saved_name))return false;
},html:function(aa){delete aa.attributes.contenteditable;delete aa.attributes['class'];},body:function(aa){delete aa.attributes.spellcheck;delete aa.attributes.contenteditable;},style:function(aa){var ab=aa.children[0];ab&&ab.value&&(ab.value=l.trim(ab.value));if(!aa.attributes.type)aa.attributes.type='text/css';},title:function(aa){var ab=aa.children[0];ab&&(ab.value=aa.attributes._cke_title||'');}},attributes:{'class':function(aa,ab){return l.ltrim(aa.replace(/(?:^|\s+)cke_[^\s]*/g,''))||false;}},comment:function(aa){if(aa.substr(0,u.length)==u){if(aa.substr(u.length,3)=='{C}')aa=aa.substr(u.length+3);else aa=aa.substr(u.length);return new h.htmlParser.cdata(decodeURIComponent(aa));}return aa;}},G={elements:{}};for(C in B)G.elements[C]=z;if(j)F.attributes.style=function(aa,ab){return aa.toLowerCase();};function H(aa){aa.attributes.contenteditable='false';};function I(aa){delete aa.attributes.contenteditable;};for(C in {input:1,textarea:1}){D.elements[C]=H;F.elements[C]=I;}var J=/<((?:a|area|img|input)\b[\s\S]*?\s)((href|src|name)\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|(?:[^ "'>]+)))([^>]*)>/gi,K=/\s_cke_saved_src\s*=/,L=/(?:<style(?=[ >])[^>]*>[\s\S]*<\/style>)|(?:<(:?link|meta|base)[^>]*>)/gi,M=/<cke:encoded>([^<]*)<\/cke:encoded>/gi,N=/(<\/?)((?:object|embed|param|html|body|head|title)[^>]*>)/gi,O=/(<\/?)cke:((?:html|body|head|title)[^>]*>)/gi,P=/<cke:(param|embed)([^>]*?)\/?>(?!\s*<\/cke:\1)/gi;function Q(aa){return aa.replace(J,function(ab,ac,ad,ae,af){if(ae=='src'&&K.test(ab))return ab;else return '<'+ac+ad+' _cke_saved_'+ad+af+'>';});};function R(aa){return aa.replace(L,function(ab){return '<cke:encoded>'+encodeURIComponent(ab)+'</cke:encoded>';});};function S(aa){return aa.replace(M,function(ab,ac){return decodeURIComponent(ac);});};function T(aa){return aa.replace(N,'$1cke:$2');};function U(aa){return aa.replace(O,'$1$2');};function V(aa){return aa.replace(P,'<cke:$1$2></cke:$1>');};function W(aa){return aa.replace(/(<pre\b[^>]*>)(\r\n|\n)/g,'$1$2$2');};function X(aa){return aa.replace(/<!--(?!{cke_protected})[\s\S]+?-->/g,function(ab){return '<!--'+u+'{C}'+encodeURIComponent(ab).replace(/--/g,'%2D%2D')+'-->';});};function Y(aa){return aa.replace(/<!--\{cke_protected\}\{C\}([\s\S]+?)-->/g,function(ab,ac){return decodeURIComponent(ac);});};function Z(aa,ab){var ac=[],ad=/<\!--\{cke_temp(comment)?\}(\d*?)-->/g,ae=[/<script[\s\S]*?<\/script>/gi,/<noscript[\s\S]*?<\/noscript>/gi].concat(ab);aa=aa.replace(/<!--[\s\S]*?-->/g,function(ag){return '<!--{cke_tempcomment}'+(ac.push(ag)-1)+'-->';
});for(var af=0;af<ae.length;af++)aa=aa.replace(ae[af],function(ag){ag=ag.replace(ad,function(ah,ai,aj){return ac[aj];});return '<!--{cke_temp}'+(ac.push(ag)-1)+'-->';});aa=aa.replace(ad,function(ag,ah,ai){return '<!--'+u+(ah?'{C}':'')+encodeURIComponent(ac[ai]).replace(/--/g,'%2D%2D')+'-->';});return aa;};q.add('htmldataprocessor',{requires:['htmlwriter'],init:function(aa){var ab=aa.dataProcessor=new h.htmlDataProcessor(aa);ab.writer.forceSimpleAmpersand=aa.config.forceSimpleAmpersand;ab.dataFilter.addRules(D);ab.dataFilter.addRules(E);ab.htmlFilter.addRules(F);ab.htmlFilter.addRules(G);}});h.htmlDataProcessor=function(aa){var ab=this;ab.editor=aa;ab.writer=new h.htmlWriter();ab.dataFilter=new h.htmlParser.filter();ab.htmlFilter=new h.htmlParser.filter();};h.htmlDataProcessor.prototype={toHtml:function(aa,ab){aa=Z(aa,this.editor.config.protectedSource);aa=Q(aa);aa=R(aa);aa=T(aa);aa=V(aa);aa=W(aa);var ac=new o('div');ac.setHtml('a'+aa);aa=ac.getHtml().substr(1);aa=U(aa);aa=S(aa);aa=Y(aa);var ad=h.htmlParser.fragment.fromHtml(aa,ab),ae=new h.htmlParser.basicWriter();ad.writeHtml(ae,this.dataFilter);aa=ae.getHtml(true);aa=X(aa);return aa;},toDataFormat:function(aa,ab){var ac=this.writer,ad=h.htmlParser.fragment.fromHtml(aa,ab);ac.reset();ad.writeHtml(ac,this.htmlFilter);return ac.getHtml(true);}};})();q.add('image',{init:function(t){var u='image';h.dialog.add(u,this.path+'dialogs/image.js');t.addCommand(u,new h.dialogCommand(u));t.ui.addButton('Image',{label:t.lang.common.image,command:u});t.on('doubleclick',function(v){var w=v.data.element;if(w.is('img')&&!w.getAttribute('_cke_realelement'))v.data.dialog='image';});if(t.addMenuItems)t.addMenuItems({image:{label:t.lang.image.menu,command:'image',group:'image'}});if(t.contextMenu)t.contextMenu.addListener(function(v,w){if(!v||!v.is('img')||v.getAttribute('_cke_realelement')||v.isReadOnly())return null;return{image:2};});}});p.image_removeLinkByEmptyURL=true;(function(){var t={ol:1,ul:1},u=k.walker.whitespaces(true),v=k.walker.bookmark(false,true);function w(B,C){B.getCommand(this.name).setState(C);};function x(B){var K=this;var C=B.editor,D=B.data.path,E=D&&D.contains(t);if(E)return w.call(K,C,2);if(!K.useIndentClasses&&K.name=='indent')return w.call(K,C,2);var F=B.data.path,G=F.block||F.blockLimit;if(!G)return w.call(K,C,0);if(K.useIndentClasses){var H=G.$.className.match(K.classNameRegex),I=0;if(H){H=H[1];I=K.indentClassMap[H];}if(K.name=='outdent'&&!I||K.name=='indent'&&I==C.config.indentClasses.length)return w.call(K,C,0);
return w.call(K,C,2);}else{var J=parseInt(G.getStyle(z(G)),10);if(isNaN(J))J=0;if(J<=0)return w.call(K,C,0);return w.call(K,C,2);}};function y(B,C){var E=this;E.name=C;E.useIndentClasses=B.config.indentClasses&&B.config.indentClasses.length>0;if(E.useIndentClasses){E.classNameRegex=new RegExp('(?:^|\\s+)('+B.config.indentClasses.join('|')+')(?=$|\\s)');E.indentClassMap={};for(var D=0;D<B.config.indentClasses.length;D++)E.indentClassMap[B.config.indentClasses[D]]=D+1;}E.startDisabled=C=='outdent';};function z(B,C){return(C||B.getComputedStyle('direction'))=='ltr'?'margin-left':'margin-right';};function A(B){return B.type=1&&B.is('li');};y.prototype={exec:function(B){var C=this,D={};function E(U){var V=K.startContainer,W=K.endContainer;while(V&&!V.getParent().equals(U))V=V.getParent();while(W&&!W.getParent().equals(U))W=W.getParent();if(!V||!W)return;var X=V,Y=[],Z=false;while(!Z){if(X.equals(W))Z=true;Y.push(X);X=X.getNext();}if(Y.length<1)return;var aa=U.getParents(true);for(var ab=0;ab<aa.length;ab++){if(aa[ab].getName&&t[aa[ab].getName()]){U=aa[ab];break;}}var ac=C.name=='indent'?1:-1,ad=Y[0],ae=Y[Y.length-1],af=q.list.listToArray(U,D),ag=af[ae.getCustomData('listarray_index')].indent;for(ab=ad.getCustomData('listarray_index');ab<=ae.getCustomData('listarray_index');ab++){af[ab].indent+=ac;var ah=af[ab].parent;af[ab].parent=new o(ah.getName(),ah.getDocument());}for(ab=ae.getCustomData('listarray_index')+1;ab<af.length&&af[ab].indent>ag;ab++)af[ab].indent+=ac;var ai=q.list.arrayToList(af,D,null,B.config.enterMode,U.getDirection());if(C.name=='outdent'){var aj;if((aj=U.getParent())&&aj.is('li')){var ak=ai.listNode.getChildren(),al=[],am=ak.count(),an;for(ab=am-1;ab>=0;ab--){if((an=ak.getItem(ab))&&an.is&&an.is('li'))al.push(an);}}}if(ai)ai.listNode.replace(U);if(al&&al.length)for(ab=0;ab<al.length;ab++){var ao=al[ab],ap=ao;while((ap=ap.getNext())&&ap.is&&ap.getName() in t){if(j&&!ao.getFirst(function(aq){return u(aq)&&v(aq);}))ao.append(K.document.createText('\xa0'));ao.append(ap);}ao.insertAfter(aj);}};function F(){var U=K.createIterator(),V=B.config.enterMode;U.enforceRealBlocks=true;U.enlargeBr=V!=2;var W;while(W=U.getNextParagraph())G(W);};function G(U,V){if(U.getCustomData('indent_processed'))return false;if(C.useIndentClasses){var W=U.$.className.match(C.classNameRegex),X=0;if(W){W=W[1];X=C.indentClassMap[W];}if(C.name=='outdent')X--;else X++;if(X<0)return false;X=Math.min(X,B.config.indentClasses.length);X=Math.max(X,0);U.$.className=l.ltrim(U.$.className.replace(C.classNameRegex,''));
if(X>0)U.addClass(B.config.indentClasses[X-1]);}else{var Y=z(U,V),Z=parseInt(U.getStyle(Y),10);if(isNaN(Z))Z=0;var aa=B.config.indentOffset||40;Z+=(C.name=='indent'?1:-1)*aa;if(Z<0)return false;Z=Math.max(Z,0);Z=Math.ceil(Z/aa)*aa;U.setStyle(Y,Z?Z+(B.config.indentUnit||'px'):'');if(U.getAttribute('style')==='')U.removeAttribute('style');}o.setMarker(D,U,'indent_processed',1);return true;};var H=B.getSelection(),I=H.createBookmarks(1),J=H&&H.getRanges(1),K,L=J.createIterator();while(K=L.getNextRange()){var M=K.getCommonAncestor(),N=M;while(N&&!(N.type==1&&t[N.getName()]))N=N.getParent();if(!N){var O=K.getEnclosedNode();if(O&&O.type==1&&O.getName() in t){K.setStartAt(O,1);K.setEndAt(O,2);N=O;}}if(N&&K.startContainer.type==1&&K.startContainer.getName() in t){var P=new k.walker(K);P.evaluator=A;K.startContainer=P.next();}if(N&&K.endContainer.type==1&&K.endContainer.getName() in t){P=new k.walker(K);P.evaluator=A;K.endContainer=P.previous();}if(N){var Q=N.getFirst(A),R=!!Q.getNext(A),S=K.startContainer,T=Q.equals(S)||Q.contains(S);if(!(T&&(C.name=='indent'||C.useIndentClasses||parseInt(N.getStyle(z(N)),10))&&G(N,!R&&Q.getDirection())))E(N);}else F();}o.clearAllMarkers(D);B.forceNextSelectionCheck();H.selectBookmarks(I);}};q.add('indent',{init:function(B){var C=new y(B,'indent'),D=new y(B,'outdent');B.addCommand('indent',C);B.addCommand('outdent',D);B.ui.addButton('Indent',{label:B.lang.indent,command:'indent'});B.ui.addButton('Outdent',{label:B.lang.outdent,command:'outdent'});B.on('selectionChange',l.bind(x,C));B.on('selectionChange',l.bind(x,D));if(i.ie6Compat||i.ie7Compat)B.addCss('ul,ol{\tmargin-left: 0px;\tpadding-left: 40px;}');B.on('dirChanged',function(E){var F=new k.range(B.document);F.setStartBefore(E.data.node);F.setEndAfter(E.data.node);var G=new k.walker(F),H;while(H=G.next()){if(H.type==1){if(!H.equals(E.data.node)&&H.getDirection()){F.setStartAfter(H);G=new k.walker(F);continue;}var I=B.config.indentClasses;if(I){var J=E.data.dir=='ltr'?['_rtl','']:['','_rtl'];for(var K=0;K<I.length;K++){if(H.hasClass(I[K]+J[0])){H.removeClass(I[K]+J[0]);H.addClass(I[K]+J[1]);}}}var L=H.getStyle('margin-right'),M=H.getStyle('margin-left');L?H.setStyle('margin-left',L):H.removeStyle('margin-left');M?H.setStyle('margin-right',M):H.removeStyle('margin-right');}}});},requires:['domiterator','list']});})();(function(){function t(y,z){var A=z.block||z.blockLimit;if(!A||A.getName()=='body')return 2;return u(A,y.config.useComputedState)==this.value?1:2;};function u(y,z){z=z===undefined||z;
var A;if(z)A=y.getComputedStyle('text-align');else{while(!y.hasAttribute||!(y.hasAttribute('align')||y.getStyle('text-align'))){var B=y.getParent();if(!B)break;y=B;}A=y.getStyle('text-align')||y.getAttribute('align')||'';}A&&(A=A.replace(/-moz-|-webkit-|start|auto/i,''));!A&&z&&(A=y.getComputedStyle('direction')=='rtl'?'right':'left');return A;};function v(y){var z=y.editor.getCommand(this.name);z.state=t.call(this,y.editor,y.data.path);z.fire('state');};function w(y,z,A){var C=this;C.name=z;C.value=A;var B=y.config.justifyClasses;if(B){switch(A){case 'left':C.cssClassName=B[0];break;case 'center':C.cssClassName=B[1];break;case 'right':C.cssClassName=B[2];break;case 'justify':C.cssClassName=B[3];break;}C.cssClassRegex=new RegExp('(?:^|\\s+)(?:'+B.join('|')+')(?=$|\\s)');}};function x(y){var z=y.editor,A=new k.range(z.document);A.setStartBefore(y.data.node);A.setEndAfter(y.data.node);var B=new k.walker(A),C;while(C=B.next()){if(C.type==1){if(!C.equals(y.data.node)&&C.getDirection()){A.setStartAfter(C);B=new k.walker(A);continue;}var D=z.config.justifyClasses;if(D)if(C.hasClass(D[0])){C.removeClass(D[0]);C.addClass(D[2]);}else if(C.hasClass(D[2])){C.removeClass(D[2]);C.addClass(D[0]);}var E='text-align',F=C.getStyle(E);if(F=='left')C.setStyle(E,'right');else if(F=='right')C.setStyle(E,'left');}}};w.prototype={exec:function(y){var K=this;var z=y.getSelection(),A=y.config.enterMode;if(!z)return;var B=z.createBookmarks(),C=z.getRanges(true),D=K.cssClassName,E,F,G=y.config.useComputedState;G=G===undefined||G;for(var H=C.length-1;H>=0;H--){E=C[H].createIterator();E.enlargeBr=A!=2;while(F=E.getNextParagraph()){F.removeAttribute('align');F.removeStyle('text-align');var I=D&&(F.$.className=l.ltrim(F.$.className.replace(K.cssClassRegex,''))),J=K.state==2&&(!G||u(F,true)!=K.value);if(D){if(J)F.addClass(D);else if(!I)F.removeAttribute('class');}else if(J)F.setStyle('text-align',K.value);}}y.focus();y.forceNextSelectionCheck();z.selectBookmarks(B);}};q.add('justify',{init:function(y){var z=new w(y,'justifyleft','left'),A=new w(y,'justifycenter','center'),B=new w(y,'justifyright','right'),C=new w(y,'justifyblock','justify');y.addCommand('justifyleft',z);y.addCommand('justifycenter',A);y.addCommand('justifyright',B);y.addCommand('justifyblock',C);y.ui.addButton('JustifyLeft',{label:y.lang.justify.left,command:'justifyleft'});y.ui.addButton('JustifyCenter',{label:y.lang.justify.center,command:'justifycenter'});y.ui.addButton('JustifyRight',{label:y.lang.justify.right,command:'justifyright'});
y.ui.addButton('JustifyBlock',{label:y.lang.justify.block,command:'justifyblock'});y.on('selectionChange',l.bind(v,z));y.on('selectionChange',l.bind(v,B));y.on('selectionChange',l.bind(v,A));y.on('selectionChange',l.bind(v,C));y.on('dirChanged',x);},requires:['domiterator']});})();q.add('keystrokes',{beforeInit:function(t){t.keystrokeHandler=new h.keystrokeHandler(t);t.specialKeys={};},init:function(t){var u=t.config.keystrokes,v=t.config.blockedKeystrokes,w=t.keystrokeHandler.keystrokes,x=t.keystrokeHandler.blockedKeystrokes;for(var y=0;y<u.length;y++)w[u[y][0]]=u[y][1];for(y=0;y<v.length;y++)x[v[y]]=1;}});h.keystrokeHandler=function(t){var u=this;if(t.keystrokeHandler)return t.keystrokeHandler;u.keystrokes={};u.blockedKeystrokes={};u._={editor:t};return u;};(function(){var t,u=function(w){w=w.data;var x=w.getKeystroke(),y=this.keystrokes[x],z=this._.editor;t=z.fire('key',{keyCode:x})===true;if(!t){if(y){var A={from:'keystrokeHandler'};t=z.execCommand(y,A)!==false;}if(!t){var B=z.specialKeys[x];t=B&&B(z)===true;if(!t)t=!!this.blockedKeystrokes[x];}}if(t)w.preventDefault(true);return!t;},v=function(w){if(t){t=false;w.data.preventDefault(true);}};h.keystrokeHandler.prototype={attach:function(w){w.on('keydown',u,this);if(i.opera||i.gecko&&i.mac)w.on('keypress',v,this);}};})();p.blockedKeystrokes=[1000+66,1000+73,1000+85];p.keystrokes=[[4000+121,'toolbarFocus'],[4000+122,'elementsPathFocus'],[2000+121,'contextMenu'],[1000+2000+121,'contextMenu'],[1000+90,'undo'],[1000+89,'redo'],[1000+2000+90,'redo'],[1000+76,'link'],[1000+66,'bold'],[1000+73,'italic'],[1000+85,'underline'],[4000+109,'toolbarCollapse'],[4000+48,'a11yHelp']];q.add('link',{init:function(t){t.addCommand('link',new h.dialogCommand('link'));t.addCommand('anchor',new h.dialogCommand('anchor'));t.addCommand('unlink',new h.unlinkCommand());t.ui.addButton('Link',{label:t.lang.link.toolbar,command:'link'});t.ui.addButton('Unlink',{label:t.lang.unlink,command:'unlink'});t.ui.addButton('Anchor',{label:t.lang.anchor.toolbar,command:'anchor'});h.dialog.add('link',this.path+'dialogs/link.js');h.dialog.add('anchor',this.path+'dialogs/anchor.js');t.addCss('img.cke_anchor{background-image: url('+h.getUrl(this.path+'images/anchor.gif')+');'+'background-position: center center;'+'background-repeat: no-repeat;'+'border: 1px solid #a9a9a9;'+'width: 18px !important;'+'height: 18px !important;'+'}\n'+'a.cke_anchor'+'{'+'background-image: url('+h.getUrl(this.path+'images/anchor.gif')+');'+'background-position: 0 center;'+'background-repeat: no-repeat;'+'border: 1px solid #a9a9a9;'+'padding-left: 18px;'+'}');
t.on('selectionChange',function(u){var v=t.getCommand('unlink'),w=u.data.path.lastElement&&u.data.path.lastElement.getAscendant('a',true);if(w&&w.getName()=='a'&&w.getAttribute('href'))v.setState(2);else v.setState(0);});t.on('doubleclick',function(u){var v=q.link.getSelectedLink(t)||u.data.element;if(!v.isReadOnly())if(v.is('a'))u.data.dialog=v.getAttribute('name')&&!v.getAttribute('href')?'anchor':'link';else if(v.is('img')&&v.getAttribute('_cke_real_element_type')=='anchor')u.data.dialog='anchor';});if(t.addMenuItems)t.addMenuItems({anchor:{label:t.lang.anchor.menu,command:'anchor',group:'anchor'},link:{label:t.lang.link.menu,command:'link',group:'link',order:1},unlink:{label:t.lang.unlink,command:'unlink',group:'link',order:5}});if(t.contextMenu)t.contextMenu.addListener(function(u,v){if(!u||u.isReadOnly())return null;var w=u.is('img')&&u.getAttribute('_cke_real_element_type')=='anchor';if(!w){if(!(u=q.link.getSelectedLink(t)))return null;w=u.getAttribute('name')&&!u.getAttribute('href');}return w?{anchor:2}:{link:2,unlink:2};});},afterInit:function(t){var u=t.dataProcessor,v=u&&u.dataFilter;if(v)v.addRules({elements:{a:function(w){var x=w.attributes;if(x.name&&!x.href)return t.createFakeParserElement(w,'cke_anchor','anchor');}}});},requires:['fakeobjects']});q.link={getSelectedLink:function(t){try{var u=t.getSelection();if(u.getType()==3){var v=u.getSelectedElement();if(v.is('a'))return v;}var w=u.getRanges(true)[0];w.shrink(2);var x=w.getCommonAncestor();return x.getAscendant('a',true);}catch(y){return null;}}};h.unlinkCommand=function(){};h.unlinkCommand.prototype={exec:function(t){var u=t.getSelection(),v=u.createBookmarks(),w=u.getRanges(),x,y;for(var z=0;z<w.length;z++){x=w[z].getCommonAncestor(true);y=x.getAscendant('a',true);if(!y)continue;w[z].selectNodeContents(y);}u.selectRanges(w);t.document.$.execCommand('unlink',false,null);u.selectBookmarks(v);},startDisabled:true};l.extend(p,{linkShowAdvancedTab:true,linkShowTargetTab:true});(function(){var t={ol:1,ul:1},u=/^[\n\r\t ]*$/,v=k.walker.whitespaces(),w=k.walker.bookmark(),x=function(M){return!(v(M)||w(M));};q.list={listToArray:function(M,N,O,P,Q){if(!t[M.getName()])return[];if(!P)P=0;if(!O)O=[];for(var R=0,S=M.getChildCount();R<S;R++){var T=M.getChild(R);if(T.$.nodeName.toLowerCase()!='li')continue;var U={parent:M,indent:P,element:T,contents:[]};if(!Q){U.grandparent=M.getParent();if(U.grandparent&&U.grandparent.$.nodeName.toLowerCase()=='li')U.grandparent=U.grandparent.getParent();}else U.grandparent=Q;
if(N)o.setMarker(N,T,'listarray_index',O.length);O.push(U);for(var V=0,W=T.getChildCount(),X;V<W;V++){X=T.getChild(V);if(X.type==1&&t[X.getName()])q.list.listToArray(X,N,O,P+1,U.grandparent);else U.contents.push(X);}}return O;},arrayToList:function(M,N,O,P,Q){if(!O)O=0;if(!M||M.length<O+1)return null;var R=M[O].parent.getDocument(),S=new k.documentFragment(R),T=null,U=O,V=Math.max(M[O].indent,0),W=null,X=P==1?'p':'div';while(1){var Y=M[U];if(Y.indent==V){if(!T||M[U].parent.getName()!=T.getName()){T=M[U].parent.clone(false,1);Q&&T.setAttribute('dir',Q);S.append(T);}W=T.append(Y.element.clone(0,1));for(var Z=0;Z<Y.contents.length;Z++)W.append(Y.contents[Z].clone(1,1));U++;}else if(Y.indent==Math.max(V,0)+1){var aa=q.list.arrayToList(M,null,U,P);W.append(aa.listNode);U=aa.nextIndex;}else if(Y.indent==-1&&!O&&Y.grandparent){W;if(t[Y.grandparent.getName()])W=Y.element.clone(false,true);else if(Q||Y.element.hasAttributes()||P!=2&&Y.grandparent.getName()!='td'){W=R.createElement(X);Y.element.copyAttributes(W,{type:1,value:1});Q&&W.setAttribute('dir',Q);if(!Q&&P==2&&!W.hasAttributes())W=new k.documentFragment(R);}else W=new k.documentFragment(R);for(Z=0;Z<Y.contents.length;Z++)W.append(Y.contents[Z].clone(1,1));if(W.type==11&&U!=M.length-1){var ab=W.getLast();if(ab&&ab.type==1&&ab.getAttribute('type')=='_moz')ab.remove();if(!(ab=W.getLast(x)&&ab.type==1&&ab.getName() in m.$block))W.append(R.createElement('br'));}if(W.type==1&&W.getName()==X&&W.$.firstChild){W.trim();var ac=W.getFirst();if(ac.type==1&&ac.isBlockBoundary()){var ad=new k.documentFragment(R);W.moveChildren(ad);W=ad;}}var ae=W.$.nodeName.toLowerCase();if(!j&&(ae=='div'||ae=='p'))W.appendBogus();S.append(W);T=null;U++;}else return null;if(M.length<=U||Math.max(M[U].indent,0)<V)break;}if(N){var af=S.getFirst();while(af){if(af.type==1)o.clearMarkers(N,af);af=af.getNextSourceNode();}}return{listNode:S,nextIndex:U};}};function y(M,N){M.getCommand(this.name).setState(N);};function z(M){var N=M.data.path,O=N.blockLimit,P=N.elements,Q;for(var R=0;R<P.length&&(Q=P[R])&&!Q.equals(O);R++){if(t[P[R].getName()])return y.call(this,M.editor,this.type==P[R].getName()?1:2);}return y.call(this,M.editor,2);};function A(M,N,O,P){var Q=q.list.listToArray(N.root,O),R=[];for(var S=0;S<N.contents.length;S++){var T=N.contents[S];T=T.getAscendant('li',true);if(!T||T.getCustomData('list_item_processed'))continue;R.push(T);o.setMarker(O,T,'list_item_processed',true);}var U=N.root,V=U.getDocument().createElement(this.type);U.copyAttributes(V,{start:1,type:1});
V.removeStyle('list-style-type');for(S=0;S<R.length;S++){var W=R[S].getCustomData('listarray_index');Q[W].parent=V;}var X=q.list.arrayToList(Q,O,null,M.config.enterMode),Y,Z=X.listNode.getChildCount();for(S=0;S<Z&&(Y=X.listNode.getChild(S));S++){if(Y.getName()==this.type)P.push(Y);}X.listNode.replace(N.root);};var B=/^h[1-6]$/;function C(M,N,O){var P=N.contents,Q=N.root.getDocument(),R=[];if(P.length==1&&P[0].equals(N.root)){var S=Q.createElement('div');P[0].moveChildren&&P[0].moveChildren(S);P[0].append(S);P[0]=S;}var T=N.contents[0].getParent();for(var U=0;U<P.length;U++)T=T.getCommonAncestor(P[U].getParent());var V=M.config.useComputedState,W,X;V=V===undefined||V;for(U=0;U<P.length;U++){var Y=P[U],Z;while(Z=Y.getParent()){if(Z.equals(T)){R.push(Y);if(!X&&Y.getDirection())X=1;var aa=Y.getDirection(V);if(W!==null)if(W&&W!=aa)W=null;else W=aa;break;}Y=Z;}}if(R.length<1)return;var ab=R[R.length-1].getNext(),ac=Q.createElement(this.type);O.push(ac);var ad,ae;while(R.length){ad=R.shift();ae=Q.createElement('li');if(ad.is('pre')||B.test(ad.getName()))ad.appendTo(ae);else{if(W&&ad.getDirection()){ad.removeStyle('direction');ad.removeAttribute('dir');}ad.copyAttributes(ae);ad.moveChildren(ae);ad.remove();}ae.appendTo(ac);}if(W&&X)ac.setAttribute('dir',W);if(ab)ac.insertBefore(ab);else ac.appendTo(T);};function D(M,N,O){var P=q.list.listToArray(N.root,O),Q=[];for(var R=0;R<N.contents.length;R++){var S=N.contents[R];S=S.getAscendant('li',true);if(!S||S.getCustomData('list_item_processed'))continue;Q.push(S);o.setMarker(O,S,'list_item_processed',true);}var T=null;for(R=0;R<Q.length;R++){var U=Q[R].getCustomData('listarray_index');P[U].indent=-1;T=U;}for(R=T+1;R<P.length;R++){if(P[R].indent>P[R-1].indent+1){var V=P[R-1].indent+1-P[R].indent,W=P[R].indent;while(P[R]&&P[R].indent>=W){P[R].indent+=V;R++;}R--;}}var X=q.list.arrayToList(P,O,null,M.config.enterMode,N.root.getAttribute('dir')),Y=X.listNode,Z,aa;function ab(ac){if((Z=Y[ac?'getFirst':'getLast']())&&!(Z.is&&Z.isBlockBoundary())&&(aa=N.root[ac?'getPrevious':'getNext'](k.walker.whitespaces(true)))&&!(aa.is&&aa.isBlockBoundary({br:1})))M.document.createElement('br')[ac?'insertBefore':'insertAfter'](Z);};ab(true);ab();Y.replace(N.root);};function E(M,N){this.name=M;this.type=N;};E.prototype={exec:function(M){M.focus();var N=M.document,O=M.getSelection(),P=O&&O.getRanges(true);if(!P||P.length<1)return;if(this.state==2){var Q=N.getBody();Q.trim();if(!Q.getFirst()){var R=N.createElement(M.config.enterMode==1?'p':M.config.enterMode==3?'div':'br');
R.appendTo(Q);P=new k.rangeList([new k.range(N)]);if(R.is('br')){P[0].setStartBefore(R);P[0].setEndAfter(R);}else P[0].selectNodeContents(R);O.selectRanges(P);}else{var S=P.length==1&&P[0],T=S&&S.getEnclosedNode();if(T&&T.is&&this.type==T.getName())y.call(this,M,1);}}var U=O.createBookmarks(true),V=[],W={},X=P.createIterator(),Y=0;while((S=X.getNextRange())&&++Y){var Z=S.getBoundaryNodes(),aa=Z.startNode,ab=Z.endNode;if(aa.type==1&&aa.getName()=='td')S.setStartAt(Z.startNode,1);if(ab.type==1&&ab.getName()=='td')S.setEndAt(Z.endNode,2);var ac=S.createIterator(),ad;ac.forceBrBreak=this.state==2;while(ad=ac.getNextParagraph()){if(ad.getCustomData('list_block'))continue;else o.setMarker(W,ad,'list_block',1);var ae=new k.elementPath(ad),af=ae.elements,ag=af.length,ah=null,ai=0,aj=ae.blockLimit,ak;for(var al=ag-1;al>=0&&(ak=af[al]);al--){if(t[ak.getName()]&&aj.contains(ak)){aj.removeCustomData('list_group_object_'+Y);var am=ak.getCustomData('list_group_object');if(am)am.contents.push(ad);else{am={root:ak,contents:[ad]};V.push(am);o.setMarker(W,ak,'list_group_object',am);}ai=1;break;}}if(ai)continue;var an=aj;if(an.getCustomData('list_group_object_'+Y))an.getCustomData('list_group_object_'+Y).contents.push(ad);else{am={root:an,contents:[ad]};o.setMarker(W,an,'list_group_object_'+Y,am);V.push(am);}}}var ao=[];while(V.length>0){am=V.shift();if(this.state==2){if(t[am.root.getName()])A.call(this,M,am,W,ao);else C.call(this,M,am,ao);}else if(this.state==1&&t[am.root.getName()])D.call(this,M,am,W);}for(al=0;al<ao.length;al++){ah=ao[al];var ap,aq=this;(ap=function(ar){var as=ah[ar?'getPrevious':'getNext'](k.walker.whitespaces(true));if(as&&as.getName&&as.getName()==aq.type){as.remove();as.moveChildren(ah,ar);}})();ap(1);}o.clearAllMarkers(W);O.selectBookmarks(U);M.focus();}};var F=m,G=/[\t\r\n ]*(?:&nbsp;|\xa0)$/;function H(M,N){var O,P=M.children,Q=P.length;for(var R=0;R<Q;R++){O=P[R];if(O.name&&O.name in N)return R;}return Q;};function I(M){return function(N){var O=N.children,P=H(N,F.$list),Q=O[P],R=Q&&Q.previous,S;if(R&&(R.name&&R.name=='br'||R.value&&(S=R.value.match(G)))){var T=R;if(!(S&&S.index)&&T==O[0])O[0]=M||j?new h.htmlParser.text('\xa0'):new h.htmlParser.element('br',{});else if(T.name=='br')O.splice(P-1,1);else T.value=T.value.replace(G,'');}};};var J={elements:{}};for(var K in F.$listItem)J.elements[K]=I();var L={elements:{}};for(K in F.$listItem)L.elements[K]=I(true);q.add('list',{init:function(M){var N=new E('numberedlist','ol'),O=new E('bulletedlist','ul');
M.addCommand('numberedlist',N);M.addCommand('bulletedlist',O);M.ui.addButton('NumberedList',{label:M.lang.numberedlist,command:'numberedlist'});M.ui.addButton('BulletedList',{label:M.lang.bulletedlist,command:'bulletedlist'});M.on('selectionChange',l.bind(z,N));M.on('selectionChange',l.bind(z,O));},afterInit:function(M){var N=M.dataProcessor;if(N){N.dataFilter.addRules(J);N.htmlFilter.addRules(L);}},requires:['domiterator']});})();(function(){q.liststyle={requires:['dialog'],init:function(t){t.addCommand('numberedListStyle',new h.dialogCommand('numberedListStyle'));h.dialog.add('numberedListStyle',this.path+'dialogs/liststyle.js');t.addCommand('bulletedListStyle',new h.dialogCommand('bulletedListStyle'));h.dialog.add('bulletedListStyle',this.path+'dialogs/liststyle.js');if(t.addMenuItems){t.addMenuGroup('list',108);t.addMenuItems({numberedlist:{label:t.lang.list.numberedTitle,group:'list',command:'numberedListStyle'},bulletedlist:{label:t.lang.list.bulletedTitle,group:'list',command:'bulletedListStyle'}});}if(t.contextMenu)t.contextMenu.addListener(function(u,v){if(!u||u.isReadOnly())return null;while(u){var w=u.getName();if(w=='ol')return{numberedlist:2};else if(w=='ul')return{bulletedlist:2};u=u.getParent();}return null;});}};q.add('liststyle',q.liststyle);})();(function(){function t(z){if(!z||z.type!=1||z.getName()!='form')return[];var A=[],B=['style','className'];for(var C=0;C<B.length;C++){var D=B[C],E=z.$.elements.namedItem(D);if(E){var F=new o(E);A.push([F,F.nextSibling]);F.remove();}}return A;};function u(z,A){if(!z||z.type!=1||z.getName()!='form')return;if(A.length>0)for(var B=A.length-1;B>=0;B--){var C=A[B][0],D=A[B][1];if(D)C.insertBefore(D);else C.appendTo(z);}};function v(z,A){var B=t(z),C={},D=z.$;if(!A){C['class']=D.className||'';D.className='';}C.inline=D.style.cssText||'';if(!A)D.style.cssText='position: static; overflow: visible';u(B);return C;};function w(z,A){var B=t(z),C=z.$;if('class' in A)C.className=A['class'];if('inline' in A)C.style.cssText=A.inline;u(B);};function x(z){var A=h.instances;for(var B in A){var C=A[B];if(C.mode=='wysiwyg'){var D=C.document.getBody();D.setAttribute('contentEditable',false);D.setAttribute('contentEditable',true);}}if(z.focusManager.hasFocus){z.toolbox.focus();z.focus();}};function y(z){if(!j||i.version>6)return null;var A=o.createFromHtml('<iframe frameborder="0" tabindex="-1" src="javascript:void((function(){document.open();'+(i.isCustomDomain()?"document.domain='"+this.getDocument().$.domain+"';":'')+'document.close();'+'})())"'+' style="display:block;position:absolute;z-index:-1;'+'progid:DXImageTransform.Microsoft.Alpha(opacity=0);'+'"></iframe>');
return z.append(A,true);};q.add('maximize',{init:function(z){var A=z.lang,B=h.document,C=B.getWindow(),D,E,F,G;function H(){var J=C.getViewPaneSize();G&&G.setStyles({width:J.width+'px',height:J.height+'px'});z.resize(J.width,J.height,null,true);};var I=2;z.addCommand('maximize',{modes:{wysiwyg:1,source:1},editorFocus:false,exec:function(){var J=z.container.getChild(1),K=z.getThemeSpace('contents');if(z.mode=='wysiwyg'){var L=z.getSelection();D=L&&L.getRanges();E=C.getScrollPosition();}else{var M=z.textarea.$;D=!j&&[M.selectionStart,M.selectionEnd];E=[M.scrollLeft,M.scrollTop];}if(this.state==2){C.on('resize',H);F=C.getScrollPosition();var N=z.container;while(N=N.getParent()){N.setCustomData('maximize_saved_styles',v(N));N.setStyle('z-index',z.config.baseFloatZIndex-1);}K.setCustomData('maximize_saved_styles',v(K,true));J.setCustomData('maximize_saved_styles',v(J,true));var O=C.getViewPaneSize(),P={overflow:'hidden',width:0,height:0};B.getDocumentElement().setStyles(P);!i.gecko&&B.getDocumentElement().setStyle('position','fixed');B.getBody().setStyles(P);j?setTimeout(function(){C.$.scrollTo(0,0);},0):C.$.scrollTo(0,0);J.setStyle('position','absolute');J.$.offsetLeft;J.setStyles({'z-index':z.config.baseFloatZIndex-1,left:'0px',top:'0px'});G=y(J);J.addClass('cke_maximized');H();var Q=J.getDocumentPosition();J.setStyles({left:-1*Q.x+'px',top:-1*Q.y+'px'});i.gecko&&x(z);}else if(this.state==1){C.removeListener('resize',H);var R=[K,J];for(var S=0;S<R.length;S++){w(R[S],R[S].getCustomData('maximize_saved_styles'));R[S].removeCustomData('maximize_saved_styles');}N=z.container;while(N=N.getParent()){w(N,N.getCustomData('maximize_saved_styles'));N.removeCustomData('maximize_saved_styles');}j?setTimeout(function(){C.$.scrollTo(F.x,F.y);},0):C.$.scrollTo(F.x,F.y);J.removeClass('cke_maximized');if(G){G.remove();G=null;}z.fire('resize');}this.toggleState();var T=this.uiItems[0],U=this.state==2?A.maximize:A.minimize,V=z.element.getDocument().getById(T._.id);V.getChild(1).setHtml(U);V.setAttribute('title',U);V.setAttribute('href','javascript:void("'+U+'");');if(z.mode=='wysiwyg'){if(D){i.gecko&&x(z);z.getSelection().selectRanges(D);var W=z.getSelection().getStartElement();W&&W.scrollIntoView(true);}else C.$.scrollTo(E.x,E.y);}else{if(D){M.selectionStart=D[0];M.selectionEnd=D[1];}M.scrollLeft=E[0];M.scrollTop=E[1];}D=E=null;I=this.state;},canUndo:false});z.ui.addButton('Maximize',{label:A.maximize,command:'maximize'});z.on('mode',function(){var J=z.getCommand('maximize');J.setState(J.state==0?0:I);
},null,null,100);}});})();var a={url:'',width:507,height:322,autoplay:'false',contentType:''},b={url:'',width:507,height:322,autoplay:'false',contentType:''},c='';(function(){q.add('mediaembed',{requires:['iframedialog'],init:function(t){var u=t.lang.mediaembed,v=this;h.dialog.add('MediaEmbedDialog',function(w){return{title:'Embed Media Dialog',minWidth:550,minHeight:200,contents:[{id:'iframe',label:'Embed Media',expand:true,elements:[{type:'html',id:'pageMediaEmbed',label:'Embed Media',style:'width : 100%',html:'<iframe src="'+v.path.toLowerCase()+'dialogs/mediaembed_'+w.config.language+'.html" frameborder="0" name="iframeMediaEmbed" id="iframeMediaEmbed" allowtransparency="1" style="width:100%;height:250px;margin:0;padding:0;"></iframe>'}]}],onShow:function(){e('iframe#iframeMediaEmbed',true);},onOk:function(){d(this.getParentEditor(),'iframe#iframeMediaEmbed',true);}};});h.dialog.add('MediaEmbedDialogMod',function(w){return{title:'Embed Media Dialog',minWidth:550,minHeight:200,contents:[{id:'iframe',label:'Embed Media',expand:true,elements:[{type:'html',id:'pageMediaEmbedMod',label:'Embed Media',style:'width : 100%',html:'<iframe src="'+v.path.toLowerCase()+'dialogs/mediaembed_'+w.config.language+'.html" frameborder="0" name="iframeMediaEmbed" id="iframeMediaEmbedMod" allowtransparency="1" style="width:100%;height:250px;margin:0;padding:0;"></iframe>'}]}],onShow:function(){e('iframe#iframeMediaEmbedMod',false);},onOk:function(){d(this.getParentEditor(),'iframe#iframeMediaEmbedMod',false);}};});t.addCommand('mediaembed',new h.dialogCommand('MediaEmbedDialog'));t.addCommand('mediaembedmod',new h.dialogCommand('MediaEmbedDialogMod'));t.addCommand('MediaEmbedRemove',{exec:function(w){var x=w.getSelection(),y=x.createBookmarks(),z=x.getStartElement();z.remove(false);x.selectBookmarks(y);}});t.ui.addButton('MediaEmbed',{label:'Embed Media',command:'mediaembed',icon:this.path.toLowerCase()+'images/icon.gif'});t.on('doubleclick',function(w){var x=w.data,y=x.element,z=y.getHtml();if(z.indexOf('include:media-player')==-1)return null;g(z,y);x.dialog='MediaEmbedDialogMod';});if(t.addMenuItems){t.addMenuGroup('mediaembed');t.addMenuItems({MediaEmbedDialogMod:{label:u.edit,command:'mediaembedmod',group:'mediaembed',icon:this.path.toLowerCase()+'images/icon.gif',order:1},RemoveMedia:{label:u.remove,command:'MediaEmbedRemove',group:'mediaembed',icon:this.path.toLowerCase()+'images/iconremove.gif',order:5}});}if(t.contextMenu)t.contextMenu.addListener(function(w,x){var y=w.getHtml();
if(y.indexOf('include:media-player')==-1)return null;g(y,w);return{MediaEmbedDialogMod:2,RemoveMedia:2};});}});})();function d(t,u,v){var w=$(u),x=w.contents(),y=x.find('#txtUrl').val();if(y!=''&&y.indexOf('.')!=-1){var z='${include:media-player url=['+encodeURI(y)+']',A=x.find('#txtContentType').val();if(A.length>0)z=z+' content-type=['+A+']';var B=x.find('#txtWidth').val();if(B.length>0&&B!=a.width)z=z+' width=['+B+']';var C=x.find('#txtHeight').val();if(C.length>0&&C!=a.height)z=z+' height=['+C+']';var D=x.find('#chkAutoplay');if(D.attr('checked')==true)z+=' autoplay=[true]';var E=x.find('#txtAlign').val();if(z.length>0)z+='}';var F='';if(A.length>0&&A=='audio/mp3')F='vrtx-media-player-audio';else if(f(y)=='mp3')F='vrtx-media-player-audio';else F='vrtx-media-player';var G=t.getSelection().getStartElement();if(G.is('p'))G.renameNode('div');if(v){var H=F;if(E!='')H=H+' '+E;G.appendHtml('<div class="'+H+'">'+z+'</div>');}else{G.removeAttribute('class');if(E!=''&&F!=''){G.addClass(F);G.addClass(E);}else G.addClass(F);G.setText(z);}}else{alert('Du må spesifisere en URL');return false;}};function e(t,u){var v=setInterval(function(){var w=$(t);if(w){var x=w.contents();if(x.find('#chkAutoplay').length){x.find('#txtUrl').val(u?a.url:b.url);x.find('#txtWidth').val(u?a.width:b.width);x.find('#txtHeight').val(u?a.height:b.height);x.find('#txtContentType').val(u?a.contentType:b.contentType);var y=u?a.autoplay:b.autoplay;if(y=='true')x.find('#chkAutoplay').attr('checked',true);else x.find('#chkAutoplay').attr('checked',false);if(c!=''&&c!=' '&&!u)x.find('#txtAlign').val(c);else x.find('#txtAlign').val('');if(!u){b.url=a.url;b.width=a.width;b.height=a.height;b.autoplay=a.autoplay;b.contentType=a.contentType;c='';}clearInterval(v);}}},50);};function f(t){var u=t.match(/\.(avi|asf|fla|flv|mov|mp3|mp4|m4v|mpg|mpeg|mpv|qt|swf|wma|wmv)$/i);if(u!=null&&u.length&&u.length>0)u=u[1];else u='';return u;};function g(t,u){var v=[],w=t,x=u.$.className;c=$.trim(x.replace(/vrtx-media-player[\w-]*/g,''));for(var y in b){if(y!='contentType')v=new RegExp('(?:'+y+'[\\s]*?=[\\s]*?\\[[\\s]*?)(.*?)(?=[\\s]*?\\])');else v=new RegExp('(?:content\\-type[\\s]*?=[\\s]*?\\[[\\s]*?)(.*?)(?=[\\s]*?\\])');var z=v.exec(t);if(z!=null)if(z.length=2)b[y]=$.trim(z[1]);t=w;}};q.add('newpage',{init:function(t){t.addCommand('newpage',{modes:{wysiwyg:1,source:1},exec:function(u){var v=this;u.setData(u.config.newpage_html||'',function(){setTimeout(function(){u.fire('afterCommandExec',{name:v.name,command:v});
},200);});u.focus();},async:true});t.ui.addButton('NewPage',{label:t.lang.newPage,command:'newpage'});}});q.add('pagebreak',{init:function(t){t.addCommand('pagebreak',q.pagebreakCmd);t.ui.addButton('PageBreak',{label:t.lang.pagebreak,command:'pagebreak'});t.addCss('img.cke_pagebreak{background-image: url('+h.getUrl(this.path+'images/pagebreak.gif')+');'+'background-position: center center;'+'background-repeat: no-repeat;'+'clear: both;'+'display: block;'+'float: none;'+'width:100% !important; _width:99.9% !important;'+'border-top: #999999 1px dotted;'+'border-bottom: #999999 1px dotted;'+'height: 5px !important;'+'page-break-after: always;'+'}');},afterInit:function(t){var u=t.dataProcessor,v=u&&u.dataFilter;if(v)v.addRules({elements:{div:function(w){var x=w.attributes,y=x&&x.style,z=y&&w.children.length==1&&w.children[0],A=z&&z.name=='span'&&z.attributes.style;if(A&&/page-break-after\s*:\s*always/i.test(y)&&/display\s*:\s*none/i.test(A)){var B=t.createFakeParserElement(w,'cke_pagebreak','div'),C=t.lang.pagebreakAlt;B.attributes.alt=C;B.attributes['aria-label']=C;return B;}}}});},requires:['fakeobjects']});q.pagebreakCmd={exec:function(t){var u=t.lang.pagebreakAlt,v=o.createFromHtml('<div style="page-break-after: always;"><span style="display: none;">&nbsp;</span></div>');v=t.createFakeElement(v,'cke_pagebreak','div');v.setAttribute('alt',u);v.setAttribute('aria-label',u);var w=t.getSelection().getRanges(true);t.fire('saveSnapshot');for(var x,y=w.length-1;y>=0;y--){x=w[y];if(y<w.length-1)v=v.clone(true);x.splitBlock('p');x.insertNode(v);if(y==w.length-1){x.moveToPosition(v,4);x.select();}var z=v.getPrevious();if(z&&m[z.getName()].div)v.move(z);}t.fire('saveSnapshot');}};(function(){q.add('pastefromword',{init:function(t){var u=0,v=function(){setTimeout(function(){u=0;},0);};t.addCommand('pastefromword',{canUndo:false,exec:function(){u=1;if(t.execCommand('paste')===false)t.on('dialogHide',function(w){w.removeListener();v();});else v();}});t.ui.addButton('PasteFromWord',{label:t.lang.pastefromword.toolbar,command:'pastefromword'});t.on('paste',function(w){var x=w.data,y;if((y=x.html)&&(u||/(class=\"?Mso|style=\"[^\"]*\bmso\-|w:WordDocument)/.test(y))){var z=this.loadFilterRules(function(){if(z)t.fire('paste',x);else if(!t.config.pasteFromWordPromptCleanup||u||confirm(t.lang.pastefromword.confirmCleanup))x.html=h.cleanWord(y,t);});z&&w.cancel();}},this);},loadFilterRules:function(t){var u=h.cleanWord;if(u)t();else{var v=h.getUrl(p.pasteFromWordCleanupFile||this.path+'filter/default.js');
h.scriptLoader.load(v,t,null,false,true);}return!u;}});})();(function(){var t={exec:function(w){var x=l.tryThese(function(){var y=window.clipboardData.getData('Text');if(!y)throw 0;return y;});if(!x){w.openDialog('pastetext');return false;}else w.fire('paste',{text:x});return true;}};function u(w,x){if(j){var y=w.selection;if(y.type=='Control')y.clear();y.createRange().pasteHTML(x);}else w.execCommand('inserthtml',false,x);};q.add('pastetext',{init:function(w){var x='pastetext',y=w.addCommand(x,t);w.ui.addButton('PasteText',{label:w.lang.pasteText.button,command:x});h.dialog.add(x,h.getUrl(this.path+'dialogs/pastetext.js'));if(w.config.forcePasteAsPlainText)w.on('beforeCommandExec',function(z){if(z.data.name=='paste'){w.execCommand('pastetext');z.cancel();}},null,null,0);},requires:['clipboard']});function v(w,x,y,z){while(y--)q.enterkey[x==2?'enterBr':'enterBlock'](w,x,null,z);};h.editor.prototype.insertText=function(w){this.focus();this.fire('saveSnapshot');var x=this.getSelection().getStartElement().hasAscendant('pre',true)?2:this.config.enterMode,y=x==2,z=this.document.$,A=this,B;w=l.htmlEncode(w.replace(/\r\n|\r/g,'\n'));var C=0;w.replace(/\n+/g,function(D,E){B=w.substring(C,E);C=E+D.length;B.length&&u(z,B);var F=D.length,G=y?0:Math.floor(F/2),H=y?F:F%2;v(A,x,G);v(A,2,H,y?false:true);});B=w.substring(C,w.length);B.length&&u(z,B);this.fire('saveSnapshot');};})();q.add('popup');l.extend(h.editor.prototype,{popup:function(t,u,v,w){u=u||'80%';v=v||'70%';if(typeof u=='string'&&u.length>1&&u.substr(u.length-1,1)=='%')u=parseInt(window.screen.width*parseInt(u,10)/100,10);if(typeof v=='string'&&v.length>1&&v.substr(v.length-1,1)=='%')v=parseInt(window.screen.height*parseInt(v,10)/100,10);if(u<640)u=640;if(v<420)v=420;var x=parseInt((window.screen.height-v)/2,10),y=parseInt((window.screen.width-u)/2,10);w=(w||'location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes,scrollbars=yes')+',width='+u+',height='+v+',top='+x+',left='+y;var z=window.open('',null,w,true);if(!z)return false;try{z.moveTo(y,x);z.resizeTo(u,v);z.focus();z.location.href=t;}catch(A){z=window.open(t,null,w,true);}return true;}});(function(){var t={modes:{wysiwyg:1,source:1},canUndo:false,exec:function(v){var w,x=v.config,y=x.baseHref?'<base href="'+x.baseHref+'"/>':'',z=i.isCustomDomain();if(x.fullPage)w=v.getData().replace(/<head>/,'$&'+y).replace(/[^>]*(?=<\/title>)/,v.lang.preview);else{var A='<body ',B=v.document&&v.document.getBody();if(B){if(B.getAttribute('id'))A+='id="'+B.getAttribute('id')+'" ';
if(B.getAttribute('class'))A+='class="'+B.getAttribute('class')+'" ';}A+='>';w=v.config.docType+'<html dir="'+v.config.contentsLangDirection+'">'+'<head>'+y+'<title>'+v.lang.preview+'</title>'+l.buildStyleHtml(v.config.contentsCss)+'</head>'+A+v.getData()+'</body></html>';}var C=640,D=420,E=80;try{var F=window.screen;C=Math.round(F.width*0.8);D=Math.round(F.height*0.7);E=Math.round(F.width*0.1);}catch(I){}var G='';if(z){window._cke_htmlToLoad=w;G='javascript:void( (function(){document.open();document.domain="'+document.domain+'";'+'document.write( window.opener._cke_htmlToLoad );'+'document.close();'+'window.opener._cke_htmlToLoad = null;'+'})() )';}var H=window.open(G,null,'toolbar=yes,location=no,status=yes,menubar=yes,scrollbars=yes,resizable=yes,width='+C+',height='+D+',left='+E);if(!z){H.document.open();H.document.write(w);H.document.close();}}},u='preview';q.add(u,{init:function(v){v.addCommand(u,t);v.ui.addButton('Preview',{label:v.lang.preview,command:u});}});})();q.add('print',{init:function(t){var u='print',v=t.addCommand(u,q.print);t.ui.addButton('Print',{label:t.lang.print,command:u});}});q.print={exec:function(t){if(i.opera)return;else if(i.gecko)t.window.$.print();else t.document.$.execCommand('Print');},canUndo:false,modes:{wysiwyg:!i.opera}};q.add('removeformat',{requires:['selection'],init:function(t){t.addCommand('removeFormat',q.removeformat.commands.removeformat);t.ui.addButton('RemoveFormat',{label:t.lang.removeFormat,command:'removeFormat'});t._.removeFormat={filters:[]};}});q.removeformat={commands:{removeformat:{exec:function(t){var u=t._.removeFormatRegex||(t._.removeFormatRegex=new RegExp('^(?:'+t.config.removeFormatTags.replace(/,/g,'|')+')$','i')),v=t._.removeAttributes||(t._.removeAttributes=t.config.removeFormatAttributes.split(',')),w=q.removeformat.filter,x=t.getSelection().getRanges(1),y=x.createIterator(),z;while(z=y.getNextRange()){if(z.collapsed)continue;z.enlarge(1);var A=z.createBookmark(),B=A.startNode,C=A.endNode,D=function(G){var H=new k.elementPath(G),I=H.elements;for(var J=1,K;K=I[J];J++){if(K.equals(H.block)||K.equals(H.blockLimit))break;if(u.test(K.getName())&&w(t,K))G.breakParent(K);}};D(B);D(C);var E=B.getNextSourceNode(true,1);while(E){if(E.equals(C))break;var F=E.getNextSourceNode(false,1);if(!(E.getName()=='img'&&E.getAttribute('_cke_realelement'))&&w(t,E))if(u.test(E.getName()))E.remove(1);else{E.removeAttributes(v);t.fire('removeFormatCleanup',E);}E=F;}z.moveToBookmark(A);}t.getSelection().selectRanges(x);
}}},filter:function(t,u){var v=t._.removeFormat.filters;for(var w=0;w<v.length;w++){if(v[w](u)===false)return false;}return true;}};h.editor.prototype.addRemoveFormatFilter=function(t){this._.removeFormat.filters.push(t);};p.removeFormatTags='b,big,code,del,dfn,em,font,i,ins,kbd,q,samp,small,span,strike,strong,sub,sup,tt,u,var';p.removeFormatAttributes='class,style,lang,width,height,align,hspace,valign';q.add('resize',{init:function(t){var u=t.config;!u.resize_dir&&(u.resize_dir='both');u.resize_maxWidth==undefined&&(u.resize_maxWidth=3000);u.resize_maxHeight==undefined&&(u.resize_maxHeight=3000);u.resize_minWidth==undefined&&(u.resize_minWidth=750);u.resize_minHeight==undefined&&(u.resize_minHeight=250);if(u.resize_enabled!==false){var v=null,w,x,y=(u.resize_dir=='both'||u.resize_dir=='horizontal')&&u.resize_minWidth!=u.resize_maxWidth,z=(u.resize_dir=='both'||u.resize_dir=='vertical')&&u.resize_minHeight!=u.resize_maxHeight;function A(D){var E=D.data.$.screenX-w.x,F=D.data.$.screenY-w.y,G=x.width,H=x.height,I=G+E*(t.lang.dir=='rtl'?-1:1),J=H+F;if(y)G=Math.max(u.resize_minWidth,Math.min(I,u.resize_maxWidth));if(z)H=Math.max(u.resize_minHeight,Math.min(J,u.resize_maxHeight));t.resize(G,H);};function B(D){h.document.removeListener('mousemove',A);h.document.removeListener('mouseup',B);if(t.document){t.document.removeListener('mousemove',A);t.document.removeListener('mouseup',B);}};var C=l.addFunction(function(D){if(!v)v=t.getResizable();x={width:v.$.offsetWidth||0,height:v.$.offsetHeight||0};w={x:D.screenX,y:D.screenY};u.resize_minWidth>x.width&&(u.resize_minWidth=x.width);u.resize_minHeight>x.height&&(u.resize_minHeight=x.height);h.document.on('mousemove',A);h.document.on('mouseup',B);if(t.document){t.document.on('mousemove',A);t.document.on('mouseup',B);}});t.on('destroy',function(){l.removeFunction(C);});t.on('themeSpace',function(D){if(D.data.space=='bottom'){var E='';if(y&&!z)E=' cke_resizer_horizontal';if(!y&&z)E=' cke_resizer_vertical';D.data.html+='<div class="cke_resizer'+E+'"'+' title="'+l.htmlEncode(t.lang.resize)+'"'+' onmousedown="CKEDITOR.tools.callFunction('+C+', event)"'+'></div>';}},t,null,100);}}});(function(){var t={modes:{wysiwyg:1,source:1},exec:function(v){var w=v.element.$.form;if(w)try{w.submit();}catch(x){if(w.submit.click)w.submit.click();}}},u='save';q.add(u,{init:function(v){var w=v.addCommand(u,t);w.modes={wysiwyg:!!v.element.$.form};v.ui.addButton('Save',{label:v.lang.save,command:u});}});})();(function(){var t='scaytcheck',u='';
function v(A,B){var C=0,D;for(D in B){if(B[D]==A){C=1;break;}}return C;};var w=function(){var A=this,B=function(){var F=A.config,G={};G.srcNodeRef=A.document.getWindow().$.frameElement;G.assocApp='CKEDITOR.'+h.version+'@'+h.revision;G.customerid=F.scayt_customerid||'1:WvF0D4-UtPqN1-43nkD4-NKvUm2-daQqk3-LmNiI-z7Ysb4-mwry24-T8YrS3-Q2tpq2';G.customDictionaryIds=F.scayt_customDictionaryIds||'';G.userDictionaryName=F.scayt_userDictionaryName||'';G.sLang=F.scayt_sLang||'en_US';G.onLoad=function(){if(!(j&&i.version<8))this.addStyle(this.selectorCss(),'padding-bottom: 2px !important;');if(A.focusManager.hasFocus&&!x.isControlRestored(A))this.focus();};G.onBeforeChange=function(){if(x.getScayt(A)&&!A.checkDirty())setTimeout(function(){A.resetDirty();},0);};var H=window.scayt_custom_params;if(typeof H=='object')for(var I in H)G[I]=H[I];if(x.getControlId(A))G.id=x.getControlId(A);var J=new window.scayt(G);J.afterMarkupRemove.push(function(Q){new o(Q,J.document).mergeSiblings();});var K=x.instances[A.name];if(K){J.sLang=K.sLang;J.option(K.option());J.paused=K.paused;}x.instances[A.name]=J;var L='scaytButton',M=window.scayt.uiTags,N=[];for(var O=0,P=4;O<P;O++)N.push(M[O]&&x.uiTabs[O]);x.uiTabs=N;try{J.setDisabled(x.isPaused(A)===false);}catch(Q){}A.fire('showScaytState');};A.on('contentDom',B);A.on('contentDomUnload',function(){var F=h.document.getElementsByTag('script'),G=/^dojoIoScript(\d+)$/i,H=/^https?:\/\/svc\.spellchecker\.net\/spellcheck\/script\/ssrv\.cgi/i;for(var I=0;I<F.count();I++){var J=F.getItem(I),K=J.getId(),L=J.getAttribute('src');if(K&&L&&K.match(G)&&L.match(H))J.remove();}});A.on('beforeCommandExec',function(F){if((F.data.name=='source'||F.data.name=='newpage')&&A.mode=='wysiwyg'){var G=x.getScayt(A);if(G){x.setPaused(A,!G.disabled);x.setControlId(A,G.id);G.destroy(true);delete x.instances[A.name];}}else if(F.data.name=='source'&&A.mode=='source')x.markControlRestore(A);});A.on('afterCommandExec',function(F){if(!x.isScaytEnabled(A))return;if(A.mode=='wysiwyg'&&(F.data.name=='undo'||F.data.name=='redo'))window.setTimeout(function(){x.getScayt(A).refresh();},10);});A.on('destroy',function(F){var G=F.editor,H=x.getScayt(G);if(!H)return;delete x.instances[G.name];x.setControlId(G,H.id);H.destroy(true);});A.on('afterSetData',function(){if(x.isScaytEnabled(A))window.setTimeout(function(){var F=x.getScayt(A);F&&F.refresh();},10);});A.on('insertElement',function(){var F=x.getScayt(A);if(x.isScaytEnabled(A)){if(j)A.getSelection().unlock(true);window.setTimeout(function(){F.focus();
F.refresh();},10);}},this,null,50);A.on('insertHtml',function(){var F=x.getScayt(A);if(x.isScaytEnabled(A)){if(j)A.getSelection().unlock(true);window.setTimeout(function(){F.focus();F.refresh();},10);}},this,null,50);A.on('scaytDialog',function(F){F.data.djConfig=window.djConfig;F.data.scayt_control=x.getScayt(A);F.data.tab=u;F.data.scayt=window.scayt;});var C=A.dataProcessor,D=C&&C.htmlFilter;if(D)D.addRules({elements:{span:function(F){if(F.attributes['data-scayt_word']&&F.attributes['data-scaytid']){delete F.name;return F;}}}});var E=q.undo.Image.prototype;E.equals=l.override(E.equals,function(F){return function(G){var L=this;var H=L.contents,I=G.contents,J=x.getScayt(L.editor);if(J&&x.isScaytReady(L.editor)){L.contents=J.reset(H)||'';G.contents=J.reset(I)||'';}var K=F.apply(L,arguments);L.contents=H;G.contents=I;return K;};});if(A.document)B();};q.scayt={engineLoaded:false,instances:{},controlInfo:{},setControlInfo:function(A,B){if(A&&A.name&&typeof this.controlInfo[A.name]!='object')this.controlInfo[A.name]={};for(var C in B)this.controlInfo[A.name][C]=B[C];},isControlRestored:function(A){if(A&&A.name&&this.controlInfo[A.name])return this.controlInfo[A.name].restored;return false;},markControlRestore:function(A){this.setControlInfo(A,{restored:true});},setControlId:function(A,B){this.setControlInfo(A,{id:B});},getControlId:function(A){if(A&&A.name&&this.controlInfo[A.name]&&this.controlInfo[A.name].id)return this.controlInfo[A.name].id;return null;},setPaused:function(A,B){this.setControlInfo(A,{paused:B});},isPaused:function(A){if(A&&A.name&&this.controlInfo[A.name])return this.controlInfo[A.name].paused;return undefined;},getScayt:function(A){return this.instances[A.name];},isScaytReady:function(A){return this.engineLoaded===true&&'undefined'!==typeof window.scayt&&this.getScayt(A);},isScaytEnabled:function(A){var B=this.getScayt(A);return B?B.disabled===false:false;},loadEngine:function(A){if(i.gecko&&i.version<10900||i.opera)return A.fire('showScaytState');if(this.engineLoaded===true)return w.apply(A);else if(this.engineLoaded==-1)return h.on('scaytReady',function(){w.apply(A);});h.on('scaytReady',w,A);h.on('scaytReady',function(){this.engineLoaded=true;},this,null,0);this.engineLoaded=-1;var B=document.location.protocol;B=B.search(/https?:/)!=-1?B:'http:';var C='svc.spellchecker.net/scayt26/loader__base.js',D=A.config.scayt_srcUrl||B+'//'+C,E=x.parseUrl(D).path+'/';if(window.scayt==undefined){h._djScaytConfig={baseUrl:E,addOnLoad:[function(){h.fireOnce('scaytReady');
}],isDebug:false};h.document.getHead().append(h.document.createElement('script',{attributes:{type:'text/javascript',async:'true',src:D}}));}else h.fireOnce('scaytReady');return null;},parseUrl:function(A){var B;if(A.match&&(B=A.match(/(.*)[\/\\](.*?\.\w+)$/)))return{path:B[1],file:B[2]};else return A;}};var x=q.scayt,y=function(A,B,C,D,E,F,G){A.addCommand(D,E);A.addMenuItem(D,{label:C,command:D,group:F,order:G});},z={preserveState:true,editorFocus:false,canUndo:false,exec:function(A){if(x.isScaytReady(A)){var B=x.isScaytEnabled(A);this.setState(B?2:1);var C=x.getScayt(A);C.focus();C.setDisabled(B);}else if(!A.config.scayt_autoStartup&&x.engineLoaded>=0){this.setState(0);x.loadEngine(A);}}};q.add('scayt',{requires:['menubutton'],beforeInit:function(A){var B=A.config.scayt_contextMenuItemsOrder||'suggest|moresuggest|control',C='';B=B.split('|');if(B&&B.length)for(var D=0;D<B.length;D++)C+='scayt_'+B[D]+(B.length!=parseInt(D,10)+1?',':'');A.config.menu_groups=C+','+A.config.menu_groups;},init:function(A){var B={},C={},D=A.addCommand(t,z);h.dialog.add(t,h.getUrl(this.path+'dialogs/options.js'));var E=A.config.scayt_uiTabs||'1,1,1',F=[];E=E.split(',');for(var G=0,H=3;G<H;G++){var I=parseInt(E[G]||'1',10);F.push(I);}var J='scaytButton';A.addMenuGroup(J);var K={},L=A.lang.scayt;K.scaytToggle={label:L.enable,command:t,group:J};if(F[0]==1)K.scaytOptions={label:L.options,group:J,onClick:function(){u='options';A.openDialog(t);}};if(F[1]==1)K.scaytLangs={label:L.langs,group:J,onClick:function(){u='langs';A.openDialog(t);}};if(F[2]==1)K.scaytDict={label:L.dictionariesTab,group:J,onClick:function(){u='dictionaries';A.openDialog(t);}};K.scaytAbout={label:A.lang.scayt.about,group:J,onClick:function(){u='about';A.openDialog(t);}};F[3]=1;x.uiTabs=F;A.addMenuItems(K);A.ui.add('Scayt',5,{label:L.title,title:i.opera?L.opera_title:L.title,className:'cke_button_scayt',modes:{wysiwyg:1},onRender:function(){D.on('state',function(){this.setState(D.state);},this);},onMenu:function(){var N=x.isScaytEnabled(A);A.getMenuItem('scaytToggle').label=L[N?'disable':'enable'];return{scaytToggle:2,scaytOptions:N&&x.uiTabs[0]?2:0,scaytLangs:N&&x.uiTabs[1]?2:0,scaytDict:N&&x.uiTabs[2]?2:0,scaytAbout:N&&x.uiTabs[3]?2:0};}});if(A.contextMenu&&A.addMenuItems)A.contextMenu.addListener(function(N,O){if(!x.isScaytEnabled(A)||O.getCommonAncestor().isReadOnly())return null;var P=x.getScayt(A),Q=P.getScaytNode();if(!Q)return null;var R=P.getWord(Q);if(!R)return null;var S=P.getLang(),T={},U=window.scayt.getSuggestion(R,S);
if(!U||!U.length)return null;for(G in B){delete A._.menuItems[G];delete A._.commands[G];}for(G in C){delete A._.menuItems[G];delete A._.commands[G];}B={};C={};var V=A.config.scayt_moreSuggestions||'on',W=false,X=A.config.scayt_maxSuggestions;typeof X!='number'&&(X=5);!X&&(X=U.length);var Y=A.config.scayt_contextCommands||'all';Y=Y.split('|');for(var Z=0,aa=U.length;Z<aa;Z+=1){var ab='scayt_suggestion_'+U[Z].replace(' ','_'),ac=(function(ag,ah){return{exec:function(){P.replace(ag,ah);}};})(Q,U[Z]);if(Z<X){y(A,'button_'+ab,U[Z],ab,ac,'scayt_suggest',Z+1);T[ab]=2;C[ab]=2;}else if(V=='on'){y(A,'button_'+ab,U[Z],ab,ac,'scayt_moresuggest',Z+1);B[ab]=2;W=true;}}if(W){A.addMenuItem('scayt_moresuggest',{label:L.moreSuggestions,group:'scayt_moresuggest',order:10,getItems:function(){return B;}});C.scayt_moresuggest=2;}if(v('all',Y)||v('ignore',Y)){var ad={exec:function(){P.ignore(Q);}};y(A,'ignore',L.ignore,'scayt_ignore',ad,'scayt_control',1);C.scayt_ignore=2;}if(v('all',Y)||v('ignoreall',Y)){var ae={exec:function(){P.ignoreAll(Q);}};y(A,'ignore_all',L.ignoreAll,'scayt_ignore_all',ae,'scayt_control',2);C.scayt_ignore_all=2;}if(v('all',Y)||v('add',Y)){var af={exec:function(){window.scayt.addWordToUserDictionary(Q);}};y(A,'add_word',L.addWord,'scayt_add_word',af,'scayt_control',3);C.scayt_add_word=2;}if(P.fireOnContextMenu)P.fireOnContextMenu(A);return C;});var M=function(){A.removeListener('showScaytState',M);if(!i.opera)D.setState(x.isScaytEnabled(A)?1:2);else D.setState(0);};A.on('showScaytState',M);if(i.opera)A.on('instanceReady',function(){M();});if(A.config.scayt_autoStartup)A.on('instanceReady',function(){x.loadEngine(A);});},afterInit:function(A){var B,C=function(D){if(D.hasAttribute('data-scaytid'))return false;};if(A._.elementsPath&&(B=A._.elementsPath.filters))B.push(C);A.addRemoveFormatFilter&&A.addRemoveFormatFilter(C);}});})();q.add('smiley',{requires:['dialog'],init:function(t){t.config.smiley_path=t.config.smiley_path||this.path+'images/';t.addCommand('smiley',new h.dialogCommand('smiley'));t.ui.addButton('Smiley',{label:t.lang.smiley.toolbar,command:'smiley'});h.dialog.add('smiley',this.path+'dialogs/smiley.js');}});p.smiley_images=['regular_smile.gif','sad_smile.gif','wink_smile.gif','teeth_smile.gif','confused_smile.gif','tounge_smile.gif','embaressed_smile.gif','omg_smile.gif','whatchutalkingabout_smile.gif','angry_smile.gif','angel_smile.gif','shades_smile.gif','devil_smile.gif','cry_smile.gif','lightbulb.gif','thumbs_down.gif','thumbs_up.gif','heart.gif','broken_heart.gif','kiss.gif','envelope.gif'];
p.smiley_descriptions=['smiley','sad','wink','laugh','frown','cheeky','blush','surprise','indecision','angry','angel','cool','devil','crying','enlightened','no','yes','heart','broken heart','kiss','mail'];(function(){var t='.%2 p,.%2 div,.%2 pre,.%2 address,.%2 blockquote,.%2 h1,.%2 h2,.%2 h3,.%2 h4,.%2 h5,.%2 h6{background-repeat: no-repeat;background-position: top %3;border: 1px dotted gray;padding-top: 8px;padding-%3: 8px;}.%2 p{%1p.png);}.%2 div{%1div.png);}.%2 pre{%1pre.png);}.%2 address{%1address.png);}.%2 blockquote{%1blockquote.png);}.%2 h1{%1h1.png);}.%2 h2{%1h2.png);}.%2 h3{%1h3.png);}.%2 h4{%1h4.png);}.%2 h5{%1h5.png);}.%2 h6{%1h6.png);}',u=/%1/g,v=/%2/g,w=/%3/g,x={preserveState:true,editorFocus:false,exec:function(y){this.toggleState();this.refresh(y);},refresh:function(y){var z=this.state==1?'addClass':'removeClass';y.document.getBody()[z]('cke_show_blocks');}};q.add('showblocks',{requires:['wysiwygarea'],init:function(y){var z=y.addCommand('showblocks',x);z.canUndo=false;if(y.config.startupOutlineBlocks)z.setState(1);y.addCss(t.replace(u,'background-image: url('+h.getUrl(this.path)+'images/block_').replace(v,'cke_show_blocks ').replace(w,y.lang.dir=='rtl'?'right':'left'));y.ui.addButton('ShowBlocks',{label:y.lang.showBlocks,command:'showblocks'});y.on('mode',function(){if(z.state!=0)z.refresh(y);});y.on('contentDom',function(){if(z.state!=0)z.refresh(y);});}});})();(function(){var t='cke_show_border',u,v=(i.ie6Compat?['.%1 table.%2,','.%1 table.%2 td, .%1 table.%2 th,','{','border : #d3d3d3 1px dotted','}']:['.%1 table.%2,','.%1 table.%2 > tr > td, .%1 table.%2 > tr > th,','.%1 table.%2 > tbody > tr > td, .%1 table.%2 > tbody > tr > th,','.%1 table.%2 > thead > tr > td, .%1 table.%2 > thead > tr > th,','.%1 table.%2 > tfoot > tr > td, .%1 table.%2 > tfoot > tr > th','{','border : #d3d3d3 1px dotted','}']).join('');u=v.replace(/%2/g,t).replace(/%1/g,'cke_show_borders ');var w={preserveState:true,editorFocus:false,exec:function(x){this.toggleState();this.refresh(x);},refresh:function(x){var y=this.state==1?'addClass':'removeClass';x.document.getBody()[y]('cke_show_borders');}};q.add('showborders',{requires:['wysiwygarea'],modes:{wysiwyg:1},init:function(x){var y=x.addCommand('showborders',w);y.canUndo=false;if(x.config.startupShowBorders!==false)y.setState(1);x.addCss(u);x.on('mode',function(){if(y.state!=0)y.refresh(x);},null,null,100);x.on('contentDom',function(){if(y.state!=0)y.refresh(x);});x.on('removeFormatCleanup',function(z){var A=z.data;
if(x.getCommand('showborders').state==1&&A.is('table')&&(!A.hasAttribute('border')||parseInt(A.getAttribute('border'),10)<=0))A.addClass(t);});},afterInit:function(x){var y=x.dataProcessor,z=y&&y.dataFilter,A=y&&y.htmlFilter;if(z)z.addRules({elements:{table:function(B){var C=B.attributes,D=C['class'],E=parseInt(C.border,10);if(!E||E<=0)C['class']=(D||'')+' '+t;}}});if(A)A.addRules({elements:{table:function(B){var C=B.attributes,D=C['class'];D&&(C['class']=D.replace(t,'').replace(/\s{2}/,' ').replace(/^\s+|\s+$/,''));}}});}});h.on('dialogDefinition',function(x){var y=x.data.name;if(y=='table'||y=='tableProperties'){var z=x.data.definition,A=z.getContents('info'),B=A.get('txtBorder'),C=B.commit;B.commit=l.override(C,function(F){return function(G,H){F.apply(this,arguments);var I=parseInt(this.getValue(),10);H[!I||I<=0?'addClass':'removeClass'](t);};});var D=z.getContents('advanced'),E=D&&D.get('advCSSClasses');if(E){E.setup=l.override(E.setup,function(F){return function(){F.apply(this,arguments);this.setValue(this.getValue().replace(/cke_show_border/,''));};});E.commit=l.override(E.commit,function(F){return function(G,H){F.apply(this,arguments);if(!parseInt(H.getAttribute('border'),10))H.addClass('cke_show_border');};});}}});})();q.add('sourcearea',{requires:['editingblock'],init:function(t){var u=q.sourcearea,v=h.document.getWindow();t.on('editingBlockReady',function(){var w,x;t.addMode('source',{load:function(y,z){if(j&&i.version<8)y.setStyle('position','relative');t.textarea=w=new o('textarea');w.setAttributes({dir:'ltr',tabIndex:i.webkit?-1:t.tabIndex,role:'textbox','aria-label':t.lang.editorTitle.replace('%1',t.name)});w.addClass('cke_source');w.addClass('cke_enable_context_menu');var A={width:i.ie7Compat?'99%':'100%',height:'100%',resize:'none',outline:'none','text-align':'left'};if(j){x=function(){w.hide();w.setStyle('height',y.$.clientHeight+'px');w.setStyle('width',y.$.clientWidth+'px');w.show();};t.on('resize',x);v.on('resize',x);setTimeout(x,0);}y.setHtml('');y.append(w);w.setStyles(A);t.fire('ariaWidget',w);w.on('blur',function(){t.focusManager.blur();});w.on('focus',function(){t.focusManager.focus();});t.mayBeDirty=true;this.loadData(z);var B=t.keystrokeHandler;if(B)B.attach(w);setTimeout(function(){t.mode='source';t.fire('mode');},i.gecko||i.webkit?100:0);},loadData:function(y){w.setValue(y);t.fire('dataReady');},getData:function(){return w.getValue();},getSnapshotData:function(){return w.getValue();},unload:function(y){w.clearCustomData();t.textarea=w=null;
if(x){t.removeListener('resize',x);v.removeListener('resize',x);}if(j&&i.version<8)y.removeStyle('position');},focus:function(){w.focus();}});});t.addCommand('source',u.commands.source);if(t.ui.addButton)t.ui.addButton('Source',{label:t.lang.source,command:'source'});t.on('mode',function(){t.getCommand('source').setState(t.mode=='source'?1:2);});}});q.sourcearea={commands:{source:{modes:{wysiwyg:1,source:1},editorFocus:false,exec:function(t){if(t.mode=='wysiwyg')t.fire('saveSnapshot');t.getCommand('source').setState(0);t.setMode(t.mode=='source'?'wysiwyg':'source');},canUndo:false}}};(function(){q.add('stylescombo',{requires:['richcombo','styles'],init:function(u){var v=u.config,w=u.lang.stylesCombo,x={},y=[];function z(A){u.getStylesSet(function(B){if(!y.length){var C,D;for(var E=0,F=B.length;E<F;E++){var G=B[E];D=G.name;C=x[D]=new h.style(G);C._name=D;C._.enterMode=v.enterMode;y.push(C);}y.sort(t);}A&&A();});};u.ui.addRichCombo('Styles',{label:w.label,title:w.panelTitle,className:'cke_styles',panel:{css:u.skin.editor.css.concat(v.contentsCss),multiSelect:true,attributes:{'aria-label':w.panelTitle}},init:function(){var A=this;z(function(){var B,C,D;for(var E=0,F=y.length;E<F;E++){B=y[E];C=B._name;var G=B.type;if(G!=D){A.startGroup(w['panelTitle'+String(G)]);D=G;}A.add(C,B.type==3?C:B.buildPreview(),C);}A.commit();A.onOpen();});},onClick:function(A){u.focus();u.fire('saveSnapshot');var B=x[A],C=u.getSelection(),D=new k.elementPath(C.getStartElement());if(B.type==2&&B.checkActive(D))B.remove(u.document);else if(B.type==3&&B.checkActive(D))B.remove(u.document);else B.apply(u.document);u.fire('saveSnapshot');},onRender:function(){u.on('selectionChange',function(A){var B=this.getValue(),C=A.data.path,D=C.elements;for(var E=0,F=D.length,G;E<F;E++){G=D[E];for(var H in x){if(x[H].checkElementRemovable(G,true)){if(H!=B)this.setValue(H);return;}}}this.setValue('');},this);},onOpen:function(){var H=this;if(j||i.webkit)u.focus();var A=u.getSelection(),B=A.getSelectedElement(),C=new k.elementPath(B||A.getStartElement()),D=[0,0,0,0];H.showAll();H.unmarkAll();for(var E in x){var F=x[E],G=F.type;if(F.checkActive(C))H.mark(E);else if(G==3&&!F.checkApplicable(C)){H.hideItem(E);D[G]--;}D[G]++;}if(!D[1])H.hideGroup(w['panelTitle'+String(1)]);if(!D[2])H.hideGroup(w['panelTitle'+String(2)]);if(!D[3])H.hideGroup(w['panelTitle'+String(3)]);}});u.on('instanceReady',function(){z();});}});function t(u,v){var w=u.type,x=v.type;return w==x?0:w==3?-1:x==3?1:x==1?1:-1;};})();q.add('table',{init:function(t){var u=q.table,v=t.lang.table;
t.addCommand('table',new h.dialogCommand('table'));t.addCommand('tableProperties',new h.dialogCommand('tableProperties'));t.ui.addButton('Table',{label:v.toolbar,command:'table'});h.dialog.add('table',this.path+'dialogs/table.js');h.dialog.add('tableProperties',this.path+'dialogs/table.js');if(t.addMenuItems)t.addMenuItems({table:{label:v.menu,command:'tableProperties',group:'table',order:5},tabledelete:{label:v.deleteTable,command:'tableDelete',group:'table',order:1}});t.on('doubleclick',function(w){var x=w.data.element;if(x.is('table'))w.data.dialog='tableProperties';});if(t.contextMenu)t.contextMenu.addListener(function(w,x){if(!w||w.isReadOnly())return null;var y=w.hasAscendant('table',1);if(y)return{tabledelete:2,table:2};return null;});}});(function(){function t(N,O){if(j)N.removeAttribute(O);else delete N[O];};var u=/^(?:td|th)$/;function v(N){var O=N.createBookmarks(),P=N.getRanges(),Q=[],R={};function S(aa){if(Q.length>0)return;if(aa.type==1&&u.test(aa.getName())&&!aa.getCustomData('selected_cell')){o.setMarker(R,aa,'selected_cell',true);Q.push(aa);}};for(var T=0;T<P.length;T++){var U=P[T];if(U.collapsed){var V=U.getCommonAncestor(),W=V.getAscendant('td',true)||V.getAscendant('th',true);if(W)Q.push(W);}else{var X=new k.walker(U),Y;X.guard=S;while(Y=X.next()){var Z=Y.getParent();if(Z&&u.test(Z.getName())&&!Z.getCustomData('selected_cell')){o.setMarker(R,Z,'selected_cell',true);Q.push(Z);}}}}o.clearAllMarkers(R);N.selectBookmarks(O);return Q;};function w(N){var O=0,P=N.length-1,Q={},R,S,T;while(R=N[O++])o.setMarker(Q,R,'delete_cell',true);O=0;while(R=N[O++]){if((S=R.getPrevious())&&!S.getCustomData('delete_cell')||(S=R.getNext())&&!S.getCustomData('delete_cell')){o.clearAllMarkers(Q);return S;}}o.clearAllMarkers(Q);T=N[0].getParent();if(T=T.getPrevious())return T.getLast();T=N[P].getParent();if(T=T.getNext())return T.getChild(0);return null;};function x(N){var O=N.cells;for(var P=0;P<O.length;P++){O[P].innerHTML='';if(!j)new o(O[P]).appendBogus();}};function y(N,O){var P=N.getStartElement().getAscendant('tr');if(!P)return;var Q=P.clone(1);O?Q.insertBefore(P):Q.insertAfter(P);x(Q.$);};function z(N){if(N instanceof k.selection){var O=v(N),P=O.length,Q=[],R,S,T;for(var U=0;U<P;U++){var V=O[U].getParent(),W=V.$.rowIndex;!U&&(S=W-1);Q[W]=V;U==P-1&&(T=W+1);}var X=V.getAscendant('table'),Y=X.$.rows,Z=Y.length;R=new o(T<Z&&X.$.rows[T]||S>0&&X.$.rows[S]||X.$.parentNode);for(U=Q.length;U>=0;U--){if(Q[U])z(Q[U]);}return R;}else if(N instanceof o){X=N.getAscendant('table');
if(X.$.rows.length==1)X.remove();else N.remove();}return 0;};function A(N,O){var P=N.getStartElement(),Q=P.getAscendant('td',1)||P.getAscendant('th',1);if(!Q)return;var R=Q.getAscendant('table'),S=Q.$.cellIndex;for(var T=0;T<R.$.rows.length;T++){var U=R.$.rows[T];if(U.cells.length<S+1)continue;Q=new o(U.cells[S]).clone(0);if(!j)Q.appendBogus();var V=new o(U.cells[S]);if(O)Q.insertBefore(V);else Q.insertAfter(V);}};function B(N){var O=[],P=N[0]&&N[0].getAscendant('table'),Q,R,S,T;for(Q=0,R=N.length;Q<R;Q++)O.push(N[Q].$.cellIndex);O.sort();for(Q=1,R=O.length;Q<R;Q++){if(O[Q]-O[Q-1]>1){S=O[Q-1]+1;break;}}if(!S)S=O[0]>0?O[0]-1:O[O.length-1]+1;var U=P.$.rows;for(Q=0,R=U.length;Q<R;Q++){T=U[Q].cells[S];if(T)break;}return T?new o(T):P.getPrevious();};function C(N){if(N instanceof k.selection){var O=v(N),P=B(O);for(var Q=O.length-1;Q>=0;Q--){if(O[Q])C(O[Q]);}return P;}else if(N instanceof o){var R=N.getAscendant('table');if(!R)return null;var S=N.$.cellIndex;for(Q=R.$.rows.length-1;Q>=0;Q--){var T=new o(R.$.rows[Q]);if(!S&&T.$.cells.length==1){z(T);continue;}if(T.$.cells[S])T.$.removeChild(T.$.cells[S]);}}return null;};function D(N,O){var P=N.getStartElement(),Q=P.getAscendant('td',1)||P.getAscendant('th',1);if(!Q)return;var R=Q.clone();if(!j)R.appendBogus();if(O)R.insertBefore(Q);else R.insertAfter(Q);};function E(N){if(N instanceof k.selection){var O=v(N),P=O[0]&&O[0].getAscendant('table'),Q=w(O);for(var R=O.length-1;R>=0;R--)E(O[R]);if(Q)G(Q,true);else if(P)P.remove();}else if(N instanceof o){var S=N.getParent();if(S.getChildCount()==1)S.remove();else N.remove();}};function F(N){var O=N.getBogus();O&&O.remove();N.trim();};function G(N,O){var P=new k.range(N.getDocument());if(!P['moveToElementEdit'+(O?'End':'Start')](N)){P.selectNodeContents(N);P.collapse(O?false:true);}P.select(true);};function H(N,O,P){var Q=N[O];if(typeof P=='undefined')return Q;for(var R=0;Q&&R<Q.length;R++){if(P.is&&Q[R]==P.$)return R;else if(R==P)return new o(Q[R]);}return P.is?-1:null;};function I(N,O,P){var Q=[];for(var R=0;R<N.length;R++){var S=N[R];if(typeof P=='undefined')Q.push(S[O]);else if(P.is&&S[O]==P.$)return R;else if(R==P)return new o(S[O]);}return typeof P=='undefined'?Q:P.is?-1:null;};function J(N,O,P){var Q=v(N),R;if((O?Q.length!=1:Q.length<2)||(R=N.getCommonAncestor())&&R.type==1&&R.is('table'))return false;var S,T=Q[0],U=T.getAscendant('table'),V=l.buildTableMap(U),W=V.length,X=V[0].length,Y=T.getParent().$.rowIndex,Z=H(V,Y,T);if(O){var aa;try{aa=V[O=='up'?Y-1:O=='down'?Y+1:Y][O=='left'?Z-1:O=='right'?Z+1:Z];
}catch(as){return false;}if(!aa||T.$==aa)return false;Q[O=='up'||O=='left'?'unshift':'push'](new o(aa));}var ab=T.getDocument(),ac=Y,ad=0,ae=0,af=!P&&new k.documentFragment(ab),ag=0;for(var ah=0;ah<Q.length;ah++){S=Q[ah];var ai=S.getParent(),aj=S.getFirst(),ak=S.$.colSpan,al=S.$.rowSpan,am=ai.$.rowIndex,an=H(V,am,S);ag+=ak*al;ae=Math.max(ae,an-Z+ak);ad=Math.max(ad,am-Y+al);if(!P){if(F(S),S.getChildren().count()){if(am!=ac&&aj&&!(aj.isBlockBoundary&&aj.isBlockBoundary({br:1}))){var ao=af.getLast(k.walker.whitespaces(true));if(ao&&!(ao.is&&ao.is('br')))af.append(new o('br'));}S.moveChildren(af);}ah?S.remove():S.setHtml('');}ac=am;}if(!P){af.moveChildren(T);if(!j)T.appendBogus();if(ae>=X)T.removeAttribute('rowSpan');else T.$.rowSpan=ad;if(ad>=W)T.removeAttribute('colSpan');else T.$.colSpan=ae;var ap=new k.nodeList(U.$.rows),aq=ap.count();for(ah=aq-1;ah>=0;ah--){var ar=ap.getItem(ah);if(!ar.$.cells.length){ar.remove();aq++;continue;}}return T;}else return ad*ae==ag;};function K(N,O){var P=v(N);if(P.length>1)return false;else if(O)return true;var Q=P[0],R=Q.getParent(),S=R.getAscendant('table'),T=l.buildTableMap(S),U=R.$.rowIndex,V=H(T,U,Q),W=Q.$.rowSpan,X,Y,Z,aa;if(W>1){Y=Math.ceil(W/2);Z=Math.floor(W/2);aa=U+Y;var ab=new o(S.$.rows[aa]),ac=H(T,aa),ad;X=Q.clone();for(var ae=0;ae<ac.length;ae++){ad=ac[ae];if(ad.parentNode==ab.$&&ae>V){X.insertBefore(new o(ad));break;}else ad=null;}if(!ad)ab.append(X,true);}else{Z=Y=1;ab=R.clone();ab.insertAfter(R);ab.append(X=Q.clone());var af=H(T,U);for(var ag=0;ag<af.length;ag++)af[ag].rowSpan++;}if(!j)X.appendBogus();Q.$.rowSpan=Y;X.$.rowSpan=Z;if(Y==1)Q.removeAttribute('rowSpan');if(Z==1)X.removeAttribute('rowSpan');return X;};function L(N,O){var P=v(N);if(P.length>1)return false;else if(O)return true;var Q=P[0],R=Q.getParent(),S=R.getAscendant('table'),T=l.buildTableMap(S),U=R.$.rowIndex,V=H(T,U,Q),W=Q.$.colSpan,X,Y,Z;if(W>1){Y=Math.ceil(W/2);Z=Math.floor(W/2);}else{Z=Y=1;var aa=I(T,V);for(var ab=0;ab<aa.length;ab++)aa[ab].colSpan++;}X=Q.clone();X.insertAfter(Q);if(!j)X.appendBogus();Q.$.colSpan=Y;X.$.colSpan=Z;if(Y==1)Q.removeAttribute('colSpan');if(Z==1)X.removeAttribute('colSpan');return X;};var M={thead:1,tbody:1,tfoot:1,td:1,tr:1,th:1};q.tabletools={init:function(N){var O=N.lang.table;N.addCommand('cellProperties',new h.dialogCommand('cellProperties'));h.dialog.add('cellProperties',this.path+'dialogs/tableCell.js');N.addCommand('tableDelete',{exec:function(P){var Q=P.getSelection(),R=Q&&Q.getStartElement(),S=R&&R.getAscendant('table',1);
if(!S)return;Q.selectElement(S);var T=Q.getRanges()[0];T.collapse();Q.selectRanges([T]);var U=S.getParent();if(U.getChildCount()==1&&!U.is('body','td','th'))U.remove();else S.remove();}});N.addCommand('rowDelete',{exec:function(P){var Q=P.getSelection();G(z(Q));}});N.addCommand('rowInsertBefore',{exec:function(P){var Q=P.getSelection();y(Q,true);}});N.addCommand('rowInsertAfter',{exec:function(P){var Q=P.getSelection();y(Q);}});N.addCommand('columnDelete',{exec:function(P){var Q=P.getSelection(),R=C(Q);R&&G(R,true);}});N.addCommand('columnInsertBefore',{exec:function(P){var Q=P.getSelection();A(Q,true);}});N.addCommand('columnInsertAfter',{exec:function(P){var Q=P.getSelection();A(Q);}});N.addCommand('cellDelete',{exec:function(P){var Q=P.getSelection();E(Q);}});N.addCommand('cellMerge',{exec:function(P){G(J(P.getSelection()),true);}});N.addCommand('cellMergeRight',{exec:function(P){G(J(P.getSelection(),'right'),true);}});N.addCommand('cellMergeDown',{exec:function(P){G(J(P.getSelection(),'down'),true);}});N.addCommand('cellVerticalSplit',{exec:function(P){G(K(P.getSelection()));}});N.addCommand('cellHorizontalSplit',{exec:function(P){G(L(P.getSelection()));}});N.addCommand('cellInsertBefore',{exec:function(P){var Q=P.getSelection();D(Q,true);}});N.addCommand('cellInsertAfter',{exec:function(P){var Q=P.getSelection();D(Q);}});if(N.addMenuItems)N.addMenuItems({tablecell:{label:O.cell.menu,group:'tablecell',order:1,getItems:function(){var P=N.getSelection(),Q=v(P);return{tablecell_insertBefore:2,tablecell_insertAfter:2,tablecell_delete:2,tablecell_merge:J(P,null,true)?2:0,tablecell_merge_right:J(P,'right',true)?2:0,tablecell_merge_down:J(P,'down',true)?2:0,tablecell_split_vertical:K(P,true)?2:0,tablecell_split_horizontal:L(P,true)?2:0,tablecell_properties:Q.length>0?2:0};}},tablecell_insertBefore:{label:O.cell.insertBefore,group:'tablecell',command:'cellInsertBefore',order:5},tablecell_insertAfter:{label:O.cell.insertAfter,group:'tablecell',command:'cellInsertAfter',order:10},tablecell_delete:{label:O.cell.deleteCell,group:'tablecell',command:'cellDelete',order:15},tablecell_merge:{label:O.cell.merge,group:'tablecell',command:'cellMerge',order:16},tablecell_merge_right:{label:O.cell.mergeRight,group:'tablecell',command:'cellMergeRight',order:17},tablecell_merge_down:{label:O.cell.mergeDown,group:'tablecell',command:'cellMergeDown',order:18},tablecell_split_horizontal:{label:O.cell.splitHorizontal,group:'tablecell',command:'cellHorizontalSplit',order:19},tablecell_split_vertical:{label:O.cell.splitVertical,group:'tablecell',command:'cellVerticalSplit',order:20},tablecell_properties:{label:O.cell.title,group:'tablecellproperties',command:'cellProperties',order:21},tablerow:{label:O.row.menu,group:'tablerow',order:1,getItems:function(){return{tablerow_insertBefore:2,tablerow_insertAfter:2,tablerow_delete:2};
}},tablerow_insertBefore:{label:O.row.insertBefore,group:'tablerow',command:'rowInsertBefore',order:5},tablerow_insertAfter:{label:O.row.insertAfter,group:'tablerow',command:'rowInsertAfter',order:10},tablerow_delete:{label:O.row.deleteRow,group:'tablerow',command:'rowDelete',order:15},tablecolumn:{label:O.column.menu,group:'tablecolumn',order:1,getItems:function(){return{tablecolumn_insertBefore:2,tablecolumn_insertAfter:2,tablecolumn_delete:2};}},tablecolumn_insertBefore:{label:O.column.insertBefore,group:'tablecolumn',command:'columnInsertBefore',order:5},tablecolumn_insertAfter:{label:O.column.insertAfter,group:'tablecolumn',command:'columnInsertAfter',order:10},tablecolumn_delete:{label:O.column.deleteColumn,group:'tablecolumn',command:'columnDelete',order:15}});if(N.contextMenu)N.contextMenu.addListener(function(P,Q){if(!P||P.isReadOnly())return null;while(P){if(P.getName() in M)return{tablecell:2,tablerow:2,tablecolumn:2};P=P.getParent();}return null;});},getSelectedCells:v};q.add('tabletools',q.tabletools);})();l.buildTableMap=function(t){var u=t.$.rows,v=-1,w=[];for(var x=0;x<u.length;x++){v++;!w[v]&&(w[v]=[]);var y=-1;for(var z=0;z<u[x].cells.length;z++){var A=u[x].cells[z];y++;while(w[v][y])y++;var B=isNaN(A.colSpan)?1:A.colSpan,C=isNaN(A.rowSpan)?1:A.rowSpan;for(var D=0;D<C;D++){if(!w[v+D])w[v+D]=[];for(var E=0;E<B;E++)w[v+D][y+E]=u[x].cells[z];}y+=B-1;}}return w;};q.add('specialchar',{init:function(t){var u='specialchar';h.dialog.add(u,this.path+'dialogs/specialchar.js');t.addCommand(u,new h.dialogCommand(u));t.ui.addButton('SpecialChar',{label:t.lang.specialChar.toolbar,command:u});}});(function(){var t={editorFocus:false,modes:{wysiwyg:1,source:1}},u={exec:function(x){x.container.focusNext(true,x.tabIndex);}},v={exec:function(x){x.container.focusPrevious(true,x.tabIndex);}};function w(x){return{editorFocus:false,canUndo:false,modes:{wysiwyg:1},exec:function(y){if(y.focusManager.hasFocus){var z=y.getSelection(),A=z.getCommonAncestor(),B;if(B=A.getAscendant('td',true)||A.getAscendant('th',true)){var C=new k.range(y.document),D=l.tryThese(function(){var K=B.getParent(),L=K.$.cells[B.$.cellIndex+(x?-1:1)];L.parentNode.parentNode;return L;},function(){var K=B.getParent(),L=K.getAscendant('table'),M=L.$.rows[K.$.rowIndex+(x?-1:1)];return M.cells[x?M.cells.length-1:0];});if(!(D||x)){var E=B.getAscendant('table').$,F=B.getParent().$.cells,G=new o(E.insertRow(-1),y.document);for(var H=0,I=F.length;H<I;H++){var J=G.append(new o(F[H],y.document).clone(false,false));
!j&&J.appendBogus();}C.moveToElementEditStart(G);}else if(D){D=new o(D);C.moveToElementEditStart(D);if(!(C.checkStartOfBlock()&&C.checkEndOfBlock()))C.selectNodeContents(D);}else return true;C.select(true);return true;}}return false;}};};q.add('tab',{requires:['keystrokes'],init:function(x){var y=x.config.enableTabKeyTools!==false,z=x.config.tabSpaces||0,A='';while(z--)A+='\xa0';if(A)x.on('key',function(B){if(B.data.keyCode==9){x.insertHtml(A);B.cancel();}});if(y)x.on('key',function(B){if(B.data.keyCode==9&&x.execCommand('selectNextCell')||B.data.keyCode==2000+9&&x.execCommand('selectPreviousCell'))B.cancel();});if(i.webkit||i.gecko)x.on('key',function(B){var C=B.data.keyCode;if(C==9&&!A){B.cancel();x.execCommand('blur');}if(C==2000+9){x.execCommand('blurBack');B.cancel();}});x.addCommand('blur',l.extend(u,t));x.addCommand('blurBack',l.extend(v,t));x.addCommand('selectNextCell',w());x.addCommand('selectPreviousCell',w(true));}});})();o.prototype.focusNext=function(t,u){var D=this;var v=D.$,w=u===undefined?D.getTabIndex():u,x,y,z,A,B,C;if(w<=0){B=D.getNextSourceNode(t,1);while(B){if(B.isVisible()&&B.getTabIndex()===0){z=B;break;}B=B.getNextSourceNode(false,1);}}else{B=D.getDocument().getBody().getFirst();while(B=B.getNextSourceNode(false,1)){if(!x)if(!y&&B.equals(D)){y=true;if(t){if(!(B=B.getNextSourceNode(true,1)))break;x=1;}}else if(y&&!D.contains(B))x=1;if(!B.isVisible()||(C=B.getTabIndex())<0)continue;if(x&&C==w){z=B;break;}if(C>w&&(!z||!A||C<A)){z=B;A=C;}else if(!z&&C===0){z=B;A=C;}}}if(z)z.focus();};o.prototype.focusPrevious=function(t,u){var D=this;var v=D.$,w=u===undefined?D.getTabIndex():u,x,y,z,A=0,B,C=D.getDocument().getBody().getLast();while(C=C.getPreviousSourceNode(false,1)){if(!x)if(!y&&C.equals(D)){y=true;if(t){if(!(C=C.getPreviousSourceNode(true,1)))break;x=1;}}else if(y&&!D.contains(C))x=1;if(!C.isVisible()||(B=C.getTabIndex())<0)continue;if(w<=0){if(x&&B===0){z=C;break;}if(B>A){z=C;A=B;}}else{if(x&&B==w){z=C;break;}if(B<w&&(!z||B>A)){z=C;A=B;}}}if(z)z.focus();};(function(){q.add('templates',{requires:['dialog'],init:function(v){h.dialog.add('templates',h.getUrl(this.path+'dialogs/templates.js'));v.addCommand('templates',new h.dialogCommand('templates'));v.ui.addButton('Templates',{label:v.lang.templates.button,command:'templates'});}});var t={},u={};h.addTemplates=function(v,w){t[v]=w;};h.getTemplates=function(v){return t[v];};h.loadTemplates=function(v,w){var x=[];for(var y=0,z=v.length;y<z;y++){if(!u[v[y]]){x.push(v[y]);u[v[y]]=1;}}if(x.length)h.scriptLoader.load(x,w);
else setTimeout(w,0);};})();p.templates_files=[h.getUrl('plugins/templates/templates/default.js')];p.templates_replaceContent=true;(function(){var t=function(){this.toolbars=[];this.focusCommandExecuted=false;};t.prototype.focus=function(){for(var v=0,w;w=this.toolbars[v++];)for(var x=0,y;y=w.items[x++];){if(y.focus){y.focus();return;}}};var u={toolbarFocus:{modes:{wysiwyg:1,source:1},exec:function(v){if(v.toolbox){v.toolbox.focusCommandExecuted=true;if(j)setTimeout(function(){v.toolbox.focus();},100);else v.toolbox.focus();}}}};q.add('toolbar',{init:function(v){var w=function(x,y){var z,A,B,C=v.lang.dir=='rtl';switch(y){case C?37:39:case 9:do{z=x.next;if(!z){A=x.toolbar.next;B=A&&A.items.length;while(B===0){A=A.next;B=A&&A.items.length;}if(A)z=A.items[0];}x=z;}while(x&&!x.focus)if(x)x.focus();else v.toolbox.focus();return false;case C?39:37:case 2000+9:do{z=x.previous;if(!z){A=x.toolbar.previous;B=A&&A.items.length;while(B===0){A=A.previous;B=A&&A.items.length;}if(A)z=A.items[B-1];}x=z;}while(x&&!x.focus)if(x)x.focus();else{var D=v.toolbox.toolbars[v.toolbox.toolbars.length-1].items;D[D.length-1].focus();}return false;case 27:v.focus();return false;case 13:case 32:x.execute();return false;}return true;};v.on('themeSpace',function(x){if(x.data.space==v.config.toolbarLocation){v.toolbox=new t();var y=l.getNextId(),z=['<div class="cke_toolbox" role="toolbar" aria-labelledby="',y,'" onmousedown="return false;"'],A=v.config.toolbarStartupExpanded!==false,B;z.push(A?'>':' style="display:none">');z.push('<span id="',y,'" class="cke_voice_label">',v.lang.toolbar,'</span>');var C=v.toolbox.toolbars,D=v.config.toolbar instanceof Array?v.config.toolbar:v.config['toolbar_'+v.config.toolbar];for(var E=0;E<D.length;E++){var F=D[E];if(!F)continue;var G=l.getNextId(),H={id:G,items:[]};if(B){z.push('</div>');B=0;}if(F==='/'){z.push('<div class="cke_break"></div>');continue;}z.push('<span id="',G,'" class="cke_toolbar" role="presentation"><span class="cke_toolbar_start"></span>');var I=C.push(H)-1;if(I>0){H.previous=C[I-1];H.previous.next=H;}for(var J=0;J<F.length;J++){var K,L=F[J];if(L=='-')K=r.separator;else K=v.ui.create(L);if(K){if(K.canGroup){if(!B){z.push('<span class="cke_toolgroup" role="presentation">');B=1;}}else if(B){z.push('</span>');B=0;}var M=K.render(v,z);I=H.items.push(M)-1;if(I>0){M.previous=H.items[I-1];M.previous.next=M;}M.toolbar=H;M.onkey=w;M.onfocus=function(){if(!v.toolbox.focusCommandExecuted)v.focus();};}}if(B){z.push('</span>');B=0;}z.push('<span class="cke_toolbar_end"></span></span>');
}z.push('</div>');if(v.config.toolbarCanCollapse){var N=l.addFunction(function(){v.execCommand('toolbarCollapse');});v.on('destroy',function(){l.removeFunction(N);});var O=l.getNextId();v.addCommand('toolbarCollapse',{exec:function(P){var Q=h.document.getById(O),R=Q.getPrevious(),S=P.getThemeSpace('contents'),T=R.getParent(),U=parseInt(S.$.style.height,10),V=T.$.offsetHeight,W=!R.isVisible();if(!W){R.hide();Q.addClass('cke_toolbox_collapser_min');Q.setAttribute('title',P.lang.toolbarExpand);}else{R.show();Q.removeClass('cke_toolbox_collapser_min');Q.setAttribute('title',P.lang.toolbarCollapse);}Q.getFirst().setText(W?'▲':'◀');var X=T.$.offsetHeight-V;S.setStyle('height',U-X+'px');P.fire('resize');},modes:{wysiwyg:1,source:1}});z.push('<a title="'+(A?v.lang.toolbarCollapse:v.lang.toolbarExpand)+'" id="'+O+'" tabIndex="-1" class="cke_toolbox_collapser');if(!A)z.push(' cke_toolbox_collapser_min');z.push('" onclick="CKEDITOR.tools.callFunction('+N+')">','<span>&#9650;</span>','</a>');}x.data.html+=z.join('');}});v.addCommand('toolbarFocus',u.toolbarFocus);}});})();r.separator={render:function(t,u){u.push('<span class="cke_separator" role="separator"></span>');return{};}};p.toolbarLocation='top';p.toolbar_Basic=[['Bold','Italic','-','NumberedList','BulletedList','-','Link','Unlink','-','About']];p.toolbar_Full=[['Source','-','Save','NewPage','Preview','-','Templates'],['Cut','Copy','Paste','PasteText','PasteFromWord','-','Print','SpellChecker','Scayt'],['Undo','Redo','-','Find','Replace','-','SelectAll','RemoveFormat'],['Form','Checkbox','Radio','TextField','Textarea','Select','Button','ImageButton','HiddenField'],'/',['Bold','Italic','Underline','Strike','-','Subscript','Superscript'],['NumberedList','BulletedList','-','Outdent','Indent','Blockquote','CreateDiv'],['JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock'],['BidiLtr','BidiRtl'],['Link','Unlink','Anchor'],['Image','Flash','Table','HorizontalRule','Smiley','SpecialChar','PageBreak'],'/',['Styles','Format','Font','FontSize'],['TextColor','BGColor'],['Maximize','ShowBlocks','-','About']];p.toolbar='Full';p.toolbarCanCollapse=true;(function(){q.add('undo',{requires:['selection','wysiwygarea'],init:function(z){var A=new v(z),B=z.addCommand('undo',{exec:function(){if(A.undo()){z.selectionChange();this.fire('afterUndo');}},state:0,canUndo:false}),C=z.addCommand('redo',{exec:function(){if(A.redo()){z.selectionChange();this.fire('afterRedo');}},state:0,canUndo:false});A.onChange=function(){B.setState(A.undoable()?2:0);
C.setState(A.redoable()?2:0);};function D(E){if(A.enabled&&E.data.command.canUndo!==false)A.save();};z.on('beforeCommandExec',D);z.on('afterCommandExec',D);z.on('saveSnapshot',function(){A.save();});z.on('contentDom',function(){z.document.on('keydown',function(E){if(!E.data.$.ctrlKey&&!E.data.$.metaKey)A.type(E);});});z.on('beforeModeUnload',function(){z.mode=='wysiwyg'&&A.save(true);});z.on('mode',function(){A.enabled=z.mode=='wysiwyg';A.onChange();});z.ui.addButton('Undo',{label:z.lang.undo,command:'undo'});z.ui.addButton('Redo',{label:z.lang.redo,command:'redo'});z.resetUndo=function(){A.reset();z.fire('saveSnapshot');};z.on('updateSnapshot',function(){if(A.currentImage&&new t(z).equals(A.currentImage))setTimeout(function(){A.update();},0);});}});q.undo={};var t=q.undo.Image=function(z){this.editor=z;var A=z.getSnapshot(),B=A&&z.getSelection();j&&A&&(A=A.replace(/\s+_cke_expando=".*?"/g,''));this.contents=A;this.bookmarks=B&&B.createBookmarks2(true);},u=/\b(?:href|src|name)="[^"]*?"/gi;t.prototype={equals:function(z,A){var B=this.contents,C=z.contents;if(j&&(i.ie7Compat||i.ie6Compat)){B=B.replace(u,'');C=C.replace(u,'');}if(B!=C)return false;if(A)return true;var D=this.bookmarks,E=z.bookmarks;if(D||E){if(!D||!E||D.length!=E.length)return false;for(var F=0;F<D.length;F++){var G=D[F],H=E[F];if(G.startOffset!=H.startOffset||G.endOffset!=H.endOffset||!l.arrayCompare(G.start,H.start)||!l.arrayCompare(G.end,H.end))return false;}}return true;}};function v(z){this.editor=z;this.reset();};var w={8:1,46:1},x={16:1,17:1,18:1},y={37:1,38:1,39:1,40:1};v.prototype={type:function(z){var A=z&&z.data.getKey(),B=A in x,C=A in w,D=this.lastKeystroke in w,E=C&&A==this.lastKeystroke,F=A in y,G=this.lastKeystroke in y,H=!C&&!F,I=C&&!E,J=!(B||this.typing)||H&&(D||G);if(J||I){var K=new t(this.editor);l.setTimeout(function(){var M=this;var L=M.editor.getSnapshot();if(j)L=L.replace(/\s+_cke_expando=".*?"/g,'');if(K.contents!=L){M.typing=true;if(!M.save(false,K,false))M.snapshots.splice(M.index+1,M.snapshots.length-M.index-1);M.hasUndo=true;M.hasRedo=false;M.typesCount=1;M.modifiersCount=1;M.onChange();}},0,this);}this.lastKeystroke=A;if(C){this.typesCount=0;this.modifiersCount++;if(this.modifiersCount>25){this.save(false,null,false);this.modifiersCount=1;}}else if(!F){this.modifiersCount=0;this.typesCount++;if(this.typesCount>25){this.save(false,null,false);this.typesCount=1;}}},reset:function(){var z=this;z.lastKeystroke=0;z.snapshots=[];z.index=-1;z.limit=z.editor.config.undoStackSize||20;
z.currentImage=null;z.hasUndo=false;z.hasRedo=false;z.resetType();},resetType:function(){var z=this;z.typing=false;delete z.lastKeystroke;z.typesCount=0;z.modifiersCount=0;},fireChange:function(){var z=this;z.hasUndo=!!z.getNextImage(true);z.hasRedo=!!z.getNextImage(false);z.resetType();z.onChange();},save:function(z,A,B){var D=this;var C=D.snapshots;if(!A)A=new t(D.editor);if(A.contents===false)return false;if(D.currentImage&&A.equals(D.currentImage,z))return false;C.splice(D.index+1,C.length-D.index-1);if(C.length==D.limit)C.shift();D.index=C.push(A)-1;D.currentImage=A;if(B!==false)D.fireChange();return true;},restoreImage:function(z){var B=this;B.editor.loadSnapshot(z.contents);if(z.bookmarks)B.editor.getSelection().selectBookmarks(z.bookmarks);else if(j){var A=B.editor.document.getBody().$.createTextRange();A.collapse(true);A.select();}B.index=z.index;B.update();B.fireChange();},getNextImage:function(z){var E=this;var A=E.snapshots,B=E.currentImage,C,D;if(B)if(z)for(D=E.index-1;D>=0;D--){C=A[D];if(!B.equals(C,true)){C.index=D;return C;}}else for(D=E.index+1;D<A.length;D++){C=A[D];if(!B.equals(C,true)){C.index=D;return C;}}return null;},redoable:function(){return this.enabled&&this.hasRedo;},undoable:function(){return this.enabled&&this.hasUndo;},undo:function(){var A=this;if(A.undoable()){A.save(true);var z=A.getNextImage(true);if(z)return A.restoreImage(z),true;}return false;},redo:function(){var A=this;if(A.redoable()){A.save(true);if(A.redoable()){var z=A.getNextImage(false);if(z)return A.restoreImage(z),true;}}return false;},update:function(){var z=this;z.snapshots.splice(z.index,1,z.currentImage=new t(z.editor));}};})();(function(){var t={table:1,pre:1},u=/(^|<body\b[^>]*>)\s*<(p|div|address|h\d|center)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\2>)?\s*(?=$|<\/body>)/gi,v=k.walker.whitespaces(true);function w(J){return J.getName() in t||J.isBlockBoundary()&&m.$empty[J.getName()];};function x(J){if(J.getType()==3)return J.getSelectedElement().isReadOnly();else return J.getCommonAncestor().isReadOnly();};function y(J){if(this.mode=='wysiwyg'){this.focus();var K=this.getSelection();if(x(K))return;var L=J.data;this.fire('saveSnapshot');if(this.dataProcessor)L=this.dataProcessor.toHtml(L);if(j){var M=K.isLocked;if(M)K.unlock();var N=K.getNative();if(N.type=='Control')N.clear();else if(K.getType()==2){var O=K.getRanges()[0],P=O&&O.endContainer;if(P&&P.type==1&&P.getAttribute('contenteditable')=='false'&&O.checkBoundaryOfElement(P,2)){O.setEndAfter(O.endContainer);
O.deleteContents();}}try{N.createRange().pasteHTML(L);}catch(R){}if(M)this.getSelection().lock();}else this.document.$.execCommand('inserthtml',false,L);if(i.webkit){this.document.$.execCommand('inserthtml',false,'<span id="cke_paste_marker" cke_temp="1"></span>');var Q=this.document.getById('cke_paste_marker');Q.scrollIntoView();Q.remove();Q=null;}l.setTimeout(function(){this.fire('saveSnapshot');},0,this);}};function z(J){if(this.mode=='wysiwyg'){this.focus();var K=this.getSelection();if(x(K))return;this.fire('saveSnapshot');var L=K.getRanges(),M=J.data,N=M.getName(),O=m.$block[N],P=K.isLocked;if(P)K.unlock();var Q,R,S,T;for(var U=L.length-1;U>=0;U--){Q=L[U];Q.deleteContents();R=!U&&M||M.clone(1);var V,W;if(O)while((V=Q.getCommonAncestor(0,1))&&(W=m[V.getName()])&&!(W&&W[N])){if(V.getName() in m.span)Q.splitElement(V);else if(Q.checkStartOfBlock()&&Q.checkEndOfBlock()){Q.setStartBefore(V);Q.collapse(true);V.remove();}else Q.splitBlock();}Q.insertNode(R);if(!S)S=R;}Q.moveToPosition(S,4);if(O){var X=S.getNext(v),Y=X&&X.type==1&&X.getName();if(Y&&m.$block[Y]&&m[Y]['#'])Q.moveToElementEditStart(X);}K.selectRanges([Q]);if(P)this.getSelection().lock();l.setTimeout(function(){this.fire('saveSnapshot');},0,this);}};function A(J){if(!J.checkDirty())setTimeout(function(){J.resetDirty();},0);};var B=k.walker.whitespaces(true),C=k.walker.bookmark(false,true);function D(J){return B(J)&&C(J);};function E(J){return J.type==3&&l.trim(J.getText()).match(/^(?:&nbsp;|\xa0)$/);};function F(J){if(J.isLocked){J.unlock();setTimeout(function(){J.lock();},0);}};function G(J){return J.getOuterHtml().match(u);};B=k.walker.whitespaces(true);function H(J){var K=J.window,L=J.document,M=J.document.getBody(),N=M.getChildren().count();if(!N||N==1&&M.getFirst().hasAttribute('_moz_editor_bogus_node')){A(J);var O=J.element.getDocument(),P=O.getDocumentElement(),Q=P.$.scrollTop,R=P.$.scrollLeft,S=L.$.createEvent('KeyEvents');S.initKeyEvent('keypress',true,true,K.$,false,false,false,false,0,32);L.$.dispatchEvent(S);if(Q!=P.$.scrollTop||R!=P.$.scrollLeft)O.getWindow().$.scrollTo(R,Q);N&&M.getFirst().remove();L.getBody().appendBogus();var T=new k.range(L);T.setStartAt(M,1);T.select();}};function I(J){var K=J.editor,L=J.data.path,M=L.blockLimit,N=J.data.selection,O=N.getRanges()[0],P=K.document.getBody(),Q=K.config.enterMode;i.gecko&&H(K);if(Q!=2&&O.collapsed&&M.getName()=='body'&&!L.block){K.fire('updateSnapshot');A(K);j&&F(N);var R=O.fixBlock(true,K.config.enterMode==3?'div':'p');if(j){var S=R.getFirst(D);
S&&E(S)&&S.remove();}if(G(R)){var T=R.getNext(B);if(T&&T.type==1&&!w(T)){O.moveToElementEditStart(T);R.remove();}else{T=R.getPrevious(B);if(T&&T.type==1&&!w(T)){O.moveToElementEditEnd(T);R.remove();}}}O.select();if(!j)K.selectionChange();}var U=new k.range(K.document),V=new k.walker(U);U.selectNodeContents(P);V.evaluator=function(X){return X.type==1&&X.getName() in t;};V.guard=function(X,Y){return!(X.type==3&&B(X)||Y);};if(V.previous()){K.fire('updateSnapshot');A(K);j&&F(N);var W;if(Q!=2)W=P.append(new o(Q==1?'p':'div'));else W=P;if(!j)W.appendBogus();}};q.add('wysiwygarea',{requires:['editingblock'],init:function(J){var K=J.config.enterMode!=2?J.config.enterMode==3?'div':'p':false,L=J.lang.editorTitle.replace('%1',J.name),M;J.on('editingBlockReady',function(){var S,T,U,V,W,X,Y=i.isCustomDomain(),Z=function(ac){if(T)T.remove();var ad='document.open();'+(Y?'document.domain="'+document.domain+'";':'')+'document.close();';T=o.createFromHtml('<iframe style="width:100%;height:100%" frameBorder="0" title="'+L+'"'+' src="'+(j?'javascript:void(function(){'+encodeURIComponent(ad)+'}())':'')+'"'+' tabIndex="'+(i.webkit?-1:J.tabIndex)+'"'+' allowTransparency="true"'+'></iframe>');if(document.location.protocol=='chrome:')h.event.useCapture=true;T.on('load',function(ah){W=1;ah.removeListener();var ai=T.getFrameDocument().$;ai.open('text/html','replace');ai.write(ac);ai.close();});if(document.location.protocol=='chrome:')h.event.useCapture=false;var ae=J.element,af=i.gecko&&!ae.isVisible(),ag={};if(af){ae.show();ag={position:ae.getStyle('position'),top:ae.getStyle('top')};ae.setStyles({position:'absolute',top:'-3000px'});}S.append(T);if(af)setTimeout(function(){ae.hide();ae.setStyles(ag);},1000);};M=l.addFunction(ab);var aa='<script id="cke_actscrpt" type="text/javascript" cke_temp="1">'+(Y?'document.domain="'+document.domain+'";':'')+'window.parent.CKEDITOR.tools.callFunction( '+M+', window );'+'</script>';function ab(ac){if(!W)return;W=0;J.fire('ariaWidget',T);var ad=ac.document,ae=ad.body,af=ad.getElementById('cke_actscrpt');af.parentNode.removeChild(af);ae.spellcheck=!J.config.disableNativeSpellChecker;if(j){ae.hideFocus=true;ae.disabled=true;ae.contentEditable=true;ae.removeAttribute('disabled');}else setTimeout(function(){if(i.gecko&&i.version>=10900||i.opera)ad.$.body.contentEditable=true;else if(i.webkit)ad.$.body.parentNode.contentEditable=true;else ad.$.designMode='on';},0);i.gecko&&l.setTimeout(H,0,null,J);ac=J.window=new k.window(ac);ad=J.document=new n(ad);ad.on('dblclick',function(ak){var al=ak.data.getTarget(),am={element:al,dialog:''};
J.fire('doubleclick',am);am.dialog&&J.openDialog(am.dialog);});if(!(j||i.opera))ad.on('mousedown',function(ak){var al=ak.data.getTarget();if(al.is('img','hr','input','textarea','select'))J.getSelection().selectElement(al);});if(i.gecko)ad.on('mouseup',function(ak){if(ak.data.$.button==2){var al=ak.data.getTarget();if(!al.getOuterHtml().replace(u,'')){var am=new k.range(ad);am.moveToElementEditStart(al);am.select(true);}}});ad.on('click',function(ak){ak=ak.data;if(ak.getTarget().is('a')&&ak.$.button!=2)ak.preventDefault();});if(i.webkit){ad.on('click',function(ak){if(ak.data.getTarget().is('input','select'))ak.data.preventDefault();});ad.on('mouseup',function(ak){if(ak.data.getTarget().is('input','textarea'))ak.data.preventDefault();});}if(j&&ad.$.compatMode=='CSS1Compat'||i.gecko||i.opera){var ag=ad.getDocumentElement();ag.on('mousedown',function(ak){if(ak.data.getTarget().equals(ag)){if(i.gecko&&i.version>=10900)Q();R.focus();}});}ac.on('blur',function(){J.focusManager.blur();});var ah;ac.on('focus',function(){var ak=J.document;if(i.gecko&&i.version>=10900)Q();else if(i.opera)ak.getBody().focus();else if(i.webkit)if(!ah){J.document.getDocumentElement().focus();ah=1;}J.focusManager.focus();});var ai=J.keystrokeHandler;if(ai)ai.attach(ad);if(j){ad.getDocumentElement().addClass(ad.$.compatMode);ad.on('keydown',function(ak){var al=ak.data.getKeystroke();if(al in {8:1,46:1}){var am=J.getSelection(),an=am.getSelectedElement();if(an){J.fire('saveSnapshot');var ao=am.getRanges()[0].createBookmark();an.remove();am.selectBookmarks([ao]);J.fire('saveSnapshot');ak.data.preventDefault();}}});if(ad.$.compatMode=='CSS1Compat'){var aj={33:1,34:1};ad.on('keydown',function(ak){if(ak.data.getKeystroke() in aj)setTimeout(function(){J.getSelection().scrollIntoView();},0);});}}if(J.contextMenu)J.contextMenu.addTarget(ad,J.config.browserContextMenuOnCtrl!==false);setTimeout(function(){J.fire('contentDom');if(X){J.mode='wysiwyg';J.fire('mode');X=false;}U=false;if(V){J.focus();V=false;}setTimeout(function(){J.fire('dataReady');},0);try{J.document.$.execCommand('enableObjectResizing',false,!J.config.disableObjectResizing);}catch(ak){}try{J.document.$.execCommand('enableInlineTableEditing',false,!J.config.disableNativeTableHandles);}catch(al){}if(j)setTimeout(function(){if(J.document){var am=J.document.$.body;am.runtimeStyle.marginBottom='0px';am.runtimeStyle.marginBottom='';}},1000);},0);};J.addMode('wysiwyg',{load:function(ac,ad,ae){S=ac;if(j&&i.quirks)ac.setStyle('position','relative');
J.mayBeDirty=true;X=true;if(ae)this.loadSnapshotData(ad);else this.loadData(ad);},loadData:function(ac){U=true;var ad=J.config,ae=ad.fullPage,af=ad.docType,ag='<style type="text/css" cke_temp="1">'+J._.styles.join('\n')+'</style>';!ae&&(ag=l.buildStyleHtml(J.config.contentsCss)+ag);var ah=ad.baseHref?'<base href="'+ad.baseHref+'" cke_temp="1" />':'';if(ae)ac=ac.replace(/<!DOCTYPE[^>]*>/i,function(ai){J.docType=af=ai;return '';});if(J.dataProcessor)ac=J.dataProcessor.toHtml(ac,K);if(ae){if(!/<body[\s|>]/.test(ac))ac='<body>'+ac;if(!/<html[\s|>]/.test(ac))ac='<html>'+ac+'</html>';if(!/<head[\s|>]/.test(ac))ac=ac.replace(/<html[^>]*>/,'$&<head><title></title></head>');else if(!/<title[\s|>]/.test(ac))ac=ac.replace(/<head[^>]*>/,'$&<title></title>');ah&&(ac=ac.replace(/<head>/,'$&'+ah));ac=ac.replace(/<\/head\s*>/,ag+'$&');ac=af+ac;}else ac=ad.docType+'<html dir="'+ad.contentsLangDirection+'"'+' lang="'+(ad.contentsLanguage||J.langCode)+'">'+'<head>'+'<title>'+L+'</title>'+ah+ag+'</head>'+'<body'+(ad.bodyId?' id="'+ad.bodyId+'"':'')+(ad.bodyClass?' class="'+ad.bodyClass+'"':'')+'>'+ac+'</html>';ac+=aa;this.onDispose();Z(ac);},getData:function(){var ac=J.config,ad=ac.fullPage,ae=ad&&J.docType,af=T.getFrameDocument(),ag=ad?af.getDocumentElement().getOuterHtml():af.getBody().getHtml();if(J.dataProcessor)ag=J.dataProcessor.toDataFormat(ag,K);if(ac.ignoreEmptyParagraph)ag=ag.replace(u,function(ah,ai){return ai;});if(ae)ag=ae+'\n'+ag;return ag;},getSnapshotData:function(){return T.getFrameDocument().getBody().getHtml();},loadSnapshotData:function(ac){T.getFrameDocument().getBody().setHtml(ac);},onDispose:function(){if(!J.document)return;J.document.getDocumentElement().clearCustomData();J.document.getBody().clearCustomData();J.window.clearCustomData();J.document.clearCustomData();T.clearCustomData();T.remove();},unload:function(ac){this.onDispose();J.window=J.document=T=S=V=null;J.fire('contentDomUnload');},focus:function(){if(U)V=true;else if(i.opera&&J.document){var ac=J.window.$.frameElement;ac.blur(),ac.focus();J.document.getBody().focus();J.selectionChange();}else if(!i.opera&&J.window){J.window.focus();J.selectionChange();}}});J.on('insertHtml',y,null,null,20);J.on('insertElement',z,null,null,20);J.on('selectionChange',I,null,null,1);});var N;J.on('contentDom',function(){var S=J.document.getElementsByTag('title').getItem(0);S.setAttribute('_cke_title',J.document.$.title);J.document.$.title=L;});if(i.ie8Compat){J.addCss('html.CSS1Compat [contenteditable=false]{ min-height:0 !important;}');
var O=[];for(var P in m.$removeEmpty)O.push('html.CSS1Compat '+P+'[contenteditable=false]');J.addCss(O.join(',')+'{ display:inline-block;}');}else if(i.gecko)J.addCss('html { height: 100% !important; }');function Q(S){l.tryThese(function(){J.document.$.designMode='on';setTimeout(function(){J.document.$.designMode='off';if(h.currentInstance==J)J.document.getBody().focus();},50);},function(){J.document.$.designMode='off';var T=J.document.getBody();T.setAttribute('contentEditable',false);T.setAttribute('contentEditable',true);!S&&Q(1);});};if(i.gecko||j||i.opera){var R;J.on('uiReady',function(){R=J.container.append(o.createFromHtml('<span tabindex="-1" style="position:absolute;" role="presentation"></span>'));R.on('focus',function(){J.focus();});});J.on('destroy',function(){l.removeFunction(M);R.clearCustomData();});}J.on('insertElement',function(S){var T=S.data;if(T.type==1&&(T.is('input')||T.is('textarea')))if(!T.isReadOnly()){T.setAttribute('contentEditable',false);T.setCustomData('_cke_notReadOnly',1);}});}});if(i.gecko)(function(){var J=document.body;if(!J)window.addEventListener('load',arguments.callee,false);else{var K=J.getAttribute('onpageshow');J.setAttribute('onpageshow',(K?K+';':'')+'event.persisted && (function(){'+'var allInstances = CKEDITOR.instances, editor, doc;'+'for ( var i in allInstances )'+'{'+'\teditor = allInstances[ i ];'+'\tdoc = editor.document;'+'\tif ( doc )'+'\t{'+'\t\tdoc.$.designMode = "off";'+'\t\tdoc.$.designMode = "on";'+'\t}'+'}'+'})();');}})();})();p.disableObjectResizing=false;p.disableNativeTableHandles=true;p.disableNativeSpellChecker=true;p.ignoreEmptyParagraph=true;q.add('wsc',{requires:['dialog'],init:function(t){var u='checkspell',v=t.addCommand(u,new h.dialogCommand(u));v.modes={wysiwyg:!i.opera&&document.domain==window.location.hostname};t.ui.addButton('SpellChecker',{label:t.lang.spellCheck.toolbar,command:u});h.dialog.add(u,this.path+'dialogs/wsc.js');}});p.wsc_customerId=p.wsc_customerId||'1:ua3xw1-2XyGJ3-GWruD3-6OFNT1-oXcuB1-nR6Bp4-hgQHc-EcYng3-sdRXG3-NOfFk';p.wsc_customLoaderScript=p.wsc_customLoaderScript||null;h.DIALOG_RESIZE_NONE=0;h.DIALOG_RESIZE_WIDTH=1;h.DIALOG_RESIZE_HEIGHT=2;h.DIALOG_RESIZE_BOTH=3;(function(){var t=l.cssLength;function u(W){return!!this._.tabs[W][0].$.offsetHeight;};function v(){var aa=this;var W=aa._.currentTabId,X=aa._.tabIdList.length,Y=l.indexOf(aa._.tabIdList,W)+X;for(var Z=Y-1;Z>Y-X;Z--){if(u.call(aa,aa._.tabIdList[Z%X]))return aa._.tabIdList[Z%X];}return null;};function w(){var aa=this;
var W=aa._.currentTabId,X=aa._.tabIdList.length,Y=l.indexOf(aa._.tabIdList,W);for(var Z=Y+1;Z<Y+X;Z++){if(u.call(aa,aa._.tabIdList[Z%X]))return aa._.tabIdList[Z%X];}return null;};function x(W,X){var Y=W.$.getElementsByTagName('input');for(var Z=0,aa=Y.length;Z<aa;Z++){var ab=new o(Y[Z]);if(ab.getAttribute('type').toLowerCase()=='text')if(X){ab.setAttribute('value',ab.getCustomData('fake_value')||'');ab.removeCustomData('fake_value');}else{ab.setCustomData('fake_value',ab.getAttribute('value'));ab.setAttribute('value','');}}};h.dialog=function(W,X){var Y=h.dialog._.dialogDefinitions[X];Y=l.extend(Y(W),z);Y=l.clone(Y);Y=new D(this,Y);var Z=h.document,aa=W.theme.buildDialog(W);this._={editor:W,element:aa.element,name:X,contentSize:{width:0,height:0},size:{width:0,height:0},updateSize:false,contents:{},buttons:{},accessKeyMap:{},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:false,focusList:[],currentFocusIndex:0,hasFocus:false};this.parts=aa.parts;l.setTimeout(function(){W.fire('ariaWidget',this.parts.contents);},0,this);this.parts.dialog.setStyles({position:i.ie6Compat?'absolute':'fixed',top:0,left:0,visibility:'hidden'});h.event.call(this);this.definition=Y=h.fire('dialogDefinition',{name:X,definition:Y},W).definition;if(Y.onLoad)this.on('load',Y.onLoad);if(Y.onShow)this.on('show',Y.onShow);if(Y.onHide)this.on('hide',Y.onHide);if(Y.onOk)this.on('ok',function(an){W.fire('saveSnapshot');setTimeout(function(){W.fire('saveSnapshot');},0);if(Y.onOk.call(this,an)===false)an.data.hide=false;});if(Y.onCancel)this.on('cancel',function(an){if(Y.onCancel.call(this,an)===false)an.data.hide=false;});var ab=this,ac=function(an){var ao=ab._.contents,ap=false;for(var aq in ao)for(var ar in ao[aq]){ap=an.call(this,ao[aq][ar]);if(ap)return;}};this.on('ok',function(an){ac(function(ao){if(ao.validate){var ap=ao.validate(this);if(typeof ap=='string'){alert(ap);ap=false;}if(ap===false){if(ao.select)ao.select();else ao.focus();an.data.hide=false;an.stop();return true;}}});},this,null,0);this.on('cancel',function(an){ac(function(ao){if(ao.isChanged()){if(!confirm(W.lang.common.confirmCancel))an.data.hide=false;return true;}});},this,null,0);this.parts.close.on('click',function(an){if(this.fire('cancel',{hide:true}).hide!==false)this.hide();an.data.preventDefault();},this);function ad(){var an=ab._.focusList;an.sort(function(aq,ar){if(aq.tabIndex!=ar.tabIndex)return ar.tabIndex-aq.tabIndex;else return aq.focusIndex-ar.focusIndex;});var ao=an.length;
for(var ap=0;ap<ao;ap++)an[ap].focusIndex=ap;};function ae(an){var ao=ab._.focusList,ap=an?1:-1;if(ao.length<1)return;var aq=ab._.currentFocusIndex;try{ao[aq].getInputElement().$.blur();}catch(at){}var ar=(aq+ap+ao.length)%ao.length,as=ar;while(!ao[as].isFocusable()){as=(as+ap+ao.length)%ao.length;if(as==ar)break;}ao[as].focus();if(ao[as].type=='text')ao[as].select();};this.changeFocus=ae;var af;function ag(an){var as=this;if(ab!=h.dialog._.currentTop)return;var ao=an.data.getKeystroke(),ap=W.lang.dir=='rtl';af=0;if(ao==9||ao==2000+9){var aq=ao==2000+9;if(ab._.tabBarMode){var ar=aq?v.call(ab):w.call(ab);ab.selectPage(ar);ab._.tabs[ar][0].focus();}else ae(!aq);af=1;}else if(ao==4000+121&&!ab._.tabBarMode&&ab.getPageCount()>1){ab._.tabBarMode=true;ab._.tabs[ab._.currentTabId][0].focus();af=1;}else if((ao==37||ao==39)&&ab._.tabBarMode){ar=ao==(ap?39:37)?v.call(ab):w.call(ab);ab.selectPage(ar);ab._.tabs[ar][0].focus();af=1;}else if((ao==13||ao==32)&&ab._.tabBarMode){as.selectPage(as._.currentTabId);as._.tabBarMode=false;as._.currentFocusIndex=-1;ae(true);af=1;}if(af){an.stop();an.data.preventDefault();}};function ah(an){af&&an.data.preventDefault();};var ai=this._.element;this.on('show',function(){ai.on('keydown',ag,this,null,0);if(i.opera||i.gecko&&i.mac)ai.on('keypress',ah,this);});this.on('hide',function(){ai.removeListener('keydown',ag);if(i.opera||i.gecko&&i.mac)ai.removeListener('keypress',ah);});this.on('iframeAdded',function(an){var ao=new n(an.data.iframe.$.contentWindow.document);ao.on('keydown',ag,this,null,0);});this.on('show',function(){var ar=this;ad();if(W.config.dialog_startupFocusTab&&ab._.pageCount>1){ab._.tabBarMode=true;ab._.tabs[ab._.currentTabId][0].focus();}else if(!ar._.hasFocus){ar._.currentFocusIndex=-1;if(Y.onFocus){var an=Y.onFocus.call(ar);an&&an.focus();}else ae(true);if(ar._.editor.mode=='wysiwyg'&&j){var ao=W.document.$.selection,ap=ao.createRange();if(ap)if(ap.parentElement&&ap.parentElement().ownerDocument==W.document.$||ap.item&&ap.item(0).ownerDocument==W.document.$){var aq=document.body.createTextRange();aq.moveToElementText(ar.getElement().getFirst().$);aq.collapse(true);aq.select();}}}},this,null,4294967295);if(i.ie6Compat)this.on('load',function(an){var ao=this.getElement(),ap=ao.getFirst();ap.remove();ap.appendTo(ao);},this);F(this);G(this);new k.text(Y.title,h.document).appendTo(this.parts.title);for(var aj=0;aj<Y.contents.length;aj++){var ak=Y.contents[aj];ak&&this.addPage(ak);}this.parts.tabs.on('click',function(an){var aq=this;
var ao=an.data.getTarget();if(ao.hasClass('cke_dialog_tab')){var ap=ao.$.id;aq.selectPage(ap.substring(4,ap.lastIndexOf('_')));if(aq._.tabBarMode){aq._.tabBarMode=false;aq._.currentFocusIndex=-1;ae(true);}an.data.preventDefault();}},this);var al=[],am=h.dialog._.uiElementBuilders.hbox.build(this,{type:'hbox',className:'cke_dialog_footer_buttons',widths:[],children:Y.buttons},al).getChild();this.parts.footer.setHtml(al.join(''));for(aj=0;aj<am.length;aj++)this._.buttons[am[aj].id]=am[aj];};function y(W,X,Y){this.element=X;this.focusIndex=Y;this.tabIndex=0;this.isFocusable=function(){return!X.getAttribute('disabled')&&X.isVisible();};this.focus=function(){W._.currentFocusIndex=this.focusIndex;this.element.focus();};X.on('keydown',function(Z){if(Z.data.getKeystroke() in {32:1,13:1})this.fire('click');});X.on('focus',function(){this.fire('mouseover');});X.on('blur',function(){this.fire('mouseout');});};h.dialog.prototype={destroy:function(){this.hide();this._.element.remove();},resize:(function(){return function(W,X){var Y=this;if(Y._.contentSize&&Y._.contentSize.width==W&&Y._.contentSize.height==X)return;h.dialog.fire('resize',{dialog:Y,skin:Y._.editor.skinName,width:W,height:X},Y._.editor);Y._.contentSize={width:W,height:X};Y._.updateSize=true;};})(),getSize:function(){var Y=this;if(!Y._.updateSize)return Y._.size;var W=Y._.element.getFirst(),X=Y._.size={width:W.$.offsetWidth||0,height:W.$.offsetHeight||0};Y._.updateSize=!X.width||!X.height;return X;},move:(function(){var W;return function(X,Y){var ab=this;var Z=ab._.element.getFirst();if(W===undefined)W=Z.getComputedStyle('position')=='fixed';if(W&&ab._.position&&ab._.position.x==X&&ab._.position.y==Y)return;ab._.position={x:X,y:Y};if(!W){var aa=h.document.getWindow().getScrollPosition();X+=aa.x;Y+=aa.y;}Z.setStyles({left:(X>0?X:0)+'px',top:(Y>0?Y:0)+'px'});};})(),getPosition:function(){return l.extend({},this._.position);},show:function(){var W=this._.editor;if(W.mode=='wysiwyg'&&j){var X=W.getSelection();X&&X.lock();}var Y=this._.element,Z=this.definition;if(!(Y.getParent()&&Y.getParent().equals(h.document.getBody())))Y.appendTo(h.document.getBody());else Y.setStyle('display','block');if(i.gecko&&i.version<10900){var aa=this.parts.dialog;aa.setStyle('position','absolute');setTimeout(function(){aa.setStyle('position','fixed');},0);}this.resize(Z.minWidth,Z.minHeight);this.reset();this.selectPage(this.definition.contents[0].id);if(h.dialog._.currentZIndex===null)h.dialog._.currentZIndex=this._.editor.config.baseFloatZIndex;
this._.element.getFirst().setStyle('z-index',h.dialog._.currentZIndex+=10);if(h.dialog._.currentTop===null){h.dialog._.currentTop=this;this._.parentDialog=null;K(this._.editor);Y.on('keydown',O);Y.on(i.opera?'keypress':'keyup',P);for(var ab in {keyup:1,keydown:1,keypress:1})Y.on(ab,V);}else{this._.parentDialog=h.dialog._.currentTop;var ac=this._.parentDialog.getElement().getFirst();ac.$.style.zIndex-=Math.floor(this._.editor.config.baseFloatZIndex/2);h.dialog._.currentTop=this;}Q(this,this,'\x1b',null,function(){this.getButton('cancel')&&this.getButton('cancel').click();});this._.hasFocus=false;l.setTimeout(function(){var ad=h.document.getWindow().getViewPaneSize(),ae=this.getSize();this.move((ad.width-Z.minWidth)/2,(ad.height-ae.height)/2);this.parts.dialog.setStyle('visibility','');this.fireOnce('load',{});this.fire('show',{});this._.editor.fire('dialogShow',this);this.foreach(function(af){af.setInitValue&&af.setInitValue();});},100,this);},foreach:function(W){var Z=this;for(var X in Z._.contents)for(var Y in Z._.contents[X])W(Z._.contents[X][Y]);return Z;},reset:(function(){var W=function(X){if(X.reset)X.reset(1);};return function(){this.foreach(W);return this;};})(),setupContent:function(){var W=arguments;this.foreach(function(X){if(X.setup)X.setup.apply(X,W);});},commitContent:function(){var W=arguments;this.foreach(function(X){if(X.commit)X.commit.apply(X,W);});},hide:function(){if(!this.parts.dialog.isVisible())return;this.fire('hide',{});this._.editor.fire('dialogHide',this);var W=this._.element;W.setStyle('display','none');this.parts.dialog.setStyle('visibility','hidden');R(this);while(h.dialog._.currentTop!=this)h.dialog._.currentTop.hide();if(!this._.parentDialog)L();else{var X=this._.parentDialog.getElement().getFirst();X.setStyle('z-index',parseInt(X.$.style.zIndex,10)+Math.floor(this._.editor.config.baseFloatZIndex/2));}h.dialog._.currentTop=this._.parentDialog;if(!this._.parentDialog){h.dialog._.currentZIndex=null;W.removeListener('keydown',O);W.removeListener(i.opera?'keypress':'keyup',P);for(var Y in {keyup:1,keydown:1,keypress:1})W.removeListener(Y,V);var Z=this._.editor;Z.focus();if(Z.mode=='wysiwyg'&&j){var aa=Z.getSelection();aa&&aa.unlock(true);}}else h.dialog._.currentZIndex-=10;delete this._.parentDialog;this.foreach(function(ab){ab.resetInitValue&&ab.resetInitValue();});},addPage:function(W){var ai=this;var X=[],Y=W.label?' title="'+l.htmlEncode(W.label)+'"':'',Z=W.elements,aa=h.dialog._.uiElementBuilders.vbox.build(ai,{type:'vbox',className:'cke_dialog_page_contents',children:W.elements,expand:!!W.expand,padding:W.padding,style:W.style||'width: 100%; height: 100%;'},X),ab=o.createFromHtml(X.join(''));
ab.setAttribute('role','tabpanel');var ac=i,ad='cke_'+W.id+'_'+l.getNextNumber(),ae=o.createFromHtml(['<a class="cke_dialog_tab"',ai._.pageCount>0?' cke_last':'cke_first',Y,!!W.hidden?' style="display:none"':'',' id="',ad,'"',ac.gecko&&ac.version>=10900&&!ac.hc?'':' href="javascript:void(0)"',' tabIndex="-1"',' hidefocus="true"',' role="tab">',W.label,'</a>'].join(''));ab.setAttribute('aria-labelledby',ad);ai._.tabs[W.id]=[ae,ab];ai._.tabIdList.push(W.id);!W.hidden&&ai._.pageCount++;ai._.lastTab=ae;ai.updateStyle();var af=ai._.contents[W.id]={},ag,ah=aa.getChild();while(ag=ah.shift()){af[ag.id]=ag;if(typeof ag.getChild=='function')ah.push.apply(ah,ag.getChild());}ab.setAttribute('name',W.id);ab.appendTo(ai.parts.contents);ae.unselectable();ai.parts.tabs.append(ae);if(W.accessKey){Q(ai,ai,'CTRL+'+W.accessKey,T,S);ai._.accessKeyMap['CTRL+'+W.accessKey]=W.id;}},selectPage:function(W){if(this._.currentTabId==W)return;if(this.fire('selectPage',{page:W,currentPage:this._.currentTabId})===true)return;for(var X in this._.tabs){var Y=this._.tabs[X][0],Z=this._.tabs[X][1];if(X!=W){Y.removeClass('cke_dialog_tab_selected');Z.hide();}Z.setAttribute('aria-hidden',X!=W);}var aa=this._.tabs[W];aa[0].addClass('cke_dialog_tab_selected');if(i.ie6Compat||i.ie7Compat){x(aa[1]);aa[1].show();setTimeout(function(){x(aa[1],1);},0);}else aa[1].show();this._.currentTabId=W;this._.currentTabIndex=l.indexOf(this._.tabIdList,W);},updateStyle:function(){this.parts.dialog[(this._.pageCount===1?'add':'remove')+'Class']('cke_single_page');},hidePage:function(W){var Y=this;var X=Y._.tabs[W]&&Y._.tabs[W][0];if(!X||Y._.pageCount==1||!X.isVisible())return;else if(W==Y._.currentTabId)Y.selectPage(v.call(Y));X.hide();Y._.pageCount--;Y.updateStyle();},showPage:function(W){var Y=this;var X=Y._.tabs[W]&&Y._.tabs[W][0];if(!X)return;X.show();Y._.pageCount++;Y.updateStyle();},getElement:function(){return this._.element;},getName:function(){return this._.name;},getContentElement:function(W,X){var Y=this._.contents[W];return Y&&Y[X];},getValueOf:function(W,X){return this.getContentElement(W,X).getValue();},setValueOf:function(W,X,Y){return this.getContentElement(W,X).setValue(Y);},getButton:function(W){return this._.buttons[W];},click:function(W){return this._.buttons[W].click();},disableButton:function(W){return this._.buttons[W].disable();},enableButton:function(W){return this._.buttons[W].enable();},getPageCount:function(){return this._.pageCount;},getParentEditor:function(){return this._.editor;},getSelectedElement:function(){return this.getParentEditor().getSelection().getSelectedElement();
},addFocusable:function(W,X){var Z=this;if(typeof X=='undefined'){X=Z._.focusList.length;Z._.focusList.push(new y(Z,W,X));}else{Z._.focusList.splice(X,0,new y(Z,W,X));for(var Y=X+1;Y<Z._.focusList.length;Y++)Z._.focusList[Y].focusIndex++;}}};l.extend(h.dialog,{add:function(W,X){if(!this._.dialogDefinitions[W]||typeof X=='function')this._.dialogDefinitions[W]=X;},exists:function(W){return!!this._.dialogDefinitions[W];},getCurrent:function(){return h.dialog._.currentTop;},okButton:(function(){var W=function(X,Y){Y=Y||{};return l.extend({id:'ok',type:'button',label:X.lang.common.ok,'class':'cke_dialog_ui_button_ok',onClick:function(Z){var aa=Z.data.dialog;if(aa.fire('ok',{hide:true}).hide!==false)aa.hide();}},Y,true);};W.type='button';W.override=function(X){return l.extend(function(Y){return W(Y,X);},{type:'button'},true);};return W;})(),cancelButton:(function(){var W=function(X,Y){Y=Y||{};return l.extend({id:'cancel',type:'button',label:X.lang.common.cancel,'class':'cke_dialog_ui_button_cancel',onClick:function(Z){var aa=Z.data.dialog;if(aa.fire('cancel',{hide:true}).hide!==false)aa.hide();}},Y,true);};W.type='button';W.override=function(X){return l.extend(function(Y){return W(Y,X);},{type:'button'},true);};return W;})(),addUIElement:function(W,X){this._.uiElementBuilders[W]=X;}});h.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null};h.event.implementOn(h.dialog);h.event.implementOn(h.dialog.prototype,true);var z={resizable:3,minWidth:600,minHeight:400,buttons:[h.dialog.okButton,h.dialog.cancelButton]};i.mac&&z.buttons.reverse();var A=function(W,X,Y){for(var Z=0,aa;aa=W[Z];Z++){if(aa.id==X)return aa;if(Y&&aa[Y]){var ab=A(aa[Y],X,Y);if(ab)return ab;}}return null;},B=function(W,X,Y,Z,aa){if(Y){for(var ab=0,ac;ac=W[ab];ab++){if(ac.id==Y){W.splice(ab,0,X);return X;}if(Z&&ac[Z]){var ad=B(ac[Z],X,Y,Z,true);if(ad)return ad;}}if(aa)return null;}W.push(X);return X;},C=function(W,X,Y){for(var Z=0,aa;aa=W[Z];Z++){if(aa.id==X)return W.splice(Z,1);if(Y&&aa[Y]){var ab=C(aa[Y],X,Y);if(ab)return ab;}}return null;},D=function(W,X){this.dialog=W;var Y=X.contents;for(var Z=0,aa;aa=Y[Z];Z++)Y[Z]=aa&&new E(W,aa);l.extend(this,X);};D.prototype={getContents:function(W){return A(this.contents,W);},getButton:function(W){return A(this.buttons,W);},addContents:function(W,X){return B(this.contents,W,X);},addButton:function(W,X){return B(this.buttons,W,X);},removeContents:function(W){C(this.contents,W);},removeButton:function(W){C(this.buttons,W);}};function E(W,X){this._={dialog:W};
l.extend(this,X);};E.prototype={get:function(W){return A(this.elements,W,'children');},add:function(W,X){return B(this.elements,W,X,'children');},remove:function(W){C(this.elements,W,'children');}};function F(W){var X=null,Y=null,Z=W.getElement().getFirst(),aa=W.getParentEditor(),ab=aa.config.dialog_magnetDistance,ac=aa.skin.margins||[0,0,0,0];if(typeof ab=='undefined')ab=20;function ad(af){var ag=W.getSize(),ah=h.document.getWindow().getViewPaneSize(),ai=af.data.$.screenX,aj=af.data.$.screenY,ak=ai-X.x,al=aj-X.y,am,an;X={x:ai,y:aj};Y.x+=ak;Y.y+=al;if(Y.x+ac[3]<ab)am=-ac[3];else if(Y.x-ac[1]>ah.width-ag.width-ab)am=ah.width-ag.width+ac[1];else am=Y.x;if(Y.y+ac[0]<ab)an=-ac[0];else if(Y.y-ac[2]>ah.height-ag.height-ab)an=ah.height-ag.height+ac[2];else an=Y.y;W.move(am,an);af.data.preventDefault();};function ae(af){h.document.removeListener('mousemove',ad);h.document.removeListener('mouseup',ae);if(i.ie6Compat){var ag=J.getChild(0).getFrameDocument();ag.removeListener('mousemove',ad);ag.removeListener('mouseup',ae);}};W.parts.title.on('mousedown',function(af){W._.updateSize=true;X={x:af.data.$.screenX,y:af.data.$.screenY};h.document.on('mousemove',ad);h.document.on('mouseup',ae);Y=W.getPosition();if(i.ie6Compat){var ag=J.getChild(0).getFrameDocument();ag.on('mousemove',ad);ag.on('mouseup',ae);}af.data.preventDefault();},W);};function G(W){var X=W.definition,Y=X.minWidth||0,Z=X.minHeight||0,aa=X.resizable,ab=W.getParentEditor().skin.margins||[0,0,0,0];function ac(an,ao){an.y+=ao;};function ad(an,ao){an.x2+=ao;};function ae(an,ao){an.y2+=ao;};function af(an,ao){an.x+=ao;};var ag=null,ah=null,ai=W._.editor.config.magnetDistance,aj=['tl','t','tr','l','r','bl','b','br'];function ak(an){var ao=an.listenerData.part,ap=W.getSize();ah=W.getPosition();l.extend(ah,{x2:ah.x+ap.width,y2:ah.y+ap.height});ag={x:an.data.$.screenX,y:an.data.$.screenY};h.document.on('mousemove',al,W,{part:ao});h.document.on('mouseup',am,W,{part:ao});if(i.ie6Compat){var aq=J.getChild(0).getFrameDocument();aq.on('mousemove',al,W,{part:ao});aq.on('mouseup',am,W,{part:ao});}an.data.preventDefault();};function al(an){var ao=an.data.$.screenX,ap=an.data.$.screenY,aq=ao-ag.x,ar=ap-ag.y,as=h.document.getWindow().getViewPaneSize(),at=an.listenerData.part;if(at.search('t')!=-1)ac(ah,ar);if(at.search('l')!=-1)af(ah,aq);if(at.search('b')!=-1)ae(ah,ar);if(at.search('r')!=-1)ad(ah,aq);ag={x:ao,y:ap};var au,av,aw,ax;if(ah.x+ab[3]<ai)au=-ab[3];else if(at.search('l')!=-1&&ah.x2-ah.x<Y+ai)au=ah.x2-Y;else au=ah.x;
if(ah.y+ab[0]<ai)av=-ab[0];else if(at.search('t')!=-1&&ah.y2-ah.y<Z+ai)av=ah.y2-Z;else av=ah.y;if(ah.x2-ab[1]>as.width-ai)aw=as.width+ab[1];else if(at.search('r')!=-1&&ah.x2-ah.x<Y+ai)aw=ah.x+Y;else aw=ah.x2;if(ah.y2-ab[2]>as.height-ai)ax=as.height+ab[2];else if(at.search('b')!=-1&&ah.y2-ah.y<Z+ai)ax=ah.y+Z;else ax=ah.y2;W.move(au,av);W.resize(aw-au,ax-av);an.data.preventDefault();};function am(an){h.document.removeListener('mouseup',am);h.document.removeListener('mousemove',al);if(i.ie6Compat){var ao=J.getChild(0).getFrameDocument();ao.removeListener('mouseup',am);ao.removeListener('mousemove',al);}};};var H,I={},J;function K(W){var X=h.document.getWindow(),Y=W.config,Z=Y.dialog_backgroundCoverColor||'white',aa=Y.dialog_backgroundCoverOpacity,ab=Y.baseFloatZIndex,ac=l.genKey(Z,aa,ab),ad=I[ac];if(!ad){var ae=['<div style="position: ',i.ie6Compat?'absolute':'fixed','; z-index: ',ab,'; top: 0px; left: 0px; ',!i.ie6Compat?'background-color: '+Z:'','" class="cke_dialog_background_cover">'];if(i.ie6Compat){var af=i.isCustomDomain(),ag="<html><body style=\\'background-color:"+Z+";\\'></body></html>";ae.push('<iframe hidefocus="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:');ae.push('void((function(){document.open();'+(af?"document.domain='"+document.domain+"';":'')+"document.write( '"+ag+"' );"+'document.close();'+'})())');ae.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>');}ae.push('</div>');ad=o.createFromHtml(ae.join(''));ad.setOpacity(aa!=undefined?aa:0.5);ad.appendTo(h.document.getBody());I[ac]=ad;}else ad.show();J=ad;var ah=function(){var ak=X.getViewPaneSize();ad.setStyles({width:ak.width+'px',height:ak.height+'px'});},ai=function(){var ak=X.getScrollPosition(),al=h.dialog._.currentTop;ad.setStyles({left:ak.x+'px',top:ak.y+'px'});do{var am=al.getPosition();al.move(am.x,am.y);}while(al=al._.parentDialog)};H=ah;X.on('resize',ah);ah();if(i.ie6Compat){var aj=function(){ai();arguments.callee.prevScrollHandler.apply(this,arguments);};X.$.setTimeout(function(){aj.prevScrollHandler=window.onscroll||(function(){});window.onscroll=aj;},0);ai();}};function L(){if(!J)return;var W=h.document.getWindow();J.hide();W.removeListener('resize',H);if(i.ie6Compat)W.$.setTimeout(function(){var X=window.onscroll&&window.onscroll.prevScrollHandler;window.onscroll=X||null;},0);H=null;};function M(){for(var W in I)I[W].remove();I={};};var N={},O=function(W){var X=W.data.$.ctrlKey||W.data.$.metaKey,Y=W.data.$.altKey,Z=W.data.$.shiftKey,aa=String.fromCharCode(W.data.$.keyCode),ab=N[(X?'CTRL+':'')+(Y?'ALT+':'')+(Z?'SHIFT+':'')+aa];
if(!ab||!ab.length)return;ab=ab[ab.length-1];ab.keydown&&ab.keydown.call(ab.uiElement,ab.dialog,ab.key);W.data.preventDefault();},P=function(W){var X=W.data.$.ctrlKey||W.data.$.metaKey,Y=W.data.$.altKey,Z=W.data.$.shiftKey,aa=String.fromCharCode(W.data.$.keyCode),ab=N[(X?'CTRL+':'')+(Y?'ALT+':'')+(Z?'SHIFT+':'')+aa];if(!ab||!ab.length)return;ab=ab[ab.length-1];if(ab.keyup){ab.keyup.call(ab.uiElement,ab.dialog,ab.key);W.data.preventDefault();}},Q=function(W,X,Y,Z,aa){var ab=N[Y]||(N[Y]=[]);ab.push({uiElement:W,dialog:X,key:Y,keyup:aa||W.accessKeyUp,keydown:Z||W.accessKeyDown});},R=function(W){for(var X in N){var Y=N[X];for(var Z=Y.length-1;Z>=0;Z--){if(Y[Z].dialog==W||Y[Z].uiElement==W)Y.splice(Z,1);}if(Y.length===0)delete N[X];}},S=function(W,X){if(W._.accessKeyMap[X])W.selectPage(W._.accessKeyMap[X]);},T=function(W,X){},U={27:1,13:1},V=function(W){if(W.data.getKeystroke() in U)W.data.stopPropagation();};(function(){r.dialog={uiElement:function(W,X,Y,Z,aa,ab,ac){if(arguments.length<4)return;var ad=(Z.call?Z(X):Z)||'div',ae=['<',ad,' '],af=(aa&&aa.call?aa(X):aa)||{},ag=(ab&&ab.call?ab(X):ab)||{},ah=(ac&&ac.call?ac.call(this,W,X):ac)||'',ai=this.domId=ag.id||l.getNextId()+'_uiElement',aj=this.id=X.id,ak;ag.id=ai;var al={};if(X.type)al['cke_dialog_ui_'+X.type]=1;if(X.className)al[X.className]=1;var am=ag['class']&&ag['class'].split?ag['class'].split(' '):[];for(ak=0;ak<am.length;ak++){if(am[ak])al[am[ak]]=1;}var an=[];for(ak in al)an.push(ak);ag['class']=an.join(' ');if(X.title)ag.title=X.title;var ao=(X.style||'').split(';');for(ak in af)ao.push(ak+':'+af[ak]);if(X.hidden)ao.push('display:none');for(ak=ao.length-1;ak>=0;ak--){if(ao[ak]==='')ao.splice(ak,1);}if(ao.length>0)ag.style=(ag.style?ag.style+'; ':'')+ao.join('; ');for(ak in ag)ae.push(ak+'="'+l.htmlEncode(ag[ak])+'" ');ae.push('>',ah,'</',ad,'>');Y.push(ae.join(''));(this._||(this._={})).dialog=W;if(typeof X.isChanged=='boolean')this.isChanged=function(){return X.isChanged;};if(typeof X.isChanged=='function')this.isChanged=X.isChanged;h.event.implementOn(this);this.registerEvents(X);if(this.accessKeyUp&&this.accessKeyDown&&X.accessKey)Q(this,W,'CTRL+'+X.accessKey);var ap=this;W.on('load',function(){if(ap.getInputElement())ap.getInputElement().on('focus',function(){W._.tabBarMode=false;W._.hasFocus=true;ap.fire('focus');},ap);});if(this.keyboardFocusable){this.tabIndex=X.tabIndex||0;this.focusIndex=W._.focusList.push(this)-1;this.on('focus',function(){W._.currentFocusIndex=ap.focusIndex;});}l.extend(this,X);
},hbox:function(W,X,Y,Z,aa){if(arguments.length<4)return;this._||(this._={});var ab=this._.children=X,ac=aa&&aa.widths||null,ad=aa&&aa.height||null,ae={},af,ag=function(){var ai=['<tbody><tr class="cke_dialog_ui_hbox">'];for(af=0;af<Y.length;af++){var aj='cke_dialog_ui_hbox_child',ak=[];if(af===0)aj='cke_dialog_ui_hbox_first';if(af==Y.length-1)aj='cke_dialog_ui_hbox_last';ai.push('<td class="',aj,'" role="presentation" ');if(ac){if(ac[af])ak.push('width:'+t(ac[af]));}else ak.push('width:'+Math.floor(100/Y.length)+'%');if(ad)ak.push('height:'+t(ad));if(aa&&aa.padding!=undefined)ak.push('padding:'+t(aa.padding));if(ak.length>0)ai.push('style="'+ak.join('; ')+'" ');ai.push('>',Y[af],'</td>');}ai.push('</tr></tbody>');return ai.join('');},ah={role:'presentation'};aa&&aa.align&&(ah.align=aa.align);r.dialog.uiElement.call(this,W,aa||{type:'hbox'},Z,'table',ae,ah,ag);},vbox:function(W,X,Y,Z,aa){if(arguments.length<3)return;this._||(this._={});var ab=this._.children=X,ac=aa&&aa.width||null,ad=aa&&aa.heights||null,ae=function(){var af=['<table role="presentation" cellspacing="0" border="0" '];af.push('style="');if(aa&&aa.expand)af.push('height:100%;');af.push('width:'+t(ac||'100%'),';');af.push('"');af.push('align="',l.htmlEncode(aa&&aa.align||(W.getParentEditor().lang.dir=='ltr'?'left':'right')),'" ');af.push('><tbody>');for(var ag=0;ag<Y.length;ag++){var ah=[];af.push('<tr><td role="presentation" ');if(ac)ah.push('width:'+t(ac||'100%'));if(ad)ah.push('height:'+t(ad[ag]));else if(aa&&aa.expand)ah.push('height:'+Math.floor(100/Y.length)+'%');if(aa&&aa.padding!=undefined)ah.push('padding:'+t(aa.padding));if(ah.length>0)af.push('style="',ah.join('; '),'" ');af.push(' class="cke_dialog_ui_vbox_child">',Y[ag],'</td></tr>');}af.push('</tbody></table>');return af.join('');};r.dialog.uiElement.call(this,W,aa||{type:'vbox'},Z,'div',null,{role:'presentation'},ae);}};})();r.dialog.uiElement.prototype={getElement:function(){return h.document.getById(this.domId);},getInputElement:function(){return this.getElement();},getDialog:function(){return this._.dialog;},setValue:function(W,X){this.getInputElement().setValue(W);!X&&this.fire('change',{value:W});return this;},getValue:function(){return this.getInputElement().getValue();},isChanged:function(){return false;},selectParentTab:function(){var Z=this;var W=Z.getInputElement(),X=W,Y;while((X=X.getParent())&&X.$.className.search('cke_dialog_page_contents')==-1){}if(!X)return Z;Y=X.getAttribute('name');if(Z._.dialog._.currentTabId!=Y)Z._.dialog.selectPage(Y);
return Z;},focus:function(){this.selectParentTab().getInputElement().focus();return this;},registerEvents:function(W){var X=/^on([A-Z]\w+)/,Y,Z=function(ab,ac,ad,ae){ac.on('load',function(){ab.getInputElement().on(ad,ae,ab);});};for(var aa in W){if(!(Y=aa.match(X)))continue;if(this.eventProcessors[aa])this.eventProcessors[aa].call(this,this._.dialog,W[aa]);else Z(this,this._.dialog,Y[1].toLowerCase(),W[aa]);}return this;},eventProcessors:{onLoad:function(W,X){W.on('load',X,this);},onShow:function(W,X){W.on('show',X,this);},onHide:function(W,X){W.on('hide',X,this);}},accessKeyDown:function(W,X){this.focus();},accessKeyUp:function(W,X){},disable:function(){var W=this.getInputElement();W.setAttribute('disabled','true');W.addClass('cke_disabled');},enable:function(){var W=this.getInputElement();W.removeAttribute('disabled');W.removeClass('cke_disabled');},isEnabled:function(){return!this.getInputElement().getAttribute('disabled');},isVisible:function(){return this.getInputElement().isVisible();},isFocusable:function(){if(!this.isEnabled()||!this.isVisible())return false;return true;}};r.dialog.hbox.prototype=l.extend(new r.dialog.uiElement(),{getChild:function(W){var X=this;if(arguments.length<1)return X._.children.concat();if(!W.splice)W=[W];if(W.length<2)return X._.children[W[0]];else return X._.children[W[0]]&&X._.children[W[0]].getChild?X._.children[W[0]].getChild(W.slice(1,W.length)):null;}},true);r.dialog.vbox.prototype=new r.dialog.hbox();(function(){var W={build:function(X,Y,Z){var aa=Y.children,ab,ac=[],ad=[];for(var ae=0;ae<aa.length&&(ab=aa[ae]);ae++){var af=[];ac.push(af);ad.push(h.dialog._.uiElementBuilders[ab.type].build(X,ab,af));}return new r.dialog[Y.type](X,ad,ac,Z,Y);}};h.dialog.addUIElement('hbox',W);h.dialog.addUIElement('vbox',W);})();h.dialogCommand=function(W){this.dialogName=W;};h.dialogCommand.prototype={exec:function(W){W.openDialog(this.dialogName);},canUndo:false,editorFocus:j||i.webkit};(function(){var W=/^([a]|[^a])+$/,X=/^\d*$/,Y=/^\d*(?:\.\d+)?$/;h.VALIDATE_OR=1;h.VALIDATE_AND=2;h.dialog.validate={functions:function(){return function(){var af=this;var Z=af&&af.getValue?af.getValue():arguments[0],aa=undefined,ab=2,ac=[],ad;for(ad=0;ad<arguments.length;ad++){if(typeof arguments[ad]=='function')ac.push(arguments[ad]);else break;}if(ad<arguments.length&&typeof arguments[ad]=='string'){aa=arguments[ad];ad++;}if(ad<arguments.length&&typeof arguments[ad]=='number')ab=arguments[ad];var ae=ab==2?true:false;for(ad=0;ad<ac.length;ad++){if(ab==2)ae=ae&&ac[ad](Z);
else ae=ae||ac[ad](Z);}if(!ae){if(aa!==undefined)alert(aa);if(af&&(af.select||af.focus))af.select||af.focus();return false;}return true;};},regex:function(Z,aa){return function(){var ac=this;var ab=ac&&ac.getValue?ac.getValue():arguments[0];if(!Z.test(ab)){if(aa!==undefined)alert(aa);if(ac&&(ac.select||ac.focus))if(ac.select)ac.select();else ac.focus();return false;}return true;};},notEmpty:function(Z){return this.regex(W,Z);},integer:function(Z){return this.regex(X,Z);},number:function(Z){return this.regex(Y,Z);},equals:function(Z,aa){return this.functions(function(ab){return ab==Z;},aa);},notEqual:function(Z,aa){return this.functions(function(ab){return ab!=Z;},aa);}};h.on('instanceDestroyed',function(Z){if(l.isEmpty(h.instances)){var aa;while(aa=h.dialog._.currentTop)aa.hide();M();}var ab=Z.editor._.storedDialogs;for(var ac in ab)ab[ac].destroy();});})();})();l.extend(h.editor.prototype,{openDialog:function(t,u){var v=h.dialog._.dialogDefinitions[t],w=this.skin.dialog;if(typeof v=='function'&&w._isLoaded){var x=this._.storedDialogs||(this._.storedDialogs={}),y=x[t]||(x[t]=new h.dialog(this,t));u&&u.call(y,y);y.show();return y;}else if(v=='failed')throw new Error('[CKEDITOR.dialog.openDialog] Dialog "'+t+'" failed when loading definition.');var z=h.document.getBody(),A=z.$.style.cursor,B=this;z.setStyle('cursor','wait');function C(E){var F=h.dialog._.dialogDefinitions[t],G=B.skin.dialog;if(!G._isLoaded||D&&typeof E=='undefined')return;if(typeof F!='function')h.dialog._.dialogDefinitions[t]='failed';B.openDialog(t,u);z.setStyle('cursor',A);};if(typeof v=='string'){var D=1;h.scriptLoader.load(h.getUrl(v),C);}h.skins.load(this,'dialog',C);return null;}});q.add('dialog',{requires:['dialogui']});q.add('styles',{requires:['selection']});h.editor.prototype.attachStyleStateChange=function(t,u){var v=this._.styleStateChangeCallbacks;if(!v){v=this._.styleStateChangeCallbacks=[];this.on('selectionChange',function(w){for(var x=0;x<v.length;x++){var y=v[x],z=y.style.checkActive(w.data.path)?1:2;if(y.state!==z){y.fn.call(this,z);y.state=z;}}});}v.push({style:t,fn:u});};h.STYLE_BLOCK=1;h.STYLE_INLINE=2;h.STYLE_OBJECT=3;(function(){var t={address:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1},u={a:1,embed:1,hr:1,img:1,li:1,object:1,ol:1,table:1,td:1,tr:1,th:1,ul:1,dl:1,dt:1,dd:1,form:1},v=/\s*(?:;\s*|$)/;h.style=function(X,Y){if(Y){X=l.clone(X);P(X.attributes,Y);P(X.styles,Y);}var Z=this.element=(X.element||'*').toLowerCase();this.type=Z=='#'||t[Z]?1:u[Z]?3:2;this._={definition:X};
};h.style.prototype={apply:function(X){W.call(this,X,false);},remove:function(X){W.call(this,X,true);},applyToRange:function(X){var Y=this;return(Y.applyToRange=Y.type==2?w:Y.type==1?A:Y.type==3?y:null).call(Y,X);},removeFromRange:function(X){var Y=this;return(Y.removeFromRange=Y.type==2?x:Y.type==3?z:null).call(Y,X);},applyToObject:function(X){N(X,this);},checkActive:function(X){var ab=this;switch(ab.type){case 1:return ab.checkElementRemovable(X.block||X.blockLimit,true);case 3:case 2:var Y=X.elements;for(var Z=0,aa;Z<Y.length;Z++){aa=Y[Z];if(ab.type==2&&(aa==X.block||aa==X.blockLimit))continue;if(ab.type==3&&!(aa.getName() in u))continue;if(ab.checkElementRemovable(aa,true))return true;}}return false;},checkApplicable:function(X){switch(this.type){case 2:case 1:break;case 3:return X.lastElement.getAscendant(this.element,true);}return true;},checkElementRemovable:function(X,Y){if(!X)return false;var Z=this._.definition,aa;if(X.getName()==this.element){if(!Y&&!X.hasAttributes())return true;aa=Q(Z);if(aa._length){for(var ab in aa){if(ab=='_length')continue;var ac=X.getAttribute(ab)||'';if(ab=='style'?V(aa[ab],T(ac,false)):aa[ab]==ac){if(!Y)return true;}else if(Y)return false;}if(Y)return true;}else return true;}var ad=R(this)[X.getName()];if(ad){if(!(aa=ad.attributes))return true;for(var ae=0;ae<aa.length;ae++){ab=aa[ae][0];var af=X.getAttribute(ab);if(af){var ag=aa[ae][1];if(ag===null||typeof ag=='string'&&af==ag||ag.test(af))return true;}}}return false;},buildPreview:function(){var X=this._.definition,Y=[],Z=X.element;if(Z=='bdo')Z='span';Y=['<',Z];var aa=X.attributes;if(aa)for(var ab in aa)Y.push(' ',ab,'="',aa[ab],'"');var ac=h.style.getStyleText(X);if(ac)Y.push(' style="',ac,'"');Y.push('>',X.name,'</',Z,'>');return Y.join('');}};h.style.getStyleText=function(X){var Y=X._ST;if(Y)return Y;Y=X.styles;var Z=X.attributes&&X.attributes.style||'',aa='';if(Z.length)Z=Z.replace(v,';');for(var ab in Y){var ac=Y[ab],ad=(ab+':'+ac).replace(v,';');if(ac=='inherit')aa+=ad;else Z+=ad;}if(Z.length)Z=T(Z);Z+=aa;return X._ST=Z;};function w(X){var aw=this;var Y=X.document;if(X.collapsed){var Z=M(aw,Y);X.insertNode(Z);X.moveToPosition(Z,2);return;}var aa=aw.element,ab=aw._.definition,ac,ad=m[aa]||(ac=true,m.span);X.enlarge(1);X.trim();var ae=X.createBookmark(),af=ae.startNode,ag=ae.endNode,ah=af,ai;while(ah){var aj=false;if(ah.equals(ag)){ah=null;aj=true;}else{var ak=ah.type,al=ak==1?ah.getName():null;if(al&&ah.getAttribute('_cke_bookmark')){ah=ah.getNextSourceNode(true);
continue;}if(!al||ad[al]&&(ah.getPosition(ag)|4|0|8)==4+0+8&&(!ab.childRule||ab.childRule(ah))){var am=ah.getParent();if(am&&((am.getDtd()||m.span)[aa]||ac)&&(!ab.parentRule||ab.parentRule(am))){if(!ai&&(!al||!m.$removeEmpty[al]||(ah.getPosition(ag)|4|0|8)==4+0+8)){ai=new k.range(Y);ai.setStartBefore(ah);}if(ak==3||ak==1&&!ah.getChildCount()){var an=ah,ao;while(!an.$.nextSibling&&(ao=an.getParent(),ad[ao.getName()])&&(ao.getPosition(af)|2|0|8)==2+0+8&&(!ab.childRule||ab.childRule(ao)))an=ao;ai.setEndAfter(an);if(!an.$.nextSibling)aj=true;}}else aj=true;}else aj=true;ah=ah.getNextSourceNode();}if(aj&&ai&&!ai.collapsed){var ap=M(aw,Y),aq=ap.hasAttributes(),ar=ai.getCommonAncestor(),as={styles:{},attrs:{},blockedStyles:{},blockedAttrs:{}},at,au,av;while(ap&&ar){if(ar.getName()==aa){for(at in ab.attributes){if(as.blockedAttrs[at]||!(av=ar.getAttribute(au)))continue;if(ap.getAttribute(at)==av)as.attrs[at]=1;else as.blockedAttrs[at]=1;}for(au in ab.styles){if(as.blockedStyles[au]||!(av=ar.getStyle(au)))continue;if(ap.getStyle(au)==av)as.styles[au]=1;else as.blockedStyles[au]=1;}}ar=ar.getParent();}for(at in as.attrs)ap.removeAttribute(at);for(au in as.styles)ap.removeStyle(au);if(aq&&!ap.hasAttributes())ap=null;if(ap){ai.extractContents().appendTo(ap);J(aw,ap);ai.insertNode(ap);ap.mergeSiblings();if(!j)ap.$.normalize();}else{ap=new o('span');ai.extractContents().appendTo(ap);ai.insertNode(ap);J(aw,ap);ap.remove(true);}ai=null;}}X.moveToBookmark(ae);X.shrink(2);};function x(X){X.enlarge(1);var Y=X.createBookmark(),Z=Y.startNode;if(X.collapsed){var aa=new k.elementPath(Z.getParent()),ab;for(var ac=0,ad;ac<aa.elements.length&&(ad=aa.elements[ac]);ac++){if(ad==aa.block||ad==aa.blockLimit)break;if(this.checkElementRemovable(ad)){var ae;if(X.collapsed&&(X.checkBoundaryOfElement(ad,2)||(ae=X.checkBoundaryOfElement(ad,1)))){ab=ad;ab.match=ae?'start':'end';}else{ad.mergeSiblings();I(this,ad);}}}if(ab){var af=Z;for(ac=0;true;ac++){var ag=aa.elements[ac];if(ag.equals(ab))break;else if(ag.match)continue;else ag=ag.clone();ag.append(af);af=ag;}af[ab.match=='start'?'insertBefore':'insertAfter'](ab);}}else{var ah=Y.endNode,ai=this;function aj(){var am=new k.elementPath(Z.getParent()),an=new k.elementPath(ah.getParent()),ao=null,ap=null;for(var aq=0;aq<am.elements.length;aq++){var ar=am.elements[aq];if(ar==am.block||ar==am.blockLimit)break;if(ai.checkElementRemovable(ar))ao=ar;}for(aq=0;aq<an.elements.length;aq++){ar=an.elements[aq];if(ar==an.block||ar==an.blockLimit)break;if(ai.checkElementRemovable(ar))ap=ar;
}if(ap)ah.breakParent(ap);if(ao)Z.breakParent(ao);};aj();var ak=Z.getNext();while(!ak.equals(ah)){var al=ak.getNextSourceNode();if(ak.type==1&&this.checkElementRemovable(ak)){if(ak.getName()==this.element)I(this,ak);else K(ak,R(this)[ak.getName()]);if(al.type==1&&al.contains(Z)){aj();al=Z.getNext();}}ak=al;}}X.moveToBookmark(Y);};function y(X){var Y=X.getCommonAncestor(true,true),Z=Y.getAscendant(this.element,true);Z&&N(Z,this);};function z(X){var Y=X.getCommonAncestor(true,true),Z=Y.getAscendant(this.element,true);if(!Z)return;var aa=this,ab=aa._.definition,ac=ab.attributes,ad=h.style.getStyleText(ab);if(ac)for(var ae in ac)Z.removeAttribute(ae,ac[ae]);if(ab.styles)for(var af in ab.styles){if(!ab.styles.hasOwnProperty(af))continue;Z.removeStyle(af);}};function A(X){var Y=X.createBookmark(true),Z=X.createIterator();Z.enforceRealBlocks=true;if(this._.enterMode)Z.enlargeBr=this._.enterMode!=2;var aa,ab=X.document,ac;while(aa=Z.getNextParagraph()){var ad=M(this,ab,aa);B(aa,ad);}X.moveToBookmark(Y);};function B(X,Y){var Z=Y.is('pre'),aa=X.is('pre'),ab=Z&&!aa,ac=!Z&&aa;if(ab)Y=H(X,Y);else if(ac)Y=G(E(X),Y);else X.moveChildren(Y);Y.replace(X);if(Z)D(Y);};var C=k.walker.whitespaces(true);function D(X){var Y;if(!((Y=X.getPrevious(C))&&Y.is&&Y.is('pre')))return;var Z=F(Y.getHtml(),/\n$/,'')+'\n\n'+F(X.getHtml(),/^\n/,'');if(j)X.$.outerHTML='<pre>'+Z+'</pre>';else X.setHtml(Z);Y.remove();};function E(X){var Y=/(\S\s*)\n(?:\s|(<span[^>]+_cke_bookmark.*?\/span>))*\n(?!$)/gi,Z=X.getName(),aa=F(X.getOuterHtml(),Y,function(ac,ad,ae){return ad+'</pre>'+ae+'<pre>';}),ab=[];aa.replace(/<pre\b.*?>([\s\S]*?)<\/pre>/gi,function(ac,ad){ab.push(ad);});return ab;};function F(X,Y,Z){var aa='',ab='';X=X.replace(/(^<span[^>]+_cke_bookmark.*?\/span>)|(<span[^>]+_cke_bookmark.*?\/span>$)/gi,function(ac,ad,ae){ad&&(aa=ad);ae&&(ab=ae);return '';});return aa+X.replace(Y,Z)+ab;};function G(X,Y){var Z=new k.documentFragment(Y.getDocument());for(var aa=0;aa<X.length;aa++){var ab=X[aa];ab=ab.replace(/(\r\n|\r)/g,'\n');ab=F(ab,/^[ \t]*\n/,'');ab=F(ab,/\n$/,'');ab=F(ab,/^[ \t]+|[ \t]+$/g,function(ad,ae,af){if(ad.length==1)return '&nbsp;';else if(!ae)return l.repeat('&nbsp;',ad.length-1)+' ';else return ' '+l.repeat('&nbsp;',ad.length-1);});ab=ab.replace(/\n/g,'<br>');ab=ab.replace(/[ \t]{2,}/g,function(ad){return l.repeat('&nbsp;',ad.length-1)+' ';});var ac=Y.clone();ac.setHtml(ab);Z.append(ac);}return Z;};function H(X,Y){var Z=X.getHtml();Z=F(Z,/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,'');Z=Z.replace(/[ \t\r\n]*(<br[^>]*>)[ \t\r\n]*/gi,'$1');
Z=Z.replace(/([ \t\n\r]+|&nbsp;)/g,' ');Z=Z.replace(/<br\b[^>]*>/gi,'\n');if(j){var aa=X.getDocument().createElement('div');aa.append(Y);Y.$.outerHTML='<pre>'+Z+'</pre>';Y=aa.getFirst().remove();}else Y.setHtml(Z);return Y;};function I(X,Y){var Z=X._.definition,aa=l.extend({},Z.attributes,R(X)[Y.getName()]),ab=Z.styles,ac=l.isEmpty(aa)&&l.isEmpty(ab);for(var ad in aa){if((ad=='class'||X._.definition.fullMatch)&&Y.getAttribute(ad)!=S(ad,aa[ad]))continue;ac=Y.hasAttribute(ad);Y.removeAttribute(ad);}for(var ae in ab){if(X._.definition.fullMatch&&Y.getStyle(ae)!=S(ae,ab[ae],true))continue;ac=ac||!!Y.getStyle(ae);Y.removeStyle(ae);}ac&&L(Y);};function J(X,Y){var Z=X._.definition,aa=Z.attributes,ab=Z.styles,ac=R(X),ad=Y.getElementsByTag(X.element);for(var ae=ad.count();--ae>=0;)I(X,ad.getItem(ae));for(var af in ac){if(af!=X.element){ad=Y.getElementsByTag(af);for(ae=ad.count()-1;ae>=0;ae--){var ag=ad.getItem(ae);K(ag,ac[af]);}}}};function K(X,Y){var Z=Y&&Y.attributes;if(Z)for(var aa=0;aa<Z.length;aa++){var ab=Z[aa][0],ac;if(ac=X.getAttribute(ab)){var ad=Z[aa][1];if(ad===null||ad.test&&ad.test(ac)||typeof ad=='string'&&ac==ad)X.removeAttribute(ab);}}L(X);};function L(X){if(!X.hasAttributes()){var Y=X.getFirst(),Z=X.getLast();X.remove(true);if(Y){Y.type==1&&Y.mergeSiblings();if(Z&&!Y.equals(Z)&&Z.type==1)Z.mergeSiblings();}}};function M(X,Y,Z){var aa,ab=X._.definition,ac=X.element;if(ac=='*')ac='span';aa=new o(ac,Y);if(Z)Z.copyAttributes(aa);return N(aa,X);};function N(X,Y){var Z=Y._.definition,aa=Z.attributes,ab=h.style.getStyleText(Z);if(aa)for(var ac in aa)X.setAttribute(ac,aa[ac]);if(ab)X.setAttribute('style',ab);return X;};var O=/#\((.+?)\)/g;function P(X,Y){for(var Z in X)X[Z]=X[Z].replace(O,function(aa,ab){return Y[ab];});};function Q(X){var Y=X._AC;if(Y)return Y;Y={};var Z=0,aa=X.attributes;if(aa)for(var ab in aa){Z++;Y[ab]=aa[ab];}var ac=h.style.getStyleText(X);if(ac){if(!Y.style)Z++;Y.style=ac;}Y._length=Z;return X._AC=Y;};function R(X){if(X._.overrides)return X._.overrides;var Y=X._.overrides={},Z=X._.definition.overrides;if(Z){if(!l.isArray(Z))Z=[Z];for(var aa=0;aa<Z.length;aa++){var ab=Z[aa],ac,ad,ae;if(typeof ab=='string')ac=ab.toLowerCase();else{ac=ab.element?ab.element.toLowerCase():X.element;ae=ab.attributes;}ad=Y[ac]||(Y[ac]={});if(ae){var af=ad.attributes=ad.attributes||[];for(var ag in ae)af.push([ag.toLowerCase(),ae[ag]]);}}}return Y;};function S(X,Y,Z){var aa=new o('span');aa[Z?'setStyle':'setAttribute'](X,Y);return aa[Z?'getStyle':'getAttribute'](X);
};function T(X,Y){var Z;if(Y!==false){var aa=new o('span');aa.setAttribute('style',X);Z=aa.getAttribute('style')||'';}else Z=X;return Z.replace(/\s*([;:])\s*/,'$1').replace(/([^\s;])$/,'$1;').replace(/,\s+/g,',').replace(/\"/g,'').toLowerCase();};function U(X){var Y={};X.replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(Z,aa,ab){Y[aa]=ab;});return Y;};function V(X,Y){typeof X=='string'&&(X=U(X));typeof Y=='string'&&(Y=U(Y));for(var Z in X){if(!(Z in Y&&(Y[Z]==X[Z]||X[Z]=='inherit'||Y[Z]=='inherit')))return false;}return true;};function W(X,Y){var Z=X.getSelection(),aa=Z.createBookmarks(1),ab=Z.getRanges(1),ac=Y?this.removeFromRange:this.applyToRange,ad,ae=ab.createIterator();while(ad=ae.getNextRange())ac.call(this,ad);if(aa.length==1&&aa[0].collapsed){Z.selectRanges(ab);X.getById(aa[0].startNode).remove();}else Z.selectBookmarks(aa);};})();h.styleCommand=function(t){this.style=t;};h.styleCommand.prototype.exec=function(t){var v=this;t.focus();var u=t.document;if(u)if(v.state==2)v.style.apply(u);else if(v.state==1)v.style.remove(u);return!!u;};h.stylesSet=new h.resourceManager('','stylesSet');h.addStylesSet=l.bind(h.stylesSet.add,h.stylesSet);h.loadStylesSet=function(t,u,v){h.stylesSet.addExternal(t,u,'');h.stylesSet.load(t,v);};h.editor.prototype.getStylesSet=function(t){if(!this._.stylesDefinitions){var u=this,v=u.config.stylesCombo_stylesSet||u.config.stylesSet||'default';if(v instanceof Array){u._.stylesDefinitions=v;t(v);return;}var w=v.split(':'),x=w[0],y=w[1],z=q.registered.styles.path;h.stylesSet.addExternal(x,y?w.slice(1).join(':'):z+'styles/'+x+'.js','');h.stylesSet.load(x,function(A){u._.stylesDefinitions=A[x];t(u._.stylesDefinitions);});}else t(this._.stylesDefinitions);};q.add('domiterator');(function(){function t(w){var x=this;if(arguments.length<1)return;x.range=w;x.forceBrBreak=0;x.enlargeBr=1;x.enforceRealBlocks=0;x._||(x._={});};var u=/^[\r\n\t ]+$/,v=k.walker.bookmark();t.prototype={getNextParagraph:function(w){var x,y,z,A,B,C;if(!this._.lastNode){y=this.range.clone();y.shrink(1,true);A=y.endContainer.hasAscendant('pre',true)||y.startContainer.hasAscendant('pre',true);y.enlarge(this.forceBrBreak&&!A||!this.enlargeBr?3:2);var D=new k.walker(y),E=k.walker.bookmark(true,true);D.evaluator=E;this._.nextNode=D.next();D=new k.walker(y);D.evaluator=E;var F=D.previous();this._.lastNode=F.getNextSourceNode(true);if(this._.lastNode&&this._.lastNode.type==3&&!l.trim(this._.lastNode.getText())&&this._.lastNode.getParent().isBlockBoundary()){var G=new k.range(y.document);
G.moveToPosition(this._.lastNode,4);if(G.checkEndOfBlock()){var H=new k.elementPath(G.endContainer),I=H.block||H.blockLimit;this._.lastNode=I.getNextSourceNode(true);}}if(!this._.lastNode){this._.lastNode=this._.docEndMarker=y.document.createText('');this._.lastNode.insertAfter(F);}y=null;}var J=this._.nextNode;F=this._.lastNode;this._.nextNode=null;while(J){var K=0,L=J.hasAscendant('pre'),M=J.type!=1,N=0;if(!M){var O=J.getName();if(J.isBlockBoundary(this.forceBrBreak&&!L&&{br:1})){if(O=='br')M=1;else if(!y&&!J.getChildCount()&&O!='hr'){x=J;z=J.equals(F);break;}if(y){y.setEndAt(J,3);if(O!='br')this._.nextNode=J;}K=1;}else{if(J.getFirst()){if(!y){y=new k.range(this.range.document);y.setStartAt(J,3);}J=J.getFirst();continue;}M=1;}}else if(J.type==3)if(u.test(J.getText()))M=0;if(M&&!y){y=new k.range(this.range.document);y.setStartAt(J,3);}z=(!K||M)&&J.equals(F);if(y&&!K)while(!J.getNext()&&!z){var P=J.getParent();if(P.isBlockBoundary(this.forceBrBreak&&!L&&{br:1})){K=1;z=z||P.equals(F);break;}J=P;M=1;z=J.equals(F);N=1;}if(M)y.setEndAt(J,4);J=J.getNextSourceNode(N,null,F);z=!J;if(z||K&&y)break;}if(!x){if(!y){this._.docEndMarker&&this._.docEndMarker.remove();this._.nextNode=null;return null;}var Q=new k.elementPath(y.startContainer),R=Q.blockLimit,S={div:1,th:1,td:1};x=Q.block;if(!x&&!this.enforceRealBlocks&&S[R.getName()]&&y.checkStartOfBlock()&&y.checkEndOfBlock())x=R;else if(!x||this.enforceRealBlocks&&x.getName()=='li'){x=this.range.document.createElement(w||'p');y.extractContents().appendTo(x);x.trim();y.insertNode(x);B=C=true;}else if(x.getName()!='li'){if(!y.checkStartOfBlock()||!y.checkEndOfBlock()){x=x.clone(false);y.extractContents().appendTo(x);x.trim();var T=y.splitBlock();B=!T.wasStartOfBlock;C=!T.wasEndOfBlock;y.insertNode(x);}}else if(!z)this._.nextNode=x.equals(F)?null:y.getBoundaryNodes().endNode.getNextSourceNode(true,null,F);}var U=k.walker.bookmark(false,true);if(B){var V=x.getPrevious();if(V&&V.type==1)if(V.getName()=='br')V.remove();else if(V.getLast()&&V.getLast().$.nodeName.toLowerCase()=='br')V.getLast().remove();}if(C){var W=x.getLast();if(W&&W.type==1&&W.getName()=='br')if(j||W.getPrevious(U)||W.getNext(U))W.remove();}if(!this._.nextNode)this._.nextNode=z||x.equals(F)?null:x.getNextSourceNode(true,null,F);if(!U(this._.nextNode))this._.nextNode=this._.nextNode.getNextSourceNode(true,null,function(X){return!X.equals(F)&&U(X);});return x;}};k.range.prototype.createIterator=function(){return new t(this);};})();q.add('panelbutton',{requires:['button'],beforeInit:function(t){t.ui.addHandler(4,r.panelButton.handler);
}});h.UI_PANELBUTTON=4;(function(){var t=function(u){var w=this;var v=w._;if(v.state==0)return;w.createPanel(u);if(v.on){v.panel.hide();return;}v.panel.showBlock(w._.id,w.document.getById(w._.id),4);};r.panelButton=l.createClass({base:r.button,$:function(u){var w=this;var v=u.panel;delete u.panel;w.base(u);w.document=v&&v.parent&&v.parent.getDocument()||h.document;v.block={attributes:v.attributes};w.hasArrow=true;w.click=t;w._={panelDefinition:v};},statics:{handler:{create:function(u){return new r.panelButton(u);}}},proto:{createPanel:function(u){var v=this._;if(v.panel)return;var w=this._.panelDefinition||{},x=this._.panelDefinition.block,y=w.parent||h.document.getBody(),z=this._.panel=new r.floatPanel(u,y,w),A=z.addBlock(v.id,x),B=this;z.onShow=function(){if(B.className)this.element.getFirst().addClass(B.className+'_panel');B.setState(1);v.on=1;if(B.onOpen)B.onOpen();};z.onHide=function(C){if(B.className)this.element.getFirst().removeClass(B.className+'_panel');B.setState(B.modes&&B.modes[u.mode]?2:0);v.on=0;if(!C&&B.onClose)B.onClose();};z.onEscape=function(){z.hide();B.document.getById(v.id).focus();};if(this.onBlock)this.onBlock(z,A);A.onHide=function(){v.on=0;B.setState(2);};}}});})();q.add('floatpanel',{requires:['panel']});(function(){var t={},u=false;function v(w,x,y,z,A){var B=l.genKey(x.getUniqueId(),y.getUniqueId(),w.skinName,w.lang.dir,w.uiColor||'',z.css||'',A||''),C=t[B];if(!C){C=t[B]=new r.panel(x,z);C.element=y.append(o.createFromHtml(C.renderHtml(w),x));C.element.setStyles({display:'none',position:'absolute'});}return C;};r.floatPanel=l.createClass({$:function(w,x,y,z){y.forceIFrame=1;var A=x.getDocument(),B=v(w,A,x,y,z||0),C=B.element,D=C.getFirst().getFirst();this.element=C;this._={panel:B,parentElement:x,definition:y,document:A,iframe:D,children:[],dir:w.lang.dir};w.on('mode',function(){this.hide();},this);},proto:{addBlock:function(w,x){return this._.panel.addBlock(w,x);},addListBlock:function(w,x){return this._.panel.addListBlock(w,x);},getBlock:function(w){return this._.panel.getBlock(w);},showBlock:function(w,x,y,z,A){var B=this._.panel,C=B.showBlock(w);this.allowBlur(false);u=1;var D=this.element,E=this._.iframe,F=this._.definition,G=x.getDocumentPosition(D.getDocument()),H=this._.dir=='rtl',I=G.x+(z||0),J=G.y+(A||0);if(H&&(y==1||y==4))I+=x.$.offsetWidth;else if(!H&&(y==2||y==3))I+=x.$.offsetWidth-1;if(y==3||y==4)J+=x.$.offsetHeight-1;this._.panel._.offsetParentId=x.getId();D.setStyles({top:J+'px',left:0,display:''});D.setOpacity(0);
D.getFirst().removeStyle('width');if(!this._.blurSet){var K=j?E:new k.window(E.$.contentWindow);h.event.useCapture=true;K.on('blur',function(L){var N=this;if(!N.allowBlur())return;var M;if(j&&!N.allowBlur()||(M=L.data.getTarget())&&M.getName&&M.getName()!='iframe')return;if(N.visible&&!N._.activeChild&&!u)N.hide();},this);K.on('focus',function(){this._.focused=true;this.hideChild();this.allowBlur(true);},this);h.event.useCapture=false;this._.blurSet=1;}B.onEscape=l.bind(function(L){if(this.onEscape&&this.onEscape(L)===false)return false;},this);l.setTimeout(function(){if(H)I-=D.$.offsetWidth;var L=l.bind(function(){var M=D.getFirst();if(C.autoSize){var N=C.element.$;if(i.gecko||i.opera)N=N.parentNode;if(j)N=N.document.body;var O=N.scrollWidth;if(j&&i.quirks&&O>0)O+=(M.$.offsetWidth||0)-(M.$.clientWidth||0);O+=4;M.setStyle('width',O+'px');C.element.addClass('cke_frameLoaded');var P=C.element.$.scrollHeight;if(j&&i.quirks&&P>0)P+=(M.$.offsetHeight||0)-(M.$.clientHeight||0);M.setStyle('height',P+'px');B._.currentBlock.element.setStyle('display','none').removeStyle('display');}else M.removeStyle('height');var Q=B.element,R=Q.getWindow(),S=R.getScrollPosition(),T=R.getViewPaneSize(),U={height:Q.$.offsetHeight,width:Q.$.offsetWidth};if(H?I<0:I+U.width>T.width+S.x)I+=U.width*(H?1:-1);if(J+U.height>T.height+S.y)J-=U.height;if(j){var V=new o(D.$.offsetParent),W=V;if(W.getName()=='html')W=W.getDocument().getBody();if(W.getComputedStyle('direction')=='rtl')if(i.ie8Compat)I-=D.getDocument().getDocumentElement().$.scrollLeft*2;else I-=V.$.scrollWidth-V.$.clientWidth;}var X=D.getFirst(),Y;if(Y=X.getCustomData('activePanel'))Y.onHide&&Y.onHide.call(this,1);X.setCustomData('activePanel',this);D.setStyles({top:J+'px',left:I+'px'});D.setOpacity(1);},this);B.isLoaded?L():B.onLoad=L;l.setTimeout(function(){E.$.contentWindow.focus();this.allowBlur(true);},0,this);},0,this);this.visible=1;if(this.onShow)this.onShow.call(this);u=0;},hide:function(){var w=this;if(w.visible&&(!w.onHide||w.onHide.call(w)!==true)){w.hideChild();w.element.setStyle('display','none');w.visible=0;w.element.getFirst().removeCustomData('activePanel');}},allowBlur:function(w){var x=this._.panel;if(w!=undefined)x.allowBlur=w;return x.allowBlur;},showAsChild:function(w,x,y,z,A,B){if(this._.activeChild==w&&w._.panel._.offsetParentId==y.getId())return;this.hideChild();w.onHide=l.bind(function(){l.setTimeout(function(){if(!this._.focused)this.hide();},0,this);},this);this._.activeChild=w;this._.focused=false;w.showBlock(x,y,z,A,B);
if(i.ie7Compat||i.ie8&&i.ie6Compat)setTimeout(function(){w.element.getChild(0).$.style.cssText+='';},100);},hideChild:function(){var w=this._.activeChild;if(w){delete w.onHide;delete this._.activeChild;w.hide();}}}});h.on('instanceDestroyed',function(){var w=l.isEmpty(h.instances);for(var x in t){var y=t[x];if(w)y.destroy();else y.element.hide();}w&&(t={});});})();q.add('menu',{beforeInit:function(t){var u=t.config.menu_groups.split(','),v=t._.menuGroups={},w=t._.menuItems={};for(var x=0;x<u.length;x++)v[u[x]]=x+1;t.addMenuGroup=function(y,z){v[y]=z||100;};t.addMenuItem=function(y,z){if(v[z.group])w[y]=new h.menuItem(this,y,z);};t.addMenuItems=function(y){for(var z in y)this.addMenuItem(z,y[z]);};t.getMenuItem=function(y){return w[y];};},requires:['floatpanel']});(function(){h.menu=l.createClass({$:function(u,v){var y=this;v=y._.definition=v||{};y.id='cke_'+l.getNextNumber();y.editor=u;y.items=[];y._.level=v.level||1;var w=l.extend({},v.panel,{css:u.skin.editor.css,level:y._.level-1,block:{}}),x=w.block.attributes=w.attributes||{};!x.role&&(x.role='menu');y._.panelDefinition=w;},_:{showSubMenu:function(u){var C=this;var v=C._.subMenu,w=C.items[u],x=w.getItems&&w.getItems();if(!x){C._.panel.hideChild();return;}var y=C._.panel.getBlock(C.id);y._.focusIndex=u;if(v)v.removeAll();else{v=C._.subMenu=new h.menu(C.editor,l.extend({},C._.definition,{level:C._.level+1},true));v.parent=C;v.onClick=l.bind(C.onClick,C);v.onEscape=C.onEscape;}for(var z in x){var A=C.editor.getMenuItem(z);if(A){A.state=x[z];v.add(A);}}var B=C._.panel.getBlock(C.id).element.getDocument().getById(C.id+String(u));v.show(B,2);}},proto:{add:function(u){if(!u.order)u.order=this.items.length;this.items.push(u);},removeAll:function(){this.items=[];},show:function(u,v,w,x){var y=this.items,z=this.editor,A=this._.panel,B=this._.element;if(!A){A=this._.panel=new r.floatPanel(this.editor,h.document.getBody(),this._.panelDefinition,this._.level);A.onEscape=l.bind(function(M){if(this.onEscape&&this.onEscape(M)===false)return false;},this);A.onHide=l.bind(function(){this.onHide&&this.onHide();},this);var C=A.addBlock(this.id,this._.panelDefinition.block);C.autoSize=true;var D=C.keys;D[40]='next';D[9]='next';D[38]='prev';D[2000+9]='prev';D[32]='click';D[z.lang.dir=='rtl'?37:39]='click';B=this._.element=C.element;B.addClass(z.skinClass);var E=B.getDocument();E.getBody().setStyle('overflow','hidden');E.getElementsByTag('html').getItem(0).setStyle('overflow','hidden');this._.itemOverFn=l.addFunction(function(M){var N=this;
clearTimeout(N._.showSubTimeout);N._.showSubTimeout=l.setTimeout(N._.showSubMenu,z.config.menu_subMenuDelay||400,N,[M]);},this);this._.itemOutFn=l.addFunction(function(M){clearTimeout(this._.showSubTimeout);},this);this._.itemClickFn=l.addFunction(function(M){var O=this;var N=O.items[M];if(N.state==0){O.hide();return;}if(N.getItems)O._.showSubMenu(M);else O.onClick&&O.onClick(N);},this);}t(y);var F=z.container.getChild(1),G=F.hasClass('cke_mixed_dir_content')?' cke_mixed_dir_content':'',H=['<div class="cke_menu'+G+'" role="presentation">'],I=y.length,J=I&&y[0].group;for(var K=0;K<I;K++){var L=y[K];if(J!=L.group){H.push('<div class="cke_menuseparator" role="separator"></div>');J=L.group;}L.render(this,K,H);}H.push('</div>');B.setHtml(H.join(''));if(this.parent)this.parent._.panel.showAsChild(A,this.id,u,v,w,x);else A.showBlock(this.id,u,v,w,x);z.fire('menuShow',[A]);},hide:function(){this._.panel&&this._.panel.hide();}}});function t(u){u.sort(function(v,w){if(v.group<w.group)return-1;else if(v.group>w.group)return 1;return v.order<w.order?-1:v.order>w.order?1:0;});};})();h.menuItem=l.createClass({$:function(t,u,v){var w=this;l.extend(w,v,{order:0,className:'cke_button_'+u});w.group=t._.menuGroups[w.group];w.editor=t;w.name=u;},proto:{render:function(t,u,v){var C=this;var w=t.id+String(u),x=typeof C.state=='undefined'?2:C.state,y=' cke_'+(x==1?'on':x==0?'disabled':'off'),z=C.label;if(C.className)y+=' '+C.className;var A=C.getItems;v.push('<span class="cke_menuitem"><a id="',w,'" class="',y,'" href="javascript:void(\'',(C.label||'').replace("'",''),'\')" title="',C.label,'" tabindex="-1"_cke_focus=1 hidefocus="true" role="menuitem"'+(A?'aria-haspopup="true"':'')+(x==0?'aria-disabled="true"':'')+(x==1?'aria-pressed="true"':''));if(i.opera||i.gecko&&i.mac)v.push(' onkeypress="return false;"');if(i.gecko)v.push(' onblur="this.style.cssText = this.style.cssText;"');var B=(C.iconOffset||0)*-16;v.push(' onmouseover="CKEDITOR.tools.callFunction(',t._.itemOverFn,',',u,');" onmouseout="CKEDITOR.tools.callFunction(',t._.itemOutFn,',',u,');" onclick="CKEDITOR.tools.callFunction(',t._.itemClickFn,',',u,'); return false;"><span class="cke_icon_wrapper"><span class="cke_icon"'+(C.icon?' style="background-image:url('+h.getUrl(C.icon)+');background-position:0 '+B+'px;"':'')+'></span></span>'+'<span class="cke_label">');if(A)v.push('<span class="cke_menuarrow">','<span>&#',C.editor.lang.dir=='rtl'?'9668':'9658',';</span>','</span>');v.push(z,'</span></a></span>');}}});p.menu_groups='clipboard,form,tablecell,tablecellproperties,tablerow,tablecolumn,table,anchor,link,image,flash,checkbox,radio,textfield,hiddenfield,imagebutton,button,select,textarea,div';
(function(){var t=function(v,w){return v._.modes&&v._.modes[w||v.mode];},u;q.add('editingblock',{init:function(v){if(!v.config.editingBlock)return;v.on('themeSpace',function(w){if(w.data.space=='contents')w.data.html+='<br>';});v.on('themeLoaded',function(){v.fireOnce('editingBlockReady');});v.on('uiReady',function(){v.setMode(v.config.startupMode);});v.on('afterSetData',function(){if(!u){function w(){u=true;t(v).loadData(v.getData());u=false;};if(v.mode)w();else v.on('mode',function(){w();v.removeListener('mode',arguments.callee);});}});v.on('beforeGetData',function(){if(!u&&v.mode){u=true;v.setData(t(v).getData());u=false;}});v.on('getSnapshot',function(w){if(v.mode)w.data=t(v).getSnapshotData();});v.on('loadSnapshot',function(w){if(v.mode)t(v).loadSnapshotData(w.data);});v.on('mode',function(w){w.removeListener();i.webkit&&v.container.on('focus',function(){v.focus();});if(v.config.startupFocus)v.focus();setTimeout(function(){v.fireOnce('instanceReady');h.fire('instanceReady',null,v);},0);});}});h.editor.prototype.mode='';h.editor.prototype.addMode=function(v,w){w.name=v;(this._.modes||(this._.modes={}))[v]=w;};h.editor.prototype.setMode=function(v){var w,x=this.getThemeSpace('contents'),y=this.checkDirty();if(this.mode){if(v==this.mode)return;this.fire('beforeModeUnload');var z=t(this);w=z.getData();z.unload(x);this.mode='';}x.setHtml('');var A=t(this,v);if(!A)throw '[CKEDITOR.editor.setMode] Unknown mode "'+v+'".';if(!y)this.on('mode',function(){this.resetDirty();this.removeListener('mode',arguments.callee);});A.load(x,typeof w!='string'?this.getData():w);};h.editor.prototype.focus=function(){var v=t(this);if(v)v.focus();};})();p.startupMode='wysiwyg';p.editingBlock=true;(function(){function t(){var D=this;try{var A=D.getSelection();if(!A||!A.document.getWindow().$)return;var B=A.getStartElement(),C=new k.elementPath(B);if(!C.compare(D._.selectionPreviousPath)){D._.selectionPreviousPath=C;D.fire('selectionChange',{selection:A,path:C,element:B});}}catch(E){}};var u,v;function w(){v=true;if(u)return;x.call(this);u=l.setTimeout(x,200,this);};function x(){u=null;if(v){l.setTimeout(t,0,this);v=false;}};var y={modes:{wysiwyg:1,source:1},exec:function(A){switch(A.mode){case 'wysiwyg':A.document.$.execCommand('SelectAll',false,null);break;case 'source':var B=A.textarea.$;if(j)B.createTextRange().execCommand('SelectAll');else{B.selectionStart=0;B.selectionEnd=B.value.length;}B.focus();}},canUndo:false};q.add('selection',{init:function(A){A.on('contentDom',function(){var B=A.document,C=B.getBody(),D=B.getDocumentElement();
if(j){var E,F,G=1;C.on('focusin',function(K){if(K.data.$.srcElement.nodeName!='BODY')return;if(E){var L=B.getCustomData('cke_locked_selection');if(G&&!L)try{E.select();}catch(M){}E=null;}});C.on('focus',function(){F=1;J();});C.on('beforedeactivate',function(K){if(K.data.$.toElement)return;F=0;G=1;});if(j&&i.version<8)A.on('blur',function(K){try{A.document&&A.document.$.selection.empty();}catch(L){}});D.on('mousedown',function(){G=0;});D.on('mouseup',function(){G=1;});if(j&&(i.ie7Compat||i.version<8||i.quirks))D.on('click',function(K){if(K.data.getTarget().getName()=='html')A.getSelection().getRanges()[0].select();});var H;C.on('mousedown',function(K){if(K.data.$.button==2){var L=A.document.$.selection;if(L.type=='None')H=A.window.getScrollPosition();}I();});C.on('mouseup',function(K){if(K.data.$.button==2&&H){A.document.$.documentElement.scrollLeft=H.x;A.document.$.documentElement.scrollTop=H.y;}H=null;F=1;setTimeout(function(){J(true);},0);});C.on('keydown',I);C.on('keyup',function(){F=1;J();});B.on('selectionchange',J);function I(){F=0;};function J(K){if(F){var L=A.document,M=A.getSelection(),N=M&&M.getNative();if(K&&N&&N.type=='None')if(!L.$.queryCommandEnabled('InsertImage')){l.setTimeout(J,50,this,true);return;}var O;if(N&&N.type&&N.type!='Control'&&(O=N.createRange())&&(O=O.parentElement())&&(O=O.nodeName)&&O.toLowerCase() in {input:1,textarea:1})return;E=N&&M.getRanges()[0];w.call(A);}};}else{B.on('mouseup',w,A);B.on('keyup',w,A);}});A.addCommand('selectAll',y);A.ui.addButton('SelectAll',{label:A.lang.selectAll,command:'selectAll'});A.selectionChange=w;}});h.editor.prototype.getSelection=function(){return this.document&&this.document.getSelection();};h.editor.prototype.forceNextSelectionCheck=function(){delete this._.selectionPreviousPath;};n.prototype.getSelection=function(){var A=new k.selection(this);return!A||A.isInvalid?null:A;};h.SELECTION_NONE=1;h.SELECTION_TEXT=2;h.SELECTION_ELEMENT=3;k.selection=function(A){var D=this;var B=A.getCustomData('cke_locked_selection');if(B)return B;D.document=A;D.isLocked=0;D._={cache:{}};if(j){var C=D.getNative().createRange();if(!C||C.item&&C.item(0).ownerDocument!=D.document.$||C.parentElement&&C.parentElement().ownerDocument!=D.document.$)D.isInvalid=true;}return D;};var z={img:1,hr:1,li:1,table:1,tr:1,td:1,th:1,embed:1,object:1,ol:1,ul:1,a:1,input:1,form:1,select:1,textarea:1,button:1,fieldset:1,th:1,thead:1,tfoot:1};k.selection.prototype={getNative:j?function(){return this._.cache.nativeSel||(this._.cache.nativeSel=this.document.$.selection);
}:function(){return this._.cache.nativeSel||(this._.cache.nativeSel=this.document.getWindow().$.getSelection());},getType:j?function(){var A=this._.cache;if(A.type)return A.type;var B=1;try{var C=this.getNative(),D=C.type;if(D=='Text')B=2;if(D=='Control')B=3;if(C.createRange().parentElement)B=2;}catch(E){}return A.type=B;}:function(){var A=this._.cache;if(A.type)return A.type;var B=2,C=this.getNative();if(!C)B=1;else if(C.rangeCount==1){var D=C.getRangeAt(0),E=D.startContainer;if(E==D.endContainer&&E.nodeType==1&&D.endOffset-D.startOffset==1&&z[E.childNodes[D.startOffset].nodeName.toLowerCase()])B=3;}return A.type=B;},getRanges:(function(){var A=j?(function(){var B=function(C,D){C=C.duplicate();C.collapse(D);var E=C.parentElement(),F=E.childNodes,G;for(var H=0;H<F.length;H++){var I=F[H];if(I.nodeType==1){G=C.duplicate();G.moveToElementText(I);var J=G.compareEndPoints('StartToStart',C),K=G.compareEndPoints('EndToStart',C);G.collapse();if(J>0)break;else if(!J||K==1&&J==-1)return{container:E,offset:H};else if(!K)return{container:E,offset:H+1};G=null;}}if(!G){G=C.duplicate();G.moveToElementText(E);G.collapse(false);}G.setEndPoint('StartToStart',C);var L=G.text.replace(/(\r\n|\r)/g,'\n').length;try{while(L>0)L-=F[--H].nodeValue.length;}catch(M){L=0;}if(L===0)return{container:E,offset:H};else return{container:F[H],offset:-L};};return function(){var M=this;var C=M.getNative(),D=C&&C.createRange(),E=M.getType(),F;if(!C)return[];if(E==2){F=new k.range(M.document);var G=B(D,true);F.setStart(new k.node(G.container),G.offset);G=B(D);F.setEnd(new k.node(G.container),G.offset);if(F.endContainer.getPosition(F.startContainer)&4&&F.endOffset<=F.startContainer.getIndex())F.collapse();return[F];}else if(E==3){var H=[];for(var I=0;I<D.length;I++){var J=D.item(I),K=J.parentNode,L=0;F=new k.range(M.document);for(;L<K.childNodes.length&&K.childNodes[L]!=J;L++){}F.setStart(new k.node(K),L);F.setEnd(new k.node(K),L+1);H.push(F);}return H;}return[];};})():function(){var B=[],C,D=this.document,E=this.getNative();if(!E)return B;if(!E.rangeCount){C=new k.range(D);C.moveToElementEditStart(D.getBody());B.push(C);}for(var F=0;F<E.rangeCount;F++){var G=E.getRangeAt(F);C=new k.range(D);C.setStart(new k.node(G.startContainer),G.startOffset);C.setEnd(new k.node(G.endContainer),G.endOffset);B.push(C);}return B;};return function(B){var C=this._.cache;if(C.ranges&&!B)return C.ranges;else if(!C.ranges)C.ranges=new k.rangeList(A.call(this));if(B){var D=C.ranges;for(var E=0;E<D.length;E++){var F=D[E],G=F.getCommonAncestor();
if(G.isReadOnly())D.splice(E,1);if(F.collapsed)continue;var H=F.startContainer,I=F.endContainer,J=F.startOffset,K=F.endOffset,L=F.clone(),M;if(M=H.isReadOnly())F.setStartAfter(M);if(H&&H.type==3)if(J>=H.getLength())L.setStartAfter(H);else L.setStartBefore(H);if(I&&I.type==3)if(!K)L.setEndBefore(I);else L.setEndAfter(I);var N=new k.walker(L);N.evaluator=function(O){if(O.type==1&&O.getAttribute('contenteditable')=='false'){var P=F.clone();F.setEndBefore(O);if(F.collapsed)D.splice(E--,1);if(!(O.getPosition(L.endContainer)&16)){P.setStartAfter(O);if(!P.collapsed)D.splice(E+1,0,P);}return true;}return false;};N.next();}}return C.ranges;};})(),getStartElement:function(){var H=this;var A=H._.cache;if(A.startElement!==undefined)return A.startElement;var B,C=H.getNative();switch(H.getType()){case 3:return H.getSelectedElement();case 2:var D=H.getRanges()[0];if(D){if(!D.collapsed){D.optimize();while(1){var E=D.startContainer,F=D.startOffset;if(F==(E.getChildCount?E.getChildCount():E.getLength())&&!E.isBlockBoundary())D.setStartAfter(E);else break;}B=D.startContainer;if(B.type!=1)return B.getParent();B=B.getChild(D.startOffset);if(!B||B.type!=1)B=D.startContainer;else{var G=B.getFirst();while(G&&G.type==1){B=G;G=G.getFirst();}}}else{B=D.startContainer;if(B.type!=1)B=B.getParent();}B=B.$;}}return A.startElement=B?new o(B):null;},getSelectedElement:function(){var A=this._.cache;if(A.selectedElement!==undefined)return A.selectedElement;var B=this,C=l.tryThese(function(){return B.getNative().createRange().item(0);},function(){var D=B.getRanges()[0],E,F;for(var G=2;G&&!((E=D.getEnclosedNode())&&E.type==1&&z[E.getName()]&&(F=E));G--)D.shrink(1);return F.$;});return A.selectedElement=C?new o(C):null;},lock:function(){var A=this;A.getRanges();A.getStartElement();A.getSelectedElement();A._.cache.nativeSel={};A.isLocked=1;A.document.setCustomData('cke_locked_selection',A);},unlock:function(A){var F=this;var B=F.document,C=B.getCustomData('cke_locked_selection');if(C){B.setCustomData('cke_locked_selection',null);if(A){var D=C.getSelectedElement(),E=!D&&C.getRanges();F.isLocked=0;F.reset();B.getBody().focus();if(D)F.selectElement(D);else F.selectRanges(E);}}if(!C||!A){F.isLocked=0;F.reset();}},reset:function(){this._.cache={};},selectElement:function(A){var D=this;if(D.isLocked){var B=new k.range(D.document);B.setStartBefore(A);B.setEndAfter(A);D._.cache.selectedElement=A;D._.cache.startElement=A;D._.cache.ranges=new k.rangeList(B);D._.cache.type=3;return;}if(j){D.getNative().empty();
try{B=D.document.$.body.createControlRange();B.addElement(A.$);B.select();}catch(E){B=D.document.$.body.createTextRange();B.moveToElementText(A.$);B.select();}finally{D.document.fire('selectionchange');}D.reset();}else{B=D.document.$.createRange();B.selectNode(A.$);var C=D.getNative();C.removeAllRanges();C.addRange(B);D.reset();}},selectRanges:function(A){var K=this;if(K.isLocked){K._.cache.selectedElement=null;K._.cache.startElement=A[0]&&A[0].getTouchedStartNode();K._.cache.ranges=new k.rangeList(A);K._.cache.type=2;return;}if(j){if(A.length>1){var B=A[A.length-1];A[0].setEnd(B.endContainer,B.endOffset);A.length=1;}if(A[0])A[0].select();K.reset();}else{var C=K.getNative();if(A.length)C.removeAllRanges();for(var D=0;D<A.length;D++){if(D<A.length-1){var E=A[D],F=A[D+1],G=E.clone();G.setStart(E.endContainer,E.endOffset);G.setEnd(F.startContainer,F.startOffset);if(!G.collapsed){G.shrink(1,true);if(G.getCommonAncestor().isReadOnly()){F.setStart(E.startContainer,E.startOffset);A.splice(D--,1);continue;}}}var H=A[D],I=K.document.$.createRange(),J=H.startContainer;if(H.collapsed&&(i.opera||i.gecko&&i.version<10900)&&J.type==1&&!J.getChildCount())J.appendText('');I.setStart(J.$,H.startOffset);I.setEnd(H.endContainer.$,H.endOffset);C.addRange(I);}K.reset();}},createBookmarks:function(A){return this.getRanges().createBookmarks(A);},createBookmarks2:function(A){return this.getRanges().createBookmarks2(A);},selectBookmarks:function(A){var B=[];for(var C=0;C<A.length;C++){var D=new k.range(this.document);D.moveToBookmark(A[C]);B.push(D);}this.selectRanges(B);return this;},getCommonAncestor:function(){var A=this.getRanges(),B=A[0].startContainer,C=A[A.length-1].endContainer;return B.getCommonAncestor(C);},scrollIntoView:function(){var A=this.getStartElement();A.scrollIntoView();}};})();(function(){var t=k.walker.whitespaces(true),u=/\ufeff|\u00a0/,v={table:1,tbody:1,tr:1};k.range.prototype.select=j?function(w){var G=this;var x=G.collapsed,y,z;if(G.startContainer.type==1&&G.startContainer.getName() in v||G.endContainer.type==1&&G.endContainer.getName() in v)G.shrink(1,true);var A=G.createBookmark(),B=A.startNode,C;if(!x)C=A.endNode;var D=G.document.$.body.createTextRange();D.moveToElementText(B.$);D.moveStart('character',1);if(C){var E=G.document.$.body.createTextRange();E.moveToElementText(C.$);D.setEndPoint('EndToEnd',E);D.moveEnd('character',-1);}else{var F=B.getNext(t);y=!(F&&F.getText&&F.getText().match(u))&&(w||!B.hasPrevious()||B.getPrevious().is&&B.getPrevious().is('br'));
z=G.document.createElement('span');z.setHtml('&#65279;');z.insertBefore(B);if(y)G.document.createText('\ufeff').insertBefore(B);}G.setStartBefore(B);B.remove();if(x){if(y){D.moveStart('character',-1);D.select();G.document.$.selection.clear();}else D.select();G.moveToPosition(z,3);z.remove();}else{G.setEndBefore(C);C.remove();D.select();}G.document.fire('selectionchange');}:function(){var z=this;var w=z.startContainer;if(z.collapsed&&w.type==1&&!w.getChildCount())w.append(new k.text(''));var x=z.document.$.createRange();x.setStart(w.$,z.startOffset);try{x.setEnd(z.endContainer.$,z.endOffset);}catch(A){if(A.toString().indexOf('NS_ERROR_ILLEGAL_VALUE')>=0){z.collapse(true);x.setEnd(z.endContainer.$,z.endOffset);}else throw A;}var y=z.document.getSelection().getNative();y.removeAllRanges();y.addRange(x);};})();(function(){var t={elements:{$:function(u){var v=u.attributes,w=v&&v._cke_realelement,x=w&&new h.htmlParser.fragment.fromHtml(decodeURIComponent(w)),y=x&&x.children[0];if(y&&u.attributes._cke_resizable){var z=u.attributes.style;if(z){var A=/(?:^|\s)width\s*:\s*(\d+)/i.exec(z),B=A&&A[1];A=/(?:^|\s)height\s*:\s*(\d+)/i.exec(z);var C=A&&A[1];if(B)y.attributes.width=B;if(C)y.attributes.height=C;}}return y;}}};q.add('fakeobjects',{requires:['htmlwriter'],afterInit:function(u){var v=u.dataProcessor,w=v&&v.htmlFilter;if(w)w.addRules(t);}});})();h.editor.prototype.createFakeElement=function(t,u,v,w){var x=this.lang.fakeobjects,y={'class':u,src:h.getUrl('images/spacer.gif'),_cke_realelement:encodeURIComponent(t.getOuterHtml()),_cke_real_node_type:t.type,alt:x[v]||x.unknown,align:t.getAttribute('align')||''};if(v)y._cke_real_element_type=v;if(w)y._cke_resizable=w;return this.document.createElement('img',{attributes:y});};h.editor.prototype.createFakeParserElement=function(t,u,v,w){var x=this.lang.fakeobjects,y,z=new h.htmlParser.basicWriter();t.writeHtml(z);y=z.getHtml();var A={'class':u,src:h.getUrl('images/spacer.gif'),_cke_realelement:encodeURIComponent(y),_cke_real_node_type:t.type,alt:x[v]||x.unknown,align:t.attributes.align||''};if(v)A._cke_real_element_type=v;if(w)A._cke_resizable=w;return new h.htmlParser.element('img',A);};h.editor.prototype.restoreRealElement=function(t){if(t.getAttribute('_cke_real_node_type')!=1)return null;return o.createFromHtml(decodeURIComponent(t.getAttribute('_cke_realelement')),this.document);};q.add('richcombo',{requires:['floatpanel','listblock','button'],beforeInit:function(t){t.ui.addHandler(3,r.richCombo.handler);}});h.UI_RICHCOMBO=3;
r.richCombo=l.createClass({$:function(t){var v=this;l.extend(v,t,{title:t.label,modes:{wysiwyg:1}});var u=v.panel||{};delete v.panel;v.id=l.getNextNumber();v.document=u&&u.parent&&u.parent.getDocument()||h.document;u.className=(u.className||'')+' cke_rcombopanel';u.block={multiSelect:u.multiSelect,attributes:u.attributes};v._={panelDefinition:u,items:{},state:2};},statics:{handler:{create:function(t){return new r.richCombo(t);}}},proto:{renderHtml:function(t){var u=[];this.render(t,u);return u.join('');},render:function(t,u){var v=i,w='cke_'+this.id,x=l.addFunction(function(A){var D=this;var B=D._;if(B.state==0)return;D.createPanel(t);if(B.on){B.panel.hide();return;}!B.committed&&D.commit();var C=D.getValue();if(C)B.list.mark(C);else B.list.unmarkAll();B.panel.showBlock(D.id,new o(A),4);},this),y={id:w,combo:this,focus:function(){var A=h.document.getById(w).getChild(1);A.focus();},clickFn:x};t.on('mode',function(){this.setState(this.modes[t.mode]?2:0);},this);var z=l.addFunction(function(A,B){A=new k.event(A);var C=A.getKeystroke();switch(C){case 13:case 32:case 40:l.callFunction(x,B);break;default:y.onkey(y,C);}A.preventDefault();});y.keyDownFn=z;u.push('<span class="cke_rcombo">','<span id=',w);if(this.className)u.push(' class="',this.className,' cke_off"');u.push('>','<span id="'+w+'_label" class=cke_label>',this.label,'</span>','<a hidefocus=true title="',this.title,'" tabindex="-1"',v.gecko&&v.version>=10900&&!v.hc?'':" href=\"javascript:void('"+this.label+"')\"",' role="button" aria-labelledby="',w,'_label" aria-describedby="',w,'_text" aria-haspopup="true"');if(i.opera||i.gecko&&i.mac)u.push(' onkeypress="return false;"');if(i.gecko)u.push(' onblur="this.style.cssText = this.style.cssText;"');u.push(' onkeydown="CKEDITOR.tools.callFunction( ',z,', event, this );" onclick="CKEDITOR.tools.callFunction(',x,', this); return false;"><span><span id="'+w+'_text" class="cke_text cke_inline_label">'+this.label+'</span>'+'</span>'+'<span class=cke_openbutton>'+(i.hc?'<span>&#9660;</span>':'')+'</span>'+'</a>'+'</span>'+'</span>');if(this.onRender)this.onRender();return y;},createPanel:function(t){if(this._.panel)return;var u=this._.panelDefinition,v=this._.panelDefinition.block,w=u.parent||h.document.getBody(),x=new r.floatPanel(t,w,u),y=x.addListBlock(this.id,v),z=this;x.onShow=function(){if(z.className)this.element.getFirst().addClass(z.className+'_panel');z.setState(1);y.focus(!z.multiSelect&&z.getValue());z._.on=1;if(z.onOpen)z.onOpen();};x.onHide=function(A){if(z.className)this.element.getFirst().removeClass(z.className+'_panel');
z.setState(z.modes&&z.modes[t.mode]?2:0);z._.on=0;if(!A&&z.onClose)z.onClose();};x.onEscape=function(){x.hide();z.document.getById('cke_'+z.id).getFirst().getNext().focus();};y.onClick=function(A,B){z.document.getWindow().focus();if(z.onClick)z.onClick.call(z,A,B);if(B)z.setValue(A,z._.items[A]);else z.setValue('');x.hide();};this._.panel=x;this._.list=y;x.getBlock(this.id).onHide=function(){z._.on=0;z.setState(2);};if(this.init)this.init();},setValue:function(t,u){var w=this;w._.value=t;var v=w.document.getById('cke_'+w.id+'_text');if(!(t||u)){u=w.label;v.addClass('cke_inline_label');}else v.removeClass('cke_inline_label');v.setHtml(typeof u!='undefined'?u:t);},getValue:function(){return this._.value||'';},unmarkAll:function(){this._.list.unmarkAll();},mark:function(t){this._.list.mark(t);},hideItem:function(t){this._.list.hideItem(t);},hideGroup:function(t){this._.list.hideGroup(t);},showAll:function(){this._.list.showAll();},add:function(t,u,v){this._.items[t]=v||t;this._.list.add(t,u,v);},startGroup:function(t){this._.list.startGroup(t);},commit:function(){this._.list.commit();this._.committed=1;},setState:function(t){var u=this;if(u._.state==t)return;u.document.getById('cke_'+u.id).setState(t);u._.state=t;}}});r.prototype.addRichCombo=function(t,u){this.add(t,3,u);};q.add('htmlwriter');h.htmlWriter=l.createClass({base:h.htmlParser.basicWriter,$:function(){var v=this;v.base();v.indentationChars='\t';v.selfClosingEnd=' />';v.lineBreakChars='\n';v.forceSimpleAmpersand=0;v.sortAttributes=1;v._.indent=0;v._.indentation='';v._.inPre=0;v._.rules={};var t=m;for(var u in l.extend({},t.$nonBodyContent,t.$block,t.$listItem,t.$tableContent))v.setRules(u,{indent:1,breakBeforeOpen:1,breakAfterOpen:1,breakBeforeClose:!t[u]['#'],breakAfterClose:1});v.setRules('br',{breakAfterOpen:1});v.setRules('title',{indent:0,breakAfterOpen:0});v.setRules('style',{indent:0,breakBeforeClose:1});v.setRules('pre',{indent:0});},proto:{openTag:function(t,u){var w=this;var v=w._.rules[t];if(w._.indent)w.indentation();else if(v&&v.breakBeforeOpen){w.lineBreak();w.indentation();}w._.output.push('<',t);},openTagClose:function(t,u){var w=this;var v=w._.rules[t];if(u)w._.output.push(w.selfClosingEnd);else{w._.output.push('>');if(v&&v.indent)w._.indentation+=w.indentationChars;}if(v&&v.breakAfterOpen)w.lineBreak();t=='pre'&&(w._.inPre=1);},attribute:function(t,u){if(typeof u=='string'){this.forceSimpleAmpersand&&(u=u.replace(/&amp;/g,'&'));u=l.htmlEncodeAttr(u);}this._.output.push(' ',t,'="',u,'"');
},closeTag:function(t){var v=this;var u=v._.rules[t];if(u&&u.indent)v._.indentation=v._.indentation.substr(v.indentationChars.length);if(v._.indent)v.indentation();else if(u&&u.breakBeforeClose){v.lineBreak();v.indentation();}v._.output.push('</',t,'>');t=='pre'&&(v._.inPre=0);if(u&&u.breakAfterClose)v.lineBreak();},text:function(t){var u=this;if(u._.indent){u.indentation();!u._.inPre&&(t=l.ltrim(t));}u._.output.push(t);},comment:function(t){if(this._.indent)this.indentation();this._.output.push('<!--',t,'-->');},lineBreak:function(){var t=this;if(!t._.inPre&&t._.output.length>0)t._.output.push(t.lineBreakChars);t._.indent=1;},indentation:function(){var t=this;if(!t._.inPre)t._.output.push(t._.indentation);t._.indent=0;},setRules:function(t,u){var v=this._.rules[t];if(v)l.extend(v,u,true);else this._.rules[t]=u;}}});q.add('menubutton',{requires:['button','contextmenu'],beforeInit:function(t){t.ui.addHandler(5,r.menuButton.handler);}});h.UI_MENUBUTTON=5;(function(){var t=function(u){var v=this._;if(v.state===0)return;v.previousState=v.state;var w=v.menu;if(!w){w=v.menu=new q.contextMenu(u);w.definition.panel.attributes['aria-label']=u.lang.common.options;w.onHide=l.bind(function(){this.setState(this.modes&&this.modes[u.mode]?v.previousState:0);},this);if(this.onMenu)w.addListener(this.onMenu);}if(v.on){w.hide();return;}this.setState(1);w.show(h.document.getById(this._.id),4);};r.menuButton=l.createClass({base:r.button,$:function(u){var v=u.panel;delete u.panel;this.base(u);this.hasArrow=true;this.click=t;},statics:{handler:{create:function(u){return new r.menuButton(u);}}}});})();q.add('dialogui');(function(){var t=function(B){var E=this;E._||(E._={});E._['default']=E._.initValue=B['default']||'';E._.required=B.required||false;var C=[E._];for(var D=1;D<arguments.length;D++)C.push(arguments[D]);C.push(true);l.extend.apply(l,C);return E._;},u={build:function(B,C,D){return new r.dialog.textInput(B,C,D);}},v={build:function(B,C,D){return new r.dialog[C.type](B,C,D);}},w={build:function(B,C,D){var E=C.children,F,G=[],H=[];for(var I=0;I<E.length&&(F=E[I]);I++){var J=[];G.push(J);H.push(h.dialog._.uiElementBuilders[F.type].build(B,F,J));}return new r.dialog[C.type](B,H,G,D,C);}},x={isChanged:function(){return this.getValue()!=this.getInitValue();},reset:function(B){this.setValue(this.getInitValue(),B);},setInitValue:function(){this._.initValue=this.getValue();},resetInitValue:function(){this._.initValue=this._['default'];},getInitValue:function(){return this._.initValue;
}},y=l.extend({},r.dialog.uiElement.prototype.eventProcessors,{onChange:function(B,C){if(!this._.domOnChangeRegistered){B.on('load',function(){this.getInputElement().on('change',function(){if(!B.parts.dialog.isVisible())return;this.fire('change',{value:this.getValue()});},this);},this);this._.domOnChangeRegistered=true;}this.on('change',C);}},true),z=/^on([A-Z]\w+)/,A=function(B){for(var C in B){if(z.test(C)||C=='title'||C=='type')delete B[C];}return B;};l.extend(r.dialog,{labeledElement:function(B,C,D,E){if(arguments.length<4)return;var F=t.call(this,C);F.labelId=l.getNextId()+'_label';var G=this._.children=[],H=function(){var I=[],J=C.required?' cke_required':'';if(C.labelLayout!='horizontal')I.push('<label class="cke_dialog_ui_labeled_label'+J+'" ',' id="'+F.labelId+'"',' for="'+F.inputId+'"',' style="'+C.labelStyle+'">',C.label,'</label>','<div class="cke_dialog_ui_labeled_content" role="presentation">',E.call(this,B,C),'</div>');else{var K={type:'hbox',widths:C.widths,padding:0,children:[{type:'html',html:'<label class="cke_dialog_ui_labeled_label'+J+'"'+' id="'+F.labelId+'"'+' for="'+F.inputId+'"'+' style="'+C.labelStyle+'">'+l.htmlEncode(C.label)+'</span>'},{type:'html',html:'<span class="cke_dialog_ui_labeled_content">'+E.call(this,B,C)+'</span>'}]};h.dialog._.uiElementBuilders.hbox.build(B,K,I);}return I.join('');};r.dialog.uiElement.call(this,B,C,D,'div',null,{role:'presentation'},H);},textInput:function(B,C,D){if(arguments.length<3)return;t.call(this,C);var E=this._.inputId=l.getNextId()+'_textInput',F={'class':'cke_dialog_ui_input_'+C.type,id:E,type:'text'},G;if(C.validate)this.validate=C.validate;if(C.maxLength)F.maxlength=C.maxLength;if(C.size)F.size=C.size;if(C.controlStyle)F.style=C.controlStyle;var H=this,I=false;B.on('load',function(){H.getInputElement().on('keydown',function(K){if(K.data.getKeystroke()==13)I=true;});H.getInputElement().on('keyup',function(K){if(K.data.getKeystroke()==13&&I){B.getButton('ok')&&setTimeout(function(){B.getButton('ok').click();},0);I=false;}},null,null,1000);});var J=function(){var K=['<div class="cke_dialog_ui_input_',C.type,'" role="presentation"'];if(C.width)K.push('style="width:'+C.width+'" ');K.push('><input ');F['aria-labelledby']=this._.labelId;this._.required&&(F['aria-required']=this._.required);for(var L in F)K.push(L+'="'+F[L]+'" ');K.push(' /></div>');return K.join('');};r.dialog.labeledElement.call(this,B,C,D,J);},textarea:function(B,C,D){if(arguments.length<3)return;t.call(this,C);var E=this,F=this._.inputId=l.getNextId()+'_textarea',G={};
if(C.validate)this.validate=C.validate;G.rows=C.rows||5;G.cols=C.cols||20;var H=function(){G['aria-labelledby']=this._.labelId;this._.required&&(G['aria-required']=this._.required);var I=['<div class="cke_dialog_ui_input_textarea" role="presentation"><textarea class="cke_dialog_ui_input_textarea" id="',F,'" '];for(var J in G)I.push(J+'="'+l.htmlEncode(G[J])+'" ');I.push('>',l.htmlEncode(E._['default']),'</textarea></div>');return I.join('');};r.dialog.labeledElement.call(this,B,C,D,H);},checkbox:function(B,C,D){if(arguments.length<3)return;var E=t.call(this,C,{'default':!!C['default']});if(C.validate)this.validate=C.validate;var F=function(){var G=l.extend({},C,{id:C.id?C.id+'_checkbox':l.getNextId()+'_checkbox'},true),H=[],I=l.getNextId()+'_label',J={'class':'cke_dialog_ui_checkbox_input',type:'checkbox','aria-labelledby':I};A(G);if(C['default'])J.checked='checked';if(typeof G.controlStyle!='undefined')G.style=G.controlStyle;E.checkbox=new r.dialog.uiElement(B,G,H,'input',null,J);H.push(' <label id="',I,'" for="',J.id,'">',l.htmlEncode(C.label),'</label>');return H.join('');};r.dialog.uiElement.call(this,B,C,D,'span',null,null,F);},radio:function(B,C,D){if(arguments.length<3)return;t.call(this,C);if(!this._['default'])this._['default']=this._.initValue=C.items[0][1];if(C.validate)this.validate=C.valdiate;var E=[],F=this,G=function(){var H=[],I=[],J={'class':'cke_dialog_ui_radio_item','aria-labelledby':this._.labelId},K=C.id?C.id+'_radio':l.getNextId()+'_radio';for(var L=0;L<C.items.length;L++){var M=C.items[L],N=M[2]!==undefined?M[2]:M[0],O=M[1]!==undefined?M[1]:M[0],P=l.getNextId()+'_radio_input',Q=P+'_label',R=l.extend({},C,{id:P,title:null,type:null},true),S=l.extend({},R,{title:N},true),T={type:'radio','class':'cke_dialog_ui_radio_input',name:K,value:O,'aria-labelledby':Q},U=[];if(F._['default']==O)T.checked='checked';A(R);A(S);if(typeof R.controlStyle!='undefined')R.style=R.controlStyle;E.push(new r.dialog.uiElement(B,R,U,'input',null,T));U.push(' ');new r.dialog.uiElement(B,S,U,'label',null,{id:Q,'for':T.id},M[0]);H.push(U.join(''));}new r.dialog.hbox(B,[],H,I);return I.join('');};r.dialog.labeledElement.call(this,B,C,D,G);this._.children=E;},button:function(B,C,D){if(!arguments.length)return;if(typeof C=='function')C=C(B.getParentEditor());t.call(this,C,{disabled:C.disabled||false});h.event.implementOn(this);var E=this;B.on('load',function(H){var I=this.getElement();(function(){I.on('click',function(J){E.fire('click',{dialog:E.getDialog()});J.data.preventDefault();
});I.on('keydown',function(J){if(J.data.getKeystroke() in {32:1}){E.click();J.data.preventDefault();}});})();I.unselectable();},this);var F=l.extend({},C);delete F.style;var G=l.getNextId()+'_label';r.dialog.uiElement.call(this,B,F,D,'a',null,{style:C.style,href:'javascript:void(0)',title:C.label,hidefocus:'true','class':C['class'],role:'button','aria-labelledby':G},'<span id="'+G+'" class="cke_dialog_ui_button">'+l.htmlEncode(C.label)+'</span>');},select:function(B,C,D){if(arguments.length<3)return;var E=t.call(this,C);if(C.validate)this.validate=C.validate;E.inputId=l.getNextId()+'_select';var F=function(){var G=l.extend({},C,{id:C.id?C.id+'_select':l.getNextId()+'_select'},true),H=[],I=[],J={id:E.inputId,'class':'cke_dialog_ui_input_select','aria-labelledby':this._.labelId};if(C.size!=undefined)J.size=C.size;if(C.multiple!=undefined)J.multiple=C.multiple;A(G);for(var K=0,L;K<C.items.length&&(L=C.items[K]);K++)I.push('<option value="',l.htmlEncode(L[1]!==undefined?L[1]:L[0]),'" /> ',l.htmlEncode(L[0]));if(typeof G.controlStyle!='undefined')G.style=G.controlStyle;E.select=new r.dialog.uiElement(B,G,H,'select',null,J,I.join(''));return H.join('');};r.dialog.labeledElement.call(this,B,C,D,F);},file:function(B,C,D){if(arguments.length<3)return;if(C['default']===undefined)C['default']='';var E=l.extend(t.call(this,C),{definition:C,buttons:[]});if(C.validate)this.validate=C.validate;var F=function(){E.frameId=l.getNextId()+'_fileInput';var G=i.isCustomDomain(),H=['<iframe frameborder="0" allowtransparency="0" class="cke_dialog_ui_input_file" id="',E.frameId,'" title="',C.label,'" src="javascript:void('];H.push(G?"(function(){document.open();document.domain='"+document.domain+"';"+'document.close();'+'})()':'0');H.push(')"></iframe>');return H.join('');};B.on('load',function(){var G=h.document.getById(E.frameId),H=G.getParent();H.addClass('cke_dialog_ui_input_file');});r.dialog.labeledElement.call(this,B,C,D,F);},fileButton:function(B,C,D){if(arguments.length<3)return;var E=t.call(this,C),F=this;if(C.validate)this.validate=C.validate;var G=l.extend({},C),H=G.onClick;G.className=(G.className?G.className+' ':'')+'cke_dialog_ui_button';G.onClick=function(I){var J=C['for'];if(!H||H.call(this,I)!==false){B.getContentElement(J[0],J[1]).submit();this.disable();}};B.on('load',function(){B.getContentElement(C['for'][0],C['for'][1])._.buttons.push(F);});r.dialog.button.call(this,B,G,D);},html:(function(){var B=/^\s*<[\w:]+\s+([^>]*)?>/,C=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,D=/\/$/;
return function(E,F,G){if(arguments.length<3)return;var H=[],I,J=F.html,K,L;if(J.charAt(0)!='<')J='<span>'+J+'</span>';var M=F.focus;if(M){var N=this.focus;this.focus=function(){N.call(this);typeof M=='function'&&M.call(this);this.fire('focus');};if(F.isFocusable){var O=this.isFocusable;this.isFocusable=O;}this.keyboardFocusable=true;}r.dialog.uiElement.call(this,E,F,H,'span',null,null,'');I=H.join('');K=I.match(B);L=J.match(C)||['','',''];if(D.test(L[1])){L[1]=L[1].slice(0,-1);L[2]='/'+L[2];}G.push([L[1],' ',K[1]||'',L[2]].join(''));};})(),fieldset:function(B,C,D,E,F){var G=F.label,H=function(){var I=[];G&&I.push('<legend>'+G+'</legend>');for(var J=0;J<D.length;J++)I.push(D[J]);return I.join('');};this._={children:C};r.dialog.uiElement.call(this,B,F,E,'fieldset',null,null,H);}},true);r.dialog.html.prototype=new r.dialog.uiElement();r.dialog.labeledElement.prototype=l.extend(new r.dialog.uiElement(),{setLabel:function(B){var C=h.document.getById(this._.labelId);if(C.getChildCount()<1)new k.text(B,h.document).appendTo(C);else C.getChild(0).$.nodeValue=B;return this;},getLabel:function(){var B=h.document.getById(this._.labelId);if(!B||B.getChildCount()<1)return '';else return B.getChild(0).getText();},eventProcessors:y},true);r.dialog.button.prototype=l.extend(new r.dialog.uiElement(),{click:function(){var B=this;if(!B._.disabled)return B.fire('click',{dialog:B._.dialog});B.getElement().$.blur();return false;},enable:function(){this._.disabled=false;var B=this.getElement();B&&B.removeClass('cke_disabled');},disable:function(){this._.disabled=true;this.getElement().addClass('cke_disabled');},isVisible:function(){return this.getElement().getFirst().isVisible();},isEnabled:function(){return!this._.disabled;},eventProcessors:l.extend({},r.dialog.uiElement.prototype.eventProcessors,{onClick:function(B,C){this.on('click',C);}},true),accessKeyUp:function(){this.click();},accessKeyDown:function(){this.focus();},keyboardFocusable:true},true);r.dialog.textInput.prototype=l.extend(new r.dialog.labeledElement(),{getInputElement:function(){return h.document.getById(this._.inputId);},focus:function(){var B=this.selectParentTab();setTimeout(function(){var C=B.getInputElement();C&&C.$.focus();},0);},select:function(){var B=this.selectParentTab();setTimeout(function(){var C=B.getInputElement();if(C){C.$.focus();C.$.select();}},0);},accessKeyUp:function(){this.select();},setValue:function(B){!B&&(B='');return r.dialog.uiElement.prototype.setValue.apply(this,arguments);},keyboardFocusable:true},x,true);
r.dialog.textarea.prototype=new r.dialog.textInput();r.dialog.select.prototype=l.extend(new r.dialog.labeledElement(),{getInputElement:function(){return this._.select.getElement();},add:function(B,C,D){var E=new o('option',this.getDialog().getParentEditor().document),F=this.getInputElement().$;E.$.text=B;E.$.value=C===undefined||C===null?B:C;if(D===undefined||D===null){if(j)F.add(E.$);else F.add(E.$,null);}else F.add(E.$,D);return this;},remove:function(B){var C=this.getInputElement().$;C.remove(B);return this;},clear:function(){var B=this.getInputElement().$;while(B.length>0)B.remove(0);return this;},keyboardFocusable:true},x,true);r.dialog.checkbox.prototype=l.extend(new r.dialog.uiElement(),{getInputElement:function(){return this._.checkbox.getElement();},setValue:function(B,C){this.getInputElement().$.checked=B;!C&&this.fire('change',{value:B});},getValue:function(){return this.getInputElement().$.checked;},accessKeyUp:function(){this.setValue(!this.getValue());},eventProcessors:{onChange:function(B,C){if(!j)return y.onChange.apply(this,arguments);else{B.on('load',function(){var D=this._.checkbox.getElement();D.on('propertychange',function(E){E=E.data.$;if(E.propertyName=='checked')this.fire('change',{value:D.$.checked});},this);},this);this.on('change',C);}return null;}},keyboardFocusable:true},x,true);r.dialog.radio.prototype=l.extend(new r.dialog.uiElement(),{setValue:function(B,C){var D=this._.children,E;for(var F=0;F<D.length&&(E=D[F]);F++)E.getElement().$.checked=E.getValue()==B;!C&&this.fire('change',{value:B});},getValue:function(){var B=this._.children;for(var C=0;C<B.length;C++){if(B[C].getElement().$.checked)return B[C].getValue();}return null;},accessKeyUp:function(){var B=this._.children,C;for(C=0;C<B.length;C++){if(B[C].getElement().$.checked){B[C].getElement().focus();return;}}B[0].getElement().focus();},eventProcessors:{onChange:function(B,C){if(!j)return y.onChange.apply(this,arguments);else{B.on('load',function(){var D=this._.children,E=this;for(var F=0;F<D.length;F++){var G=D[F].getElement();G.on('propertychange',function(H){H=H.data.$;if(H.propertyName=='checked'&&this.$.checked)E.fire('change',{value:this.getAttribute('value')});});}},this);this.on('change',C);}return null;}},keyboardFocusable:true},x,true);r.dialog.file.prototype=l.extend(new r.dialog.labeledElement(),x,{getInputElement:function(){var B=h.document.getById(this._.frameId).getFrameDocument();return B.$.forms.length>0?new o(B.$.forms[0].elements[0]):this.getElement();
},submit:function(){this.getInputElement().getParent().$.submit();return this;},getAction:function(){return this.getInputElement().getParent().$.action;},registerEvents:function(B){var C=/^on([A-Z]\w+)/,D,E=function(G,H,I,J){G.on('formLoaded',function(){G.getInputElement().on(I,J,G);});};for(var F in B){if(!(D=F.match(C)))continue;if(this.eventProcessors[F])this.eventProcessors[F].call(this,this._.dialog,B[F]);else E(this,this._.dialog,D[1].toLowerCase(),B[F]);}return this;},reset:function(){var B=this._,C=h.document.getById(B.frameId),D=C.getFrameDocument(),E=B.definition,F=B.buttons,G=this.formLoadedNumber,H=this.formUnloadNumber,I=B.dialog._.editor.lang.dir,J=B.dialog._.editor.langCode;if(!G){G=this.formLoadedNumber=l.addFunction(function(){this.fire('formLoaded');},this);H=this.formUnloadNumber=l.addFunction(function(){this.getInputElement().clearCustomData();},this);this.getDialog()._.editor.on('destroy',function(){l.removeFunction(G);l.removeFunction(H);});}function K(){D.$.open();if(i.isCustomDomain())D.$.domain=document.domain;var L='';if(E.size)L=E.size-(j?7:0);D.$.write(['<html dir="'+I+'" lang="'+J+'"><head><title></title></head><body style="margin: 0; overflow: hidden; background: transparent;">','<form enctype="multipart/form-data" method="POST" dir="'+I+'" lang="'+J+'" action="',l.htmlEncode(E.action),'">','<input type="file" name="',l.htmlEncode(E.id||'cke_upload'),'" size="',l.htmlEncode(L>0?L:''),'" />','</form>','</body></html>','<script>window.parent.CKEDITOR.tools.callFunction('+G+');','window.onbeforeunload = function() {window.parent.CKEDITOR.tools.callFunction('+H+')}</script>'].join(''));D.$.close();for(var M=0;M<F.length;M++)F[M].enable();};if(i.gecko)setTimeout(K,500);else K();},getValue:function(){return this.getInputElement().$.value;},setInitValue:function(){this._.initValue='';},eventProcessors:{onChange:function(B,C){if(!this._.domOnChangeRegistered){this.on('formLoaded',function(){this.getInputElement().on('change',function(){this.fire('change',{value:this.getValue()});},this);},this);this._.domOnChangeRegistered=true;}this.on('change',C);}},keyboardFocusable:true},true);r.dialog.fileButton.prototype=new r.dialog.button();r.dialog.fieldset.prototype=l.clone(r.dialog.hbox.prototype);h.dialog.addUIElement('text',u);h.dialog.addUIElement('password',u);h.dialog.addUIElement('textarea',v);h.dialog.addUIElement('checkbox',v);h.dialog.addUIElement('radio',v);h.dialog.addUIElement('button',v);h.dialog.addUIElement('select',v);h.dialog.addUIElement('file',v);
h.dialog.addUIElement('fileButton',v);h.dialog.addUIElement('html',v);h.dialog.addUIElement('fieldset',w);})();q.add('panel',{beforeInit:function(t){t.ui.addHandler(2,r.panel.handler);}});h.UI_PANEL=2;r.panel=function(t,u){var v=this;if(u)l.extend(v,u);l.extend(v,{className:'',css:[]});v.id=l.getNextId();v.document=t;v._={blocks:{}};};r.panel.handler={create:function(t){return new r.panel(t);}};r.panel.prototype={renderHtml:function(t){var u=[];this.render(t,u);return u.join('');},render:function(t,u){var w=this;var v=w.id;u.push('<div class="',t.skinClass,'" lang="',t.langCode,'" role="presentation" style="display:none;z-index:'+(t.config.baseFloatZIndex+1)+'">'+'<div'+' id=',v,' dir=',t.lang.dir,' role="presentation" class="cke_panel cke_',t.lang.dir);if(w.className)u.push(' ',w.className);u.push('">');if(w.forceIFrame||w.css.length){u.push('<iframe id="',v,'_frame" frameborder="0" role="application" src="javascript:void(');u.push(i.isCustomDomain()?"(function(){document.open();document.domain='"+document.domain+"';"+'document.close();'+'})()':'0');u.push(')"></iframe>');}u.push('</div></div>');return v;},getHolderElement:function(){var t=this._.holder;if(!t){if(this.forceIFrame||this.css.length){var u=this.document.getById(this.id+'_frame'),v=u.getParent(),w=v.getAttribute('dir'),x=v.getParent().getAttribute('class'),y=v.getParent().getAttribute('lang'),z=u.getFrameDocument();z.$.open();if(i.isCustomDomain())z.$.domain=document.domain;var A=l.addFunction(l.bind(function(C){this.isLoaded=true;if(this.onLoad)this.onLoad();},this));z.$.write('<!DOCTYPE html><html dir="'+w+'" class="'+x+'_container" lang="'+y+'">'+'<head>'+'<style>.'+x+'_container{visibility:hidden}</style>'+'</head>'+'<body class="cke_'+w+' cke_panel_frame '+i.cssClass+'" style="margin:0;padding:0"'+' onload="( window.CKEDITOR || window.parent.CKEDITOR ).tools.callFunction('+A+');"></body>'+l.buildStyleHtml(this.css)+'</html>');z.$.close();var B=z.getWindow();B.$.CKEDITOR=h;z.on('key'+(i.opera?'press':'down'),function(C){var F=this;var D=C.data.getKeystroke(),E=F.document.getById(F.id).getAttribute('dir');if(F._.onKeyDown&&F._.onKeyDown(D)===false){C.data.preventDefault();return;}if(D==27||D==(E=='rtl'?39:37))if(F.onEscape&&F.onEscape(D)===false)C.data.preventDefault();},this);t=z.getBody();t.unselectable();}else t=this.document.getById(this.id);this._.holder=t;}return t;},addBlock:function(t,u){var v=this;u=v._.blocks[t]=u instanceof r.panel.block?u:new r.panel.block(v.getHolderElement(),u);
if(!v._.currentBlock)v.showBlock(t);return u;},getBlock:function(t){return this._.blocks[t];},showBlock:function(t){var u=this._.blocks,v=u[t],w=this._.currentBlock,x=this.forceIFrame?this.document.getById(this.id+'_frame'):this._.holder;x.getParent().getParent().disableContextMenu();if(w){x.removeAttributes(w.attributes);w.hide();}this._.currentBlock=v;x.setAttributes(v.attributes);h.fire('ariaWidget',x);v._.focusIndex=-1;this._.onKeyDown=v.onKeyDown&&l.bind(v.onKeyDown,v);v.onMark=function(y){x.setAttribute('aria-activedescendant',y.getId()+'_option');};v.onUnmark=function(){x.removeAttribute('aria-activedescendant');};v.show();return v;},destroy:function(){this.element&&this.element.remove();}};r.panel.block=l.createClass({$:function(t,u){var v=this;v.element=t.append(t.getDocument().createElement('div',{attributes:{tabIndex:-1,'class':'cke_panel_block',role:'presentation'},styles:{display:'none'}}));if(u)l.extend(v,u);if(!v.attributes.title)v.attributes.title=v.attributes['aria-label'];v.keys={};v._.focusIndex=-1;v.element.disableContextMenu();},_:{markItem:function(t){var w=this;if(t==-1)return;var u=w.element.getElementsByTag('a'),v=u.getItem(w._.focusIndex=t);if(i.webkit||i.opera)v.getDocument().getWindow().focus();v.focus();w.onMark&&w.onMark(v);}},proto:{show:function(){this.element.setStyle('display','');},hide:function(){var t=this;if(!t.onHide||t.onHide.call(t)!==true)t.element.setStyle('display','none');},onKeyDown:function(t){var y=this;var u=y.keys[t];switch(u){case 'next':var v=y._.focusIndex,w=y.element.getElementsByTag('a'),x;while(x=w.getItem(++v)){if(x.getAttribute('_cke_focus')&&x.$.offsetWidth){y._.focusIndex=v;x.focus();break;}}return false;case 'prev':v=y._.focusIndex;w=y.element.getElementsByTag('a');while(v>0&&(x=w.getItem(--v))){if(x.getAttribute('_cke_focus')&&x.$.offsetWidth){y._.focusIndex=v;x.focus();break;}}return false;case 'click':v=y._.focusIndex;x=v>=0&&y.element.getElementsByTag('a').getItem(v);if(x)x.$.click?x.$.click():x.$.onclick();return false;}return true;}}});q.add('listblock',{requires:['panel'],onLoad:function(){r.panel.prototype.addListBlock=function(t,u){return this.addBlock(t,new r.listBlock(this.getHolderElement(),u));};r.listBlock=l.createClass({base:r.panel.block,$:function(t,u){var x=this;u=u||{};var v=u.attributes||(u.attributes={});(x.multiSelect=!!u.multiSelect)&&(v['aria-multiselectable']=true);!v.role&&(v.role='listbox');x.base.apply(x,arguments);var w=x.keys;w[40]='next';w[9]='next';w[38]='prev';w[2000+9]='prev';
w[32]='click';x._.pendingHtml=[];x._.items={};x._.groups={};},_:{close:function(){if(this._.started){this._.pendingHtml.push('</ul>');delete this._.started;}},getClick:function(){if(!this._.click)this._.click=l.addFunction(function(t){var v=this;var u=true;if(v.multiSelect)u=v.toggle(t);else v.mark(t);if(v.onClick)v.onClick(t,u);},this);return this._.click;}},proto:{add:function(t,u,v){var y=this;var w=y._.pendingHtml,x=l.getNextId();if(!y._.started){w.push('<ul role="presentation" class=cke_panel_list>');y._.started=1;y._.size=y._.size||0;}y._.items[t]=x;w.push('<li id=',x,' class=cke_panel_listItem role=presentation><a id="',x,'_option" _cke_focus=1 hidefocus=true title="',v||t,'" href="javascript:void(\'',t,'\')" onclick="CKEDITOR.tools.callFunction(',y._.getClick(),",'",t,"'); return false;\"",' role="option" aria-posinset="'+ ++y._.size+'">',u||t,'</a></li>');},startGroup:function(t){this._.close();var u=l.getNextId();this._.groups[t]=u;this._.pendingHtml.push('<h1 role="presentation" id=',u,' class=cke_panel_grouptitle>',t,'</h1>');},commit:function(){var w=this;w._.close();w.element.appendHtml(w._.pendingHtml.join(''));var t=w._.items,u=w.element.getDocument();for(var v in t)u.getById(t[v]+'_option').setAttribute('aria-setsize',w._.size);delete w._.size;w._.pendingHtml=[];},toggle:function(t){var u=this.isMarked(t);if(u)this.unmark(t);else this.mark(t);return!u;},hideGroup:function(t){var u=this.element.getDocument().getById(this._.groups[t]),v=u&&u.getNext();if(u){u.setStyle('display','none');if(v&&v.getName()=='ul')v.setStyle('display','none');}},hideItem:function(t){this.element.getDocument().getById(this._.items[t]).setStyle('display','none');},showAll:function(){var t=this._.items,u=this._.groups,v=this.element.getDocument();for(var w in t)v.getById(t[w]).setStyle('display','');for(var x in u){var y=v.getById(u[x]),z=y.getNext();y.setStyle('display','');if(z&&z.getName()=='ul')z.setStyle('display','');}},mark:function(t){var w=this;if(!w.multiSelect)w.unmarkAll();var u=w._.items[t],v=w.element.getDocument().getById(u);v.addClass('cke_selected');w.element.getDocument().getById(u+'_option').setAttribute('aria-selected',true);w.element.setAttribute('aria-activedescendant',u+'_option');w.onMark&&w.onMark(v);},unmark:function(t){var u=this;u.element.getDocument().getById(u._.items[t]).removeClass('cke_selected');u.onUnmark&&u.onUnmark(u._.items[t]);},unmarkAll:function(){var w=this;var t=w._.items,u=w.element.getDocument();for(var v in t)u.getById(t[v]).removeClass('cke_selected');
w.onUnmark&&w.onUnmark();},isMarked:function(t){return this.element.getDocument().getById(this._.items[t]).hasClass('cke_selected');},focus:function(t){this._.focusIndex=-1;if(t){var u=this.element.getDocument().getById(this._.items[t]).getFirst(),v=this.element.getElementsByTag('a'),w,x=-1;while(w=v.getItem(++x)){if(w.equals(u)){this._.focusIndex=x;break;}}setTimeout(function(){u.focus();},0);}}}});}});h.themes.add('default',(function(){function t(u,v){var w,x;x=u.config.sharedSpaces;x=x&&x[v];x=x&&h.document.getById(x);if(x){var y='<span class="cke_shared"><span class="'+u.skinClass+' '+u.id+' cke_editor_'+u.name+'">'+'<span class="'+i.cssClass+'">'+'<span class="cke_wrapper cke_'+u.lang.dir+'">'+'<span class="cke_editor">'+'<div class="cke_'+v+'">'+'</div></span></span></span></span></span>',z=x.append(o.createFromHtml(y,x.getDocument()));if(x.getCustomData('cke_hasshared'))z.hide();else x.setCustomData('cke_hasshared',1);w=z.getChild([0,0,0,0]);u.on('focus',function(){for(var A=0,B,C=x.getChildren();B=C.getItem(A);A++){if(B.type==1&&!B.equals(z)&&B.hasClass('cke_shared'))B.hide();}z.show();});u.on('destroy',function(){z.remove();});}return w;};return{build:function(u,v){var w=u.name,x=u.element,y=u.elementMode;if(!x||y==0)return;if(y==1)x.hide();var z=u.fire('themeSpace',{space:'top',html:''}).html,A=u.fire('themeSpace',{space:'contents',html:''}).html,B=u.fireOnce('themeSpace',{space:'bottom',html:''}).html,C=A&&u.config.height,D=u.config.tabIndex||u.element.getAttribute('tabindex')||0;if(!A)C='auto';else if(!isNaN(C))C+='px';var E='',F=u.config.width;if(F){if(!isNaN(F))F+='px';E+='width: '+F+';';}var G=z&&t(u,'top'),H=t(u,'bottom');G&&(G.setHtml(z),z='');H&&(H.setHtml(B),B='');var I=o.createFromHtml(['<span id="cke_',w,'" class="',u.skinClass,' ',u.id,' cke_editor_',w,'" dir="',u.lang.dir,'" title="',i.gecko?' ':'','" lang="',u.langCode,'"'+(i.webkit?' tabindex="'+D+'"':'')+' role="application"'+' aria-labelledby="cke_',w,'_arialbl"'+(E?' style="'+E+'"':'')+'>'+'<span id="cke_',w,'_arialbl" class="cke_voice_label">'+u.lang.editor+'</span>'+'<span class="',i.cssClass,'" role="presentation"><span class="cke_wrapper cke_',u.lang.dir,'" role="presentation"><table class="cke_editor" border="0" cellspacing="0" cellpadding="0" role="presentation"><tbody><tr',z?'':' style="display:none"',' role="presentation"><td id="cke_top_',w,'" class="cke_top" role="presentation">',z,'</td></tr><tr',A?'':' style="display:none"',' role="presentation"><td id="cke_contents_',w,'" class="cke_contents" style="height:',C,'" role="presentation">',A,'</td></tr><tr',B?'':' style="display:none"',' role="presentation"><td id="cke_bottom_',w,'" class="cke_bottom" role="presentation">',B,'</td></tr></tbody></table><style>.',u.skinClass,'{visibility:hidden;}</style></span></span></span>'].join(''));
I.getChild([1,0,0,0,0]).unselectable();I.getChild([1,0,0,0,2]).unselectable();if(y==1)I.insertAfter(x);else x.append(I);u.container=I;I.disableContextMenu();u.fireOnce('themeLoaded');u.fireOnce('uiReady');},buildDialog:function(u){var v=l.getNextNumber(),w=o.createFromHtml(['<div class="',u.id,'_dialog cke_editor_',u.name.replace('.','\\.'),'_dialog cke_skin_',u.skinName,'" dir="',u.lang.dir,'" lang="',u.langCode,'" role="dialog" aria-labelledby="%title#"><table class="cke_dialog',' '+i.cssClass,' cke_',u.lang.dir,'" style="position:absolute" role="presentation"><tr><td role="presentation"><div class="%body" role="presentation"><div id="%title#" class="%title" role="presentation"></div><a id="%close_button#" class="%close_button" href="javascript:void(0)" title="'+u.lang.common.close+'" role="button"><span class="cke_label">X</span></a>'+'<div id="%tabs#" class="%tabs" role="tablist"></div>'+'<table class="%contents" role="presentation">'+'<tr>'+'<td id="%contents#" class="%contents" role="presentation"></td>'+'</tr>'+'<tr>'+'<td id="%footer#" class="%footer" role="presentation"></td>'+'</tr>'+'</table>'+'</div>'+'<div id="%tl#" class="%tl"></div>'+'<div id="%tc#" class="%tc"></div>'+'<div id="%tr#" class="%tr"></div>'+'<div id="%ml#" class="%ml"></div>'+'<div id="%mr#" class="%mr"></div>'+'<div id="%bl#" class="%bl"></div>'+'<div id="%bc#" class="%bc"></div>'+'<div id="%br#" class="%br"></div>'+'</td></tr>'+'</table>',j?'':'<style>.cke_dialog{visibility:hidden;}</style>','</div>'].join('').replace(/#/g,'_'+v).replace(/%/g,'cke_dialog_')),x=w.getChild([0,0,0,0,0]),y=x.getChild(0),z=x.getChild(1);y.unselectable();z.unselectable();return{element:w,parts:{dialog:w.getChild(0),title:y,close:z,tabs:x.getChild(2),contents:x.getChild([3,0,0,0]),footer:x.getChild([3,0,1,0])}};},destroy:function(u){var v=u.container;v.clearCustomData();u.element.clearCustomData();if(v)v.remove();if(u.elementMode==1)u.element.show();delete u.element;}};})());h.editor.prototype.getThemeSpace=function(t){var u='cke_'+t,v=this._[u]||(this._[u]=h.document.getById(u+'_'+this.name));return v;};h.editor.prototype.resize=function(t,u,v,w){var x=this.container,y=h.document.getById('cke_contents_'+this.name),z=w?x.getChild(1):x;i.webkit&&z.setStyle('display','none');z.setSize('width',t,true);if(i.webkit){z.$.offsetWidth;z.setStyle('display','');}var A=v?0:(z.$.offsetHeight||0)-(y.$.clientHeight||0);y.setStyle('height',Math.max(u-A,0)+'px');this.fire('resize');};h.editor.prototype.getResizable=function(){return this.container.getChild(1);
};})();
