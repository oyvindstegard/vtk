/*
Copyright (c) 2003-2010, CKSource - Frederico Knabben. All rights reserved.
For licensing, see LICENSE.html or http://ckeditor.com/license
*/

(function(){if(!window.CKEDITOR)window.CKEDITOR=(function(){var f={timestamp:'AA4E4NT',version:'3.4.2',revision:'6041',_:{},status:'unloaded',basePath:(function(){var i=window.CKEDITOR_BASEPATH||'';if(!i){var j=document.getElementsByTagName('script');for(var k=0;k<j.length;k++){var l=j[k].src.match(/(^|.*[\\\/])ckeditor(?:_basic)?(?:_source)?.js(?:\?.*)?$/i);if(l){i=l[1];break;}}}if(i.indexOf('://')==-1)if(i.indexOf('/')===0)i=location.href.match(/^.*?:\/\/[^\/]*/)[0]+i;else i=location.href.match(/^[^\?]*\/(?:)/)[0]+i;if(!i)throw 'The CKEditor installation path could not be automatically detected. Please set the global variable "CKEDITOR_BASEPATH" before creating editor instances.';return i;})(),getUrl:function(i){if(i.indexOf('://')==-1&&i.indexOf('/')!==0)i=this.basePath+i;if(this.timestamp&&i.charAt(i.length-1)!='/'&&!/[&?]t=/.test(i))i+=(i.indexOf('?')>=0?'&':'?')+'t='+this.timestamp;return i;}},g=window.CKEDITOR_GETURL;if(g){var h=f.getUrl;f.getUrl=function(i){return g.call(f,i)||h.call(f,i);};}return f;})();var f=CKEDITOR;if(!f.event){f.event=function(){};f.event.implementOn=function(g){var h=f.event.prototype;for(var i in h){if(g[i]==undefined)g[i]=h[i];}};f.event.prototype=(function(){var g=function(i){var j=i.getPrivate&&i.getPrivate()||i._||(i._={});return j.events||(j.events={});},h=function(i){this.name=i;this.listeners=[];};h.prototype={getListenerIndex:function(i){for(var j=0,k=this.listeners;j<k.length;j++){if(k[j].fn==i)return j;}return-1;}};return{on:function(i,j,k,l,m){var n=g(this),o=n[i]||(n[i]=new h(i));if(o.getListenerIndex(j)<0){var p=o.listeners;if(!k)k=this;if(isNaN(m))m=10;var q=this,r=function(t,u,v,w){var x={name:i,sender:this,editor:t,data:u,listenerData:l,stop:v,cancel:w,removeListener:function(){q.removeListener(i,j);}};j.call(k,x);return x.data;};r.fn=j;r.priority=m;for(var s=p.length-1;s>=0;s--){if(p[s].priority<=m){p.splice(s+1,0,r);return;}}p.unshift(r);}},fire:(function(){var i=false,j=function(){i=true;},k=false,l=function(){k=true;};return function(m,n,o){var p=g(this)[m],q=i,r=k;i=k=false;if(p){var s=p.listeners;if(s.length){s=s.slice(0);for(var t=0;t<s.length;t++){var u=s[t].call(this,o,n,j,l);if(typeof u!='undefined')n=u;if(i||k)break;}}}var v=k||(typeof n=='undefined'?false:n);i=q;k=r;return v;};})(),fireOnce:function(i,j,k){var l=this.fire(i,j,k);delete g(this)[i];return l;},removeListener:function(i,j){var k=g(this)[i];if(k){var l=k.getListenerIndex(j);if(l>=0)k.listeners.splice(l,1);}},hasListeners:function(i){var j=g(this)[i];
return j&&j.listeners.length>0;}};})();}if(!f.editor){f.ELEMENT_MODE_NONE=0;f.ELEMENT_MODE_REPLACE=1;f.ELEMENT_MODE_APPENDTO=2;f.editor=function(g,h,i,j){var k=this;k._={instanceConfig:g,element:h,data:j};k.elementMode=i||0;f.event.call(k);k._init();};f.editor.replace=function(g,h){var i=g;if(typeof i!='object'){i=document.getElementById(g);if(!i){var j=0,k=document.getElementsByName(g);while((i=k[j++])&&i.tagName.toLowerCase()!='textarea'){}}if(!i)throw '[CKEDITOR.editor.replace] The element with id or name "'+g+'" was not found.';}i.style.visibility='hidden';return new f.editor(h,i,1);};f.editor.appendTo=function(g,h,i){var j=g;if(typeof j!='object'){j=document.getElementById(g);if(!j)throw '[CKEDITOR.editor.appendTo] The element with id "'+g+'" was not found.';}return new f.editor(h,j,2,i);};f.editor.prototype={_init:function(){var g=f.editor._pending||(f.editor._pending=[]);g.push(this);},fire:function(g,h){return f.event.prototype.fire.call(this,g,h,this);},fireOnce:function(g,h){return f.event.prototype.fireOnce.call(this,g,h,this);}};f.event.implementOn(f.editor.prototype,true);}if(!f.env)f.env=(function(){var g=navigator.userAgent.toLowerCase(),h=window.opera,i={ie:/*@cc_on!@*/false,opera:!!h&&h.version,webkit:g.indexOf(' applewebkit/')>-1,air:g.indexOf(' adobeair/')>-1,mac:g.indexOf('macintosh')>-1,quirks:document.compatMode=='BackCompat',mobile:g.indexOf('mobile')>-1,isCustomDomain:function(){if(!this.ie)return false;var l=document.domain,m=window.location.hostname;return l!=m&&l!='['+m+']';}};i.gecko=navigator.product=='Gecko'&&!i.webkit&&!i.opera;var j=0;if(i.ie){j=parseFloat(g.match(/msie (\d+)/)[1]);i.ie8=!!document.documentMode;i.ie8Compat=document.documentMode==8;i.ie7Compat=j==7&&!document.documentMode||document.documentMode==7;i.ie6Compat=j<7||i.quirks;}if(i.gecko){var k=g.match(/rv:([\d\.]+)/);if(k){k=k[1].split('.');j=k[0]*10000+(k[1]||0)*100+ +(k[2]||0);}}if(i.opera)j=parseFloat(h.version());if(i.air)j=parseFloat(g.match(/ adobeair\/(\d+)/)[1]);if(i.webkit)j=parseFloat(g.match(/ applewebkit\/(\d+)/)[1]);i.version=j;i.isCompatible=!i.mobile&&(i.ie&&j>=6||i.gecko&&j>=10801||i.opera&&j>=9.5||i.air&&j>=1||i.webkit&&j>=522||false);i.cssClass='cke_browser_'+(i.ie?'ie':i.gecko?'gecko':i.opera?'opera':i.air?'air':i.webkit?'webkit':'unknown');if(i.quirks)i.cssClass+=' cke_browser_quirks';if(i.ie){i.cssClass+=' cke_browser_ie'+(i.version<7?'6':i.version>=8?document.documentMode:'7');if(i.quirks)i.cssClass+=' cke_browser_iequirks';
}if(i.gecko&&j<10900)i.cssClass+=' cke_browser_gecko18';return i;})();var g=f.env;var h=g.ie;if(f.status=='unloaded')(function(){f.event.implementOn(f);f.loadFullCore=function(){if(f.status!='basic_ready'){f.loadFullCore._load=1;return;}delete f.loadFullCore;var j=document.createElement('script');j.type='text/javascript';j.src=f.basePath+'ckeditor.js';document.getElementsByTagName('head')[0].appendChild(j);};f.loadFullCoreTimeout=0;f.replaceClass='ckeditor';f.replaceByClassEnabled=1;var i=function(j,k,l,m){if(g.isCompatible){if(f.loadFullCore)f.loadFullCore();var n=l(j,k,m);f.add(n);return n;}return null;};f.replace=function(j,k){return i(j,k,f.editor.replace);};f.appendTo=function(j,k,l){return i(j,k,f.editor.appendTo,l);};f.add=function(j){var k=this._.pending||(this._.pending=[]);k.push(j);};f.replaceAll=function(){var j=document.getElementsByTagName('textarea');for(var k=0;k<j.length;k++){var l=null,m=j[k],n=m.name;if(!m.name&&!m.id)continue;if(typeof arguments[0]=='string'){var o=new RegExp('(?:^|\\s)'+arguments[0]+'(?:$|\\s)');if(!o.test(m.className))continue;}else if(typeof arguments[0]=='function'){l={};if(arguments[0](m,l)===false)continue;}this.replace(m,l);}};(function(){var j=function(){var k=f.loadFullCore,l=f.loadFullCoreTimeout;if(f.replaceByClassEnabled)f.replaceAll(f.replaceClass);f.status='basic_ready';if(k&&k._load)k();else if(l)setTimeout(function(){if(f.loadFullCore)f.loadFullCore();},l*1000);};if(window.addEventListener)window.addEventListener('load',j,false);else if(window.attachEvent)window.attachEvent('onload',j);})();f.status='basic_loaded';})();f.dom={};var i=f.dom;(function(){var j=[];f.on('reset',function(){j=[];});f.tools={arrayCompare:function(k,l){if(!k&&!l)return true;if(!k||!l||k.length!=l.length)return false;for(var m=0;m<k.length;m++){if(k[m]!=l[m])return false;}return true;},clone:function(k){var l;if(k&&k instanceof Array){l=[];for(var m=0;m<k.length;m++)l[m]=this.clone(k[m]);return l;}if(k===null||typeof k!='object'||k instanceof String||k instanceof Number||k instanceof Boolean||k instanceof Date||k instanceof RegExp)return k;l=new k.constructor();for(var n in k){var o=k[n];l[n]=this.clone(o);}return l;},capitalize:function(k){return k.charAt(0).toUpperCase()+k.substring(1).toLowerCase();},extend:function(k){var l=arguments.length,m,n;if(typeof (m=arguments[l-1])=='boolean')l--;else if(typeof (m=arguments[l-2])=='boolean'){n=arguments[l-1];l-=2;}for(var o=1;o<l;o++){var p=arguments[o];for(var q in p){if(m===true||k[q]==undefined)if(!n||q in n)k[q]=p[q];
}}return k;},prototypedCopy:function(k){var l=function(){};l.prototype=k;return new l();},isArray:function(k){return!!k&&k instanceof Array;},isEmpty:function(k){for(var l in k){if(k.hasOwnProperty(l))return false;}return true;},cssStyleToDomStyle:(function(){var k=document.createElement('div').style,l=typeof k.cssFloat!='undefined'?'cssFloat':typeof k.styleFloat!='undefined'?'styleFloat':'float';return function(m){if(m=='float')return l;else return m.replace(/-./g,function(n){return n.substr(1).toUpperCase();});};})(),buildStyleHtml:function(k){k=[].concat(k);var l,m=[];for(var n=0;n<k.length;n++){l=k[n];if(/@import|[{}]/.test(l))m.push('<style>'+l+'</style>');else m.push('<link type="text/css" rel=stylesheet href="'+l+'">');}return m.join('');},htmlEncode:function(k){var l=function(p){var q=new i.element('span');q.setText(p);return q.getHtml();},m=l('\n').toLowerCase()=='<br>'?function(p){return l(p).replace(/<br>/gi,'\n');}:l,n=l('>')=='>'?function(p){return m(p).replace(/>/g,'&gt;');}:m,o=l('  ')=='&nbsp; '?function(p){return n(p).replace(/&nbsp;/g,' ');}:n;this.htmlEncode=o;return this.htmlEncode(k);},htmlEncodeAttr:function(k){return k.replace(/"/g,'&quot;').replace(/</g,'&lt;').replace(/>/g,'&gt;');},getNextNumber:(function(){var k=0;return function(){return++k;};})(),getNextId:function(){return 'cke_'+this.getNextNumber();},override:function(k,l){return l(k);},setTimeout:function(k,l,m,n,o){if(!o)o=window;if(!m)m=o;return o.setTimeout(function(){if(n)k.apply(m,[].concat(n));else k.apply(m);},l||0);},trim:(function(){var k=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(l){return l.replace(k,'');};})(),ltrim:(function(){var k=/^[ \t\n\r]+/g;return function(l){return l.replace(k,'');};})(),rtrim:(function(){var k=/[ \t\n\r]+$/g;return function(l){return l.replace(k,'');};})(),indexOf:Array.prototype.indexOf?function(k,l){return k.indexOf(l);}:function(k,l){for(var m=0,n=k.length;m<n;m++){if(k[m]===l)return m;}return-1;},bind:function(k,l){return function(){return k.apply(l,arguments);};},createClass:function(k){var l=k.$,m=k.base,n=k.privates||k._,o=k.proto,p=k.statics;if(n){var q=l;l=function(){var u=this;var r=u._||(u._={});for(var s in n){var t=n[s];r[s]=typeof t=='function'?f.tools.bind(t,u):t;}q.apply(u,arguments);};}if(m){l.prototype=this.prototypedCopy(m.prototype);l.prototype['constructor']=l;l.prototype.base=function(){this.base=m.prototype.base;m.apply(this,arguments);this.base=arguments.callee;};}if(o)this.extend(l.prototype,o,true);if(p)this.extend(l,p,true);
return l;},addFunction:function(k,l){return j.push(function(){k.apply(l||this,arguments);})-1;},removeFunction:function(k){j[k]=null;},callFunction:function(k){var l=j[k];return l&&l.apply(window,Array.prototype.slice.call(arguments,1));},cssLength:(function(){var k=/^\d+(?:\.\d+)?$/;return function(l){return l+(k.test(l)?'px':'');};})(),repeat:function(k,l){return new Array(l+1).join(k);},tryThese:function(){var k;for(var l=0,m=arguments.length;l<m;l++){var n=arguments[l];try{k=n();break;}catch(o){}}return k;},genKey:function(){return Array.prototype.slice.call(arguments).join('-');}};})();var j=f.tools;f.dtd=(function(){var k=j.extend,l={isindex:1,fieldset:1},m={input:1,button:1,select:1,textarea:1,label:1},n=k({a:1},m),o=k({iframe:1},n),p={hr:1,ul:1,menu:1,div:1,blockquote:1,noscript:1,table:1,center:1,address:1,dir:1,pre:1,h5:1,dl:1,h4:1,noframes:1,h6:1,ol:1,h1:1,h3:1,h2:1},q={ins:1,del:1,script:1,style:1},r=k({b:1,acronym:1,bdo:1,'var':1,'#':1,abbr:1,code:1,br:1,i:1,cite:1,kbd:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,dfn:1,span:1},q),s=k({sub:1,img:1,object:1,sup:1,basefont:1,map:1,applet:1,font:1,big:1,small:1},r),t=k({p:1},s),u=k({iframe:1},s,m),v={img:1,noscript:1,br:1,kbd:1,center:1,button:1,basefont:1,h5:1,h4:1,samp:1,h6:1,ol:1,h1:1,h3:1,h2:1,form:1,font:1,'#':1,select:1,menu:1,ins:1,abbr:1,label:1,code:1,table:1,script:1,cite:1,input:1,iframe:1,strong:1,textarea:1,noframes:1,big:1,small:1,span:1,hr:1,sub:1,bdo:1,'var':1,div:1,object:1,sup:1,strike:1,dir:1,map:1,dl:1,applet:1,del:1,isindex:1,fieldset:1,ul:1,b:1,acronym:1,a:1,blockquote:1,i:1,u:1,s:1,tt:1,address:1,q:1,pre:1,p:1,em:1,dfn:1},w=k({a:1},u),x={tr:1},y={'#':1},z=k({param:1},v),A=k({form:1},l,o,p,t),B={li:1},C={style:1,script:1},D={base:1,link:1,meta:1,title:1},E=k(D,C),F={head:1,body:1},G={html:1},H={address:1,blockquote:1,center:1,dir:1,div:1,dl:1,fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hr:1,isindex:1,menu:1,noframes:1,ol:1,p:1,pre:1,table:1,ul:1};return{$nonBodyContent:k(G,F,D),$block:H,$blockLimit:{body:1,div:1,td:1,th:1,caption:1,form:1},$inline:w,$body:k({script:1,style:1},H),$cdata:{script:1,style:1},$empty:{area:1,base:1,br:1,col:1,hr:1,img:1,input:1,link:1,meta:1,param:1},$listItem:{dd:1,dt:1,li:1},$list:{ul:1,ol:1,dl:1},$nonEditable:{applet:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,script:1,textarea:1,param:1},$removeEmpty:{abbr:1,acronym:1,address:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,'var':1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},html:F,head:E,style:y,script:y,body:A,base:{},link:{},meta:{},title:y,col:{},tr:{td:1,th:1},img:{},colgroup:{col:1},noscript:A,td:A,br:{},th:A,center:A,kbd:w,button:k(t,p),basefont:{},h5:w,h4:w,samp:w,h6:w,ol:B,h1:w,h3:w,option:y,h2:w,form:k(l,o,p,t),select:{optgroup:1,option:1},font:w,ins:w,menu:B,abbr:w,label:w,table:{thead:1,col:1,tbody:1,tr:1,colgroup:1,caption:1,tfoot:1},code:w,script:y,tfoot:x,cite:w,li:A,input:{},iframe:A,strong:w,textarea:y,noframes:A,big:w,small:w,span:w,hr:{},dt:w,sub:w,optgroup:{option:1},param:{},bdo:w,'var':w,div:A,object:z,sup:w,dd:A,strike:w,area:{},dir:B,map:k({area:1,form:1,p:1},l,q,p),applet:z,dl:{dt:1,dd:1},del:w,isindex:{},fieldset:k({legend:1},v),thead:x,ul:B,acronym:w,b:w,a:u,blockquote:A,caption:w,i:w,u:w,tbody:x,s:w,address:k(o,t),tt:w,legend:w,q:w,pre:k(r,n),p:w,em:w,dfn:w};
})();var k=f.dtd;i.event=function(l){this.$=l;};i.event.prototype={getKey:function(){return this.$.keyCode||this.$.which;},getKeystroke:function(){var m=this;var l=m.getKey();if(m.$.ctrlKey||m.$.metaKey)l+=1000;if(m.$.shiftKey)l+=2000;if(m.$.altKey)l+=4000;return l;},preventDefault:function(l){var m=this.$;if(m.preventDefault)m.preventDefault();else m.returnValue=false;if(l)this.stopPropagation();},stopPropagation:function(){var l=this.$;if(l.stopPropagation)l.stopPropagation();else l.cancelBubble=true;},getTarget:function(){var l=this.$.target||this.$.srcElement;return l?new i.node(l):null;}};f.CTRL=1000;f.SHIFT=2000;f.ALT=4000;i.domObject=function(l){if(l)this.$=l;};i.domObject.prototype=(function(){var l=function(m,n){return function(o){if(typeof f!='undefined')m.fire(n,new i.event(o));};};return{getPrivate:function(){var m;if(!(m=this.getCustomData('_')))this.setCustomData('_',m={});return m;},on:function(m){var p=this;var n=p.getCustomData('_cke_nativeListeners');if(!n){n={};p.setCustomData('_cke_nativeListeners',n);}if(!n[m]){var o=n[m]=l(p,m);if(p.$.attachEvent)p.$.attachEvent('on'+m,o);else if(p.$.addEventListener)p.$.addEventListener(m,o,!!f.event.useCapture);}return f.event.prototype.on.apply(p,arguments);},removeListener:function(m){var p=this;f.event.prototype.removeListener.apply(p,arguments);if(!p.hasListeners(m)){var n=p.getCustomData('_cke_nativeListeners'),o=n&&n[m];if(o){if(p.$.detachEvent)p.$.detachEvent('on'+m,o);else if(p.$.removeEventListener)p.$.removeEventListener(m,o,false);delete n[m];}}},removeAllListeners:function(){var p=this;var m=p.getCustomData('_cke_nativeListeners');for(var n in m){var o=m[n];if(p.$.detachEvent)p.$.detachEvent('on'+n,o);else if(p.$.removeEventListener)p.$.removeEventListener(n,o,false);delete m[n];}}};})();(function(l){var m={};f.on('reset',function(){m={};});l.equals=function(n){return n&&n.$===this.$;};l.setCustomData=function(n,o){var p=this.getUniqueId(),q=m[p]||(m[p]={});q[n]=o;return this;};l.getCustomData=function(n){var o=this.$._cke_expando,p=o&&m[o];return p&&p[n];};l.removeCustomData=function(n){var o=this.$._cke_expando,p=o&&m[o],q=p&&p[n];if(typeof q!='undefined')delete p[n];return q||null;};l.clearCustomData=function(){this.removeAllListeners();var n=this.$._cke_expando;n&&delete m[n];};l.getUniqueId=function(){return this.$._cke_expando||(this.$._cke_expando=j.getNextNumber());};f.event.implementOn(l);})(i.domObject.prototype);i.window=function(l){i.domObject.call(this,l);};i.window.prototype=new i.domObject();
j.extend(i.window.prototype,{focus:function(){if(g.webkit&&this.$.parent)this.$.parent.focus();this.$.focus();},getViewPaneSize:function(){var l=this.$.document,m=l.compatMode=='CSS1Compat';return{width:(m?l.documentElement.clientWidth:l.body.clientWidth)||0,height:(m?l.documentElement.clientHeight:l.body.clientHeight)||0};},getScrollPosition:function(){var l=this.$;if('pageXOffset' in l)return{x:l.pageXOffset||0,y:l.pageYOffset||0};else{var m=l.document;return{x:m.documentElement.scrollLeft||m.body.scrollLeft||0,y:m.documentElement.scrollTop||m.body.scrollTop||0};}}});i.document=function(l){i.domObject.call(this,l);};var l=i.document;l.prototype=new i.domObject();j.extend(l.prototype,{appendStyleSheet:function(m){if(this.$.createStyleSheet)this.$.createStyleSheet(m);else{var n=new i.element('link');n.setAttributes({rel:'stylesheet',type:'text/css',href:m});this.getHead().append(n);}},appendStyleText:function(m){var p=this;if(p.$.createStyleSheet){var n=p.$.createStyleSheet('');n.cssText=m;}else{var o=new i.element('style',p);o.append(new i.text(m,p));p.getHead().append(o);}},createElement:function(m,n){var o=new i.element(m,this);if(n){if(n.attributes)o.setAttributes(n.attributes);if(n.styles)o.setStyles(n.styles);}return o;},createText:function(m){return new i.text(m,this);},focus:function(){this.getWindow().focus();},getById:function(m){var n=this.$.getElementById(m);return n?new i.element(n):null;},getByAddress:function(m,n){var o=this.$.documentElement;for(var p=0;o&&p<m.length;p++){var q=m[p];if(!n){o=o.childNodes[q];continue;}var r=-1;for(var s=0;s<o.childNodes.length;s++){var t=o.childNodes[s];if(n===true&&t.nodeType==3&&t.previousSibling&&t.previousSibling.nodeType==3)continue;r++;if(r==q){o=t;break;}}}return o?new i.node(o):null;},getElementsByTag:function(m,n){if(!h&&n)m=n+':'+m;return new i.nodeList(this.$.getElementsByTagName(m));},getHead:function(){var m=this.$.getElementsByTagName('head')[0];m=new i.element(m);return(this.getHead=function(){return m;})();},getBody:function(){var m=new i.element(this.$.body);return(this.getBody=function(){return m;})();},getDocumentElement:function(){var m=new i.element(this.$.documentElement);return(this.getDocumentElement=function(){return m;})();},getWindow:function(){var m=new i.window(this.$.parentWindow||this.$.defaultView);return(this.getWindow=function(){return m;})();}});i.node=function(m){if(m){switch(m.nodeType){case 9:return new l(m);case 1:return new i.element(m);case 3:return new i.text(m);}i.domObject.call(this,m);
}return this;};i.node.prototype=new i.domObject();f.NODE_ELEMENT=1;f.NODE_DOCUMENT=9;f.NODE_TEXT=3;f.NODE_COMMENT=8;f.NODE_DOCUMENT_FRAGMENT=11;f.POSITION_IDENTICAL=0;f.POSITION_DISCONNECTED=1;f.POSITION_FOLLOWING=2;f.POSITION_PRECEDING=4;f.POSITION_IS_CONTAINED=8;f.POSITION_CONTAINS=16;j.extend(i.node.prototype,{appendTo:function(m,n){m.append(this,n);return m;},clone:function(m,n){var o=this.$.cloneNode(m);if(!n){var p=function(q){if(q.nodeType!=1)return;q.removeAttribute('id',false);q.removeAttribute('_cke_expando',false);var r=q.childNodes;for(var s=0;s<r.length;s++)p(r[s]);};p(o);}return new i.node(o);},hasPrevious:function(){return!!this.$.previousSibling;},hasNext:function(){return!!this.$.nextSibling;},insertAfter:function(m){m.$.parentNode.insertBefore(this.$,m.$.nextSibling);return m;},insertBefore:function(m){m.$.parentNode.insertBefore(this.$,m.$);return m;},insertBeforeMe:function(m){this.$.parentNode.insertBefore(m.$,this.$);return m;},getAddress:function(m){var n=[],o=this.getDocument().$.documentElement,p=this.$;while(p&&p!=o){var q=p.parentNode,r=-1;if(q){for(var s=0;s<q.childNodes.length;s++){var t=q.childNodes[s];if(m&&t.nodeType==3&&t.previousSibling&&t.previousSibling.nodeType==3)continue;r++;if(t==p)break;}n.unshift(r);}p=q;}return n;},getDocument:function(){var m=new l(this.$.ownerDocument||this.$.parentNode.ownerDocument);return(this.getDocument=function(){return m;})();},getIndex:function(){var m=this.$,n=m.parentNode&&m.parentNode.firstChild,o=-1;while(n){o++;if(n==m)return o;n=n.nextSibling;}return-1;},getNextSourceNode:function(m,n,o){if(o&&!o.call){var p=o;o=function(s){return!s.equals(p);};}var q=!m&&this.getFirst&&this.getFirst(),r;if(!q){if(this.type==1&&o&&o(this,true)===false)return null;q=this.getNext();}while(!q&&(r=(r||this).getParent())){if(o&&o(r,true)===false)return null;q=r.getNext();}if(!q)return null;if(o&&o(q)===false)return null;if(n&&n!=q.type)return q.getNextSourceNode(false,n,o);return q;},getPreviousSourceNode:function(m,n,o){if(o&&!o.call){var p=o;o=function(s){return!s.equals(p);};}var q=!m&&this.getLast&&this.getLast(),r;if(!q){if(this.type==1&&o&&o(this,true)===false)return null;q=this.getPrevious();}while(!q&&(r=(r||this).getParent())){if(o&&o(r,true)===false)return null;q=r.getPrevious();}if(!q)return null;if(o&&o(q)===false)return null;if(n&&q.type!=n)return q.getPreviousSourceNode(false,n,o);return q;},getPrevious:function(m){var n=this.$,o;do{n=n.previousSibling;o=n&&new i.node(n);}while(o&&m&&!m(o))return o;
},getNext:function(m){var n=this.$,o;do{n=n.nextSibling;o=n&&new i.node(n);}while(o&&m&&!m(o))return o;},getParent:function(){var m=this.$.parentNode;return m&&m.nodeType==1?new i.node(m):null;},getParents:function(m){var n=this,o=[];do o[m?'push':'unshift'](n);while(n=n.getParent())return o;},getCommonAncestor:function(m){var o=this;if(m.equals(o))return o;if(m.contains&&m.contains(o))return m;var n=o.contains?o:o.getParent();do{if(n.contains(m))return n;}while(n=n.getParent())return null;},getPosition:function(m){var n=this.$,o=m.$;if(n.compareDocumentPosition)return n.compareDocumentPosition(o);if(n==o)return 0;if(this.type==1&&m.type==1){if(n.contains){if(n.contains(o))return 16+4;if(o.contains(n))return 8+2;}if('sourceIndex' in n)return n.sourceIndex<0||o.sourceIndex<0?1:n.sourceIndex<o.sourceIndex?4:2;}var p=this.getAddress(),q=m.getAddress(),r=Math.min(p.length,q.length);for(var s=0;s<=r-1;s++){if(p[s]!=q[s]){if(s<r)return p[s]<q[s]?4:2;break;}}return p.length<q.length?16+4:8+2;},getAscendant:function(m,n){var o=this.$;if(!n)o=o.parentNode;while(o){if(o.nodeName&&o.nodeName.toLowerCase()==m)return new i.node(o);o=o.parentNode;}return null;},hasAscendant:function(m,n){var o=this.$;if(!n)o=o.parentNode;while(o){if(o.nodeName&&o.nodeName.toLowerCase()==m)return true;o=o.parentNode;}return false;},move:function(m,n){m.append(this.remove(),n);},remove:function(m){var n=this.$,o=n.parentNode;if(o){if(m)for(var p;p=n.firstChild;)o.insertBefore(n.removeChild(p),n);o.removeChild(n);}return this;},replace:function(m){this.insertBefore(m);m.remove();},trim:function(){this.ltrim();this.rtrim();},ltrim:function(){var p=this;var m;while(p.getFirst&&(m=p.getFirst())){if(m.type==3){var n=j.ltrim(m.getText()),o=m.getLength();if(!n){m.remove();continue;}else if(n.length<o){m.split(o-n.length);p.$.removeChild(p.$.firstChild);}}break;}},rtrim:function(){var p=this;var m;while(p.getLast&&(m=p.getLast())){if(m.type==3){var n=j.rtrim(m.getText()),o=m.getLength();if(!n){m.remove();continue;}else if(n.length<o){m.split(n.length);p.$.lastChild.parentNode.removeChild(p.$.lastChild);}}break;}if(!h&&!g.opera){m=p.$.lastChild;if(m&&m.type==1&&m.nodeName.toLowerCase()=='br')m.parentNode.removeChild(m);}},isReadOnly:function(){var m=this;while(m){if(m.type==1){if(m.is('body')||m.getCustomData('_cke_notReadOnly'))break;if(m.getAttribute('contentEditable')=='false')return m;else if(m.getAttribute('contentEditable')=='true')break;}m=m.getParent();}return false;}});i.nodeList=function(m){this.$=m;
};i.nodeList.prototype={count:function(){return this.$.length;},getItem:function(m){var n=this.$[m];return n?new i.node(n):null;}};i.element=function(m,n){if(typeof m=='string')m=(n?n.$:document).createElement(m);i.domObject.call(this,m);};var m=i.element;m.get=function(n){return n&&(n.$?n:new m(n));};m.prototype=new i.node();m.createFromHtml=function(n,o){var p=new m('div',o);p.setHtml(n);return p.getFirst().remove();};m.setMarker=function(n,o,p,q){var r=o.getCustomData('list_marker_id')||o.setCustomData('list_marker_id',j.getNextNumber()).getCustomData('list_marker_id'),s=o.getCustomData('list_marker_names')||o.setCustomData('list_marker_names',{}).getCustomData('list_marker_names');n[r]=o;s[p]=1;return o.setCustomData(p,q);};m.clearAllMarkers=function(n){for(var o in n)m.clearMarkers(n,n[o],1);};m.clearMarkers=function(n,o,p){var q=o.getCustomData('list_marker_names'),r=o.getCustomData('list_marker_id');for(var s in q)o.removeCustomData(s);o.removeCustomData('list_marker_names');if(p){o.removeCustomData('list_marker_id');delete n[r];}};j.extend(m.prototype,{type:1,addClass:function(n){var o=this.$.className;if(o){var p=new RegExp('(?:^|\\s)'+n+'(?:\\s|$)','');if(!p.test(o))o+=' '+n;}this.$.className=o||n;},removeClass:function(n){var o=this.getAttribute('class');if(o){var p=new RegExp('(?:^|\\s+)'+n+'(?=\\s|$)','i');if(p.test(o)){o=o.replace(p,'').replace(/^\s+/,'');if(o)this.setAttribute('class',o);else this.removeAttribute('class');}}},hasClass:function(n){var o=new RegExp('(?:^|\\s+)'+n+'(?=\\s|$)','');return o.test(this.getAttribute('class'));},append:function(n,o){var p=this;if(typeof n=='string')n=p.getDocument().createElement(n);if(o)p.$.insertBefore(n.$,p.$.firstChild);else p.$.appendChild(n.$);return n;},appendHtml:function(n){var p=this;if(!p.$.childNodes.length)p.setHtml(n);else{var o=new m('div',p.getDocument());o.setHtml(n);o.moveChildren(p);}},appendText:function(n){if(this.$.text!=undefined)this.$.text+=n;else this.append(new i.text(n));},appendBogus:function(){var p=this;var n=p.getLast();while(n&&n.type==3&&!j.rtrim(n.getText()))n=n.getPrevious();if(!n||!n.is||!n.is('br')){var o=g.opera?p.getDocument().createText(''):p.getDocument().createElement('br');g.gecko&&o.setAttribute('type','_moz');p.append(o);}},breakParent:function(n){var q=this;var o=new i.range(q.getDocument());o.setStartAfter(q);o.setEndAfter(n);var p=o.extractContents();o.insertNode(q.remove());p.insertAfterNode(q);},contains:h||g.webkit?function(n){var o=this.$;return n.type!=1?o.contains(n.getParent().$):o!=n.$&&o.contains(n.$);
}:function(n){return!!(this.$.compareDocumentPosition(n.$)&16);},focus:function(){try{this.$.focus();}catch(n){}},getHtml:function(){var n=this.$.innerHTML;return h?n.replace(/<\?[^>]*>/g,''):n;},getOuterHtml:function(){var o=this;if(o.$.outerHTML)return o.$.outerHTML.replace(/<\?[^>]*>/,'');var n=o.$.ownerDocument.createElement('div');n.appendChild(o.$.cloneNode(true));return n.innerHTML;},setHtml:function(n){return this.$.innerHTML=n;},setText:function(n){m.prototype.setText=this.$.innerText!=undefined?function(o){return this.$.innerText=o;}:function(o){return this.$.textContent=o;};return this.setText(n);},getAttribute:(function(){var n=function(o){return this.$.getAttribute(o,2);};if(h&&(g.ie7Compat||g.ie6Compat))return function(o){var s=this;switch(o){case 'class':o='className';break;case 'tabindex':var p=n.call(s,o);if(p!==0&&s.$.tabIndex===0)p=null;return p;break;case 'checked':var q=s.$.attributes.getNamedItem(o),r=q.specified?q.nodeValue:s.$.checked;return r?'checked':null;case 'hspace':return s.$.hspace;case 'style':return s.$.style.cssText;}return n.call(s,o);};else return n;})(),getChildren:function(){return new i.nodeList(this.$.childNodes);},getComputedStyle:h?function(n){return this.$.currentStyle[j.cssStyleToDomStyle(n)];}:function(n){return this.getWindow().$.getComputedStyle(this.$,'').getPropertyValue(n);},getDtd:function(){var n=k[this.getName()];this.getDtd=function(){return n;};return n;},getElementsByTag:l.prototype.getElementsByTag,getTabIndex:h?function(){var n=this.$.tabIndex;if(n===0&&!k.$tabIndex[this.getName()]&&parseInt(this.getAttribute('tabindex'),10)!==0)n=-1;return n;}:g.webkit?function(){var n=this.$.tabIndex;if(n==undefined){n=parseInt(this.getAttribute('tabindex'),10);if(isNaN(n))n=-1;}return n;}:function(){return this.$.tabIndex;},getText:function(){return this.$.textContent||this.$.innerText||'';},getWindow:function(){return this.getDocument().getWindow();},getId:function(){return this.$.id||null;},getNameAtt:function(){return this.$.name||null;},getName:function(){var n=this.$.nodeName.toLowerCase();if(h){var o=this.$.scopeName;if(o!='HTML')n=o.toLowerCase()+':'+n;}return(this.getName=function(){return n;})();},getValue:function(){return this.$.value;},getFirst:function(n){var o=this.$.firstChild,p=o&&new i.node(o);if(p&&n&&!n(p))p=p.getNext(n);return p;},getLast:function(n){var o=this.$.lastChild,p=o&&new i.node(o);if(p&&n&&!n(p))p=p.getPrevious(n);return p;},getStyle:function(n){return this.$.style[j.cssStyleToDomStyle(n)];
},is:function(){var n=this.getName();for(var o=0;o<arguments.length;o++){if(arguments[o]==n)return true;}return false;},isEditable:function(){var n=this.getName(),o=!k.$nonEditable[n]&&(k[n]||k.span);return o&&o['#'];},isIdentical:function(n){if(this.getName()!=n.getName())return false;var o=this.$.attributes,p=n.$.attributes,q=o.length,r=p.length;if(!h&&q!=r)return false;for(var s=0;s<q;s++){var t=o[s];if((!h||t.specified&&t.nodeName!='_cke_expando')&&t.nodeValue!=n.getAttribute(t.nodeName))return false;}if(h)for(s=0;s<r;s++){t=p[s];if(t.specified&&t.nodeName!='_cke_expando'&&t.nodeValue!=this.getAttribute(t.nodeName))return false;}return true;},isVisible:function(){var n=!!this.$.offsetHeight&&this.getComputedStyle('visibility')!='hidden',o,p;if(n&&(g.webkit||g.opera)){o=this.getWindow();if(!o.equals(f.document.getWindow())&&(p=o.$.frameElement))n=new m(p).isVisible();}return n;},isEmptyInlineRemoveable:function(){if(!k.$removeEmpty[this.getName()])return false;var n=this.getChildren();for(var o=0,p=n.count();o<p;o++){var q=n.getItem(o);if(q.type==1&&q.getAttribute('_cke_bookmark'))continue;if(q.type==1&&!q.isEmptyInlineRemoveable()||q.type==3&&j.trim(q.getText()))return false;}return true;},hasAttributes:h&&(g.ie7Compat||g.ie6Compat)?function(){var n=this.$.attributes;for(var o=0;o<n.length;o++){var p=n[o];switch(p.nodeName){case 'class':if(this.getAttribute('class'))return true;case '_cke_expando':continue;default:if(p.specified)return true;}}return false;}:function(){var n=this.$.attributes,o=n.length,p={_cke_expando:1,_moz_dirty:1};return o>0&&(o>2||!p[n[0].nodeName]||o==2&&!p[n[1].nodeName]);},hasAttribute:function(n){var o=this.$.attributes.getNamedItem(n);return!!(o&&o.specified);},hide:function(){this.setStyle('display','none');},moveChildren:function(n,o){var p=this.$;n=n.$;if(p==n)return;var q;if(o)while(q=p.lastChild)n.insertBefore(p.removeChild(q),n.firstChild);else while(q=p.firstChild)n.appendChild(p.removeChild(q));},mergeSiblings:(function(){function n(o,p,q){if(p&&p.type==1){var r=[];while(p.getAttribute('_cke_bookmark')||p.isEmptyInlineRemoveable()){r.push(p);p=q?p.getNext():p.getPrevious();if(!p||p.type!=1)return;}if(o.isIdentical(p)){var s=q?o.getLast():o.getFirst();while(r.length)r.shift().move(o,!q);p.moveChildren(o,!q);p.remove();if(s&&s.type==1)s.mergeSiblings();}}};return function(){var o=this;if(!(k.$removeEmpty[o.getName()]||o.is('a')))return;n(o,o.getNext(),true);n(o,o.getPrevious());};})(),show:function(){this.setStyles({display:'',visibility:''});
},setAttribute:(function(){var n=function(o,p){this.$.setAttribute(o,p);return this;};if(h&&(g.ie7Compat||g.ie6Compat))return function(o,p){var q=this;if(o=='class')q.$.className=p;else if(o=='style')q.$.style.cssText=p;else if(o=='tabindex')q.$.tabIndex=p;else if(o=='checked')q.$.checked=p;else n.apply(q,arguments);return q;};else return n;})(),setAttributes:function(n){for(var o in n)this.setAttribute(o,n[o]);return this;},setValue:function(n){this.$.value=n;return this;},removeAttribute:(function(){var n=function(o){this.$.removeAttribute(o);};if(h&&(g.ie7Compat||g.ie6Compat))return function(o){if(o=='class')o='className';else if(o=='tabindex')o='tabIndex';n.call(this,o);};else return n;})(),removeAttributes:function(n){if(j.isArray(n))for(var o=0;o<n.length;o++)this.removeAttribute(n[o]);else for(var p in n)n.hasOwnProperty(p)&&this.removeAttribute(p);},removeStyle:function(n){var o=this;o.setStyle(n,'');if(o.$.style.removeAttribute)o.$.style.removeAttribute(j.cssStyleToDomStyle(n));if(!o.$.style.cssText)o.removeAttribute('style');},setStyle:function(n,o){this.$.style[j.cssStyleToDomStyle(n)]=o;return this;},setStyles:function(n){for(var o in n)this.setStyle(o,n[o]);return this;},setOpacity:function(n){if(h){n=Math.round(n*100);this.setStyle('filter',n>=100?'':'progid:DXImageTransform.Microsoft.Alpha(opacity='+n+')');}else this.setStyle('opacity',n);},unselectable:g.gecko?function(){this.$.style.MozUserSelect='none';this.on('dragstart',function(n){n.data.preventDefault();});}:g.webkit?function(){this.$.style.KhtmlUserSelect='none';this.on('dragstart',function(n){n.data.preventDefault();});}:function(){if(h||g.opera){var n=this.$,o,p=0;n.unselectable='on';while(o=n.all[p++])switch(o.tagName.toLowerCase()){case 'iframe':case 'textarea':case 'input':case 'select':break;default:o.unselectable='on';}}},getPositionedAncestor:function(){var n=this;while(n.getName()!='html'){if(n.getComputedStyle('position')!='static')return n;n=n.getParent();}return null;},getDocumentPosition:function(n){var I=this;var o=0,p=0,q=I.getDocument().getBody(),r=I.getDocument().$.compatMode=='BackCompat',s=I.getDocument();if(document.documentElement.getBoundingClientRect){var t=I.$.getBoundingClientRect(),u=s.$,v=u.documentElement,w=v.clientTop||q.$.clientTop||0,x=v.clientLeft||q.$.clientLeft||0,y=true;if(h){var z=s.getDocumentElement().contains(I),A=s.getBody().contains(I);y=r&&A||!r&&z;}if(y){o=t.left+(!r&&v.scrollLeft||q.$.scrollLeft);o-=x;p=t.top+(!r&&v.scrollTop||q.$.scrollTop);
p-=w;}}else{var B=I,C=null,D;while(B&&!(B.getName()=='body'||B.getName()=='html')){o+=B.$.offsetLeft-B.$.scrollLeft;p+=B.$.offsetTop-B.$.scrollTop;if(!B.equals(I)){o+=B.$.clientLeft||0;p+=B.$.clientTop||0;}var E=C;while(E&&!E.equals(B)){o-=E.$.scrollLeft;p-=E.$.scrollTop;E=E.getParent();}C=B;B=(D=B.$.offsetParent)?new m(D):null;}}if(n){var F=I.getWindow(),G=n.getWindow();if(!F.equals(G)&&F.$.frameElement){var H=new m(F.$.frameElement).getDocumentPosition(n);o+=H.x;p+=H.y;}}if(!document.documentElement.getBoundingClientRect)if(g.gecko&&!r){o+=I.$.clientLeft?1:0;p+=I.$.clientTop?1:0;}return{x:o,y:p};},scrollIntoView:function(n){var t=this;var o=t.getWindow(),p=o.getViewPaneSize().height,q=p*-1;if(n)q+=p;else{q+=t.$.offsetHeight||0;q+=parseInt(t.getComputedStyle('marginBottom')||0,10)||0;}var r=t.getDocumentPosition();q+=r.y;q=q<0?0:q;var s=o.getScrollPosition().y;if(q>s||q<s-p)o.$.scrollTo(0,q);},setState:function(n){var o=this;switch(n){case 1:o.addClass('cke_on');o.removeClass('cke_off');o.removeClass('cke_disabled');break;case 0:o.addClass('cke_disabled');o.removeClass('cke_off');o.removeClass('cke_on');break;default:o.addClass('cke_off');o.removeClass('cke_on');o.removeClass('cke_disabled');break;}},getFrameDocument:function(){var n=this.$;try{n.contentWindow.document;}catch(o){n.src=n.src;if(h&&g.version<7)window.showModalDialog('javascript:document.write("<script>window.setTimeout(function(){window.close();},50);</script>")');}return n&&new l(n.contentWindow.document);},copyAttributes:function(n,o){var u=this;var p=u.$.attributes;o=o||{};for(var q=0;q<p.length;q++){var r=p[q],s=r.nodeName.toLowerCase(),t;if(s in o)continue;if(s=='checked'&&(t=u.getAttribute(s)))n.setAttribute(s,t);else if(r.specified||h&&r.nodeValue&&s=='value'){t=u.getAttribute(s);if(t===null)t=r.nodeValue;n.setAttribute(s,t);}}if(u.$.style.cssText!=='')n.$.style.cssText=u.$.style.cssText;},renameNode:function(n){var q=this;if(q.getName()==n)return;var o=q.getDocument(),p=new m(n,o);q.copyAttributes(p);q.moveChildren(p);q.getParent()&&q.$.parentNode.replaceChild(p.$,q.$);p.$._cke_expando=q.$._cke_expando;q.$=p.$;},getChild:function(n){var o=this.$;if(!n.slice)o=o.childNodes[n];else while(n.length>0&&o)o=o.childNodes[n.shift()];return o?new i.node(o):null;},getChildCount:function(){return this.$.childNodes.length;},disableContextMenu:function(){this.on('contextmenu',function(n){if(!n.data.getTarget().hasClass('cke_enable_context_menu'))n.data.preventDefault();});},setSize:(function(){var n={width:['border-left-width','border-right-width','padding-left','padding-right'],height:['border-top-width','border-bottom-width','padding-top','padding-bottom']};
return function(o,p,q){if(typeof p=='number'){if(q&&!(h&&g.quirks)){var r=0;for(var s=0,t=n[o].length;s<t;s++)r+=parseInt(this.getComputedStyle(n[o][s])||0,10)||0;p-=r;}this.setStyle(o,p+'px');}};})(),getDirection:function(n){return n?this.getComputedStyle('direction'):this.getStyle('direction')||this.getAttribute('dir');}});f.command=function(n,o){this.uiItems=[];this.exec=function(p){if(this.state==0)return false;if(this.editorFocus)n.focus();return o.exec.call(this,n,p)!==false;};j.extend(this,o,{modes:{wysiwyg:1},editorFocus:1,state:2});f.event.call(this);};f.command.prototype={enable:function(){var n=this;if(n.state==0)n.setState(!n.preserveState||typeof n.previousState=='undefined'?2:n.previousState);},disable:function(){this.setState(0);},setState:function(n){var o=this;if(o.state==n)return false;o.previousState=o.state;o.state=n;o.fire('state');return true;},toggleState:function(){var n=this;if(n.state==2)n.setState(1);else if(n.state==1)n.setState(2);}};f.event.implementOn(f.command.prototype,true);f.ENTER_P=1;f.ENTER_BR=2;f.ENTER_DIV=3;f.config={customConfig:'config.js',autoUpdateElement:true,baseHref:'',contentsCss:f.basePath+'contents.css',contentsLangDirection:'ui',contentsLanguage:'',language:'',defaultLanguage:'en',enterMode:1,forceEnterMode:false,shiftEnterMode:2,corePlugins:'',docType:'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">',bodyId:'',bodyClass:'',fullPage:false,height:200,plugins:'about,a11yhelp,basicstyles,bidi,blockquote,button,clipboard,colorbutton,colordialog,contextmenu,dialogadvtab,div,elementspath,enterkey,entities,filebrowser,find,flash,font,format,forms,horizontalrule,htmldataprocessor,image,indent,justify,keystrokes,link,list,liststyle,maximize,newpage,pagebreak,pastefromword,pastetext,popup,preview,print,removeformat,resize,save,scayt,smiley,showblocks,showborders,sourcearea,stylescombo,table,tabletools,specialchar,tab,templates,toolbar,undo,wysiwygarea,wsc',extraPlugins:'',removePlugins:'',protectedSource:[],tabIndex:0,theme:'default',skin:'kama',width:'',baseFloatZIndex:10000};var n=f.config;f.focusManager=function(o){if(o.focusManager)return o.focusManager;this.hasFocus=false;this._={editor:o};return this;};f.focusManager.prototype={focus:function(){var p=this;if(p._.timer)clearTimeout(p._.timer);if(!p.hasFocus){if(f.currentInstance)f.currentInstance.focusManager.forceBlur();var o=p._.editor;o.container.getChild(1).addClass('cke_focus');p.hasFocus=true;
o.fire('focus');}},blur:function(){var o=this;if(o._.timer)clearTimeout(o._.timer);o._.timer=setTimeout(function(){delete o._.timer;o.forceBlur();},100);},forceBlur:function(){if(this.hasFocus){var o=this._.editor;o.container.getChild(1).removeClass('cke_focus');this.hasFocus=false;o.fire('blur');}}};(function(){var o={};f.lang={languages:{af:1,ar:1,bg:1,bn:1,bs:1,ca:1,cs:1,cy:1,da:1,de:1,el:1,'en-au':1,'en-ca':1,'en-gb':1,en:1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fo:1,'fr-ca':1,fr:1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,is:1,it:1,ja:1,km:1,ko:1,lt:1,lv:1,mn:1,ms:1,nb:1,nl:1,no:1,pl:1,'pt-br':1,pt:1,ro:1,ru:1,sk:1,sl:1,'sr-latn':1,sr:1,sv:1,th:1,tr:1,uk:1,vi:1,'zh-cn':1,zh:1},load:function(p,q,r){if(!p||!f.lang.languages[p])p=this.detect(q,p);if(!this[p])f.scriptLoader.load(f.getUrl('lang/'+p+'.js'),function(){r(p,this[p]);},this);else r(p,this[p]);},detect:function(p,q){var r=this.languages;q=q||navigator.userLanguage||navigator.language;var s=q.toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/),t=s[1],u=s[2];if(r[t+'-'+u])t=t+'-'+u;else if(!r[t])t=null;f.lang.detect=t?function(){return t;}:function(v){return v;};return t||p;}};})();f.scriptLoader=(function(){var o={},p={};return{load:function(q,r,s,t,u){var v=typeof q=='string';if(v)q=[q];if(!s)s=f;var w=q.length,x=[],y=[],z=function(E){if(r)if(v)r.call(s,E);else r.call(s,x,y);};if(w===0){z(true);return;}var A=function(E,F){(F?x:y).push(E);if(--w<=0){u&&f.document.getDocumentElement().removeStyle('cursor');z(F);}},B=function(E,F){o[E]=1;var G=p[E];delete p[E];for(var H=0;H<G.length;H++)G[H](E,F);},C=function(E){if(t!==true&&o[E]){A(E,true);return;}var F=p[E]||(p[E]=[]);F.push(A);if(F.length>1)return;var G=new m('script');G.setAttributes({type:'text/javascript',src:E});if(r)if(h)G.$.onreadystatechange=function(){if(G.$.readyState=='loaded'||G.$.readyState=='complete'){G.$.onreadystatechange=null;B(E,true);}};else{G.$.onload=function(){setTimeout(function(){B(E,true);},0);};G.$.onerror=function(){B(E,false);};}G.appendTo(f.document.getHead());};u&&f.document.getDocumentElement().setStyle('cursor','wait');for(var D=0;D<w;D++)C(q[D]);},loadCode:function(q){var r=new m('script');r.setAttribute('type','text/javascript');r.appendText(q);r.appendTo(f.document.getHead());}};})();f.resourceManager=function(o,p){var q=this;q.basePath=o;q.fileName=p;q.registered={};q.loaded={};q.externals={};q._={waitingList:{}};};f.resourceManager.prototype={add:function(o,p){if(this.registered[o])throw '[CKEDITOR.resourceManager.add] The resource name "'+o+'" is already registered.';
f.fire(o+j.capitalize(this.fileName)+'Ready',this.registered[o]=p||{});},get:function(o){return this.registered[o]||null;},getPath:function(o){var p=this.externals[o];return f.getUrl(p&&p.dir||this.basePath+o+'/');},getFilePath:function(o){var p=this.externals[o];return f.getUrl(this.getPath(o)+(p&&typeof p.file=='string'?p.file:this.fileName+'.js'));},addExternal:function(o,p,q){o=o.split(',');for(var r=0;r<o.length;r++){var s=o[r];this.externals[s]={dir:p,file:q};}},load:function(o,p,q){if(!j.isArray(o))o=o?[o]:[];var r=this.loaded,s=this.registered,t=[],u={},v={};for(var w=0;w<o.length;w++){var x=o[w];if(!x)continue;if(!r[x]&&!s[x]){var y=this.getFilePath(x);t.push(y);if(!(y in u))u[y]=[];u[y].push(x);}else v[x]=this.get(x);}f.scriptLoader.load(t,function(z,A){if(A.length)throw '[CKEDITOR.resourceManager.load] Resource name "'+u[A[0]].join(',')+'" was not found at "'+A[0]+'".';for(var B=0;B<z.length;B++){var C=u[z[B]];for(var D=0;D<C.length;D++){var E=C[D];v[E]=this.get(E);r[E]=1;}}p.call(q,v);},this);}};f.plugins=new f.resourceManager('plugins/','plugin');var o=f.plugins;o.load=j.override(o.load,function(p){return function(q,r,s){var t={},u=function(v){p.call(this,v,function(w){j.extend(t,w);var x=[];for(var y in w){var z=w[y],A=z&&z.requires;if(A)for(var B=0;B<A.length;B++){if(!t[A[B]])x.push(A[B]);}}if(x.length)u.call(this,x);else{for(y in t){z=t[y];if(z.onLoad&&!z.onLoad._called){z.onLoad();z.onLoad._called=1;}}if(r)r.call(s||window,t);}},this);};u.call(this,q);};});o.setLang=function(p,q,r){var s=this.get(p),t=s.lang||(s.lang={});t[q]=r;};(function(){var p={},q=function(r,s){var t=function(){u.removeAllListeners();p[r]=1;s();},u=new m('img');u.on('load',t);u.on('error',t);u.setAttribute('src',r);};f.imageCacher={load:function(r,s){var t=r.length,u=new f.event();u.on('loaded',function(){u.finished=1;});if(s)u.on('loaded',s);var v=function(){if(--t===0)u.fire('loaded');};for(var w=0;w<r.length;w++){var x=r[w];if(p[x])v();else q(x,v);}return u;}};})();f.skins=(function(){var p={},q={},r={},s=function(t,u,v,w){var x=p[u];if(!t.skin){t.skin=x;if(x.init)x.init(t);}var y=function(I){for(var J=0;J<I.length;J++)I[J]=f.getUrl(r[u]+I[J]);};function z(I,J){return I.replace(/url\s*\(([\s'"]*)(.*?)([\s"']*)\)/g,function(K,L,M,N){if(/^\/|^\w?:/.test(M))return K;else return 'url('+J+L+M+N+')';});};var A=x.preload;if(A&&A.length>0){if(!q[u]){y(A);q[u]=f.imageCacher.load(A);}if(!q[u].finished){q[u].on('loaded',function(){s(t,u,v,w);});return;}}v=x[v];var B=!v||!!v._isLoaded;
if(B)w&&w();else{var C=v._pending||(v._pending=[]);C.push(w);if(C.length>1)return;var D=!v.css||!v.css.length,E=!v.js||!v.js.length,F=function(){if(D&&E){v._isLoaded=1;for(var I=0;I<C.length;I++){if(C[I])C[I]();}}};if(!D){var G=v.css;if(j.isArray(G)){y(G);for(var H=0;H<G.length;H++)f.document.appendStyleSheet(G[H]);}else{G=z(G,f.getUrl(r[u]));f.document.appendStyleText(G);}v.css=G;D=1;}if(!E){y(v.js);f.scriptLoader.load(v.js,function(){E=1;F();});}F();}};return{add:function(t,u){p[t]=u;u.skinPath=r[t]||(r[t]=f.getUrl('skins/'+t+'/'));},load:function(t,u,v){var w=t.skinName,x=t.skinPath;if(p[w])s(t,w,u,v);else{r[w]=x;f.scriptLoader.load(f.getUrl(x+'skin.js'),function(){s(t,w,u,v);});}}};})();f.themes=new f.resourceManager('themes/','theme');f.ui=function(p){if(p.ui)return p.ui;this._={handlers:{},items:{},editor:p};return this;};var p=f.ui;p.prototype={add:function(q,r,s){this._.items[q]={type:r,command:s.command||null,args:Array.prototype.slice.call(arguments,2)};},create:function(q){var v=this;var r=v._.items[q],s=r&&v._.handlers[r.type],t=r&&r.command&&v._.editor.getCommand(r.command),u=s&&s.create.apply(v,r.args);if(t)t.uiItems.push(u);return u;},addHandler:function(q,r){this._.handlers[q]=r;}};(function(){var q=0,r=function(){var C='editor'+ ++q;return f.instances&&f.instances[C]?r():C;},s={},t=function(C){var D=C.config.customConfig;if(!D)return false;D=f.getUrl(D);var E=s[D]||(s[D]={});if(E.fn){E.fn.call(C,C.config);if(f.getUrl(C.config.customConfig)==D||!t(C))C.fireOnce('customConfigLoaded');}else f.scriptLoader.load(D,function(){if(f.editorConfig)E.fn=f.editorConfig;else E.fn=function(){};t(C);});return true;},u=function(C,D){C.on('customConfigLoaded',function(){if(D){if(D.on)for(var E in D.on)C.on(E,D.on[E]);j.extend(C.config,D,true);delete C.config.on;}v(C);});if(D&&D.customConfig!=undefined)C.config.customConfig=D.customConfig;if(!t(C))C.fireOnce('customConfigLoaded');},v=function(C){var D=C.config.skin.split(','),E=D[0],F=f.getUrl(D[1]||'skins/'+E+'/');C.skinName=E;C.skinPath=F;C.skinClass='cke_skin_'+E;C.tabIndex=C.config.tabIndex||C.element.getAttribute('tabindex')||0;C.fireOnce('configLoaded');y(C);},w=function(C){f.lang.load(C.config.language,C.config.defaultLanguage,function(D,E){C.langCode=D;C.lang=j.prototypedCopy(E);if(g.gecko&&g.version<10900&&C.lang.dir=='rtl')C.lang.dir='ltr';var F=C.config;F.contentsLangDirection=='ui'&&(F.contentsLangDirection=C.lang.dir);x(C);});},x=function(C){var D=C.config,E=D.plugins,F=D.extraPlugins,G=D.removePlugins;
if(F){var H=new RegExp('(?:^|,)(?:'+F.replace(/\s*,\s*/g,'|')+')(?=,|$)','g');E=E.replace(H,'');E+=','+F;}if(G){H=new RegExp('(?:^|,)(?:'+G.replace(/\s*,\s*/g,'|')+')(?=,|$)','g');E=E.replace(H,'');}o.load(E.split(','),function(I){var J=[],K=[],L=[];C.plugins=I;for(var M in I){var N=I[M],O=N.lang,P=o.getPath(M),Q=null;N.path=P;if(O){Q=j.indexOf(O,C.langCode)>=0?C.langCode:O[0];if(!N.lang[Q])L.push(f.getUrl(P+'lang/'+Q+'.js'));else{j.extend(C.lang,N.lang[Q]);Q=null;}}K.push(Q);J.push(N);}f.scriptLoader.load(L,function(){var R=['beforeInit','init','afterInit'];for(var S=0;S<R.length;S++)for(var T=0;T<J.length;T++){var U=J[T];if(S===0&&K[T]&&U.lang)j.extend(C.lang,U.lang[K[T]]);if(U[R[S]])U[R[S]](C);}C.fire('pluginsLoaded');z(C);});});},y=function(C){f.skins.load(C,'editor',function(){w(C);});},z=function(C){var D=C.config.theme;f.themes.load(D,function(){var E=C.theme=f.themes.get(D);E.path=f.themes.getPath(D);E.build(C);if(C.config.autoUpdateElement)A(C);});},A=function(C){var D=C.element;if(C.elementMode==1&&D.is('textarea')){var E=D.$.form&&new m(D.$.form);if(E){function F(){C.updateElement();};E.on('submit',F);if(!E.$.submit.nodeName)E.$.submit=j.override(E.$.submit,function(G){return function(){C.updateElement();if(G.apply)G.apply(this,arguments);else G();};});C.on('destroy',function(){E.removeListener('submit',F);});}}};function B(){var C,D=this._.commands,E=this.mode;for(var F in D){C=D[F];C[C.startDisabled?'disable':C.modes[E]?'enable':'disable']();}};f.editor.prototype._init=function(){var E=this;var C=m.get(E._.element),D=E._.instanceConfig;delete E._.element;delete E._.instanceConfig;E._.commands={};E._.styles=[];E.element=C;E.name=C&&E.elementMode==1&&(C.getId()||C.getNameAtt())||r();if(E.name in f.instances)throw '[CKEDITOR.editor] The instance "'+E.name+'" already exists.';E.id=j.getNextId();E.config=j.prototypedCopy(n);E.ui=new p(E);E.focusManager=new f.focusManager(E);f.fire('instanceCreated',null,E);E.on('mode',B,null,null,1);u(E,D);};})();j.extend(f.editor.prototype,{addCommand:function(q,r){return this._.commands[q]=new f.command(this,r);},addCss:function(q){this._.styles.push(q);},destroy:function(q){var w=this;if(!q)w.updateElement();if(w.mode)w._.modes[w.mode].unload(w.getThemeSpace('contents'));w.theme.destroy(w);var r,s=0,t,u,v;if(w.toolbox){r=w.toolbox.toolbars;for(;s<r.length;s++){u=r[s].items;for(t=0;t<u.length;t++){v=u[t];if(v.clickFn)j.removeFunction(v.clickFn);if(v.keyDownFn)j.removeFunction(v.keyDownFn);if(v.index)p.button._.instances[v.index]=null;
}}}if(w.contextMenu)j.removeFunction(w.contextMenu._.functionId);if(w._.filebrowserFn)j.removeFunction(w._.filebrowserFn);w.fire('destroy');f.remove(w);f.fire('instanceDestroyed',null,w);},execCommand:function(q,r){var s=this.getCommand(q),t={name:q,commandData:r,command:s};if(s&&s.state!=0)if(this.fire('beforeCommandExec',t)!==true){t.returnValue=s.exec(t.commandData);if(!s.async&&this.fire('afterCommandExec',t)!==true)return t.returnValue;}return false;},getCommand:function(q){return this._.commands[q];},getData:function(){var s=this;s.fire('beforeGetData');var q=s._.data;if(typeof q!='string'){var r=s.element;if(r&&s.elementMode==1)q=r.is('textarea')?r.getValue():r.getHtml();else q='';}q={dataValue:q};s.fire('getData',q);return q.dataValue;},getSnapshot:function(){var q=this.fire('getSnapshot');if(typeof q!='string'){var r=this.element;if(r&&this.elementMode==1)q=r.is('textarea')?r.getValue():r.getHtml();}return q;},loadSnapshot:function(q){this.fire('loadSnapshot',q);},setData:function(q,r){if(r)this.on('dataReady',function(t){t.removeListener();r.call(t.editor);});var s={dataValue:q};this.fire('setData',s);this._.data=s.dataValue;this.fire('afterSetData',s);},insertHtml:function(q){this.fire('insertHtml',q);},insertElement:function(q){this.fire('insertElement',q);},checkDirty:function(){return this.mayBeDirty&&this._.previousValue!==this.getSnapshot();},resetDirty:function(){if(this.mayBeDirty)this._.previousValue=this.getSnapshot();},updateElement:function(){var s=this;var q=s.element;if(q&&s.elementMode==1){var r=s.getData();if(s.config.htmlEncodeOutput)r=j.htmlEncode(r);if(q.is('textarea'))q.setValue(r);else q.setHtml(r);}}});f.on('loaded',function(){var q=f.editor._pending;if(q){delete f.editor._pending;for(var r=0;r<q.length;r++)q[r]._init();}});f.htmlParser=function(){this._={htmlPartsRegex:new RegExp("<(?:(?:\\/([^>]+)>)|(?:!--([\\S|\\s]*?)-->)|(?:([^\\s>]+)\\s*((?:(?:[^\"'>]+)|(?:\"[^\"]*\")|(?:'[^']*'))*)\\/?>))",'g')};};(function(){var q=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,r={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1};f.htmlParser.prototype={onTagOpen:function(){},onTagClose:function(){},onText:function(){},onCDATA:function(){},onComment:function(){},parse:function(s){var F=this;var t,u,v=0,w;while(t=F._.htmlPartsRegex.exec(s)){var x=t.index;if(x>v){var y=s.substring(v,x);if(w)w.push(y);else F.onText(y);}v=F._.htmlPartsRegex.lastIndex;
if(u=t[1]){u=u.toLowerCase();if(w&&k.$cdata[u]){F.onCDATA(w.join(''));w=null;}if(!w){F.onTagClose(u);continue;}}if(w){w.push(t[0]);continue;}if(u=t[3]){u=u.toLowerCase();if(/="/.test(u))continue;var z={},A,B=t[4],C=!!(B&&B.charAt(B.length-1)=='/');if(B)while(A=q.exec(B)){var D=A[1].toLowerCase(),E=A[2]||A[3]||A[4]||'';if(!E&&r[D])z[D]=D;else z[D]=E;}F.onTagOpen(u,z,C);if(!w&&k.$cdata[u])w=[];continue;}if(u=t[2])F.onComment(u);}if(s.length>v)F.onText(s.substring(v,s.length));}};})();f.htmlParser.comment=function(q){this.value=q;this._={isBlockLike:false};};f.htmlParser.comment.prototype={type:8,writeHtml:function(q,r){var s=this.value;if(r){if(!(s=r.onComment(s,this)))return;if(typeof s!='string'){s.parent=this.parent;s.writeHtml(q,r);return;}}q.comment(s);}};(function(){var q=/[\t\r\n ]{2,}|[\t\r\n]/g;f.htmlParser.text=function(r){this.value=r;this._={isBlockLike:false};};f.htmlParser.text.prototype={type:3,writeHtml:function(r,s){var t=this.value;if(s&&!(t=s.onText(t,this)))return;r.text(t);}};})();(function(){f.htmlParser.cdata=function(q){this.value=q;};f.htmlParser.cdata.prototype={type:3,writeHtml:function(q){q.write(this.value);}};})();f.htmlParser.fragment=function(){this.children=[];this.parent=null;this._={isBlockLike:true,hasInlineStarted:false};};(function(){var q={colgroup:1,dd:1,dt:1,li:1,option:1,p:1,td:1,tfoot:1,th:1,thead:1,tr:1},r=j.extend({table:1,ul:1,ol:1,dl:1},k.table,k.ul,k.ol,k.dl),s=k.$list,t=k.$listItem;f.htmlParser.fragment.fromHtml=function(u,v){var w=new f.htmlParser(),x=[],y=new f.htmlParser.fragment(),z=[],A=[],B=y,C=false,D;function E(J){var K;if(z.length>0)for(var L=0;L<z.length;L++){var M=z[L],N=M.name,O=k[N],P=B.name&&k[B.name];if((!P||P[N])&&(!J||!O||O[J]||!k[J])){if(!K){F();K=1;}M=M.clone();M.parent=B;B=M;z.splice(L,1);L--;}}};function F(J){while(A.length-(J||0)>0)B.add(A.shift());};function G(J,K,L){K=K||B||y;if(v&&!K.type){var M,N;if(J.attributes&&(N=J.attributes._cke_real_element_type))M=N;else M=J.name;if(M&&!(M in k.$body)&&!(M in k.$nonBodyContent)){var O=B;B=K;w.onTagOpen(v,{});K=B;if(L)B=O;}}if(J._.isBlockLike&&J.name!='pre'){var P=J.children.length,Q=J.children[P-1],R;if(Q&&Q.type==3)if(!(R=j.rtrim(Q.value)))J.children.length=P-1;else Q.value=R;}K.add(J);if(J.returnPoint){B=J.returnPoint;delete J.returnPoint;}};w.onTagOpen=function(J,K,L){var M=new f.htmlParser.element(J,K);if(M.isUnknown&&L)M.isEmpty=true;if(k.$removeEmpty[J]){z.push(M);return;}else if(J=='pre')C=true;else if(J=='br'&&C){B.add(new f.htmlParser.text('\n'));
return;}if(J=='br'){A.push(M);return;}var N=B.name,O=N&&(k[N]||(B._.isBlockLike?k.div:k.span));if(O&&!M.isUnknown&&!B.isUnknown&&!O[J]){var P=false,Q;if(J in s&&N in s){var R=B.children,S=R[R.length-1];if(!(S&&S.name in t))G(S=new f.htmlParser.element('li'),B);D=B,Q=S;}else if(J==N)G(B,B.parent);else if(J in k.$listItem){w.onTagOpen('ul',{});Q=B;P=true;}else{if(r[N]){if(!D)D=B;}else{G(B,B.parent,true);if(!q[N])z.unshift(B);}P=true;}if(Q)B=Q;else B=B.returnPoint||B.parent;if(P){w.onTagOpen.apply(this,arguments);return;}}E(J);F();M.parent=B;M.returnPoint=D;D=0;if(M.isEmpty)G(M);else B=M;};w.onTagClose=function(J){for(var K=z.length-1;K>=0;K--){if(J==z[K].name){z.splice(K,1);return;}}var L=[],M=[],N=B;while(N.type&&N.name!=J){if(!N._.isBlockLike)M.unshift(N);L.push(N);N=N.parent;}if(N.type){for(K=0;K<L.length;K++){var O=L[K];G(O,O.parent);}B=N;if(B.name=='pre')C=false;if(N._.isBlockLike)F();G(N,N.parent);if(N==B)B=B.parent;z=z.concat(M);}if(J=='body')v=false;};w.onText=function(J){if(!B._.hasInlineStarted&&!C){J=j.ltrim(J);if(J.length===0)return;}F();E();if(v&&(!B.type||B.name=='body')&&j.trim(J))this.onTagOpen(v,{});if(!C)J=J.replace(/[\t\r\n ]{2,}|[\t\r\n]/g,' ');B.add(new f.htmlParser.text(J));};w.onCDATA=function(J){B.add(new f.htmlParser.cdata(J));};w.onComment=function(J){E();B.add(new f.htmlParser.comment(J));};w.parse(u);F(!h&&1);while(B.type){var H=B.parent,I=B;if(v&&(!H.type||H.name=='body')&&!k.$body[I.name]){B=H;w.onTagOpen(v,{});H=B;}H.add(I);B=H;}return y;};f.htmlParser.fragment.prototype={add:function(u){var x=this;var v=x.children.length,w=v>0&&x.children[v-1]||null;if(w){if(u._.isBlockLike&&w.type==3){w.value=j.rtrim(w.value);if(w.value.length===0){x.children.pop();x.add(u);return;}}w.next=u;}u.previous=w;u.parent=x;x.children.push(u);x._.hasInlineStarted=u.type==3||u.type==1&&!u._.isBlockLike;},writeHtml:function(u,v){var w;this.filterChildren=function(){var x=new f.htmlParser.basicWriter();this.writeChildrenHtml.call(this,x,v,true);var y=x.getHtml();this.children=new f.htmlParser.fragment.fromHtml(y).children;w=1;};!this.name&&v&&v.onFragment(this);this.writeChildrenHtml(u,w?null:v);},writeChildrenHtml:function(u,v){for(var w=0;w<this.children.length;w++)this.children[w].writeHtml(u,v);}};})();f.htmlParser.element=function(q,r){var w=this;w.name=q;w.attributes=r||(r={});w.children=[];var s=r._cke_real_element_type||q,t=k,u=!!(t.$nonBodyContent[s]||t.$block[s]||t.$listItem[s]||t.$tableContent[s]||t.$nonEditable[s]||s=='br'),v=!!t.$empty[q];w.isEmpty=v;
w.isUnknown=!t[q];w._={isBlockLike:u,hasInlineStarted:v||!u};};(function(){var q=function(r,s){r=r[0];s=s[0];return r<s?-1:r>s?1:0;};f.htmlParser.element.prototype={type:1,add:f.htmlParser.fragment.prototype.add,clone:function(){return new f.htmlParser.element(this.name,this.attributes);},writeHtml:function(r,s){var t=this.attributes,u=this,v=u.name,w,x,y,z;u.filterChildren=function(){if(!z){var E=new f.htmlParser.basicWriter();f.htmlParser.fragment.prototype.writeChildrenHtml.call(u,E,s);u.children=new f.htmlParser.fragment.fromHtml(E.getHtml()).children;z=1;}};if(s){for(;;){if(!(v=s.onElementName(v)))return;u.name=v;if(!(u=s.onElement(u)))return;u.parent=this.parent;if(u.name==v)break;if(u.type!=1){u.writeHtml(r,s);return;}v=u.name;if(!v){this.writeChildrenHtml.call(u,r,z?null:s);return;}}t=u.attributes;}r.openTag(v,t);var A=[];for(var B=0;B<2;B++)for(w in t){x=w;y=t[w];if(B==1)A.push([w,y]);else if(s){for(;;){if(!(x=s.onAttributeName(w))){delete t[w];break;}else if(x!=w){delete t[w];w=x;continue;}else break;}if(x)if((y=s.onAttribute(u,x,y))===false)delete t[x];else t[x]=y;}}if(r.sortAttributes)A.sort(q);var C=A.length;for(B=0;B<C;B++){var D=A[B];r.attribute(D[0],D[1]);}r.openTagClose(v,u.isEmpty);if(!u.isEmpty){this.writeChildrenHtml.call(u,r,z?null:s);r.closeTag(v);}},writeChildrenHtml:function(r,s){f.htmlParser.fragment.prototype.writeChildrenHtml.apply(this,arguments);}};})();(function(){f.htmlParser.filter=j.createClass({$:function(v){this._={elementNames:[],attributeNames:[],elements:{$length:0},attributes:{$length:0}};if(v)this.addRules(v,10);},proto:{addRules:function(v,w){var x=this;if(typeof w!='number')w=10;r(x._.elementNames,v.elementNames,w);r(x._.attributeNames,v.attributeNames,w);s(x._.elements,v.elements,w);s(x._.attributes,v.attributes,w);x._.text=t(x._.text,v.text,w)||x._.text;x._.comment=t(x._.comment,v.comment,w)||x._.comment;x._.root=t(x._.root,v.root,w)||x._.root;},onElementName:function(v){return q(v,this._.elementNames);},onAttributeName:function(v){return q(v,this._.attributeNames);},onText:function(v){var w=this._.text;return w?w.filter(v):v;},onComment:function(v,w){var x=this._.comment;return x?x.filter(v,w):v;},onFragment:function(v){var w=this._.root;return w?w.filter(v):v;},onElement:function(v){var A=this;var w=[A._.elements['^'],A._.elements[v.name],A._.elements.$],x,y;for(var z=0;z<3;z++){x=w[z];if(x){y=x.filter(v,A);if(y===false)return null;if(y&&y!=v)return A.onNode(y);if(v.parent&&!v.name)break;}}return v;},onNode:function(v){var w=v.type;
return w==1?this.onElement(v):w==3?new f.htmlParser.text(this.onText(v.value)):w==8?new f.htmlParser.comment(this.onComment(v.value)):null;},onAttribute:function(v,w,x){var y=this._.attributes[w];if(y){var z=y.filter(x,v,this);if(z===false)return false;if(typeof z!='undefined')return z;}return x;}}});function q(v,w){for(var x=0;v&&x<w.length;x++){var y=w[x];v=v.replace(y[0],y[1]);}return v;};function r(v,w,x){if(typeof w=='function')w=[w];var y,z,A=v.length,B=w&&w.length;if(B){for(y=0;y<A&&v[y].pri<x;y++){}for(z=B-1;z>=0;z--){var C=w[z];if(C){C.pri=x;v.splice(y,0,C);}}}};function s(v,w,x){if(w)for(var y in w){var z=v[y];v[y]=t(z,w[y],x);if(!z)v.$length++;}};function t(v,w,x){if(w){w.pri=x;if(v){if(!v.splice){if(v.pri>x)v=[w,v];else v=[v,w];v.filter=u;}else r(v,w,x);return v;}else{w.filter=w;return w;}}};function u(v){var w=v.type||v instanceof f.htmlParser.fragment;for(var x=0;x<this.length;x++){if(w)var y=v.type,z=v.name;var A=this[x],B=A.apply(window,arguments);if(B===false)return B;if(w){if(B&&(B.name!=z||B.type!=y))return B;}else if(typeof B!='string')return B;B!=undefined&&(v=B);}return v;};})();f.htmlParser.basicWriter=j.createClass({$:function(){this._={output:[]};},proto:{openTag:function(q,r){this._.output.push('<',q);},openTagClose:function(q,r){if(r)this._.output.push(' />');else this._.output.push('>');},attribute:function(q,r){if(typeof r=='string')r=j.htmlEncodeAttr(r);this._.output.push(' ',q,'="',r,'"');},closeTag:function(q){this._.output.push('</',q,'>');},text:function(q){this._.output.push(q);},comment:function(q){this._.output.push('<!--',q,'-->');},write:function(q){this._.output.push(q);},reset:function(){this._.output=[];this._.indent=false;},getHtml:function(q){var r=this._.output.join('');if(q)this.reset();return r;}}});delete f.loadFullCore;f.instances={};f.document=new l(document);f.add=function(q){f.instances[q.name]=q;q.on('focus',function(){if(f.currentInstance!=q){f.currentInstance=q;f.fire('currentInstance');}});q.on('blur',function(){if(f.currentInstance==q){f.currentInstance=null;f.fire('currentInstance');}});};f.remove=function(q){delete f.instances[q.name];};f.on('instanceDestroyed',function(){if(j.isEmpty(this.instances))f.fire('reset');});f.TRISTATE_ON=1;f.TRISTATE_OFF=2;f.TRISTATE_DISABLED=0;i.comment=j.createClass({base:i.node,$:function(q,r){if(typeof q=='string')q=(r?r.$:document).createComment(q);this.base(q);},proto:{type:8,getOuterHtml:function(){return '<!--'+this.$.nodeValue+'-->';}}});(function(){var q={address:1,blockquote:1,dl:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,li:1,dt:1,dd:1},r={body:1,div:1,table:1,tbody:1,tr:1,td:1,th:1,caption:1,form:1},s=function(t){var u=t.getChildren();
for(var v=0,w=u.count();v<w;v++){var x=u.getItem(v);if(x.type==1&&k.$block[x.getName()])return true;}return false;};i.elementPath=function(t){var z=this;var u=null,v=null,w=[],x=t;while(x){if(x.type==1){if(!z.lastElement)z.lastElement=x;var y=x.getName();if(h&&x.$.scopeName!='HTML')y=x.$.scopeName.toLowerCase()+':'+y;if(!v){if(!u&&q[y])u=x;if(r[y])if(!u&&y=='div'&&!s(x))u=x;else v=x;}w.push(x);if(y=='body')break;}x=x.getParent();}z.block=u;z.blockLimit=v;z.elements=w;};})();i.elementPath.prototype={compare:function(q){var r=this.elements,s=q&&q.elements;if(!s||r.length!=s.length)return false;for(var t=0;t<r.length;t++){if(!r[t].equals(s[t]))return false;}return true;},contains:function(q){var r=this.elements;for(var s=0;s<r.length;s++){if(r[s].getName() in q)return r[s];}return null;}};i.text=function(q,r){if(typeof q=='string')q=(r?r.$:document).createTextNode(q);this.$=q;};i.text.prototype=new i.node();j.extend(i.text.prototype,{type:3,getLength:function(){return this.$.nodeValue.length;},getText:function(){return this.$.nodeValue;},split:function(q){var v=this;if(h&&q==v.getLength()){var r=v.getDocument().createText('');r.insertAfter(v);return r;}var s=v.getDocument(),t=new i.text(v.$.splitText(q),s);if(g.ie8){var u=new i.text('',s);u.insertAfter(t);u.remove();}return t;},substring:function(q,r){if(typeof r!='number')return this.$.nodeValue.substr(q);else return this.$.nodeValue.substring(q,r);}});i.documentFragment=function(q){q=q||f.document;this.$=q.$.createDocumentFragment();};j.extend(i.documentFragment.prototype,m.prototype,{type:11,insertAfterNode:function(q){q=q.$;q.parentNode.insertBefore(this.$,q.nextSibling);}},true,{append:1,appendBogus:1,getFirst:1,getLast:1,appendTo:1,moveChildren:1,insertBefore:1,insertAfterNode:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,getChildCount:1,getChild:1,getChildren:1});(function(){function q(y,z){if(this._.end)return null;var A,B=this.range,C,D=this.guard,E=this.type,F=y?'getPreviousSourceNode':'getNextSourceNode';if(!this._.start){this._.start=1;B.trim();if(B.collapsed){this.end();return null;}}if(!y&&!this._.guardLTR){var G=B.endContainer,H=G.getChild(B.endOffset);this._.guardLTR=function(L,M){return(!M||!G.equals(L))&&(!H||!L.equals(H))&&(L.type!=1||!M||L.getName()!='body');};}if(y&&!this._.guardRTL){var I=B.startContainer,J=B.startOffset>0&&I.getChild(B.startOffset-1);this._.guardRTL=function(L,M){return(!M||!I.equals(L))&&(!J||!L.equals(J))&&(L.type!=1||!M||L.getName()!='body');};}var K=y?this._.guardRTL:this._.guardLTR;
if(D)C=function(L,M){if(K(L,M)===false)return false;return D(L,M);};else C=K;if(this.current)A=this.current[F](false,E,C);else if(y){A=B.endContainer;if(B.endOffset>0){A=A.getChild(B.endOffset-1);if(C(A)===false)A=null;}else A=C(A,true)===false?null:A.getPreviousSourceNode(true,E,C);}else{A=B.startContainer;A=A.getChild(B.startOffset);if(A){if(C(A)===false)A=null;}else A=C(B.startContainer,true)===false?null:B.startContainer.getNextSourceNode(true,E,C);}while(A&&!this._.end){this.current=A;if(!this.evaluator||this.evaluator(A)!==false){if(!z)return A;}else if(z&&this.evaluator)return false;A=A[F](false,E,C);}this.end();return this.current=null;};function r(y){var z,A=null;while(z=q.call(this,y))A=z;return A;};i.walker=j.createClass({$:function(y){this.range=y;this._={};},proto:{end:function(){this._.end=1;},next:function(){return q.call(this);},previous:function(){return q.call(this,1);},checkForward:function(){return q.call(this,0,1)!==false;},checkBackward:function(){return q.call(this,1,1)!==false;},lastForward:function(){return r.call(this);},lastBackward:function(){return r.call(this,1);},reset:function(){delete this.current;this._={};}}});var s={block:1,'list-item':1,table:1,'table-row-group':1,'table-header-group':1,'table-footer-group':1,'table-row':1,'table-column-group':1,'table-column':1,'table-cell':1,'table-caption':1},t={hr:1};m.prototype.isBlockBoundary=function(y){var z=j.extend({},t,y||{});return s[this.getComputedStyle('display')]||z[this.getName()];};i.walker.blockBoundary=function(y){return function(z,A){return!(z.type==1&&z.isBlockBoundary(y));};};i.walker.listItemBoundary=function(){return this.blockBoundary({br:1});};i.walker.bookmark=function(y,z){function A(B){return B&&B.getName&&B.getName()=='span'&&B.hasAttribute('_cke_bookmark');};return function(B){var C,D;C=B&&!B.getName&&(D=B.getParent())&&A(D);C=y?C:C||A(B);return!!(z^C);};};i.walker.whitespaces=function(y){return function(z){var A=z&&z.type==3&&!j.trim(z.getText());return!!(y^A);};};i.walker.invisible=function(y){var z=i.walker.whitespaces();return function(A){var B=z(A)||A.is&&!A.$.offsetHeight;return!!(y^B);};};var u=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,v=i.walker.whitespaces(1),w=i.walker.bookmark(0,1),x=function(y){return w(y)&&v(y);};m.prototype.getBogus=function(){var y=this.getLast(x);if(y&&(!h?y.is&&y.is('br'):y.getText&&u.test(y.getText())))return y;return false;};})();i.range=function(q){var r=this;r.startContainer=null;r.startOffset=null;r.endContainer=null;r.endOffset=null;
r.collapsed=true;r.document=q;};(function(){var q=function(y){y.collapsed=y.startContainer&&y.endContainer&&y.startContainer.equals(y.endContainer)&&y.startOffset==y.endOffset;},r=function(y,z,A){y.optimizeBookmark();var B=y.startContainer,C=y.endContainer,D=y.startOffset,E=y.endOffset,F,G;if(C.type==3)C=C.split(E);else if(C.getChildCount()>0)if(E>=C.getChildCount()){C=C.append(y.document.createText(''));G=true;}else C=C.getChild(E);if(B.type==3){B.split(D);if(B.equals(C))C=B.getNext();}else if(!D){B=B.getFirst().insertBeforeMe(y.document.createText(''));F=true;}else if(D>=B.getChildCount()){B=B.append(y.document.createText(''));F=true;}else B=B.getChild(D).getPrevious();var H=B.getParents(),I=C.getParents(),J,K,L;for(J=0;J<H.length;J++){K=H[J];L=I[J];if(!K.equals(L))break;}var M=A,N,O,P,Q;for(var R=J;R<H.length;R++){N=H[R];if(M&&!N.equals(B))O=M.append(N.clone());P=N.getNext();while(P){if(P.equals(I[R])||P.equals(C))break;Q=P.getNext();if(z==2)M.append(P.clone(true));else{P.remove();if(z==1)M.append(P);}P=Q;}if(M)M=O;}M=A;for(var S=J;S<I.length;S++){N=I[S];if(z>0&&!N.equals(C))O=M.append(N.clone());if(!H[S]||N.$.parentNode!=H[S].$.parentNode){P=N.getPrevious();while(P){if(P.equals(H[S])||P.equals(B))break;Q=P.getPrevious();if(z==2)M.$.insertBefore(P.$.cloneNode(true),M.$.firstChild);else{P.remove();if(z==1)M.$.insertBefore(P.$,M.$.firstChild);}P=Q;}}if(M)M=O;}if(z==2){var T=y.startContainer;if(T.type==3){T.$.data+=T.$.nextSibling.data;T.$.parentNode.removeChild(T.$.nextSibling);}var U=y.endContainer;if(U.type==3&&U.$.nextSibling){U.$.data+=U.$.nextSibling.data;U.$.parentNode.removeChild(U.$.nextSibling);}}else{if(K&&L&&(B.$.parentNode!=K.$.parentNode||C.$.parentNode!=L.$.parentNode)){var V=L.getIndex();if(F&&L.$.parentNode==B.$.parentNode)V--;y.setStart(L.getParent(),V);}y.collapse(true);}if(F)B.remove();if(G&&C.$.parentNode)C.remove();},s={abbr:1,acronym:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,'var':1};function t(y){var z=false,A=i.walker.bookmark(true);return function(B){if(A(B))return true;if(B.type==3){if(j.trim(B.getText()).length)return false;}else if(B.type==1)if(!s[B.getName()])if(!y&&!h&&B.getName()=='br'&&!z)z=true;else return false;return true;};};function u(y){return y.type!=3&&y.getName() in k.$removeEmpty||!j.trim(y.getText())||y.getParent().hasAttribute('_cke_bookmark');};var v=new i.walker.whitespaces(),w=new i.walker.bookmark();function x(y){return!v(y)&&!w(y);
};i.range.prototype={clone:function(){var z=this;var y=new i.range(z.document);y.startContainer=z.startContainer;y.startOffset=z.startOffset;y.endContainer=z.endContainer;y.endOffset=z.endOffset;y.collapsed=z.collapsed;return y;},collapse:function(y){var z=this;if(y){z.endContainer=z.startContainer;z.endOffset=z.startOffset;}else{z.startContainer=z.endContainer;z.startOffset=z.endOffset;}z.collapsed=true;},cloneContents:function(){var y=new i.documentFragment(this.document);if(!this.collapsed)r(this,2,y);return y;},deleteContents:function(){if(this.collapsed)return;r(this,0);},extractContents:function(){var y=new i.documentFragment(this.document);if(!this.collapsed)r(this,1,y);return y;},createBookmark:function(y){var E=this;var z,A,B,C,D=E.collapsed;z=E.document.createElement('span');z.setAttribute('_cke_bookmark',1);z.setStyle('display','none');z.setHtml('&nbsp;');if(y){B='cke_bm_'+j.getNextNumber();z.setAttribute('id',B+'S');}if(!D){A=z.clone();A.setHtml('&nbsp;');if(y)A.setAttribute('id',B+'E');C=E.clone();C.collapse();C.insertNode(A);}C=E.clone();C.collapse(true);C.insertNode(z);if(A){E.setStartAfter(z);E.setEndBefore(A);}else E.moveToPosition(z,4);return{startNode:y?B+'S':z,endNode:y?B+'E':A,serializable:y,collapsed:D};},createBookmark2:function(y){var G=this;var z=G.startContainer,A=G.endContainer,B=G.startOffset,C=G.endOffset,D=G.collapsed,E,F;if(!z||!A)return{start:0,end:0};if(y){if(z.type==1){E=z.getChild(B);if(E&&E.type==3&&B>0&&E.getPrevious().type==3){z=E;B=0;}}while(z.type==3&&(F=z.getPrevious())&&F.type==3){z=F;B+=F.getLength();}if(!D){if(A.type==1){E=A.getChild(C);if(E&&E.type==3&&C>0&&E.getPrevious().type==3){A=E;C=0;}}while(A.type==3&&(F=A.getPrevious())&&F.type==3){A=F;C+=F.getLength();}}}return{start:z.getAddress(y),end:D?null:A.getAddress(y),startOffset:B,endOffset:C,normalized:y,collapsed:D,is2:true};},moveToBookmark:function(y){var G=this;if(y.is2){var z=G.document.getByAddress(y.start,y.normalized),A=y.startOffset,B=y.end&&G.document.getByAddress(y.end,y.normalized),C=y.endOffset;G.setStart(z,A);if(B)G.setEnd(B,C);else G.collapse(true);}else{var D=y.serializable,E=D?G.document.getById(y.startNode):y.startNode,F=D?G.document.getById(y.endNode):y.endNode;G.setStartBefore(E);E.remove();if(F){G.setEndBefore(F);F.remove();}else G.collapse(true);}},getBoundaryNodes:function(){var D=this;var y=D.startContainer,z=D.endContainer,A=D.startOffset,B=D.endOffset,C;if(y.type==1){C=y.getChildCount();if(C>A)y=y.getChild(A);else if(C<1)y=y.getPreviousSourceNode();
else{y=y.$;while(y.lastChild)y=y.lastChild;y=new i.node(y);y=y.getNextSourceNode()||y;}}if(z.type==1){C=z.getChildCount();if(C>B)z=z.getChild(B).getPreviousSourceNode(true);else if(C<1)z=z.getPreviousSourceNode();else{z=z.$;while(z.lastChild)z=z.lastChild;z=new i.node(z);}}if(y.getPosition(z)&2)y=z;return{startNode:y,endNode:z};},getCommonAncestor:function(y,z){var D=this;var A=D.startContainer,B=D.endContainer,C;if(A.equals(B)){if(y&&A.type==1&&D.startOffset==D.endOffset-1)C=A.getChild(D.startOffset);else C=A;}else C=A.getCommonAncestor(B);return z&&!C.is?C.getParent():C;},optimize:function(){var A=this;var y=A.startContainer,z=A.startOffset;if(y.type!=1)if(!z)A.setStartBefore(y);else if(z>=y.getLength())A.setStartAfter(y);y=A.endContainer;z=A.endOffset;if(y.type!=1)if(!z)A.setEndBefore(y);else if(z>=y.getLength())A.setEndAfter(y);},optimizeBookmark:function(){var A=this;var y=A.startContainer,z=A.endContainer;if(y.is&&y.is('span')&&y.hasAttribute('_cke_bookmark'))A.setStartAt(y,3);if(z&&z.is&&z.is('span')&&z.hasAttribute('_cke_bookmark'))A.setEndAt(z,4);},trim:function(y,z){var G=this;var A=G.startContainer,B=G.startOffset,C=G.collapsed;if((!y||C)&&A&&A.type==3){if(!B){B=A.getIndex();A=A.getParent();}else if(B>=A.getLength()){B=A.getIndex()+1;A=A.getParent();}else{var D=A.split(B);B=A.getIndex()+1;A=A.getParent();if(G.startContainer.equals(G.endContainer))G.setEnd(D,G.endOffset-G.startOffset);else if(A.equals(G.endContainer))G.endOffset+=1;}G.setStart(A,B);if(C){G.collapse(true);return;}}var E=G.endContainer,F=G.endOffset;if(!(z||C)&&E&&E.type==3){if(!F){F=E.getIndex();E=E.getParent();}else if(F>=E.getLength()){F=E.getIndex()+1;E=E.getParent();}else{E.split(F);F=E.getIndex()+1;E=E.getParent();}G.setEnd(E,F);}},enlarge:function(y){switch(y){case 1:if(this.collapsed)return;var z=this.getCommonAncestor(),A=this.document.getBody(),B,C,D,E,F,G=false,H,I,J=this.startContainer,K=this.startOffset;if(J.type==3){if(K){J=!j.trim(J.substring(0,K)).length&&J;G=!!J;}if(J)if(!(E=J.getPrevious()))D=J.getParent();}else{if(K)E=J.getChild(K-1)||J.getLast();if(!E)D=J;}while(D||E){if(D&&!E){if(!F&&D.equals(z))F=true;if(!A.contains(D))break;if(!G||D.getComputedStyle('display')!='inline'){G=false;if(F)B=D;else this.setStartBefore(D);}E=D.getPrevious();}while(E){H=false;if(E.type==3){I=E.getText();if(/[^\s\ufeff]/.test(I))E=null;H=/[\s\ufeff]$/.test(I);}else if(E.$.offsetWidth>0&&!E.getAttribute('_cke_bookmark'))if(G&&k.$removeEmpty[E.getName()]){I=E.getText();if(/[^\s\ufeff]/.test(I))E=null;
else{var L=E.$.all||E.$.getElementsByTagName('*');for(var M=0,N;N=L[M++];){if(!k.$removeEmpty[N.nodeName.toLowerCase()]){E=null;break;}}}if(E)H=!!I.length;}else E=null;if(H)if(G){if(F)B=D;else if(D)this.setStartBefore(D);}else G=true;if(E){var O=E.getPrevious();if(!D&&!O){D=E;E=null;break;}E=O;}else D=null;}if(D)D=D.getParent();}J=this.endContainer;K=this.endOffset;D=E=null;F=G=false;if(J.type==3){J=!j.trim(J.substring(K)).length&&J;G=!(J&&J.getLength());if(J)if(!(E=J.getNext()))D=J.getParent();}else{E=J.getChild(K);if(!E)D=J;}while(D||E){if(D&&!E){if(!F&&D.equals(z))F=true;if(!A.contains(D))break;if(!G||D.getComputedStyle('display')!='inline'){G=false;if(F)C=D;else if(D)this.setEndAfter(D);}E=D.getNext();}while(E){H=false;if(E.type==3){I=E.getText();if(/[^\s\ufeff]/.test(I))E=null;H=/^[\s\ufeff]/.test(I);}else if(E.$.offsetWidth>0&&!E.getAttribute('_cke_bookmark'))if(G&&k.$removeEmpty[E.getName()]){I=E.getText();if(/[^\s\ufeff]/.test(I))E=null;else{L=E.$.all||E.$.getElementsByTagName('*');for(M=0;N=L[M++];){if(!k.$removeEmpty[N.nodeName.toLowerCase()]){E=null;break;}}}if(E)H=!!I.length;}else E=null;if(H)if(G)if(F)C=D;else this.setEndAfter(D);if(E){O=E.getNext();if(!D&&!O){D=E;E=null;break;}E=O;}else D=null;}if(D)D=D.getParent();}if(B&&C){z=B.contains(C)?C:B;this.setStartBefore(z);this.setEndAfter(z);}break;case 2:case 3:var P=new i.range(this.document);A=this.document.getBody();P.setStartAt(A,1);P.setEnd(this.startContainer,this.startOffset);var Q=new i.walker(P),R,S,T=i.walker.blockBoundary(y==3?{br:1}:null),U=function(W){var X=T(W);if(!X)R=W;return X;},V=function(W){var X=U(W);if(!X&&W.is&&W.is('br'))S=W;return X;};Q.guard=U;D=Q.lastBackward();R=R||A;this.setStartAt(R,!R.is('br')&&(!D&&this.checkStartOfBlock()||D&&R.contains(D))?1:4);P=this.clone();P.collapse();P.setEndAt(A,2);Q=new i.walker(P);Q.guard=y==3?V:U;R=null;D=Q.lastForward();R=R||A;this.setEndAt(R,!D&&this.checkEndOfBlock()||D&&R.contains(D)?2:3);if(S)this.setEndAfter(S);}},shrink:function(y,z){if(!this.collapsed){y=y||2;var A=this.clone(),B=this.startContainer,C=this.endContainer,D=this.startOffset,E=this.endOffset,F=this.collapsed,G=1,H=1;if(B&&B.type==3)if(!D)A.setStartBefore(B);else if(D>=B.getLength())A.setStartAfter(B);else{A.setStartBefore(B);G=0;}if(C&&C.type==3)if(!E)A.setEndBefore(C);else if(E>=C.getLength())A.setEndAfter(C);else{A.setEndAfter(C);H=0;}var I=new i.walker(A),J=i.walker.bookmark();I.evaluator=function(N){return N.type==(y==1?1:3);};var K;I.guard=function(N,O){if(J(N))return true;
if(y==1&&N.type==3)return false;if(O&&N.equals(K))return false;if(!O&&N.type==1)K=N;return true;};if(G){var L=I[y==1?'lastForward':'next']();L&&this.setStartAt(L,z?1:3);}if(H){I.reset();var M=I[y==1?'lastBackward':'previous']();M&&this.setEndAt(M,z?2:4);}return!!(G||H);}},insertNode:function(y){var C=this;C.optimizeBookmark();C.trim(false,true);var z=C.startContainer,A=C.startOffset,B=z.getChild(A);if(B)y.insertBefore(B);else z.append(y);if(y.getParent().equals(C.endContainer))C.endOffset++;C.setStartBefore(y);},moveToPosition:function(y,z){this.setStartAt(y,z);this.collapse(true);},selectNodeContents:function(y){this.setStart(y,0);this.setEnd(y,y.type==3?y.getLength():y.getChildCount());},setStart:function(y,z){var A=this;if(y.type==1&&k.$empty[y.getName()])y=y.getParent(),z=y.getIndex();A.startContainer=y;A.startOffset=z;if(!A.endContainer){A.endContainer=y;A.endOffset=z;}q(A);},setEnd:function(y,z){var A=this;if(y.type==1&&k.$empty[y.getName()])z=y.getIndex()+1,y=y.getParent();A.endContainer=y;A.endOffset=z;if(!A.startContainer){A.startContainer=y;A.startOffset=z;}q(A);},setStartAfter:function(y){this.setStart(y.getParent(),y.getIndex()+1);},setStartBefore:function(y){this.setStart(y.getParent(),y.getIndex());},setEndAfter:function(y){this.setEnd(y.getParent(),y.getIndex()+1);},setEndBefore:function(y){this.setEnd(y.getParent(),y.getIndex());},setStartAt:function(y,z){var A=this;switch(z){case 1:A.setStart(y,0);break;case 2:if(y.type==3)A.setStart(y,y.getLength());else A.setStart(y,y.getChildCount());break;case 3:A.setStartBefore(y);break;case 4:A.setStartAfter(y);}q(A);},setEndAt:function(y,z){var A=this;switch(z){case 1:A.setEnd(y,0);break;case 2:if(y.type==3)A.setEnd(y,y.getLength());else A.setEnd(y,y.getChildCount());break;case 3:A.setEndBefore(y);break;case 4:A.setEndAfter(y);}q(A);},fixBlock:function(y,z){var C=this;var A=C.createBookmark(),B=C.document.createElement(z);C.collapse(y);C.enlarge(2);C.extractContents().appendTo(B);B.trim();if(!h)B.appendBogus();C.insertNode(B);C.moveToBookmark(A);return B;},splitBlock:function(y){var I=this;var z=new i.elementPath(I.startContainer),A=new i.elementPath(I.endContainer),B=z.blockLimit,C=A.blockLimit,D=z.block,E=A.block,F=null;if(!B.equals(C))return null;if(y!='br'){if(!D){D=I.fixBlock(true,y);E=new i.elementPath(I.endContainer).block;}if(!E)E=I.fixBlock(false,y);}var G=D&&I.checkStartOfBlock(),H=E&&I.checkEndOfBlock();I.deleteContents();if(D&&D.equals(E))if(H){F=new i.elementPath(I.startContainer);I.moveToPosition(E,4);
E=null;}else if(G){F=new i.elementPath(I.startContainer);I.moveToPosition(D,3);D=null;}else{E=I.splitElement(D);if(!h&&!D.is('ul','ol'))D.appendBogus();}return{previousBlock:D,nextBlock:E,wasStartOfBlock:G,wasEndOfBlock:H,elementPath:F};},splitElement:function(y){var B=this;if(!B.collapsed)return null;B.setEndAt(y,2);var z=B.extractContents(),A=y.clone(false);z.appendTo(A);A.insertAfter(y);B.moveToPosition(y,4);return A;},checkBoundaryOfElement:function(y,z){var A=z==1,B=this.clone();B.collapse(A);B[A?'setStartAt':'setEndAt'](y,A?1:2);var C=new i.walker(B);C.evaluator=u;return C[A?'checkBackward':'checkForward']();},checkStartOfBlock:function(){var E=this;var y=E.startContainer,z=E.startOffset;if(z&&y.type==3){var A=j.ltrim(y.substring(0,z));if(A.length)return false;}E.trim();var B=new i.elementPath(E.startContainer),C=E.clone();C.collapse(true);C.setStartAt(B.block||B.blockLimit,1);var D=new i.walker(C);D.evaluator=t(true);return D.checkBackward();},checkEndOfBlock:function(){var E=this;var y=E.endContainer,z=E.endOffset;if(y.type==3){var A=j.rtrim(y.substring(z));if(A.length)return false;}E.trim();var B=new i.elementPath(E.endContainer),C=E.clone();C.collapse(false);C.setEndAt(B.block||B.blockLimit,2);var D=new i.walker(C);D.evaluator=t(false);return D.checkForward();},moveToElementEditablePosition:function(y,z){var A;if(k.$empty[y.getName()])return false;while(y&&y.type==1){A=y.isEditable();if(A)this.moveToPosition(y,z?2:1);else if(k.$inline[y.getName()]){this.moveToPosition(y,z?4:3);return true;}if(k.$empty[y.getName()])y=y[z?'getPrevious':'getNext'](x);else y=y[z?'getLast':'getFirst'](x);if(y&&y.type==3){this.moveToPosition(y,z?4:3);return true;}}return A;},moveToElementEditStart:function(y){return this.moveToElementEditablePosition(y);},moveToElementEditEnd:function(y){return this.moveToElementEditablePosition(y,true);},getEnclosedNode:function(){var y=this.clone();y.optimize();if(y.startContainer.type!=1||y.endContainer.type!=1)return null;var z=new i.walker(y),A=i.walker.bookmark(true),B=i.walker.whitespaces(true),C=function(E){return B(E)&&A(E);};y.evaluator=C;var D=z.next();z.reset();return D&&D.equals(z.previous())?D:null;},getTouchedStartNode:function(){var y=this.startContainer;if(this.collapsed||y.type!=1)return y;return y.getChild(this.startOffset)||y;},getTouchedEndNode:function(){var y=this.endContainer;if(this.collapsed||y.type!=1)return y;return y.getChild(this.endOffset-1)||y;}};})();f.POSITION_AFTER_START=1;f.POSITION_BEFORE_END=2;f.POSITION_BEFORE_START=3;
f.POSITION_AFTER_END=4;f.ENLARGE_ELEMENT=1;f.ENLARGE_BLOCK_CONTENTS=2;f.ENLARGE_LIST_ITEM_CONTENTS=3;f.START=1;f.END=2;f.STARTEND=3;f.SHRINK_ELEMENT=1;f.SHRINK_TEXT=2;(function(){i.rangeList=function(s){if(s instanceof i.rangeList)return s;if(!s)s=[];else if(s instanceof i.range)s=[s];return j.extend(s,q);};var q={createIterator:function(){var s=this,t=i.walker.bookmark(),u=function(x){return!(x.is&&x.is('tr'));},v=[],w;return{getNextRange:function(x){w=w==undefined?0:w+1;var y=s[w];if(y&&s.length>1){if(!w)for(var z=s.length-1;z>=0;z--)v.unshift(s[z].createBookmark(true));if(x){var A=0;while(s[w+A+1]){var B=y.document,C=0,D=B.getById(v[A].endNode),E=B.getById(v[A+1].startNode),F;while(1){F=D.getNextSourceNode(false);if(!E.equals(F)){if(t(F)||F.type==1&&F.isBlockBoundary()){D=F;continue;}}else C=1;break;}if(!C)break;A++;}}y.moveToBookmark(v.shift());var F;while(A--){F=s[++w];F.moveToBookmark(v.shift());y.setEnd(F.endContainer,F.endOffset);}}return y;}};},createBookmarks:function(s){var x=this;var t=[],u;for(var v=0;v<x.length;v++){t.push(u=x[v].createBookmark(s,true));for(var w=v+1;w<x.length;w++){x[w]=r(u,x[w]);x[w]=r(u,x[w],true);}}return t;},createBookmarks2:function(s){var t=[];for(var u=0;u<this.length;u++)t.push(this[u].createBookmark2(s));return t;},moveToBookmarks:function(s){for(var t=0;t<this.length;t++)this[t].moveToBookmark(s[t]);}};function r(s,t,u){var v=s.serializable,w=t[u?'endContainer':'startContainer'],x=u?'endOffset':'startOffset',y=v?t.document.getById(s.startNode):s.startNode,z=v?t.document.getById(s.endNode):s.endNode;if(w.equals(y.getPrevious())){t.startOffset=t.startOffset-w.getLength()-z.getPrevious().getLength();w=z.getNext();}else if(w.equals(z.getPrevious())){t.startOffset=t.startOffset-w.getLength();w=z.getNext();}w.equals(y.getParent())&&t[x]++;w.equals(z.getParent())&&t[x]++;t[u?'endContainer':'startContainer']=w;return t;};})();(function(){if(g.webkit){g.hc=false;return;}var q=h&&g.version<7,r=h&&g.version==7,s=q?f.basePath+'images/spacer.gif':r?'about:blank':'data:image/png;base64,',t=m.createFromHtml('<div style="width:0px;height:0px;position:absolute;left:-10000px;background-image:url('+s+')"></div>',f.document);t.appendTo(f.document.getHead());try{g.hc=t.getComputedStyle('background-image')=='none';}catch(u){g.hc=false;}if(g.hc)g.cssClass+=' cke_hc';t.remove();})();o.load(n.corePlugins.split(','),function(){f.status='loaded';f.fire('loaded');var q=f._.pending;if(q){delete f._.pending;for(var r=0;r<q.length;r++)f.add(q[r]);
}});if(h)try{document.execCommand('BackgroundImageCache',false,true);}catch(q){}f.skins.add('kama',(function(){var r=[],s='cke_ui_color';if(h&&g.version<7)r.push('icons.png','images/sprites_ie6.png','images/dialog_sides.gif');return{preload:r,editor:{css:['editor.css']},dialog:{css:['dialog.css']},templates:{css:['templates.css']},margins:[0,0,0,0],init:function(t){if(t.config.width&&!isNaN(t.config.width))t.config.width-=12;var u=[],v=/\$color/g,w='/* UI Color Support */.cke_skin_kama .cke_menuitem .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a:focus .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a:active .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover .cke_label,.cke_skin_kama .cke_menuitem a:focus .cke_label,.cke_skin_kama .cke_menuitem a:active .cke_label{\tbackground-color: $color !important;}.cke_skin_kama .cke_menuitem a.cke_disabled:hover .cke_label,.cke_skin_kama .cke_menuitem a.cke_disabled:focus .cke_label,.cke_skin_kama .cke_menuitem a.cke_disabled:active .cke_label{\tbackground-color: transparent !important;}.cke_skin_kama .cke_menuitem a.cke_disabled:hover .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a.cke_disabled:focus .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a.cke_disabled:active .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuitem a.cke_disabled .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuseparator{\tbackground-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover,.cke_skin_kama .cke_menuitem a:focus,.cke_skin_kama .cke_menuitem a:active{\tbackground-color: $color !important;}';if(g.webkit){w=w.split('}').slice(0,-1);for(var x=0;x<w.length;x++)w[x]=w[x].split('{');}function y(B){var C=B.getById(s);if(!C){C=B.getHead().append('style');C.setAttribute('id',s);C.setAttribute('type','text/css');}return C;};function z(B,C,D){var E,F,G;for(var H=0;H<B.length;H++){if(g.webkit)for(F=0;F<C.length;F++){G=C[F][1];for(E=0;E<D.length;E++)G=G.replace(D[E][0],D[E][1]);B[H].$.sheet.addRule(C[F][0],G);}else{G=C;for(E=0;E<D.length;E++)G=G.replace(D[E][0],D[E][1]);if(h)B[H].$.styleSheet.cssText+=G;else B[H].$.innerHTML+=G;}}};var A=/\$color/g;j.extend(t,{uiColor:null,getUiColor:function(){return this.uiColor;
},setUiColor:function(B){var C,D=y(f.document),E='.'+t.id,F=[E+' .cke_wrapper',E+'_dialog .cke_dialog_contents',E+'_dialog a.cke_dialog_tab',E+'_dialog .cke_dialog_footer'].join(','),G='background-color: $color !important;';if(g.webkit)C=[[F,G]];else C=F+'{'+G+'}';return(this.setUiColor=function(H){var I=[[A,H]];t.uiColor=H;z([D],C,I);z(u,w,I);})(B);}});t.on('menuShow',function(B){var C=B.data[0],D=C.element.getElementsByTag('iframe').getItem(0).getFrameDocument();if(!D.getById('cke_ui_color')){var E=y(D);u.push(E);var F=t.getUiColor();if(F)z([E],w,[[A,F]]);}});if(t.config.uiColor)t.setUiColor(t.config.uiColor);}};})());(function(){f.dialog?r():f.on('dialogPluginReady',r);function r(){f.dialog.on('resize',function(s){var t=s.data,u=t.width,v=t.height,w=t.dialog,x=w.parts.contents;if(t.skin!='kama')return;x.setStyles({width:u+'px',height:v+'px'});setTimeout(function(){var y=w.parts.dialog.getChild([0,0,0]),z=y.getChild(0),A=y.getChild(2);A.setStyle('width',z.$.offsetWidth+'px');A=y.getChild(7);A.setStyle('width',z.$.offsetWidth-28+'px');A=y.getChild(4);A.setStyle('height',v+z.getChild(0).$.offsetHeight+'px');A=y.getChild(5);A.setStyle('height',v+z.getChild(0).$.offsetHeight+'px');},100);});};})();o.add('about',{requires:['dialog'],init:function(r){var s=r.addCommand('about',new f.dialogCommand('about'));s.modes={wysiwyg:1,source:1};s.canUndo=false;r.ui.addButton('About',{label:r.lang.about.title,command:'about'});f.dialog.add('about',this.path+'dialogs/about.js');}});(function(){var r='a11yhelp',s='a11yHelp';o.add(r,{availableLangs:{en:1,he:1},init:function(t){var u=this;t.addCommand(s,{exec:function(){var v=t.langCode;v=u.availableLangs[v]?v:'en';f.scriptLoader.load(f.getUrl(u.path+'lang/'+v+'.js'),function(){j.extend(t.lang,u.lang[v]);t.openDialog(s);});},modes:{wysiwyg:1,source:1},canUndo:false});f.dialog.add(s,this.path+'dialogs/a11yhelp.js');}});})();o.add('basicstyles',{requires:['styles','button'],init:function(r){var s=function(v,w,x,y){var z=new f.style(y);r.attachStyleStateChange(z,function(A){r.getCommand(x).setState(A);});r.addCommand(x,new f.styleCommand(z));r.ui.addButton(v,{label:w,command:x});},t=r.config,u=r.lang;s('Bold',u.bold,'bold',t.coreStyles_bold);s('Italic',u.italic,'italic',t.coreStyles_italic);s('Underline',u.underline,'underline',t.coreStyles_underline);s('Strike',u.strike,'strike',t.coreStyles_strike);s('Subscript',u.subscript,'subscript',t.coreStyles_subscript);s('Superscript',u.superscript,'superscript',t.coreStyles_superscript);
}});n.coreStyles_bold={element:'strong',overrides:'b'};n.coreStyles_italic={element:'em',overrides:'i'};n.coreStyles_underline={element:'u'};n.coreStyles_strike={element:'strike'};n.coreStyles_subscript={element:'sub'};n.coreStyles_superscript={element:'sup'};(function(){var r={table:1,tbody:1,ul:1,ol:1,blockquote:1,div:1,tr:1},s={},t={};j.extend(s,r,{tr:1,p:1,div:1,li:1});j.extend(t,s,{td:1});function u(B){v(B);w(B);};function v(B){var C=B.editor,D=B.data.path,E=C.config.useComputedState,F;E=E===undefined||E;if(!E)F=x(D.lastElement);F=F||D.block||D.blockLimit;if(!F||F.getName()=='body')return;var G=E?F.getComputedStyle('direction'):F.getStyle('direction')||F.getAttribute('dir');C.getCommand('bidirtl').setState(G=='rtl'?1:2);C.getCommand('bidiltr').setState(G=='ltr'?1:2);};function w(B){var C=B.editor,D=C.container.getChild(1),E=x(B.data.path.lastElement);if(E&&C.lang.dir!=E.getComputedStyle('direction'))D.addClass('cke_mixed_dir_content');else D.removeClass('cke_mixed_dir_content');};function x(B){while(B&&!(B.getName() in t||B.is('body'))){var C=B.getParent();if(!C)break;B=C;}return B;};function y(B,C,D,E){m.setMarker(E,B,'bidi_processed',1);var F=B;while((F=F.getParent())&&!F.is('body')){if(F.getCustomData('bidi_processed')){B.removeStyle('direction');B.removeAttribute('dir');return null;}}var G='useComputedState' in D.config?D.config.useComputedState:1,H=G?B.getComputedStyle('direction'):B.getStyle('direction')||B.hasAttribute('dir');if(H==C)return null;var I=G?H:B.getComputedStyle('direction');B.removeStyle('direction');if(G){B.removeAttribute('dir');if(C!=B.getComputedStyle('direction'))B.setAttribute('dir',C);}else B.setAttribute('dir',C);if(C!=I)D.fire('dirChanged',B);D.forceNextSelectionCheck();return null;};function z(B,C){var D=B.getCommonAncestor(false,true);B.enlarge(2);if(B.checkBoundaryOfElement(D,1)&&B.checkBoundaryOfElement(D,2)){var E;while(D&&D.type==1&&(E=D.getParent())&&E.getChildCount()==1&&(!(D.getName() in C)||E.getName() in C))D=E;return D.type==1&&D.getName() in C&&D;}};function A(B){return function(C){var D=C.getSelection(),E=C.config.enterMode,F=D.getRanges();if(F&&F.length){var G={},H=D.createBookmarks(),I=F.createIterator(),J,K=0;while(J=I.getNextRange(1)){var L=J.getEnclosedNode();if(!L||L&&!(L.type==1&&L.getName() in s))L=z(J,r);if(L&&!L.isReadOnly())y(L,B,C,G);var M,N,O=new i.walker(J),P=H[K].startNode,Q=H[K++].endNode;O.evaluator=function(R){return!!(R.type==1&&R.getName() in r&&!(R.getName()==(E==1)?'p':'div'&&R.getParent().type==1&&R.getParent().getName()=='blockquote')&&R.getPosition(P)&2&&(R.getPosition(Q)&4+16)==4);
};while(N=O.next())y(N,B,C,G);M=J.createIterator();M.enlargeBr=E!=2;while(N=M.getNextParagraph(E==1?'p':'div'))!N.isReadOnly()&&y(N,B,C,G);}m.clearAllMarkers(G);C.forceNextSelectionCheck();D.selectBookmarks(H);C.focus();}};};o.add('bidi',{requires:['styles','button'],init:function(B){var C=function(E,F,G,H){B.addCommand(G,new f.command(B,{exec:H}));B.ui.addButton(E,{label:F,command:G});},D=B.lang.bidi;C('BidiLtr',D.ltr,'bidiltr',A('ltr'));C('BidiRtl',D.rtl,'bidirtl',A('rtl'));B.on('selectionChange',u);}});})();(function(){function r(v,w){var x=w.block||w.blockLimit;if(!x||x.getName()=='body')return 2;if(x.getAscendant('blockquote',true))return 1;return 2;};function s(v){var w=v.editor,x=w.getCommand('blockquote');x.state=r(w,v.data.path);x.fire('state');};function t(v){for(var w=0,x=v.getChildCount(),y;w<x&&(y=v.getChild(w));w++){if(y.type==1&&y.isBlockBoundary())return false;}return true;};var u={exec:function(v){var w=v.getCommand('blockquote').state,x=v.getSelection(),y=x&&x.getRanges(true)[0];if(!y)return;var z=x.createBookmarks();if(h){var A=z[0].startNode,B=z[0].endNode,C;if(A&&A.getParent().getName()=='blockquote'){C=A;while(C=C.getNext()){if(C.type==1&&C.isBlockBoundary()){A.move(C,true);break;}}}if(B&&B.getParent().getName()=='blockquote'){C=B;while(C=C.getPrevious()){if(C.type==1&&C.isBlockBoundary()){B.move(C);break;}}}}var D=y.createIterator(),E;if(w==2){var F=[];while(E=D.getNextParagraph())F.push(E);if(F.length<1){var G=v.document.createElement(v.config.enterMode==1?'p':'div'),H=z.shift();y.insertNode(G);G.append(new i.text('\ufeff',v.document));y.moveToBookmark(H);y.selectNodeContents(G);y.collapse(true);H=y.createBookmark();F.push(G);z.unshift(H);}var I=F[0].getParent(),J=[];for(var K=0;K<F.length;K++){E=F[K];I=I.getCommonAncestor(E.getParent());}var L={table:1,tbody:1,tr:1,ol:1,ul:1};while(L[I.getName()])I=I.getParent();var M=null;while(F.length>0){E=F.shift();while(!E.getParent().equals(I))E=E.getParent();if(!E.equals(M))J.push(E);M=E;}while(J.length>0){E=J.shift();if(E.getName()=='blockquote'){var N=new i.documentFragment(v.document);while(E.getFirst()){N.append(E.getFirst().remove());F.push(N.getLast());}N.replace(E);}else F.push(E);}var O=v.document.createElement('blockquote');O.insertBefore(F[0]);while(F.length>0){E=F.shift();O.append(E);}}else if(w==1){var P=[],Q={};while(E=D.getNextParagraph()){var R=null,S=null;while(E.getParent()){if(E.getParent().getName()=='blockquote'){R=E.getParent();S=E;break;}E=E.getParent();}if(R&&S&&!S.getCustomData('blockquote_moveout')){P.push(S);
m.setMarker(Q,S,'blockquote_moveout',true);}}m.clearAllMarkers(Q);var T=[],U=[];Q={};while(P.length>0){var V=P.shift();O=V.getParent();if(!V.getPrevious())V.remove().insertBefore(O);else if(!V.getNext())V.remove().insertAfter(O);else{V.breakParent(V.getParent());U.push(V.getNext());}if(!O.getCustomData('blockquote_processed')){U.push(O);m.setMarker(Q,O,'blockquote_processed',true);}T.push(V);}m.clearAllMarkers(Q);for(K=U.length-1;K>=0;K--){O=U[K];if(t(O))O.remove();}if(v.config.enterMode==2){var W=true;while(T.length){V=T.shift();if(V.getName()=='div'){N=new i.documentFragment(v.document);var X=W&&V.getPrevious()&&!(V.getPrevious().type==1&&V.getPrevious().isBlockBoundary());if(X)N.append(v.document.createElement('br'));var Y=V.getNext()&&!(V.getNext().type==1&&V.getNext().isBlockBoundary());while(V.getFirst())V.getFirst().remove().appendTo(N);if(Y)N.append(v.document.createElement('br'));N.replace(V);W=false;}}}}x.selectBookmarks(z);v.focus();}};o.add('blockquote',{init:function(v){v.addCommand('blockquote',u);v.ui.addButton('Blockquote',{label:v.lang.blockquote,command:'blockquote'});v.on('selectionChange',s);},requires:['domiterator']});})();o.add('button',{beforeInit:function(r){r.ui.addHandler(1,p.button.handler);}});f.UI_BUTTON=1;p.button=function(r){j.extend(this,r,{title:r.label,className:r.className||r.command&&'cke_button_'+r.command||'',click:r.click||(function(s){s.execCommand(r.command);})});this._={};};p.button.handler={create:function(r){return new p.button(r);}};p.button.prototype={canGroup:true,render:function(r,s){var t=g,u=this._.id=j.getNextId(),v='',w=this.command,x,y;this._.editor=r;var z={id:u,button:this,editor:r,focus:function(){var B=f.document.getById(u);B.focus();},execute:function(){this.button.click(r);}};z.clickFn=x=j.addFunction(z.execute,z);z.index=y=p.button._.instances.push(z)-1;if(this.modes)r.on('mode',function(){this.setState(this.modes[r.mode]?2:0);},this);else if(w){w=r.getCommand(w);if(w){w.on('state',function(){this.setState(w.state);},this);v+='cke_'+(w.state==1?'on':w.state==0?'disabled':'off');}}if(!w)v+='cke_off';if(this.className)v+=' '+this.className;s.push('<span class="cke_button">','<a id="',u,'" class="',v,'"',t.gecko&&t.version>=10900&&!t.hc?'':'" href="javascript:void(\''+(this.title||'').replace("'",'')+"')\"",' title="',this.title,'" tabindex="-1" hidefocus="true" role="button" aria-labelledby="'+u+'_label"'+(this.hasArrow?' aria-haspopup="true"':''));if(t.opera||t.gecko&&t.mac)s.push(' onkeypress="return false;"');
if(t.gecko)s.push(' onblur="this.style.cssText = this.style.cssText;"');s.push(' onkeydown="return CKEDITOR.ui.button._.keydown(',y,', event);" onfocus="return CKEDITOR.ui.button._.focus(',y,', event);" onclick="CKEDITOR.tools.callFunction(',x,', this); return false;"><span class="cke_icon"');if(this.icon){var A=(this.iconOffset||0)*-16;s.push(' style="background-image:url(',f.getUrl(this.icon),');background-position:0 '+A+'px;"');}s.push('>&nbsp;</span><span id="',u,'_label" class="cke_label">',this.label,'</span>');if(this.hasArrow)s.push('<span class="cke_buttonarrow">'+(g.hc?'&#9660;':'&nbsp;')+'</span>');s.push('</a>','</span>');if(this.onRender)this.onRender();return z;},setState:function(r){if(this._.state==r)return false;this._.state=r;var s=f.document.getById(this._.id);if(s){s.setState(r);r==0?s.setAttribute('aria-disabled',true):s.removeAttribute('aria-disabled');r==1?s.setAttribute('aria-pressed',true):s.removeAttribute('aria-pressed');return true;}else return false;}};p.button._={instances:[],keydown:function(r,s){var t=p.button._.instances[r];if(t.onkey){s=new i.event(s);return t.onkey(t,s.getKeystroke())!==false;}},focus:function(r,s){var t=p.button._.instances[r],u;if(t.onfocus)u=t.onfocus(t,new i.event(s))!==false;if(g.gecko&&g.version<10900)s.preventBubble();return u;}};p.prototype.addButton=function(r,s){this.add(r,1,s);};f.on('reset',function(){p.button._.instances=[];});(function(){var r=function(y,z){var A=y.document,B=A.getBody(),C=0,D=function(){C=1;};B.on(z,D);(g.version>7?A.$:A.$.selection.createRange()).execCommand(z);B.removeListener(z,D);return C;},s=h?function(y,z){return r(y,z);}:function(y,z){try{return y.document.$.execCommand(z);}catch(A){return false;}},t=function(y){this.type=y;this.canUndo=this.type=='cut';};t.prototype={exec:function(y,z){this.type=='cut'&&x(y);var A=s(y,this.type);if(!A)alert(y.lang.clipboard[this.type+'Error']);return A;}};var u={canUndo:false,exec:h?function(y){y.focus();if(!y.document.getBody().fire('beforepaste')&&!r(y,'paste')){y.fire('pasteDialog');return false;}}:function(y){try{if(!y.document.getBody().fire('beforepaste')&&!y.document.$.execCommand('Paste',false,null))throw 0;}catch(z){setTimeout(function(){y.fire('pasteDialog');},0);return false;}}},v=function(y){if(this.mode!='wysiwyg')return;switch(y.data.keyCode){case 1000+86:case 2000+45:var z=this.document.getBody();if(!h&&z.fire('beforepaste'))y.cancel();else if(g.opera||g.gecko&&g.version<10900)z.fire('paste');return;case 1000+88:case 2000+46:var A=this;
this.fire('saveSnapshot');setTimeout(function(){A.fire('saveSnapshot');},0);}};function w(y,z,A){var B=this.document;if(B.getById('cke_pastebin'))return;if(z=='text'&&y.data&&y.data.$.clipboardData){var C=y.data.$.clipboardData.getData('text/plain');if(C){y.data.preventDefault();A(C);return;}}var D=this.getSelection(),E=new i.range(B),F=new m(z=='text'?'textarea':g.webkit?'body':'div',B);F.setAttribute('id','cke_pastebin');g.webkit&&F.append(B.createText('\xa0'));B.getBody().append(F);F.setStyles({position:'absolute',top:D.getStartElement().getDocumentPosition().y+'px',width:'1px',height:'1px',overflow:'hidden'});F.setStyle(this.config.contentsLangDirection=='ltr'?'left':'right','-1000px');var G=D.createBookmarks();if(z=='text'){if(h){var H=B.getBody().$.createTextRange();H.moveToElementText(F.$);H.execCommand('Paste');y.data.preventDefault();}else{B.$.designMode='off';F.$.focus();}}else{E.setStartAt(F,1);E.setEndAt(F,2);E.select(true);}window.setTimeout(function(){z=='text'&&!h&&(B.$.designMode='on');F.remove();var I;F=g.webkit&&(I=F.getFirst())&&I.is&&I.hasClass('Apple-style-span')?I:F;D.selectBookmarks(G);A(F['get'+(z=='text'?'Value':'Html')]());},0);};function x(y){if(!h||g.quirks)return;var z=y.getSelection(),A;if(z.getType()==3&&(A=z.getSelectedElement())){var B=z.getRanges()[0],C=y.document.createText('');C.insertBefore(A);B.setStartBefore(C);B.setEndAfter(A);z.selectRanges([B]);setTimeout(function(){if(A.getParent()){C.remove();z.selectElement(A);}},0);}};o.add('clipboard',{requires:['dialog','htmldataprocessor'],init:function(y){y.on('paste',function(D){var E=D.data;if(E.html)y.insertHtml(E.html);else if(E.text)y.insertText(E.text);},null,null,1000);y.on('pasteDialog',function(D){setTimeout(function(){y.openDialog('paste');},0);});function z(D,E,F,G){var H=y.lang[E];y.addCommand(E,F);y.ui.addButton(D,{label:H,command:E});if(y.addMenuItems)y.addMenuItem(E,{label:H,command:E,group:'clipboard',order:G});};z('Cut','cut',new t('cut'),1);z('Copy','copy',new t('copy'),4);z('Paste','paste',u,8);f.dialog.add('paste',f.getUrl(this.path+'dialogs/paste.js'));y.on('key',v,y);var A=y.config.forcePasteAsPlainText?'text':'html';y.on('contentDom',function(){var D=y.document.getBody();D.on(A=='text'&&h||g.webkit?'paste':'beforepaste',function(E){if(B)return;w.call(y,E,A,function(F){if(!F)return;var G={};G[A]=F;y.fire('paste',G);});});D.on('beforecut',function(){!B&&x(y);});});if(y.contextMenu){var B;function C(D){h&&(B=1);var E=y.document.$.queryCommandEnabled(D)?2:0;
B=0;return E;};y.contextMenu.addListener(function(D,E){var F=E.getCommonAncestor().isReadOnly();return{cut:!F&&C('Cut'),copy:C('Copy'),paste:!F&&(g.webkit?2:C('Paste'))};});}}});})();o.add('colorbutton',{requires:['panelbutton','floatpanel','styles'],init:function(r){var s=r.config,t=r.lang.colorButton,u;if(!g.hc){v('TextColor','fore',t.textColorTitle);v('BGColor','back',t.bgColorTitle);}function v(x,y,z){r.ui.add(x,4,{label:z,title:z,className:'cke_button_'+x.toLowerCase(),modes:{wysiwyg:1},panel:{css:r.skin.editor.css,attributes:{role:'listbox','aria-label':t.panelTitle}},onBlock:function(A,B){B.autoSize=true;B.element.addClass('cke_colorblock');B.element.setHtml(w(A,y));B.element.getDocument().getBody().setStyle('overflow','hidden');var C=B.keys,D=r.lang.dir=='rtl';C[D?37:39]='next';C[40]='next';C[9]='next';C[D?39:37]='prev';C[38]='prev';C[2000+9]='prev';C[32]='click';}});};function w(x,y){var z=[],A=s.colorButton_colors.split(','),B=A.length+(s.colorButton_enableMore?2:1),C=j.addFunction(function(I,J){if(I=='?'){var K=arguments.callee;function L(N){this.removeListener('ok',L);this.removeListener('cancel',L);N.name=='ok'&&K(this.getContentElement('picker','selectedColor').getValue(),J);};r.openDialog('colordialog',function(){this.on('ok',L);this.on('cancel',L);});return;}r.focus();x.hide();r.fire('saveSnapshot');new f.style(s['colorButton_'+J+'Style'],{color:'inherit'}).remove(r.document);if(I){var M=s['colorButton_'+J+'Style'];M.childRule=J=='back'?function(){return false;}:function(N){return N.getName()!='a';};new f.style(M,{color:I}).apply(r.document);}r.fire('saveSnapshot');});z.push('<a class="cke_colorauto" _cke_focus=1 hidefocus=true title="',t.auto,'" onclick="CKEDITOR.tools.callFunction(',C,",null,'",y,"');return false;\" href=\"javascript:void('",t.auto,'\')" role="option" aria-posinset="1" aria-setsize="',B,'"><table role="presentation" cellspacing=0 cellpadding=0 width="100%"><tr><td><span class="cke_colorbox" style="background-color:#000"></span></td><td colspan=7 align=center>',t.auto,'</td></tr></table></a><table role="presentation" cellspacing=0 cellpadding=0 width="100%">');for(var D=0;D<A.length;D++){if(D%8===0)z.push('</tr><tr>');var E=A[D].split('/'),F=E[0],G=E[1]||F;if(!E[1])F='#'+F.replace(/^(.)(.)(.)$/,'$1$1$2$2$3$3');var H=r.lang.colors[G]||G;z.push('<td><a class="cke_colorbox" _cke_focus=1 hidefocus=true title="',H,'" onclick="CKEDITOR.tools.callFunction(',C,",'",F,"','",y,"'); return false;\" href=\"javascript:void('",H,'\')" role="option" aria-posinset="',D+2,'" aria-setsize="',B,'"><span class="cke_colorbox" style="background-color:#',G,'"></span></a></td>');
}if(s.colorButton_enableMore===undefined||s.colorButton_enableMore)z.push('</tr><tr><td colspan=8 align=center><a class="cke_colormore" _cke_focus=1 hidefocus=true title="',t.more,'" onclick="CKEDITOR.tools.callFunction(',C,",'?','",y,"');return false;\" href=\"javascript:void('",t.more,"')\"",' role="option" aria-posinset="',B,'" aria-setsize="',B,'">',t.more,'</a></td>');z.push('</tr></table>');return z.join('');};}});n.colorButton_colors='000,800000,8B4513,2F4F4F,008080,000080,4B0082,696969,B22222,A52A2A,DAA520,006400,40E0D0,0000CD,800080,808080,F00,FF8C00,FFD700,008000,0FF,00F,EE82EE,A9A9A9,FFA07A,FFA500,FFFF00,00FF00,AFEEEE,ADD8E6,DDA0DD,D3D3D3,FFF0F5,FAEBD7,FFFFE0,F0FFF0,F0FFFF,F0F8FF,E6E6FA,FFF';n.colorButton_foreStyle={element:'span',styles:{color:'#(color)'},overrides:[{element:'font',attributes:{color:null}}]};n.colorButton_backStyle={element:'span',styles:{'background-color':'#(color)'}};(function(){o.colordialog={init:function(r){r.addCommand('colordialog',new f.dialogCommand('colordialog'));f.dialog.add('colordialog',this.path+'dialogs/colordialog.js');}};o.add('colordialog',o.colordialog);})();o.add('contextmenu',{requires:['menu'],beforeInit:function(r){r.contextMenu=new o.contextMenu(r);r.addCommand('contextMenu',{exec:function(){r.contextMenu.show(r.document.getBody());}});}});o.contextMenu=j.createClass({$:function(r){this.id=j.getNextId();this.editor=r;this._.listeners=[];this._.functionId=j.addFunction(function(s){this._.panel.hide();r.focus();r.execCommand(s);},this);this.definition={panel:{className:r.skinClass+' cke_contextmenu',attributes:{'aria-label':r.lang.contextmenu.options}}};},_:{onMenu:function(r,s,t,u){var v=this._.menu,w=this.editor;if(v){v.hide();v.removeAll();}else{v=this._.menu=new f.menu(w,this.definition);v.onClick=j.bind(function(F){v.hide();if(F.onClick)F.onClick();else if(F.command)w.execCommand(F.command);},this);v.onEscape=function(F){var G=this.parent;if(G){G._.panel.hideChild();var H=G._.panel._.panel._.currentBlock,I=H._.focusIndex;H._.markItem(I);}else if(F==27){this.hide();w.focus();}return false;};}var x=this._.listeners,y=[],z=this.editor.getSelection(),A=z&&z.getStartElement();v.onHide=j.bind(function(){v.onHide=null;if(h){var F=w.getSelection();F&&F.unlock();}this.onHide&&this.onHide();},this);for(var B=0;B<x.length;B++){var C=x[B](A,z);if(C)for(var D in C){var E=this.editor.getMenuItem(D);if(E){E.state=C[D];v.add(E);}}}v.items.length&&v.show(r,s||(w.lang.dir=='rtl'?2:1),t,u);}},proto:{addTarget:function(r,s){if(g.opera&&!('oncontextmenu' in document.body)){var t;
r.on('mousedown',function(x){x=x.data;if(x.$.button!=2){if(x.getKeystroke()==1000+1)r.fire('contextmenu',x);return;}if(s&&(g.mac?x.$.metaKey:x.$.ctrlKey))return;var y=x.getTarget();if(!t){var z=y.getDocument();t=z.createElement('input');t.$.type='button';z.getBody().append(t);}t.setAttribute('style','position:absolute;top:'+(x.$.clientY-2)+'px;left:'+(x.$.clientX-2)+'px;width:5px;height:5px;opacity:0.01');});r.on('mouseup',function(x){if(t){t.remove();t=undefined;r.fire('contextmenu',x.data);}});}r.on('contextmenu',function(x){var y=x.data;if(s&&(g.webkit?u:g.mac?y.$.metaKey:y.$.ctrlKey))return;y.preventDefault();var z=y.getTarget().getDocument().getDocumentElement(),A=y.$.clientX,B=y.$.clientY;j.setTimeout(function(){this.show(z,null,A,B);},0,this);},this);if(g.opera)r.on('keypress',function(x){var y=x.data;if(y.$.keyCode===0)y.preventDefault();});if(g.webkit){var u,v=function(x){u=g.mac?x.data.$.metaKey:x.data.$.ctrlKey;},w=function(){u=0;};r.on('keydown',v);r.on('keyup',w);r.on('contextmenu',w);}},addListener:function(r){this._.listeners.push(r);},show:function(r,s,t,u){this.editor.focus();if(h){var v=this.editor.getSelection();v&&v.lock();}this._.onMenu(r||f.document.getDocumentElement(),s,t||0,u||0);}}});(function(){function r(t){var u=this.att,v=t&&t.hasAttribute(u)&&t.getAttribute(u)||'';if(v!==undefined)this.setValue(v);};function s(){var t;for(var u=0;u<arguments.length;u++){if(arguments[u] instanceof m){t=arguments[u];break;}}if(t){var v=this.att,w=this.getValue();if(v=='dir'){var x=t.getAttribute(v,w);if(x!=w&&t.getParent())this._.dialog._.editor.fire('dirChanged',t);}if(w)t.setAttribute(v,w);else t.removeAttribute(v,w);}};o.add('dialogadvtab',{createAdvancedTab:function(t,u){if(!u)u={id:1,dir:1,classes:1,styles:1};var v=t.lang.common,w={id:'advanced',label:v.advancedTab,title:v.advancedTab,elements:[{type:'vbox',padding:1,children:[]}]},x=[];if(u.id||u.dir){if(u.id)x.push({id:'advId',att:'id',type:'text',label:v.id,setup:r,commit:s});if(u.dir)x.push({id:'advLangDir',att:'dir',type:'select',label:v.langDir,'default':'',style:'width:100%',items:[[v.notSet,''],[v.langDirLTR,'ltr'],[v.langDirRTL,'rtl']],setup:r,commit:s});w.elements[0].children.push({type:'hbox',widths:['50%','50%'],children:[].concat(x)});}if(u.styles||u.classes){x=[];if(u.styles)x.push({id:'advStyles',att:'style',type:'text',label:v.styles,'default':'',getStyle:function(y,z){var A=this.getValue().match(new RegExp(y+'\\s*:s*([^;]*)','i'));return A?A[1]:z;},updateStyle:function(y,z){var A=this.getValue();
if(A)A=A.replace(new RegExp('\\s*'+y+'s*:[^;]*(?:$|;s*)','i'),'').replace(/^[;\s]+/,'').replace(/\s+$/,'');if(z){A&&!/;\s*$/.test(A)&&(A+='; ');A+=y+': '+z;}this.setValue(A,1);},setup:r,commit:s});if(u.classes)x.push({type:'hbox',widths:['45%','55%'],children:[{id:'advCSSClasses',att:'class',type:'text',label:v.cssClasses,'default':'',setup:r,commit:s}]});w.elements[0].children.push({type:'hbox',widths:['50%','50%'],children:[].concat(x)});}return w;}});})();(function(){o.add('div',{requires:['editingblock','domiterator','styles'],init:function(r){var s=r.lang.div;r.addCommand('creatediv',new f.dialogCommand('creatediv'));r.addCommand('editdiv',new f.dialogCommand('editdiv'));r.addCommand('removediv',{exec:function(t){var u=t.getSelection(),v=u&&u.getRanges(),w,x=u.createBookmarks(),y,z=[];function A(C){var D=new i.elementPath(C),E=D.blockLimit,F=E.is('div')&&E;if(F&&!F.getAttribute('_cke_div_added')){z.push(F);F.setAttribute('_cke_div_added');}};for(var B=0;B<v.length;B++){w=v[B];if(w.collapsed)A(u.getStartElement());else{y=new i.walker(w);y.evaluator=A;y.lastForward();}}for(B=0;B<z.length;B++)z[B].remove(true);u.selectBookmarks(x);}});r.ui.addButton('CreateDiv',{label:s.toolbar,command:'creatediv'});if(r.addMenuItems){r.addMenuItems({editdiv:{label:s.edit,command:'editdiv',group:'div',order:1},removediv:{label:s.remove,command:'removediv',group:'div',order:5}});if(r.contextMenu)r.contextMenu.addListener(function(t,u){if(!t||t.isReadOnly())return null;var v=new i.elementPath(t),w=v.blockLimit;if(w&&w.getAscendant('div',true))return{editdiv:2,removediv:2};return null;});}f.dialog.add('creatediv',this.path+'dialogs/div.js');f.dialog.add('editdiv',this.path+'dialogs/div.js');}});})();(function(){var r={toolbarFocus:{exec:function(t){var u=t._.elementsPath.idBase,v=f.document.getById(u+'0');if(v)v.focus();}}},s='<span class="cke_empty">&nbsp;</span>';o.add('elementspath',{requires:['selection'],init:function(t){var u='cke_path_'+t.name,v,w=function(){if(!v)v=f.document.getById(u);return v;},x='cke_elementspath_'+j.getNextNumber()+'_';t._.elementsPath={idBase:x,filters:[]};t.on('themeSpace',function(y){if(y.data.space=='bottom')y.data.html+='<span id="'+u+'_label" class="cke_voice_label">'+t.lang.elementsPath.eleLabel+'</span>'+'<div id="'+u+'" class="cke_path" role="group" aria-labelledby="'+u+'_label">'+s+'</div>';});t.on('selectionChange',function(y){var z=g,A=y.data.selection,B=A.getStartElement(),C=[],D=y.editor,E=D._.elementsPath.list=[],F=D._.elementsPath.filters;
while(B){var G=0;for(var H=0;H<F.length;H++){if(F[H](B)===false){G=1;break;}}if(!G){var I=E.push(B)-1,J;if(B.getAttribute('_cke_real_element_type'))J=B.getAttribute('_cke_real_element_type');else J=B.getName();var K='';if(z.opera||z.gecko&&z.mac)K+=' onkeypress="return false;"';if(z.gecko)K+=' onblur="this.style.cssText = this.style.cssText;"';var L=D.lang.elementsPath.eleTitle.replace(/%1/,J);C.unshift('<a id="',x,I,'" href="javascript:void(\'',J,'\')" tabindex="-1" title="',L,'"'+(g.gecko&&g.version<10900?' onfocus="event.preventBubble();"':'')+' hidefocus="true" '+" onkeydown=\"return CKEDITOR._.elementsPath.keydown('",D.name,"',",I,', event);"'+K," onclick=\"return CKEDITOR._.elementsPath.click('",D.name,"',",I,');"',' role="button" aria-labelledby="'+x+I+'_label">',J,'<span id="',x,I,'_label" class="cke_label">'+L+'</span>','</a>');}if(J=='body')break;B=B.getParent();}w().setHtml(C.join('')+s);});t.on('contentDomUnload',function(){v&&v.setHtml(s);});t.addCommand('elementsPathFocus',r.toolbarFocus);}});})();f._.elementsPath={click:function(r,s){var t=f.instances[r];t.focus();var u=t._.elementsPath.list[s];t.getSelection().selectElement(u);return false;},keydown:function(r,s,t){var u=p.button._.instances[s],v=f.instances[r],w=v._.elementsPath.idBase,x;t=new i.event(t);var y=v.lang.dir=='rtl';switch(t.getKeystroke()){case y?39:37:case 9:x=f.document.getById(w+(s+1));if(!x)x=f.document.getById(w+'0');x.focus();return false;case y?37:39:case 2000+9:x=f.document.getById(w+(s-1));if(!x)x=f.document.getById(w+(v._.elementsPath.list.length-1));x.focus();return false;case 27:v.focus();return false;case 13:case 32:this.click(r,s);return false;}return true;}};(function(){o.add('enterkey',{requires:['keystrokes','indent'],init:function(y){var z=y.specialKeys;z[13]=w;z[2000+13]=v;}});o.enterkey={enterBlock:function(y,z,A,B){A=A||x(y);if(!A)return;var C=A.document;if(A.checkStartOfBlock()&&A.checkEndOfBlock()){var D=new i.elementPath(A.startContainer),E=D.block;if(E&&(E.is('li')||E.getParent().is('li'))){y.execCommand('outdent');return;}}var F=z==3?'div':'p',G=A.splitBlock(F);if(!G)return;var H=G.previousBlock,I=G.nextBlock,J=G.wasStartOfBlock,K=G.wasEndOfBlock,L;if(I){L=I.getParent();if(L.is('li')){I.breakParent(L);I.move(I.getNext(),1);}}else if(H&&(L=H.getParent())&&L.is('li')){H.breakParent(L);A.moveToElementEditStart(H.getNext());H.move(H.getPrevious());}if(!J&&!K){if(I.is('li')&&(L=I.getFirst(i.walker.invisible(true)))&&L.is&&L.is('ul','ol'))(h?C.createText('\xa0'):C.createElement('br')).insertBefore(L);
if(I)A.moveToElementEditStart(I);}else{var M;if(H){if(H.is('li')||!u.test(H.getName()))M=H.clone();}else if(I)M=I.clone();if(!M)M=C.createElement(F);else if(B&&!M.is('li'))M.renameNode(F);var N=G.elementPath;if(N)for(var O=0,P=N.elements.length;O<P;O++){var Q=N.elements[O];if(Q.equals(N.block)||Q.equals(N.blockLimit))break;if(k.$removeEmpty[Q.getName()]){Q=Q.clone();M.moveChildren(Q);M.append(Q);}}if(!h)M.appendBogus();A.insertNode(M);if(h&&J&&(!K||!H.getChildCount())){A.moveToElementEditStart(K?H:M);A.select();}A.moveToElementEditStart(J&&!K?I:M);}if(!h)if(I){var R=C.createElement('span');R.setHtml('&nbsp;');A.insertNode(R);R.scrollIntoView();A.deleteContents();}else M.scrollIntoView();A.select();},enterBr:function(y,z,A,B){A=A||x(y);if(!A)return;var C=A.document,D=z==3?'div':'p',E=A.checkEndOfBlock(),F=new i.elementPath(y.getSelection().getStartElement()),G=F.block,H=G&&F.block.getName(),I=false;if(!B&&H=='li'){t(y,z,A,B);return;}if(!B&&E&&u.test(H)){C.createElement('br').insertAfter(G);if(g.gecko)C.createText('').insertAfter(G);A.setStartAt(G.getNext(),h?3:1);}else{var J;I=H=='pre';if(I&&!g.gecko)J=C.createText(h?'\r':'\n');else J=C.createElement('br');A.deleteContents();A.insertNode(J);if(!h)C.createText('\ufeff').insertAfter(J);if(E&&!h)J.getParent().appendBogus();if(!h)J.getNext().$.nodeValue='';if(h)A.setStartAt(J,4);else A.setStartAt(J.getNext(),1);if(!h){var K=null;if(!g.gecko){K=C.createElement('span');K.setHtml('&nbsp;');}else K=C.createElement('br');K.insertBefore(J.getNext());K.scrollIntoView();K.remove();}}A.collapse(true);A.select(I);}};var r=o.enterkey,s=r.enterBr,t=r.enterBlock,u=/^h[1-6]$/;function v(y){if(y.mode!='wysiwyg')return false;if(y.getSelection().getStartElement().hasAscendant('pre',true)){setTimeout(function(){t(y,y.config.enterMode,null,true);},0);return true;}else return w(y,y.config.shiftEnterMode,1);};function w(y,z,A){A=y.config.forceEnterMode||A;if(y.mode!='wysiwyg')return false;if(!z)z=y.config.enterMode;setTimeout(function(){y.fire('saveSnapshot');if(z==2||y.getSelection().getStartElement().hasAscendant('pre',1))s(y,z,null,A);else t(y,z,null,A);},0);return true;};function x(y){var z=y.getSelection().getRanges(true);for(var A=z.length-1;A>0;A--)z[A].deleteContents();return z[0];};})();(function(){var r='nbsp,gt,lt,quot',s='iexcl,cent,pound,curren,yen,brvbar,sect,uml,copy,ordf,laquo,not,shy,reg,macr,deg,plusmn,sup2,sup3,acute,micro,para,middot,cedil,sup1,ordm,raquo,frac14,frac12,frac34,iquest,times,divide,fnof,bull,hellip,prime,Prime,oline,frasl,weierp,image,real,trade,alefsym,larr,uarr,rarr,darr,harr,crarr,lArr,uArr,rArr,dArr,hArr,forall,part,exist,empty,nabla,isin,notin,ni,prod,sum,minus,lowast,radic,prop,infin,ang,and,or,cap,cup,int,there4,sim,cong,asymp,ne,equiv,le,ge,sub,sup,nsub,sube,supe,oplus,otimes,perp,sdot,lceil,rceil,lfloor,rfloor,lang,rang,loz,spades,clubs,hearts,diams,circ,tilde,ensp,emsp,thinsp,zwnj,zwj,lrm,rlm,ndash,mdash,lsquo,rsquo,sbquo,ldquo,rdquo,bdquo,dagger,Dagger,permil,lsaquo,rsaquo,euro',t='Agrave,Aacute,Acirc,Atilde,Auml,Aring,AElig,Ccedil,Egrave,Eacute,Ecirc,Euml,Igrave,Iacute,Icirc,Iuml,ETH,Ntilde,Ograve,Oacute,Ocirc,Otilde,Ouml,Oslash,Ugrave,Uacute,Ucirc,Uuml,Yacute,THORN,szlig,agrave,aacute,acirc,atilde,auml,aring,aelig,ccedil,egrave,eacute,ecirc,euml,igrave,iacute,icirc,iuml,eth,ntilde,ograve,oacute,ocirc,otilde,ouml,oslash,ugrave,uacute,ucirc,uuml,yacute,thorn,yuml,OElig,oelig,Scaron,scaron,Yuml',u='Alpha,Beta,Gamma,Delta,Epsilon,Zeta,Eta,Theta,Iota,Kappa,Lambda,Mu,Nu,Xi,Omicron,Pi,Rho,Sigma,Tau,Upsilon,Phi,Chi,Psi,Omega,alpha,beta,gamma,delta,epsilon,zeta,eta,theta,iota,kappa,lambda,mu,nu,xi,omicron,pi,rho,sigmaf,sigma,tau,upsilon,phi,chi,psi,omega,thetasym,upsih,piv';
function v(w,x){var y={},z=[],A={nbsp:'\xa0',shy:'­',gt:'>',lt:'<'};w=w.replace(/\b(nbsp|shy|gt|lt|amp)(?:,|$)/g,function(F,G){var H=x?'&'+G+';':A[G],I=x?A[G]:'&'+G+';';y[H]=I;z.push(H);return '';});if(!x){w=w.split(',');var B=document.createElement('div'),C;B.innerHTML='&'+w.join(';&')+';';C=B.innerHTML;B=null;for(var D=0;D<C.length;D++){var E=C.charAt(D);y[E]='&'+w[D]+';';z.push(E);}}y.regex=z.join(x?'|':'');return y;};o.add('entities',{afterInit:function(w){var x=w.config,y=w.dataProcessor,z=y&&y.htmlFilter;if(z){var A=r;if(x.entities){A+=','+s;if(x.entities_latin)A+=','+t;if(x.entities_greek)A+=','+u;if(x.entities_additional)A+=','+x.entities_additional;}var B=v(A),C='['+B.regex+']';delete B.regex;if(x.entities&&x.entities_processNumerical)C='[^ -~]|'+C;C=new RegExp(C,'g');function D(H){return x.entities_processNumerical=='force'||!B[H]?'&#'+H.charCodeAt(0)+';':B[H];};var E=v([r,'shy'].join(','),true),F=new RegExp(E.regex,'g');function G(H){return E[H];};z.addRules({text:function(H){return H.replace(F,G).replace(C,D);}});}}});})();n.entities=true;n.entities_latin=true;n.entities_greek=true;n.entities_additional='#39';(function(){function r(A,B){var C=[];if(!B)return A;else for(var D in B)C.push(D+'='+encodeURIComponent(B[D]));return A+(A.indexOf('?')!=-1?'&':'?')+C.join('&');};function s(A){A+='';var B=A.charAt(0).toUpperCase();return B+A.substr(1);};function t(A){var H=this;var B=H.getDialog(),C=B.getParentEditor();C._.filebrowserSe=H;var D=C.config['filebrowser'+s(B.getName())+'WindowWidth']||C.config.filebrowserWindowWidth||'80%',E=C.config['filebrowser'+s(B.getName())+'WindowHeight']||C.config.filebrowserWindowHeight||'70%',F=H.filebrowser.params||{};F.CKEditor=C.name;F.CKEditorFuncNum=C._.filebrowserFn;if(!F.langCode)F.langCode=C.langCode;var G=r(H.filebrowser.url,F);C.popup(G,D,E,C.config.fileBrowserWindowFeatures);};function u(A){var D=this;var B=D.getDialog(),C=B.getParentEditor();C._.filebrowserSe=D;if(!B.getContentElement(D['for'][0],D['for'][1]).getInputElement().$.value)return false;if(!B.getContentElement(D['for'][0],D['for'][1]).getAction())return false;return true;};function v(A,B,C){var D=C.params||{};D.CKEditor=A.name;D.CKEditorFuncNum=A._.filebrowserFn;if(!D.langCode)D.langCode=A.langCode;B.action=r(C.url,D);B.filebrowser=C;};function w(A,B,C,D){var E,F;for(var G in D){E=D[G];if(E.type=='hbox'||E.type=='vbox')w(A,B,C,E.children);if(!E.filebrowser)continue;if(typeof E.filebrowser=='string'){var H={action:E.type=='fileButton'?'QuickUpload':'Browse',target:E.filebrowser};
E.filebrowser=H;}if(E.filebrowser.action=='Browse'){var I=E.filebrowser.url;if(I===undefined){I=A.config['filebrowser'+s(B)+'BrowseUrl'];if(I===undefined)I=A.config.filebrowserBrowseUrl;}if(I){E.onClick=t;E.filebrowser.url=I;E.hidden=false;}}else if(E.filebrowser.action=='QuickUpload'&&E['for']){var I=E.filebrowser.url;if(I===undefined){I=A.config['filebrowser'+s(B)+'UploadUrl'];if(I===undefined)I=A.config.filebrowserUploadUrl;}if(I){var J=E.onClick;E.onClick=function(K){var L=K.sender;if(J&&J.call(L,K)===false)return false;return u.call(L,K);};E.filebrowser.url=I;E.hidden=false;v(A,C.getContents(E['for'][0]).get(E['for'][1]),E.filebrowser);}}}};function x(A,B){var C=B.getDialog(),D=B.filebrowser.target||null;A=A.replace(/#/g,'%23');if(D){var E=D.split(':'),F=C.getContentElement(E[0],E[1]);if(F){F.setValue(A);C.selectPage(E[0]);}}};function y(A,B,C){if(C.indexOf(';')!==-1){var D=C.split(';');for(var E=0;E<D.length;E++){if(y(A,B,D[E]))return true;}return false;}var F=A.getContents(B).get(C).filebrowser;return F&&F.url;};function z(A,B){var F=this;var C=F._.filebrowserSe.getDialog(),D=F._.filebrowserSe['for'],E=F._.filebrowserSe.filebrowser.onSelect;if(D)C.getContentElement(D[0],D[1]).reset();if(typeof B=='function'&&B.call(F._.filebrowserSe)===false)return;if(E&&E.call(F._.filebrowserSe,A,B)===false)return;if(typeof B=='string'&&B)alert(B);if(A)x(A,F._.filebrowserSe);};o.add('filebrowser',{init:function(A,B){A._.filebrowserFn=j.addFunction(z,A);}});f.on('dialogDefinition',function(A){var B=A.data.definition,C;for(var D in B.contents){if(C=B.contents[D]){w(A.editor,A.data.name,B,C.elements);if(C.hidden&&C.filebrowser)C.hidden=!y(B,C.id,C.filebrowser);}}});})();o.add('find',{init:function(r){var s=o.find;r.ui.addButton('Find',{label:r.lang.findAndReplace.find,command:'find'});var t=r.addCommand('find',new f.dialogCommand('find'));t.canUndo=false;r.ui.addButton('Replace',{label:r.lang.findAndReplace.replace,command:'replace'});var u=r.addCommand('replace',new f.dialogCommand('replace'));u.canUndo=false;f.dialog.add('find',this.path+'dialogs/find.js');f.dialog.add('replace',this.path+'dialogs/find.js');},requires:['styles']});n.find_highlight={element:'span',styles:{'background-color':'#004',color:'#fff'}};(function(){var r=/\.swf(?:$|\?)/i,s=j.cssLength;function t(v){var w=v.attributes;return w.type=='application/x-shockwave-flash'||r.test(w.src||'');};function u(v,w){var x=v.createFakeParserElement(w,'cke_flash','flash',true),y=x.attributes.style||'',z=w.attributes.width,A=w.attributes.height;
if(typeof z!='undefined')y=x.attributes.style=y+'width:'+s(z)+';';if(typeof A!='undefined')y=x.attributes.style=y+'height:'+s(A)+';';return x;};o.add('flash',{init:function(v){v.addCommand('flash',new f.dialogCommand('flash'));v.ui.addButton('Flash',{label:v.lang.common.flash,command:'flash'});f.dialog.add('flash',this.path+'dialogs/flash.js');v.addCss('img.cke_flash{background-image: url('+f.getUrl(this.path+'images/placeholder.png')+');'+'background-position: center center;'+'background-repeat: no-repeat;'+'border: 1px solid #a9a9a9;'+'width: 80px;'+'height: 80px;'+'}');if(v.addMenuItems)v.addMenuItems({flash:{label:v.lang.flash.properties,command:'flash',group:'flash'}});v.on('doubleclick',function(w){var x=w.data.element;if(x.is('img')&&x.getAttribute('_cke_real_element_type')=='flash')w.data.dialog='flash';});if(v.contextMenu)v.contextMenu.addListener(function(w,x){if(w&&w.is('img')&&!w.isReadOnly()&&w.getAttribute('_cke_real_element_type')=='flash')return{flash:2};});},afterInit:function(v){var w=v.dataProcessor,x=w&&w.dataFilter;if(x)x.addRules({elements:{'cke:object':function(y){var z=y.attributes,A=z.classid&&String(z.classid).toLowerCase();if(!A){for(var B=0;B<y.children.length;B++){if(y.children[B].name=='cke:embed'){if(!t(y.children[B]))return null;return u(v,y);}}return null;}return u(v,y);},'cke:embed':function(y){if(!t(y))return null;return u(v,y);}}},5);},requires:['fakeobjects']});})();(function(){function r(s,t,u,v,w,x,y){var z=s.config,A=w.split(';'),B=[],C={};for(var D=0;D<A.length;D++){var E=A[D];if(E){E=E.split('/');var F={},G=A[D]=E[0];F[u]=B[D]=E[1]||G;C[G]=new f.style(y,F);C[G]._.definition.name=G;}else A.splice(D--,1);}s.ui.addRichCombo(t,{label:v.label,title:v.panelTitle,className:'cke_'+(u=='size'?'fontSize':'font'),panel:{css:s.skin.editor.css.concat(z.contentsCss),multiSelect:false,attributes:{'aria-label':v.panelTitle}},init:function(){this.startGroup(v.panelTitle);for(var H=0;H<A.length;H++){var I=A[H];this.add(I,C[I].buildPreview(),I);}},onClick:function(H){s.focus();s.fire('saveSnapshot');var I=C[H];if(this.getValue()==H)I.remove(s.document);else I.apply(s.document);s.fire('saveSnapshot');},onRender:function(){s.on('selectionChange',function(H){var I=this.getValue(),J=H.data.path,K=J.elements;for(var L=0,M;L<K.length;L++){M=K[L];for(var N in C){if(C[N].checkElementRemovable(M,true)){if(N!=I)this.setValue(N);return;}}}this.setValue('',x);},this);}});};o.add('font',{requires:['richcombo','styles'],init:function(s){var t=s.config;
r(s,'Font','family',s.lang.font,t.font_names,t.font_defaultLabel,t.font_style);r(s,'FontSize','size',s.lang.fontSize,t.fontSize_sizes,t.fontSize_defaultLabel,t.fontSize_style);}});})();n.font_names='Arial/Arial, Helvetica, sans-serif;Comic Sans MS/Comic Sans MS, cursive;Courier New/Courier New, Courier, monospace;Georgia/Georgia, serif;Lucida Sans Unicode/Lucida Sans Unicode, Lucida Grande, sans-serif;Tahoma/Tahoma, Geneva, sans-serif;Times New Roman/Times New Roman, Times, serif;Trebuchet MS/Trebuchet MS, Helvetica, sans-serif;Verdana/Verdana, Geneva, sans-serif';n.font_defaultLabel='';n.font_style={element:'span',styles:{'font-family':'#(family)'},overrides:[{element:'font',attributes:{face:null}}]};n.fontSize_sizes='8/8px;9/9px;10/10px;11/11px;12/12px;14/14px;16/16px;18/18px;20/20px;22/22px;24/24px;26/26px;28/28px;36/36px;48/48px;72/72px';n.fontSize_defaultLabel='';n.fontSize_style={element:'span',styles:{'font-size':'#(size)'},overrides:[{element:'font',attributes:{size:null}}]};o.add('format',{requires:['richcombo','styles'],init:function(r){var s=r.config,t=r.lang.format,u=s.format_tags.split(';'),v={};for(var w=0;w<u.length;w++){var x=u[w];v[x]=new f.style(s['format_'+x]);v[x]._.enterMode=r.config.enterMode;}r.ui.addRichCombo('Format',{label:t.label,title:t.panelTitle,className:'cke_format',panel:{css:r.skin.editor.css.concat(s.contentsCss),multiSelect:false,attributes:{'aria-label':t.panelTitle}},init:function(){this.startGroup(t.panelTitle);for(var y in v){var z=t['tag_'+y];this.add(y,'<'+y+'>'+z+'</'+y+'>',z);}},onClick:function(y){r.focus();r.fire('saveSnapshot');v[y].apply(r.document);setTimeout(function(){r.fire('saveSnapshot');},0);},onRender:function(){r.on('selectionChange',function(y){var z=this.getValue(),A=y.data.path;for(var B in v){if(v[B].checkActive(A)){if(B!=z)this.setValue(B,r.lang.format['tag_'+B]);return;}}this.setValue('');},this);}});}});n.format_tags='p;h1;h2;h3;h4;h5;h6;pre;address;div';n.format_p={element:'p'};n.format_div={element:'div'};n.format_pre={element:'pre'};n.format_address={element:'address'};n.format_h1={element:'h1'};n.format_h2={element:'h2'};n.format_h3={element:'h3'};n.format_h4={element:'h4'};n.format_h5={element:'h5'};n.format_h6={element:'h6'};o.add('forms',{init:function(r){var s=r.lang;r.addCss('form{border: 1px dotted #FF0000;padding: 2px;}\n');r.addCss('img.cke_hidden{background-image: url('+f.getUrl(this.path+'images/hiddenfield.gif')+');'+'background-position: center center;'+'background-repeat: no-repeat;'+'border: 1px solid #a9a9a9;'+'width: 16px !important;'+'height: 16px !important;'+'}');
var t=function(v,w,x){r.addCommand(w,new f.dialogCommand(w));r.ui.addButton(v,{label:s.common[v.charAt(0).toLowerCase()+v.slice(1)],command:w});f.dialog.add(w,x);},u=this.path+'dialogs/';t('Form','form',u+'form.js');t('Checkbox','checkbox',u+'checkbox.js');t('Radio','radio',u+'radio.js');t('TextField','textfield',u+'textfield.js');t('Textarea','textarea',u+'textarea.js');t('Select','select',u+'select.js');t('Button','button',u+'button.js');t('ImageButton','imagebutton',o.getPath('image')+'dialogs/image.js');t('HiddenField','hiddenfield',u+'hiddenfield.js');if(r.addMenuItems)r.addMenuItems({form:{label:s.form.menu,command:'form',group:'form'},checkbox:{label:s.checkboxAndRadio.checkboxTitle,command:'checkbox',group:'checkbox'},radio:{label:s.checkboxAndRadio.radioTitle,command:'radio',group:'radio'},textfield:{label:s.textfield.title,command:'textfield',group:'textfield'},hiddenfield:{label:s.hidden.title,command:'hiddenfield',group:'hiddenfield'},imagebutton:{label:s.image.titleButton,command:'imagebutton',group:'imagebutton'},button:{label:s.button.title,command:'button',group:'button'},select:{label:s.select.title,command:'select',group:'select'},textarea:{label:s.textarea.title,command:'textarea',group:'textarea'}});if(r.contextMenu){r.contextMenu.addListener(function(v){if(v&&v.hasAscendant('form',true)&&!v.isReadOnly())return{form:2};});r.contextMenu.addListener(function(v){if(v&&!v.isReadOnly()){var w=v.getName();if(w=='select')return{select:2};if(w=='textarea')return{textarea:2};if(w=='input'){var x=v.getAttribute('type');if(x=='text'||x=='password')return{textfield:2};if(x=='button'||x=='submit'||x=='reset')return{button:2};if(x=='checkbox')return{checkbox:2};if(x=='radio')return{radio:2};if(x=='image')return{imagebutton:2};}if(w=='img'&&v.getAttribute('_cke_real_element_type')=='hiddenfield')return{hiddenfield:2};}});}r.on('doubleclick',function(v){var w=v.data.element;if(w.is('form'))v.data.dialog='form';else if(w.is('select'))v.data.dialog='select';else if(w.is('textarea'))v.data.dialog='textarea';else if(w.is('img')&&w.getAttribute('_cke_real_element_type')=='hiddenfield')v.data.dialog='hiddenfield';else if(w.is('input')){var x=w.getAttribute('type');switch(x){case 'text':case 'password':v.data.dialog='textfield';break;case 'button':case 'submit':case 'reset':v.data.dialog='button';break;case 'checkbox':v.data.dialog='checkbox';break;case 'radio':v.data.dialog='radio';break;case 'image':v.data.dialog='imagebutton';break;}}});},afterInit:function(r){var s=r.dataProcessor,t=s&&s.htmlFilter,u=s&&s.dataFilter;
if(h)t&&t.addRules({elements:{input:function(v){var w=v.attributes,x=w.type;if(x=='checkbox'||x=='radio')w.value=='on'&&delete w.value;}}});if(u)u.addRules({elements:{input:function(v){if(v.attributes.type=='hidden')return r.createFakeParserElement(v,'cke_hidden','hiddenfield');}}});},requires:['image','fakeobjects']});if(h)m.prototype.hasAttribute=function(r){var u=this;var s=u.$.attributes.getNamedItem(r);if(u.getName()=='input')switch(r){case 'class':return u.$.className.length>0;case 'checked':return!!u.$.checked;case 'value':var t=u.getAttribute('type');if(t=='checkbox'||t=='radio')return u.$.value!='on';break;default:}return!!(s&&s.specified);};(function(){var r={canUndo:false,exec:function(t){t.insertElement(t.document.createElement('hr'));}},s='horizontalrule';o.add(s,{init:function(t){t.addCommand(s,r);t.ui.addButton('HorizontalRule',{label:t.lang.horizontalrule,command:s});}});})();(function(){var r=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,s='{cke_protected}';function t(Y){var Z=Y.children.length,aa=Y.children[Z-1];while(aa&&aa.type==3&&!j.trim(aa.value))aa=Y.children[--Z];return aa;};function u(Y,Z){var aa=Y.children,ab=t(Y);if(ab){if((Z||!h)&&ab.type==1&&ab.name=='br')aa.pop();if(ab.type==3&&r.test(ab.value))aa.pop();}};function v(Y){var Z=t(Y);return!Z||Z.type==1&&Z.name=='br'||Y.name=='form'&&Z.name=='input';};function w(Y){u(Y,true);if(v(Y))if(h)Y.add(new f.htmlParser.text('\xa0'));else Y.add(new f.htmlParser.element('br',{}));};function x(Y){u(Y);if(v(Y))Y.add(new f.htmlParser.text('\xa0'));};var y=k,z=j.extend({},y.$block,y.$listItem,y.$tableContent);for(var A in z){if(!('br' in y[A]))delete z[A];}delete z.pre;var B={elements:{},attributeNames:[[/^on/,'_cke_pa_on']]},C={elements:{}};for(A in z)C.elements[A]=w;var D={elementNames:[[/^cke:/,''],[/^\?xml:namespace$/,'']],attributeNames:[[/^_cke_(saved|pa)_/,''],[/^_cke.*/,''],['hidefocus','']],elements:{$:function(Y){var Z=Y.attributes;if(Z){if(Z.cke_temp)return false;var aa=['name','href','src'],ab;for(var ac=0;ac<aa.length;ac++){ab='_cke_saved_'+aa[ac];ab in Z&&delete Z[aa[ac]];}}return Y;},embed:function(Y){var Z=Y.parent;if(Z&&Z.name=='object'){var aa=Z.attributes.width,ab=Z.attributes.height;aa&&(Y.attributes.width=aa);ab&&(Y.attributes.height=ab);}},param:function(Y){Y.children=[];Y.isEmpty=true;return Y;},a:function(Y){if(!(Y.children.length||Y.attributes.name||Y.attributes._cke_saved_name))return false;},html:function(Y){delete Y.attributes.contenteditable;delete Y.attributes['class'];},body:function(Y){delete Y.attributes.spellcheck;
delete Y.attributes.contenteditable;},style:function(Y){var Z=Y.children[0];Z&&Z.value&&(Z.value=j.trim(Z.value));if(!Y.attributes.type)Y.attributes.type='text/css';},title:function(Y){var Z=Y.children[0];Z&&(Z.value=Y.attributes._cke_title||'');}},attributes:{'class':function(Y,Z){return j.ltrim(Y.replace(/(?:^|\s+)cke_[^\s]*/g,''))||false;}},comment:function(Y){if(Y.substr(0,s.length)==s){if(Y.substr(s.length,3)=='{C}')Y=Y.substr(s.length+3);else Y=Y.substr(s.length);return new f.htmlParser.cdata(decodeURIComponent(Y));}return Y;}},E={elements:{}};for(A in z)E.elements[A]=x;if(h)D.attributes.style=function(Y,Z){return Y.toLowerCase();};function F(Y){Y.attributes.contenteditable='false';};function G(Y){delete Y.attributes.contenteditable;};for(A in {input:1,textarea:1}){B.elements[A]=F;D.elements[A]=G;}var H=/<((?:a|area|img|input)[\s\S]*?\s)((href|src|name)\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|(?:[^ "'>]+)))([^>]*)>/gi,I=/\s_cke_saved_src\s*=/,J=/(?:<style(?=[ >])[^>]*>[\s\S]*<\/style>)|(?:<(:?link|meta|base)[^>]*>)/gi,K=/<cke:encoded>([^<]*)<\/cke:encoded>/gi,L=/(<\/?)((?:object|embed|param|html|body|head|title)[^>]*>)/gi,M=/(<\/?)cke:((?:html|body|head|title)[^>]*>)/gi,N=/<cke:(param|embed)([^>]*?)\/?>(?!\s*<\/cke:\1)/gi;function O(Y){return Y.replace(H,function(Z,aa,ab,ac,ad){if(ac=='src'&&I.test(Z))return Z;else return '<'+aa+ab+' _cke_saved_'+ab+ad+'>';});};function P(Y){return Y.replace(J,function(Z){return '<cke:encoded>'+encodeURIComponent(Z)+'</cke:encoded>';});};function Q(Y){return Y.replace(K,function(Z,aa){return decodeURIComponent(aa);});};function R(Y){return Y.replace(L,'$1cke:$2');};function S(Y){return Y.replace(M,'$1$2');};function T(Y){return Y.replace(N,'<cke:$1$2></cke:$1>');};function U(Y){return Y.replace(/(<pre\b[^>]*>)(\r\n|\n)/g,'$1$2$2');};function V(Y){return Y.replace(/<!--(?!{cke_protected})[\s\S]+?-->/g,function(Z){return '<!--'+s+'{C}'+encodeURIComponent(Z).replace(/--/g,'%2D%2D')+'-->';});};function W(Y){return Y.replace(/<!--\{cke_protected\}\{C\}([\s\S]+?)-->/g,function(Z,aa){return decodeURIComponent(aa);});};function X(Y,Z){var aa=[],ab=/<\!--\{cke_temp(comment)?\}(\d*?)-->/g,ac=[/<script[\s\S]*?<\/script>/gi,/<noscript[\s\S]*?<\/noscript>/gi].concat(Z);Y=Y.replace(/<!--[\s\S]*?-->/g,function(ae){return '<!--{cke_tempcomment}'+(aa.push(ae)-1)+'-->';});for(var ad=0;ad<ac.length;ad++)Y=Y.replace(ac[ad],function(ae){ae=ae.replace(ab,function(af,ag,ah){return aa[ah];});return '<!--{cke_temp}'+(aa.push(ae)-1)+'-->';});Y=Y.replace(ab,function(ae,af,ag){return '<!--'+s+(af?'{C}':'')+encodeURIComponent(aa[ag]).replace(/--/g,'%2D%2D')+'-->';
});return Y;};o.add('htmldataprocessor',{requires:['htmlwriter'],init:function(Y){var Z=Y.dataProcessor=new f.htmlDataProcessor(Y);Z.writer.forceSimpleAmpersand=Y.config.forceSimpleAmpersand;Z.dataFilter.addRules(B);Z.dataFilter.addRules(C);Z.htmlFilter.addRules(D);Z.htmlFilter.addRules(E);}});f.htmlDataProcessor=function(Y){var Z=this;Z.editor=Y;Z.writer=new f.htmlWriter();Z.dataFilter=new f.htmlParser.filter();Z.htmlFilter=new f.htmlParser.filter();};f.htmlDataProcessor.prototype={toHtml:function(Y,Z){Y=X(Y,this.editor.config.protectedSource);Y=O(Y);Y=P(Y);Y=R(Y);Y=T(Y);Y=U(Y);var aa=new m('div');aa.setHtml('a'+Y);Y=aa.getHtml().substr(1);Y=S(Y);Y=Q(Y);Y=W(Y);var ab=f.htmlParser.fragment.fromHtml(Y,Z),ac=new f.htmlParser.basicWriter();ab.writeHtml(ac,this.dataFilter);Y=ac.getHtml(true);Y=V(Y);return Y;},toDataFormat:function(Y,Z){var aa=this.writer,ab=f.htmlParser.fragment.fromHtml(Y,Z);aa.reset();ab.writeHtml(aa,this.htmlFilter);return aa.getHtml(true);}};})();o.add('image',{init:function(r){var s='image';f.dialog.add(s,this.path+'dialogs/image.js');r.addCommand(s,new f.dialogCommand(s));r.ui.addButton('Image',{label:r.lang.common.image,command:s});r.on('doubleclick',function(t){var u=t.data.element;if(u.is('img')&&!u.getAttribute('_cke_realelement'))t.data.dialog='image';});if(r.addMenuItems)r.addMenuItems({image:{label:r.lang.image.menu,command:'image',group:'image'}});if(r.contextMenu)r.contextMenu.addListener(function(t,u){if(!t||!t.is('img')||t.getAttribute('_cke_realelement')||t.isReadOnly())return null;return{image:2};});}});n.image_removeLinkByEmptyURL=true;(function(){var r={ol:1,ul:1},s=i.walker.whitespaces(true),t=i.walker.bookmark(false,true);function u(z,A){z.getCommand(this.name).setState(A);};function v(z){var I=this;var A=z.editor,B=z.data.path,C=B&&B.contains(r);if(C)return u.call(I,A,2);if(!I.useIndentClasses&&I.name=='indent')return u.call(I,A,2);var D=z.data.path,E=D.block||D.blockLimit;if(!E)return u.call(I,A,0);if(I.useIndentClasses){var F=E.$.className.match(I.classNameRegex),G=0;if(F){F=F[1];G=I.indentClassMap[F];}if(I.name=='outdent'&&!G||I.name=='indent'&&G==A.config.indentClasses.length)return u.call(I,A,0);return u.call(I,A,2);}else{var H=parseInt(E.getStyle(x(E)),10);if(isNaN(H))H=0;if(H<=0)return u.call(I,A,0);return u.call(I,A,2);}};function w(z,A){var C=this;C.name=A;C.useIndentClasses=z.config.indentClasses&&z.config.indentClasses.length>0;if(C.useIndentClasses){C.classNameRegex=new RegExp('(?:^|\\s+)('+z.config.indentClasses.join('|')+')(?=$|\\s)');
C.indentClassMap={};for(var B=0;B<z.config.indentClasses.length;B++)C.indentClassMap[z.config.indentClasses[B]]=B+1;}C.startDisabled=A=='outdent';};function x(z){return z.getComputedStyle('direction')=='ltr'?'margin-left':'margin-right';};function y(z){return z.type=1&&z.is('li');};w.prototype={exec:function(z){var A=this,B={};function C(R){var S=I.startContainer,T=I.endContainer;while(S&&!S.getParent().equals(R))S=S.getParent();while(T&&!T.getParent().equals(R))T=T.getParent();if(!S||!T)return;var U=S,V=[],W=false;while(!W){if(U.equals(T))W=true;V.push(U);U=U.getNext();}if(V.length<1)return;var X=R.getParents(true);for(var Y=0;Y<X.length;Y++){if(X[Y].getName&&r[X[Y].getName()]){R=X[Y];break;}}var Z=A.name=='indent'?1:-1,aa=V[0],ab=V[V.length-1],ac=o.list.listToArray(R,B),ad=ac[ab.getCustomData('listarray_index')].indent;for(Y=aa.getCustomData('listarray_index');Y<=ab.getCustomData('listarray_index');Y++){ac[Y].indent+=Z;var ae=ac[Y].parent;ac[Y].parent=new m(ae.getName(),ae.getDocument());}for(Y=ab.getCustomData('listarray_index')+1;Y<ac.length&&ac[Y].indent>ad;Y++)ac[Y].indent+=Z;var af=R.getAttribute('dir')||R.getStyle('direction'),ag=o.list.arrayToList(ac,B,null,z.config.enterMode,af);if(A.name=='outdent'){var ah;if((ah=R.getParent())&&ah.is('li')){var ai=ag.listNode.getChildren(),aj=[],ak=ai.count(),al;for(Y=ak-1;Y>=0;Y--){if((al=ai.getItem(Y))&&al.is&&al.is('li'))aj.push(al);}}}if(ag)ag.listNode.replace(R);if(aj&&aj.length)for(Y=0;Y<aj.length;Y++){var am=aj[Y],an=am;while((an=an.getNext())&&an.is&&an.getName() in r){if(h&&!am.getFirst(function(ao){return s(ao)&&t(ao);}))am.append(I.document.createText('\xa0'));am.append(an);}am.insertAfter(ah);}};function D(){var R=I.createIterator(),S=z.config.enterMode;R.enforceRealBlocks=true;R.enlargeBr=S!=2;var T;while(T=R.getNextParagraph())E(T);};function E(R){if(R.getCustomData('indent_processed'))return false;if(A.useIndentClasses){var S=R.$.className.match(A.classNameRegex),T=0;if(S){S=S[1];T=A.indentClassMap[S];}if(A.name=='outdent')T--;else T++;if(T<0)return false;T=Math.min(T,z.config.indentClasses.length);T=Math.max(T,0);var U=j.ltrim(R.$.className.replace(A.classNameRegex,''));if(T<1)R.$.className=U;else R.addClass(z.config.indentClasses[T-1]);}else{var V=x(R),W=parseInt(R.getStyle(V),10);if(isNaN(W))W=0;var X=z.config.indentOffset||40;W+=(A.name=='indent'?1:-1)*X;if(W<0)return false;W=Math.max(W,0);W=Math.ceil(W/X)*X;R.setStyle(V,W?W+(z.config.indentUnit||'px'):'');if(R.getAttribute('style')==='')R.removeAttribute('style');
}m.setMarker(B,R,'indent_processed',1);return true;};var F=z.getSelection(),G=F.createBookmarks(1),H=F&&F.getRanges(1),I,J=H.createIterator();while(I=J.getNextRange()){var K=I.getCommonAncestor(),L=K;while(L&&!(L.type==1&&r[L.getName()]))L=L.getParent();if(!L){var M=I.getEnclosedNode();if(M&&M.type==1&&M.getName() in r){I.setStartAt(M,1);I.setEndAt(M,2);L=M;}}if(L&&I.startContainer.type==1&&I.startContainer.getName() in r){var N=new i.walker(I);N.evaluator=y;I.startContainer=N.next();}if(L&&I.endContainer.type==1&&I.endContainer.getName() in r){N=new i.walker(I);N.evaluator=y;I.endContainer=N.previous();}if(L){var O=L.getFirst(function(R){return R.type==1&&R.is('li');}),P=I.startContainer,Q=O.equals(P)||O.contains(P);if(!(Q&&(A.name=='indent'||A.useIndentClasses||parseInt(L.getStyle(x(L)),10))&&E(L)))C(L);}else D();}m.clearAllMarkers(B);z.forceNextSelectionCheck();F.selectBookmarks(G);}};o.add('indent',{init:function(z){var A=new w(z,'indent'),B=new w(z,'outdent');z.addCommand('indent',A);z.addCommand('outdent',B);z.ui.addButton('Indent',{label:z.lang.indent,command:'indent'});z.ui.addButton('Outdent',{label:z.lang.outdent,command:'outdent'});z.on('selectionChange',j.bind(v,A));z.on('selectionChange',j.bind(v,B));if(g.ie6Compat||g.ie7Compat)z.addCss('ul,ol{\tmargin-left: 0px;\tpadding-left: 40px;}');z.on('dirChanged',function(C){var D=new i.range(z.document);D.setStartBefore(C.data);D.setEndAfter(C.data);var E=new i.walker(D),F;while(F=E.next()){if(F.type==1){if(!F.equals(C.data)&&F.getDirection()){D.setStartAfter(F);E=new i.walker(D);continue;}var G=F.getStyle('margin-right'),H=F.getStyle('margin-left');G?F.setStyle('margin-left',G):F.removeStyle('margin-left');H?F.setStyle('margin-right',H):F.removeStyle('margin-right');}}});},requires:['domiterator','list']});})();(function(){function r(w,x){var y=x.block||x.blockLimit;if(!y||y.getName()=='body')return 2;return s(y,w.config.useComputedState)==this.value?1:2;};function s(w,x){x=x===undefined||x;var y;if(x)y=w.getComputedStyle('text-align');else{while(!w.hasAttribute||!(w.hasAttribute('align')||w.getStyle('text-align'))){var z=w.getParent();if(!z)break;w=z;}y=w.getStyle('text-align')||w.getAttribute('align')||'';}y&&(y=y.replace(/-moz-|-webkit-|start|auto/i,''));!y&&x&&(y=w.getComputedStyle('direction')=='rtl'?'right':'left');return y;};function t(w){var x=w.editor.getCommand(this.name);x.state=r.call(this,w.editor,w.data.path);x.fire('state');};function u(w,x,y){var A=this;A.name=x;A.value=y;var z=w.config.justifyClasses;
if(z){switch(y){case 'left':A.cssClassName=z[0];break;case 'center':A.cssClassName=z[1];break;case 'right':A.cssClassName=z[2];break;case 'justify':A.cssClassName=z[3];break;}A.cssClassRegex=new RegExp('(?:^|\\s+)(?:'+z.join('|')+')(?=$|\\s)');}};function v(w){var x=w.editor,y=new i.range(x.document);y.setStartBefore(w.data);y.setEndAfter(w.data);var z=new i.walker(y),A;while(A=z.next()){if(A.type==1){if(!A.equals(w.data)&&A.getDirection()){y.setStartAfter(A);z=new i.walker(y);continue;}var B='text-align',C=A.getStyle(B);if(C=='left')A.setStyle(B,'right');else if(C=='right')A.setStyle(B,'left');}}};u.prototype={exec:function(w){var I=this;var x=w.getSelection(),y=w.config.enterMode;if(!x)return;var z=x.createBookmarks(),A=x.getRanges(true),B=I.cssClassName,C,D,E=w.config.useComputedState;E=E===undefined||E;for(var F=A.length-1;F>=0;F--){C=A[F].createIterator();C.enlargeBr=y!=2;while(D=C.getNextParagraph()){D.removeAttribute('align');D.removeStyle('text-align');var G=B&&(D.$.className=j.ltrim(D.$.className.replace(I.cssClassRegex,''))),H=I.state==2&&(!E||s(D,true)!=I.value);if(B){if(H)D.addClass(B);else if(!G)D.removeAttribute('class');}else if(H)D.setStyle('text-align',I.value);}}w.focus();w.forceNextSelectionCheck();x.selectBookmarks(z);}};o.add('justify',{init:function(w){var x=new u(w,'justifyleft','left'),y=new u(w,'justifycenter','center'),z=new u(w,'justifyright','right'),A=new u(w,'justifyblock','justify');w.addCommand('justifyleft',x);w.addCommand('justifycenter',y);w.addCommand('justifyright',z);w.addCommand('justifyblock',A);w.ui.addButton('JustifyLeft',{label:w.lang.justify.left,command:'justifyleft'});w.ui.addButton('JustifyCenter',{label:w.lang.justify.center,command:'justifycenter'});w.ui.addButton('JustifyRight',{label:w.lang.justify.right,command:'justifyright'});w.ui.addButton('JustifyBlock',{label:w.lang.justify.block,command:'justifyblock'});w.on('selectionChange',j.bind(t,x));w.on('selectionChange',j.bind(t,z));w.on('selectionChange',j.bind(t,y));w.on('selectionChange',j.bind(t,A));w.on('dirChanged',v);},requires:['domiterator']});})();o.add('keystrokes',{beforeInit:function(r){r.keystrokeHandler=new f.keystrokeHandler(r);r.specialKeys={};},init:function(r){var s=r.config.keystrokes,t=r.config.blockedKeystrokes,u=r.keystrokeHandler.keystrokes,v=r.keystrokeHandler.blockedKeystrokes;for(var w=0;w<s.length;w++)u[s[w][0]]=s[w][1];for(w=0;w<t.length;w++)v[t[w]]=1;}});f.keystrokeHandler=function(r){var s=this;if(r.keystrokeHandler)return r.keystrokeHandler;
s.keystrokes={};s.blockedKeystrokes={};s._={editor:r};return s;};(function(){var r,s=function(u){u=u.data;var v=u.getKeystroke(),w=this.keystrokes[v],x=this._.editor;r=x.fire('key',{keyCode:v})===true;if(!r){if(w){var y={from:'keystrokeHandler'};r=x.execCommand(w,y)!==false;}if(!r){var z=x.specialKeys[v];r=z&&z(x)===true;if(!r)r=!!this.blockedKeystrokes[v];}}if(r)u.preventDefault(true);return!r;},t=function(u){if(r){r=false;u.data.preventDefault(true);}};f.keystrokeHandler.prototype={attach:function(u){u.on('keydown',s,this);if(g.opera||g.gecko&&g.mac)u.on('keypress',t,this);}};})();n.blockedKeystrokes=[1000+66,1000+73,1000+85];n.keystrokes=[[4000+121,'toolbarFocus'],[4000+122,'elementsPathFocus'],[2000+121,'contextMenu'],[1000+2000+121,'contextMenu'],[1000+90,'undo'],[1000+89,'redo'],[1000+2000+90,'redo'],[1000+76,'link'],[1000+66,'bold'],[1000+73,'italic'],[1000+85,'underline'],[4000+109,'toolbarCollapse'],[4000+48,'a11yHelp']];o.add('link',{init:function(r){r.addCommand('link',new f.dialogCommand('link'));r.addCommand('anchor',new f.dialogCommand('anchor'));r.addCommand('unlink',new f.unlinkCommand());r.ui.addButton('Link',{label:r.lang.link.toolbar,command:'link'});r.ui.addButton('Unlink',{label:r.lang.unlink,command:'unlink'});r.ui.addButton('Anchor',{label:r.lang.anchor.toolbar,command:'anchor'});f.dialog.add('link',this.path+'dialogs/link.js');f.dialog.add('anchor',this.path+'dialogs/anchor.js');r.addCss('img.cke_anchor{background-image: url('+f.getUrl(this.path+'images/anchor.gif')+');'+'background-position: center center;'+'background-repeat: no-repeat;'+'border: 1px solid #a9a9a9;'+'width: 18px !important;'+'height: 18px !important;'+'}\n'+'a.cke_anchor'+'{'+'background-image: url('+f.getUrl(this.path+'images/anchor.gif')+');'+'background-position: 0 center;'+'background-repeat: no-repeat;'+'border: 1px solid #a9a9a9;'+'padding-left: 18px;'+'}');r.on('selectionChange',function(s){var t=r.getCommand('unlink'),u=s.data.path.lastElement&&s.data.path.lastElement.getAscendant('a',true);if(u&&u.getName()=='a'&&u.getAttribute('href'))t.setState(2);else t.setState(0);});r.on('doubleclick',function(s){var t=o.link.getSelectedLink(r)||s.data.element;if(t.is('a'))s.data.dialog=t.getAttribute('name')&&!t.getAttribute('href')?'anchor':'link';else if(t.is('img')&&t.getAttribute('_cke_real_element_type')=='anchor')s.data.dialog='anchor';});if(r.addMenuItems)r.addMenuItems({anchor:{label:r.lang.anchor.menu,command:'anchor',group:'anchor'},link:{label:r.lang.link.menu,command:'link',group:'link',order:1},unlink:{label:r.lang.unlink,command:'unlink',group:'link',order:5}});
if(r.contextMenu)r.contextMenu.addListener(function(s,t){if(!s||s.isReadOnly())return null;var u=s.is('img')&&s.getAttribute('_cke_real_element_type')=='anchor';if(!u){if(!(s=o.link.getSelectedLink(r)))return null;u=s.getAttribute('name')&&!s.getAttribute('href');}return u?{anchor:2}:{link:2,unlink:2};});},afterInit:function(r){var s=r.dataProcessor,t=s&&s.dataFilter;if(t)t.addRules({elements:{a:function(u){var v=u.attributes;if(v.name&&!v.href)return r.createFakeParserElement(u,'cke_anchor','anchor');}}});},requires:['fakeobjects']});o.link={getSelectedLink:function(r){try{var s=r.getSelection();if(s.getType()==3){var t=s.getSelectedElement();if(t.is('a'))return t;}var u=s.getRanges(true)[0];u.shrink(2);var v=u.getCommonAncestor();return v.getAscendant('a',true);}catch(w){return null;}}};f.unlinkCommand=function(){};f.unlinkCommand.prototype={exec:function(r){var s=r.getSelection(),t=s.createBookmarks(),u=s.getRanges(),v,w;for(var x=0;x<u.length;x++){v=u[x].getCommonAncestor(true);w=v.getAscendant('a',true);if(!w)continue;u[x].selectNodeContents(w);}s.selectRanges(u);r.document.$.execCommand('unlink',false,null);s.selectBookmarks(t);},startDisabled:true};j.extend(n,{linkShowAdvancedTab:true,linkShowTargetTab:true});(function(){var r={ol:1,ul:1},s=/^[\n\r\t ]*$/;o.list={listToArray:function(H,I,J,K,L){if(!r[H.getName()])return[];if(!K)K=0;if(!J)J=[];for(var M=0,N=H.getChildCount();M<N;M++){var O=H.getChild(M);if(O.$.nodeName.toLowerCase()!='li')continue;var P={parent:H,indent:K,element:O,contents:[]};if(!L){P.grandparent=H.getParent();if(P.grandparent&&P.grandparent.$.nodeName.toLowerCase()=='li')P.grandparent=P.grandparent.getParent();}else P.grandparent=L;if(I)m.setMarker(I,O,'listarray_index',J.length);J.push(P);for(var Q=0,R=O.getChildCount(),S;Q<R;Q++){S=O.getChild(Q);if(S.type==1&&r[S.getName()])o.list.listToArray(S,I,J,K+1,P.grandparent);else P.contents.push(S);}}return J;},arrayToList:function(H,I,J,K,L){if(!J)J=0;if(!H||H.length<J+1)return null;var M=H[J].parent.getDocument(),N=new i.documentFragment(M),O=null,P=J,Q=Math.max(H[J].indent,0),R=null,S=K==1?'p':'div';while(1){var T=H[P];if(T.indent==Q){if(!O||H[P].parent.getName()!=O.getName()){O=H[P].parent.clone(false,1);N.append(O);}R=O.append(T.element.clone(0,1));for(var U=0;U<T.contents.length;U++)R.append(T.contents[U].clone(1,1));P++;}else if(T.indent==Math.max(Q,0)+1){var V=o.list.arrayToList(H,null,P,K);R.append(V.listNode);P=V.nextIndex;}else if(T.indent==-1&&!J&&T.grandparent){R;if(r[T.grandparent.getName()])R=T.element.clone(false,true);
else if(L||T.element.hasAttributes()||K!=2&&T.grandparent.getName()!='td'){R=M.createElement(S);T.element.copyAttributes(R,{type:1,value:1});L&&R.setAttribute('dir',L);if(!L&&K==2&&!R.hasAttributes())R=new i.documentFragment(M);}else R=new i.documentFragment(M);for(U=0;U<T.contents.length;U++)R.append(T.contents[U].clone(1,1));if(R.type==11&&P!=H.length-1){if(R.getLast()&&R.getLast().type==1&&R.getLast().getAttribute('type')=='_moz')R.getLast().remove();R.appendBogus();}if(R.type==1&&R.getName()==S&&R.$.firstChild){R.trim();var W=R.getFirst();if(W.type==1&&W.isBlockBoundary()){var X=new i.documentFragment(M);R.moveChildren(X);R=X;}}var Y=R.$.nodeName.toLowerCase();if(!h&&(Y=='div'||Y=='p'))R.appendBogus();N.append(R);O=null;P++;}else return null;if(H.length<=P||Math.max(H[P].indent,0)<Q)break;}if(I){var Z=N.getFirst();while(Z){if(Z.type==1)m.clearMarkers(I,Z);Z=Z.getNextSourceNode();}}return{listNode:N,nextIndex:P};}};function t(H,I){H.getCommand(this.name).setState(I);};function u(H){var I=H.data.path,J=I.blockLimit,K=I.elements,L;for(var M=0;M<K.length&&(L=K[M])&&!L.equals(J);M++){if(r[K[M].getName()])return t.call(this,H.editor,this.type==K[M].getName()?1:2);}return t.call(this,H.editor,2);};function v(H,I,J,K){var L=o.list.listToArray(I.root,J),M=[];for(var N=0;N<I.contents.length;N++){var O=I.contents[N];O=O.getAscendant('li',true);if(!O||O.getCustomData('list_item_processed'))continue;M.push(O);m.setMarker(J,O,'list_item_processed',true);}var P=I.root,Q=P.getDocument().createElement(this.type);P.copyAttributes(Q,{start:1,type:1});Q.removeStyle('list-style-type');for(N=0;N<M.length;N++){var R=M[N].getCustomData('listarray_index');L[R].parent=Q;}var S=o.list.arrayToList(L,J,null,H.config.enterMode),T,U=S.listNode.getChildCount();for(N=0;N<U&&(T=S.listNode.getChild(N));N++){if(T.getName()==this.type)K.push(T);}S.listNode.replace(I.root);};var w=/^h[1-6]$/;function x(H,I,J){var K=I.contents,L=I.root.getDocument(),M=[];if(K.length==1&&K[0].equals(I.root)){var N=L.createElement('div');K[0].moveChildren&&K[0].moveChildren(N);K[0].append(N);K[0]=N;}var O=I.contents[0].getParent();for(var P=0;P<K.length;P++)O=O.getCommonAncestor(K[P].getParent());var Q=H.config.useComputedState,R,S;Q=Q===undefined||Q;for(P=0;P<K.length;P++){var T=K[P],U;while(U=T.getParent()){if(U.equals(O)){M.push(T);if(!S&&T.getDirection())S=1;var V=T.getDirection(Q);if(R!==null)if(R&&R!=V)R=null;else R=V;break;}T=U;}}if(M.length<1)return;var W=M[M.length-1].getNext(),X=L.createElement(this.type);
J.push(X);var Y,Z;while(M.length){Y=M.shift();Z=L.createElement('li');if(Y.is('pre')||w.test(Y.getName()))Y.appendTo(Z);else{if(R&&Y.getDirection()){Y.removeStyle('direction');Y.removeAttribute('dir');}Y.copyAttributes(Z);Y.moveChildren(Z);Y.remove();}Z.appendTo(X);}if(R&&S)X.setAttribute('dir',R);if(W)X.insertBefore(W);else X.appendTo(O);};function y(H,I,J){var K=o.list.listToArray(I.root,J),L=[];for(var M=0;M<I.contents.length;M++){var N=I.contents[M];N=N.getAscendant('li',true);if(!N||N.getCustomData('list_item_processed'))continue;L.push(N);m.setMarker(J,N,'list_item_processed',true);}var O=null;for(M=0;M<L.length;M++){var P=L[M].getCustomData('listarray_index');K[P].indent=-1;O=P;}for(M=O+1;M<K.length;M++){if(K[M].indent>K[M-1].indent+1){var Q=K[M-1].indent+1-K[M].indent,R=K[M].indent;while(K[M]&&K[M].indent>=R){K[M].indent+=Q;M++;}M--;}}var S=o.list.arrayToList(K,J,null,H.config.enterMode,I.root.getAttribute('dir')),T=S.listNode,U,V;function W(X){if((U=T[X?'getFirst':'getLast']())&&!(U.is&&U.isBlockBoundary())&&(V=I.root[X?'getPrevious':'getNext'](i.walker.whitespaces(true)))&&!(V.is&&V.isBlockBoundary({br:1})))H.document.createElement('br')[X?'insertBefore':'insertAfter'](U);};W(true);W();T.replace(I.root);};function z(H,I){this.name=H;this.type=I;};z.prototype={exec:function(H){H.focus();var I=H.document,J=H.getSelection(),K=J&&J.getRanges(true);if(!K||K.length<1)return;if(this.state==2){var L=I.getBody();L.trim();if(!L.getFirst()){var M=I.createElement(H.config.enterMode==1?'p':H.config.enterMode==3?'div':'br');M.appendTo(L);K=new i.rangeList([new i.range(I)]);if(M.is('br')){K[0].setStartBefore(M);K[0].setEndAfter(M);}else K[0].selectNodeContents(M);J.selectRanges(K);}else{var N=K.length==1&&K[0],O=N&&N.getEnclosedNode();if(O&&O.is&&this.type==O.getName())t.call(this,H,1);}}var P=J.createBookmarks(true),Q=[],R={},S=K.createIterator(),T=0;while((N=S.getNextRange())&&++T){var U=N.getBoundaryNodes(),V=U.startNode,W=U.endNode;if(V.type==1&&V.getName()=='td')N.setStartAt(U.startNode,1);if(W.type==1&&W.getName()=='td')N.setEndAt(U.endNode,2);var X=N.createIterator(),Y;X.forceBrBreak=this.state==2;while(Y=X.getNextParagraph()){if(Y.getCustomData('list_block'))continue;else m.setMarker(R,Y,'list_block',1);var Z=new i.elementPath(Y),aa=Z.elements,ab=aa.length,ac=null,ad=0,ae=Z.blockLimit,af;for(var ag=ab-1;ag>=0&&(af=aa[ag]);ag--){if(r[af.getName()]&&ae.contains(af)){ae.removeCustomData('list_group_object_'+T);var ah=af.getCustomData('list_group_object');if(ah)ah.contents.push(Y);
else{ah={root:af,contents:[Y]};Q.push(ah);m.setMarker(R,af,'list_group_object',ah);}ad=1;break;}}if(ad)continue;var ai=ae;if(ai.getCustomData('list_group_object_'+T))ai.getCustomData('list_group_object_'+T).contents.push(Y);else{ah={root:ai,contents:[Y]};m.setMarker(R,ai,'list_group_object_'+T,ah);Q.push(ah);}}}var aj=[];while(Q.length>0){ah=Q.shift();if(this.state==2){if(r[ah.root.getName()])v.call(this,H,ah,R,aj);else x.call(this,H,ah,aj);}else if(this.state==1&&r[ah.root.getName()])y.call(this,H,ah,R);}for(ag=0;ag<aj.length;ag++){ac=aj[ag];var ak,al=this;(ak=function(am){var an=ac[am?'getPrevious':'getNext'](i.walker.whitespaces(true));if(an&&an.getName&&an.getName()==al.type){an.remove();an.moveChildren(ac,am);}})();ak(1);}m.clearAllMarkers(R);J.selectBookmarks(P);H.focus();}};var A=k,B=/[\t\r\n ]*(?:&nbsp;|\xa0)$/;function C(H,I){var J,K=H.children,L=K.length;for(var M=0;M<L;M++){J=K[M];if(J.name&&J.name in I)return M;}return L;};function D(H){return function(I){var J=I.children,K=C(I,A.$list),L=J[K],M=L&&L.previous,N;if(M&&(M.name&&M.name=='br'||M.value&&(N=M.value.match(B)))){var O=M;if(!(N&&N.index)&&O==J[0])J[0]=H||h?new f.htmlParser.text('\xa0'):new f.htmlParser.element('br',{});else if(O.name=='br')J.splice(K-1,1);else O.value=O.value.replace(B,'');}};};var E={elements:{}};for(var F in A.$listItem)E.elements[F]=D();var G={elements:{}};for(F in A.$listItem)G.elements[F]=D(true);o.add('list',{init:function(H){var I=new z('numberedlist','ol'),J=new z('bulletedlist','ul');H.addCommand('numberedlist',I);H.addCommand('bulletedlist',J);H.ui.addButton('NumberedList',{label:H.lang.numberedlist,command:'numberedlist'});H.ui.addButton('BulletedList',{label:H.lang.bulletedlist,command:'bulletedlist'});H.on('selectionChange',j.bind(u,I));H.on('selectionChange',j.bind(u,J));},afterInit:function(H){var I=H.dataProcessor;if(I){I.dataFilter.addRules(E);I.htmlFilter.addRules(G);}},requires:['domiterator']});})();(function(){o.liststyle={requires:['dialog'],init:function(r){r.addCommand('numberedListStyle',new f.dialogCommand('numberedListStyle'));f.dialog.add('numberedListStyle',this.path+'dialogs/liststyle.js');r.addCommand('bulletedListStyle',new f.dialogCommand('bulletedListStyle'));f.dialog.add('bulletedListStyle',this.path+'dialogs/liststyle.js');if(r.addMenuItems){r.addMenuGroup('list',108);r.addMenuItems({numberedlist:{label:r.lang.list.numberedTitle,group:'list',command:'numberedListStyle'},bulletedlist:{label:r.lang.list.bulletedTitle,group:'list',command:'bulletedListStyle'}});
}if(r.contextMenu)r.contextMenu.addListener(function(s,t){if(!s||s.isReadOnly())return null;while(s){var u=s.getName();if(u=='ol')return{numberedlist:2};else if(u=='ul')return{bulletedlist:2};s=s.getParent();}return null;});}};o.add('liststyle',o.liststyle);})();(function(){function r(x){if(!x||x.type!=1||x.getName()!='form')return[];var y=[],z=['style','className'];for(var A=0;A<z.length;A++){var B=z[A],C=x.$.elements.namedItem(B);if(C){var D=new m(C);y.push([D,D.nextSibling]);D.remove();}}return y;};function s(x,y){if(!x||x.type!=1||x.getName()!='form')return;if(y.length>0)for(var z=y.length-1;z>=0;z--){var A=y[z][0],B=y[z][1];if(B)A.insertBefore(B);else A.appendTo(x);}};function t(x,y){var z=r(x),A={},B=x.$;if(!y){A['class']=B.className||'';B.className='';}A.inline=B.style.cssText||'';if(!y)B.style.cssText='position: static; overflow: visible';s(z);return A;};function u(x,y){var z=r(x),A=x.$;if('class' in y)A.className=y['class'];if('inline' in y)A.style.cssText=y.inline;s(z);};function v(x){var y=f.instances;for(var z in y){var A=y[z];if(A.mode=='wysiwyg'){var B=A.document.getBody();B.setAttribute('contentEditable',false);B.setAttribute('contentEditable',true);}}if(x.focusManager.hasFocus){x.toolbox.focus();x.focus();}};function w(x){if(!h||g.version>6)return null;var y=m.createFromHtml('<iframe frameborder="0" tabindex="-1" src="javascript:void((function(){document.open();'+(g.isCustomDomain()?"document.domain='"+this.getDocument().$.domain+"';":'')+'document.close();'+'})())"'+' style="display:block;position:absolute;z-index:-1;'+'progid:DXImageTransform.Microsoft.Alpha(opacity=0);'+'"></iframe>');return x.append(y,true);};o.add('maximize',{init:function(x){var y=x.lang,z=f.document,A=z.getWindow(),B,C,D,E;function F(){var H=A.getViewPaneSize();E&&E.setStyles({width:H.width+'px',height:H.height+'px'});x.resize(H.width,H.height,null,true);};var G=2;x.addCommand('maximize',{modes:{wysiwyg:1,source:1},editorFocus:false,exec:function(){var H=x.container.getChild(1),I=x.getThemeSpace('contents');if(x.mode=='wysiwyg'){var J=x.getSelection();B=J&&J.getRanges();C=A.getScrollPosition();}else{var K=x.textarea.$;B=!h&&[K.selectionStart,K.selectionEnd];C=[K.scrollLeft,K.scrollTop];}if(this.state==2){A.on('resize',F);D=A.getScrollPosition();var L=x.container;while(L=L.getParent()){L.setCustomData('maximize_saved_styles',t(L));L.setStyle('z-index',x.config.baseFloatZIndex-1);}I.setCustomData('maximize_saved_styles',t(I,true));H.setCustomData('maximize_saved_styles',t(H,true));
var M=A.getViewPaneSize(),N={overflow:'hidden',width:(g.opera?M.width:0)+'px',height:(g.opera?M.height-16:0)+'px'};if(h)z.$.documentElement.style.overflow=z.getBody().$.style.overflow='hidden';else z.getBody().setStyles(N);if(g.opera)z.getBody().getParent().setStyles(N);h?setTimeout(function(){A.$.scrollTo(0,0);},0):A.$.scrollTo(0,0);H.setStyle('position','absolute');H.$.offsetLeft;H.setStyles({'z-index':x.config.baseFloatZIndex-1,left:'0px',top:'0px'});E=w(H);H.addClass('cke_maximized');F();var O=H.getDocumentPosition();H.setStyles({left:-1*O.x+'px',top:-1*O.y+'px'});g.gecko&&v(x);}else if(this.state==1){A.removeListener('resize',F);var P=[I,H];for(var Q=0;Q<P.length;Q++){u(P[Q],P[Q].getCustomData('maximize_saved_styles'));P[Q].removeCustomData('maximize_saved_styles');}L=x.container;while(L=L.getParent()){u(L,L.getCustomData('maximize_saved_styles'));L.removeCustomData('maximize_saved_styles');}h?setTimeout(function(){A.$.scrollTo(D.x,D.y);},0):A.$.scrollTo(D.x,D.y);H.removeClass('cke_maximized');if(E){E.remove();E=null;}x.fire('resize');}this.toggleState();var R=this.uiItems[0],S=this.state==2?y.maximize:y.minimize,T=x.element.getDocument().getById(R._.id);T.getChild(1).setHtml(S);T.setAttribute('title',S);T.setAttribute('href','javascript:void("'+S+'");');if(x.mode=='wysiwyg'){if(B){g.gecko&&v(x);x.getSelection().selectRanges(B);var U=x.getSelection().getStartElement();U&&U.scrollIntoView(true);}else A.$.scrollTo(C.x,C.y);}else{if(B){K.selectionStart=B[0];K.selectionEnd=B[1];}K.scrollLeft=C[0];K.scrollTop=C[1];}B=C=null;G=this.state;},canUndo:false});x.ui.addButton('Maximize',{label:y.maximize,command:'maximize'});x.on('mode',function(){var H=x.getCommand('maximize');H.setState(H.state==0?0:G);},null,null,100);}});})();var a={url:'',width:507,height:322,autoplay:'false',contentType:''},b={url:'',width:507,height:322,autoplay:'false',contentType:''},c='';(function(){o.add('mediaembed',{requires:['iframedialog'],init:function(r){var s=this;f.dialog.add('MediaEmbedDialog',function(t){return{title:'Embed Media Dialog',minWidth:550,minHeight:200,contents:[{id:'iframe',label:'Embed Media',expand:true,elements:[{type:'html',id:'pageMediaEmbed',label:'Embed Media',style:'width : 100%',html:'<iframe src="'+s.path.toLowerCase()+'dialogs/mediaembed_'+t.config.language+'.html" frameborder="0" name="iframeMediaEmbed" id="iframeMediaEmbed" allowtransparency="1" style="width:100%;height:250px;margin:0;padding:0;"></iframe>'}]}],onShow:function(){var u=setInterval(function(){var v=$('iframe#iframeMediaEmbed');
if(v){var w=v.contents();if(w.find('#chkAutoplay').length){w.find('#txtUrl').val(a.url);w.find('#txtWidth').val(a.width);w.find('#txtHeight').val(a.height);w.find('#txtContentType').val(a.contentType);if(a.autoplay=='true')w.find('#chkAutoplay').attr('checked',true);else w.find('#chkAutoplay').attr('checked',false);w.find('#txtAlign').val('');clearInterval(u);}}},50);},onOk:function(){var u=this.getParentEditor(),v=$('iframe#iframeMediaEmbed'),w=v.contents(),x=w.find('#txtUrl').val();if(x!=''&&x.indexOf('.')!=-1){var y='${include:media-player url=['+unescape(x)+']',z=w.find('#txtContentType').val();if(z.length>0)y=y+' content-type=['+z+']';var A=w.find('#txtWidth').val();if(A.length>0&&A!=a.width)y=y+' width=['+A+']';var B=w.find('#txtHeight').val();if(B.length>0&&B!=a.height)y=y+' height=['+B+']';var C=w.find('#chkAutoplay');if(C.attr('checked')==true)y+=' autoplay=[true]';var D=w.find('#txtAlign').val();if(y.length>0)y+='}';var E='';if(z.length>0&&z=='audio/mp3')E='vrtx-media-player-audio';else if(d(x)=='mp3')E='vrtx-media-player-audio';else E='vrtx-media-player';selected=u.getSelection().getStartElement();selected.removeAttribute('class');if(D!=''&&E!=''){selected.addClass(E);selected.addClass(D);}else selected.addClass(E);if(selected.is('p'))selected.renameNode('div');selected.setText(y);}else{alert('Du må spesifisere en URL');return false;}}};});f.dialog.add('MediaEmbedDialogMod',function(t){return{title:'Embed Media Dialog',minWidth:550,minHeight:200,contents:[{id:'iframe',label:'Embed Media',expand:true,elements:[{type:'html',id:'pageMediaEmbed',label:'Embed Media',style:'width : 100%',html:'<iframe src="'+s.path.toLowerCase()+'dialogs/mediaembed_'+t.config.language+'.html" frameborder="0" name="iframeMediaEmbed" id="iframeMediaEmbed" allowtransparency="1" style="width:100%;height:250px;margin:0;padding:0;"></iframe>'}]}],onShow:function(){var u=setInterval(function(){var v=$('iframe#iframeMediaEmbed');if(v){var w=v.contents();if(w.find('#chkAutoplay').length){w.find('#txtUrl').val(b.url);w.find('#txtWidth').val(b.width);w.find('#txtHeight').val(b.height);w.find('#txtContentType').val(b.contentType);if(b.autoplay=='true')w.find('#chkAutoplay').attr('checked',true);else w.find('#chkAutoplay').attr('checked',false);if(c!=''&&c!=' ')w.find('#txtAlign').val(c);else w.find('#txtAlign').val('');b.url=a.url;b.width=a.width;b.height=a.height;b.autoplay=a.autoplay;b.contentType=a.contentType;c='';clearInterval(u);}}},50);},onOk:function(){var u=this.getParentEditor(),v=$('iframe#iframeMediaEmbed'),w=v.contents(),x=w.find('#txtUrl').val();
if(x!=''&&x.indexOf('.')!=-1){var y='${include:media-player url=['+unescape(x)+']',z=w.find('#txtContentType').val();if(z.length>0)y=y+' content-type=['+z+']';var A=w.find('#txtWidth').val();if(A.length>0&&A!=a.width)y=y+' width=['+A+']';var B=w.find('#txtHeight').val();if(B.length>0&&B!=a.height)y=y+' height=['+B+']';var C=w.find('#chkAutoplay');if(C.attr('checked')==true)y+=' autoplay=[true]';var D=w.find('#txtAlign').val();if(y.length>0)y+='}';var E='';if(z.length>0&&z=='audio/mp3')E='vrtx-media-player-audio';else if(d(x)=='mp3')E='vrtx-media-player-audio';else E='vrtx-media-player';selected=u.getSelection().getStartElement();selected.removeAttribute('class');if(D!=''&&E!=''){selected.addClass(E);selected.addClass(D);}else selected.addClass(E);if(selected.is('p'))selected.renameNode('div');selected.setText(y);}else{alert('Du må spesifisere en URL');return false;}}};});r.addCommand('mediaembed',new f.dialogCommand('MediaEmbedDialog'));r.addCommand('mediaembedmod',new f.dialogCommand('MediaEmbedDialogMod'));r.addCommand('MediaEmbedRemove',{exec:function(t){var u=t.getSelection(),v=u.createBookmarks(),w=u.getStartElement();w.remove(false);u.selectBookmarks(v);}});r.ui.addButton('MediaEmbed',{label:'Embed Media',command:'mediaembed',icon:this.path.toLowerCase()+'images/icon.gif'});r.on('doubleclick',function(t){var u=t.data,v=u.element,w=v.getHtml();if(w.indexOf('include:media-player')==-1)return null;e(w,v);u.dialog='MediaEmbedDialogMod';});if(r.addMenuItems){r.addMenuGroup('mediaembed');r.addMenuItems({MediaEmbedDialogMod:{label:'Mediaegenskaper',command:'mediaembedmod',group:'mediaembed',icon:this.path.toLowerCase()+'images/icon.gif',order:1},RemoveMedia:{label:'Fjern media',command:'MediaEmbedRemove',group:'mediaembed',icon:this.path.toLowerCase()+'images/iconremove.gif',order:5}});}if(r.contextMenu)r.contextMenu.addListener(function(t,u){var v=t.getHtml();if(v.indexOf('include:media-player')==-1)return null;e(v,t);return{MediaEmbedDialogMod:2,RemoveMedia:2};});}});})();function d(r){var s=r.match(/\.(avi|asf|fla|flv|mov|mp3|mp4|m4v|mpg|mpeg|mpv|qt|swf|wma|wmv)$/i);if(s!=null&&s.length&&s.length>0)s=s[1];else s='';return s;};function e(r,s){var t=[],u=r,v=s.$.className;c=$.trim(v.replace(/vrtx-media-player[\w-]*/g,''));for(var w in b){if(w!='contentType')t=new RegExp('(?:'+w+'=\\[)(.*?)(?=\\])');else t=new RegExp('(?:content\\-type=\\[)(.*?)(?=\\])');var x=t.exec(r);if(x!=null)if(x.length=2)b[w]=x[1];r=u;}};o.add('newpage',{init:function(r){r.addCommand('newpage',{modes:{wysiwyg:1,source:1},exec:function(s){var t=this;
s.setData(s.config.newpage_html||'',function(){setTimeout(function(){s.fire('afterCommandExec',{name:t.name,command:t});},200);});s.focus();},async:true});r.ui.addButton('NewPage',{label:r.lang.newPage,command:'newpage'});}});o.add('pagebreak',{init:function(r){r.addCommand('pagebreak',o.pagebreakCmd);r.ui.addButton('PageBreak',{label:r.lang.pagebreak,command:'pagebreak'});r.addCss('img.cke_pagebreak{background-image: url('+f.getUrl(this.path+'images/pagebreak.gif')+');'+'background-position: center center;'+'background-repeat: no-repeat;'+'clear: both;'+'display: block;'+'float: none;'+'width:100% !important; _width:99.9% !important;'+'border-top: #999999 1px dotted;'+'border-bottom: #999999 1px dotted;'+'height: 5px !important;'+'page-break-after: always;'+'}');},afterInit:function(r){var s=r.dataProcessor,t=s&&s.dataFilter;if(t)t.addRules({elements:{div:function(u){var v=u.attributes,w=v&&v.style,x=w&&u.children.length==1&&u.children[0],y=x&&x.name=='span'&&x.attributes.style;if(y&&/page-break-after\s*:\s*always/i.test(w)&&/display\s*:\s*none/i.test(y)){var z=r.createFakeParserElement(u,'cke_pagebreak','div'),A=r.lang.pagebreakAlt;z.attributes.alt=A;z.attributes['aria-label']=A;return z;}}}});},requires:['fakeobjects']});o.pagebreakCmd={exec:function(r){var s=r.lang.pagebreakAlt,t=m.createFromHtml('<div style="page-break-after: always;"><span style="display: none;">&nbsp;</span></div>');t=r.createFakeElement(t,'cke_pagebreak','div');t.setAttribute('alt',s);t.setAttribute('aria-label',s);var u=r.getSelection().getRanges(true);r.fire('saveSnapshot');for(var v,w=u.length-1;w>=0;w--){v=u[w];if(w<u.length-1)t=t.clone(true);v.splitBlock('p');v.insertNode(t);if(w==u.length-1){v.moveToPosition(t,4);v.select();}var x=t.getPrevious();if(x&&k[x.getName()].div)t.move(x);}r.fire('saveSnapshot');}};(function(){o.add('pastefromword',{init:function(r){var s=0,t=function(){setTimeout(function(){s=0;},0);};r.addCommand('pastefromword',{canUndo:false,exec:function(){s=1;if(r.execCommand('paste')===false)r.on('dialogHide',function(u){u.removeListener();t();});else t();}});r.ui.addButton('PasteFromWord',{label:r.lang.pastefromword.toolbar,command:'pastefromword'});r.on('paste',function(u){var v=u.data,w;if((w=v.html)&&(s||/(class=\"?Mso|style=\"[^\"]*\bmso\-|w:WordDocument)/.test(w))){var x=this.loadFilterRules(function(){if(x)r.fire('paste',v);else if(!r.config.pasteFromWordPromptCleanup||s||confirm(r.lang.pastefromword.confirmCleanup))v.html=f.cleanWord(w,r);});x&&u.cancel();
}},this);},loadFilterRules:function(r){var s=f.cleanWord;if(s)r();else{var t=f.getUrl(n.pasteFromWordCleanupFile||this.path+'filter/default.js');f.scriptLoader.load(t,r,null,false,true);}return!s;}});})();(function(){var r={exec:function(u){var v=j.tryThese(function(){var w=window.clipboardData.getData('Text');if(!w)throw 0;return w;});if(!v){u.openDialog('pastetext');return false;}else u.fire('paste',{text:v});return true;}};function s(u,v){if(h){var w=u.selection;if(w.type=='Control')w.clear();w.createRange().pasteHTML(v);}else u.execCommand('inserthtml',false,v);};o.add('pastetext',{init:function(u){var v='pastetext',w=u.addCommand(v,r);u.ui.addButton('PasteText',{label:u.lang.pasteText.button,command:v});f.dialog.add(v,f.getUrl(this.path+'dialogs/pastetext.js'));if(u.config.forcePasteAsPlainText)u.on('beforeCommandExec',function(x){if(x.data.name=='paste'){u.execCommand('pastetext');x.cancel();}},null,null,0);},requires:['clipboard']});function t(u,v,w,x){while(w--)o.enterkey[v==2?'enterBr':'enterBlock'](u,v,null,x);};f.editor.prototype.insertText=function(u){this.focus();this.fire('saveSnapshot');var v=this.getSelection().getStartElement().hasAscendant('pre',true)?2:this.config.enterMode,w=v==2,x=this.document.$,y=this,z;u=j.htmlEncode(u.replace(/\r\n|\r/g,'\n'));var A=0;u.replace(/\n+/g,function(B,C){z=u.substring(A,C);A=C+B.length;z.length&&s(x,z);var D=B.length,E=w?0:Math.floor(D/2),F=w?D:D%2;t(y,v,E);t(y,2,F,w?false:true);});z=u.substring(A,u.length);z.length&&s(x,z);this.fire('saveSnapshot');};})();o.add('popup');j.extend(f.editor.prototype,{popup:function(r,s,t,u){s=s||'80%';t=t||'70%';if(typeof s=='string'&&s.length>1&&s.substr(s.length-1,1)=='%')s=parseInt(window.screen.width*parseInt(s,10)/100,10);if(typeof t=='string'&&t.length>1&&t.substr(t.length-1,1)=='%')t=parseInt(window.screen.height*parseInt(t,10)/100,10);if(s<640)s=640;if(t<420)t=420;var v=parseInt((window.screen.height-t)/2,10),w=parseInt((window.screen.width-s)/2,10);u=(u||'location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes,scrollbars=yes')+',width='+s+',height='+t+',top='+v+',left='+w;var x=window.open('',null,u,true);if(!x)return false;try{x.moveTo(w,v);x.resizeTo(s,t);x.focus();x.location.href=r;}catch(y){x=window.open(r,null,u,true);}return true;}});(function(){var r={modes:{wysiwyg:1,source:1},canUndo:false,exec:function(t){var u,v=t.config,w=v.baseHref?'<base href="'+v.baseHref+'"/>':'',x=g.isCustomDomain();if(v.fullPage)u=t.getData().replace(/<head>/,'$&'+w).replace(/[^>]*(?=<\/title>)/,t.lang.preview);
else{var y='<body ',z=t.document&&t.document.getBody();if(z){if(z.getAttribute('id'))y+='id="'+z.getAttribute('id')+'" ';if(z.getAttribute('class'))y+='class="'+z.getAttribute('class')+'" ';}y+='>';u=t.config.docType+'<html dir="'+t.config.contentsLangDirection+'">'+'<head>'+w+'<title>'+t.lang.preview+'</title>'+j.buildStyleHtml(t.config.contentsCss)+'</head>'+y+t.getData()+'</body></html>';}var A=640,B=420,C=80;try{var D=window.screen;A=Math.round(D.width*0.8);B=Math.round(D.height*0.7);C=Math.round(D.width*0.1);}catch(G){}var E='';if(x){window._cke_htmlToLoad=u;E='javascript:void( (function(){document.open();document.domain="'+document.domain+'";'+'document.write( window.opener._cke_htmlToLoad );'+'document.close();'+'window.opener._cke_htmlToLoad = null;'+'})() )';}var F=window.open(E,null,'toolbar=yes,location=no,status=yes,menubar=yes,scrollbars=yes,resizable=yes,width='+A+',height='+B+',left='+C);if(!x){F.document.open();F.document.write(u);F.document.close();}}},s='preview';o.add(s,{init:function(t){t.addCommand(s,r);t.ui.addButton('Preview',{label:t.lang.preview,command:s});}});})();o.add('print',{init:function(r){var s='print',t=r.addCommand(s,o.print);r.ui.addButton('Print',{label:r.lang.print,command:s});}});o.print={exec:function(r){if(g.opera)return;else if(g.gecko)r.window.$.print();else r.document.$.execCommand('Print');},canUndo:false,modes:{wysiwyg:!g.opera}};o.add('removeformat',{requires:['selection'],init:function(r){r.addCommand('removeFormat',o.removeformat.commands.removeformat);r.ui.addButton('RemoveFormat',{label:r.lang.removeFormat,command:'removeFormat'});r._.removeFormat={filters:[]};}});o.removeformat={commands:{removeformat:{exec:function(r){var s=r._.removeFormatRegex||(r._.removeFormatRegex=new RegExp('^(?:'+r.config.removeFormatTags.replace(/,/g,'|')+')$','i')),t=r._.removeAttributes||(r._.removeAttributes=r.config.removeFormatAttributes.split(',')),u=o.removeformat.filter,v=r.getSelection().getRanges(1),w=v.createIterator(),x;while(x=w.getNextRange()){if(x.collapsed)continue;x.enlarge(1);var y=x.createBookmark(),z=y.startNode,A=y.endNode,B=function(E){var F=new i.elementPath(E),G=F.elements;for(var H=1,I;I=G[H];H++){if(I.equals(F.block)||I.equals(F.blockLimit))break;if(s.test(I.getName())&&u(r,I))E.breakParent(I);}};B(z);B(A);var C=z.getNextSourceNode(true,1);while(C){if(C.equals(A))break;var D=C.getNextSourceNode(false,1);if(!(C.getName()=='img'&&C.getAttribute('_cke_realelement'))&&u(r,C))if(s.test(C.getName()))C.remove(1);
else{C.removeAttributes(t);r.fire('removeFormatCleanup',C);}C=D;}x.moveToBookmark(y);}r.getSelection().selectRanges(v);}}},filter:function(r,s){var t=r._.removeFormat.filters;for(var u=0;u<t.length;u++){if(t[u](s)===false)return false;}return true;}};f.editor.prototype.addRemoveFormatFilter=function(r){this._.removeFormat.filters.push(r);};n.removeFormatTags='b,big,code,del,dfn,em,font,i,ins,kbd,q,samp,small,span,strike,strong,sub,sup,tt,u,var';n.removeFormatAttributes='class,style,lang,width,height,align,hspace,valign';o.add('resize',{init:function(r){var s=r.config;!s.resize_dir&&(s.resize_dir='both');s.resize_maxWidth==undefined&&(s.resize_maxWidth=3000);s.resize_maxHeight==undefined&&(s.resize_maxHeight=3000);s.resize_minWidth==undefined&&(s.resize_minWidth=750);s.resize_minHeight==undefined&&(s.resize_minHeight=250);if(s.resize_enabled!==false){var t=null,u,v,w=(s.resize_dir=='both'||s.resize_dir=='horizontal')&&s.resize_minWidth!=s.resize_maxWidth,x=(s.resize_dir=='both'||s.resize_dir=='vertical')&&s.resize_minHeight!=s.resize_maxHeight;function y(B){var C=B.data.$.screenX-u.x,D=B.data.$.screenY-u.y,E=v.width,F=v.height,G=E+C*(r.lang.dir=='rtl'?-1:1),H=F+D;if(w)E=Math.max(s.resize_minWidth,Math.min(G,s.resize_maxWidth));if(x)F=Math.max(s.resize_minHeight,Math.min(H,s.resize_maxHeight));r.resize(E,F);};function z(B){f.document.removeListener('mousemove',y);f.document.removeListener('mouseup',z);if(r.document){r.document.removeListener('mousemove',y);r.document.removeListener('mouseup',z);}};var A=j.addFunction(function(B){if(!t)t=r.getResizable();v={width:t.$.offsetWidth||0,height:t.$.offsetHeight||0};u={x:B.screenX,y:B.screenY};s.resize_minWidth>v.width&&(s.resize_minWidth=v.width);s.resize_minHeight>v.height&&(s.resize_minHeight=v.height);f.document.on('mousemove',y);f.document.on('mouseup',z);if(r.document){r.document.on('mousemove',y);r.document.on('mouseup',z);}});r.on('destroy',function(){j.removeFunction(A);});r.on('themeSpace',function(B){if(B.data.space=='bottom'){var C='';if(w&&!x)C=' cke_resizer_horizontal';if(!w&&x)C=' cke_resizer_vertical';B.data.html+='<div class="cke_resizer'+C+'"'+' title="'+j.htmlEncode(r.lang.resize)+'"'+' onmousedown="CKEDITOR.tools.callFunction('+A+', event)"'+'></div>';}},r,null,100);}}});(function(){var r={modes:{wysiwyg:1,source:1},exec:function(t){var u=t.element.$.form;if(u)try{u.submit();}catch(v){if(u.submit.click)u.submit.click();}}},s='save';o.add(s,{init:function(t){var u=t.addCommand(s,r);u.modes={wysiwyg:!!t.element.$.form};
t.ui.addButton('Save',{label:t.lang.save,command:s});}});})();(function(){var r='scaytcheck',s='';function t(y,z){var A=0,B;for(B in z){if(z[B]==y){A=1;break;}}return A;};var u=function(){var y=this,z=function(){var D=y.config,E={};E.srcNodeRef=y.document.getWindow().$.frameElement;E.assocApp='CKEDITOR.'+f.version+'@'+f.revision;E.customerid=D.scayt_customerid||'1:WvF0D4-UtPqN1-43nkD4-NKvUm2-daQqk3-LmNiI-z7Ysb4-mwry24-T8YrS3-Q2tpq2';E.customDictionaryIds=D.scayt_customDictionaryIds||'';E.userDictionaryName=D.scayt_userDictionaryName||'';E.sLang=D.scayt_sLang||'en_US';E.onLoad=function(){if(!(h&&g.version<8))this.addStyle(this.selectorCss(),'padding-bottom: 2px !important;');if(y.focusManager.hasFocus&&!v.isControlRestored(y))this.focus();};E.onBeforeChange=function(){if(v.getScayt(y)&&!y.checkDirty())setTimeout(function(){y.resetDirty();},0);};var F=window.scayt_custom_params;if(typeof F=='object')for(var G in F)E[G]=F[G];if(v.getControlId(y))E.id=v.getControlId(y);var H=new window.scayt(E);H.afterMarkupRemove.push(function(O){new m(O,H.document).mergeSiblings();});var I=v.instances[y.name];if(I){H.sLang=I.sLang;H.option(I.option());H.paused=I.paused;}v.instances[y.name]=H;var J='scaytButton',K=window.scayt.uiTags,L=[];for(var M=0,N=4;M<N;M++)L.push(K[M]&&v.uiTabs[M]);v.uiTabs=L;try{H.setDisabled(v.isPaused(y)===false);}catch(O){}y.fire('showScaytState');};y.on('contentDom',z);y.on('contentDomUnload',function(){var D=f.document.getElementsByTag('script'),E=/^dojoIoScript(\d+)$/i,F=/^https?:\/\/svc\.spellchecker\.net\/spellcheck\/script\/ssrv\.cgi/i;for(var G=0;G<D.count();G++){var H=D.getItem(G),I=H.getId(),J=H.getAttribute('src');if(I&&J&&I.match(E)&&J.match(F))H.remove();}});y.on('beforeCommandExec',function(D){if((D.data.name=='source'||D.data.name=='newpage')&&y.mode=='wysiwyg'){var E=v.getScayt(y);if(E){v.setPaused(y,!E.disabled);v.setControlId(y,E.id);E.destroy(true);delete v.instances[y.name];}}else if(D.data.name=='source'&&y.mode=='source')v.markControlRestore(y);});y.on('afterCommandExec',function(D){if(!v.isScaytEnabled(y))return;if(y.mode=='wysiwyg'&&(D.data.name=='undo'||D.data.name=='redo'))window.setTimeout(function(){v.getScayt(y).refresh();},10);});y.on('destroy',function(D){var E=D.editor,F=v.getScayt(E);if(!F)return;delete v.instances[E.name];v.setControlId(E,F.id);F.destroy(true);});y.on('afterSetData',function(){if(v.isScaytEnabled(y))window.setTimeout(function(){var D=v.getScayt(y);D&&D.refresh();},10);});y.on('insertElement',function(){var D=v.getScayt(y);
if(v.isScaytEnabled(y)){if(h)y.getSelection().unlock(true);window.setTimeout(function(){D.focus();D.refresh();},10);}},this,null,50);y.on('insertHtml',function(){var D=v.getScayt(y);if(v.isScaytEnabled(y)){if(h)y.getSelection().unlock(true);window.setTimeout(function(){D.focus();D.refresh();},10);}},this,null,50);y.on('scaytDialog',function(D){D.data.djConfig=window.djConfig;D.data.scayt_control=v.getScayt(y);D.data.tab=s;D.data.scayt=window.scayt;});var A=y.dataProcessor,B=A&&A.htmlFilter;if(B)B.addRules({elements:{span:function(D){if(D.attributes.scayt_word&&D.attributes.scaytid){delete D.name;return D;}}}});var C=o.undo.Image.prototype;C.equals=j.override(C.equals,function(D){return function(E){var J=this;var F=J.contents,G=E.contents,H=v.getScayt(J.editor);if(H&&v.isScaytReady(J.editor)){J.contents=H.reset(F)||'';E.contents=H.reset(G)||'';}var I=D.apply(J,arguments);J.contents=F;E.contents=G;return I;};});if(y.document)z();};o.scayt={engineLoaded:false,instances:{},controlInfo:{},setControlInfo:function(y,z){if(y&&y.name&&typeof this.controlInfo[y.name]!='object')this.controlInfo[y.name]={};for(var A in z)this.controlInfo[y.name][A]=z[A];},isControlRestored:function(y){if(y&&y.name&&this.controlInfo[y.name])return this.controlInfo[y.name].restored;return false;},markControlRestore:function(y){this.setControlInfo(y,{restored:true});},setControlId:function(y,z){this.setControlInfo(y,{id:z});},getControlId:function(y){if(y&&y.name&&this.controlInfo[y.name]&&this.controlInfo[y.name].id)return this.controlInfo[y.name].id;return null;},setPaused:function(y,z){this.setControlInfo(y,{paused:z});},isPaused:function(y){if(y&&y.name&&this.controlInfo[y.name])return this.controlInfo[y.name].paused;return undefined;},getScayt:function(y){return this.instances[y.name];},isScaytReady:function(y){return this.engineLoaded===true&&'undefined'!==typeof window.scayt&&this.getScayt(y);},isScaytEnabled:function(y){var z=this.getScayt(y);return z?z.disabled===false:false;},loadEngine:function(y){if(g.gecko&&g.version<10900||g.opera)return y.fire('showScaytState');if(this.engineLoaded===true)return u.apply(y);else if(this.engineLoaded==-1)return f.on('scaytReady',function(){u.apply(y);});f.on('scaytReady',u,y);f.on('scaytReady',function(){this.engineLoaded=true;},this,null,0);this.engineLoaded=-1;var z=document.location.protocol;z=z.search(/https?:/)!=-1?z:'http:';var A='svc.spellchecker.net/scayt25/loader__base.js',B=y.config.scayt_srcUrl||z+'//'+A,C=v.parseUrl(B).path+'/';if(window.scayt==undefined){f._djScaytConfig={baseUrl:C,addOnLoad:[function(){f.fireOnce('scaytReady');
}],isDebug:false};f.document.getHead().append(f.document.createElement('script',{attributes:{type:'text/javascript',async:'true',src:B}}));}else f.fireOnce('scaytReady');return null;},parseUrl:function(y){var z;if(y.match&&(z=y.match(/(.*)[\/\\](.*?\.\w+)$/)))return{path:z[1],file:z[2]};else return y;}};var v=o.scayt,w=function(y,z,A,B,C,D,E){y.addCommand(B,C);y.addMenuItem(B,{label:A,command:B,group:D,order:E});},x={preserveState:true,editorFocus:false,canUndo:false,exec:function(y){if(v.isScaytReady(y)){var z=v.isScaytEnabled(y);this.setState(z?2:1);var A=v.getScayt(y);A.focus();A.setDisabled(z);}else if(!y.config.scayt_autoStartup&&v.engineLoaded>=0){this.setState(0);v.loadEngine(y);}}};o.add('scayt',{requires:['menubutton'],beforeInit:function(y){var z=y.config.scayt_contextMenuItemsOrder||'suggest|moresuggest|control',A='';z=z.split('|');if(z&&z.length)for(var B=0;B<z.length;B++)A+='scayt_'+z[B]+(z.length!=parseInt(B,10)+1?',':'');y.config.menu_groups=A+','+y.config.menu_groups;},init:function(y){var z={},A={},B=y.addCommand(r,x);f.dialog.add(r,f.getUrl(this.path+'dialogs/options.js'));var C=y.config.scayt_uiTabs||'1,1,1',D=[];C=C.split(',');for(var E=0,F=3;E<F;E++){var G=parseInt(C[E]||'1',10);D.push(G);}var H='scaytButton';y.addMenuGroup(H);var I={},J=y.lang.scayt;I.scaytToggle={label:J.enable,command:r,group:H};if(D[0]==1)I.scaytOptions={label:J.options,group:H,onClick:function(){s='options';y.openDialog(r);}};if(D[1]==1)I.scaytLangs={label:J.langs,group:H,onClick:function(){s='langs';y.openDialog(r);}};if(D[2]==1)I.scaytDict={label:J.dictionariesTab,group:H,onClick:function(){s='dictionaries';y.openDialog(r);}};I.scaytAbout={label:y.lang.scayt.about,group:H,onClick:function(){s='about';y.openDialog(r);}};D[3]=1;v.uiTabs=D;y.addMenuItems(I);y.ui.add('Scayt',5,{label:J.title,title:g.opera?J.opera_title:J.title,className:'cke_button_scayt',onRender:function(){B.on('state',function(){this.setState(B.state);},this);},onMenu:function(){var L=v.isScaytEnabled(y);y.getMenuItem('scaytToggle').label=J[L?'disable':'enable'];return{scaytToggle:2,scaytOptions:L&&v.uiTabs[0]?2:0,scaytLangs:L&&v.uiTabs[1]?2:0,scaytDict:L&&v.uiTabs[2]?2:0,scaytAbout:L&&v.uiTabs[3]?2:0};}});if(y.contextMenu&&y.addMenuItems)y.contextMenu.addListener(function(L,M){if(!v.isScaytEnabled(y)||M.getCommonAncestor().isReadOnly())return null;var N=v.getScayt(y),O=N.getScaytNode();if(!O)return null;var P=N.getWord(O);if(!P)return null;var Q=N.getLang(),R={},S=window.scayt.getSuggestion(P,Q);
if(!S||!S.length)return null;for(E in z){delete y._.menuItems[E];delete y._.commands[E];}for(E in A){delete y._.menuItems[E];delete y._.commands[E];}z={};A={};var T=y.config.scayt_moreSuggestions||'on',U=false,V=y.config.scayt_maxSuggestions;typeof V!='number'&&(V=5);!V&&(V=S.length);var W=y.config.scayt_contextCommands||'all';W=W.split('|');for(var X=0,Y=S.length;X<Y;X+=1){var Z='scayt_suggestion_'+S[X].replace(' ','_'),aa=(function(ae,af){return{exec:function(){N.replace(ae,af);}};})(O,S[X]);if(X<V){w(y,'button_'+Z,S[X],Z,aa,'scayt_suggest',X+1);R[Z]=2;A[Z]=2;}else if(T=='on'){w(y,'button_'+Z,S[X],Z,aa,'scayt_moresuggest',X+1);z[Z]=2;U=true;}}if(U){y.addMenuItem('scayt_moresuggest',{label:J.moreSuggestions,group:'scayt_moresuggest',order:10,getItems:function(){return z;}});A.scayt_moresuggest=2;}if(t('all',W)||t('ignore',W)){var ab={exec:function(){N.ignore(O);}};w(y,'ignore',J.ignore,'scayt_ignore',ab,'scayt_control',1);A.scayt_ignore=2;}if(t('all',W)||t('ignoreall',W)){var ac={exec:function(){N.ignoreAll(O);}};w(y,'ignore_all',J.ignoreAll,'scayt_ignore_all',ac,'scayt_control',2);A.scayt_ignore_all=2;}if(t('all',W)||t('add',W)){var ad={exec:function(){window.scayt.addWordToUserDictionary(O);}};w(y,'add_word',J.addWord,'scayt_add_word',ad,'scayt_control',3);A.scayt_add_word=2;}if(N.fireOnContextMenu)N.fireOnContextMenu(y);return A;});var K=function(){y.removeListener('showScaytState',K);if(!g.opera)B.setState(v.isScaytEnabled(y)?1:2);else B.setState(0);};y.on('showScaytState',K);if(g.opera)y.on('instanceReady',function(){K();});if(y.config.scayt_autoStartup)y.on('instanceReady',function(){v.loadEngine(y);});},afterInit:function(y){var z,A=function(B){if(B.hasAttribute('scaytid'))return false;};if(y._.elementsPath&&(z=y._.elementsPath.filters))z.push(A);y.addRemoveFormatFilter&&y.addRemoveFormatFilter(A);}});})();o.add('smiley',{requires:['dialog'],init:function(r){r.config.smiley_path=r.config.smiley_path||this.path+'images/';r.addCommand('smiley',new f.dialogCommand('smiley'));r.ui.addButton('Smiley',{label:r.lang.smiley.toolbar,command:'smiley'});f.dialog.add('smiley',this.path+'dialogs/smiley.js');}});n.smiley_images=['regular_smile.gif','sad_smile.gif','wink_smile.gif','teeth_smile.gif','confused_smile.gif','tounge_smile.gif','embaressed_smile.gif','omg_smile.gif','whatchutalkingabout_smile.gif','angry_smile.gif','angel_smile.gif','shades_smile.gif','devil_smile.gif','cry_smile.gif','lightbulb.gif','thumbs_down.gif','thumbs_up.gif','heart.gif','broken_heart.gif','kiss.gif','envelope.gif'];
n.smiley_descriptions=['smiley','sad','wink','laugh','frown','cheeky','blush','surprise','indecision','angry','angel','cool','devil','crying','enlightened','no','yes','heart','broken heart','kiss','mail'];(function(){var r='.%2 p,.%2 div,.%2 pre,.%2 address,.%2 blockquote,.%2 h1,.%2 h2,.%2 h3,.%2 h4,.%2 h5,.%2 h6{background-repeat: no-repeat;background-position: top %3;border: 1px dotted gray;padding-top: 8px;padding-%3: 8px;}.%2 p{%1p.png);}.%2 div{%1div.png);}.%2 pre{%1pre.png);}.%2 address{%1address.png);}.%2 blockquote{%1blockquote.png);}.%2 h1{%1h1.png);}.%2 h2{%1h2.png);}.%2 h3{%1h3.png);}.%2 h4{%1h4.png);}.%2 h5{%1h5.png);}.%2 h6{%1h6.png);}',s=/%1/g,t=/%2/g,u=/%3/g,v={preserveState:true,editorFocus:false,exec:function(w){this.toggleState();this.refresh(w);},refresh:function(w){var x=this.state==1?'addClass':'removeClass';w.document.getBody()[x]('cke_show_blocks');}};o.add('showblocks',{requires:['wysiwygarea'],init:function(w){var x=w.addCommand('showblocks',v);x.canUndo=false;if(w.config.startupOutlineBlocks)x.setState(1);w.addCss(r.replace(s,'background-image: url('+f.getUrl(this.path)+'images/block_').replace(t,'cke_show_blocks ').replace(u,w.lang.dir=='rtl'?'right':'left'));w.ui.addButton('ShowBlocks',{label:w.lang.showBlocks,command:'showblocks'});w.on('mode',function(){if(x.state!=0)x.refresh(w);});w.on('contentDom',function(){if(x.state!=0)x.refresh(w);});}});})();(function(){var r='cke_show_border',s,t=(g.ie6Compat?['.%1 table.%2,','.%1 table.%2 td, .%1 table.%2 th,','{','border : #d3d3d3 1px dotted','}']:['.%1 table.%2,','.%1 table.%2 > tr > td, .%1 table.%2 > tr > th,','.%1 table.%2 > tbody > tr > td, .%1 table.%2 > tbody > tr > th,','.%1 table.%2 > thead > tr > td, .%1 table.%2 > thead > tr > th,','.%1 table.%2 > tfoot > tr > td, .%1 table.%2 > tfoot > tr > th','{','border : #d3d3d3 1px dotted','}']).join('');s=t.replace(/%2/g,r).replace(/%1/g,'cke_show_borders ');var u={preserveState:true,editorFocus:false,exec:function(v){this.toggleState();this.refresh(v);},refresh:function(v){var w=this.state==1?'addClass':'removeClass';v.document.getBody()[w]('cke_show_borders');}};o.add('showborders',{requires:['wysiwygarea'],modes:{wysiwyg:1},init:function(v){var w=v.addCommand('showborders',u);w.canUndo=false;if(v.config.startupShowBorders!==false)w.setState(1);v.addCss(s);v.on('mode',function(){if(w.state!=0)w.refresh(v);},null,null,100);v.on('contentDom',function(){if(w.state!=0)w.refresh(v);});v.on('removeFormatCleanup',function(x){var y=x.data;
if(v.getCommand('showborders').state==1&&y.is('table')&&(!y.hasAttribute('border')||parseInt(y.getAttribute('border'),10)<=0))y.addClass(r);});},afterInit:function(v){var w=v.dataProcessor,x=w&&w.dataFilter,y=w&&w.htmlFilter;if(x)x.addRules({elements:{table:function(z){var A=z.attributes,B=A['class'],C=parseInt(A.border,10);if(!C||C<=0)A['class']=(B||'')+' '+r;}}});if(y)y.addRules({elements:{table:function(z){var A=z.attributes,B=A['class'];B&&(A['class']=B.replace(r,'').replace(/\s{2}/,' ').replace(/^\s+|\s+$/,''));}}});}});f.on('dialogDefinition',function(v){var w=v.data.name;if(w=='table'||w=='tableProperties'){var x=v.data.definition,y=x.getContents('info'),z=y.get('txtBorder'),A=z.commit;z.commit=j.override(A,function(D){return function(E,F){D.apply(this,arguments);var G=parseInt(this.getValue(),10);F[!G||G<=0?'addClass':'removeClass'](r);};});var B=x.getContents('advanced'),C=B&&B.get('advCSSClasses');if(C){C.setup=j.override(C.setup,function(D){return function(){D.apply(this,arguments);this.setValue(this.getValue().replace(/cke_show_border/,''));};});C.commit=j.override(C.commit,function(D){return function(E,F){D.apply(this,arguments);if(!parseInt(F.getAttribute('border'),10))F.addClass('cke_show_border');};});}}});})();o.add('sourcearea',{requires:['editingblock'],init:function(r){var s=o.sourcearea,t=f.document.getWindow();r.on('editingBlockReady',function(){var u,v;r.addMode('source',{load:function(w,x){if(h&&g.version<8)w.setStyle('position','relative');r.textarea=u=new m('textarea');u.setAttributes({dir:'ltr',tabIndex:g.webkit?-1:r.tabIndex,role:'textbox','aria-label':r.lang.editorTitle.replace('%1',r.name)});u.addClass('cke_source');u.addClass('cke_enable_context_menu');var y={width:g.ie7Compat?'99%':'100%',height:'100%',resize:'none',outline:'none','text-align':'left'};if(h){v=function(){u.hide();u.setStyle('height',w.$.clientHeight+'px');u.setStyle('width',w.$.clientWidth+'px');u.show();};r.on('resize',v);t.on('resize',v);setTimeout(v,0);}if(document.addEventListener)u.on('mousedown',function(A){A.data.stopPropagation();});w.setHtml('');w.append(u);u.setStyles(y);r.fire('ariaWidget',u);u.on('blur',function(){r.focusManager.blur();});u.on('focus',function(){r.focusManager.focus();});r.mayBeDirty=true;this.loadData(x);var z=r.keystrokeHandler;if(z)z.attach(u);setTimeout(function(){r.mode='source';r.fire('mode');},g.gecko||g.webkit?100:0);},loadData:function(w){u.setValue(w);r.fire('dataReady');},getData:function(){return u.getValue();},getSnapshotData:function(){return u.getValue();
},unload:function(w){u.clearCustomData();r.textarea=u=null;if(v){r.removeListener('resize',v);t.removeListener('resize',v);}if(h&&g.version<8)w.removeStyle('position');},focus:function(){u.focus();}});});r.addCommand('source',s.commands.source);if(r.ui.addButton)r.ui.addButton('Source',{label:r.lang.source,command:'source'});r.on('mode',function(){r.getCommand('source').setState(r.mode=='source'?1:2);});}});o.sourcearea={commands:{source:{modes:{wysiwyg:1,source:1},editorFocus:false,exec:function(r){if(r.mode=='wysiwyg')r.fire('saveSnapshot');r.getCommand('source').setState(0);r.setMode(r.mode=='source'?'wysiwyg':'source');},canUndo:false}}};(function(){o.add('stylescombo',{requires:['richcombo','styles'],init:function(s){var t=s.config,u=s.lang.stylesCombo,v={},w=[];function x(y){s.getStylesSet(function(z){if(!w.length){var A,B;for(var C=0,D=z.length;C<D;C++){var E=z[C];B=E.name;A=v[B]=new f.style(E);A._name=B;A._.enterMode=t.enterMode;w.push(A);}w.sort(r);}y&&y();});};s.ui.addRichCombo('Styles',{label:u.label,title:u.panelTitle,className:'cke_styles',panel:{css:s.skin.editor.css.concat(t.contentsCss),multiSelect:true,attributes:{'aria-label':u.panelTitle}},init:function(){var y=this;x(function(){var z,A,B;for(var C=0,D=w.length;C<D;C++){z=w[C];A=z._name;var E=z.type;if(E!=B){y.startGroup(u['panelTitle'+String(E)]);B=E;}y.add(A,z.type==3?A:z.buildPreview(),A);}y.commit();y.onOpen();});},onClick:function(y){s.focus();s.fire('saveSnapshot');var z=v[y],A=s.getSelection(),B=new i.elementPath(A.getStartElement());if(z.type==2&&z.checkActive(B))z.remove(s.document);else if(z.type==3&&z.checkActive(B))z.remove(s.document);else z.apply(s.document);s.fire('saveSnapshot');},onRender:function(){s.on('selectionChange',function(y){var z=this.getValue(),A=y.data.path,B=A.elements;for(var C=0,D=B.length,E;C<D;C++){E=B[C];for(var F in v){if(v[F].checkElementRemovable(E,true)){if(F!=z)this.setValue(F);return;}}}this.setValue('');},this);},onOpen:function(){var F=this;if(h||g.webkit)s.focus();var y=s.getSelection(),z=y.getSelectedElement(),A=new i.elementPath(z||y.getStartElement()),B=[0,0,0,0];F.showAll();F.unmarkAll();for(var C in v){var D=v[C],E=D.type;if(D.checkActive(A))F.mark(C);else if(E==3&&!D.checkApplicable(A)){F.hideItem(C);B[E]--;}B[E]++;}if(!B[1])F.hideGroup(u['panelTitle'+String(1)]);if(!B[2])F.hideGroup(u['panelTitle'+String(2)]);if(!B[3])F.hideGroup(u['panelTitle'+String(3)]);}});s.on('instanceReady',function(){x();});}});function r(s,t){var u=s.type,v=t.type;
return u==v?0:u==3?-1:v==3?1:v==1?1:-1;};})();o.add('table',{init:function(r){var s=o.table,t=r.lang.table;r.addCommand('table',new f.dialogCommand('table'));r.addCommand('tableProperties',new f.dialogCommand('tableProperties'));r.ui.addButton('Table',{label:t.toolbar,command:'table'});f.dialog.add('table',this.path+'dialogs/table.js');f.dialog.add('tableProperties',this.path+'dialogs/table.js');if(r.addMenuItems)r.addMenuItems({table:{label:t.menu,command:'tableProperties',group:'table',order:5},tabledelete:{label:t.deleteTable,command:'tableDelete',group:'table',order:1}});r.on('doubleclick',function(u){var v=u.data.element;if(v.is('table'))u.data.dialog='tableProperties';});if(r.contextMenu)r.contextMenu.addListener(function(u,v){if(!u||u.isReadOnly())return null;var w=u.hasAscendant('table',1);if(w)return{tabledelete:2,table:2};return null;});}});(function(){function r(L,M){if(h)L.removeAttribute(M);else delete L[M];};var s=/^(?:td|th)$/;function t(L){var M=L.createBookmarks(),N=L.getRanges(),O=[],P={};function Q(Y){if(O.length>0)return;if(Y.type==1&&s.test(Y.getName())&&!Y.getCustomData('selected_cell')){m.setMarker(P,Y,'selected_cell',true);O.push(Y);}};for(var R=0;R<N.length;R++){var S=N[R];if(S.collapsed){var T=S.getCommonAncestor(),U=T.getAscendant('td',true)||T.getAscendant('th',true);if(U)O.push(U);}else{var V=new i.walker(S),W;V.guard=Q;while(W=V.next()){var X=W.getParent();if(X&&s.test(X.getName())&&!X.getCustomData('selected_cell')){m.setMarker(P,X,'selected_cell',true);O.push(X);}}}}m.clearAllMarkers(P);L.selectBookmarks(M);return O;};function u(L){var M=0,N=L.length-1,O={},P,Q,R;while(P=L[M++])m.setMarker(O,P,'delete_cell',true);M=0;while(P=L[M++]){if((Q=P.getPrevious())&&!Q.getCustomData('delete_cell')||(Q=P.getNext())&&!Q.getCustomData('delete_cell')){m.clearAllMarkers(O);return Q;}}m.clearAllMarkers(O);R=L[0].getParent();if(R=R.getPrevious())return R.getLast();R=L[N].getParent();if(R=R.getNext())return R.getChild(0);return null;};function v(L){var M=L.cells;for(var N=0;N<M.length;N++){M[N].innerHTML='';if(!h)new m(M[N]).appendBogus();}};function w(L,M){var N=L.getStartElement().getAscendant('tr');if(!N)return;var O=N.clone(1);M?O.insertBefore(N):O.insertAfter(N);v(O.$);};function x(L){if(L instanceof i.selection){var M=t(L),N=M.length,O=[],P,Q,R;for(var S=0;S<N;S++){var T=M[S].getParent(),U=T.$.rowIndex;!S&&(Q=U-1);O[U]=T;S==N-1&&(R=U+1);}var V=T.getAscendant('table'),W=V.$.rows,X=W.length;P=new m(R<X&&V.$.rows[R]||Q>0&&V.$.rows[Q]||V.$.parentNode);
for(S=O.length;S>=0;S--){if(O[S])x(O[S]);}return P;}else if(L instanceof m){V=L.getAscendant('table');if(V.$.rows.length==1)V.remove();else L.remove();}return 0;};function y(L,M){var N=L.getStartElement(),O=N.getAscendant('td',1)||N.getAscendant('th',1);if(!O)return;var P=O.getAscendant('table'),Q=O.$.cellIndex;for(var R=0;R<P.$.rows.length;R++){var S=P.$.rows[R];if(S.cells.length<Q+1)continue;O=new m(S.cells[Q]).clone(0);if(!h)O.appendBogus();var T=new m(S.cells[Q]);if(M)O.insertBefore(T);else O.insertAfter(T);}};function z(L){var M=[],N=L[0]&&L[0].getAscendant('table'),O,P,Q,R;for(O=0,P=L.length;O<P;O++)M.push(L[O].$.cellIndex);M.sort();for(O=1,P=M.length;O<P;O++){if(M[O]-M[O-1]>1){Q=M[O-1]+1;break;}}if(!Q)Q=M[0]>0?M[0]-1:M[M.length-1]+1;var S=N.$.rows;for(O=0,P=S.length;O<P;O++){R=S[O].cells[Q];if(R)break;}return R?new m(R):N.getPrevious();};function A(L){if(L instanceof i.selection){var M=t(L),N=z(M);for(var O=M.length-1;O>=0;O--){if(M[O])A(M[O]);}return N;}else if(L instanceof m){var P=L.getAscendant('table');if(!P)return null;var Q=L.$.cellIndex;for(O=P.$.rows.length-1;O>=0;O--){var R=new m(P.$.rows[O]);if(!Q&&R.$.cells.length==1){x(R);continue;}if(R.$.cells[Q])R.$.removeChild(R.$.cells[Q]);}}return null;};function B(L,M){var N=L.getStartElement(),O=N.getAscendant('td',1)||N.getAscendant('th',1);if(!O)return;var P=O.clone();if(!h)P.appendBogus();if(M)P.insertBefore(O);else P.insertAfter(O);};function C(L){if(L instanceof i.selection){var M=t(L),N=M[0]&&M[0].getAscendant('table'),O=u(M);for(var P=M.length-1;P>=0;P--)C(M[P]);if(O)E(O,true);else if(N)N.remove();}else if(L instanceof m){var Q=L.getParent();if(Q.getChildCount()==1)Q.remove();else L.remove();}};function D(L){var M=L.getBogus();M&&M.remove();L.trim();};function E(L,M){var N=new i.range(L.getDocument());if(!N['moveToElementEdit'+(M?'End':'Start')](L)){N.selectNodeContents(L);N.collapse(M?false:true);}N.select(true);};function F(L,M,N){var O=L[M];if(typeof N=='undefined')return O;for(var P=0;O&&P<O.length;P++){if(N.is&&O[P]==N.$)return P;else if(P==N)return new m(O[P]);}return N.is?-1:null;};function G(L,M,N){var O=[];for(var P=0;P<L.length;P++){var Q=L[P];if(typeof N=='undefined')O.push(Q[M]);else if(N.is&&Q[M]==N.$)return P;else if(P==N)return new m(Q[M]);}return typeof N=='undefined'?O:N.is?-1:null;};function H(L,M,N){var O=t(L),P;if((M?O.length!=1:O.length<2)||(P=L.getCommonAncestor())&&P.type==1&&P.is('table'))return false;var Q,R=O[0],S=R.getAscendant('table'),T=j.buildTableMap(S),U=T.length,V=T[0].length,W=R.getParent().$.rowIndex,X=F(T,W,R);
if(M){var Y;try{Y=T[M=='up'?W-1:M=='down'?W+1:W][M=='left'?X-1:M=='right'?X+1:X];}catch(aq){return false;}if(!Y||R.$==Y)return false;O[M=='up'||M=='left'?'unshift':'push'](new m(Y));}var Z=R.getDocument(),aa=W,ab=0,ac=0,ad=!N&&new i.documentFragment(Z),ae=0;for(var af=0;af<O.length;af++){Q=O[af];var ag=Q.getParent(),ah=Q.getFirst(),ai=Q.$.colSpan,aj=Q.$.rowSpan,ak=ag.$.rowIndex,al=F(T,ak,Q);ae+=ai*aj;ac=Math.max(ac,al-X+ai);ab=Math.max(ab,ak-W+aj);if(!N){if(D(Q),Q.getChildren().count()){if(ak!=aa&&ah&&!(ah.isBlockBoundary&&ah.isBlockBoundary({br:1}))){var am=ad.getLast(i.walker.whitespaces(true));if(am&&!(am.is&&am.is('br')))ad.append(new m('br'));}Q.moveChildren(ad);}af?Q.remove():Q.setHtml('');}aa=ak;}if(!N){ad.moveChildren(R);if(!h)R.appendBogus();if(ac>=V)R.removeAttribute('rowSpan');else R.$.rowSpan=ab;if(ab>=U)R.removeAttribute('colSpan');else R.$.colSpan=ac;var an=new i.nodeList(S.$.rows),ao=an.count();for(af=ao-1;af>=0;af--){var ap=an.getItem(af);if(!ap.$.cells.length){ap.remove();ao++;continue;}}return R;}else return ab*ac==ae;};function I(L,M){var N=t(L);if(N.length>1)return false;else if(M)return true;var O=N[0],P=O.getParent(),Q=P.getAscendant('table'),R=j.buildTableMap(Q),S=P.$.rowIndex,T=F(R,S,O),U=O.$.rowSpan,V,W,X,Y;if(U>1){W=Math.ceil(U/2);X=Math.floor(U/2);Y=S+W;var Z=new m(Q.$.rows[Y]),aa=F(R,Y),ab;V=O.clone();for(var ac=0;ac<aa.length;ac++){ab=aa[ac];if(ab.parentNode==Z.$&&ac>T){V.insertBefore(new m(ab));break;}else ab=null;}if(!ab)Z.append(V,true);}else{X=W=1;Z=P.clone();Z.insertAfter(P);Z.append(V=O.clone());var ad=F(R,S);for(var ae=0;ae<ad.length;ae++)ad[ae].rowSpan++;}if(!h)V.appendBogus();O.$.rowSpan=W;V.$.rowSpan=X;if(W==1)O.removeAttribute('rowSpan');if(X==1)V.removeAttribute('rowSpan');return V;};function J(L,M){var N=t(L);if(N.length>1)return false;else if(M)return true;var O=N[0],P=O.getParent(),Q=P.getAscendant('table'),R=j.buildTableMap(Q),S=P.$.rowIndex,T=F(R,S,O),U=O.$.colSpan,V,W,X;if(U>1){W=Math.ceil(U/2);X=Math.floor(U/2);}else{X=W=1;var Y=G(R,T);for(var Z=0;Z<Y.length;Z++)Y[Z].colSpan++;}V=O.clone();V.insertAfter(O);if(!h)V.appendBogus();O.$.colSpan=W;V.$.colSpan=X;if(W==1)O.removeAttribute('colSpan');if(X==1)V.removeAttribute('colSpan');return V;};var K={thead:1,tbody:1,tfoot:1,td:1,tr:1,th:1};o.tabletools={init:function(L){var M=L.lang.table;L.addCommand('cellProperties',new f.dialogCommand('cellProperties'));f.dialog.add('cellProperties',this.path+'dialogs/tableCell.js');L.addCommand('tableDelete',{exec:function(N){var O=N.getSelection(),P=O&&O.getStartElement(),Q=P&&P.getAscendant('table',1);
if(!Q)return;O.selectElement(Q);var R=O.getRanges()[0];R.collapse();O.selectRanges([R]);var S=Q.getParent();if(S.getChildCount()==1&&!S.is('body','td','th'))S.remove();else Q.remove();}});L.addCommand('rowDelete',{exec:function(N){var O=N.getSelection();E(x(O));}});L.addCommand('rowInsertBefore',{exec:function(N){var O=N.getSelection();w(O,true);}});L.addCommand('rowInsertAfter',{exec:function(N){var O=N.getSelection();w(O);}});L.addCommand('columnDelete',{exec:function(N){var O=N.getSelection(),P=A(O);P&&E(P,true);}});L.addCommand('columnInsertBefore',{exec:function(N){var O=N.getSelection();y(O,true);}});L.addCommand('columnInsertAfter',{exec:function(N){var O=N.getSelection();y(O);}});L.addCommand('cellDelete',{exec:function(N){var O=N.getSelection();C(O);}});L.addCommand('cellMerge',{exec:function(N){E(H(N.getSelection()),true);}});L.addCommand('cellMergeRight',{exec:function(N){E(H(N.getSelection(),'right'),true);}});L.addCommand('cellMergeDown',{exec:function(N){E(H(N.getSelection(),'down'),true);}});L.addCommand('cellVerticalSplit',{exec:function(N){E(I(N.getSelection()));}});L.addCommand('cellHorizontalSplit',{exec:function(N){E(J(N.getSelection()));}});L.addCommand('cellInsertBefore',{exec:function(N){var O=N.getSelection();B(O,true);}});L.addCommand('cellInsertAfter',{exec:function(N){var O=N.getSelection();B(O);}});if(L.addMenuItems)L.addMenuItems({tablecell:{label:M.cell.menu,group:'tablecell',order:1,getItems:function(){var N=L.getSelection(),O=t(N);return{tablecell_insertBefore:2,tablecell_insertAfter:2,tablecell_delete:2,tablecell_merge:H(N,null,true)?2:0,tablecell_merge_right:H(N,'right',true)?2:0,tablecell_merge_down:H(N,'down',true)?2:0,tablecell_split_vertical:I(N,true)?2:0,tablecell_split_horizontal:J(N,true)?2:0,tablecell_properties:O.length>0?2:0};}},tablecell_insertBefore:{label:M.cell.insertBefore,group:'tablecell',command:'cellInsertBefore',order:5},tablecell_insertAfter:{label:M.cell.insertAfter,group:'tablecell',command:'cellInsertAfter',order:10},tablecell_delete:{label:M.cell.deleteCell,group:'tablecell',command:'cellDelete',order:15},tablecell_merge:{label:M.cell.merge,group:'tablecell',command:'cellMerge',order:16},tablecell_merge_right:{label:M.cell.mergeRight,group:'tablecell',command:'cellMergeRight',order:17},tablecell_merge_down:{label:M.cell.mergeDown,group:'tablecell',command:'cellMergeDown',order:18},tablecell_split_horizontal:{label:M.cell.splitHorizontal,group:'tablecell',command:'cellHorizontalSplit',order:19},tablecell_split_vertical:{label:M.cell.splitVertical,group:'tablecell',command:'cellVerticalSplit',order:20},tablecell_properties:{label:M.cell.title,group:'tablecellproperties',command:'cellProperties',order:21},tablerow:{label:M.row.menu,group:'tablerow',order:1,getItems:function(){return{tablerow_insertBefore:2,tablerow_insertAfter:2,tablerow_delete:2};
}},tablerow_insertBefore:{label:M.row.insertBefore,group:'tablerow',command:'rowInsertBefore',order:5},tablerow_insertAfter:{label:M.row.insertAfter,group:'tablerow',command:'rowInsertAfter',order:10},tablerow_delete:{label:M.row.deleteRow,group:'tablerow',command:'rowDelete',order:15},tablecolumn:{label:M.column.menu,group:'tablecolumn',order:1,getItems:function(){return{tablecolumn_insertBefore:2,tablecolumn_insertAfter:2,tablecolumn_delete:2};}},tablecolumn_insertBefore:{label:M.column.insertBefore,group:'tablecolumn',command:'columnInsertBefore',order:5},tablecolumn_insertAfter:{label:M.column.insertAfter,group:'tablecolumn',command:'columnInsertAfter',order:10},tablecolumn_delete:{label:M.column.deleteColumn,group:'tablecolumn',command:'columnDelete',order:15}});if(L.contextMenu)L.contextMenu.addListener(function(N,O){if(!N||N.isReadOnly())return null;while(N){if(N.getName() in K)return{tablecell:2,tablerow:2,tablecolumn:2};N=N.getParent();}return null;});},getSelectedCells:t};o.add('tabletools',o.tabletools);})();j.buildTableMap=function(r){var s=r.$.rows,t=-1,u=[];for(var v=0;v<s.length;v++){t++;!u[t]&&(u[t]=[]);var w=-1;for(var x=0;x<s[v].cells.length;x++){var y=s[v].cells[x];w++;while(u[t][w])w++;var z=isNaN(y.colSpan)?1:y.colSpan,A=isNaN(y.rowSpan)?1:y.rowSpan;for(var B=0;B<A;B++){if(!u[t+B])u[t+B]=[];for(var C=0;C<z;C++)u[t+B][w+C]=s[v].cells[x];}w+=z-1;}}return u;};o.add('specialchar',{init:function(r){var s='specialchar';f.dialog.add(s,this.path+'dialogs/specialchar.js');r.addCommand(s,new f.dialogCommand(s));r.ui.addButton('SpecialChar',{label:r.lang.specialChar.toolbar,command:s});}});(function(){var r={editorFocus:false,modes:{wysiwyg:1,source:1}},s={exec:function(v){v.container.focusNext(true,v.tabIndex);}},t={exec:function(v){v.container.focusPrevious(true,v.tabIndex);}};function u(v){return{editorFocus:false,canUndo:false,modes:{wysiwyg:1},exec:function(w){if(w.focusManager.hasFocus){var x=w.getSelection(),y=x.getCommonAncestor(),z;if(z=y.getAscendant('td',true)||y.getAscendant('th',true)){var A=new i.range(w.document),B=j.tryThese(function(){var I=z.getParent(),J=I.$.cells[z.$.cellIndex+(v?-1:1)];J.parentNode.parentNode;return J;},function(){var I=z.getParent(),J=I.getAscendant('table'),K=J.$.rows[I.$.rowIndex+(v?-1:1)];return K.cells[v?K.cells.length-1:0];});if(!(B||v)){var C=z.getAscendant('table').$,D=z.getParent().$.cells,E=new m(C.insertRow(-1),w.document);for(var F=0,G=D.length;F<G;F++){var H=E.append(new m(D[F],w.document).clone(false,false));
!h&&H.appendBogus();}A.moveToElementEditStart(E);}else if(B){B=new m(B);A.moveToElementEditStart(B);if(!(A.checkStartOfBlock()&&A.checkEndOfBlock()))A.selectNodeContents(B);}else return true;A.select(true);return true;}}return false;}};};o.add('tab',{requires:['keystrokes'],init:function(v){var w=v.config.enableTabKeyTools!==false,x=v.config.tabSpaces||0,y='';while(x--)y+='\xa0';if(y)v.on('key',function(z){if(z.data.keyCode==9){v.insertHtml(y);z.cancel();}});if(w)v.on('key',function(z){if(z.data.keyCode==9&&v.execCommand('selectNextCell')||z.data.keyCode==2000+9&&v.execCommand('selectPreviousCell'))z.cancel();});if(g.webkit||g.gecko)v.on('key',function(z){var A=z.data.keyCode;if(A==9&&!y){z.cancel();v.execCommand('blur');}if(A==2000+9){v.execCommand('blurBack');z.cancel();}});v.addCommand('blur',j.extend(s,r));v.addCommand('blurBack',j.extend(t,r));v.addCommand('selectNextCell',u());v.addCommand('selectPreviousCell',u(true));}});})();m.prototype.focusNext=function(r,s){var B=this;var t=B.$,u=s===undefined?B.getTabIndex():s,v,w,x,y,z,A;if(u<=0){z=B.getNextSourceNode(r,1);while(z){if(z.isVisible()&&z.getTabIndex()===0){x=z;break;}z=z.getNextSourceNode(false,1);}}else{z=B.getDocument().getBody().getFirst();while(z=z.getNextSourceNode(false,1)){if(!v)if(!w&&z.equals(B)){w=true;if(r){if(!(z=z.getNextSourceNode(true,1)))break;v=1;}}else if(w&&!B.contains(z))v=1;if(!z.isVisible()||(A=z.getTabIndex())<0)continue;if(v&&A==u){x=z;break;}if(A>u&&(!x||!y||A<y)){x=z;y=A;}else if(!x&&A===0){x=z;y=A;}}}if(x)x.focus();};m.prototype.focusPrevious=function(r,s){var B=this;var t=B.$,u=s===undefined?B.getTabIndex():s,v,w,x,y=0,z,A=B.getDocument().getBody().getLast();while(A=A.getPreviousSourceNode(false,1)){if(!v)if(!w&&A.equals(B)){w=true;if(r){if(!(A=A.getPreviousSourceNode(true,1)))break;v=1;}}else if(w&&!B.contains(A))v=1;if(!A.isVisible()||(z=A.getTabIndex())<0)continue;if(u<=0){if(v&&z===0){x=A;break;}if(z>y){x=A;y=z;}}else{if(v&&z==u){x=A;break;}if(z<u&&(!x||z>y)){x=A;y=z;}}}if(x)x.focus();};(function(){o.add('templates',{requires:['dialog'],init:function(t){f.dialog.add('templates',f.getUrl(this.path+'dialogs/templates.js'));t.addCommand('templates',new f.dialogCommand('templates'));t.ui.addButton('Templates',{label:t.lang.templates.button,command:'templates'});}});var r={},s={};f.addTemplates=function(t,u){r[t]=u;};f.getTemplates=function(t){return r[t];};f.loadTemplates=function(t,u){var v=[];for(var w=0,x=t.length;w<x;w++){if(!s[t[w]]){v.push(t[w]);s[t[w]]=1;}}if(v.length)f.scriptLoader.load(v,u);
else setTimeout(u,0);};})();n.templates_files=[f.getUrl('plugins/templates/templates/default.js')];n.templates_replaceContent=true;(function(){var r=function(){this.toolbars=[];this.focusCommandExecuted=false;};r.prototype.focus=function(){for(var t=0,u;u=this.toolbars[t++];)for(var v=0,w;w=u.items[v++];){if(w.focus){w.focus();return;}}};var s={toolbarFocus:{modes:{wysiwyg:1,source:1},exec:function(t){if(t.toolbox){t.toolbox.focusCommandExecuted=true;if(h)setTimeout(function(){t.toolbox.focus();},100);else t.toolbox.focus();}}}};o.add('toolbar',{init:function(t){var u=function(v,w){var x,y,z,A=t.lang.dir=='rtl';switch(w){case A?37:39:case 9:do{x=v.next;if(!x){y=v.toolbar.next;z=y&&y.items.length;while(z===0){y=y.next;z=y&&y.items.length;}if(y)x=y.items[0];}v=x;}while(v&&!v.focus)if(v)v.focus();else t.toolbox.focus();return false;case A?39:37:case 2000+9:do{x=v.previous;if(!x){y=v.toolbar.previous;z=y&&y.items.length;while(z===0){y=y.previous;z=y&&y.items.length;}if(y)x=y.items[z-1];}v=x;}while(v&&!v.focus)if(v)v.focus();else{var B=t.toolbox.toolbars[t.toolbox.toolbars.length-1].items;B[B.length-1].focus();}return false;case 27:t.focus();return false;case 13:case 32:v.execute();return false;}return true;};t.on('themeSpace',function(v){if(v.data.space==t.config.toolbarLocation){t.toolbox=new r();var w=j.getNextId(),x=['<div class="cke_toolbox" role="toolbar" aria-labelledby="',w,'"'],y=t.config.toolbarStartupExpanded!==false,z;x.push(y?'>':' style="display:none">');x.push('<span id="',w,'" class="cke_voice_label">',t.lang.toolbar,'</span>');var A=t.toolbox.toolbars,B=t.config.toolbar instanceof Array?t.config.toolbar:t.config['toolbar_'+t.config.toolbar];for(var C=0;C<B.length;C++){var D=B[C];if(!D)continue;var E=j.getNextId(),F={id:E,items:[]};if(z){x.push('</div>');z=0;}if(D==='/'){x.push('<div class="cke_break"></div>');continue;}x.push('<span id="',E,'" class="cke_toolbar" role="presentation"><span class="cke_toolbar_start"></span>');var G=A.push(F)-1;if(G>0){F.previous=A[G-1];F.previous.next=F;}for(var H=0;H<D.length;H++){var I,J=D[H];if(J=='-')I=p.separator;else I=t.ui.create(J);if(I){if(I.canGroup){if(!z){x.push('<span class="cke_toolgroup" role="presentation">');z=1;}}else if(z){x.push('</span>');z=0;}var K=I.render(t,x);G=F.items.push(K)-1;if(G>0){K.previous=F.items[G-1];K.previous.next=K;}K.toolbar=F;K.onkey=u;K.onfocus=function(){if(!t.toolbox.focusCommandExecuted)t.focus();};}}if(z){x.push('</span>');z=0;}x.push('<span class="cke_toolbar_end"></span></span>');
}x.push('</div>');if(t.config.toolbarCanCollapse){var L=j.addFunction(function(){t.execCommand('toolbarCollapse');});t.on('destroy',function(){j.removeFunction(L);});var M=j.getNextId();t.addCommand('toolbarCollapse',{exec:function(N){var O=f.document.getById(M),P=O.getPrevious(),Q=N.getThemeSpace('contents'),R=P.getParent(),S=parseInt(Q.$.style.height,10),T=R.$.offsetHeight,U=!P.isVisible();if(!U){P.hide();O.addClass('cke_toolbox_collapser_min');O.setAttribute('title',N.lang.toolbarExpand);}else{P.show();O.removeClass('cke_toolbox_collapser_min');O.setAttribute('title',N.lang.toolbarCollapse);}O.getFirst().setText(U?'▲':'◀');var V=R.$.offsetHeight-T;Q.setStyle('height',S-V+'px');N.fire('resize');},modes:{wysiwyg:1,source:1}});x.push('<a title="'+(y?t.lang.toolbarCollapse:t.lang.toolbarExpand)+'" id="'+M+'" tabIndex="-1" class="cke_toolbox_collapser');if(!y)x.push(' cke_toolbox_collapser_min');x.push('" onclick="CKEDITOR.tools.callFunction('+L+')">','<span>&#9650;</span>','</a>');}v.data.html+=x.join('');}});t.addCommand('toolbarFocus',s.toolbarFocus);}});})();p.separator={render:function(r,s){s.push('<span class="cke_separator" role="separator"></span>');return{};}};n.toolbarLocation='top';n.toolbar_Basic=[['Bold','Italic','-','NumberedList','BulletedList','-','Link','Unlink','-','About']];n.toolbar_Full=[['Source','-','Save','NewPage','Preview','-','Templates'],['Cut','Copy','Paste','PasteText','PasteFromWord','-','Print','SpellChecker','Scayt'],['Undo','Redo','-','Find','Replace','-','SelectAll','RemoveFormat'],['Form','Checkbox','Radio','TextField','Textarea','Select','Button','ImageButton','HiddenField'],'/',['Bold','Italic','Underline','Strike','-','Subscript','Superscript'],['NumberedList','BulletedList','-','Outdent','Indent','Blockquote','CreateDiv'],['JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock'],['BidiLtr','BidiRtl'],['Link','Unlink','Anchor'],['Image','Flash','Table','HorizontalRule','Smiley','SpecialChar','PageBreak'],'/',['Styles','Format','Font','FontSize'],['TextColor','BGColor'],['Maximize','ShowBlocks','-','About']];n.toolbar='Full';n.toolbarCanCollapse=true;(function(){o.add('undo',{requires:['selection','wysiwygarea'],init:function(x){var y=new t(x),z=x.addCommand('undo',{exec:function(){if(y.undo()){x.selectionChange();this.fire('afterUndo');}},state:0,canUndo:false}),A=x.addCommand('redo',{exec:function(){if(y.redo()){x.selectionChange();this.fire('afterRedo');}},state:0,canUndo:false});y.onChange=function(){z.setState(y.undoable()?2:0);
A.setState(y.redoable()?2:0);};function B(C){if(y.enabled&&C.data.command.canUndo!==false)y.save();};x.on('beforeCommandExec',B);x.on('afterCommandExec',B);x.on('saveSnapshot',function(){y.save();});x.on('contentDom',function(){x.document.on('keydown',function(C){if(!C.data.$.ctrlKey&&!C.data.$.metaKey)y.type(C);});});x.on('beforeModeUnload',function(){x.mode=='wysiwyg'&&y.save(true);});x.on('mode',function(){y.enabled=x.mode=='wysiwyg';y.onChange();});x.ui.addButton('Undo',{label:x.lang.undo,command:'undo'});x.ui.addButton('Redo',{label:x.lang.redo,command:'redo'});x.resetUndo=function(){y.reset();x.fire('saveSnapshot');};x.on('updateSnapshot',function(){if(y.currentImage&&new r(x).equals(y.currentImage))setTimeout(function(){y.update();},0);});}});o.undo={};var r=o.undo.Image=function(x){this.editor=x;var y=x.getSnapshot(),z=y&&x.getSelection();h&&y&&(y=y.replace(/\s+_cke_expando=".*?"/g,''));this.contents=y;this.bookmarks=z&&z.createBookmarks2(true);},s=/\b(?:href|src|name)="[^"]*?"/gi;r.prototype={equals:function(x,y){var z=this.contents,A=x.contents;if(h&&(g.ie7Compat||g.ie6Compat)){z=z.replace(s,'');A=A.replace(s,'');}if(z!=A)return false;if(y)return true;var B=this.bookmarks,C=x.bookmarks;if(B||C){if(!B||!C||B.length!=C.length)return false;for(var D=0;D<B.length;D++){var E=B[D],F=C[D];if(E.startOffset!=F.startOffset||E.endOffset!=F.endOffset||!j.arrayCompare(E.start,F.start)||!j.arrayCompare(E.end,F.end))return false;}}return true;}};function t(x){this.editor=x;this.reset();};var u={8:1,46:1},v={16:1,17:1,18:1},w={37:1,38:1,39:1,40:1};t.prototype={type:function(x){var y=x&&x.data.getKey(),z=y in v,A=y in u,B=this.lastKeystroke in u,C=A&&y==this.lastKeystroke,D=y in w,E=this.lastKeystroke in w,F=!A&&!D,G=A&&!C,H=!(z||this.typing)||F&&(B||E);if(H||G){var I=new r(this.editor);j.setTimeout(function(){var K=this;var J=K.editor.getSnapshot();if(h)J=J.replace(/\s+_cke_expando=".*?"/g,'');if(I.contents!=J){K.typing=true;if(!K.save(false,I,false))K.snapshots.splice(K.index+1,K.snapshots.length-K.index-1);K.hasUndo=true;K.hasRedo=false;K.typesCount=1;K.modifiersCount=1;K.onChange();}},0,this);}this.lastKeystroke=y;if(A){this.typesCount=0;this.modifiersCount++;if(this.modifiersCount>25){this.save(false,null,false);this.modifiersCount=1;}}else if(!D){this.modifiersCount=0;this.typesCount++;if(this.typesCount>25){this.save(false,null,false);this.typesCount=1;}}},reset:function(){var x=this;x.lastKeystroke=0;x.snapshots=[];x.index=-1;x.limit=x.editor.config.undoStackSize||20;
x.currentImage=null;x.hasUndo=false;x.hasRedo=false;x.resetType();},resetType:function(){var x=this;x.typing=false;delete x.lastKeystroke;x.typesCount=0;x.modifiersCount=0;},fireChange:function(){var x=this;x.hasUndo=!!x.getNextImage(true);x.hasRedo=!!x.getNextImage(false);x.resetType();x.onChange();},save:function(x,y,z){var B=this;var A=B.snapshots;if(!y)y=new r(B.editor);if(y.contents===false)return false;if(B.currentImage&&y.equals(B.currentImage,x))return false;A.splice(B.index+1,A.length-B.index-1);if(A.length==B.limit)A.shift();B.index=A.push(y)-1;B.currentImage=y;if(z!==false)B.fireChange();return true;},restoreImage:function(x){var z=this;z.editor.loadSnapshot(x.contents);if(x.bookmarks)z.editor.getSelection().selectBookmarks(x.bookmarks);else if(h){var y=z.editor.document.getBody().$.createTextRange();y.collapse(true);y.select();}z.index=x.index;z.update();z.fireChange();},getNextImage:function(x){var C=this;var y=C.snapshots,z=C.currentImage,A,B;if(z)if(x)for(B=C.index-1;B>=0;B--){A=y[B];if(!z.equals(A,true)){A.index=B;return A;}}else for(B=C.index+1;B<y.length;B++){A=y[B];if(!z.equals(A,true)){A.index=B;return A;}}return null;},redoable:function(){return this.enabled&&this.hasRedo;},undoable:function(){return this.enabled&&this.hasUndo;},undo:function(){var y=this;if(y.undoable()){y.save(true);var x=y.getNextImage(true);if(x)return y.restoreImage(x),true;}return false;},redo:function(){var y=this;if(y.redoable()){y.save(true);if(y.redoable()){var x=y.getNextImage(false);if(x)return y.restoreImage(x),true;}}return false;},update:function(){var x=this;x.snapshots.splice(x.index,1,x.currentImage=new r(x.editor));}};})();(function(){var r={table:1,pre:1},s=/(^|<body\b[^>]*>)\s*<(p|div|address|h\d|center)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\2>)?\s*(?=$|<\/body>)/gi,t=i.walker.whitespaces(true);function u(G){if(G.getType()==3)return G.getSelectedElement().isReadOnly();else return G.getCommonAncestor().isReadOnly();};function v(G){if(this.mode=='wysiwyg'){this.focus();var H=this.getSelection();if(u(H))return;var I=G.data;this.fire('saveSnapshot');if(this.dataProcessor)I=this.dataProcessor.toHtml(I);if(h){var J=H.isLocked;if(J)H.unlock();var K=H.getNative();if(K.type=='Control')K.clear();else if(H.getType()==2){var L=H.getRanges()[0],M=L&&L.endContainer;if(M&&M.type==1&&M.getAttribute('contenteditable')=='false'&&L.checkBoundaryOfElement(M,2)){L.setEndAfter(L.endContainer);L.deleteContents();}}try{K.createRange().pasteHTML(I);}catch(O){}if(J)this.getSelection().lock();
}else this.document.$.execCommand('inserthtml',false,I);if(g.webkit){this.document.$.execCommand('inserthtml',false,'<span id="cke_paste_marker" cke_temp="1"></span>');var N=this.document.getById('cke_paste_marker');N.scrollIntoView();N.remove();N=null;}j.setTimeout(function(){this.fire('saveSnapshot');},0,this);}};function w(G){if(this.mode=='wysiwyg'){this.focus();var H=this.getSelection();if(u(H))return;this.fire('saveSnapshot');var I=H.getRanges(),J=G.data,K=J.getName(),L=k.$block[K],M=H.isLocked;if(M)H.unlock();var N,O,P,Q;for(var R=I.length-1;R>=0;R--){N=I[R];N.deleteContents();O=!R&&J||J.clone(1);var S,T;if(L)while((S=N.getCommonAncestor(0,1))&&(T=k[S.getName()])&&!(T&&T[K])){if(S.getName() in k.span)N.splitElement(S);else if(N.checkStartOfBlock()&&N.checkEndOfBlock()){N.setStartBefore(S);N.collapse(true);S.remove();}else N.splitBlock();}N.insertNode(O);if(!P)P=O;}N.moveToPosition(P,4);if(L){var U=P.getNext(t),V=U&&U.type==1&&U.getName();if(V&&k.$block[V]&&k[V]['#'])N.moveToElementEditStart(U);}H.selectRanges([N]);if(M)this.getSelection().lock();j.setTimeout(function(){this.fire('saveSnapshot');},0,this);}};function x(G){if(!G.checkDirty())setTimeout(function(){G.resetDirty();},0);};var y=i.walker.whitespaces(true),z=i.walker.bookmark(false,true);function A(G){return y(G)&&z(G);};function B(G){return G.type==3&&j.trim(G.getText()).match(/^(?:&nbsp;|\xa0)$/);};function C(G){if(G.isLocked){G.unlock();setTimeout(function(){G.lock();},0);}};function D(G){return G.getOuterHtml().match(s);};y=i.walker.whitespaces(true);function E(G){var H=G.window,I=G.document,J=G.document.getBody(),K=J.getChildren().count();if(!K||K==1&&J.getFirst().hasAttribute('_moz_editor_bogus_node')){x(G);var L=G.element.getDocument(),M=L.getDocumentElement(),N=M.$.scrollTop,O=M.$.scrollLeft,P=I.$.createEvent('KeyEvents');P.initKeyEvent('keypress',true,true,H.$,false,false,false,false,0,32);I.$.dispatchEvent(P);if(N!=M.$.scrollTop||O!=M.$.scrollLeft)L.getWindow().$.scrollTo(O,N);K&&J.getFirst().remove();I.getBody().appendBogus();var Q=new i.range(I);Q.setStartAt(J,1);Q.select();}};function F(G){var H=G.editor,I=G.data.path,J=I.blockLimit,K=G.data.selection,L=K.getRanges()[0],M=H.document.getBody(),N=H.config.enterMode;g.gecko&&E(H);if(N!=2&&L.collapsed&&J.getName()=='body'&&!I.block){H.fire('updateSnapshot');x(H);h&&C(K);var O=L.fixBlock(true,H.config.enterMode==3?'div':'p');if(h){var P=O.getFirst(A);P&&B(P)&&P.remove();}if(D(O)){var Q=O.getNext(y);if(Q&&Q.type==1&&!r[Q.getName()]){L.moveToElementEditStart(Q);
O.remove();}else{Q=O.getPrevious(y);if(Q&&Q.type==1&&!r[Q.getName()]){L.moveToElementEditEnd(Q);O.remove();}}}L.select();if(!h)H.selectionChange();}var R=new i.range(H.document),S=new i.walker(R);R.selectNodeContents(M);S.evaluator=function(U){return U.type==1&&U.getName() in r;};S.guard=function(U,V){return!(U.type==3&&y(U)||V);};if(S.previous()){H.fire('updateSnapshot');x(H);h&&C(K);var T;if(N!=2)T=M.append(new m(N==1?'p':'div'));else T=M;if(!h)T.appendBogus();}};o.add('wysiwygarea',{requires:['editingblock'],init:function(G){var H=G.config.enterMode!=2?G.config.enterMode==3?'div':'p':false,I=G.lang.editorTitle.replace('%1',G.name),J;G.on('editingBlockReady',function(){var P,Q,R,S,T,U,V=g.isCustomDomain(),W=function(Z){if(Q)Q.remove();var aa='document.open();'+(V?'document.domain="'+document.domain+'";':'')+'document.close();';Q=m.createFromHtml('<iframe style="width:100%;height:100%" frameBorder="0" title="'+I+'"'+' src="'+(h?'javascript:void(function(){'+encodeURIComponent(aa)+'}())':'')+'"'+' tabIndex="'+(g.webkit?-1:G.tabIndex)+'"'+' allowTransparency="true"'+'></iframe>');if(document.location.protocol=='chrome:')f.event.useCapture=true;Q.on('load',function(ae){T=1;ae.removeListener();var af=Q.getFrameDocument().$;af.open('text/html','replace');af.write(Z);af.close();});if(document.location.protocol=='chrome:')f.event.useCapture=false;var ab=G.element,ac=g.gecko&&!ab.isVisible(),ad={};if(ac){ab.show();ad={position:ab.getStyle('position'),top:ab.getStyle('top')};ab.setStyles({position:'absolute',top:'-3000px'});}P.append(Q);if(ac)setTimeout(function(){ab.hide();ab.setStyles(ad);},1000);};J=j.addFunction(Y);var X='<script id="cke_actscrpt" type="text/javascript" cke_temp="1">'+(V?'document.domain="'+document.domain+'";':'')+'window.parent.CKEDITOR.tools.callFunction( '+J+', window );'+'</script>';function Y(Z){if(!T)return;T=0;G.fire('ariaWidget',Q);var aa=Z.document,ab=aa.body,ac=aa.getElementById('cke_actscrpt');ac.parentNode.removeChild(ac);ab.spellcheck=!G.config.disableNativeSpellChecker;if(h){ab.hideFocus=true;ab.disabled=true;ab.contentEditable=true;ab.removeAttribute('disabled');}else setTimeout(function(){if(g.gecko&&g.version>=10900||g.opera)aa.$.body.contentEditable=true;else if(g.webkit)aa.$.body.parentNode.contentEditable=true;else aa.$.designMode='on';},0);g.gecko&&j.setTimeout(E,0,null,G);Z=G.window=new i.window(Z);aa=G.document=new l(aa);aa.on('dblclick',function(ah){var ai=ah.data.getTarget(),aj={element:ai,dialog:''};G.fire('doubleclick',aj);
aj.dialog&&G.openDialog(aj.dialog);});if(!(h||g.opera))aa.on('mousedown',function(ah){var ai=ah.data.getTarget();if(ai.is('img','hr','input','textarea','select'))G.getSelection().selectElement(ai);});if(g.gecko)aa.on('mouseup',function(ah){if(ah.data.$.button==2){var ai=ah.data.getTarget();if(!ai.getOuterHtml().replace(s,'')){var aj=new i.range(aa);aj.moveToElementEditStart(ai);aj.select(true);}}});aa.on('click',function(ah){ah=ah.data;if(ah.getTarget().is('a')&&ah.$.button!=2)ah.preventDefault();});if(g.webkit){aa.on('click',function(ah){if(ah.data.getTarget().is('input','select'))ah.data.preventDefault();});aa.on('mouseup',function(ah){if(ah.data.getTarget().is('input','textarea'))ah.data.preventDefault();});}if(h&&aa.$.compatMode=='CSS1Compat'||g.gecko||g.opera){var ad=aa.getDocumentElement();ad.on('mousedown',function(ah){if(ah.data.getTarget().equals(ad)){if(g.gecko&&g.version>=10900)N();O.focus();}});}Z.on('blur',function(){G.focusManager.blur();});var ae;Z.on('focus',function(){var ah=G.document;if(g.gecko&&g.version>=10900)N();else if(g.opera)ah.getBody().focus();else if(g.webkit)if(!ae){G.document.getDocumentElement().focus();ae=1;}G.focusManager.focus();});var af=G.keystrokeHandler;if(af)af.attach(aa);if(h){aa.getDocumentElement().addClass(aa.$.compatMode);aa.on('keydown',function(ah){var ai=ah.data.getKeystroke();if(ai in {8:1,46:1}){var aj=G.getSelection(),ak=aj.getSelectedElement();if(ak){G.fire('saveSnapshot');var al=aj.getRanges()[0].createBookmark();ak.remove();aj.selectBookmarks([al]);G.fire('saveSnapshot');ah.data.preventDefault();}}});if(aa.$.compatMode=='CSS1Compat'){var ag={33:1,34:1};aa.on('keydown',function(ah){if(ah.data.getKeystroke() in ag)setTimeout(function(){G.getSelection().scrollIntoView();},0);});}}if(G.contextMenu)G.contextMenu.addTarget(aa,G.config.browserContextMenuOnCtrl!==false);setTimeout(function(){G.fire('contentDom');if(U){G.mode='wysiwyg';G.fire('mode');U=false;}R=false;if(S){G.focus();S=false;}setTimeout(function(){G.fire('dataReady');},0);try{G.document.$.execCommand('enableObjectResizing',false,!G.config.disableObjectResizing);}catch(ah){}try{G.document.$.execCommand('enableInlineTableEditing',false,!G.config.disableNativeTableHandles);}catch(ai){}if(h)setTimeout(function(){if(G.document){var aj=G.document.$.body;aj.runtimeStyle.marginBottom='0px';aj.runtimeStyle.marginBottom='';}},1000);},0);};G.addMode('wysiwyg',{load:function(Z,aa,ab){P=Z;if(h&&g.quirks)Z.setStyle('position','relative');G.mayBeDirty=true;U=true;
if(ab)this.loadSnapshotData(aa);else this.loadData(aa);},loadData:function(Z){R=true;var aa=G.config,ab=aa.fullPage,ac=aa.docType,ad='<style type="text/css" cke_temp="1">'+G._.styles.join('\n')+'</style>';!ab&&(ad=j.buildStyleHtml(G.config.contentsCss)+ad);var ae=aa.baseHref?'<base href="'+aa.baseHref+'" cke_temp="1" />':'';if(ab)Z=Z.replace(/<!DOCTYPE[^>]*>/i,function(af){G.docType=ac=af;return '';});if(G.dataProcessor)Z=G.dataProcessor.toHtml(Z,H);if(ab){if(!/<body[\s|>]/.test(Z))Z='<body>'+Z;if(!/<html[\s|>]/.test(Z))Z='<html>'+Z+'</html>';if(!/<head[\s|>]/.test(Z))Z=Z.replace(/<html[^>]*>/,'$&<head><title></title></head>');else if(!/<title[\s|>]/.test(Z))Z=Z.replace(/<head[^>]*>/,'$&<title></title>');ae&&(Z=Z.replace(/<head>/,'$&'+ae));Z=Z.replace(/<\/head\s*>/,ad+'$&');Z=ac+Z;}else Z=aa.docType+'<html dir="'+aa.contentsLangDirection+'"'+' lang="'+(aa.contentsLanguage||G.langCode)+'">'+'<head>'+'<title>'+I+'</title>'+ae+ad+'</head>'+'<body'+(aa.bodyId?' id="'+aa.bodyId+'"':'')+(aa.bodyClass?' class="'+aa.bodyClass+'"':'')+'>'+Z+'</html>';Z+=X;this.onDispose();W(Z);},getData:function(){var Z=G.config,aa=Z.fullPage,ab=aa&&G.docType,ac=Q.getFrameDocument(),ad=aa?ac.getDocumentElement().getOuterHtml():ac.getBody().getHtml();if(G.dataProcessor)ad=G.dataProcessor.toDataFormat(ad,H);if(Z.ignoreEmptyParagraph)ad=ad.replace(s,function(ae,af){return af;});if(ab)ad=ab+'\n'+ad;return ad;},getSnapshotData:function(){return Q.getFrameDocument().getBody().getHtml();},loadSnapshotData:function(Z){Q.getFrameDocument().getBody().setHtml(Z);},onDispose:function(){if(!G.document)return;G.document.getDocumentElement().clearCustomData();G.document.getBody().clearCustomData();G.window.clearCustomData();G.document.clearCustomData();Q.clearCustomData();Q.remove();},unload:function(Z){this.onDispose();G.window=G.document=Q=P=S=null;G.fire('contentDomUnload');},focus:function(){if(R)S=true;else if(g.opera&&G.document){var Z=G.window.$.frameElement;Z.blur(),Z.focus();G.document.getBody().focus();G.selectionChange();}else if(!g.opera&&G.window){G.window.focus();G.selectionChange();}}});G.on('insertHtml',v,null,null,20);G.on('insertElement',w,null,null,20);G.on('selectionChange',F,null,null,1);});var K;G.on('contentDom',function(){var P=G.document.getElementsByTag('title').getItem(0);P.setAttribute('_cke_title',G.document.$.title);G.document.$.title=I;});if(g.ie8Compat){G.addCss('html.CSS1Compat [contenteditable=false]{ min-height:0 !important;}');var L=[];for(var M in k.$removeEmpty)L.push('html.CSS1Compat '+M+'[contenteditable=false]');
G.addCss(L.join(',')+'{ display:inline-block;}');}else if(g.gecko)G.addCss('html { height: 100% !important; }');function N(P){j.tryThese(function(){G.document.$.designMode='on';setTimeout(function(){G.document.$.designMode='off';if(f.currentInstance==G)G.document.getBody().focus();},50);},function(){G.document.$.designMode='off';var Q=G.document.getBody();Q.setAttribute('contentEditable',false);Q.setAttribute('contentEditable',true);!P&&N(1);});};if(g.gecko||h||g.opera){var O;G.on('uiReady',function(){O=G.container.append(m.createFromHtml('<span tabindex="-1" style="position:absolute; left:-10000" role="presentation"></span>'));O.on('focus',function(){G.focus();});});G.on('destroy',function(){j.removeFunction(J);O.clearCustomData();});}G.on('insertElement',function(P){var Q=P.data;if(Q.type==1&&(Q.is('input')||Q.is('textarea')))if(!Q.isReadOnly()){Q.setAttribute('contentEditable',false);Q.setCustomData('_cke_notReadOnly',1);}});}});if(g.gecko)(function(){var G=document.body;if(!G)window.addEventListener('load',arguments.callee,false);else{var H=G.getAttribute('onpageshow');G.setAttribute('onpageshow',(H?H+';':'')+'event.persisted && (function(){'+'var allInstances = CKEDITOR.instances, editor, doc;'+'for ( var i in allInstances )'+'{'+'\teditor = allInstances[ i ];'+'\tdoc = editor.document;'+'\tif ( doc )'+'\t{'+'\t\tdoc.$.designMode = "off";'+'\t\tdoc.$.designMode = "on";'+'\t}'+'}'+'})();');}})();})();n.disableObjectResizing=false;n.disableNativeTableHandles=true;n.disableNativeSpellChecker=true;n.ignoreEmptyParagraph=true;o.add('wsc',{requires:['dialog'],init:function(r){var s='checkspell',t=r.addCommand(s,new f.dialogCommand(s));t.modes={wysiwyg:!g.opera&&document.domain==window.location.hostname};r.ui.addButton('SpellChecker',{label:r.lang.spellCheck.toolbar,command:s});f.dialog.add(s,this.path+'dialogs/wsc.js');}});n.wsc_customerId=n.wsc_customerId||'1:ua3xw1-2XyGJ3-GWruD3-6OFNT1-oXcuB1-nR6Bp4-hgQHc-EcYng3-sdRXG3-NOfFk';n.wsc_customLoaderScript=n.wsc_customLoaderScript||null;f.DIALOG_RESIZE_NONE=0;f.DIALOG_RESIZE_WIDTH=1;f.DIALOG_RESIZE_HEIGHT=2;f.DIALOG_RESIZE_BOTH=3;(function(){var r=j.cssLength;function s(U){return!!this._.tabs[U][0].$.offsetHeight;};function t(){var Y=this;var U=Y._.currentTabId,V=Y._.tabIdList.length,W=j.indexOf(Y._.tabIdList,U)+V;for(var X=W-1;X>W-V;X--){if(s.call(Y,Y._.tabIdList[X%V]))return Y._.tabIdList[X%V];}return null;};function u(){var Y=this;var U=Y._.currentTabId,V=Y._.tabIdList.length,W=j.indexOf(Y._.tabIdList,U);for(var X=W+1;
X<W+V;X++){if(s.call(Y,Y._.tabIdList[X%V]))return Y._.tabIdList[X%V];}return null;};function v(U,V){var W=U.$.getElementsByTagName('input');for(var X=0,Y=W.length;X<Y;X++){var Z=new m(W[X]);if(Z.getAttribute('type').toLowerCase()=='text')if(V){Z.setAttribute('value',Z.getCustomData('fake_value')||'');Z.removeCustomData('fake_value');}else{Z.setCustomData('fake_value',Z.getAttribute('value'));Z.setAttribute('value','');}}};f.dialog=function(U,V){var W=f.dialog._.dialogDefinitions[V];W=j.extend(W(U),x);W=j.clone(W);W=new B(this,W);var X=f.document,Y=U.theme.buildDialog(U);this._={editor:U,element:Y.element,name:V,contentSize:{width:0,height:0},size:{width:0,height:0},updateSize:false,contents:{},buttons:{},accessKeyMap:{},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:false,focusList:[],currentFocusIndex:0,hasFocus:false};this.parts=Y.parts;j.setTimeout(function(){U.fire('ariaWidget',this.parts.contents);},0,this);this.parts.dialog.setStyles({position:g.ie6Compat?'absolute':'fixed',top:0,left:0,visibility:'hidden'});f.event.call(this);this.definition=W=f.fire('dialogDefinition',{name:V,definition:W},U).definition;if(W.onLoad)this.on('load',W.onLoad);if(W.onShow)this.on('show',W.onShow);if(W.onHide)this.on('hide',W.onHide);if(W.onOk)this.on('ok',function(al){U.fire('saveSnapshot');setTimeout(function(){U.fire('saveSnapshot');},0);if(W.onOk.call(this,al)===false)al.data.hide=false;});if(W.onCancel)this.on('cancel',function(al){if(W.onCancel.call(this,al)===false)al.data.hide=false;});var Z=this,aa=function(al){var am=Z._.contents,an=false;for(var ao in am)for(var ap in am[ao]){an=al.call(this,am[ao][ap]);if(an)return;}};this.on('ok',function(al){aa(function(am){if(am.validate){var an=am.validate(this);if(typeof an=='string'){alert(an);an=false;}if(an===false){if(am.select)am.select();else am.focus();al.data.hide=false;al.stop();return true;}}});},this,null,0);this.on('cancel',function(al){aa(function(am){if(am.isChanged()){if(!confirm(U.lang.common.confirmCancel))al.data.hide=false;return true;}});},this,null,0);this.parts.close.on('click',function(al){if(this.fire('cancel',{hide:true}).hide!==false)this.hide();al.data.preventDefault();},this);function ab(){var al=Z._.focusList;al.sort(function(ao,ap){if(ao.tabIndex!=ap.tabIndex)return ap.tabIndex-ao.tabIndex;else return ao.focusIndex-ap.focusIndex;});var am=al.length;for(var an=0;an<am;an++)al[an].focusIndex=an;};function ac(al){var am=Z._.focusList,an=al?1:-1;if(am.length<1)return;
var ao=Z._.currentFocusIndex;try{am[ao].getInputElement().$.blur();}catch(ar){}var ap=(ao+an+am.length)%am.length,aq=ap;while(!am[aq].isFocusable()){aq=(aq+an+am.length)%am.length;if(aq==ap)break;}am[aq].focus();if(am[aq].type=='text')am[aq].select();};this.changeFocus=ac;var ad;function ae(al){var aq=this;if(Z!=f.dialog._.currentTop)return;var am=al.data.getKeystroke(),an=U.lang.dir=='rtl';ad=0;if(am==9||am==2000+9){var ao=am==2000+9;if(Z._.tabBarMode){var ap=ao?t.call(Z):u.call(Z);Z.selectPage(ap);Z._.tabs[ap][0].focus();}else ac(!ao);ad=1;}else if(am==4000+121&&!Z._.tabBarMode&&Z.getPageCount()>1){Z._.tabBarMode=true;Z._.tabs[Z._.currentTabId][0].focus();ad=1;}else if((am==37||am==39)&&Z._.tabBarMode){ap=am==(an?39:37)?t.call(Z):u.call(Z);Z.selectPage(ap);Z._.tabs[ap][0].focus();ad=1;}else if((am==13||am==32)&&Z._.tabBarMode){aq.selectPage(aq._.currentTabId);aq._.tabBarMode=false;aq._.currentFocusIndex=-1;ac(true);ad=1;}if(ad){al.stop();al.data.preventDefault();}};function af(al){ad&&al.data.preventDefault();};var ag=this._.element;this.on('show',function(){ag.on('keydown',ae,this,null,0);if(g.opera||g.gecko&&g.mac)ag.on('keypress',af,this);});this.on('hide',function(){ag.removeListener('keydown',ae);if(g.opera||g.gecko&&g.mac)ag.removeListener('keypress',af);});this.on('iframeAdded',function(al){var am=new l(al.data.iframe.$.contentWindow.document);am.on('keydown',ae,this,null,0);});this.on('show',function(){var ap=this;ab();if(U.config.dialog_startupFocusTab&&Z._.pageCount>1){Z._.tabBarMode=true;Z._.tabs[Z._.currentTabId][0].focus();}else if(!ap._.hasFocus){ap._.currentFocusIndex=-1;if(W.onFocus){var al=W.onFocus.call(ap);al&&al.focus();}else ac(true);if(ap._.editor.mode=='wysiwyg'&&h){var am=U.document.$.selection,an=am.createRange();if(an)if(an.parentElement&&an.parentElement().ownerDocument==U.document.$||an.item&&an.item(0).ownerDocument==U.document.$){var ao=document.body.createTextRange();ao.moveToElementText(ap.getElement().getFirst().$);ao.collapse(true);ao.select();}}}},this,null,4294967295);if(g.ie6Compat)this.on('load',function(al){var am=this.getElement(),an=am.getFirst();an.remove();an.appendTo(am);},this);D(this);E(this);new i.text(W.title,f.document).appendTo(this.parts.title);for(var ah=0;ah<W.contents.length;ah++){var ai=W.contents[ah];ai&&this.addPage(ai);}this.parts.tabs.on('click',function(al){var ao=this;var am=al.data.getTarget();if(am.hasClass('cke_dialog_tab')){var an=am.$.id;ao.selectPage(an.substring(4,an.lastIndexOf('_')));if(ao._.tabBarMode){ao._.tabBarMode=false;
ao._.currentFocusIndex=-1;ac(true);}al.data.preventDefault();}},this);var aj=[],ak=f.dialog._.uiElementBuilders.hbox.build(this,{type:'hbox',className:'cke_dialog_footer_buttons',widths:[],children:W.buttons},aj).getChild();this.parts.footer.setHtml(aj.join(''));for(ah=0;ah<ak.length;ah++)this._.buttons[ak[ah].id]=ak[ah];};function w(U,V,W){this.element=V;this.focusIndex=W;this.tabIndex=0;this.isFocusable=function(){return!V.getAttribute('disabled')&&V.isVisible();};this.focus=function(){U._.currentFocusIndex=this.focusIndex;this.element.focus();};V.on('keydown',function(X){if(X.data.getKeystroke() in {32:1,13:1})this.fire('click');});V.on('focus',function(){this.fire('mouseover');});V.on('blur',function(){this.fire('mouseout');});};f.dialog.prototype={destroy:function(){this.hide();this._.element.remove();},resize:(function(){return function(U,V){var W=this;if(W._.contentSize&&W._.contentSize.width==U&&W._.contentSize.height==V)return;f.dialog.fire('resize',{dialog:W,skin:W._.editor.skinName,width:U,height:V},W._.editor);W._.contentSize={width:U,height:V};W._.updateSize=true;};})(),getSize:function(){var W=this;if(!W._.updateSize)return W._.size;var U=W._.element.getFirst(),V=W._.size={width:U.$.offsetWidth||0,height:U.$.offsetHeight||0};W._.updateSize=!V.width||!V.height;return V;},move:(function(){var U;return function(V,W){var Z=this;var X=Z._.element.getFirst();if(U===undefined)U=X.getComputedStyle('position')=='fixed';if(U&&Z._.position&&Z._.position.x==V&&Z._.position.y==W)return;Z._.position={x:V,y:W};if(!U){var Y=f.document.getWindow().getScrollPosition();V+=Y.x;W+=Y.y;}X.setStyles({left:(V>0?V:0)+'px',top:(W>0?W:0)+'px'});};})(),getPosition:function(){return j.extend({},this._.position);},show:function(){var U=this._.editor;if(U.mode=='wysiwyg'&&h){var V=U.getSelection();V&&V.lock();}var W=this._.element,X=this.definition;if(!(W.getParent()&&W.getParent().equals(f.document.getBody())))W.appendTo(f.document.getBody());else W.setStyle('display','block');if(g.gecko&&g.version<10900){var Y=this.parts.dialog;Y.setStyle('position','absolute');setTimeout(function(){Y.setStyle('position','fixed');},0);}this.resize(X.minWidth,X.minHeight);this.reset();this.selectPage(this.definition.contents[0].id);if(f.dialog._.currentZIndex===null)f.dialog._.currentZIndex=this._.editor.config.baseFloatZIndex;this._.element.getFirst().setStyle('z-index',f.dialog._.currentZIndex+=10);if(f.dialog._.currentTop===null){f.dialog._.currentTop=this;this._.parentDialog=null;I(this._.editor);
W.on('keydown',M);W.on(g.opera?'keypress':'keyup',N);for(var Z in {keyup:1,keydown:1,keypress:1})W.on(Z,T);}else{this._.parentDialog=f.dialog._.currentTop;var aa=this._.parentDialog.getElement().getFirst();aa.$.style.zIndex-=Math.floor(this._.editor.config.baseFloatZIndex/2);f.dialog._.currentTop=this;}O(this,this,'\x1b',null,function(){this.getButton('cancel')&&this.getButton('cancel').click();});this._.hasFocus=false;j.setTimeout(function(){var ab=f.document.getWindow().getViewPaneSize(),ac=this.getSize();this.move((ab.width-X.minWidth)/2,(ab.height-ac.height)/2);this.parts.dialog.setStyle('visibility','');this.fireOnce('load',{});this.fire('show',{});this._.editor.fire('dialogShow',this);this.foreach(function(ad){ad.setInitValue&&ad.setInitValue();});},100,this);},foreach:function(U){var X=this;for(var V in X._.contents)for(var W in X._.contents[V])U(X._.contents[V][W]);return X;},reset:(function(){var U=function(V){if(V.reset)V.reset(1);};return function(){this.foreach(U);return this;};})(),setupContent:function(){var U=arguments;this.foreach(function(V){if(V.setup)V.setup.apply(V,U);});},commitContent:function(){var U=arguments;this.foreach(function(V){if(V.commit)V.commit.apply(V,U);});},hide:function(){if(!this.parts.dialog.isVisible())return;this.fire('hide',{});this._.editor.fire('dialogHide',this);var U=this._.element;U.setStyle('display','none');this.parts.dialog.setStyle('visibility','hidden');P(this);while(f.dialog._.currentTop!=this)f.dialog._.currentTop.hide();if(!this._.parentDialog)J();else{var V=this._.parentDialog.getElement().getFirst();V.setStyle('z-index',parseInt(V.$.style.zIndex,10)+Math.floor(this._.editor.config.baseFloatZIndex/2));}f.dialog._.currentTop=this._.parentDialog;if(!this._.parentDialog){f.dialog._.currentZIndex=null;U.removeListener('keydown',M);U.removeListener(g.opera?'keypress':'keyup',N);for(var W in {keyup:1,keydown:1,keypress:1})U.removeListener(W,T);var X=this._.editor;X.focus();if(X.mode=='wysiwyg'&&h){var Y=X.getSelection();Y&&Y.unlock(true);}}else f.dialog._.currentZIndex-=10;delete this._.parentDialog;this.foreach(function(Z){Z.resetInitValue&&Z.resetInitValue();});},addPage:function(U){var ag=this;var V=[],W=U.label?' title="'+j.htmlEncode(U.label)+'"':'',X=U.elements,Y=f.dialog._.uiElementBuilders.vbox.build(ag,{type:'vbox',className:'cke_dialog_page_contents',children:U.elements,expand:!!U.expand,padding:U.padding,style:U.style||'width: 100%; height: 100%;'},V),Z=m.createFromHtml(V.join(''));Z.setAttribute('role','tabpanel');
var aa=g,ab='cke_'+U.id+'_'+j.getNextNumber(),ac=m.createFromHtml(['<a class="cke_dialog_tab"',ag._.pageCount>0?' cke_last':'cke_first',W,!!U.hidden?' style="display:none"':'',' id="',ab,'"',aa.gecko&&aa.version>=10900&&!aa.hc?'':' href="javascript:void(0)"',' tabIndex="-1"',' hidefocus="true"',' role="tab">',U.label,'</a>'].join(''));Z.setAttribute('aria-labelledby',ab);ag._.tabs[U.id]=[ac,Z];ag._.tabIdList.push(U.id);!U.hidden&&ag._.pageCount++;ag._.lastTab=ac;ag.updateStyle();var ad=ag._.contents[U.id]={},ae,af=Y.getChild();while(ae=af.shift()){ad[ae.id]=ae;if(typeof ae.getChild=='function')af.push.apply(af,ae.getChild());}Z.setAttribute('name',U.id);Z.appendTo(ag.parts.contents);ac.unselectable();ag.parts.tabs.append(ac);if(U.accessKey){O(ag,ag,'CTRL+'+U.accessKey,R,Q);ag._.accessKeyMap['CTRL+'+U.accessKey]=U.id;}},selectPage:function(U){if(this._.currentTabId==U)return;if(this.fire('selectPage',{page:U,currentPage:this._.currentTabId})===true)return;for(var V in this._.tabs){var W=this._.tabs[V][0],X=this._.tabs[V][1];if(V!=U){W.removeClass('cke_dialog_tab_selected');X.hide();}X.setAttribute('aria-hidden',V!=U);}var Y=this._.tabs[U];Y[0].addClass('cke_dialog_tab_selected');if(g.ie6Compat||g.ie7Compat){v(Y[1]);Y[1].show();setTimeout(function(){v(Y[1],1);},0);}else Y[1].show();this._.currentTabId=U;this._.currentTabIndex=j.indexOf(this._.tabIdList,U);},updateStyle:function(){this.parts.dialog[(this._.pageCount===1?'add':'remove')+'Class']('cke_single_page');},hidePage:function(U){var W=this;var V=W._.tabs[U]&&W._.tabs[U][0];if(!V||W._.pageCount==1)return;else if(U==W._.currentTabId)W.selectPage(t.call(W));V.hide();W._.pageCount--;W.updateStyle();},showPage:function(U){var W=this;var V=W._.tabs[U]&&W._.tabs[U][0];if(!V)return;V.show();W._.pageCount++;W.updateStyle();},getElement:function(){return this._.element;},getName:function(){return this._.name;},getContentElement:function(U,V){var W=this._.contents[U];return W&&W[V];},getValueOf:function(U,V){return this.getContentElement(U,V).getValue();},setValueOf:function(U,V,W){return this.getContentElement(U,V).setValue(W);},getButton:function(U){return this._.buttons[U];},click:function(U){return this._.buttons[U].click();},disableButton:function(U){return this._.buttons[U].disable();},enableButton:function(U){return this._.buttons[U].enable();},getPageCount:function(){return this._.pageCount;},getParentEditor:function(){return this._.editor;},getSelectedElement:function(){return this.getParentEditor().getSelection().getSelectedElement();
},addFocusable:function(U,V){var X=this;if(typeof V=='undefined'){V=X._.focusList.length;X._.focusList.push(new w(X,U,V));}else{X._.focusList.splice(V,0,new w(X,U,V));for(var W=V+1;W<X._.focusList.length;W++)X._.focusList[W].focusIndex++;}}};j.extend(f.dialog,{add:function(U,V){if(!this._.dialogDefinitions[U]||typeof V=='function')this._.dialogDefinitions[U]=V;},exists:function(U){return!!this._.dialogDefinitions[U];},getCurrent:function(){return f.dialog._.currentTop;},okButton:(function(){var U=function(V,W){W=W||{};return j.extend({id:'ok',type:'button',label:V.lang.common.ok,'class':'cke_dialog_ui_button_ok',onClick:function(X){var Y=X.data.dialog;if(Y.fire('ok',{hide:true}).hide!==false)Y.hide();}},W,true);};U.type='button';U.override=function(V){return j.extend(function(W){return U(W,V);},{type:'button'},true);};return U;})(),cancelButton:(function(){var U=function(V,W){W=W||{};return j.extend({id:'cancel',type:'button',label:V.lang.common.cancel,'class':'cke_dialog_ui_button_cancel',onClick:function(X){var Y=X.data.dialog;if(Y.fire('cancel',{hide:true}).hide!==false)Y.hide();}},W,true);};U.type='button';U.override=function(V){return j.extend(function(W){return U(W,V);},{type:'button'},true);};return U;})(),addUIElement:function(U,V){this._.uiElementBuilders[U]=V;}});f.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null};f.event.implementOn(f.dialog);f.event.implementOn(f.dialog.prototype,true);var x={resizable:3,minWidth:600,minHeight:400,buttons:[f.dialog.okButton,f.dialog.cancelButton]};g.mac&&x.buttons.reverse();var y=function(U,V,W){for(var X=0,Y;Y=U[X];X++){if(Y.id==V)return Y;if(W&&Y[W]){var Z=y(Y[W],V,W);if(Z)return Z;}}return null;},z=function(U,V,W,X,Y){if(W){for(var Z=0,aa;aa=U[Z];Z++){if(aa.id==W){U.splice(Z,0,V);return V;}if(X&&aa[X]){var ab=z(aa[X],V,W,X,true);if(ab)return ab;}}if(Y)return null;}U.push(V);return V;},A=function(U,V,W){for(var X=0,Y;Y=U[X];X++){if(Y.id==V)return U.splice(X,1);if(W&&Y[W]){var Z=A(Y[W],V,W);if(Z)return Z;}}return null;},B=function(U,V){this.dialog=U;var W=V.contents;for(var X=0,Y;Y=W[X];X++)W[X]=Y&&new C(U,Y);j.extend(this,V);};B.prototype={getContents:function(U){return y(this.contents,U);},getButton:function(U){return y(this.buttons,U);},addContents:function(U,V){return z(this.contents,U,V);},addButton:function(U,V){return z(this.buttons,U,V);},removeContents:function(U){A(this.contents,U);},removeButton:function(U){A(this.buttons,U);}};function C(U,V){this._={dialog:U};j.extend(this,V);
};C.prototype={get:function(U){return y(this.elements,U,'children');},add:function(U,V){return z(this.elements,U,V,'children');},remove:function(U){A(this.elements,U,'children');}};function D(U){var V=null,W=null,X=U.getElement().getFirst(),Y=U.getParentEditor(),Z=Y.config.dialog_magnetDistance,aa=Y.skin.margins||[0,0,0,0];if(typeof Z=='undefined')Z=20;function ab(ad){var ae=U.getSize(),af=f.document.getWindow().getViewPaneSize(),ag=ad.data.$.screenX,ah=ad.data.$.screenY,ai=ag-V.x,aj=ah-V.y,ak,al;V={x:ag,y:ah};W.x+=ai;W.y+=aj;if(W.x+aa[3]<Z)ak=-aa[3];else if(W.x-aa[1]>af.width-ae.width-Z)ak=af.width-ae.width+aa[1];else ak=W.x;if(W.y+aa[0]<Z)al=-aa[0];else if(W.y-aa[2]>af.height-ae.height-Z)al=af.height-ae.height+aa[2];else al=W.y;U.move(ak,al);ad.data.preventDefault();};function ac(ad){f.document.removeListener('mousemove',ab);f.document.removeListener('mouseup',ac);if(g.ie6Compat){var ae=H.getChild(0).getFrameDocument();ae.removeListener('mousemove',ab);ae.removeListener('mouseup',ac);}};U.parts.title.on('mousedown',function(ad){U._.updateSize=true;V={x:ad.data.$.screenX,y:ad.data.$.screenY};f.document.on('mousemove',ab);f.document.on('mouseup',ac);W=U.getPosition();if(g.ie6Compat){var ae=H.getChild(0).getFrameDocument();ae.on('mousemove',ab);ae.on('mouseup',ac);}ad.data.preventDefault();},U);};function E(U){var V=U.definition,W=V.minWidth||0,X=V.minHeight||0,Y=V.resizable,Z=U.getParentEditor().skin.margins||[0,0,0,0];function aa(al,am){al.y+=am;};function ab(al,am){al.x2+=am;};function ac(al,am){al.y2+=am;};function ad(al,am){al.x+=am;};var ae=null,af=null,ag=U._.editor.config.magnetDistance,ah=['tl','t','tr','l','r','bl','b','br'];function ai(al){var am=al.listenerData.part,an=U.getSize();af=U.getPosition();j.extend(af,{x2:af.x+an.width,y2:af.y+an.height});ae={x:al.data.$.screenX,y:al.data.$.screenY};f.document.on('mousemove',aj,U,{part:am});f.document.on('mouseup',ak,U,{part:am});if(g.ie6Compat){var ao=H.getChild(0).getFrameDocument();ao.on('mousemove',aj,U,{part:am});ao.on('mouseup',ak,U,{part:am});}al.data.preventDefault();};function aj(al){var am=al.data.$.screenX,an=al.data.$.screenY,ao=am-ae.x,ap=an-ae.y,aq=f.document.getWindow().getViewPaneSize(),ar=al.listenerData.part;if(ar.search('t')!=-1)aa(af,ap);if(ar.search('l')!=-1)ad(af,ao);if(ar.search('b')!=-1)ac(af,ap);if(ar.search('r')!=-1)ab(af,ao);ae={x:am,y:an};var as,at,au,av;if(af.x+Z[3]<ag)as=-Z[3];else if(ar.search('l')!=-1&&af.x2-af.x<W+ag)as=af.x2-W;else as=af.x;if(af.y+Z[0]<ag)at=-Z[0];else if(ar.search('t')!=-1&&af.y2-af.y<X+ag)at=af.y2-X;
else at=af.y;if(af.x2-Z[1]>aq.width-ag)au=aq.width+Z[1];else if(ar.search('r')!=-1&&af.x2-af.x<W+ag)au=af.x+W;else au=af.x2;if(af.y2-Z[2]>aq.height-ag)av=aq.height+Z[2];else if(ar.search('b')!=-1&&af.y2-af.y<X+ag)av=af.y+X;else av=af.y2;U.move(as,at);U.resize(au-as,av-at);al.data.preventDefault();};function ak(al){f.document.removeListener('mouseup',ak);f.document.removeListener('mousemove',aj);if(g.ie6Compat){var am=H.getChild(0).getFrameDocument();am.removeListener('mouseup',ak);am.removeListener('mousemove',aj);}};};var F,G={},H;function I(U){var V=f.document.getWindow(),W=U.config,X=W.dialog_backgroundCoverColor||'white',Y=W.dialog_backgroundCoverOpacity,Z=W.baseFloatZIndex,aa=j.genKey(X,Y,Z),ab=G[aa];if(!ab){var ac=['<div style="position: ',g.ie6Compat?'absolute':'fixed','; z-index: ',Z,'; top: 0px; left: 0px; ',!g.ie6Compat?'background-color: '+X:'','" class="cke_dialog_background_cover">'];if(g.ie6Compat){var ad=g.isCustomDomain(),ae="<html><body style=\\'background-color:"+X+";\\'></body></html>";ac.push('<iframe hidefocus="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:');ac.push('void((function(){document.open();'+(ad?"document.domain='"+document.domain+"';":'')+"document.write( '"+ae+"' );"+'document.close();'+'})())');ac.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>');}ac.push('</div>');ab=m.createFromHtml(ac.join(''));ab.setOpacity(Y!=undefined?Y:0.5);ab.appendTo(f.document.getBody());G[aa]=ab;}else ab.show();H=ab;var af=function(){var ai=V.getViewPaneSize();ab.setStyles({width:ai.width+'px',height:ai.height+'px'});},ag=function(){var ai=V.getScrollPosition(),aj=f.dialog._.currentTop;ab.setStyles({left:ai.x+'px',top:ai.y+'px'});do{var ak=aj.getPosition();aj.move(ak.x,ak.y);}while(aj=aj._.parentDialog)};F=af;V.on('resize',af);af();if(g.ie6Compat){var ah=function(){ag();arguments.callee.prevScrollHandler.apply(this,arguments);};V.$.setTimeout(function(){ah.prevScrollHandler=window.onscroll||(function(){});window.onscroll=ah;},0);ag();}};function J(){if(!H)return;var U=f.document.getWindow();H.hide();U.removeListener('resize',F);if(g.ie6Compat)U.$.setTimeout(function(){var V=window.onscroll&&window.onscroll.prevScrollHandler;window.onscroll=V||null;},0);F=null;};function K(){for(var U in G)G[U].remove();G={};};var L={},M=function(U){var V=U.data.$.ctrlKey||U.data.$.metaKey,W=U.data.$.altKey,X=U.data.$.shiftKey,Y=String.fromCharCode(U.data.$.keyCode),Z=L[(V?'CTRL+':'')+(W?'ALT+':'')+(X?'SHIFT+':'')+Y];
if(!Z||!Z.length)return;Z=Z[Z.length-1];Z.keydown&&Z.keydown.call(Z.uiElement,Z.dialog,Z.key);U.data.preventDefault();},N=function(U){var V=U.data.$.ctrlKey||U.data.$.metaKey,W=U.data.$.altKey,X=U.data.$.shiftKey,Y=String.fromCharCode(U.data.$.keyCode),Z=L[(V?'CTRL+':'')+(W?'ALT+':'')+(X?'SHIFT+':'')+Y];if(!Z||!Z.length)return;Z=Z[Z.length-1];if(Z.keyup){Z.keyup.call(Z.uiElement,Z.dialog,Z.key);U.data.preventDefault();}},O=function(U,V,W,X,Y){var Z=L[W]||(L[W]=[]);Z.push({uiElement:U,dialog:V,key:W,keyup:Y||U.accessKeyUp,keydown:X||U.accessKeyDown});},P=function(U){for(var V in L){var W=L[V];for(var X=W.length-1;X>=0;X--){if(W[X].dialog==U||W[X].uiElement==U)W.splice(X,1);}if(W.length===0)delete L[V];}},Q=function(U,V){if(U._.accessKeyMap[V])U.selectPage(U._.accessKeyMap[V]);},R=function(U,V){},S={27:1,13:1},T=function(U){if(U.data.getKeystroke() in S)U.data.stopPropagation();};(function(){p.dialog={uiElement:function(U,V,W,X,Y,Z,aa){if(arguments.length<4)return;var ab=(X.call?X(V):X)||'div',ac=['<',ab,' '],ad=(Y&&Y.call?Y(V):Y)||{},ae=(Z&&Z.call?Z(V):Z)||{},af=(aa&&aa.call?aa.call(this,U,V):aa)||'',ag=this.domId=ae.id||j.getNextId()+'_uiElement',ah=this.id=V.id,ai;ae.id=ag;var aj={};if(V.type)aj['cke_dialog_ui_'+V.type]=1;if(V.className)aj[V.className]=1;var ak=ae['class']&&ae['class'].split?ae['class'].split(' '):[];for(ai=0;ai<ak.length;ai++){if(ak[ai])aj[ak[ai]]=1;}var al=[];for(ai in aj)al.push(ai);ae['class']=al.join(' ');if(V.title)ae.title=V.title;var am=(V.style||'').split(';');for(ai in ad)am.push(ai+':'+ad[ai]);if(V.hidden)am.push('display:none');for(ai=am.length-1;ai>=0;ai--){if(am[ai]==='')am.splice(ai,1);}if(am.length>0)ae.style=(ae.style?ae.style+'; ':'')+am.join('; ');for(ai in ae)ac.push(ai+'="'+j.htmlEncode(ae[ai])+'" ');ac.push('>',af,'</',ab,'>');W.push(ac.join(''));(this._||(this._={})).dialog=U;if(typeof V.isChanged=='boolean')this.isChanged=function(){return V.isChanged;};if(typeof V.isChanged=='function')this.isChanged=V.isChanged;f.event.implementOn(this);this.registerEvents(V);if(this.accessKeyUp&&this.accessKeyDown&&V.accessKey)O(this,U,'CTRL+'+V.accessKey);var an=this;U.on('load',function(){if(an.getInputElement())an.getInputElement().on('focus',function(){U._.tabBarMode=false;U._.hasFocus=true;an.fire('focus');},an);});if(this.keyboardFocusable){this.tabIndex=V.tabIndex||0;this.focusIndex=U._.focusList.push(this)-1;this.on('focus',function(){U._.currentFocusIndex=an.focusIndex;});}j.extend(this,V);},hbox:function(U,V,W,X,Y){if(arguments.length<4)return;
this._||(this._={});var Z=this._.children=V,aa=Y&&Y.widths||null,ab=Y&&Y.height||null,ac={},ad,ae=function(){var ag=['<tbody><tr class="cke_dialog_ui_hbox">'];for(ad=0;ad<W.length;ad++){var ah='cke_dialog_ui_hbox_child',ai=[];if(ad===0)ah='cke_dialog_ui_hbox_first';if(ad==W.length-1)ah='cke_dialog_ui_hbox_last';ag.push('<td class="',ah,'" role="presentation" ');if(aa){if(aa[ad])ai.push('width:'+r(aa[ad]));}else ai.push('width:'+Math.floor(100/W.length)+'%');if(ab)ai.push('height:'+r(ab));if(Y&&Y.padding!=undefined)ai.push('padding:'+r(Y.padding));if(ai.length>0)ag.push('style="'+ai.join('; ')+'" ');ag.push('>',W[ad],'</td>');}ag.push('</tr></tbody>');return ag.join('');},af={role:'presentation'};Y&&Y.align&&(af.align=Y.align);p.dialog.uiElement.call(this,U,Y||{type:'hbox'},X,'table',ac,af,ae);},vbox:function(U,V,W,X,Y){if(arguments.length<3)return;this._||(this._={});var Z=this._.children=V,aa=Y&&Y.width||null,ab=Y&&Y.heights||null,ac=function(){var ad=['<table role="presentation" cellspacing="0" border="0" '];ad.push('style="');if(Y&&Y.expand)ad.push('height:100%;');ad.push('width:'+r(aa||'100%'),';');ad.push('"');ad.push('align="',j.htmlEncode(Y&&Y.align||(U.getParentEditor().lang.dir=='ltr'?'left':'right')),'" ');ad.push('><tbody>');for(var ae=0;ae<W.length;ae++){var af=[];ad.push('<tr><td role="presentation" ');if(aa)af.push('width:'+r(aa||'100%'));if(ab)af.push('height:'+r(ab[ae]));else if(Y&&Y.expand)af.push('height:'+Math.floor(100/W.length)+'%');if(Y&&Y.padding!=undefined)af.push('padding:'+r(Y.padding));if(af.length>0)ad.push('style="',af.join('; '),'" ');ad.push(' class="cke_dialog_ui_vbox_child">',W[ae],'</td></tr>');}ad.push('</tbody></table>');return ad.join('');};p.dialog.uiElement.call(this,U,Y||{type:'vbox'},X,'div',null,{role:'presentation'},ac);}};})();p.dialog.uiElement.prototype={getElement:function(){return f.document.getById(this.domId);},getInputElement:function(){return this.getElement();},getDialog:function(){return this._.dialog;},setValue:function(U,V){this.getInputElement().setValue(U);!V&&this.fire('change',{value:U});return this;},getValue:function(){return this.getInputElement().getValue();},isChanged:function(){return false;},selectParentTab:function(){var X=this;var U=X.getInputElement(),V=U,W;while((V=V.getParent())&&V.$.className.search('cke_dialog_page_contents')==-1){}if(!V)return X;W=V.getAttribute('name');if(X._.dialog._.currentTabId!=W)X._.dialog.selectPage(W);return X;},focus:function(){this.selectParentTab().getInputElement().focus();
return this;},registerEvents:function(U){var V=/^on([A-Z]\w+)/,W,X=function(Z,aa,ab,ac){aa.on('load',function(){Z.getInputElement().on(ab,ac,Z);});};for(var Y in U){if(!(W=Y.match(V)))continue;if(this.eventProcessors[Y])this.eventProcessors[Y].call(this,this._.dialog,U[Y]);else X(this,this._.dialog,W[1].toLowerCase(),U[Y]);}return this;},eventProcessors:{onLoad:function(U,V){U.on('load',V,this);},onShow:function(U,V){U.on('show',V,this);},onHide:function(U,V){U.on('hide',V,this);}},accessKeyDown:function(U,V){this.focus();},accessKeyUp:function(U,V){},disable:function(){var U=this.getInputElement();U.setAttribute('disabled','true');U.addClass('cke_disabled');},enable:function(){var U=this.getInputElement();U.removeAttribute('disabled');U.removeClass('cke_disabled');},isEnabled:function(){return!this.getInputElement().getAttribute('disabled');},isVisible:function(){return this.getInputElement().isVisible();},isFocusable:function(){if(!this.isEnabled()||!this.isVisible())return false;return true;}};p.dialog.hbox.prototype=j.extend(new p.dialog.uiElement(),{getChild:function(U){var V=this;if(arguments.length<1)return V._.children.concat();if(!U.splice)U=[U];if(U.length<2)return V._.children[U[0]];else return V._.children[U[0]]&&V._.children[U[0]].getChild?V._.children[U[0]].getChild(U.slice(1,U.length)):null;}},true);p.dialog.vbox.prototype=new p.dialog.hbox();(function(){var U={build:function(V,W,X){var Y=W.children,Z,aa=[],ab=[];for(var ac=0;ac<Y.length&&(Z=Y[ac]);ac++){var ad=[];aa.push(ad);ab.push(f.dialog._.uiElementBuilders[Z.type].build(V,Z,ad));}return new p.dialog[W.type](V,ab,aa,X,W);}};f.dialog.addUIElement('hbox',U);f.dialog.addUIElement('vbox',U);})();f.dialogCommand=function(U){this.dialogName=U;};f.dialogCommand.prototype={exec:function(U){U.openDialog(this.dialogName);},canUndo:false,editorFocus:h||g.webkit};(function(){var U=/^([a]|[^a])+$/,V=/^\d*$/,W=/^\d*(?:\.\d+)?$/;f.VALIDATE_OR=1;f.VALIDATE_AND=2;f.dialog.validate={functions:function(){return function(){var ad=this;var X=ad&&ad.getValue?ad.getValue():arguments[0],Y=undefined,Z=2,aa=[],ab;for(ab=0;ab<arguments.length;ab++){if(typeof arguments[ab]=='function')aa.push(arguments[ab]);else break;}if(ab<arguments.length&&typeof arguments[ab]=='string'){Y=arguments[ab];ab++;}if(ab<arguments.length&&typeof arguments[ab]=='number')Z=arguments[ab];var ac=Z==2?true:false;for(ab=0;ab<aa.length;ab++){if(Z==2)ac=ac&&aa[ab](X);else ac=ac||aa[ab](X);}if(!ac){if(Y!==undefined)alert(Y);if(ad&&(ad.select||ad.focus))ad.select||ad.focus();
return false;}return true;};},regex:function(X,Y){return function(){var aa=this;var Z=aa&&aa.getValue?aa.getValue():arguments[0];if(!X.test(Z)){if(Y!==undefined)alert(Y);if(aa&&(aa.select||aa.focus))if(aa.select)aa.select();else aa.focus();return false;}return true;};},notEmpty:function(X){return this.regex(U,X);},integer:function(X){return this.regex(V,X);},number:function(X){return this.regex(W,X);},equals:function(X,Y){return this.functions(function(Z){return Z==X;},Y);},notEqual:function(X,Y){return this.functions(function(Z){return Z!=X;},Y);}};f.on('instanceDestroyed',function(X){if(j.isEmpty(f.instances)){var Y;while(Y=f.dialog._.currentTop)Y.hide();K();}var Z=X.editor._.storedDialogs;for(var aa in Z)Z[aa].destroy();});})();})();j.extend(f.editor.prototype,{openDialog:function(r,s){var t=f.dialog._.dialogDefinitions[r],u=this.skin.dialog;if(typeof t=='function'&&u._isLoaded){var v=this._.storedDialogs||(this._.storedDialogs={}),w=v[r]||(v[r]=new f.dialog(this,r));s&&s.call(w,w);w.show();return w;}else if(t=='failed')throw new Error('[CKEDITOR.dialog.openDialog] Dialog "'+r+'" failed when loading definition.');var x=f.document.getBody(),y=x.$.style.cursor,z=this;x.setStyle('cursor','wait');function A(C){var D=f.dialog._.dialogDefinitions[r],E=z.skin.dialog;if(!E._isLoaded||B&&typeof C=='undefined')return;if(typeof D!='function')f.dialog._.dialogDefinitions[r]='failed';z.openDialog(r,s);x.setStyle('cursor',y);};if(typeof t=='string'){var B=1;f.scriptLoader.load(f.getUrl(t),A);}f.skins.load(this,'dialog',A);return null;}});o.add('dialog',{requires:['dialogui']});o.add('styles',{requires:['selection']});f.editor.prototype.attachStyleStateChange=function(r,s){var t=this._.styleStateChangeCallbacks;if(!t){t=this._.styleStateChangeCallbacks=[];this.on('selectionChange',function(u){for(var v=0;v<t.length;v++){var w=t[v],x=w.style.checkActive(u.data.path)?1:2;if(w.state!==x){w.fn.call(this,x);w.state=x;}}});}t.push({style:r,fn:s});};f.STYLE_BLOCK=1;f.STYLE_INLINE=2;f.STYLE_OBJECT=3;(function(){var r={address:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1},s={a:1,embed:1,hr:1,img:1,li:1,object:1,ol:1,table:1,td:1,tr:1,th:1,ul:1,dl:1,dt:1,dd:1,form:1},t=/\s*(?:;\s*|$)/;f.style=function(V,W){if(W){V=j.clone(V);N(V.attributes,W);N(V.styles,W);}var X=this.element=(V.element||'*').toLowerCase();this.type=X=='#'||r[X]?1:s[X]?3:2;this._={definition:V};};f.style.prototype={apply:function(V){U.call(this,V,false);},remove:function(V){U.call(this,V,true);},applyToRange:function(V){var W=this;
return(W.applyToRange=W.type==2?u:W.type==1?y:W.type==3?w:null).call(W,V);},removeFromRange:function(V){var W=this;return(W.removeFromRange=W.type==2?v:W.type==3?x:null).call(W,V);},applyToObject:function(V){L(V,this);},checkActive:function(V){var Z=this;switch(Z.type){case 1:return Z.checkElementRemovable(V.block||V.blockLimit,true);case 3:case 2:var W=V.elements;for(var X=0,Y;X<W.length;X++){Y=W[X];if(Z.type==2&&(Y==V.block||Y==V.blockLimit))continue;if(Z.type==3&&!(Y.getName() in s))continue;if(Z.checkElementRemovable(Y,true))return true;}}return false;},checkApplicable:function(V){switch(this.type){case 2:case 1:break;case 3:return V.lastElement.getAscendant(this.element,true);}return true;},checkElementRemovable:function(V,W){if(!V)return false;var X=this._.definition,Y;if(V.getName()==this.element){if(!W&&!V.hasAttributes())return true;Y=O(X);if(Y._length){for(var Z in Y){if(Z=='_length')continue;var aa=V.getAttribute(Z)||'';if(Z=='style'?T(Y[Z],R(aa,false)):Y[Z]==aa){if(!W)return true;}else if(W)return false;}if(W)return true;}else return true;}var ab=P(this)[V.getName()];if(ab){if(!(Y=ab.attributes))return true;for(var ac=0;ac<Y.length;ac++){Z=Y[ac][0];var ad=V.getAttribute(Z);if(ad){var ae=Y[ac][1];if(ae===null||typeof ae=='string'&&ad==ae||ae.test(ad))return true;}}}return false;},buildPreview:function(){var V=this._.definition,W=[],X=V.element;if(X=='bdo')X='span';W=['<',X];var Y=V.attributes;if(Y)for(var Z in Y)W.push(' ',Z,'="',Y[Z],'"');var aa=f.style.getStyleText(V);if(aa)W.push(' style="',aa,'"');W.push('>',V.name,'</',X,'>');return W.join('');}};f.style.getStyleText=function(V){var W=V._ST;if(W)return W;W=V.styles;var X=V.attributes&&V.attributes.style||'',Y='';if(X.length)X=X.replace(t,';');for(var Z in W){var aa=W[Z],ab=(Z+':'+aa).replace(t,';');if(aa=='inherit')Y+=ab;else X+=ab;}if(X.length)X=R(X);X+=Y;return V._ST=X;};function u(V){var au=this;var W=V.document;if(V.collapsed){var X=K(au,W);V.insertNode(X);V.moveToPosition(X,2);return;}var Y=au.element,Z=au._.definition,aa,ab=k[Y]||(aa=true,k.span);V.enlarge(1);V.trim();var ac=V.createBookmark(),ad=ac.startNode,ae=ac.endNode,af=ad,ag;while(af){var ah=false;if(af.equals(ae)){af=null;ah=true;}else{var ai=af.type,aj=ai==1?af.getName():null;if(aj&&af.getAttribute('_cke_bookmark')){af=af.getNextSourceNode(true);continue;}if(!aj||ab[aj]&&(af.getPosition(ae)|4|0|8)==4+0+8&&(!Z.childRule||Z.childRule(af))){var ak=af.getParent();if(ak&&((ak.getDtd()||k.span)[Y]||aa)&&(!Z.parentRule||Z.parentRule(ak))){if(!ag&&(!aj||!k.$removeEmpty[aj]||(af.getPosition(ae)|4|0|8)==4+0+8)){ag=new i.range(W);
ag.setStartBefore(af);}if(ai==3||ai==1&&!af.getChildCount()){var al=af,am;while(!al.$.nextSibling&&(am=al.getParent(),ab[am.getName()])&&(am.getPosition(ad)|2|0|8)==2+0+8&&(!Z.childRule||Z.childRule(am)))al=am;ag.setEndAfter(al);if(!al.$.nextSibling)ah=true;}}else ah=true;}else ah=true;af=af.getNextSourceNode();}if(ah&&ag&&!ag.collapsed){var an=K(au,W),ao=an.hasAttributes(),ap=ag.getCommonAncestor(),aq={styles:{},attrs:{},blockedStyles:{},blockedAttrs:{}},ar,as,at;while(an&&ap){if(ap.getName()==Y){for(ar in Z.attributes){if(aq.blockedAttrs[ar]||!(at=ap.getAttribute(as)))continue;if(an.getAttribute(ar)==at)aq.attrs[ar]=1;else aq.blockedAttrs[ar]=1;}for(as in Z.styles){if(aq.blockedStyles[as]||!(at=ap.getStyle(as)))continue;if(an.getStyle(as)==at)aq.styles[as]=1;else aq.blockedStyles[as]=1;}}ap=ap.getParent();}for(ar in aq.attrs)an.removeAttribute(ar);for(as in aq.styles)an.removeStyle(as);if(ao&&!an.hasAttributes())an=null;if(an){ag.extractContents().appendTo(an);H(au,an);ag.insertNode(an);an.mergeSiblings();if(!h)an.$.normalize();}else{an=new m('span');ag.extractContents().appendTo(an);ag.insertNode(an);H(au,an);an.remove(true);}ag=null;}}V.moveToBookmark(ac);V.shrink(2);};function v(V){V.enlarge(1);var W=V.createBookmark(),X=W.startNode;if(V.collapsed){var Y=new i.elementPath(X.getParent()),Z;for(var aa=0,ab;aa<Y.elements.length&&(ab=Y.elements[aa]);aa++){if(ab==Y.block||ab==Y.blockLimit)break;if(this.checkElementRemovable(ab)){var ac;if(V.collapsed&&(V.checkBoundaryOfElement(ab,2)||(ac=V.checkBoundaryOfElement(ab,1)))){Z=ab;Z.match=ac?'start':'end';}else{ab.mergeSiblings();G(this,ab);}}}if(Z){var ad=X;for(aa=0;true;aa++){var ae=Y.elements[aa];if(ae.equals(Z))break;else if(ae.match)continue;else ae=ae.clone();ae.append(ad);ad=ae;}ad[Z.match=='start'?'insertBefore':'insertAfter'](Z);}}else{var af=W.endNode,ag=this;function ah(){var ak=new i.elementPath(X.getParent()),al=new i.elementPath(af.getParent()),am=null,an=null;for(var ao=0;ao<ak.elements.length;ao++){var ap=ak.elements[ao];if(ap==ak.block||ap==ak.blockLimit)break;if(ag.checkElementRemovable(ap))am=ap;}for(ao=0;ao<al.elements.length;ao++){ap=al.elements[ao];if(ap==al.block||ap==al.blockLimit)break;if(ag.checkElementRemovable(ap))an=ap;}if(an)af.breakParent(an);if(am)X.breakParent(am);};ah();var ai=X.getNext();while(!ai.equals(af)){var aj=ai.getNextSourceNode();if(ai.type==1&&this.checkElementRemovable(ai)){if(ai.getName()==this.element)G(this,ai);else I(ai,P(this)[ai.getName()]);if(aj.type==1&&aj.contains(X)){ah();
aj=X.getNext();}}ai=aj;}}V.moveToBookmark(W);};function w(V){var W=V.getCommonAncestor(true,true),X=W.getAscendant(this.element,true);X&&L(X,this);};function x(V){var W=V.getCommonAncestor(true,true),X=W.getAscendant(this.element,true);if(!X)return;var Y=this,Z=Y._.definition,aa=Z.attributes,ab=f.style.getStyleText(Z);if(aa)for(var ac in aa)X.removeAttribute(ac,aa[ac]);if(Z.styles)for(var ad in Z.styles){if(!Z.styles.hasOwnProperty(ad))continue;X.removeStyle(ad);}};function y(V){var W=V.createBookmark(true),X=V.createIterator();X.enforceRealBlocks=true;if(this._.enterMode)X.enlargeBr=this._.enterMode!=2;var Y,Z=V.document,aa;while(Y=X.getNextParagraph()){var ab=K(this,Z,Y);z(Y,ab);}V.moveToBookmark(W);};function z(V,W){var X=W.is('pre'),Y=V.is('pre'),Z=X&&!Y,aa=!X&&Y;if(Z)W=F(V,W);else if(aa)W=E(C(V),W);else V.moveChildren(W);W.replace(V);if(X)B(W);};var A=i.walker.whitespaces(true);function B(V){var W;if(!((W=V.getPrevious(A))&&W.is&&W.is('pre')))return;var X=D(W.getHtml(),/\n$/,'')+'\n\n'+D(V.getHtml(),/^\n/,'');if(h)V.$.outerHTML='<pre>'+X+'</pre>';else V.setHtml(X);W.remove();};function C(V){var W=/(\S\s*)\n(?:\s|(<span[^>]+_cke_bookmark.*?\/span>))*\n(?!$)/gi,X=V.getName(),Y=D(V.getOuterHtml(),W,function(aa,ab,ac){return ab+'</pre>'+ac+'<pre>';}),Z=[];Y.replace(/<pre\b.*?>([\s\S]*?)<\/pre>/gi,function(aa,ab){Z.push(ab);});return Z;};function D(V,W,X){var Y='',Z='';V=V.replace(/(^<span[^>]+_cke_bookmark.*?\/span>)|(<span[^>]+_cke_bookmark.*?\/span>$)/gi,function(aa,ab,ac){ab&&(Y=ab);ac&&(Z=ac);return '';});return Y+V.replace(W,X)+Z;};function E(V,W){var X=new i.documentFragment(W.getDocument());for(var Y=0;Y<V.length;Y++){var Z=V[Y];Z=Z.replace(/(\r\n|\r)/g,'\n');Z=D(Z,/^[ \t]*\n/,'');Z=D(Z,/\n$/,'');Z=D(Z,/^[ \t]+|[ \t]+$/g,function(ab,ac,ad){if(ab.length==1)return '&nbsp;';else if(!ac)return j.repeat('&nbsp;',ab.length-1)+' ';else return ' '+j.repeat('&nbsp;',ab.length-1);});Z=Z.replace(/\n/g,'<br>');Z=Z.replace(/[ \t]{2,}/g,function(ab){return j.repeat('&nbsp;',ab.length-1)+' ';});var aa=W.clone();aa.setHtml(Z);X.append(aa);}return X;};function F(V,W){var X=V.getHtml();X=D(X,/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,'');X=X.replace(/[ \t\r\n]*(<br[^>]*>)[ \t\r\n]*/gi,'$1');X=X.replace(/([ \t\n\r]+|&nbsp;)/g,' ');X=X.replace(/<br\b[^>]*>/gi,'\n');if(h){var Y=V.getDocument().createElement('div');Y.append(W);W.$.outerHTML='<pre>'+X+'</pre>';W=Y.getFirst().remove();}else W.setHtml(X);return W;};function G(V,W){var X=V._.definition,Y=j.extend({},X.attributes,P(V)[W.getName()]),Z=X.styles,aa=j.isEmpty(Y)&&j.isEmpty(Z);
for(var ab in Y){if((ab=='class'||V._.definition.fullMatch)&&W.getAttribute(ab)!=Q(ab,Y[ab]))continue;aa=W.hasAttribute(ab);W.removeAttribute(ab);}for(var ac in Z){if(V._.definition.fullMatch&&W.getStyle(ac)!=Q(ac,Z[ac],true))continue;aa=aa||!!W.getStyle(ac);W.removeStyle(ac);}aa&&J(W);};function H(V,W){var X=V._.definition,Y=X.attributes,Z=X.styles,aa=P(V),ab=W.getElementsByTag(V.element);for(var ac=ab.count();--ac>=0;)G(V,ab.getItem(ac));for(var ad in aa){if(ad!=V.element){ab=W.getElementsByTag(ad);for(ac=ab.count()-1;ac>=0;ac--){var ae=ab.getItem(ac);I(ae,aa[ad]);}}}};function I(V,W){var X=W&&W.attributes;if(X)for(var Y=0;Y<X.length;Y++){var Z=X[Y][0],aa;if(aa=V.getAttribute(Z)){var ab=X[Y][1];if(ab===null||ab.test&&ab.test(aa)||typeof ab=='string'&&aa==ab)V.removeAttribute(Z);}}J(V);};function J(V){if(!V.hasAttributes()){var W=V.getFirst(),X=V.getLast();V.remove(true);if(W){W.type==1&&W.mergeSiblings();if(X&&!W.equals(X)&&X.type==1)X.mergeSiblings();}}};function K(V,W,X){var Y,Z=V._.definition,aa=V.element;if(aa=='*')aa='span';Y=new m(aa,W);if(X)X.copyAttributes(Y);return L(Y,V);};function L(V,W){var X=W._.definition,Y=X.attributes,Z=f.style.getStyleText(X);if(Y)for(var aa in Y)V.setAttribute(aa,Y[aa]);if(Z)V.setAttribute('style',Z);return V;};var M=/#\((.+?)\)/g;function N(V,W){for(var X in V)V[X]=V[X].replace(M,function(Y,Z){return W[Z];});};function O(V){var W=V._AC;if(W)return W;W={};var X=0,Y=V.attributes;if(Y)for(var Z in Y){X++;W[Z]=Y[Z];}var aa=f.style.getStyleText(V);if(aa){if(!W.style)X++;W.style=aa;}W._length=X;return V._AC=W;};function P(V){if(V._.overrides)return V._.overrides;var W=V._.overrides={},X=V._.definition.overrides;if(X){if(!j.isArray(X))X=[X];for(var Y=0;Y<X.length;Y++){var Z=X[Y],aa,ab,ac;if(typeof Z=='string')aa=Z.toLowerCase();else{aa=Z.element?Z.element.toLowerCase():V.element;ac=Z.attributes;}ab=W[aa]||(W[aa]={});if(ac){var ad=ab.attributes=ab.attributes||[];for(var ae in ac)ad.push([ae.toLowerCase(),ac[ae]]);}}}return W;};function Q(V,W,X){var Y=new m('span');Y[X?'setStyle':'setAttribute'](V,W);return Y[X?'getStyle':'getAttribute'](V);};function R(V,W){var X;if(W!==false){var Y=new m('span');Y.setAttribute('style',V);X=Y.getAttribute('style')||'';}else X=V;return X.replace(/\s*([;:])\s*/,'$1').replace(/([^\s;])$/,'$1;').replace(/,\s+/g,',').replace(/\"/g,'').toLowerCase();};function S(V){var W={};V.replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(X,Y,Z){W[Y]=Z;});return W;};function T(V,W){typeof V=='string'&&(V=S(V));
typeof W=='string'&&(W=S(W));for(var X in V){if(!(X in W&&(W[X]==V[X]||V[X]=='inherit'||W[X]=='inherit')))return false;}return true;};function U(V,W){var X=V.getSelection(),Y=X.createBookmarks(1),Z=X.getRanges(1),aa=W?this.removeFromRange:this.applyToRange,ab,ac=Z.createIterator();while(ab=ac.getNextRange())aa.call(this,ab);if(Y.length==1&&Y[0].collapsed){X.selectRanges(Z);V.getById(Y[0].startNode).remove();}else X.selectBookmarks(Y);};})();f.styleCommand=function(r){this.style=r;};f.styleCommand.prototype.exec=function(r){var t=this;r.focus();var s=r.document;if(s)if(t.state==2)t.style.apply(s);else if(t.state==1)t.style.remove(s);return!!s;};f.stylesSet=new f.resourceManager('','stylesSet');f.addStylesSet=j.bind(f.stylesSet.add,f.stylesSet);f.loadStylesSet=function(r,s,t){f.stylesSet.addExternal(r,s,'');f.stylesSet.load(r,t);};f.editor.prototype.getStylesSet=function(r){if(!this._.stylesDefinitions){var s=this,t=s.config.stylesCombo_stylesSet||s.config.stylesSet||'default';if(t instanceof Array){s._.stylesDefinitions=t;r(t);return;}var u=t.split(':'),v=u[0],w=u[1],x=o.registered.styles.path;f.stylesSet.addExternal(v,w?u.slice(1).join(':'):x+'styles/'+v+'.js','');f.stylesSet.load(v,function(y){s._.stylesDefinitions=y[v];r(s._.stylesDefinitions);});}else r(this._.stylesDefinitions);};o.add('domiterator');(function(){function r(u){var v=this;if(arguments.length<1)return;v.range=u;v.forceBrBreak=0;v.enlargeBr=1;v.enforceRealBlocks=0;v._||(v._={});};var s=/^[\r\n\t ]+$/,t=i.walker.bookmark();r.prototype={getNextParagraph:function(u){var v,w,x,y,z,A;if(!this._.lastNode){w=this.range.clone();w.shrink(1,true);y=w.endContainer.hasAscendant('pre',true)||w.startContainer.hasAscendant('pre',true);w.enlarge(this.forceBrBreak&&!y||!this.enlargeBr?3:2);var B=new i.walker(w),C=i.walker.bookmark(true,true);B.evaluator=C;this._.nextNode=B.next();B=new i.walker(w);B.evaluator=C;var D=B.previous();this._.lastNode=D.getNextSourceNode(true);if(this._.lastNode&&this._.lastNode.type==3&&!j.trim(this._.lastNode.getText())&&this._.lastNode.getParent().isBlockBoundary()){var E=new i.range(w.document);E.moveToPosition(this._.lastNode,4);if(E.checkEndOfBlock()){var F=new i.elementPath(E.endContainer),G=F.block||F.blockLimit;this._.lastNode=G.getNextSourceNode(true);}}if(!this._.lastNode){this._.lastNode=this._.docEndMarker=w.document.createText('');this._.lastNode.insertAfter(D);}w=null;}var H=this._.nextNode;D=this._.lastNode;this._.nextNode=null;while(H){var I=0,J=H.hasAscendant('pre'),K=H.type!=1,L=0;
if(!K){var M=H.getName();if(H.isBlockBoundary(this.forceBrBreak&&!J&&{br:1})){if(M=='br')K=1;else if(!w&&!H.getChildCount()&&M!='hr'){v=H;x=H.equals(D);break;}if(w){w.setEndAt(H,3);if(M!='br')this._.nextNode=H;}I=1;}else{if(H.getFirst()){if(!w){w=new i.range(this.range.document);w.setStartAt(H,3);}H=H.getFirst();continue;}K=1;}}else if(H.type==3)if(s.test(H.getText()))K=0;if(K&&!w){w=new i.range(this.range.document);w.setStartAt(H,3);}x=(!I||K)&&H.equals(D);if(w&&!I)while(!H.getNext()&&!x){var N=H.getParent();if(N.isBlockBoundary(this.forceBrBreak&&!J&&{br:1})){I=1;x=x||N.equals(D);break;}H=N;K=1;x=H.equals(D);L=1;}if(K)w.setEndAt(H,4);H=H.getNextSourceNode(L,null,D);x=!H;if(x||I&&w)break;}if(!v){if(!w){this._.docEndMarker&&this._.docEndMarker.remove();this._.nextNode=null;return null;}var O=new i.elementPath(w.startContainer),P=O.blockLimit,Q={div:1,th:1,td:1};v=O.block;if(!v&&!this.enforceRealBlocks&&Q[P.getName()]&&w.checkStartOfBlock()&&w.checkEndOfBlock())v=P;else if(!v||this.enforceRealBlocks&&v.getName()=='li'){v=this.range.document.createElement(u||'p');w.extractContents().appendTo(v);v.trim();w.insertNode(v);z=A=true;}else if(v.getName()!='li'){if(!w.checkStartOfBlock()||!w.checkEndOfBlock()){v=v.clone(false);w.extractContents().appendTo(v);v.trim();var R=w.splitBlock();z=!R.wasStartOfBlock;A=!R.wasEndOfBlock;w.insertNode(v);}}else if(!x)this._.nextNode=v.equals(D)?null:w.getBoundaryNodes().endNode.getNextSourceNode(true,null,D);}var S=i.walker.bookmark(false,true);if(z){var T=v.getPrevious();if(T&&T.type==1)if(T.getName()=='br')T.remove();else if(T.getLast()&&T.getLast().$.nodeName.toLowerCase()=='br')T.getLast().remove();}if(A){var U=v.getLast();if(U&&U.type==1&&U.getName()=='br')if(h||U.getPrevious(S)||U.getNext(S))U.remove();}if(!this._.nextNode)this._.nextNode=x||v.equals(D)?null:v.getNextSourceNode(true,null,D);if(!S(this._.nextNode))this._.nextNode=this._.nextNode.getNextSourceNode(true,null,function(V){return!V.equals(D)&&S(V);});return v;}};i.range.prototype.createIterator=function(){return new r(this);};})();o.add('panelbutton',{requires:['button'],beforeInit:function(r){r.ui.addHandler(4,p.panelButton.handler);}});f.UI_PANELBUTTON=4;(function(){var r=function(s){var u=this;var t=u._;if(t.state==0)return;u.createPanel(s);if(t.on){t.panel.hide();return;}t.panel.showBlock(u._.id,u.document.getById(u._.id),4);};p.panelButton=j.createClass({base:p.button,$:function(s){var u=this;var t=s.panel;delete s.panel;u.base(s);u.document=t&&t.parent&&t.parent.getDocument()||f.document;
t.block={attributes:t.attributes};u.hasArrow=true;u.click=r;u._={panelDefinition:t};},statics:{handler:{create:function(s){return new p.panelButton(s);}}},proto:{createPanel:function(s){var t=this._;if(t.panel)return;var u=this._.panelDefinition||{},v=this._.panelDefinition.block,w=u.parent||f.document.getBody(),x=this._.panel=new p.floatPanel(s,w,u),y=x.addBlock(t.id,v),z=this;x.onShow=function(){if(z.className)this.element.getFirst().addClass(z.className+'_panel');t.oldState=z._.state;z.setState(1);t.on=1;if(z.onOpen)z.onOpen();};x.onHide=function(A){if(z.className)this.element.getFirst().removeClass(z.className+'_panel');z.setState(t.oldState);t.on=0;if(!A&&z.onClose)z.onClose();};x.onEscape=function(){x.hide();z.document.getById(t.id).focus();};if(this.onBlock)this.onBlock(x,y);y.onHide=function(){t.on=0;z.setState(2);};}}});})();o.add('floatpanel',{requires:['panel']});(function(){var r={},s=false;function t(u,v,w,x,y){var z=j.genKey(v.getUniqueId(),w.getUniqueId(),u.skinName,u.lang.dir,u.uiColor||'',x.css||'',y||''),A=r[z];if(!A){A=r[z]=new p.panel(v,x);A.element=w.append(m.createFromHtml(A.renderHtml(u),v));A.element.setStyles({display:'none',position:'absolute'});}return A;};p.floatPanel=j.createClass({$:function(u,v,w,x){w.forceIFrame=1;var y=v.getDocument(),z=t(u,y,v,w,x||0),A=z.element,B=A.getFirst().getFirst();this.element=A;this._={panel:z,parentElement:v,definition:w,document:y,iframe:B,children:[],dir:u.lang.dir};},proto:{addBlock:function(u,v){return this._.panel.addBlock(u,v);},addListBlock:function(u,v){return this._.panel.addListBlock(u,v);},getBlock:function(u){return this._.panel.getBlock(u);},showBlock:function(u,v,w,x,y){var z=this._.panel,A=z.showBlock(u);this.allowBlur(false);s=1;var B=this.element,C=this._.iframe,D=this._.definition,E=v.getDocumentPosition(B.getDocument()),F=this._.dir=='rtl',G=E.x+(x||0),H=E.y+(y||0);if(F&&(w==1||w==4))G+=v.$.offsetWidth;else if(!F&&(w==2||w==3))G+=v.$.offsetWidth-1;if(w==3||w==4)H+=v.$.offsetHeight-1;this._.panel._.offsetParentId=v.getId();B.setStyles({top:0,left:0,display:''});B.setOpacity(0);B.getFirst().removeStyle('width');if(!this._.blurSet){var I=h?C:new i.window(C.$.contentWindow);f.event.useCapture=true;I.on('blur',function(J){var L=this;if(!L.allowBlur())return;var K;if(h&&!L.allowBlur()||(K=J.data.getTarget())&&K.getName&&K.getName()!='iframe')return;if(L.visible&&!L._.activeChild&&!s)L.hide();},this);I.on('focus',function(){this._.focused=true;this.hideChild();this.allowBlur(true);},this);
f.event.useCapture=false;this._.blurSet=1;}z.onEscape=j.bind(function(J){if(this.onEscape&&this.onEscape(J)===false)return false;},this);j.setTimeout(function(){if(F)G-=B.$.offsetWidth;var J=j.bind(function(){var K=B.getFirst();if(A.autoSize){var L=A.element.$;if(g.gecko||g.opera)L=L.parentNode;if(h)L=L.document.body;var M=L.scrollWidth;if(h&&g.quirks&&M>0)M+=(K.$.offsetWidth||0)-(K.$.clientWidth||0);M+=4;K.setStyle('width',M+'px');A.element.addClass('cke_frameLoaded');var N=A.element.$.scrollHeight;if(h&&g.quirks&&N>0)N+=(K.$.offsetHeight||0)-(K.$.clientHeight||0);K.setStyle('height',N+'px');z._.currentBlock.element.setStyle('display','none').removeStyle('display');}else K.removeStyle('height');var O=z.element,P=O.getWindow(),Q=P.getScrollPosition(),R=P.getViewPaneSize(),S={height:O.$.offsetHeight,width:O.$.offsetWidth};if(F?G<0:G+S.width>R.width+Q.x)G+=S.width*(F?1:-1);if(H+S.height>R.height+Q.y)H-=S.height;if(h){var T=new m(B.$.offsetParent),U=T;if(U.getName()=='html')U=U.getDocument().getBody();if(U.getComputedStyle('direction')=='rtl')if(g.ie8Compat)G-=B.getDocument().getDocumentElement().$.scrollLeft*2;else G-=T.$.scrollWidth-T.$.clientWidth;}var V=B.getFirst(),W;if(W=V.getCustomData('activePanel'))W.onHide&&W.onHide.call(this,1);V.setCustomData('activePanel',this);B.setStyles({top:H+'px',left:G+'px'});B.setOpacity(1);},this);z.isLoaded?J():z.onLoad=J;j.setTimeout(function(){C.$.contentWindow.focus();this.allowBlur(true);},0,this);},0,this);this.visible=1;if(this.onShow)this.onShow.call(this);s=0;},hide:function(){var u=this;if(u.visible&&(!u.onHide||u.onHide.call(u)!==true)){u.hideChild();u.element.setStyle('display','none');u.visible=0;u.element.getFirst().removeCustomData('activePanel');}},allowBlur:function(u){var v=this._.panel;if(u!=undefined)v.allowBlur=u;return v.allowBlur;},showAsChild:function(u,v,w,x,y,z){if(this._.activeChild==u&&u._.panel._.offsetParentId==w.getId())return;this.hideChild();u.onHide=j.bind(function(){j.setTimeout(function(){if(!this._.focused)this.hide();},0,this);},this);this._.activeChild=u;this._.focused=false;u.showBlock(v,w,x,y,z);if(g.ie7Compat||g.ie8&&g.ie6Compat)setTimeout(function(){u.element.getChild(0).$.style.cssText+='';},100);},hideChild:function(){var u=this._.activeChild;if(u){delete u.onHide;delete this._.activeChild;u.hide();}}}});f.on('instanceDestroyed',function(){var u=j.isEmpty(f.instances);for(var v in r){var w=r[v];if(u)w.destroy();else w.element.hide();}u&&(r={});});})();o.add('menu',{beforeInit:function(r){var s=r.config.menu_groups.split(','),t=r._.menuGroups={},u=r._.menuItems={};
for(var v=0;v<s.length;v++)t[s[v]]=v+1;r.addMenuGroup=function(w,x){t[w]=x||100;};r.addMenuItem=function(w,x){if(t[x.group])u[w]=new f.menuItem(this,w,x);};r.addMenuItems=function(w){for(var x in w)this.addMenuItem(x,w[x]);};r.getMenuItem=function(w){return u[w];};},requires:['floatpanel']});(function(){f.menu=j.createClass({$:function(s,t){var w=this;t=w._.definition=t||{};w.id='cke_'+j.getNextNumber();w.editor=s;w.items=[];w._.level=t.level||1;var u=j.extend({},t.panel,{css:s.skin.editor.css,level:w._.level-1,block:{}}),v=u.block.attributes=u.attributes||{};!v.role&&(v.role='menu');w._.panelDefinition=u;},_:{showSubMenu:function(s){var A=this;var t=A._.subMenu,u=A.items[s],v=u.getItems&&u.getItems();if(!v){A._.panel.hideChild();return;}var w=A._.panel.getBlock(A.id);w._.focusIndex=s;if(t)t.removeAll();else{t=A._.subMenu=new f.menu(A.editor,j.extend({},A._.definition,{level:A._.level+1},true));t.parent=A;t.onClick=j.bind(A.onClick,A);t.onEscape=A.onEscape;}for(var x in v){var y=A.editor.getMenuItem(x);if(y){y.state=v[x];t.add(y);}}var z=A._.panel.getBlock(A.id).element.getDocument().getById(A.id+String(s));t.show(z,2);}},proto:{add:function(s){if(!s.order)s.order=this.items.length;this.items.push(s);},removeAll:function(){this.items=[];},show:function(s,t,u,v){var w=this.items,x=this.editor,y=this._.panel,z=this._.element;if(!y){y=this._.panel=new p.floatPanel(this.editor,f.document.getBody(),this._.panelDefinition,this._.level);y.onEscape=j.bind(function(K){if(this.onEscape&&this.onEscape(K)===false)return false;},this);y.onHide=j.bind(function(){this.onHide&&this.onHide();},this);var A=y.addBlock(this.id,this._.panelDefinition.block);A.autoSize=true;var B=A.keys;B[40]='next';B[9]='next';B[38]='prev';B[2000+9]='prev';B[32]='click';B[x.lang.dir=='rtl'?37:39]='click';z=this._.element=A.element;z.addClass(x.skinClass);var C=z.getDocument();C.getBody().setStyle('overflow','hidden');C.getElementsByTag('html').getItem(0).setStyle('overflow','hidden');this._.itemOverFn=j.addFunction(function(K){var L=this;clearTimeout(L._.showSubTimeout);L._.showSubTimeout=j.setTimeout(L._.showSubMenu,x.config.menu_subMenuDelay||400,L,[K]);},this);this._.itemOutFn=j.addFunction(function(K){clearTimeout(this._.showSubTimeout);},this);this._.itemClickFn=j.addFunction(function(K){var M=this;var L=M.items[K];if(L.state==0){M.hide();return;}if(L.getItems)M._.showSubMenu(K);else M.onClick&&M.onClick(L);},this);}r(w);var D=x.container.getChild(1),E=D.hasClass('cke_mixed_dir_content')?' cke_mixed_dir_content':'',F=['<div class="cke_menu'+E+'" role="presentation">'],G=w.length,H=G&&w[0].group;
for(var I=0;I<G;I++){var J=w[I];if(H!=J.group){F.push('<div class="cke_menuseparator" role="separator"></div>');H=J.group;}J.render(this,I,F);}F.push('</div>');z.setHtml(F.join(''));if(this.parent)this.parent._.panel.showAsChild(y,this.id,s,t,u,v);else y.showBlock(this.id,s,t,u,v);x.fire('menuShow',[y]);},hide:function(){this._.panel&&this._.panel.hide();}}});function r(s){s.sort(function(t,u){if(t.group<u.group)return-1;else if(t.group>u.group)return 1;return t.order<u.order?-1:t.order>u.order?1:0;});};})();f.menuItem=j.createClass({$:function(r,s,t){var u=this;j.extend(u,t,{order:0,className:'cke_button_'+s});u.group=r._.menuGroups[u.group];u.editor=r;u.name=s;},proto:{render:function(r,s,t){var A=this;var u=r.id+String(s),v=typeof A.state=='undefined'?2:A.state,w=' cke_'+(v==1?'on':v==0?'disabled':'off'),x=A.label;if(A.className)w+=' '+A.className;var y=A.getItems;t.push('<span class="cke_menuitem"><a id="',u,'" class="',w,'" href="javascript:void(\'',(A.label||'').replace("'",''),'\')" title="',A.label,'" tabindex="-1"_cke_focus=1 hidefocus="true" role="menuitem"'+(y?'aria-haspopup="true"':'')+(v==0?'aria-disabled="true"':'')+(v==1?'aria-pressed="true"':''));if(g.opera||g.gecko&&g.mac)t.push(' onkeypress="return false;"');if(g.gecko)t.push(' onblur="this.style.cssText = this.style.cssText;"');var z=(A.iconOffset||0)*-16;t.push(' onmouseover="CKEDITOR.tools.callFunction(',r._.itemOverFn,',',s,');" onmouseout="CKEDITOR.tools.callFunction(',r._.itemOutFn,',',s,');" onclick="CKEDITOR.tools.callFunction(',r._.itemClickFn,',',s,'); return false;"><span class="cke_icon_wrapper"><span class="cke_icon"'+(A.icon?' style="background-image:url('+f.getUrl(A.icon)+');background-position:0 '+z+'px;"':'')+'></span></span>'+'<span class="cke_label">');if(y)t.push('<span class="cke_menuarrow">','<span>&#',A.editor.lang.dir=='rtl'?'9668':'9658',';</span>','</span>');t.push(x,'</span></a></span>');}}});n.menu_groups='clipboard,form,tablecell,tablecellproperties,tablerow,tablecolumn,table,anchor,link,image,flash,checkbox,radio,textfield,hiddenfield,imagebutton,button,select,textarea,div';(function(){var r=function(t,u){return t._.modes&&t._.modes[u||t.mode];},s;o.add('editingblock',{init:function(t){if(!t.config.editingBlock)return;t.on('themeSpace',function(u){if(u.data.space=='contents')u.data.html+='<br>';});t.on('themeLoaded',function(){t.fireOnce('editingBlockReady');});t.on('uiReady',function(){t.setMode(t.config.startupMode);});t.on('afterSetData',function(){if(!s){function u(){s=true;
r(t).loadData(t.getData());s=false;};if(t.mode)u();else t.on('mode',function(){u();t.removeListener('mode',arguments.callee);});}});t.on('beforeGetData',function(){if(!s&&t.mode){s=true;t.setData(r(t).getData());s=false;}});t.on('getSnapshot',function(u){if(t.mode)u.data=r(t).getSnapshotData();});t.on('loadSnapshot',function(u){if(t.mode)r(t).loadSnapshotData(u.data);});t.on('mode',function(u){u.removeListener();g.webkit&&t.container.on('focus',function(){t.focus();});if(t.config.startupFocus)t.focus();setTimeout(function(){t.fireOnce('instanceReady');f.fire('instanceReady',null,t);},0);});}});f.editor.prototype.mode='';f.editor.prototype.addMode=function(t,u){u.name=t;(this._.modes||(this._.modes={}))[t]=u;};f.editor.prototype.setMode=function(t){var u,v=this.getThemeSpace('contents'),w=this.checkDirty();if(this.mode){if(t==this.mode)return;this.fire('beforeModeUnload');var x=r(this);u=x.getData();x.unload(v);this.mode='';}v.setHtml('');var y=r(this,t);if(!y)throw '[CKEDITOR.editor.setMode] Unknown mode "'+t+'".';if(!w)this.on('mode',function(){this.resetDirty();this.removeListener('mode',arguments.callee);});y.load(v,typeof u!='string'?this.getData():u);};f.editor.prototype.focus=function(){var t=r(this);if(t)t.focus();};})();n.startupMode='wysiwyg';n.editingBlock=true;(function(){function r(){var B=this;try{var y=B.getSelection();if(!y||!y.document.getWindow().$)return;var z=y.getStartElement(),A=new i.elementPath(z);if(!A.compare(B._.selectionPreviousPath)){B._.selectionPreviousPath=A;B.fire('selectionChange',{selection:y,path:A,element:z});}}catch(C){}};var s,t;function u(){t=true;if(s)return;v.call(this);s=j.setTimeout(v,200,this);};function v(){s=null;if(t){j.setTimeout(r,0,this);t=false;}};var w={modes:{wysiwyg:1,source:1},exec:function(y){switch(y.mode){case 'wysiwyg':y.document.$.execCommand('SelectAll',false,null);break;case 'source':var z=y.textarea.$;if(h)z.createTextRange().execCommand('SelectAll');else{z.selectionStart=0;z.selectionEnd=z.value.length;}z.focus();}},canUndo:false};o.add('selection',{init:function(y){y.on('contentDom',function(){var z=y.document,A=z.getBody(),B=z.getDocumentElement();if(h){var C,D,E=1;A.on('focusin',function(I){if(I.data.$.srcElement.nodeName!='BODY')return;if(C){var J=z.getCustomData('cke_locked_selection');if(E&&!J)try{C.select();}catch(K){}C=null;}});A.on('focus',function(){D=1;H();});A.on('beforedeactivate',function(I){if(I.data.$.toElement)return;D=0;E=1;});if(h&&g.version<8)y.on('blur',function(I){try{y.document&&y.document.$.selection.empty();
}catch(J){}});B.on('mousedown',function(){E=0;});B.on('mouseup',function(){E=1;});if(h&&(g.ie7Compat||g.version<8||g.quirks))B.on('click',function(I){if(I.data.getTarget().getName()=='html')y.getSelection().getRanges()[0].select();});var F;A.on('mousedown',function(I){if(I.data.$.button==2){var J=y.document.$.selection;if(J.type=='None')F=y.window.getScrollPosition();}G();});A.on('mouseup',function(I){if(I.data.$.button==2&&F){y.document.$.documentElement.scrollLeft=F.x;y.document.$.documentElement.scrollTop=F.y;}F=null;D=1;setTimeout(function(){H(true);},0);});A.on('keydown',G);A.on('keyup',function(){D=1;H();});z.on('selectionchange',H);function G(){D=0;};function H(I){if(D){var J=y.document,K=y.getSelection(),L=K&&K.getNative();if(I&&L&&L.type=='None')if(!J.$.queryCommandEnabled('InsertImage')){j.setTimeout(H,50,this,true);return;}var M;if(L&&L.type&&L.type!='Control'&&(M=L.createRange())&&(M=M.parentElement())&&(M=M.nodeName)&&M.toLowerCase() in {input:1,textarea:1})return;C=L&&K.getRanges()[0];u.call(y);}};}else{z.on('mouseup',u,y);z.on('keyup',u,y);}});y.addCommand('selectAll',w);y.ui.addButton('SelectAll',{label:y.lang.selectAll,command:'selectAll'});y.selectionChange=u;}});f.editor.prototype.getSelection=function(){return this.document&&this.document.getSelection();};f.editor.prototype.forceNextSelectionCheck=function(){delete this._.selectionPreviousPath;};l.prototype.getSelection=function(){var y=new i.selection(this);return!y||y.isInvalid?null:y;};f.SELECTION_NONE=1;f.SELECTION_TEXT=2;f.SELECTION_ELEMENT=3;i.selection=function(y){var B=this;var z=y.getCustomData('cke_locked_selection');if(z)return z;B.document=y;B.isLocked=0;B._={cache:{}};if(h){var A=B.getNative().createRange();if(!A||A.item&&A.item(0).ownerDocument!=B.document.$||A.parentElement&&A.parentElement().ownerDocument!=B.document.$)B.isInvalid=true;}return B;};var x={img:1,hr:1,li:1,table:1,tr:1,td:1,th:1,embed:1,object:1,ol:1,ul:1,a:1,input:1,form:1,select:1,textarea:1,button:1,fieldset:1,th:1,thead:1,tfoot:1};i.selection.prototype={getNative:h?function(){return this._.cache.nativeSel||(this._.cache.nativeSel=this.document.$.selection);}:function(){return this._.cache.nativeSel||(this._.cache.nativeSel=this.document.getWindow().$.getSelection());},getType:h?function(){var y=this._.cache;if(y.type)return y.type;var z=1;try{var A=this.getNative(),B=A.type;if(B=='Text')z=2;if(B=='Control')z=3;if(A.createRange().parentElement)z=2;}catch(C){}return y.type=z;}:function(){var y=this._.cache;
if(y.type)return y.type;var z=2,A=this.getNative();if(!A)z=1;else if(A.rangeCount==1){var B=A.getRangeAt(0),C=B.startContainer;if(C==B.endContainer&&C.nodeType==1&&B.endOffset-B.startOffset==1&&x[C.childNodes[B.startOffset].nodeName.toLowerCase()])z=3;}return y.type=z;},getRanges:(function(){var y=h?(function(){var z=function(A,B){A=A.duplicate();A.collapse(B);var C=A.parentElement(),D=C.childNodes,E;for(var F=0;F<D.length;F++){var G=D[F];if(G.nodeType==1){E=A.duplicate();E.moveToElementText(G);var H=E.compareEndPoints('StartToStart',A),I=E.compareEndPoints('EndToStart',A);E.collapse();if(H>0)break;else if(!H||I==1&&H==-1)return{container:C,offset:F};else if(!I)return{container:C,offset:F+1};E=null;}}if(!E){E=A.duplicate();E.moveToElementText(C);E.collapse(false);}E.setEndPoint('StartToStart',A);var J=E.text.replace(/(\r\n|\r)/g,'\n').length;try{while(J>0)J-=D[--F].nodeValue.length;}catch(K){J=0;}if(J===0)return{container:C,offset:F};else return{container:D[F],offset:-J};};return function(){var K=this;var A=K.getNative(),B=A&&A.createRange(),C=K.getType(),D;if(!A)return[];if(C==2){D=new i.range(K.document);var E=z(B,true);D.setStart(new i.node(E.container),E.offset);E=z(B);D.setEnd(new i.node(E.container),E.offset);if(D.endContainer.getPosition(D.startContainer)&4&&D.endOffset<=D.startContainer.getIndex())D.collapse();return[D];}else if(C==3){var F=[];for(var G=0;G<B.length;G++){var H=B.item(G),I=H.parentNode,J=0;D=new i.range(K.document);for(;J<I.childNodes.length&&I.childNodes[J]!=H;J++){}D.setStart(new i.node(I),J);D.setEnd(new i.node(I),J+1);F.push(D);}return F;}return[];};})():function(){var z=[],A,B=this.document,C=this.getNative();if(!C)return z;if(!C.rangeCount){A=new i.range(B);A.moveToElementEditStart(B.getBody());z.push(A);}for(var D=0;D<C.rangeCount;D++){var E=C.getRangeAt(D);A=new i.range(B);A.setStart(new i.node(E.startContainer),E.startOffset);A.setEnd(new i.node(E.endContainer),E.endOffset);z.push(A);}return z;};return function(z){var A=this._.cache;if(A.ranges&&!z)return A.ranges;else if(!A.ranges)A.ranges=new i.rangeList(y.call(this));if(z){var B=A.ranges;for(var C=0;C<B.length;C++){var D=B[C],E=D.getCommonAncestor();if(E.isReadOnly())B.splice(C,1);if(D.collapsed)continue;var F=D.startContainer,G=D.endContainer,H=D.startOffset,I=D.endOffset,J=D.clone(),K;if(K=F.isReadOnly())D.setStartAfter(K);if(F&&F.type==3)if(H>=F.getLength())J.setStartAfter(F);else J.setStartBefore(F);if(G&&G.type==3)if(!I)J.setEndBefore(G);else J.setEndAfter(G);var L=new i.walker(J);
L.evaluator=function(M){if(M.type==1&&M.getAttribute('contenteditable')=='false'){var N=D.clone();D.setEndBefore(M);if(D.collapsed)B.splice(C--,1);if(!(M.getPosition(J.endContainer)&16)){N.setStartAfter(M);if(!N.collapsed)B.splice(C+1,0,N);}return true;}return false;};L.next();}}return A.ranges;};})(),getStartElement:function(){var F=this;var y=F._.cache;if(y.startElement!==undefined)return y.startElement;var z,A=F.getNative();switch(F.getType()){case 3:return F.getSelectedElement();case 2:var B=F.getRanges()[0];if(B){if(!B.collapsed){B.optimize();while(1){var C=B.startContainer,D=B.startOffset;if(D==(C.getChildCount?C.getChildCount():C.getLength())&&!C.isBlockBoundary())B.setStartAfter(C);else break;}z=B.startContainer;if(z.type!=1)return z.getParent();z=z.getChild(B.startOffset);if(!z||z.type!=1)z=B.startContainer;else{var E=z.getFirst();while(E&&E.type==1){z=E;E=E.getFirst();}}}else{z=B.startContainer;if(z.type!=1)z=z.getParent();}z=z.$;}}return y.startElement=z?new m(z):null;},getSelectedElement:function(){var y=this._.cache;if(y.selectedElement!==undefined)return y.selectedElement;var z=this,A=j.tryThese(function(){return z.getNative().createRange().item(0);},function(){var B=z.getRanges()[0],C,D;for(var E=2;E&&!((C=B.getEnclosedNode())&&C.type==1&&x[C.getName()]&&(D=C));E--)B.shrink(1);return D.$;});return y.selectedElement=A?new m(A):null;},lock:function(){var y=this;y.getRanges();y.getStartElement();y.getSelectedElement();y._.cache.nativeSel={};y.isLocked=1;y.document.setCustomData('cke_locked_selection',y);},unlock:function(y){var D=this;var z=D.document,A=z.getCustomData('cke_locked_selection');if(A){z.setCustomData('cke_locked_selection',null);if(y){var B=A.getSelectedElement(),C=!B&&A.getRanges();D.isLocked=0;D.reset();z.getBody().focus();if(B)D.selectElement(B);else D.selectRanges(C);}}if(!A||!y){D.isLocked=0;D.reset();}},reset:function(){this._.cache={};},selectElement:function(y){var B=this;if(B.isLocked){var z=new i.range(B.document);z.setStartBefore(y);z.setEndAfter(y);B._.cache.selectedElement=y;B._.cache.startElement=y;B._.cache.ranges=new i.rangeList(z);B._.cache.type=3;return;}if(h){B.getNative().empty();try{z=B.document.$.body.createControlRange();z.addElement(y.$);z.select();}catch(C){z=B.document.$.body.createTextRange();z.moveToElementText(y.$);z.select();}finally{B.document.fire('selectionchange');}B.reset();}else{z=B.document.$.createRange();z.selectNode(y.$);var A=B.getNative();A.removeAllRanges();A.addRange(z);B.reset();}},selectRanges:function(y){var I=this;
if(I.isLocked){I._.cache.selectedElement=null;I._.cache.startElement=y[0]&&y[0].getTouchedStartNode();I._.cache.ranges=new i.rangeList(y);I._.cache.type=2;return;}if(h){if(y.length>1){var z=y[y.length-1];y[0].setEnd(z.endContainer,z.endOffset);y.length=1;}if(y[0])y[0].select();I.reset();}else{var A=I.getNative();if(y.length)A.removeAllRanges();for(var B=0;B<y.length;B++){if(B<y.length-1){var C=y[B],D=y[B+1],E=C.clone();E.setStart(C.endContainer,C.endOffset);E.setEnd(D.startContainer,D.startOffset);if(!E.collapsed){E.shrink(1,true);if(E.getCommonAncestor().isReadOnly()){D.setStart(C.startContainer,C.startOffset);y.splice(B--,1);continue;}}}var F=y[B],G=I.document.$.createRange(),H=F.startContainer;if(F.collapsed&&(g.opera||g.gecko&&g.version<10900)&&H.type==1&&!H.getChildCount())H.appendText('');G.setStart(H.$,F.startOffset);G.setEnd(F.endContainer.$,F.endOffset);A.addRange(G);}I.reset();}},createBookmarks:function(y){return this.getRanges().createBookmarks(y);},createBookmarks2:function(y){return this.getRanges().createBookmarks2(y);},selectBookmarks:function(y){var z=[];for(var A=0;A<y.length;A++){var B=new i.range(this.document);B.moveToBookmark(y[A]);z.push(B);}this.selectRanges(z);return this;},getCommonAncestor:function(){var y=this.getRanges(),z=y[0].startContainer,A=y[y.length-1].endContainer;return z.getCommonAncestor(A);},scrollIntoView:function(){var y=this.getStartElement();y.scrollIntoView();}};})();(function(){var r=i.walker.whitespaces(true),s=/\ufeff|\u00a0/,t={table:1,tbody:1,tr:1};i.range.prototype.select=h?function(u){var E=this;var v=E.collapsed,w,x;if(E.startContainer.type==1&&E.startContainer.getName() in t||E.endContainer.type==1&&E.endContainer.getName() in t)E.shrink(1,true);var y=E.createBookmark(),z=y.startNode,A;if(!v)A=y.endNode;var B=E.document.$.body.createTextRange();B.moveToElementText(z.$);B.moveStart('character',1);if(A){var C=E.document.$.body.createTextRange();C.moveToElementText(A.$);B.setEndPoint('EndToEnd',C);B.moveEnd('character',-1);}else{var D=z.getNext(r);w=!(D&&D.getText&&D.getText().match(s))&&(u||!z.hasPrevious()||z.getPrevious().is&&z.getPrevious().is('br'));x=E.document.createElement('span');x.setHtml('&#65279;');x.insertBefore(z);if(w)E.document.createText('\ufeff').insertBefore(z);}E.setStartBefore(z);z.remove();if(v){if(w){B.moveStart('character',-1);B.select();E.document.$.selection.clear();}else B.select();E.moveToPosition(x,3);x.remove();}else{E.setEndBefore(A);A.remove();B.select();}E.document.fire('selectionchange');
}:function(){var x=this;var u=x.startContainer;if(x.collapsed&&u.type==1&&!u.getChildCount())u.append(new i.text(''));var v=x.document.$.createRange();v.setStart(u.$,x.startOffset);try{v.setEnd(x.endContainer.$,x.endOffset);}catch(y){if(y.toString().indexOf('NS_ERROR_ILLEGAL_VALUE')>=0){x.collapse(true);v.setEnd(x.endContainer.$,x.endOffset);}else throw y;}var w=x.document.getSelection().getNative();w.removeAllRanges();w.addRange(v);};})();(function(){var r={elements:{$:function(s){var t=s.attributes,u=t&&t._cke_realelement,v=u&&new f.htmlParser.fragment.fromHtml(decodeURIComponent(u)),w=v&&v.children[0];if(w&&s.attributes._cke_resizable){var x=s.attributes.style;if(x){var y=/(?:^|\s)width\s*:\s*(\d+)/i.exec(x),z=y&&y[1];y=/(?:^|\s)height\s*:\s*(\d+)/i.exec(x);var A=y&&y[1];if(z)w.attributes.width=z;if(A)w.attributes.height=A;}}return w;}}};o.add('fakeobjects',{requires:['htmlwriter'],afterInit:function(s){var t=s.dataProcessor,u=t&&t.htmlFilter;if(u)u.addRules(r);}});})();f.editor.prototype.createFakeElement=function(r,s,t,u){var v=this.lang.fakeobjects,w={'class':s,src:f.getUrl('images/spacer.gif'),_cke_realelement:encodeURIComponent(r.getOuterHtml()),_cke_real_node_type:r.type,alt:v[t]||v.unknown,align:r.getAttribute('align')||''};if(t)w._cke_real_element_type=t;if(u)w._cke_resizable=u;return this.document.createElement('img',{attributes:w});};f.editor.prototype.createFakeParserElement=function(r,s,t,u){var v=this.lang.fakeobjects,w,x=new f.htmlParser.basicWriter();r.writeHtml(x);w=x.getHtml();var y={'class':s,src:f.getUrl('images/spacer.gif'),_cke_realelement:encodeURIComponent(w),_cke_real_node_type:r.type,alt:v[t]||v.unknown,align:r.attributes.align||''};if(t)y._cke_real_element_type=t;if(u)y._cke_resizable=u;return new f.htmlParser.element('img',y);};f.editor.prototype.restoreRealElement=function(r){if(r.getAttribute('_cke_real_node_type')!=1)return null;return m.createFromHtml(decodeURIComponent(r.getAttribute('_cke_realelement')),this.document);};o.add('richcombo',{requires:['floatpanel','listblock','button'],beforeInit:function(r){r.ui.addHandler(3,p.richCombo.handler);}});f.UI_RICHCOMBO=3;p.richCombo=j.createClass({$:function(r){var t=this;j.extend(t,r,{title:r.label,modes:{wysiwyg:1}});var s=t.panel||{};delete t.panel;t.id=j.getNextNumber();t.document=s&&s.parent&&s.parent.getDocument()||f.document;s.className=(s.className||'')+' cke_rcombopanel';s.block={multiSelect:s.multiSelect,attributes:s.attributes};t._={panelDefinition:s,items:{},state:2};
},statics:{handler:{create:function(r){return new p.richCombo(r);}}},proto:{renderHtml:function(r){var s=[];this.render(r,s);return s.join('');},render:function(r,s){var t=g,u='cke_'+this.id,v=j.addFunction(function(y){var B=this;var z=B._;if(z.state==0)return;B.createPanel(r);if(z.on){z.panel.hide();return;}if(!z.committed){z.list.commit();z.committed=1;}var A=B.getValue();if(A)z.list.mark(A);else z.list.unmarkAll();z.panel.showBlock(B.id,new m(y),4);},this),w={id:u,combo:this,focus:function(){var y=f.document.getById(u).getChild(1);y.focus();},clickFn:v};r.on('mode',function(){this.setState(this.modes[r.mode]?2:0);},this);var x=j.addFunction(function(y,z){y=new i.event(y);var A=y.getKeystroke();switch(A){case 13:case 32:case 40:j.callFunction(v,z);break;default:w.onkey(w,A);}y.preventDefault();});w.keyDownFn=x;s.push('<span class="cke_rcombo">','<span id=',u);if(this.className)s.push(' class="',this.className,' cke_off"');s.push('>','<span id="'+u+'_label" class=cke_label>',this.label,'</span>','<a hidefocus=true title="',this.title,'" tabindex="-1"',t.gecko&&t.version>=10900&&!t.hc?'':" href=\"javascript:void('"+this.label+"')\"",' role="button" aria-labelledby="',u,'_label" aria-describedby="',u,'_text" aria-haspopup="true"');if(g.opera||g.gecko&&g.mac)s.push(' onkeypress="return false;"');if(g.gecko)s.push(' onblur="this.style.cssText = this.style.cssText;"');s.push(' onkeydown="CKEDITOR.tools.callFunction( ',x,', event, this );" onclick="CKEDITOR.tools.callFunction(',v,', this); return false;"><span><span id="'+u+'_text" class="cke_text cke_inline_label">'+this.label+'</span>'+'</span>'+'<span class=cke_openbutton>'+(g.hc?'<span>&#9660;</span>':'')+'</span>'+'</a>'+'</span>'+'</span>');if(this.onRender)this.onRender();return w;},createPanel:function(r){if(this._.panel)return;var s=this._.panelDefinition,t=this._.panelDefinition.block,u=s.parent||f.document.getBody(),v=new p.floatPanel(r,u,s),w=v.addListBlock(this.id,t),x=this;v.onShow=function(){if(x.className)this.element.getFirst().addClass(x.className+'_panel');x.setState(1);w.focus(!x.multiSelect&&x.getValue());x._.on=1;if(x.onOpen)x.onOpen();};v.onHide=function(y){if(x.className)this.element.getFirst().removeClass(x.className+'_panel');x.setState(2);x._.on=0;if(!y&&x.onClose)x.onClose();};v.onEscape=function(){v.hide();x.document.getById('cke_'+x.id).getFirst().getNext().focus();};w.onClick=function(y,z){x.document.getWindow().focus();if(x.onClick)x.onClick.call(x,y,z);if(z)x.setValue(y,x._.items[y]);
else x.setValue('');v.hide();};this._.panel=v;this._.list=w;v.getBlock(this.id).onHide=function(){x._.on=0;x.setState(2);};if(this.init)this.init();},setValue:function(r,s){var u=this;u._.value=r;var t=u.document.getById('cke_'+u.id+'_text');if(!(r||s)){s=u.label;t.addClass('cke_inline_label');}else t.removeClass('cke_inline_label');t.setHtml(typeof s!='undefined'?s:r);},getValue:function(){return this._.value||'';},unmarkAll:function(){this._.list.unmarkAll();},mark:function(r){this._.list.mark(r);},hideItem:function(r){this._.list.hideItem(r);},hideGroup:function(r){this._.list.hideGroup(r);},showAll:function(){this._.list.showAll();},add:function(r,s,t){this._.items[r]=t||r;this._.list.add(r,s,t);},startGroup:function(r){this._.list.startGroup(r);},commit:function(){this._.list.commit();},setState:function(r){var s=this;if(s._.state==r)return;s.document.getById('cke_'+s.id).setState(r);s._.state=r;}}});p.prototype.addRichCombo=function(r,s){this.add(r,3,s);};o.add('htmlwriter');f.htmlWriter=j.createClass({base:f.htmlParser.basicWriter,$:function(){var t=this;t.base();t.indentationChars='\t';t.selfClosingEnd=' />';t.lineBreakChars='\n';t.forceSimpleAmpersand=0;t.sortAttributes=1;t._.indent=0;t._.indentation='';t._.inPre=0;t._.rules={};var r=k;for(var s in j.extend({},r.$nonBodyContent,r.$block,r.$listItem,r.$tableContent))t.setRules(s,{indent:1,breakBeforeOpen:1,breakAfterOpen:1,breakBeforeClose:!r[s]['#'],breakAfterClose:1});t.setRules('br',{breakAfterOpen:1});t.setRules('title',{indent:0,breakAfterOpen:0});t.setRules('style',{indent:0,breakBeforeClose:1});t.setRules('pre',{indent:0});},proto:{openTag:function(r,s){var u=this;var t=u._.rules[r];if(u._.indent)u.indentation();else if(t&&t.breakBeforeOpen){u.lineBreak();u.indentation();}u._.output.push('<',r);},openTagClose:function(r,s){var u=this;var t=u._.rules[r];if(s)u._.output.push(u.selfClosingEnd);else{u._.output.push('>');if(t&&t.indent)u._.indentation+=u.indentationChars;}if(t&&t.breakAfterOpen)u.lineBreak();r=='pre'&&(u._.inPre=1);},attribute:function(r,s){if(typeof s=='string'){this.forceSimpleAmpersand&&(s=s.replace(/&amp;/g,'&'));s=j.htmlEncodeAttr(s);}this._.output.push(' ',r,'="',s,'"');},closeTag:function(r){var t=this;var s=t._.rules[r];if(s&&s.indent)t._.indentation=t._.indentation.substr(t.indentationChars.length);if(t._.indent)t.indentation();else if(s&&s.breakBeforeClose){t.lineBreak();t.indentation();}t._.output.push('</',r,'>');r=='pre'&&(t._.inPre=0);if(s&&s.breakAfterClose)t.lineBreak();
},text:function(r){var s=this;if(s._.indent){s.indentation();!s._.inPre&&(r=j.ltrim(r));}s._.output.push(r);},comment:function(r){if(this._.indent)this.indentation();this._.output.push('<!--',r,'-->');},lineBreak:function(){var r=this;if(!r._.inPre&&r._.output.length>0)r._.output.push(r.lineBreakChars);r._.indent=1;},indentation:function(){var r=this;if(!r._.inPre)r._.output.push(r._.indentation);r._.indent=0;},setRules:function(r,s){var t=this._.rules[r];if(t)j.extend(t,s,true);else this._.rules[r]=s;}}});o.add('menubutton',{requires:['button','contextmenu'],beforeInit:function(r){r.ui.addHandler(5,p.menuButton.handler);}});f.UI_MENUBUTTON=5;(function(){var r=function(s){var t=this._;if(t.state===0)return;t.previousState=t.state;var u=t.menu;if(!u){u=t.menu=new o.contextMenu(s);u.definition.panel.attributes['aria-label']=s.lang.common.options;u.onHide=j.bind(function(){this.setState(t.previousState);},this);if(this.onMenu)u.addListener(this.onMenu);}if(t.on){u.hide();return;}this.setState(1);u.show(f.document.getById(this._.id),4);};p.menuButton=j.createClass({base:p.button,$:function(s){var t=s.panel;delete s.panel;this.base(s);this.hasArrow=true;this.click=r;},statics:{handler:{create:function(s){return new p.menuButton(s);}}}});})();o.add('dialogui');(function(){var r=function(z){var C=this;C._||(C._={});C._['default']=C._.initValue=z['default']||'';C._.required=z.required||false;var A=[C._];for(var B=1;B<arguments.length;B++)A.push(arguments[B]);A.push(true);j.extend.apply(j,A);return C._;},s={build:function(z,A,B){return new p.dialog.textInput(z,A,B);}},t={build:function(z,A,B){return new p.dialog[A.type](z,A,B);}},u={build:function(z,A,B){var C=A.children,D,E=[],F=[];for(var G=0;G<C.length&&(D=C[G]);G++){var H=[];E.push(H);F.push(f.dialog._.uiElementBuilders[D.type].build(z,D,H));}return new p.dialog[A.type](z,F,E,B,A);}},v={isChanged:function(){return this.getValue()!=this.getInitValue();},reset:function(z){this.setValue(this.getInitValue(),z);},setInitValue:function(){this._.initValue=this.getValue();},resetInitValue:function(){this._.initValue=this._['default'];},getInitValue:function(){return this._.initValue;}},w=j.extend({},p.dialog.uiElement.prototype.eventProcessors,{onChange:function(z,A){if(!this._.domOnChangeRegistered){z.on('load',function(){this.getInputElement().on('change',function(){if(!z.parts.dialog.isVisible())return;this.fire('change',{value:this.getValue()});},this);},this);this._.domOnChangeRegistered=true;}this.on('change',A);}},true),x=/^on([A-Z]\w+)/,y=function(z){for(var A in z){if(x.test(A)||A=='title'||A=='type')delete z[A];
}return z;};j.extend(p.dialog,{labeledElement:function(z,A,B,C){if(arguments.length<4)return;var D=r.call(this,A);D.labelId=j.getNextId()+'_label';var E=this._.children=[],F=function(){var G=[],H=A.required?' cke_required':'';if(A.labelLayout!='horizontal')G.push('<label class="cke_dialog_ui_labeled_label'+H+'" ',' id="'+D.labelId+'"',' for="'+D.inputId+'"',' style="'+A.labelStyle+'">',A.label,'</label>','<div class="cke_dialog_ui_labeled_content" role="presentation">',C.call(this,z,A),'</div>');else{var I={type:'hbox',widths:A.widths,padding:0,children:[{type:'html',html:'<label class="cke_dialog_ui_labeled_label'+H+'"'+' id="'+D.labelId+'"'+' for="'+D.inputId+'"'+' style="'+A.labelStyle+'">'+j.htmlEncode(A.label)+'</span>'},{type:'html',html:'<span class="cke_dialog_ui_labeled_content">'+C.call(this,z,A)+'</span>'}]};f.dialog._.uiElementBuilders.hbox.build(z,I,G);}return G.join('');};p.dialog.uiElement.call(this,z,A,B,'div',null,{role:'presentation'},F);},textInput:function(z,A,B){if(arguments.length<3)return;r.call(this,A);var C=this._.inputId=j.getNextId()+'_textInput',D={'class':'cke_dialog_ui_input_'+A.type,id:C,type:'text'},E;if(A.validate)this.validate=A.validate;if(A.maxLength)D.maxlength=A.maxLength;if(A.size)D.size=A.size;if(A.controlStyle)D.style=A.controlStyle;var F=this,G=false;z.on('load',function(){F.getInputElement().on('keydown',function(I){if(I.data.getKeystroke()==13)G=true;});F.getInputElement().on('keyup',function(I){if(I.data.getKeystroke()==13&&G){z.getButton('ok')&&setTimeout(function(){z.getButton('ok').click();},0);G=false;}},null,null,1000);});var H=function(){var I=['<div class="cke_dialog_ui_input_',A.type,'" role="presentation"'];if(A.width)I.push('style="width:'+A.width+'" ');I.push('><input ');D['aria-labelledby']=this._.labelId;this._.required&&(D['aria-required']=this._.required);for(var J in D)I.push(J+'="'+D[J]+'" ');I.push(' /></div>');return I.join('');};p.dialog.labeledElement.call(this,z,A,B,H);},textarea:function(z,A,B){if(arguments.length<3)return;r.call(this,A);var C=this,D=this._.inputId=j.getNextId()+'_textarea',E={};if(A.validate)this.validate=A.validate;E.rows=A.rows||5;E.cols=A.cols||20;var F=function(){E['aria-labelledby']=this._.labelId;this._.required&&(E['aria-required']=this._.required);var G=['<div class="cke_dialog_ui_input_textarea" role="presentation"><textarea class="cke_dialog_ui_input_textarea" id="',D,'" '];for(var H in E)G.push(H+'="'+j.htmlEncode(E[H])+'" ');G.push('>',j.htmlEncode(C._['default']),'</textarea></div>');
return G.join('');};p.dialog.labeledElement.call(this,z,A,B,F);},checkbox:function(z,A,B){if(arguments.length<3)return;var C=r.call(this,A,{'default':!!A['default']});if(A.validate)this.validate=A.validate;var D=function(){var E=j.extend({},A,{id:A.id?A.id+'_checkbox':j.getNextId()+'_checkbox'},true),F=[],G=j.getNextId()+'_label',H={'class':'cke_dialog_ui_checkbox_input',type:'checkbox','aria-labelledby':G};y(E);if(A['default'])H.checked='checked';if(typeof E.controlStyle!='undefined')E.style=E.controlStyle;C.checkbox=new p.dialog.uiElement(z,E,F,'input',null,H);F.push(' <label id="',G,'" for="',H.id,'">',j.htmlEncode(A.label),'</label>');return F.join('');};p.dialog.uiElement.call(this,z,A,B,'span',null,null,D);},radio:function(z,A,B){if(arguments.length<3)return;r.call(this,A);if(!this._['default'])this._['default']=this._.initValue=A.items[0][1];if(A.validate)this.validate=A.valdiate;var C=[],D=this,E=function(){var F=[],G=[],H={'class':'cke_dialog_ui_radio_item','aria-labelledby':this._.labelId},I=A.id?A.id+'_radio':j.getNextId()+'_radio';for(var J=0;J<A.items.length;J++){var K=A.items[J],L=K[2]!==undefined?K[2]:K[0],M=K[1]!==undefined?K[1]:K[0],N=j.getNextId()+'_radio_input',O=N+'_label',P=j.extend({},A,{id:N,title:null,type:null},true),Q=j.extend({},P,{title:L},true),R={type:'radio','class':'cke_dialog_ui_radio_input',name:I,value:M,'aria-labelledby':O},S=[];if(D._['default']==M)R.checked='checked';y(P);y(Q);if(typeof P.controlStyle!='undefined')P.style=P.controlStyle;C.push(new p.dialog.uiElement(z,P,S,'input',null,R));S.push(' ');new p.dialog.uiElement(z,Q,S,'label',null,{id:O,'for':R.id},K[0]);F.push(S.join(''));}new p.dialog.hbox(z,[],F,G);return G.join('');};p.dialog.labeledElement.call(this,z,A,B,E);this._.children=C;},button:function(z,A,B){if(!arguments.length)return;if(typeof A=='function')A=A(z.getParentEditor());r.call(this,A,{disabled:A.disabled||false});f.event.implementOn(this);var C=this;z.on('load',function(F){var G=this.getElement();(function(){G.on('click',function(H){C.fire('click',{dialog:C.getDialog()});H.data.preventDefault();});G.on('keydown',function(H){if(H.data.getKeystroke() in {32:1}){C.click();H.data.preventDefault();}});})();G.unselectable();},this);var D=j.extend({},A);delete D.style;var E=j.getNextId()+'_label';p.dialog.uiElement.call(this,z,D,B,'a',null,{style:A.style,href:'javascript:void(0)',title:A.label,hidefocus:'true','class':A['class'],role:'button','aria-labelledby':E},'<span id="'+E+'" class="cke_dialog_ui_button">'+j.htmlEncode(A.label)+'</span>');
},select:function(z,A,B){if(arguments.length<3)return;var C=r.call(this,A);if(A.validate)this.validate=A.validate;C.inputId=j.getNextId()+'_select';var D=function(){var E=j.extend({},A,{id:A.id?A.id+'_select':j.getNextId()+'_select'},true),F=[],G=[],H={id:C.inputId,'class':'cke_dialog_ui_input_select','aria-labelledby':this._.labelId};if(A.size!=undefined)H.size=A.size;if(A.multiple!=undefined)H.multiple=A.multiple;y(E);for(var I=0,J;I<A.items.length&&(J=A.items[I]);I++)G.push('<option value="',j.htmlEncode(J[1]!==undefined?J[1]:J[0]),'" /> ',j.htmlEncode(J[0]));if(typeof E.controlStyle!='undefined')E.style=E.controlStyle;C.select=new p.dialog.uiElement(z,E,F,'select',null,H,G.join(''));return F.join('');};p.dialog.labeledElement.call(this,z,A,B,D);},file:function(z,A,B){if(arguments.length<3)return;if(A['default']===undefined)A['default']='';var C=j.extend(r.call(this,A),{definition:A,buttons:[]});if(A.validate)this.validate=A.validate;var D=function(){C.frameId=j.getNextId()+'_fileInput';var E=g.isCustomDomain(),F=['<iframe frameborder="0" allowtransparency="0" class="cke_dialog_ui_input_file" id="',C.frameId,'" title="',A.label,'" src="javascript:void('];F.push(E?"(function(){document.open();document.domain='"+document.domain+"';"+'document.close();'+'})()':'0');F.push(')"></iframe>');return F.join('');};z.on('load',function(){var E=f.document.getById(C.frameId),F=E.getParent();F.addClass('cke_dialog_ui_input_file');});p.dialog.labeledElement.call(this,z,A,B,D);},fileButton:function(z,A,B){if(arguments.length<3)return;var C=r.call(this,A),D=this;if(A.validate)this.validate=A.validate;var E=j.extend({},A),F=E.onClick;E.className=(E.className?E.className+' ':'')+'cke_dialog_ui_button';E.onClick=function(G){var H=A['for'];if(!F||F.call(this,G)!==false){z.getContentElement(H[0],H[1]).submit();this.disable();}};z.on('load',function(){z.getContentElement(A['for'][0],A['for'][1])._.buttons.push(D);});p.dialog.button.call(this,z,E,B);},html:(function(){var z=/^\s*<[\w:]+\s+([^>]*)?>/,A=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,B=/\/$/;return function(C,D,E){if(arguments.length<3)return;var F=[],G,H=D.html,I,J;if(H.charAt(0)!='<')H='<span>'+H+'</span>';var K=D.focus;if(K){var L=this.focus;this.focus=function(){L.call(this);typeof K=='function'&&K.call(this);this.fire('focus');};if(D.isFocusable){var M=this.isFocusable;this.isFocusable=M;}this.keyboardFocusable=true;}p.dialog.uiElement.call(this,C,D,F,'span',null,null,'');G=F.join('');I=G.match(z);J=H.match(A)||['','',''];
if(B.test(J[1])){J[1]=J[1].slice(0,-1);J[2]='/'+J[2];}E.push([J[1],' ',I[1]||'',J[2]].join(''));};})(),fieldset:function(z,A,B,C,D){var E=D.label,F=function(){var G=[];E&&G.push('<legend>'+E+'</legend>');for(var H=0;H<B.length;H++)G.push(B[H]);return G.join('');};this._={children:A};p.dialog.uiElement.call(this,z,D,C,'fieldset',null,null,F);}},true);p.dialog.html.prototype=new p.dialog.uiElement();p.dialog.labeledElement.prototype=j.extend(new p.dialog.uiElement(),{setLabel:function(z){var A=f.document.getById(this._.labelId);if(A.getChildCount()<1)new i.text(z,f.document).appendTo(A);else A.getChild(0).$.nodeValue=z;return this;},getLabel:function(){var z=f.document.getById(this._.labelId);if(!z||z.getChildCount()<1)return '';else return z.getChild(0).getText();},eventProcessors:w},true);p.dialog.button.prototype=j.extend(new p.dialog.uiElement(),{click:function(){var z=this;if(!z._.disabled)return z.fire('click',{dialog:z._.dialog});z.getElement().$.blur();return false;},enable:function(){this._.disabled=false;var z=this.getElement();z&&z.removeClass('cke_disabled');},disable:function(){this._.disabled=true;this.getElement().addClass('cke_disabled');},isVisible:function(){return this.getElement().getFirst().isVisible();},isEnabled:function(){return!this._.disabled;},eventProcessors:j.extend({},p.dialog.uiElement.prototype.eventProcessors,{onClick:function(z,A){this.on('click',A);}},true),accessKeyUp:function(){this.click();},accessKeyDown:function(){this.focus();},keyboardFocusable:true},true);p.dialog.textInput.prototype=j.extend(new p.dialog.labeledElement(),{getInputElement:function(){return f.document.getById(this._.inputId);},focus:function(){var z=this.selectParentTab();setTimeout(function(){var A=z.getInputElement();A&&A.$.focus();},0);},select:function(){var z=this.selectParentTab();setTimeout(function(){var A=z.getInputElement();if(A){A.$.focus();A.$.select();}},0);},accessKeyUp:function(){this.select();},setValue:function(z){!z&&(z='');return p.dialog.uiElement.prototype.setValue.apply(this,arguments);},keyboardFocusable:true},v,true);p.dialog.textarea.prototype=new p.dialog.textInput();p.dialog.select.prototype=j.extend(new p.dialog.labeledElement(),{getInputElement:function(){return this._.select.getElement();},add:function(z,A,B){var C=new m('option',this.getDialog().getParentEditor().document),D=this.getInputElement().$;C.$.text=z;C.$.value=A===undefined||A===null?z:A;if(B===undefined||B===null){if(h)D.add(C.$);else D.add(C.$,null);}else D.add(C.$,B);
return this;},remove:function(z){var A=this.getInputElement().$;A.remove(z);return this;},clear:function(){var z=this.getInputElement().$;while(z.length>0)z.remove(0);return this;},keyboardFocusable:true},v,true);p.dialog.checkbox.prototype=j.extend(new p.dialog.uiElement(),{getInputElement:function(){return this._.checkbox.getElement();},setValue:function(z,A){this.getInputElement().$.checked=z;!A&&this.fire('change',{value:z});},getValue:function(){return this.getInputElement().$.checked;},accessKeyUp:function(){this.setValue(!this.getValue());},eventProcessors:{onChange:function(z,A){if(!h)return w.onChange.apply(this,arguments);else{z.on('load',function(){var B=this._.checkbox.getElement();B.on('propertychange',function(C){C=C.data.$;if(C.propertyName=='checked')this.fire('change',{value:B.$.checked});},this);},this);this.on('change',A);}return null;}},keyboardFocusable:true},v,true);p.dialog.radio.prototype=j.extend(new p.dialog.uiElement(),{setValue:function(z,A){var B=this._.children,C;for(var D=0;D<B.length&&(C=B[D]);D++)C.getElement().$.checked=C.getValue()==z;!A&&this.fire('change',{value:z});},getValue:function(){var z=this._.children;for(var A=0;A<z.length;A++){if(z[A].getElement().$.checked)return z[A].getValue();}return null;},accessKeyUp:function(){var z=this._.children,A;for(A=0;A<z.length;A++){if(z[A].getElement().$.checked){z[A].getElement().focus();return;}}z[0].getElement().focus();},eventProcessors:{onChange:function(z,A){if(!h)return w.onChange.apply(this,arguments);else{z.on('load',function(){var B=this._.children,C=this;for(var D=0;D<B.length;D++){var E=B[D].getElement();E.on('propertychange',function(F){F=F.data.$;if(F.propertyName=='checked'&&this.$.checked)C.fire('change',{value:this.getAttribute('value')});});}},this);this.on('change',A);}return null;}},keyboardFocusable:true},v,true);p.dialog.file.prototype=j.extend(new p.dialog.labeledElement(),v,{getInputElement:function(){var z=f.document.getById(this._.frameId).getFrameDocument();return z.$.forms.length>0?new m(z.$.forms[0].elements[0]):this.getElement();},submit:function(){this.getInputElement().getParent().$.submit();return this;},getAction:function(){return this.getInputElement().getParent().$.action;},registerEvents:function(z){var A=/^on([A-Z]\w+)/,B,C=function(E,F,G,H){E.on('formLoaded',function(){E.getInputElement().on(G,H,E);});};for(var D in z){if(!(B=D.match(A)))continue;if(this.eventProcessors[D])this.eventProcessors[D].call(this,this._.dialog,z[D]);else C(this,this._.dialog,B[1].toLowerCase(),z[D]);
}return this;},reset:function(){var z=this._,A=f.document.getById(z.frameId),B=A.getFrameDocument(),C=z.definition,D=z.buttons,E=this.formLoadedNumber,F=this.formUnloadNumber,G=z.dialog._.editor.lang.dir,H=z.dialog._.editor.langCode;if(!E){E=this.formLoadedNumber=j.addFunction(function(){this.fire('formLoaded');},this);F=this.formUnloadNumber=j.addFunction(function(){this.getInputElement().clearCustomData();},this);this.getDialog()._.editor.on('destroy',function(){j.removeFunction(E);j.removeFunction(F);});}function I(){B.$.open();if(g.isCustomDomain())B.$.domain=document.domain;var J='';if(C.size)J=C.size-(h?7:0);B.$.write(['<html dir="'+G+'" lang="'+H+'"><head><title></title></head><body style="margin: 0; overflow: hidden; background: transparent;">','<form enctype="multipart/form-data" method="POST" dir="'+G+'" lang="'+H+'" action="',j.htmlEncode(C.action),'">','<input type="file" name="',j.htmlEncode(C.id||'cke_upload'),'" size="',j.htmlEncode(J>0?J:''),'" />','</form>','</body></html>','<script>window.parent.CKEDITOR.tools.callFunction('+E+');','window.onbeforeunload = function() {window.parent.CKEDITOR.tools.callFunction('+F+')}</script>'].join(''));B.$.close();for(var K=0;K<D.length;K++)D[K].enable();};if(g.gecko)setTimeout(I,500);else I();},getValue:function(){return this.getInputElement().$.value;},setInitValue:function(){this._.initValue='';},eventProcessors:{onChange:function(z,A){if(!this._.domOnChangeRegistered){this.on('formLoaded',function(){this.getInputElement().on('change',function(){this.fire('change',{value:this.getValue()});},this);},this);this._.domOnChangeRegistered=true;}this.on('change',A);}},keyboardFocusable:true},true);p.dialog.fileButton.prototype=new p.dialog.button();p.dialog.fieldset.prototype=j.clone(p.dialog.hbox.prototype);f.dialog.addUIElement('text',s);f.dialog.addUIElement('password',s);f.dialog.addUIElement('textarea',t);f.dialog.addUIElement('checkbox',t);f.dialog.addUIElement('radio',t);f.dialog.addUIElement('button',t);f.dialog.addUIElement('select',t);f.dialog.addUIElement('file',t);f.dialog.addUIElement('fileButton',t);f.dialog.addUIElement('html',t);f.dialog.addUIElement('fieldset',u);})();o.add('panel',{beforeInit:function(r){r.ui.addHandler(2,p.panel.handler);}});f.UI_PANEL=2;p.panel=function(r,s){var t=this;if(s)j.extend(t,s);j.extend(t,{className:'',css:[]});t.id=j.getNextId();t.document=r;t._={blocks:{}};};p.panel.handler={create:function(r){return new p.panel(r);}};p.panel.prototype={renderHtml:function(r){var s=[];
this.render(r,s);return s.join('');},render:function(r,s){var u=this;var t=u.id;s.push('<div class="',r.skinClass,'" lang="',r.langCode,'" role="presentation" style="display:none;z-index:'+(r.config.baseFloatZIndex+1)+'">'+'<div'+' id=',t,' dir=',r.lang.dir,' role="presentation" class="cke_panel cke_',r.lang.dir);if(u.className)s.push(' ',u.className);s.push('">');if(u.forceIFrame||u.css.length){s.push('<iframe id="',t,'_frame" frameborder="0" role="application" src="javascript:void(');s.push(g.isCustomDomain()?"(function(){document.open();document.domain='"+document.domain+"';"+'document.close();'+'})()':'0');s.push(')"></iframe>');}s.push('</div></div>');return t;},getHolderElement:function(){var r=this._.holder;if(!r){if(this.forceIFrame||this.css.length){var s=this.document.getById(this.id+'_frame'),t=s.getParent(),u=t.getAttribute('dir'),v=t.getParent().getAttribute('class'),w=t.getParent().getAttribute('lang'),x=s.getFrameDocument();x.$.open();if(g.isCustomDomain())x.$.domain=document.domain;var y=j.addFunction(j.bind(function(A){this.isLoaded=true;if(this.onLoad)this.onLoad();},this));x.$.write('<!DOCTYPE html><html dir="'+u+'" class="'+v+'_container" lang="'+w+'">'+'<head>'+'<style>.'+v+'_container{visibility:hidden}</style>'+'</head>'+'<body class="cke_'+u+' cke_panel_frame '+g.cssClass+'" style="margin:0;padding:0"'+' onload="( window.CKEDITOR || window.parent.CKEDITOR ).tools.callFunction('+y+');"></body>'+j.buildStyleHtml(this.css)+'</html>');x.$.close();var z=x.getWindow();z.$.CKEDITOR=f;x.on('key'+(g.opera?'press':'down'),function(A){var D=this;var B=A.data.getKeystroke(),C=D.document.getById(D.id).getAttribute('dir');if(D._.onKeyDown&&D._.onKeyDown(B)===false){A.data.preventDefault();return;}if(B==27||B==(C=='rtl'?39:37))if(D.onEscape&&D.onEscape(B)===false)A.data.preventDefault();},this);r=x.getBody();r.unselectable();}else r=this.document.getById(this.id);this._.holder=r;}return r;},addBlock:function(r,s){var t=this;s=t._.blocks[r]=s instanceof p.panel.block?s:new p.panel.block(t.getHolderElement(),s);if(!t._.currentBlock)t.showBlock(r);return s;},getBlock:function(r){return this._.blocks[r];},showBlock:function(r){var s=this._.blocks,t=s[r],u=this._.currentBlock,v=this.forceIFrame?this.document.getById(this.id+'_frame'):this._.holder;v.getParent().getParent().disableContextMenu();if(u){v.removeAttributes(u.attributes);u.hide();}this._.currentBlock=t;v.setAttributes(t.attributes);f.fire('ariaWidget',v);t._.focusIndex=-1;this._.onKeyDown=t.onKeyDown&&j.bind(t.onKeyDown,t);
t.onMark=function(w){v.setAttribute('aria-activedescendant',w.getId()+'_option');};t.onUnmark=function(){v.removeAttribute('aria-activedescendant');};t.show();return t;},destroy:function(){this.element&&this.element.remove();}};p.panel.block=j.createClass({$:function(r,s){var t=this;t.element=r.append(r.getDocument().createElement('div',{attributes:{tabIndex:-1,'class':'cke_panel_block',role:'presentation'},styles:{display:'none'}}));if(s)j.extend(t,s);if(!t.attributes.title)t.attributes.title=t.attributes['aria-label'];t.keys={};t._.focusIndex=-1;t.element.disableContextMenu();},_:{markItem:function(r){var u=this;if(r==-1)return;var s=u.element.getElementsByTag('a'),t=s.getItem(u._.focusIndex=r);if(g.webkit||g.opera)t.getDocument().getWindow().focus();t.focus();u.onMark&&u.onMark(t);}},proto:{show:function(){this.element.setStyle('display','');},hide:function(){var r=this;if(!r.onHide||r.onHide.call(r)!==true)r.element.setStyle('display','none');},onKeyDown:function(r){var w=this;var s=w.keys[r];switch(s){case 'next':var t=w._.focusIndex,u=w.element.getElementsByTag('a'),v;while(v=u.getItem(++t)){if(v.getAttribute('_cke_focus')&&v.$.offsetWidth){w._.focusIndex=t;v.focus();break;}}return false;case 'prev':t=w._.focusIndex;u=w.element.getElementsByTag('a');while(t>0&&(v=u.getItem(--t))){if(v.getAttribute('_cke_focus')&&v.$.offsetWidth){w._.focusIndex=t;v.focus();break;}}return false;case 'click':t=w._.focusIndex;v=t>=0&&w.element.getElementsByTag('a').getItem(t);if(v)v.$.click?v.$.click():v.$.onclick();return false;}return true;}}});o.add('listblock',{requires:['panel'],onLoad:function(){p.panel.prototype.addListBlock=function(r,s){return this.addBlock(r,new p.listBlock(this.getHolderElement(),s));};p.listBlock=j.createClass({base:p.panel.block,$:function(r,s){var v=this;s=s||{};var t=s.attributes||(s.attributes={});(v.multiSelect=!!s.multiSelect)&&(t['aria-multiselectable']=true);!t.role&&(t.role='listbox');v.base.apply(v,arguments);var u=v.keys;u[40]='next';u[9]='next';u[38]='prev';u[2000+9]='prev';u[32]='click';v._.pendingHtml=[];v._.items={};v._.groups={};},_:{close:function(){if(this._.started){this._.pendingHtml.push('</ul>');delete this._.started;}},getClick:function(){if(!this._.click)this._.click=j.addFunction(function(r){var t=this;var s=true;if(t.multiSelect)s=t.toggle(r);else t.mark(r);if(t.onClick)t.onClick(r,s);},this);return this._.click;}},proto:{add:function(r,s,t){var w=this;var u=w._.pendingHtml,v=j.getNextId();if(!w._.started){u.push('<ul role="presentation" class=cke_panel_list>');
w._.started=1;w._.size=w._.size||0;}w._.items[r]=v;u.push('<li id=',v,' class=cke_panel_listItem><a id="',v,'_option" _cke_focus=1 hidefocus=true title="',t||r,'" href="javascript:void(\'',r,'\')" onclick="CKEDITOR.tools.callFunction(',w._.getClick(),",'",r,"'); return false;\"",' role="option" aria-posinset="'+ ++w._.size+'">',s||r,'</a></li>');},startGroup:function(r){this._.close();var s=j.getNextId();this._.groups[r]=s;this._.pendingHtml.push('<h1 role="presentation" id=',s,' class=cke_panel_grouptitle>',r,'</h1>');},commit:function(){var u=this;u._.close();u.element.appendHtml(u._.pendingHtml.join(''));var r=u._.items,s=u.element.getDocument();for(var t in r)s.getById(r[t]+'_option').setAttribute('aria-setsize',u._.size);delete u._.size;u._.pendingHtml=[];},toggle:function(r){var s=this.isMarked(r);if(s)this.unmark(r);else this.mark(r);return!s;},hideGroup:function(r){var s=this.element.getDocument().getById(this._.groups[r]),t=s&&s.getNext();if(s){s.setStyle('display','none');if(t&&t.getName()=='ul')t.setStyle('display','none');}},hideItem:function(r){this.element.getDocument().getById(this._.items[r]).setStyle('display','none');},showAll:function(){var r=this._.items,s=this._.groups,t=this.element.getDocument();for(var u in r)t.getById(r[u]).setStyle('display','');for(var v in s){var w=t.getById(s[v]),x=w.getNext();w.setStyle('display','');if(x&&x.getName()=='ul')x.setStyle('display','');}},mark:function(r){var u=this;if(!u.multiSelect)u.unmarkAll();var s=u._.items[r],t=u.element.getDocument().getById(s);t.addClass('cke_selected');u.element.getDocument().getById(s+'_option').setAttribute('aria-selected',true);u.element.setAttribute('aria-activedescendant',s+'_option');u.onMark&&u.onMark(t);},unmark:function(r){var s=this;s.element.getDocument().getById(s._.items[r]).removeClass('cke_selected');s.onUnmark&&s.onUnmark(s._.items[r]);},unmarkAll:function(){var u=this;var r=u._.items,s=u.element.getDocument();for(var t in r)s.getById(r[t]).removeClass('cke_selected');u.onUnmark&&u.onUnmark();},isMarked:function(r){return this.element.getDocument().getById(this._.items[r]).hasClass('cke_selected');},focus:function(r){this._.focusIndex=-1;if(r){var s=this.element.getDocument().getById(this._.items[r]).getFirst(),t=this.element.getElementsByTag('a'),u,v=-1;while(u=t.getItem(++v)){if(u.equals(s)){this._.focusIndex=v;break;}}setTimeout(function(){s.focus();},0);}}}});}});f.themes.add('default',(function(){function r(s,t){var u,v;v=s.config.sharedSpaces;v=v&&v[t];
v=v&&f.document.getById(v);if(v){var w='<span class="cke_shared"><span class="'+s.skinClass+' '+s.id+' cke_editor_'+s.name+'">'+'<span class="'+g.cssClass+'">'+'<span class="cke_wrapper cke_'+s.lang.dir+'">'+'<span class="cke_editor">'+'<div class="cke_'+t+'">'+'</div></span></span></span></span></span>',x=v.append(m.createFromHtml(w,v.getDocument()));if(v.getCustomData('cke_hasshared'))x.hide();else v.setCustomData('cke_hasshared',1);u=x.getChild([0,0,0,0]);s.on('focus',function(){for(var y=0,z,A=v.getChildren();z=A.getItem(y);y++){if(z.type==1&&!z.equals(x)&&z.hasClass('cke_shared'))z.hide();}x.show();});s.on('destroy',function(){x.remove();});}return u;};return{build:function(s,t){var u=s.name,v=s.element,w=s.elementMode;if(!v||w==0)return;if(w==1)v.hide();var x=s.fire('themeSpace',{space:'top',html:''}).html,y=s.fire('themeSpace',{space:'contents',html:''}).html,z=s.fireOnce('themeSpace',{space:'bottom',html:''}).html,A=y&&s.config.height,B=s.config.tabIndex||s.element.getAttribute('tabindex')||0;if(!y)A='auto';else if(!isNaN(A))A+='px';var C='',D=s.config.width;if(D){if(!isNaN(D))D+='px';C+='width: '+D+';';}var E=x&&r(s,'top'),F=r(s,'bottom');E&&(E.setHtml(x),x='');F&&(F.setHtml(z),z='');var G=m.createFromHtml(['<span id="cke_',u,'" onmousedown="return false;" class="',s.skinClass,' ',s.id,' cke_editor_',u,'" dir="',s.lang.dir,'" title="',g.gecko?' ':'','" lang="',s.langCode,'"'+(g.webkit?' tabindex="'+B+'"':'')+' role="application"'+' aria-labelledby="cke_',u,'_arialbl"'+(C?' style="'+C+'"':'')+'>'+'<span id="cke_',u,'_arialbl" class="cke_voice_label">'+s.lang.editor+'</span>'+'<span class="',g.cssClass,'" role="presentation"><span class="cke_wrapper cke_',s.lang.dir,'" role="presentation"><table class="cke_editor" border="0" cellspacing="0" cellpadding="0" role="presentation"><tbody><tr',x?'':' style="display:none"',' role="presentation"><td id="cke_top_',u,'" class="cke_top" role="presentation">',x,'</td></tr><tr',y?'':' style="display:none"',' role="presentation"><td id="cke_contents_',u,'" class="cke_contents" style="height:',A,'" role="presentation">',y,'</td></tr><tr',z?'':' style="display:none"',' role="presentation"><td id="cke_bottom_',u,'" class="cke_bottom" role="presentation">',z,'</td></tr></tbody></table><style>.',s.skinClass,'{visibility:hidden;}</style></span></span></span>'].join(''));G.getChild([1,0,0,0,0]).unselectable();G.getChild([1,0,0,0,2]).unselectable();if(w==1)G.insertAfter(v);else v.append(G);s.container=G;G.disableContextMenu();
s.fireOnce('themeLoaded');s.fireOnce('uiReady');},buildDialog:function(s){var t=j.getNextNumber(),u=m.createFromHtml(['<div class="',s.id,'_dialog cke_editor_',s.name.replace('.','\\.'),'_dialog cke_skin_',s.skinName,'" dir="',s.lang.dir,'" lang="',s.langCode,'" role="dialog" aria-labelledby="%title#"><table class="cke_dialog',' '+g.cssClass,' cke_',s.lang.dir,'" style="position:absolute" role="presentation"><tr><td role="presentation"><div class="%body" role="presentation"><div id="%title#" class="%title" role="presentation"></div><a id="%close_button#" class="%close_button" href="javascript:void(0)" title="'+s.lang.common.close+'" role="button"><span class="cke_label">X</span></a>'+'<div id="%tabs#" class="%tabs" role="tablist"></div>'+'<table class="%contents" role="presentation"><tr>'+'<td id="%contents#" class="%contents" role="presentation"></td>'+'</tr></table>'+'<div id="%footer#" class="%footer" role="presentation"></div>'+'</div>'+'<div id="%tl#" class="%tl"></div>'+'<div id="%tc#" class="%tc"></div>'+'<div id="%tr#" class="%tr"></div>'+'<div id="%ml#" class="%ml"></div>'+'<div id="%mr#" class="%mr"></div>'+'<div id="%bl#" class="%bl"></div>'+'<div id="%bc#" class="%bc"></div>'+'<div id="%br#" class="%br"></div>'+'</td></tr>'+'</table>',h?'':'<style>.cke_dialog{visibility:hidden;}</style>','</div>'].join('').replace(/#/g,'_'+t).replace(/%/g,'cke_dialog_')),v=u.getChild([0,0,0,0,0]),w=v.getChild(0),x=v.getChild(1);w.unselectable();x.unselectable();return{element:u,parts:{dialog:u.getChild(0),title:w,close:x,tabs:v.getChild(2),contents:v.getChild([3,0,0,0]),footer:v.getChild(4)}};},destroy:function(s){var t=s.container;t.clearCustomData();s.element.clearCustomData();if(t)t.remove();if(s.elementMode==1)s.element.show();delete s.element;}};})());f.editor.prototype.getThemeSpace=function(r){var s='cke_'+r,t=this._[s]||(this._[s]=f.document.getById(s+'_'+this.name));return t;};f.editor.prototype.resize=function(r,s,t,u){var v=this.container,w=f.document.getById('cke_contents_'+this.name),x=u?v.getChild(1):v;g.webkit&&x.setStyle('display','none');x.setSize('width',r,true);if(g.webkit){x.$.offsetWidth;x.setStyle('display','');}var y=t?0:(x.$.offsetHeight||0)-(w.$.clientHeight||0);w.setStyle('height',Math.max(s-y,0)+'px');this.fire('resize');};f.editor.prototype.getResizable=function(){return this.container.getChild(1);};})();
