/*
Copyright (c) 2003-2010, CKSource - Frederico Knabben. All rights reserved.
For licensing, see LICENSE.html or http://ckeditor.com/license
*/

(function(){if(!window.CKEDITOR)window.CKEDITOR=(function(){var g={timestamp:'AA4E4NT',version:'3.4.2',revision:'6041',_:{},status:'unloaded',basePath:(function(){var j=window.CKEDITOR_BASEPATH||'';if(!j){var k=document.getElementsByTagName('script');for(var l=0;l<k.length;l++){var m=k[l].src.match(/(^|.*[\\\/])ckeditor(?:_basic)?(?:_source)?.js(?:\?.*)?$/i);if(m){j=m[1];break;}}}if(j.indexOf('://')==-1)if(j.indexOf('/')===0)j=location.href.match(/^.*?:\/\/[^\/]*/)[0]+j;else j=location.href.match(/^[^\?]*\/(?:)/)[0]+j;if(!j)throw 'The CKEditor installation path could not be automatically detected. Please set the global variable "CKEDITOR_BASEPATH" before creating editor instances.';return j;})(),getUrl:function(j){if(j.indexOf('://')==-1&&j.indexOf('/')!==0)j=this.basePath+j;if(this.timestamp&&j.charAt(j.length-1)!='/'&&!/[&?]t=/.test(j))j+=(j.indexOf('?')>=0?'&':'?')+'t='+this.timestamp;return j;}},h=window.CKEDITOR_GETURL;if(h){var i=g.getUrl;g.getUrl=function(j){return h.call(g,j)||i.call(g,j);};}return g;})();var g=CKEDITOR;if(!g.event){g.event=function(){};g.event.implementOn=function(h){var i=g.event.prototype;for(var j in i){if(h[j]==undefined)h[j]=i[j];}};g.event.prototype=(function(){var h=function(j){var k=j.getPrivate&&j.getPrivate()||j._||(j._={});return k.events||(k.events={});},i=function(j){this.name=j;this.listeners=[];};i.prototype={getListenerIndex:function(j){for(var k=0,l=this.listeners;k<l.length;k++){if(l[k].fn==j)return k;}return-1;}};return{on:function(j,k,l,m,n){var o=h(this),p=o[j]||(o[j]=new i(j));if(p.getListenerIndex(k)<0){var q=p.listeners;if(!l)l=this;if(isNaN(n))n=10;var r=this,s=function(u,v,w,x){var y={name:j,sender:this,editor:u,data:v,listenerData:m,stop:w,cancel:x,removeListener:function(){r.removeListener(j,k);}};k.call(l,y);return y.data;};s.fn=k;s.priority=n;for(var t=q.length-1;t>=0;t--){if(q[t].priority<=n){q.splice(t+1,0,s);return;}}q.unshift(s);}},fire:(function(){var j=false,k=function(){j=true;},l=false,m=function(){l=true;};return function(n,o,p){var q=h(this)[n],r=j,s=l;j=l=false;if(q){var t=q.listeners;if(t.length){t=t.slice(0);for(var u=0;u<t.length;u++){var v=t[u].call(this,p,o,k,m);if(typeof v!='undefined')o=v;if(j||l)break;}}}var w=l||(typeof o=='undefined'?false:o);j=r;l=s;return w;};})(),fireOnce:function(j,k,l){var m=this.fire(j,k,l);delete h(this)[j];return m;},removeListener:function(j,k){var l=h(this)[j];if(l){var m=l.getListenerIndex(k);if(m>=0)l.listeners.splice(m,1);}},hasListeners:function(j){var k=h(this)[j];
return k&&k.listeners.length>0;}};})();}if(!g.editor){g.ELEMENT_MODE_NONE=0;g.ELEMENT_MODE_REPLACE=1;g.ELEMENT_MODE_APPENDTO=2;g.editor=function(h,i,j,k){var l=this;l._={instanceConfig:h,element:i,data:k};l.elementMode=j||0;g.event.call(l);l._init();};g.editor.replace=function(h,i){var j=h;if(typeof j!='object'){j=document.getElementById(h);if(!j){var k=0,l=document.getElementsByName(h);while((j=l[k++])&&j.tagName.toLowerCase()!='textarea'){}}if(!j)throw '[CKEDITOR.editor.replace] The element with id or name "'+h+'" was not found.';}j.style.visibility='hidden';return new g.editor(i,j,1);};g.editor.appendTo=function(h,i,j){var k=h;if(typeof k!='object'){k=document.getElementById(h);if(!k)throw '[CKEDITOR.editor.appendTo] The element with id "'+h+'" was not found.';}return new g.editor(i,k,2,j);};g.editor.prototype={_init:function(){var h=g.editor._pending||(g.editor._pending=[]);h.push(this);},fire:function(h,i){return g.event.prototype.fire.call(this,h,i,this);},fireOnce:function(h,i){return g.event.prototype.fireOnce.call(this,h,i,this);}};g.event.implementOn(g.editor.prototype,true);}if(!g.env)g.env=(function(){var h=navigator.userAgent.toLowerCase(),i=window.opera,j={ie:/*@cc_on!@*/false,opera:!!i&&i.version,webkit:h.indexOf(' applewebkit/')>-1,air:h.indexOf(' adobeair/')>-1,mac:h.indexOf('macintosh')>-1,quirks:document.compatMode=='BackCompat',mobile:h.indexOf('mobile')>-1,isCustomDomain:function(){if(!this.ie)return false;var m=document.domain,n=window.location.hostname;return m!=n&&m!='['+n+']';}};j.gecko=navigator.product=='Gecko'&&!j.webkit&&!j.opera;var k=0;if(j.ie){k=parseFloat(h.match(/msie (\d+)/)[1]);j.ie8=!!document.documentMode;j.ie8Compat=document.documentMode==8;j.ie7Compat=k==7&&!document.documentMode||document.documentMode==7;j.ie6Compat=k<7||j.quirks;}if(j.gecko){var l=h.match(/rv:([\d\.]+)/);if(l){l=l[1].split('.');k=l[0]*10000+(l[1]||0)*100+ +(l[2]||0);}}if(j.opera)k=parseFloat(i.version());if(j.air)k=parseFloat(h.match(/ adobeair\/(\d+)/)[1]);if(j.webkit)k=parseFloat(h.match(/ applewebkit\/(\d+)/)[1]);j.version=k;j.isCompatible=!j.mobile&&(j.ie&&k>=6||j.gecko&&k>=10801||j.opera&&k>=9.5||j.air&&k>=1||j.webkit&&k>=522||false);j.cssClass='cke_browser_'+(j.ie?'ie':j.gecko?'gecko':j.opera?'opera':j.air?'air':j.webkit?'webkit':'unknown');if(j.quirks)j.cssClass+=' cke_browser_quirks';if(j.ie){j.cssClass+=' cke_browser_ie'+(j.version<7?'6':j.version>=8?document.documentMode:'7');if(j.quirks)j.cssClass+=' cke_browser_iequirks';
}if(j.gecko&&k<10900)j.cssClass+=' cke_browser_gecko18';return j;})();var h=g.env;var i=h.ie;if(g.status=='unloaded')(function(){g.event.implementOn(g);g.loadFullCore=function(){if(g.status!='basic_ready'){g.loadFullCore._load=1;return;}delete g.loadFullCore;var k=document.createElement('script');k.type='text/javascript';k.src=g.basePath+'ckeditor.js';document.getElementsByTagName('head')[0].appendChild(k);};g.loadFullCoreTimeout=0;g.replaceClass='ckeditor';g.replaceByClassEnabled=1;var j=function(k,l,m,n){if(h.isCompatible){if(g.loadFullCore)g.loadFullCore();var o=m(k,l,n);g.add(o);return o;}return null;};g.replace=function(k,l){return j(k,l,g.editor.replace);};g.appendTo=function(k,l,m){return j(k,l,g.editor.appendTo,m);};g.add=function(k){var l=this._.pending||(this._.pending=[]);l.push(k);};g.replaceAll=function(){var k=document.getElementsByTagName('textarea');for(var l=0;l<k.length;l++){var m=null,n=k[l],o=n.name;if(!n.name&&!n.id)continue;if(typeof arguments[0]=='string'){var p=new RegExp('(?:^|\\s)'+arguments[0]+'(?:$|\\s)');if(!p.test(n.className))continue;}else if(typeof arguments[0]=='function'){m={};if(arguments[0](n,m)===false)continue;}this.replace(n,m);}};(function(){var k=function(){var l=g.loadFullCore,m=g.loadFullCoreTimeout;if(g.replaceByClassEnabled)g.replaceAll(g.replaceClass);g.status='basic_ready';if(l&&l._load)l();else if(m)setTimeout(function(){if(g.loadFullCore)g.loadFullCore();},m*1000);};if(window.addEventListener)window.addEventListener('load',k,false);else if(window.attachEvent)window.attachEvent('onload',k);})();g.status='basic_loaded';})();g.dom={};var j=g.dom;(function(){var k=[];g.on('reset',function(){k=[];});g.tools={arrayCompare:function(l,m){if(!l&&!m)return true;if(!l||!m||l.length!=m.length)return false;for(var n=0;n<l.length;n++){if(l[n]!=m[n])return false;}return true;},clone:function(l){var m;if(l&&l instanceof Array){m=[];for(var n=0;n<l.length;n++)m[n]=this.clone(l[n]);return m;}if(l===null||typeof l!='object'||l instanceof String||l instanceof Number||l instanceof Boolean||l instanceof Date||l instanceof RegExp)return l;m=new l.constructor();for(var o in l){var p=l[o];m[o]=this.clone(p);}return m;},capitalize:function(l){return l.charAt(0).toUpperCase()+l.substring(1).toLowerCase();},extend:function(l){var m=arguments.length,n,o;if(typeof (n=arguments[m-1])=='boolean')m--;else if(typeof (n=arguments[m-2])=='boolean'){o=arguments[m-1];m-=2;}for(var p=1;p<m;p++){var q=arguments[p];for(var r in q){if(n===true||l[r]==undefined)if(!o||r in o)l[r]=q[r];
}}return l;},prototypedCopy:function(l){var m=function(){};m.prototype=l;return new m();},isArray:function(l){return!!l&&l instanceof Array;},isEmpty:function(l){for(var m in l){if(l.hasOwnProperty(m))return false;}return true;},cssStyleToDomStyle:(function(){var l=document.createElement('div').style,m=typeof l.cssFloat!='undefined'?'cssFloat':typeof l.styleFloat!='undefined'?'styleFloat':'float';return function(n){if(n=='float')return m;else return n.replace(/-./g,function(o){return o.substr(1).toUpperCase();});};})(),buildStyleHtml:function(l){l=[].concat(l);var m,n=[];for(var o=0;o<l.length;o++){m=l[o];if(/@import|[{}]/.test(m))n.push('<style>'+m+'</style>');else n.push('<link type="text/css" rel=stylesheet href="'+m+'">');}return n.join('');},htmlEncode:function(l){var m=function(q){var r=new j.element('span');r.setText(q);return r.getHtml();},n=m('\n').toLowerCase()=='<br>'?function(q){return m(q).replace(/<br>/gi,'\n');}:m,o=m('>')=='>'?function(q){return n(q).replace(/>/g,'&gt;');}:n,p=m('  ')=='&nbsp; '?function(q){return o(q).replace(/&nbsp;/g,' ');}:o;this.htmlEncode=p;return this.htmlEncode(l);},htmlEncodeAttr:function(l){return l.replace(/"/g,'&quot;').replace(/</g,'&lt;').replace(/>/g,'&gt;');},getNextNumber:(function(){var l=0;return function(){return++l;};})(),getNextId:function(){return 'cke_'+this.getNextNumber();},override:function(l,m){return m(l);},setTimeout:function(l,m,n,o,p){if(!p)p=window;if(!n)n=p;return p.setTimeout(function(){if(o)l.apply(n,[].concat(o));else l.apply(n);},m||0);},trim:(function(){var l=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(m){return m.replace(l,'');};})(),ltrim:(function(){var l=/^[ \t\n\r]+/g;return function(m){return m.replace(l,'');};})(),rtrim:(function(){var l=/[ \t\n\r]+$/g;return function(m){return m.replace(l,'');};})(),indexOf:Array.prototype.indexOf?function(l,m){return l.indexOf(m);}:function(l,m){for(var n=0,o=l.length;n<o;n++){if(l[n]===m)return n;}return-1;},bind:function(l,m){return function(){return l.apply(m,arguments);};},createClass:function(l){var m=l.$,n=l.base,o=l.privates||l._,p=l.proto,q=l.statics;if(o){var r=m;m=function(){var v=this;var s=v._||(v._={});for(var t in o){var u=o[t];s[t]=typeof u=='function'?g.tools.bind(u,v):u;}r.apply(v,arguments);};}if(n){m.prototype=this.prototypedCopy(n.prototype);m.prototype['constructor']=m;m.prototype.base=function(){this.base=n.prototype.base;n.apply(this,arguments);this.base=arguments.callee;};}if(p)this.extend(m.prototype,p,true);if(q)this.extend(m,q,true);
return m;},addFunction:function(l,m){return k.push(function(){l.apply(m||this,arguments);})-1;},removeFunction:function(l){k[l]=null;},callFunction:function(l){var m=k[l];return m&&m.apply(window,Array.prototype.slice.call(arguments,1));},cssLength:(function(){var l=/^\d+(?:\.\d+)?$/;return function(m){return m+(l.test(m)?'px':'');};})(),repeat:function(l,m){return new Array(m+1).join(l);},tryThese:function(){var l;for(var m=0,n=arguments.length;m<n;m++){var o=arguments[m];try{l=o();break;}catch(p){}}return l;},genKey:function(){return Array.prototype.slice.call(arguments).join('-');}};})();var k=g.tools;g.dtd=(function(){var l=k.extend,m={isindex:1,fieldset:1},n={input:1,button:1,select:1,textarea:1,label:1},o=l({a:1},n),p=l({iframe:1},o),q={hr:1,ul:1,menu:1,div:1,blockquote:1,noscript:1,table:1,center:1,address:1,dir:1,pre:1,h5:1,dl:1,h4:1,noframes:1,h6:1,ol:1,h1:1,h3:1,h2:1},r={ins:1,del:1,script:1,style:1},s=l({b:1,acronym:1,bdo:1,'var':1,'#':1,abbr:1,code:1,br:1,i:1,cite:1,kbd:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,dfn:1,span:1},r),t=l({sub:1,img:1,object:1,sup:1,basefont:1,map:1,applet:1,font:1,big:1,small:1},s),u=l({p:1},t),v=l({iframe:1},t,n),w={img:1,noscript:1,br:1,kbd:1,center:1,button:1,basefont:1,h5:1,h4:1,samp:1,h6:1,ol:1,h1:1,h3:1,h2:1,form:1,font:1,'#':1,select:1,menu:1,ins:1,abbr:1,label:1,code:1,table:1,script:1,cite:1,input:1,iframe:1,strong:1,textarea:1,noframes:1,big:1,small:1,span:1,hr:1,sub:1,bdo:1,'var':1,div:1,object:1,sup:1,strike:1,dir:1,map:1,dl:1,applet:1,del:1,isindex:1,fieldset:1,ul:1,b:1,acronym:1,a:1,blockquote:1,i:1,u:1,s:1,tt:1,address:1,q:1,pre:1,p:1,em:1,dfn:1},x=l({a:1},v),y={tr:1},z={'#':1},A=l({param:1},w),B=l({form:1},m,p,q,u),C={li:1},D={style:1,script:1},E={base:1,link:1,meta:1,title:1},F=l(E,D),G={head:1,body:1},H={html:1},I={address:1,blockquote:1,center:1,dir:1,div:1,dl:1,fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hr:1,isindex:1,menu:1,noframes:1,ol:1,p:1,pre:1,table:1,ul:1};return{$nonBodyContent:l(H,G,E),$block:I,$blockLimit:{body:1,div:1,td:1,th:1,caption:1,form:1},$inline:x,$body:l({script:1,style:1},I),$cdata:{script:1,style:1},$empty:{area:1,base:1,br:1,col:1,hr:1,img:1,input:1,link:1,meta:1,param:1},$listItem:{dd:1,dt:1,li:1},$list:{ul:1,ol:1,dl:1},$nonEditable:{applet:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,script:1,textarea:1,param:1},$removeEmpty:{abbr:1,acronym:1,address:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,'var':1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},html:G,head:F,style:z,script:z,body:B,base:{},link:{},meta:{},title:z,col:{},tr:{td:1,th:1},img:{},colgroup:{col:1},noscript:B,td:B,br:{},th:B,center:B,kbd:x,button:l(u,q),basefont:{},h5:x,h4:x,samp:x,h6:x,ol:C,h1:x,h3:x,option:z,h2:x,form:l(m,p,q,u),select:{optgroup:1,option:1},font:x,ins:x,menu:C,abbr:x,label:x,table:{thead:1,col:1,tbody:1,tr:1,colgroup:1,caption:1,tfoot:1},code:x,script:z,tfoot:y,cite:x,li:B,input:{},iframe:B,strong:x,textarea:z,noframes:B,big:x,small:x,span:x,hr:{},dt:x,sub:x,optgroup:{option:1},param:{},bdo:x,'var':x,div:B,object:A,sup:x,dd:B,strike:x,area:{},dir:C,map:l({area:1,form:1,p:1},m,r,q),applet:A,dl:{dt:1,dd:1},del:x,isindex:{},fieldset:l({legend:1},w),thead:y,ul:C,acronym:x,b:x,a:v,blockquote:B,caption:x,i:x,u:x,tbody:y,s:x,address:l(p,u),tt:x,legend:x,q:x,pre:l(s,o),p:x,em:x,dfn:x};
})();var l=g.dtd;j.event=function(m){this.$=m;};j.event.prototype={getKey:function(){return this.$.keyCode||this.$.which;},getKeystroke:function(){var n=this;var m=n.getKey();if(n.$.ctrlKey||n.$.metaKey)m+=1000;if(n.$.shiftKey)m+=2000;if(n.$.altKey)m+=4000;return m;},preventDefault:function(m){var n=this.$;if(n.preventDefault)n.preventDefault();else n.returnValue=false;if(m)this.stopPropagation();},stopPropagation:function(){var m=this.$;if(m.stopPropagation)m.stopPropagation();else m.cancelBubble=true;},getTarget:function(){var m=this.$.target||this.$.srcElement;return m?new j.node(m):null;}};g.CTRL=1000;g.SHIFT=2000;g.ALT=4000;j.domObject=function(m){if(m)this.$=m;};j.domObject.prototype=(function(){var m=function(n,o){return function(p){if(typeof g!='undefined')n.fire(o,new j.event(p));};};return{getPrivate:function(){var n;if(!(n=this.getCustomData('_')))this.setCustomData('_',n={});return n;},on:function(n){var q=this;var o=q.getCustomData('_cke_nativeListeners');if(!o){o={};q.setCustomData('_cke_nativeListeners',o);}if(!o[n]){var p=o[n]=m(q,n);if(q.$.attachEvent)q.$.attachEvent('on'+n,p);else if(q.$.addEventListener)q.$.addEventListener(n,p,!!g.event.useCapture);}return g.event.prototype.on.apply(q,arguments);},removeListener:function(n){var q=this;g.event.prototype.removeListener.apply(q,arguments);if(!q.hasListeners(n)){var o=q.getCustomData('_cke_nativeListeners'),p=o&&o[n];if(p){if(q.$.detachEvent)q.$.detachEvent('on'+n,p);else if(q.$.removeEventListener)q.$.removeEventListener(n,p,false);delete o[n];}}},removeAllListeners:function(){var q=this;var n=q.getCustomData('_cke_nativeListeners');for(var o in n){var p=n[o];if(q.$.detachEvent)q.$.detachEvent('on'+o,p);else if(q.$.removeEventListener)q.$.removeEventListener(o,p,false);delete n[o];}}};})();(function(m){var n={};g.on('reset',function(){n={};});m.equals=function(o){return o&&o.$===this.$;};m.setCustomData=function(o,p){var q=this.getUniqueId(),r=n[q]||(n[q]={});r[o]=p;return this;};m.getCustomData=function(o){var p=this.$._cke_expando,q=p&&n[p];return q&&q[o];};m.removeCustomData=function(o){var p=this.$._cke_expando,q=p&&n[p],r=q&&q[o];if(typeof r!='undefined')delete q[o];return r||null;};m.clearCustomData=function(){this.removeAllListeners();var o=this.$._cke_expando;o&&delete n[o];};m.getUniqueId=function(){return this.$._cke_expando||(this.$._cke_expando=k.getNextNumber());};g.event.implementOn(m);})(j.domObject.prototype);j.window=function(m){j.domObject.call(this,m);};j.window.prototype=new j.domObject();
k.extend(j.window.prototype,{focus:function(){if(h.webkit&&this.$.parent)this.$.parent.focus();this.$.focus();},getViewPaneSize:function(){var m=this.$.document,n=m.compatMode=='CSS1Compat';return{width:(n?m.documentElement.clientWidth:m.body.clientWidth)||0,height:(n?m.documentElement.clientHeight:m.body.clientHeight)||0};},getScrollPosition:function(){var m=this.$;if('pageXOffset' in m)return{x:m.pageXOffset||0,y:m.pageYOffset||0};else{var n=m.document;return{x:n.documentElement.scrollLeft||n.body.scrollLeft||0,y:n.documentElement.scrollTop||n.body.scrollTop||0};}}});j.document=function(m){j.domObject.call(this,m);};var m=j.document;m.prototype=new j.domObject();k.extend(m.prototype,{appendStyleSheet:function(n){if(this.$.createStyleSheet)this.$.createStyleSheet(n);else{var o=new j.element('link');o.setAttributes({rel:'stylesheet',type:'text/css',href:n});this.getHead().append(o);}},appendStyleText:function(n){var q=this;if(q.$.createStyleSheet){var o=q.$.createStyleSheet('');o.cssText=n;}else{var p=new j.element('style',q);p.append(new j.text(n,q));q.getHead().append(p);}},createElement:function(n,o){var p=new j.element(n,this);if(o){if(o.attributes)p.setAttributes(o.attributes);if(o.styles)p.setStyles(o.styles);}return p;},createText:function(n){return new j.text(n,this);},focus:function(){this.getWindow().focus();},getById:function(n){var o=this.$.getElementById(n);return o?new j.element(o):null;},getByAddress:function(n,o){var p=this.$.documentElement;for(var q=0;p&&q<n.length;q++){var r=n[q];if(!o){p=p.childNodes[r];continue;}var s=-1;for(var t=0;t<p.childNodes.length;t++){var u=p.childNodes[t];if(o===true&&u.nodeType==3&&u.previousSibling&&u.previousSibling.nodeType==3)continue;s++;if(s==r){p=u;break;}}}return p?new j.node(p):null;},getElementsByTag:function(n,o){if(!i&&o)n=o+':'+n;return new j.nodeList(this.$.getElementsByTagName(n));},getHead:function(){var n=this.$.getElementsByTagName('head')[0];n=new j.element(n);return(this.getHead=function(){return n;})();},getBody:function(){var n=new j.element(this.$.body);return(this.getBody=function(){return n;})();},getDocumentElement:function(){var n=new j.element(this.$.documentElement);return(this.getDocumentElement=function(){return n;})();},getWindow:function(){var n=new j.window(this.$.parentWindow||this.$.defaultView);return(this.getWindow=function(){return n;})();}});j.node=function(n){if(n){switch(n.nodeType){case 9:return new m(n);case 1:return new j.element(n);case 3:return new j.text(n);}j.domObject.call(this,n);
}return this;};j.node.prototype=new j.domObject();g.NODE_ELEMENT=1;g.NODE_DOCUMENT=9;g.NODE_TEXT=3;g.NODE_COMMENT=8;g.NODE_DOCUMENT_FRAGMENT=11;g.POSITION_IDENTICAL=0;g.POSITION_DISCONNECTED=1;g.POSITION_FOLLOWING=2;g.POSITION_PRECEDING=4;g.POSITION_IS_CONTAINED=8;g.POSITION_CONTAINS=16;k.extend(j.node.prototype,{appendTo:function(n,o){n.append(this,o);return n;},clone:function(n,o){var p=this.$.cloneNode(n);if(!o){var q=function(r){if(r.nodeType!=1)return;r.removeAttribute('id',false);r.removeAttribute('_cke_expando',false);var s=r.childNodes;for(var t=0;t<s.length;t++)q(s[t]);};q(p);}return new j.node(p);},hasPrevious:function(){return!!this.$.previousSibling;},hasNext:function(){return!!this.$.nextSibling;},insertAfter:function(n){n.$.parentNode.insertBefore(this.$,n.$.nextSibling);return n;},insertBefore:function(n){n.$.parentNode.insertBefore(this.$,n.$);return n;},insertBeforeMe:function(n){this.$.parentNode.insertBefore(n.$,this.$);return n;},getAddress:function(n){var o=[],p=this.getDocument().$.documentElement,q=this.$;while(q&&q!=p){var r=q.parentNode,s=-1;if(r){for(var t=0;t<r.childNodes.length;t++){var u=r.childNodes[t];if(n&&u.nodeType==3&&u.previousSibling&&u.previousSibling.nodeType==3)continue;s++;if(u==q)break;}o.unshift(s);}q=r;}return o;},getDocument:function(){var n=new m(this.$.ownerDocument||this.$.parentNode.ownerDocument);return(this.getDocument=function(){return n;})();},getIndex:function(){var n=this.$,o=n.parentNode&&n.parentNode.firstChild,p=-1;while(o){p++;if(o==n)return p;o=o.nextSibling;}return-1;},getNextSourceNode:function(n,o,p){if(p&&!p.call){var q=p;p=function(t){return!t.equals(q);};}var r=!n&&this.getFirst&&this.getFirst(),s;if(!r){if(this.type==1&&p&&p(this,true)===false)return null;r=this.getNext();}while(!r&&(s=(s||this).getParent())){if(p&&p(s,true)===false)return null;r=s.getNext();}if(!r)return null;if(p&&p(r)===false)return null;if(o&&o!=r.type)return r.getNextSourceNode(false,o,p);return r;},getPreviousSourceNode:function(n,o,p){if(p&&!p.call){var q=p;p=function(t){return!t.equals(q);};}var r=!n&&this.getLast&&this.getLast(),s;if(!r){if(this.type==1&&p&&p(this,true)===false)return null;r=this.getPrevious();}while(!r&&(s=(s||this).getParent())){if(p&&p(s,true)===false)return null;r=s.getPrevious();}if(!r)return null;if(p&&p(r)===false)return null;if(o&&r.type!=o)return r.getPreviousSourceNode(false,o,p);return r;},getPrevious:function(n){var o=this.$,p;do{o=o.previousSibling;p=o&&new j.node(o);}while(p&&n&&!n(p))return p;
},getNext:function(n){var o=this.$,p;do{o=o.nextSibling;p=o&&new j.node(o);}while(p&&n&&!n(p))return p;},getParent:function(){var n=this.$.parentNode;return n&&n.nodeType==1?new j.node(n):null;},getParents:function(n){var o=this,p=[];do p[n?'push':'unshift'](o);while(o=o.getParent())return p;},getCommonAncestor:function(n){var p=this;if(n.equals(p))return p;if(n.contains&&n.contains(p))return n;var o=p.contains?p:p.getParent();do{if(o.contains(n))return o;}while(o=o.getParent())return null;},getPosition:function(n){var o=this.$,p=n.$;if(o.compareDocumentPosition)return o.compareDocumentPosition(p);if(o==p)return 0;if(this.type==1&&n.type==1){if(o.contains){if(o.contains(p))return 16+4;if(p.contains(o))return 8+2;}if('sourceIndex' in o)return o.sourceIndex<0||p.sourceIndex<0?1:o.sourceIndex<p.sourceIndex?4:2;}var q=this.getAddress(),r=n.getAddress(),s=Math.min(q.length,r.length);for(var t=0;t<=s-1;t++){if(q[t]!=r[t]){if(t<s)return q[t]<r[t]?4:2;break;}}return q.length<r.length?16+4:8+2;},getAscendant:function(n,o){var p=this.$;if(!o)p=p.parentNode;while(p){if(p.nodeName&&p.nodeName.toLowerCase()==n)return new j.node(p);p=p.parentNode;}return null;},hasAscendant:function(n,o){var p=this.$;if(!o)p=p.parentNode;while(p){if(p.nodeName&&p.nodeName.toLowerCase()==n)return true;p=p.parentNode;}return false;},move:function(n,o){n.append(this.remove(),o);},remove:function(n){var o=this.$,p=o.parentNode;if(p){if(n)for(var q;q=o.firstChild;)p.insertBefore(o.removeChild(q),o);p.removeChild(o);}return this;},replace:function(n){this.insertBefore(n);n.remove();},trim:function(){this.ltrim();this.rtrim();},ltrim:function(){var q=this;var n;while(q.getFirst&&(n=q.getFirst())){if(n.type==3){var o=k.ltrim(n.getText()),p=n.getLength();if(!o){n.remove();continue;}else if(o.length<p){n.split(p-o.length);q.$.removeChild(q.$.firstChild);}}break;}},rtrim:function(){var q=this;var n;while(q.getLast&&(n=q.getLast())){if(n.type==3){var o=k.rtrim(n.getText()),p=n.getLength();if(!o){n.remove();continue;}else if(o.length<p){n.split(o.length);q.$.lastChild.parentNode.removeChild(q.$.lastChild);}}break;}if(!i&&!h.opera){n=q.$.lastChild;if(n&&n.type==1&&n.nodeName.toLowerCase()=='br')n.parentNode.removeChild(n);}},isReadOnly:function(){var n=this;while(n){if(n.type==1){if(n.is('body')||n.getCustomData('_cke_notReadOnly'))break;if(n.getAttribute('contentEditable')=='false')return n;else if(n.getAttribute('contentEditable')=='true')break;}n=n.getParent();}return false;}});j.nodeList=function(n){this.$=n;
};j.nodeList.prototype={count:function(){return this.$.length;},getItem:function(n){var o=this.$[n];return o?new j.node(o):null;}};j.element=function(n,o){if(typeof n=='string')n=(o?o.$:document).createElement(n);j.domObject.call(this,n);};var n=j.element;n.get=function(o){return o&&(o.$?o:new n(o));};n.prototype=new j.node();n.createFromHtml=function(o,p){var q=new n('div',p);q.setHtml(o);return q.getFirst().remove();};n.setMarker=function(o,p,q,r){var s=p.getCustomData('list_marker_id')||p.setCustomData('list_marker_id',k.getNextNumber()).getCustomData('list_marker_id'),t=p.getCustomData('list_marker_names')||p.setCustomData('list_marker_names',{}).getCustomData('list_marker_names');o[s]=p;t[q]=1;return p.setCustomData(q,r);};n.clearAllMarkers=function(o){for(var p in o)n.clearMarkers(o,o[p],1);};n.clearMarkers=function(o,p,q){var r=p.getCustomData('list_marker_names'),s=p.getCustomData('list_marker_id');for(var t in r)p.removeCustomData(t);p.removeCustomData('list_marker_names');if(q){p.removeCustomData('list_marker_id');delete o[s];}};k.extend(n.prototype,{type:1,addClass:function(o){var p=this.$.className;if(p){var q=new RegExp('(?:^|\\s)'+o+'(?:\\s|$)','');if(!q.test(p))p+=' '+o;}this.$.className=p||o;},removeClass:function(o){var p=this.getAttribute('class');if(p){var q=new RegExp('(?:^|\\s+)'+o+'(?=\\s|$)','i');if(q.test(p)){p=p.replace(q,'').replace(/^\s+/,'');if(p)this.setAttribute('class',p);else this.removeAttribute('class');}}},hasClass:function(o){var p=new RegExp('(?:^|\\s+)'+o+'(?=\\s|$)','');return p.test(this.getAttribute('class'));},append:function(o,p){var q=this;if(typeof o=='string')o=q.getDocument().createElement(o);if(p)q.$.insertBefore(o.$,q.$.firstChild);else q.$.appendChild(o.$);return o;},appendHtml:function(o){var q=this;if(!q.$.childNodes.length)q.setHtml(o);else{var p=new n('div',q.getDocument());p.setHtml(o);p.moveChildren(q);}},appendText:function(o){if(this.$.text!=undefined)this.$.text+=o;else this.append(new j.text(o));},appendBogus:function(){var q=this;var o=q.getLast();while(o&&o.type==3&&!k.rtrim(o.getText()))o=o.getPrevious();if(!o||!o.is||!o.is('br')){var p=h.opera?q.getDocument().createText(''):q.getDocument().createElement('br');h.gecko&&p.setAttribute('type','_moz');q.append(p);}},breakParent:function(o){var r=this;var p=new j.range(r.getDocument());p.setStartAfter(r);p.setEndAfter(o);var q=p.extractContents();p.insertNode(r.remove());q.insertAfterNode(r);},contains:i||h.webkit?function(o){var p=this.$;return o.type!=1?p.contains(o.getParent().$):p!=o.$&&p.contains(o.$);
}:function(o){return!!(this.$.compareDocumentPosition(o.$)&16);},focus:function(){try{this.$.focus();}catch(o){}},getHtml:function(){var o=this.$.innerHTML;return i?o.replace(/<\?[^>]*>/g,''):o;},getOuterHtml:function(){var p=this;if(p.$.outerHTML)return p.$.outerHTML.replace(/<\?[^>]*>/,'');var o=p.$.ownerDocument.createElement('div');o.appendChild(p.$.cloneNode(true));return o.innerHTML;},setHtml:function(o){return this.$.innerHTML=o;},setText:function(o){n.prototype.setText=this.$.innerText!=undefined?function(p){return this.$.innerText=p;}:function(p){return this.$.textContent=p;};return this.setText(o);},getAttribute:(function(){var o=function(p){return this.$.getAttribute(p,2);};if(i&&(h.ie7Compat||h.ie6Compat))return function(p){var t=this;switch(p){case 'class':p='className';break;case 'tabindex':var q=o.call(t,p);if(q!==0&&t.$.tabIndex===0)q=null;return q;break;case 'checked':var r=t.$.attributes.getNamedItem(p),s=r.specified?r.nodeValue:t.$.checked;return s?'checked':null;case 'hspace':return t.$.hspace;case 'style':return t.$.style.cssText;}return o.call(t,p);};else return o;})(),getChildren:function(){return new j.nodeList(this.$.childNodes);},getComputedStyle:i?function(o){return this.$.currentStyle[k.cssStyleToDomStyle(o)];}:function(o){return this.getWindow().$.getComputedStyle(this.$,'').getPropertyValue(o);},getDtd:function(){var o=l[this.getName()];this.getDtd=function(){return o;};return o;},getElementsByTag:m.prototype.getElementsByTag,getTabIndex:i?function(){var o=this.$.tabIndex;if(o===0&&!l.$tabIndex[this.getName()]&&parseInt(this.getAttribute('tabindex'),10)!==0)o=-1;return o;}:h.webkit?function(){var o=this.$.tabIndex;if(o==undefined){o=parseInt(this.getAttribute('tabindex'),10);if(isNaN(o))o=-1;}return o;}:function(){return this.$.tabIndex;},getText:function(){return this.$.textContent||this.$.innerText||'';},getWindow:function(){return this.getDocument().getWindow();},getId:function(){return this.$.id||null;},getNameAtt:function(){return this.$.name||null;},getName:function(){var o=this.$.nodeName.toLowerCase();if(i){var p=this.$.scopeName;if(p!='HTML')o=p.toLowerCase()+':'+o;}return(this.getName=function(){return o;})();},getValue:function(){return this.$.value;},getFirst:function(o){var p=this.$.firstChild,q=p&&new j.node(p);if(q&&o&&!o(q))q=q.getNext(o);return q;},getLast:function(o){var p=this.$.lastChild,q=p&&new j.node(p);if(q&&o&&!o(q))q=q.getPrevious(o);return q;},getStyle:function(o){return this.$.style[k.cssStyleToDomStyle(o)];
},is:function(){var o=this.getName();for(var p=0;p<arguments.length;p++){if(arguments[p]==o)return true;}return false;},isEditable:function(){var o=this.getName(),p=!l.$nonEditable[o]&&(l[o]||l.span);return p&&p['#'];},isIdentical:function(o){if(this.getName()!=o.getName())return false;var p=this.$.attributes,q=o.$.attributes,r=p.length,s=q.length;if(!i&&r!=s)return false;for(var t=0;t<r;t++){var u=p[t];if((!i||u.specified&&u.nodeName!='_cke_expando')&&u.nodeValue!=o.getAttribute(u.nodeName))return false;}if(i)for(t=0;t<s;t++){u=q[t];if(u.specified&&u.nodeName!='_cke_expando'&&u.nodeValue!=this.getAttribute(u.nodeName))return false;}return true;},isVisible:function(){var o=!!this.$.offsetHeight&&this.getComputedStyle('visibility')!='hidden',p,q;if(o&&(h.webkit||h.opera)){p=this.getWindow();if(!p.equals(g.document.getWindow())&&(q=p.$.frameElement))o=new n(q).isVisible();}return o;},isEmptyInlineRemoveable:function(){if(!l.$removeEmpty[this.getName()])return false;var o=this.getChildren();for(var p=0,q=o.count();p<q;p++){var r=o.getItem(p);if(r.type==1&&r.getAttribute('_cke_bookmark'))continue;if(r.type==1&&!r.isEmptyInlineRemoveable()||r.type==3&&k.trim(r.getText()))return false;}return true;},hasAttributes:i&&(h.ie7Compat||h.ie6Compat)?function(){var o=this.$.attributes;for(var p=0;p<o.length;p++){var q=o[p];switch(q.nodeName){case 'class':if(this.getAttribute('class'))return true;case '_cke_expando':continue;default:if(q.specified)return true;}}return false;}:function(){var o=this.$.attributes,p=o.length,q={_cke_expando:1,_moz_dirty:1};return p>0&&(p>2||!q[o[0].nodeName]||p==2&&!q[o[1].nodeName]);},hasAttribute:function(o){var p=this.$.attributes.getNamedItem(o);return!!(p&&p.specified);},hide:function(){this.setStyle('display','none');},moveChildren:function(o,p){var q=this.$;o=o.$;if(q==o)return;var r;if(p)while(r=q.lastChild)o.insertBefore(q.removeChild(r),o.firstChild);else while(r=q.firstChild)o.appendChild(q.removeChild(r));},mergeSiblings:(function(){function o(p,q,r){if(q&&q.type==1){var s=[];while(q.getAttribute('_cke_bookmark')||q.isEmptyInlineRemoveable()){s.push(q);q=r?q.getNext():q.getPrevious();if(!q||q.type!=1)return;}if(p.isIdentical(q)){var t=r?p.getLast():p.getFirst();while(s.length)s.shift().move(p,!r);q.moveChildren(p,!r);q.remove();if(t&&t.type==1)t.mergeSiblings();}}};return function(){var p=this;if(!(l.$removeEmpty[p.getName()]||p.is('a')))return;o(p,p.getNext(),true);o(p,p.getPrevious());};})(),show:function(){this.setStyles({display:'',visibility:''});
},setAttribute:(function(){var o=function(p,q){this.$.setAttribute(p,q);return this;};if(i&&(h.ie7Compat||h.ie6Compat))return function(p,q){var r=this;if(p=='class')r.$.className=q;else if(p=='style')r.$.style.cssText=q;else if(p=='tabindex')r.$.tabIndex=q;else if(p=='checked')r.$.checked=q;else o.apply(r,arguments);return r;};else return o;})(),setAttributes:function(o){for(var p in o)this.setAttribute(p,o[p]);return this;},setValue:function(o){this.$.value=o;return this;},removeAttribute:(function(){var o=function(p){this.$.removeAttribute(p);};if(i&&(h.ie7Compat||h.ie6Compat))return function(p){if(p=='class')p='className';else if(p=='tabindex')p='tabIndex';o.call(this,p);};else return o;})(),removeAttributes:function(o){if(k.isArray(o))for(var p=0;p<o.length;p++)this.removeAttribute(o[p]);else for(var q in o)o.hasOwnProperty(q)&&this.removeAttribute(q);},removeStyle:function(o){var p=this;p.setStyle(o,'');if(p.$.style.removeAttribute)p.$.style.removeAttribute(k.cssStyleToDomStyle(o));if(!p.$.style.cssText)p.removeAttribute('style');},setStyle:function(o,p){this.$.style[k.cssStyleToDomStyle(o)]=p;return this;},setStyles:function(o){for(var p in o)this.setStyle(p,o[p]);return this;},setOpacity:function(o){if(i){o=Math.round(o*100);this.setStyle('filter',o>=100?'':'progid:DXImageTransform.Microsoft.Alpha(opacity='+o+')');}else this.setStyle('opacity',o);},unselectable:h.gecko?function(){this.$.style.MozUserSelect='none';this.on('dragstart',function(o){o.data.preventDefault();});}:h.webkit?function(){this.$.style.KhtmlUserSelect='none';this.on('dragstart',function(o){o.data.preventDefault();});}:function(){if(i||h.opera){var o=this.$,p,q=0;o.unselectable='on';while(p=o.all[q++])switch(p.tagName.toLowerCase()){case 'iframe':case 'textarea':case 'input':case 'select':break;default:p.unselectable='on';}}},getPositionedAncestor:function(){var o=this;while(o.getName()!='html'){if(o.getComputedStyle('position')!='static')return o;o=o.getParent();}return null;},getDocumentPosition:function(o){var J=this;var p=0,q=0,r=J.getDocument().getBody(),s=J.getDocument().$.compatMode=='BackCompat',t=J.getDocument();if(document.documentElement.getBoundingClientRect){var u=J.$.getBoundingClientRect(),v=t.$,w=v.documentElement,x=w.clientTop||r.$.clientTop||0,y=w.clientLeft||r.$.clientLeft||0,z=true;if(i){var A=t.getDocumentElement().contains(J),B=t.getBody().contains(J);z=s&&B||!s&&A;}if(z){p=u.left+(!s&&w.scrollLeft||r.$.scrollLeft);p-=y;q=u.top+(!s&&w.scrollTop||r.$.scrollTop);
q-=x;}}else{var C=J,D=null,E;while(C&&!(C.getName()=='body'||C.getName()=='html')){p+=C.$.offsetLeft-C.$.scrollLeft;q+=C.$.offsetTop-C.$.scrollTop;if(!C.equals(J)){p+=C.$.clientLeft||0;q+=C.$.clientTop||0;}var F=D;while(F&&!F.equals(C)){p-=F.$.scrollLeft;q-=F.$.scrollTop;F=F.getParent();}D=C;C=(E=C.$.offsetParent)?new n(E):null;}}if(o){var G=J.getWindow(),H=o.getWindow();if(!G.equals(H)&&G.$.frameElement){var I=new n(G.$.frameElement).getDocumentPosition(o);p+=I.x;q+=I.y;}}if(!document.documentElement.getBoundingClientRect)if(h.gecko&&!s){p+=J.$.clientLeft?1:0;q+=J.$.clientTop?1:0;}return{x:p,y:q};},scrollIntoView:function(o){var u=this;var p=u.getWindow(),q=p.getViewPaneSize().height,r=q*-1;if(o)r+=q;else{r+=u.$.offsetHeight||0;r+=parseInt(u.getComputedStyle('marginBottom')||0,10)||0;}var s=u.getDocumentPosition();r+=s.y;r=r<0?0:r;var t=p.getScrollPosition().y;if(r>t||r<t-q)p.$.scrollTo(0,r);},setState:function(o){var p=this;switch(o){case 1:p.addClass('cke_on');p.removeClass('cke_off');p.removeClass('cke_disabled');break;case 0:p.addClass('cke_disabled');p.removeClass('cke_off');p.removeClass('cke_on');break;default:p.addClass('cke_off');p.removeClass('cke_on');p.removeClass('cke_disabled');break;}},getFrameDocument:function(){var o=this.$;try{o.contentWindow.document;}catch(p){o.src=o.src;if(i&&h.version<7)window.showModalDialog('javascript:document.write("<script>window.setTimeout(function(){window.close();},50);</script>")');}return o&&new m(o.contentWindow.document);},copyAttributes:function(o,p){var v=this;var q=v.$.attributes;p=p||{};for(var r=0;r<q.length;r++){var s=q[r],t=s.nodeName.toLowerCase(),u;if(t in p)continue;if(t=='checked'&&(u=v.getAttribute(t)))o.setAttribute(t,u);else if(s.specified||i&&s.nodeValue&&t=='value'){u=v.getAttribute(t);if(u===null)u=s.nodeValue;o.setAttribute(t,u);}}if(v.$.style.cssText!=='')o.$.style.cssText=v.$.style.cssText;},renameNode:function(o){var r=this;if(r.getName()==o)return;var p=r.getDocument(),q=new n(o,p);r.copyAttributes(q);r.moveChildren(q);r.getParent()&&r.$.parentNode.replaceChild(q.$,r.$);q.$._cke_expando=r.$._cke_expando;r.$=q.$;},getChild:function(o){var p=this.$;if(!o.slice)p=p.childNodes[o];else while(o.length>0&&p)p=p.childNodes[o.shift()];return p?new j.node(p):null;},getChildCount:function(){return this.$.childNodes.length;},disableContextMenu:function(){this.on('contextmenu',function(o){if(!o.data.getTarget().hasClass('cke_enable_context_menu'))o.data.preventDefault();});},setSize:(function(){var o={width:['border-left-width','border-right-width','padding-left','padding-right'],height:['border-top-width','border-bottom-width','padding-top','padding-bottom']};
return function(p,q,r){if(typeof q=='number'){if(r&&!(i&&h.quirks)){var s=0;for(var t=0,u=o[p].length;t<u;t++)s+=parseInt(this.getComputedStyle(o[p][t])||0,10)||0;q-=s;}this.setStyle(p,q+'px');}};})(),getDirection:function(o){return o?this.getComputedStyle('direction'):this.getStyle('direction')||this.getAttribute('dir');}});g.command=function(o,p){this.uiItems=[];this.exec=function(q){if(this.state==0)return false;if(this.editorFocus)o.focus();return p.exec.call(this,o,q)!==false;};k.extend(this,p,{modes:{wysiwyg:1},editorFocus:1,state:2});g.event.call(this);};g.command.prototype={enable:function(){var o=this;if(o.state==0)o.setState(!o.preserveState||typeof o.previousState=='undefined'?2:o.previousState);},disable:function(){this.setState(0);},setState:function(o){var p=this;if(p.state==o)return false;p.previousState=p.state;p.state=o;p.fire('state');return true;},toggleState:function(){var o=this;if(o.state==2)o.setState(1);else if(o.state==1)o.setState(2);}};g.event.implementOn(g.command.prototype,true);g.ENTER_P=1;g.ENTER_BR=2;g.ENTER_DIV=3;g.config={customConfig:'config.js',autoUpdateElement:true,baseHref:'',contentsCss:g.basePath+'contents.css',contentsLangDirection:'ui',contentsLanguage:'',language:'',defaultLanguage:'en',enterMode:1,forceEnterMode:false,shiftEnterMode:2,corePlugins:'',docType:'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">',bodyId:'',bodyClass:'',fullPage:false,height:200,plugins:'about,a11yhelp,basicstyles,bidi,blockquote,button,clipboard,colorbutton,colordialog,contextmenu,dialogadvtab,div,elementspath,enterkey,entities,filebrowser,find,flash,font,format,forms,horizontalrule,htmldataprocessor,image,indent,justify,keystrokes,link,list,liststyle,maximize,newpage,pagebreak,pastefromword,pastetext,popup,preview,print,removeformat,resize,save,scayt,smiley,showblocks,showborders,sourcearea,stylescombo,table,tabletools,specialchar,tab,templates,toolbar,undo,wysiwygarea,wsc',extraPlugins:'',removePlugins:'',protectedSource:[],tabIndex:0,theme:'default',skin:'kama',width:'',baseFloatZIndex:10000};var o=g.config;g.focusManager=function(p){if(p.focusManager)return p.focusManager;this.hasFocus=false;this._={editor:p};return this;};g.focusManager.prototype={focus:function(){var q=this;if(q._.timer)clearTimeout(q._.timer);if(!q.hasFocus){if(g.currentInstance)g.currentInstance.focusManager.forceBlur();var p=q._.editor;p.container.getChild(1).addClass('cke_focus');q.hasFocus=true;
p.fire('focus');}},blur:function(){var p=this;if(p._.timer)clearTimeout(p._.timer);p._.timer=setTimeout(function(){delete p._.timer;p.forceBlur();},100);},forceBlur:function(){if(this.hasFocus){var p=this._.editor;p.container.getChild(1).removeClass('cke_focus');this.hasFocus=false;p.fire('blur');}}};(function(){var p={};g.lang={languages:{af:1,ar:1,bg:1,bn:1,bs:1,ca:1,cs:1,cy:1,da:1,de:1,el:1,'en-au':1,'en-ca':1,'en-gb':1,en:1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fo:1,'fr-ca':1,fr:1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,is:1,it:1,ja:1,km:1,ko:1,lt:1,lv:1,mn:1,ms:1,nb:1,nl:1,no:1,pl:1,'pt-br':1,pt:1,ro:1,ru:1,sk:1,sl:1,'sr-latn':1,sr:1,sv:1,th:1,tr:1,uk:1,vi:1,'zh-cn':1,zh:1},load:function(q,r,s){if(!q||!g.lang.languages[q])q=this.detect(r,q);if(!this[q])g.scriptLoader.load(g.getUrl('lang/'+q+'.js'),function(){s(q,this[q]);},this);else s(q,this[q]);},detect:function(q,r){var s=this.languages;r=r||navigator.userLanguage||navigator.language;var t=r.toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/),u=t[1],v=t[2];if(s[u+'-'+v])u=u+'-'+v;else if(!s[u])u=null;g.lang.detect=u?function(){return u;}:function(w){return w;};return u||q;}};})();g.scriptLoader=(function(){var p={},q={};return{load:function(r,s,t,u,v){var w=typeof r=='string';if(w)r=[r];if(!t)t=g;var x=r.length,y=[],z=[],A=function(F){if(s)if(w)s.call(t,F);else s.call(t,y,z);};if(x===0){A(true);return;}var B=function(F,G){(G?y:z).push(F);if(--x<=0){v&&g.document.getDocumentElement().removeStyle('cursor');A(G);}},C=function(F,G){p[F]=1;var H=q[F];delete q[F];for(var I=0;I<H.length;I++)H[I](F,G);},D=function(F){if(u!==true&&p[F]){B(F,true);return;}var G=q[F]||(q[F]=[]);G.push(B);if(G.length>1)return;var H=new n('script');H.setAttributes({type:'text/javascript',src:F});if(s)if(i)H.$.onreadystatechange=function(){if(H.$.readyState=='loaded'||H.$.readyState=='complete'){H.$.onreadystatechange=null;C(F,true);}};else{H.$.onload=function(){setTimeout(function(){C(F,true);},0);};H.$.onerror=function(){C(F,false);};}H.appendTo(g.document.getHead());};v&&g.document.getDocumentElement().setStyle('cursor','wait');for(var E=0;E<x;E++)D(r[E]);},loadCode:function(r){var s=new n('script');s.setAttribute('type','text/javascript');s.appendText(r);s.appendTo(g.document.getHead());}};})();g.resourceManager=function(p,q){var r=this;r.basePath=p;r.fileName=q;r.registered={};r.loaded={};r.externals={};r._={waitingList:{}};};g.resourceManager.prototype={add:function(p,q){if(this.registered[p])throw '[CKEDITOR.resourceManager.add] The resource name "'+p+'" is already registered.';
g.fire(p+k.capitalize(this.fileName)+'Ready',this.registered[p]=q||{});},get:function(p){return this.registered[p]||null;},getPath:function(p){var q=this.externals[p];return g.getUrl(q&&q.dir||this.basePath+p+'/');},getFilePath:function(p){var q=this.externals[p];return g.getUrl(this.getPath(p)+(q&&typeof q.file=='string'?q.file:this.fileName+'.js'));},addExternal:function(p,q,r){p=p.split(',');for(var s=0;s<p.length;s++){var t=p[s];this.externals[t]={dir:q,file:r};}},load:function(p,q,r){if(!k.isArray(p))p=p?[p]:[];var s=this.loaded,t=this.registered,u=[],v={},w={};for(var x=0;x<p.length;x++){var y=p[x];if(!y)continue;if(!s[y]&&!t[y]){var z=this.getFilePath(y);u.push(z);if(!(z in v))v[z]=[];v[z].push(y);}else w[y]=this.get(y);}g.scriptLoader.load(u,function(A,B){if(B.length)throw '[CKEDITOR.resourceManager.load] Resource name "'+v[B[0]].join(',')+'" was not found at "'+B[0]+'".';for(var C=0;C<A.length;C++){var D=v[A[C]];for(var E=0;E<D.length;E++){var F=D[E];w[F]=this.get(F);s[F]=1;}}q.call(r,w);},this);}};g.plugins=new g.resourceManager('plugins/','plugin');var p=g.plugins;p.load=k.override(p.load,function(q){return function(r,s,t){var u={},v=function(w){q.call(this,w,function(x){k.extend(u,x);var y=[];for(var z in x){var A=x[z],B=A&&A.requires;if(B)for(var C=0;C<B.length;C++){if(!u[B[C]])y.push(B[C]);}}if(y.length)v.call(this,y);else{for(z in u){A=u[z];if(A.onLoad&&!A.onLoad._called){A.onLoad();A.onLoad._called=1;}}if(s)s.call(t||window,u);}},this);};v.call(this,r);};});p.setLang=function(q,r,s){var t=this.get(q),u=t.lang||(t.lang={});u[r]=s;};(function(){var q={},r=function(s,t){var u=function(){v.removeAllListeners();q[s]=1;t();},v=new n('img');v.on('load',u);v.on('error',u);v.setAttribute('src',s);};g.imageCacher={load:function(s,t){var u=s.length,v=new g.event();v.on('loaded',function(){v.finished=1;});if(t)v.on('loaded',t);var w=function(){if(--u===0)v.fire('loaded');};for(var x=0;x<s.length;x++){var y=s[x];if(q[y])w();else r(y,w);}return v;}};})();g.skins=(function(){var q={},r={},s={},t=function(u,v,w,x){var y=q[v];if(!u.skin){u.skin=y;if(y.init)y.init(u);}var z=function(J){for(var K=0;K<J.length;K++)J[K]=g.getUrl(s[v]+J[K]);};function A(J,K){return J.replace(/url\s*\(([\s'"]*)(.*?)([\s"']*)\)/g,function(L,M,N,O){if(/^\/|^\w?:/.test(N))return L;else return 'url('+K+M+N+O+')';});};var B=y.preload;if(B&&B.length>0){if(!r[v]){z(B);r[v]=g.imageCacher.load(B);}if(!r[v].finished){r[v].on('loaded',function(){t(u,v,w,x);});return;}}w=y[w];var C=!w||!!w._isLoaded;
if(C)x&&x();else{var D=w._pending||(w._pending=[]);D.push(x);if(D.length>1)return;var E=!w.css||!w.css.length,F=!w.js||!w.js.length,G=function(){if(E&&F){w._isLoaded=1;for(var J=0;J<D.length;J++){if(D[J])D[J]();}}};if(!E){var H=w.css;if(k.isArray(H)){z(H);for(var I=0;I<H.length;I++)g.document.appendStyleSheet(H[I]);}else{H=A(H,g.getUrl(s[v]));g.document.appendStyleText(H);}w.css=H;E=1;}if(!F){z(w.js);g.scriptLoader.load(w.js,function(){F=1;G();});}G();}};return{add:function(u,v){q[u]=v;v.skinPath=s[u]||(s[u]=g.getUrl('skins/'+u+'/'));},load:function(u,v,w){var x=u.skinName,y=u.skinPath;if(q[x])t(u,x,v,w);else{s[x]=y;g.scriptLoader.load(g.getUrl(y+'skin.js'),function(){t(u,x,v,w);});}}};})();g.themes=new g.resourceManager('themes/','theme');g.ui=function(q){if(q.ui)return q.ui;this._={handlers:{},items:{},editor:q};return this;};var q=g.ui;q.prototype={add:function(r,s,t){this._.items[r]={type:s,command:t.command||null,args:Array.prototype.slice.call(arguments,2)};},create:function(r){var w=this;var s=w._.items[r],t=s&&w._.handlers[s.type],u=s&&s.command&&w._.editor.getCommand(s.command),v=t&&t.create.apply(w,s.args);if(u)u.uiItems.push(v);return v;},addHandler:function(r,s){this._.handlers[r]=s;}};(function(){var r=0,s=function(){var D='editor'+ ++r;return g.instances&&g.instances[D]?s():D;},t={},u=function(D){var E=D.config.customConfig;if(!E)return false;E=g.getUrl(E);var F=t[E]||(t[E]={});if(F.fn){F.fn.call(D,D.config);if(g.getUrl(D.config.customConfig)==E||!u(D))D.fireOnce('customConfigLoaded');}else g.scriptLoader.load(E,function(){if(g.editorConfig)F.fn=g.editorConfig;else F.fn=function(){};u(D);});return true;},v=function(D,E){D.on('customConfigLoaded',function(){if(E){if(E.on)for(var F in E.on)D.on(F,E.on[F]);k.extend(D.config,E,true);delete D.config.on;}w(D);});if(E&&E.customConfig!=undefined)D.config.customConfig=E.customConfig;if(!u(D))D.fireOnce('customConfigLoaded');},w=function(D){var E=D.config.skin.split(','),F=E[0],G=g.getUrl(E[1]||'skins/'+F+'/');D.skinName=F;D.skinPath=G;D.skinClass='cke_skin_'+F;D.tabIndex=D.config.tabIndex||D.element.getAttribute('tabindex')||0;D.fireOnce('configLoaded');z(D);},x=function(D){g.lang.load(D.config.language,D.config.defaultLanguage,function(E,F){D.langCode=E;D.lang=k.prototypedCopy(F);if(h.gecko&&h.version<10900&&D.lang.dir=='rtl')D.lang.dir='ltr';var G=D.config;G.contentsLangDirection=='ui'&&(G.contentsLangDirection=D.lang.dir);y(D);});},y=function(D){var E=D.config,F=E.plugins,G=E.extraPlugins,H=E.removePlugins;
if(G){var I=new RegExp('(?:^|,)(?:'+G.replace(/\s*,\s*/g,'|')+')(?=,|$)','g');F=F.replace(I,'');F+=','+G;}if(H){I=new RegExp('(?:^|,)(?:'+H.replace(/\s*,\s*/g,'|')+')(?=,|$)','g');F=F.replace(I,'');}p.load(F.split(','),function(J){var K=[],L=[],M=[];D.plugins=J;for(var N in J){var O=J[N],P=O.lang,Q=p.getPath(N),R=null;O.path=Q;if(P){R=k.indexOf(P,D.langCode)>=0?D.langCode:P[0];if(!O.lang[R])M.push(g.getUrl(Q+'lang/'+R+'.js'));else{k.extend(D.lang,O.lang[R]);R=null;}}L.push(R);K.push(O);}g.scriptLoader.load(M,function(){var S=['beforeInit','init','afterInit'];for(var T=0;T<S.length;T++)for(var U=0;U<K.length;U++){var V=K[U];if(T===0&&L[U]&&V.lang)k.extend(D.lang,V.lang[L[U]]);if(V[S[T]])V[S[T]](D);}D.fire('pluginsLoaded');A(D);});});},z=function(D){g.skins.load(D,'editor',function(){x(D);});},A=function(D){var E=D.config.theme;g.themes.load(E,function(){var F=D.theme=g.themes.get(E);F.path=g.themes.getPath(E);F.build(D);if(D.config.autoUpdateElement)B(D);});},B=function(D){var E=D.element;if(D.elementMode==1&&E.is('textarea')){var F=E.$.form&&new n(E.$.form);if(F){function G(){D.updateElement();};F.on('submit',G);if(!F.$.submit.nodeName)F.$.submit=k.override(F.$.submit,function(H){return function(){D.updateElement();if(H.apply)H.apply(this,arguments);else H();};});D.on('destroy',function(){F.removeListener('submit',G);});}}};function C(){var D,E=this._.commands,F=this.mode;for(var G in E){D=E[G];D[D.startDisabled?'disable':D.modes[F]?'enable':'disable']();}};g.editor.prototype._init=function(){var F=this;var D=n.get(F._.element),E=F._.instanceConfig;delete F._.element;delete F._.instanceConfig;F._.commands={};F._.styles=[];F.element=D;F.name=D&&F.elementMode==1&&(D.getId()||D.getNameAtt())||s();if(F.name in g.instances)throw '[CKEDITOR.editor] The instance "'+F.name+'" already exists.';F.id=k.getNextId();F.config=k.prototypedCopy(o);F.ui=new q(F);F.focusManager=new g.focusManager(F);g.fire('instanceCreated',null,F);F.on('mode',C,null,null,1);v(F,E);};})();k.extend(g.editor.prototype,{addCommand:function(r,s){return this._.commands[r]=new g.command(this,s);},addCss:function(r){this._.styles.push(r);},destroy:function(r){var x=this;if(!r)x.updateElement();if(x.mode)x._.modes[x.mode].unload(x.getThemeSpace('contents'));x.theme.destroy(x);var s,t=0,u,v,w;if(x.toolbox){s=x.toolbox.toolbars;for(;t<s.length;t++){v=s[t].items;for(u=0;u<v.length;u++){w=v[u];if(w.clickFn)k.removeFunction(w.clickFn);if(w.keyDownFn)k.removeFunction(w.keyDownFn);if(w.index)q.button._.instances[w.index]=null;
}}}if(x.contextMenu)k.removeFunction(x.contextMenu._.functionId);if(x._.filebrowserFn)k.removeFunction(x._.filebrowserFn);x.fire('destroy');g.remove(x);g.fire('instanceDestroyed',null,x);},execCommand:function(r,s){var t=this.getCommand(r),u={name:r,commandData:s,command:t};if(t&&t.state!=0)if(this.fire('beforeCommandExec',u)!==true){u.returnValue=t.exec(u.commandData);if(!t.async&&this.fire('afterCommandExec',u)!==true)return u.returnValue;}return false;},getCommand:function(r){return this._.commands[r];},getData:function(){var t=this;t.fire('beforeGetData');var r=t._.data;if(typeof r!='string'){var s=t.element;if(s&&t.elementMode==1)r=s.is('textarea')?s.getValue():s.getHtml();else r='';}r={dataValue:r};t.fire('getData',r);return r.dataValue;},getSnapshot:function(){var r=this.fire('getSnapshot');if(typeof r!='string'){var s=this.element;if(s&&this.elementMode==1)r=s.is('textarea')?s.getValue():s.getHtml();}return r;},loadSnapshot:function(r){this.fire('loadSnapshot',r);},setData:function(r,s){if(s)this.on('dataReady',function(u){u.removeListener();s.call(u.editor);});var t={dataValue:r};this.fire('setData',t);this._.data=t.dataValue;this.fire('afterSetData',t);},insertHtml:function(r){this.fire('insertHtml',r);},insertElement:function(r){this.fire('insertElement',r);},checkDirty:function(){return this.mayBeDirty&&this._.previousValue!==this.getSnapshot();},resetDirty:function(){if(this.mayBeDirty)this._.previousValue=this.getSnapshot();},updateElement:function(){var t=this;var r=t.element;if(r&&t.elementMode==1){var s=t.getData();if(t.config.htmlEncodeOutput)s=k.htmlEncode(s);if(r.is('textarea'))r.setValue(s);else r.setHtml(s);}}});g.on('loaded',function(){var r=g.editor._pending;if(r){delete g.editor._pending;for(var s=0;s<r.length;s++)r[s]._init();}});g.htmlParser=function(){this._={htmlPartsRegex:new RegExp("<(?:(?:\\/([^>]+)>)|(?:!--([\\S|\\s]*?)-->)|(?:([^\\s>]+)\\s*((?:(?:[^\"'>]+)|(?:\"[^\"]*\")|(?:'[^']*'))*)\\/?>))",'g')};};(function(){var r=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,s={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1};g.htmlParser.prototype={onTagOpen:function(){},onTagClose:function(){},onText:function(){},onCDATA:function(){},onComment:function(){},parse:function(t){var G=this;var u,v,w=0,x;while(u=G._.htmlPartsRegex.exec(t)){var y=u.index;if(y>w){var z=t.substring(w,y);if(x)x.push(z);else G.onText(z);}w=G._.htmlPartsRegex.lastIndex;
if(v=u[1]){v=v.toLowerCase();if(x&&l.$cdata[v]){G.onCDATA(x.join(''));x=null;}if(!x){G.onTagClose(v);continue;}}if(x){x.push(u[0]);continue;}if(v=u[3]){v=v.toLowerCase();if(/="/.test(v))continue;var A={},B,C=u[4],D=!!(C&&C.charAt(C.length-1)=='/');if(C)while(B=r.exec(C)){var E=B[1].toLowerCase(),F=B[2]||B[3]||B[4]||'';if(!F&&s[E])A[E]=E;else A[E]=F;}G.onTagOpen(v,A,D);if(!x&&l.$cdata[v])x=[];continue;}if(v=u[2])G.onComment(v);}if(t.length>w)G.onText(t.substring(w,t.length));}};})();g.htmlParser.comment=function(r){this.value=r;this._={isBlockLike:false};};g.htmlParser.comment.prototype={type:8,writeHtml:function(r,s){var t=this.value;if(s){if(!(t=s.onComment(t,this)))return;if(typeof t!='string'){t.parent=this.parent;t.writeHtml(r,s);return;}}r.comment(t);}};(function(){var r=/[\t\r\n ]{2,}|[\t\r\n]/g;g.htmlParser.text=function(s){this.value=s;this._={isBlockLike:false};};g.htmlParser.text.prototype={type:3,writeHtml:function(s,t){var u=this.value;if(t&&!(u=t.onText(u,this)))return;s.text(u);}};})();(function(){g.htmlParser.cdata=function(r){this.value=r;};g.htmlParser.cdata.prototype={type:3,writeHtml:function(r){r.write(this.value);}};})();g.htmlParser.fragment=function(){this.children=[];this.parent=null;this._={isBlockLike:true,hasInlineStarted:false};};(function(){var r={colgroup:1,dd:1,dt:1,li:1,option:1,p:1,td:1,tfoot:1,th:1,thead:1,tr:1},s=k.extend({table:1,ul:1,ol:1,dl:1},l.table,l.ul,l.ol,l.dl),t=l.$list,u=l.$listItem;g.htmlParser.fragment.fromHtml=function(v,w){var x=new g.htmlParser(),y=[],z=new g.htmlParser.fragment(),A=[],B=[],C=z,D=false,E;function F(K){var L;if(A.length>0)for(var M=0;M<A.length;M++){var N=A[M],O=N.name,P=l[O],Q=C.name&&l[C.name];if((!Q||Q[O])&&(!K||!P||P[K]||!l[K])){if(!L){G();L=1;}N=N.clone();N.parent=C;C=N;A.splice(M,1);M--;}}};function G(K){while(B.length-(K||0)>0)C.add(B.shift());};function H(K,L,M){L=L||C||z;if(w&&!L.type){var N,O;if(K.attributes&&(O=K.attributes._cke_real_element_type))N=O;else N=K.name;if(N&&!(N in l.$body)&&!(N in l.$nonBodyContent)){var P=C;C=L;x.onTagOpen(w,{});L=C;if(M)C=P;}}if(K._.isBlockLike&&K.name!='pre'){var Q=K.children.length,R=K.children[Q-1],S;if(R&&R.type==3)if(!(S=k.rtrim(R.value)))K.children.length=Q-1;else R.value=S;}L.add(K);if(K.returnPoint){C=K.returnPoint;delete K.returnPoint;}};x.onTagOpen=function(K,L,M){var N=new g.htmlParser.element(K,L);if(N.isUnknown&&M)N.isEmpty=true;if(l.$removeEmpty[K]){A.push(N);return;}else if(K=='pre')D=true;else if(K=='br'&&D){C.add(new g.htmlParser.text('\n'));
return;}if(K=='br'){B.push(N);return;}var O=C.name,P=O&&(l[O]||(C._.isBlockLike?l.div:l.span));if(P&&!N.isUnknown&&!C.isUnknown&&!P[K]){var Q=false,R;if(K in t&&O in t){var S=C.children,T=S[S.length-1];if(!(T&&T.name in u))H(T=new g.htmlParser.element('li'),C);E=C,R=T;}else if(K==O)H(C,C.parent);else if(K in l.$listItem){x.onTagOpen('ul',{});R=C;Q=true;}else{if(s[O]){if(!E)E=C;}else{H(C,C.parent,true);if(!r[O])A.unshift(C);}Q=true;}if(R)C=R;else C=C.returnPoint||C.parent;if(Q){x.onTagOpen.apply(this,arguments);return;}}F(K);G();N.parent=C;N.returnPoint=E;E=0;if(N.isEmpty)H(N);else C=N;};x.onTagClose=function(K){for(var L=A.length-1;L>=0;L--){if(K==A[L].name){A.splice(L,1);return;}}var M=[],N=[],O=C;while(O.type&&O.name!=K){if(!O._.isBlockLike)N.unshift(O);M.push(O);O=O.parent;}if(O.type){for(L=0;L<M.length;L++){var P=M[L];H(P,P.parent);}C=O;if(C.name=='pre')D=false;if(O._.isBlockLike)G();H(O,O.parent);if(O==C)C=C.parent;A=A.concat(N);}if(K=='body')w=false;};x.onText=function(K){if(!C._.hasInlineStarted&&!D){K=k.ltrim(K);if(K.length===0)return;}G();F();if(w&&(!C.type||C.name=='body')&&k.trim(K))this.onTagOpen(w,{});if(!D)K=K.replace(/[\t\r\n ]{2,}|[\t\r\n]/g,' ');C.add(new g.htmlParser.text(K));};x.onCDATA=function(K){C.add(new g.htmlParser.cdata(K));};x.onComment=function(K){F();C.add(new g.htmlParser.comment(K));};x.parse(v);G(!i&&1);while(C.type){var I=C.parent,J=C;if(w&&(!I.type||I.name=='body')&&!l.$body[J.name]){C=I;x.onTagOpen(w,{});I=C;}I.add(J);C=I;}return z;};g.htmlParser.fragment.prototype={add:function(v){var y=this;var w=y.children.length,x=w>0&&y.children[w-1]||null;if(x){if(v._.isBlockLike&&x.type==3){x.value=k.rtrim(x.value);if(x.value.length===0){y.children.pop();y.add(v);return;}}x.next=v;}v.previous=x;v.parent=y;y.children.push(v);y._.hasInlineStarted=v.type==3||v.type==1&&!v._.isBlockLike;},writeHtml:function(v,w){var x;this.filterChildren=function(){var y=new g.htmlParser.basicWriter();this.writeChildrenHtml.call(this,y,w,true);var z=y.getHtml();this.children=new g.htmlParser.fragment.fromHtml(z).children;x=1;};!this.name&&w&&w.onFragment(this);this.writeChildrenHtml(v,x?null:w);},writeChildrenHtml:function(v,w){for(var x=0;x<this.children.length;x++)this.children[x].writeHtml(v,w);}};})();g.htmlParser.element=function(r,s){var x=this;x.name=r;x.attributes=s||(s={});x.children=[];var t=s._cke_real_element_type||r,u=l,v=!!(u.$nonBodyContent[t]||u.$block[t]||u.$listItem[t]||u.$tableContent[t]||u.$nonEditable[t]||t=='br'),w=!!u.$empty[r];x.isEmpty=w;
x.isUnknown=!u[r];x._={isBlockLike:v,hasInlineStarted:w||!v};};(function(){var r=function(s,t){s=s[0];t=t[0];return s<t?-1:s>t?1:0;};g.htmlParser.element.prototype={type:1,add:g.htmlParser.fragment.prototype.add,clone:function(){return new g.htmlParser.element(this.name,this.attributes);},writeHtml:function(s,t){var u=this.attributes,v=this,w=v.name,x,y,z,A;v.filterChildren=function(){if(!A){var F=new g.htmlParser.basicWriter();g.htmlParser.fragment.prototype.writeChildrenHtml.call(v,F,t);v.children=new g.htmlParser.fragment.fromHtml(F.getHtml()).children;A=1;}};if(t){for(;;){if(!(w=t.onElementName(w)))return;v.name=w;if(!(v=t.onElement(v)))return;v.parent=this.parent;if(v.name==w)break;if(v.type!=1){v.writeHtml(s,t);return;}w=v.name;if(!w){this.writeChildrenHtml.call(v,s,A?null:t);return;}}u=v.attributes;}s.openTag(w,u);var B=[];for(var C=0;C<2;C++)for(x in u){y=x;z=u[x];if(C==1)B.push([x,z]);else if(t){for(;;){if(!(y=t.onAttributeName(x))){delete u[x];break;}else if(y!=x){delete u[x];x=y;continue;}else break;}if(y)if((z=t.onAttribute(v,y,z))===false)delete u[y];else u[y]=z;}}if(s.sortAttributes)B.sort(r);var D=B.length;for(C=0;C<D;C++){var E=B[C];s.attribute(E[0],E[1]);}s.openTagClose(w,v.isEmpty);if(!v.isEmpty){this.writeChildrenHtml.call(v,s,A?null:t);s.closeTag(w);}},writeChildrenHtml:function(s,t){g.htmlParser.fragment.prototype.writeChildrenHtml.apply(this,arguments);}};})();(function(){g.htmlParser.filter=k.createClass({$:function(w){this._={elementNames:[],attributeNames:[],elements:{$length:0},attributes:{$length:0}};if(w)this.addRules(w,10);},proto:{addRules:function(w,x){var y=this;if(typeof x!='number')x=10;s(y._.elementNames,w.elementNames,x);s(y._.attributeNames,w.attributeNames,x);t(y._.elements,w.elements,x);t(y._.attributes,w.attributes,x);y._.text=u(y._.text,w.text,x)||y._.text;y._.comment=u(y._.comment,w.comment,x)||y._.comment;y._.root=u(y._.root,w.root,x)||y._.root;},onElementName:function(w){return r(w,this._.elementNames);},onAttributeName:function(w){return r(w,this._.attributeNames);},onText:function(w){var x=this._.text;return x?x.filter(w):w;},onComment:function(w,x){var y=this._.comment;return y?y.filter(w,x):w;},onFragment:function(w){var x=this._.root;return x?x.filter(w):w;},onElement:function(w){var B=this;var x=[B._.elements['^'],B._.elements[w.name],B._.elements.$],y,z;for(var A=0;A<3;A++){y=x[A];if(y){z=y.filter(w,B);if(z===false)return null;if(z&&z!=w)return B.onNode(z);if(w.parent&&!w.name)break;}}return w;},onNode:function(w){var x=w.type;
return x==1?this.onElement(w):x==3?new g.htmlParser.text(this.onText(w.value)):x==8?new g.htmlParser.comment(this.onComment(w.value)):null;},onAttribute:function(w,x,y){var z=this._.attributes[x];if(z){var A=z.filter(y,w,this);if(A===false)return false;if(typeof A!='undefined')return A;}return y;}}});function r(w,x){for(var y=0;w&&y<x.length;y++){var z=x[y];w=w.replace(z[0],z[1]);}return w;};function s(w,x,y){if(typeof x=='function')x=[x];var z,A,B=w.length,C=x&&x.length;if(C){for(z=0;z<B&&w[z].pri<y;z++){}for(A=C-1;A>=0;A--){var D=x[A];if(D){D.pri=y;w.splice(z,0,D);}}}};function t(w,x,y){if(x)for(var z in x){var A=w[z];w[z]=u(A,x[z],y);if(!A)w.$length++;}};function u(w,x,y){if(x){x.pri=y;if(w){if(!w.splice){if(w.pri>y)w=[x,w];else w=[w,x];w.filter=v;}else s(w,x,y);return w;}else{x.filter=x;return x;}}};function v(w){var x=w.type||w instanceof g.htmlParser.fragment;for(var y=0;y<this.length;y++){if(x)var z=w.type,A=w.name;var B=this[y],C=B.apply(window,arguments);if(C===false)return C;if(x){if(C&&(C.name!=A||C.type!=z))return C;}else if(typeof C!='string')return C;C!=undefined&&(w=C);}return w;};})();g.htmlParser.basicWriter=k.createClass({$:function(){this._={output:[]};},proto:{openTag:function(r,s){this._.output.push('<',r);},openTagClose:function(r,s){if(s)this._.output.push(' />');else this._.output.push('>');},attribute:function(r,s){if(typeof s=='string')s=k.htmlEncodeAttr(s);this._.output.push(' ',r,'="',s,'"');},closeTag:function(r){this._.output.push('</',r,'>');},text:function(r){this._.output.push(r);},comment:function(r){this._.output.push('<!--',r,'-->');},write:function(r){this._.output.push(r);},reset:function(){this._.output=[];this._.indent=false;},getHtml:function(r){var s=this._.output.join('');if(r)this.reset();return s;}}});delete g.loadFullCore;g.instances={};g.document=new m(document);g.add=function(r){g.instances[r.name]=r;r.on('focus',function(){if(g.currentInstance!=r){g.currentInstance=r;g.fire('currentInstance');}});r.on('blur',function(){if(g.currentInstance==r){g.currentInstance=null;g.fire('currentInstance');}});};g.remove=function(r){delete g.instances[r.name];};g.on('instanceDestroyed',function(){if(k.isEmpty(this.instances))g.fire('reset');});g.TRISTATE_ON=1;g.TRISTATE_OFF=2;g.TRISTATE_DISABLED=0;j.comment=k.createClass({base:j.node,$:function(r,s){if(typeof r=='string')r=(s?s.$:document).createComment(r);this.base(r);},proto:{type:8,getOuterHtml:function(){return '<!--'+this.$.nodeValue+'-->';}}});(function(){var r={address:1,blockquote:1,dl:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,li:1,dt:1,dd:1},s={body:1,div:1,table:1,tbody:1,tr:1,td:1,th:1,caption:1,form:1},t=function(u){var v=u.getChildren();
for(var w=0,x=v.count();w<x;w++){var y=v.getItem(w);if(y.type==1&&l.$block[y.getName()])return true;}return false;};j.elementPath=function(u){var A=this;var v=null,w=null,x=[],y=u;while(y){if(y.type==1){if(!A.lastElement)A.lastElement=y;var z=y.getName();if(i&&y.$.scopeName!='HTML')z=y.$.scopeName.toLowerCase()+':'+z;if(!w){if(!v&&r[z])v=y;if(s[z])if(!v&&z=='div'&&!t(y))v=y;else w=y;}x.push(y);if(z=='body')break;}y=y.getParent();}A.block=v;A.blockLimit=w;A.elements=x;};})();j.elementPath.prototype={compare:function(r){var s=this.elements,t=r&&r.elements;if(!t||s.length!=t.length)return false;for(var u=0;u<s.length;u++){if(!s[u].equals(t[u]))return false;}return true;},contains:function(r){var s=this.elements;for(var t=0;t<s.length;t++){if(s[t].getName() in r)return s[t];}return null;}};j.text=function(r,s){if(typeof r=='string')r=(s?s.$:document).createTextNode(r);this.$=r;};j.text.prototype=new j.node();k.extend(j.text.prototype,{type:3,getLength:function(){return this.$.nodeValue.length;},getText:function(){return this.$.nodeValue;},split:function(r){var w=this;if(i&&r==w.getLength()){var s=w.getDocument().createText('');s.insertAfter(w);return s;}var t=w.getDocument(),u=new j.text(w.$.splitText(r),t);if(h.ie8){var v=new j.text('',t);v.insertAfter(u);v.remove();}return u;},substring:function(r,s){if(typeof s!='number')return this.$.nodeValue.substr(r);else return this.$.nodeValue.substring(r,s);}});j.documentFragment=function(r){r=r||g.document;this.$=r.$.createDocumentFragment();};k.extend(j.documentFragment.prototype,n.prototype,{type:11,insertAfterNode:function(r){r=r.$;r.parentNode.insertBefore(this.$,r.nextSibling);}},true,{append:1,appendBogus:1,getFirst:1,getLast:1,appendTo:1,moveChildren:1,insertBefore:1,insertAfterNode:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,getChildCount:1,getChild:1,getChildren:1});(function(){function r(z,A){if(this._.end)return null;var B,C=this.range,D,E=this.guard,F=this.type,G=z?'getPreviousSourceNode':'getNextSourceNode';if(!this._.start){this._.start=1;C.trim();if(C.collapsed){this.end();return null;}}if(!z&&!this._.guardLTR){var H=C.endContainer,I=H.getChild(C.endOffset);this._.guardLTR=function(M,N){return(!N||!H.equals(M))&&(!I||!M.equals(I))&&(M.type!=1||!N||M.getName()!='body');};}if(z&&!this._.guardRTL){var J=C.startContainer,K=C.startOffset>0&&J.getChild(C.startOffset-1);this._.guardRTL=function(M,N){return(!N||!J.equals(M))&&(!K||!M.equals(K))&&(M.type!=1||!N||M.getName()!='body');};}var L=z?this._.guardRTL:this._.guardLTR;
if(E)D=function(M,N){if(L(M,N)===false)return false;return E(M,N);};else D=L;if(this.current)B=this.current[G](false,F,D);else if(z){B=C.endContainer;if(C.endOffset>0){B=B.getChild(C.endOffset-1);if(D(B)===false)B=null;}else B=D(B,true)===false?null:B.getPreviousSourceNode(true,F,D);}else{B=C.startContainer;B=B.getChild(C.startOffset);if(B){if(D(B)===false)B=null;}else B=D(C.startContainer,true)===false?null:C.startContainer.getNextSourceNode(true,F,D);}while(B&&!this._.end){this.current=B;if(!this.evaluator||this.evaluator(B)!==false){if(!A)return B;}else if(A&&this.evaluator)return false;B=B[G](false,F,D);}this.end();return this.current=null;};function s(z){var A,B=null;while(A=r.call(this,z))B=A;return B;};j.walker=k.createClass({$:function(z){this.range=z;this._={};},proto:{end:function(){this._.end=1;},next:function(){return r.call(this);},previous:function(){return r.call(this,1);},checkForward:function(){return r.call(this,0,1)!==false;},checkBackward:function(){return r.call(this,1,1)!==false;},lastForward:function(){return s.call(this);},lastBackward:function(){return s.call(this,1);},reset:function(){delete this.current;this._={};}}});var t={block:1,'list-item':1,table:1,'table-row-group':1,'table-header-group':1,'table-footer-group':1,'table-row':1,'table-column-group':1,'table-column':1,'table-cell':1,'table-caption':1},u={hr:1};n.prototype.isBlockBoundary=function(z){var A=k.extend({},u,z||{});return t[this.getComputedStyle('display')]||A[this.getName()];};j.walker.blockBoundary=function(z){return function(A,B){return!(A.type==1&&A.isBlockBoundary(z));};};j.walker.listItemBoundary=function(){return this.blockBoundary({br:1});};j.walker.bookmark=function(z,A){function B(C){return C&&C.getName&&C.getName()=='span'&&C.hasAttribute('_cke_bookmark');};return function(C){var D,E;D=C&&!C.getName&&(E=C.getParent())&&B(E);D=z?D:D||B(C);return!!(A^D);};};j.walker.whitespaces=function(z){return function(A){var B=A&&A.type==3&&!k.trim(A.getText());return!!(z^B);};};j.walker.invisible=function(z){var A=j.walker.whitespaces();return function(B){var C=A(B)||B.is&&!B.$.offsetHeight;return!!(z^C);};};var v=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,w=j.walker.whitespaces(1),x=j.walker.bookmark(0,1),y=function(z){return x(z)&&w(z);};n.prototype.getBogus=function(){var z=this.getLast(y);if(z&&(!i?z.is&&z.is('br'):z.getText&&v.test(z.getText())))return z;return false;};})();j.range=function(r){var s=this;s.startContainer=null;s.startOffset=null;s.endContainer=null;s.endOffset=null;
s.collapsed=true;s.document=r;};(function(){var r=function(z){z.collapsed=z.startContainer&&z.endContainer&&z.startContainer.equals(z.endContainer)&&z.startOffset==z.endOffset;},s=function(z,A,B){z.optimizeBookmark();var C=z.startContainer,D=z.endContainer,E=z.startOffset,F=z.endOffset,G,H;if(D.type==3)D=D.split(F);else if(D.getChildCount()>0)if(F>=D.getChildCount()){D=D.append(z.document.createText(''));H=true;}else D=D.getChild(F);if(C.type==3){C.split(E);if(C.equals(D))D=C.getNext();}else if(!E){C=C.getFirst().insertBeforeMe(z.document.createText(''));G=true;}else if(E>=C.getChildCount()){C=C.append(z.document.createText(''));G=true;}else C=C.getChild(E).getPrevious();var I=C.getParents(),J=D.getParents(),K,L,M;for(K=0;K<I.length;K++){L=I[K];M=J[K];if(!L.equals(M))break;}var N=B,O,P,Q,R;for(var S=K;S<I.length;S++){O=I[S];if(N&&!O.equals(C))P=N.append(O.clone());Q=O.getNext();while(Q){if(Q.equals(J[S])||Q.equals(D))break;R=Q.getNext();if(A==2)N.append(Q.clone(true));else{Q.remove();if(A==1)N.append(Q);}Q=R;}if(N)N=P;}N=B;for(var T=K;T<J.length;T++){O=J[T];if(A>0&&!O.equals(D))P=N.append(O.clone());if(!I[T]||O.$.parentNode!=I[T].$.parentNode){Q=O.getPrevious();while(Q){if(Q.equals(I[T])||Q.equals(C))break;R=Q.getPrevious();if(A==2)N.$.insertBefore(Q.$.cloneNode(true),N.$.firstChild);else{Q.remove();if(A==1)N.$.insertBefore(Q.$,N.$.firstChild);}Q=R;}}if(N)N=P;}if(A==2){var U=z.startContainer;if(U.type==3){U.$.data+=U.$.nextSibling.data;U.$.parentNode.removeChild(U.$.nextSibling);}var V=z.endContainer;if(V.type==3&&V.$.nextSibling){V.$.data+=V.$.nextSibling.data;V.$.parentNode.removeChild(V.$.nextSibling);}}else{if(L&&M&&(C.$.parentNode!=L.$.parentNode||D.$.parentNode!=M.$.parentNode)){var W=M.getIndex();if(G&&M.$.parentNode==C.$.parentNode)W--;z.setStart(M.getParent(),W);}z.collapse(true);}if(G)C.remove();if(H&&D.$.parentNode)D.remove();},t={abbr:1,acronym:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,'var':1};function u(z){var A=false,B=j.walker.bookmark(true);return function(C){if(B(C))return true;if(C.type==3){if(k.trim(C.getText()).length)return false;}else if(C.type==1)if(!t[C.getName()])if(!z&&!i&&C.getName()=='br'&&!A)A=true;else return false;return true;};};function v(z){return z.type!=3&&z.getName() in l.$removeEmpty||!k.trim(z.getText())||z.getParent().hasAttribute('_cke_bookmark');};var w=new j.walker.whitespaces(),x=new j.walker.bookmark();function y(z){return!w(z)&&!x(z);
};j.range.prototype={clone:function(){var A=this;var z=new j.range(A.document);z.startContainer=A.startContainer;z.startOffset=A.startOffset;z.endContainer=A.endContainer;z.endOffset=A.endOffset;z.collapsed=A.collapsed;return z;},collapse:function(z){var A=this;if(z){A.endContainer=A.startContainer;A.endOffset=A.startOffset;}else{A.startContainer=A.endContainer;A.startOffset=A.endOffset;}A.collapsed=true;},cloneContents:function(){var z=new j.documentFragment(this.document);if(!this.collapsed)s(this,2,z);return z;},deleteContents:function(){if(this.collapsed)return;s(this,0);},extractContents:function(){var z=new j.documentFragment(this.document);if(!this.collapsed)s(this,1,z);return z;},createBookmark:function(z){var F=this;var A,B,C,D,E=F.collapsed;A=F.document.createElement('span');A.setAttribute('_cke_bookmark',1);A.setStyle('display','none');A.setHtml('&nbsp;');if(z){C='cke_bm_'+k.getNextNumber();A.setAttribute('id',C+'S');}if(!E){B=A.clone();B.setHtml('&nbsp;');if(z)B.setAttribute('id',C+'E');D=F.clone();D.collapse();D.insertNode(B);}D=F.clone();D.collapse(true);D.insertNode(A);if(B){F.setStartAfter(A);F.setEndBefore(B);}else F.moveToPosition(A,4);return{startNode:z?C+'S':A,endNode:z?C+'E':B,serializable:z,collapsed:E};},createBookmark2:function(z){var H=this;var A=H.startContainer,B=H.endContainer,C=H.startOffset,D=H.endOffset,E=H.collapsed,F,G;if(!A||!B)return{start:0,end:0};if(z){if(A.type==1){F=A.getChild(C);if(F&&F.type==3&&C>0&&F.getPrevious().type==3){A=F;C=0;}}while(A.type==3&&(G=A.getPrevious())&&G.type==3){A=G;C+=G.getLength();}if(!E){if(B.type==1){F=B.getChild(D);if(F&&F.type==3&&D>0&&F.getPrevious().type==3){B=F;D=0;}}while(B.type==3&&(G=B.getPrevious())&&G.type==3){B=G;D+=G.getLength();}}}return{start:A.getAddress(z),end:E?null:B.getAddress(z),startOffset:C,endOffset:D,normalized:z,collapsed:E,is2:true};},moveToBookmark:function(z){var H=this;if(z.is2){var A=H.document.getByAddress(z.start,z.normalized),B=z.startOffset,C=z.end&&H.document.getByAddress(z.end,z.normalized),D=z.endOffset;H.setStart(A,B);if(C)H.setEnd(C,D);else H.collapse(true);}else{var E=z.serializable,F=E?H.document.getById(z.startNode):z.startNode,G=E?H.document.getById(z.endNode):z.endNode;H.setStartBefore(F);F.remove();if(G){H.setEndBefore(G);G.remove();}else H.collapse(true);}},getBoundaryNodes:function(){var E=this;var z=E.startContainer,A=E.endContainer,B=E.startOffset,C=E.endOffset,D;if(z.type==1){D=z.getChildCount();if(D>B)z=z.getChild(B);else if(D<1)z=z.getPreviousSourceNode();
else{z=z.$;while(z.lastChild)z=z.lastChild;z=new j.node(z);z=z.getNextSourceNode()||z;}}if(A.type==1){D=A.getChildCount();if(D>C)A=A.getChild(C).getPreviousSourceNode(true);else if(D<1)A=A.getPreviousSourceNode();else{A=A.$;while(A.lastChild)A=A.lastChild;A=new j.node(A);}}if(z.getPosition(A)&2)z=A;return{startNode:z,endNode:A};},getCommonAncestor:function(z,A){var E=this;var B=E.startContainer,C=E.endContainer,D;if(B.equals(C)){if(z&&B.type==1&&E.startOffset==E.endOffset-1)D=B.getChild(E.startOffset);else D=B;}else D=B.getCommonAncestor(C);return A&&!D.is?D.getParent():D;},optimize:function(){var B=this;var z=B.startContainer,A=B.startOffset;if(z.type!=1)if(!A)B.setStartBefore(z);else if(A>=z.getLength())B.setStartAfter(z);z=B.endContainer;A=B.endOffset;if(z.type!=1)if(!A)B.setEndBefore(z);else if(A>=z.getLength())B.setEndAfter(z);},optimizeBookmark:function(){var B=this;var z=B.startContainer,A=B.endContainer;if(z.is&&z.is('span')&&z.hasAttribute('_cke_bookmark'))B.setStartAt(z,3);if(A&&A.is&&A.is('span')&&A.hasAttribute('_cke_bookmark'))B.setEndAt(A,4);},trim:function(z,A){var H=this;var B=H.startContainer,C=H.startOffset,D=H.collapsed;if((!z||D)&&B&&B.type==3){if(!C){C=B.getIndex();B=B.getParent();}else if(C>=B.getLength()){C=B.getIndex()+1;B=B.getParent();}else{var E=B.split(C);C=B.getIndex()+1;B=B.getParent();if(H.startContainer.equals(H.endContainer))H.setEnd(E,H.endOffset-H.startOffset);else if(B.equals(H.endContainer))H.endOffset+=1;}H.setStart(B,C);if(D){H.collapse(true);return;}}var F=H.endContainer,G=H.endOffset;if(!(A||D)&&F&&F.type==3){if(!G){G=F.getIndex();F=F.getParent();}else if(G>=F.getLength()){G=F.getIndex()+1;F=F.getParent();}else{F.split(G);G=F.getIndex()+1;F=F.getParent();}H.setEnd(F,G);}},enlarge:function(z){switch(z){case 1:if(this.collapsed)return;var A=this.getCommonAncestor(),B=this.document.getBody(),C,D,E,F,G,H=false,I,J,K=this.startContainer,L=this.startOffset;if(K.type==3){if(L){K=!k.trim(K.substring(0,L)).length&&K;H=!!K;}if(K)if(!(F=K.getPrevious()))E=K.getParent();}else{if(L)F=K.getChild(L-1)||K.getLast();if(!F)E=K;}while(E||F){if(E&&!F){if(!G&&E.equals(A))G=true;if(!B.contains(E))break;if(!H||E.getComputedStyle('display')!='inline'){H=false;if(G)C=E;else this.setStartBefore(E);}F=E.getPrevious();}while(F){I=false;if(F.type==3){J=F.getText();if(/[^\s\ufeff]/.test(J))F=null;I=/[\s\ufeff]$/.test(J);}else if(F.$.offsetWidth>0&&!F.getAttribute('_cke_bookmark'))if(H&&l.$removeEmpty[F.getName()]){J=F.getText();if(/[^\s\ufeff]/.test(J))F=null;
else{var M=F.$.all||F.$.getElementsByTagName('*');for(var N=0,O;O=M[N++];){if(!l.$removeEmpty[O.nodeName.toLowerCase()]){F=null;break;}}}if(F)I=!!J.length;}else F=null;if(I)if(H){if(G)C=E;else if(E)this.setStartBefore(E);}else H=true;if(F){var P=F.getPrevious();if(!E&&!P){E=F;F=null;break;}F=P;}else E=null;}if(E)E=E.getParent();}K=this.endContainer;L=this.endOffset;E=F=null;G=H=false;if(K.type==3){K=!k.trim(K.substring(L)).length&&K;H=!(K&&K.getLength());if(K)if(!(F=K.getNext()))E=K.getParent();}else{F=K.getChild(L);if(!F)E=K;}while(E||F){if(E&&!F){if(!G&&E.equals(A))G=true;if(!B.contains(E))break;if(!H||E.getComputedStyle('display')!='inline'){H=false;if(G)D=E;else if(E)this.setEndAfter(E);}F=E.getNext();}while(F){I=false;if(F.type==3){J=F.getText();if(/[^\s\ufeff]/.test(J))F=null;I=/^[\s\ufeff]/.test(J);}else if(F.$.offsetWidth>0&&!F.getAttribute('_cke_bookmark'))if(H&&l.$removeEmpty[F.getName()]){J=F.getText();if(/[^\s\ufeff]/.test(J))F=null;else{M=F.$.all||F.$.getElementsByTagName('*');for(N=0;O=M[N++];){if(!l.$removeEmpty[O.nodeName.toLowerCase()]){F=null;break;}}}if(F)I=!!J.length;}else F=null;if(I)if(H)if(G)D=E;else this.setEndAfter(E);if(F){P=F.getNext();if(!E&&!P){E=F;F=null;break;}F=P;}else E=null;}if(E)E=E.getParent();}if(C&&D){A=C.contains(D)?D:C;this.setStartBefore(A);this.setEndAfter(A);}break;case 2:case 3:var Q=new j.range(this.document);B=this.document.getBody();Q.setStartAt(B,1);Q.setEnd(this.startContainer,this.startOffset);var R=new j.walker(Q),S,T,U=j.walker.blockBoundary(z==3?{br:1}:null),V=function(X){var Y=U(X);if(!Y)S=X;return Y;},W=function(X){var Y=V(X);if(!Y&&X.is&&X.is('br'))T=X;return Y;};R.guard=V;E=R.lastBackward();S=S||B;this.setStartAt(S,!S.is('br')&&(!E&&this.checkStartOfBlock()||E&&S.contains(E))?1:4);Q=this.clone();Q.collapse();Q.setEndAt(B,2);R=new j.walker(Q);R.guard=z==3?W:V;S=null;E=R.lastForward();S=S||B;this.setEndAt(S,!E&&this.checkEndOfBlock()||E&&S.contains(E)?2:3);if(T)this.setEndAfter(T);}},shrink:function(z,A){if(!this.collapsed){z=z||2;var B=this.clone(),C=this.startContainer,D=this.endContainer,E=this.startOffset,F=this.endOffset,G=this.collapsed,H=1,I=1;if(C&&C.type==3)if(!E)B.setStartBefore(C);else if(E>=C.getLength())B.setStartAfter(C);else{B.setStartBefore(C);H=0;}if(D&&D.type==3)if(!F)B.setEndBefore(D);else if(F>=D.getLength())B.setEndAfter(D);else{B.setEndAfter(D);I=0;}var J=new j.walker(B),K=j.walker.bookmark();J.evaluator=function(O){return O.type==(z==1?1:3);};var L;J.guard=function(O,P){if(K(O))return true;
if(z==1&&O.type==3)return false;if(P&&O.equals(L))return false;if(!P&&O.type==1)L=O;return true;};if(H){var M=J[z==1?'lastForward':'next']();M&&this.setStartAt(M,A?1:3);}if(I){J.reset();var N=J[z==1?'lastBackward':'previous']();N&&this.setEndAt(N,A?2:4);}return!!(H||I);}},insertNode:function(z){var D=this;D.optimizeBookmark();D.trim(false,true);var A=D.startContainer,B=D.startOffset,C=A.getChild(B);if(C)z.insertBefore(C);else A.append(z);if(z.getParent().equals(D.endContainer))D.endOffset++;D.setStartBefore(z);},moveToPosition:function(z,A){this.setStartAt(z,A);this.collapse(true);},selectNodeContents:function(z){this.setStart(z,0);this.setEnd(z,z.type==3?z.getLength():z.getChildCount());},setStart:function(z,A){var B=this;if(z.type==1&&l.$empty[z.getName()])z=z.getParent(),A=z.getIndex();B.startContainer=z;B.startOffset=A;if(!B.endContainer){B.endContainer=z;B.endOffset=A;}r(B);},setEnd:function(z,A){var B=this;if(z.type==1&&l.$empty[z.getName()])A=z.getIndex()+1,z=z.getParent();B.endContainer=z;B.endOffset=A;if(!B.startContainer){B.startContainer=z;B.startOffset=A;}r(B);},setStartAfter:function(z){this.setStart(z.getParent(),z.getIndex()+1);},setStartBefore:function(z){this.setStart(z.getParent(),z.getIndex());},setEndAfter:function(z){this.setEnd(z.getParent(),z.getIndex()+1);},setEndBefore:function(z){this.setEnd(z.getParent(),z.getIndex());},setStartAt:function(z,A){var B=this;switch(A){case 1:B.setStart(z,0);break;case 2:if(z.type==3)B.setStart(z,z.getLength());else B.setStart(z,z.getChildCount());break;case 3:B.setStartBefore(z);break;case 4:B.setStartAfter(z);}r(B);},setEndAt:function(z,A){var B=this;switch(A){case 1:B.setEnd(z,0);break;case 2:if(z.type==3)B.setEnd(z,z.getLength());else B.setEnd(z,z.getChildCount());break;case 3:B.setEndBefore(z);break;case 4:B.setEndAfter(z);}r(B);},fixBlock:function(z,A){var D=this;var B=D.createBookmark(),C=D.document.createElement(A);D.collapse(z);D.enlarge(2);D.extractContents().appendTo(C);C.trim();if(!i)C.appendBogus();D.insertNode(C);D.moveToBookmark(B);return C;},splitBlock:function(z){var J=this;var A=new j.elementPath(J.startContainer),B=new j.elementPath(J.endContainer),C=A.blockLimit,D=B.blockLimit,E=A.block,F=B.block,G=null;if(!C.equals(D))return null;if(z!='br'){if(!E){E=J.fixBlock(true,z);F=new j.elementPath(J.endContainer).block;}if(!F)F=J.fixBlock(false,z);}var H=E&&J.checkStartOfBlock(),I=F&&J.checkEndOfBlock();J.deleteContents();if(E&&E.equals(F))if(I){G=new j.elementPath(J.startContainer);J.moveToPosition(F,4);
F=null;}else if(H){G=new j.elementPath(J.startContainer);J.moveToPosition(E,3);E=null;}else{F=J.splitElement(E);if(!i&&!E.is('ul','ol'))E.appendBogus();}return{previousBlock:E,nextBlock:F,wasStartOfBlock:H,wasEndOfBlock:I,elementPath:G};},splitElement:function(z){var C=this;if(!C.collapsed)return null;C.setEndAt(z,2);var A=C.extractContents(),B=z.clone(false);A.appendTo(B);B.insertAfter(z);C.moveToPosition(z,4);return B;},checkBoundaryOfElement:function(z,A){var B=A==1,C=this.clone();C.collapse(B);C[B?'setStartAt':'setEndAt'](z,B?1:2);var D=new j.walker(C);D.evaluator=v;return D[B?'checkBackward':'checkForward']();},checkStartOfBlock:function(){var F=this;var z=F.startContainer,A=F.startOffset;if(A&&z.type==3){var B=k.ltrim(z.substring(0,A));if(B.length)return false;}F.trim();var C=new j.elementPath(F.startContainer),D=F.clone();D.collapse(true);D.setStartAt(C.block||C.blockLimit,1);var E=new j.walker(D);E.evaluator=u(true);return E.checkBackward();},checkEndOfBlock:function(){var F=this;var z=F.endContainer,A=F.endOffset;if(z.type==3){var B=k.rtrim(z.substring(A));if(B.length)return false;}F.trim();var C=new j.elementPath(F.endContainer),D=F.clone();D.collapse(false);D.setEndAt(C.block||C.blockLimit,2);var E=new j.walker(D);E.evaluator=u(false);return E.checkForward();},moveToElementEditablePosition:function(z,A){var B;if(l.$empty[z.getName()])return false;while(z&&z.type==1){B=z.isEditable();if(B)this.moveToPosition(z,A?2:1);else if(l.$inline[z.getName()]){this.moveToPosition(z,A?4:3);return true;}if(l.$empty[z.getName()])z=z[A?'getPrevious':'getNext'](y);else z=z[A?'getLast':'getFirst'](y);if(z&&z.type==3){this.moveToPosition(z,A?4:3);return true;}}return B;},moveToElementEditStart:function(z){return this.moveToElementEditablePosition(z);},moveToElementEditEnd:function(z){return this.moveToElementEditablePosition(z,true);},getEnclosedNode:function(){var z=this.clone();z.optimize();if(z.startContainer.type!=1||z.endContainer.type!=1)return null;var A=new j.walker(z),B=j.walker.bookmark(true),C=j.walker.whitespaces(true),D=function(F){return C(F)&&B(F);};z.evaluator=D;var E=A.next();A.reset();return E&&E.equals(A.previous())?E:null;},getTouchedStartNode:function(){var z=this.startContainer;if(this.collapsed||z.type!=1)return z;return z.getChild(this.startOffset)||z;},getTouchedEndNode:function(){var z=this.endContainer;if(this.collapsed||z.type!=1)return z;return z.getChild(this.endOffset-1)||z;}};})();g.POSITION_AFTER_START=1;g.POSITION_BEFORE_END=2;g.POSITION_BEFORE_START=3;
g.POSITION_AFTER_END=4;g.ENLARGE_ELEMENT=1;g.ENLARGE_BLOCK_CONTENTS=2;g.ENLARGE_LIST_ITEM_CONTENTS=3;g.START=1;g.END=2;g.STARTEND=3;g.SHRINK_ELEMENT=1;g.SHRINK_TEXT=2;(function(){j.rangeList=function(t){if(t instanceof j.rangeList)return t;if(!t)t=[];else if(t instanceof j.range)t=[t];return k.extend(t,r);};var r={createIterator:function(){var t=this,u=j.walker.bookmark(),v=function(y){return!(y.is&&y.is('tr'));},w=[],x;return{getNextRange:function(y){x=x==undefined?0:x+1;var z=t[x];if(z&&t.length>1){if(!x)for(var A=t.length-1;A>=0;A--)w.unshift(t[A].createBookmark(true));if(y){var B=0;while(t[x+B+1]){var C=z.document,D=0,E=C.getById(w[B].endNode),F=C.getById(w[B+1].startNode),G;while(1){G=E.getNextSourceNode(false);if(!F.equals(G)){if(u(G)||G.type==1&&G.isBlockBoundary()){E=G;continue;}}else D=1;break;}if(!D)break;B++;}}z.moveToBookmark(w.shift());var G;while(B--){G=t[++x];G.moveToBookmark(w.shift());z.setEnd(G.endContainer,G.endOffset);}}return z;}};},createBookmarks:function(t){var y=this;var u=[],v;for(var w=0;w<y.length;w++){u.push(v=y[w].createBookmark(t,true));for(var x=w+1;x<y.length;x++){y[x]=s(v,y[x]);y[x]=s(v,y[x],true);}}return u;},createBookmarks2:function(t){var u=[];for(var v=0;v<this.length;v++)u.push(this[v].createBookmark2(t));return u;},moveToBookmarks:function(t){for(var u=0;u<this.length;u++)this[u].moveToBookmark(t[u]);}};function s(t,u,v){var w=t.serializable,x=u[v?'endContainer':'startContainer'],y=v?'endOffset':'startOffset',z=w?u.document.getById(t.startNode):t.startNode,A=w?u.document.getById(t.endNode):t.endNode;if(x.equals(z.getPrevious())){u.startOffset=u.startOffset-x.getLength()-A.getPrevious().getLength();x=A.getNext();}else if(x.equals(A.getPrevious())){u.startOffset=u.startOffset-x.getLength();x=A.getNext();}x.equals(z.getParent())&&u[y]++;x.equals(A.getParent())&&u[y]++;u[v?'endContainer':'startContainer']=x;return u;};})();(function(){if(h.webkit){h.hc=false;return;}var r=i&&h.version<7,s=i&&h.version==7,t=r?g.basePath+'images/spacer.gif':s?'about:blank':'data:image/png;base64,',u=n.createFromHtml('<div style="width:0px;height:0px;position:absolute;left:-10000px;background-image:url('+t+')"></div>',g.document);u.appendTo(g.document.getHead());try{h.hc=u.getComputedStyle('background-image')=='none';}catch(v){h.hc=false;}if(h.hc)h.cssClass+=' cke_hc';u.remove();})();p.load(o.corePlugins.split(','),function(){g.status='loaded';g.fire('loaded');var r=g._.pending;if(r){delete g._.pending;for(var s=0;s<r.length;s++)g.add(r[s]);
}});if(i)try{document.execCommand('BackgroundImageCache',false,true);}catch(r){}g.skins.add('kama',(function(){var s=[],t='cke_ui_color';if(i&&h.version<7)s.push('icons.png','images/sprites_ie6.png','images/dialog_sides.gif');return{preload:s,editor:{css:['editor.css']},dialog:{css:['dialog.css']},templates:{css:['templates.css']},margins:[0,0,0,0],init:function(u){if(u.config.width&&!isNaN(u.config.width))u.config.width-=12;var v=[],w=/\$color/g,x='/* UI Color Support */.cke_skin_kama .cke_menuitem .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a:focus .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a:active .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover .cke_label,.cke_skin_kama .cke_menuitem a:focus .cke_label,.cke_skin_kama .cke_menuitem a:active .cke_label{\tbackground-color: $color !important;}.cke_skin_kama .cke_menuitem a.cke_disabled:hover .cke_label,.cke_skin_kama .cke_menuitem a.cke_disabled:focus .cke_label,.cke_skin_kama .cke_menuitem a.cke_disabled:active .cke_label{\tbackground-color: transparent !important;}.cke_skin_kama .cke_menuitem a.cke_disabled:hover .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a.cke_disabled:focus .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a.cke_disabled:active .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuitem a.cke_disabled .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuseparator{\tbackground-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover,.cke_skin_kama .cke_menuitem a:focus,.cke_skin_kama .cke_menuitem a:active{\tbackground-color: $color !important;}';if(h.webkit){x=x.split('}').slice(0,-1);for(var y=0;y<x.length;y++)x[y]=x[y].split('{');}function z(C){var D=C.getById(t);if(!D){D=C.getHead().append('style');D.setAttribute('id',t);D.setAttribute('type','text/css');}return D;};function A(C,D,E){var F,G,H;for(var I=0;I<C.length;I++){if(h.webkit)for(G=0;G<D.length;G++){H=D[G][1];for(F=0;F<E.length;F++)H=H.replace(E[F][0],E[F][1]);C[I].$.sheet.addRule(D[G][0],H);}else{H=D;for(F=0;F<E.length;F++)H=H.replace(E[F][0],E[F][1]);if(i)C[I].$.styleSheet.cssText+=H;else C[I].$.innerHTML+=H;}}};var B=/\$color/g;k.extend(u,{uiColor:null,getUiColor:function(){return this.uiColor;
},setUiColor:function(C){var D,E=z(g.document),F='.'+u.id,G=[F+' .cke_wrapper',F+'_dialog .cke_dialog_contents',F+'_dialog a.cke_dialog_tab',F+'_dialog .cke_dialog_footer'].join(','),H='background-color: $color !important;';if(h.webkit)D=[[G,H]];else D=G+'{'+H+'}';return(this.setUiColor=function(I){var J=[[B,I]];u.uiColor=I;A([E],D,J);A(v,x,J);})(C);}});u.on('menuShow',function(C){var D=C.data[0],E=D.element.getElementsByTag('iframe').getItem(0).getFrameDocument();if(!E.getById('cke_ui_color')){var F=z(E);v.push(F);var G=u.getUiColor();if(G)A([F],x,[[B,G]]);}});if(u.config.uiColor)u.setUiColor(u.config.uiColor);}};})());(function(){g.dialog?s():g.on('dialogPluginReady',s);function s(){g.dialog.on('resize',function(t){var u=t.data,v=u.width,w=u.height,x=u.dialog,y=x.parts.contents;if(u.skin!='kama')return;y.setStyles({width:v+'px',height:w+'px'});setTimeout(function(){var z=x.parts.dialog.getChild([0,0,0]),A=z.getChild(0),B=z.getChild(2);B.setStyle('width',A.$.offsetWidth+'px');B=z.getChild(7);B.setStyle('width',A.$.offsetWidth-28+'px');B=z.getChild(4);B.setStyle('height',w+A.getChild(0).$.offsetHeight+'px');B=z.getChild(5);B.setStyle('height',w+A.getChild(0).$.offsetHeight+'px');},100);});};})();p.add('about',{requires:['dialog'],init:function(s){var t=s.addCommand('about',new g.dialogCommand('about'));t.modes={wysiwyg:1,source:1};t.canUndo=false;s.ui.addButton('About',{label:s.lang.about.title,command:'about'});g.dialog.add('about',this.path+'dialogs/about.js');}});(function(){var s='a11yhelp',t='a11yHelp';p.add(s,{availableLangs:{en:1,he:1},init:function(u){var v=this;u.addCommand(t,{exec:function(){var w=u.langCode;w=v.availableLangs[w]?w:'en';g.scriptLoader.load(g.getUrl(v.path+'lang/'+w+'.js'),function(){k.extend(u.lang,v.lang[w]);u.openDialog(t);});},modes:{wysiwyg:1,source:1},canUndo:false});g.dialog.add(t,this.path+'dialogs/a11yhelp.js');}});})();p.add('basicstyles',{requires:['styles','button'],init:function(s){var t=function(w,x,y,z){var A=new g.style(z);s.attachStyleStateChange(A,function(B){s.getCommand(y).setState(B);});s.addCommand(y,new g.styleCommand(A));s.ui.addButton(w,{label:x,command:y});},u=s.config,v=s.lang;t('Bold',v.bold,'bold',u.coreStyles_bold);t('Italic',v.italic,'italic',u.coreStyles_italic);t('Underline',v.underline,'underline',u.coreStyles_underline);t('Strike',v.strike,'strike',u.coreStyles_strike);t('Subscript',v.subscript,'subscript',u.coreStyles_subscript);t('Superscript',v.superscript,'superscript',u.coreStyles_superscript);
}});o.coreStyles_bold={element:'strong',overrides:'b'};o.coreStyles_italic={element:'em',overrides:'i'};o.coreStyles_underline={element:'u'};o.coreStyles_strike={element:'strike'};o.coreStyles_subscript={element:'sub'};o.coreStyles_superscript={element:'sup'};(function(){var s={table:1,tbody:1,ul:1,ol:1,blockquote:1,div:1,tr:1},t={},u={};k.extend(t,s,{tr:1,p:1,div:1,li:1});k.extend(u,t,{td:1});function v(C){w(C);x(C);};function w(C){var D=C.editor,E=C.data.path,F=D.config.useComputedState,G;F=F===undefined||F;if(!F)G=y(E.lastElement);G=G||E.block||E.blockLimit;if(!G||G.getName()=='body')return;var H=F?G.getComputedStyle('direction'):G.getStyle('direction')||G.getAttribute('dir');D.getCommand('bidirtl').setState(H=='rtl'?1:2);D.getCommand('bidiltr').setState(H=='ltr'?1:2);};function x(C){var D=C.editor,E=D.container.getChild(1),F=y(C.data.path.lastElement);if(F&&D.lang.dir!=F.getComputedStyle('direction'))E.addClass('cke_mixed_dir_content');else E.removeClass('cke_mixed_dir_content');};function y(C){while(C&&!(C.getName() in u||C.is('body'))){var D=C.getParent();if(!D)break;C=D;}return C;};function z(C,D,E,F){n.setMarker(F,C,'bidi_processed',1);var G=C;while((G=G.getParent())&&!G.is('body')){if(G.getCustomData('bidi_processed')){C.removeStyle('direction');C.removeAttribute('dir');return null;}}var H='useComputedState' in E.config?E.config.useComputedState:1,I=H?C.getComputedStyle('direction'):C.getStyle('direction')||C.hasAttribute('dir');if(I==D)return null;var J=H?I:C.getComputedStyle('direction');C.removeStyle('direction');if(H){C.removeAttribute('dir');if(D!=C.getComputedStyle('direction'))C.setAttribute('dir',D);}else C.setAttribute('dir',D);if(D!=J)E.fire('dirChanged',C);E.forceNextSelectionCheck();return null;};function A(C,D){var E=C.getCommonAncestor(false,true);C.enlarge(2);if(C.checkBoundaryOfElement(E,1)&&C.checkBoundaryOfElement(E,2)){var F;while(E&&E.type==1&&(F=E.getParent())&&F.getChildCount()==1&&(!(E.getName() in D)||F.getName() in D))E=F;return E.type==1&&E.getName() in D&&E;}};function B(C){return function(D){var E=D.getSelection(),F=D.config.enterMode,G=E.getRanges();if(G&&G.length){var H={},I=E.createBookmarks(),J=G.createIterator(),K,L=0;while(K=J.getNextRange(1)){var M=K.getEnclosedNode();if(!M||M&&!(M.type==1&&M.getName() in t))M=A(K,s);if(M&&!M.isReadOnly())z(M,C,D,H);var N,O,P=new j.walker(K),Q=I[L].startNode,R=I[L++].endNode;P.evaluator=function(S){return!!(S.type==1&&S.getName() in s&&!(S.getName()==(F==1)?'p':'div'&&S.getParent().type==1&&S.getParent().getName()=='blockquote')&&S.getPosition(Q)&2&&(S.getPosition(R)&4+16)==4);
};while(O=P.next())z(O,C,D,H);N=K.createIterator();N.enlargeBr=F!=2;while(O=N.getNextParagraph(F==1?'p':'div'))!O.isReadOnly()&&z(O,C,D,H);}n.clearAllMarkers(H);D.forceNextSelectionCheck();E.selectBookmarks(I);D.focus();}};};p.add('bidi',{requires:['styles','button'],init:function(C){var D=function(F,G,H,I){C.addCommand(H,new g.command(C,{exec:I}));C.ui.addButton(F,{label:G,command:H});},E=C.lang.bidi;D('BidiLtr',E.ltr,'bidiltr',B('ltr'));D('BidiRtl',E.rtl,'bidirtl',B('rtl'));C.on('selectionChange',v);}});})();(function(){function s(w,x){var y=x.block||x.blockLimit;if(!y||y.getName()=='body')return 2;if(y.getAscendant('blockquote',true))return 1;return 2;};function t(w){var x=w.editor,y=x.getCommand('blockquote');y.state=s(x,w.data.path);y.fire('state');};function u(w){for(var x=0,y=w.getChildCount(),z;x<y&&(z=w.getChild(x));x++){if(z.type==1&&z.isBlockBoundary())return false;}return true;};var v={exec:function(w){var x=w.getCommand('blockquote').state,y=w.getSelection(),z=y&&y.getRanges(true)[0];if(!z)return;var A=y.createBookmarks();if(i){var B=A[0].startNode,C=A[0].endNode,D;if(B&&B.getParent().getName()=='blockquote'){D=B;while(D=D.getNext()){if(D.type==1&&D.isBlockBoundary()){B.move(D,true);break;}}}if(C&&C.getParent().getName()=='blockquote'){D=C;while(D=D.getPrevious()){if(D.type==1&&D.isBlockBoundary()){C.move(D);break;}}}}var E=z.createIterator(),F;if(x==2){var G=[];while(F=E.getNextParagraph())G.push(F);if(G.length<1){var H=w.document.createElement(w.config.enterMode==1?'p':'div'),I=A.shift();z.insertNode(H);H.append(new j.text('\ufeff',w.document));z.moveToBookmark(I);z.selectNodeContents(H);z.collapse(true);I=z.createBookmark();G.push(H);A.unshift(I);}var J=G[0].getParent(),K=[];for(var L=0;L<G.length;L++){F=G[L];J=J.getCommonAncestor(F.getParent());}var M={table:1,tbody:1,tr:1,ol:1,ul:1};while(M[J.getName()])J=J.getParent();var N=null;while(G.length>0){F=G.shift();while(!F.getParent().equals(J))F=F.getParent();if(!F.equals(N))K.push(F);N=F;}while(K.length>0){F=K.shift();if(F.getName()=='blockquote'){var O=new j.documentFragment(w.document);while(F.getFirst()){O.append(F.getFirst().remove());G.push(O.getLast());}O.replace(F);}else G.push(F);}var P=w.document.createElement('blockquote');P.insertBefore(G[0]);while(G.length>0){F=G.shift();P.append(F);}}else if(x==1){var Q=[],R={};while(F=E.getNextParagraph()){var S=null,T=null;while(F.getParent()){if(F.getParent().getName()=='blockquote'){S=F.getParent();T=F;break;}F=F.getParent();}if(S&&T&&!T.getCustomData('blockquote_moveout')){Q.push(T);
n.setMarker(R,T,'blockquote_moveout',true);}}n.clearAllMarkers(R);var U=[],V=[];R={};while(Q.length>0){var W=Q.shift();P=W.getParent();if(!W.getPrevious())W.remove().insertBefore(P);else if(!W.getNext())W.remove().insertAfter(P);else{W.breakParent(W.getParent());V.push(W.getNext());}if(!P.getCustomData('blockquote_processed')){V.push(P);n.setMarker(R,P,'blockquote_processed',true);}U.push(W);}n.clearAllMarkers(R);for(L=V.length-1;L>=0;L--){P=V[L];if(u(P))P.remove();}if(w.config.enterMode==2){var X=true;while(U.length){W=U.shift();if(W.getName()=='div'){O=new j.documentFragment(w.document);var Y=X&&W.getPrevious()&&!(W.getPrevious().type==1&&W.getPrevious().isBlockBoundary());if(Y)O.append(w.document.createElement('br'));var Z=W.getNext()&&!(W.getNext().type==1&&W.getNext().isBlockBoundary());while(W.getFirst())W.getFirst().remove().appendTo(O);if(Z)O.append(w.document.createElement('br'));O.replace(W);X=false;}}}}y.selectBookmarks(A);w.focus();}};p.add('blockquote',{init:function(w){w.addCommand('blockquote',v);w.ui.addButton('Blockquote',{label:w.lang.blockquote,command:'blockquote'});w.on('selectionChange',t);},requires:['domiterator']});})();p.add('button',{beforeInit:function(s){s.ui.addHandler(1,q.button.handler);}});g.UI_BUTTON=1;q.button=function(s){k.extend(this,s,{title:s.label,className:s.className||s.command&&'cke_button_'+s.command||'',click:s.click||(function(t){t.execCommand(s.command);})});this._={};};q.button.handler={create:function(s){return new q.button(s);}};q.button.prototype={canGroup:true,render:function(s,t){var u=h,v=this._.id=k.getNextId(),w='',x=this.command,y,z;this._.editor=s;var A={id:v,button:this,editor:s,focus:function(){var C=g.document.getById(v);C.focus();},execute:function(){this.button.click(s);}};A.clickFn=y=k.addFunction(A.execute,A);A.index=z=q.button._.instances.push(A)-1;if(this.modes)s.on('mode',function(){this.setState(this.modes[s.mode]?2:0);},this);else if(x){x=s.getCommand(x);if(x){x.on('state',function(){this.setState(x.state);},this);w+='cke_'+(x.state==1?'on':x.state==0?'disabled':'off');}}if(!x)w+='cke_off';if(this.className)w+=' '+this.className;t.push('<span class="cke_button">','<a id="',v,'" class="',w,'"',u.gecko&&u.version>=10900&&!u.hc?'':'" href="javascript:void(\''+(this.title||'').replace("'",'')+"')\"",' title="',this.title,'" tabindex="-1" hidefocus="true" role="button" aria-labelledby="'+v+'_label"'+(this.hasArrow?' aria-haspopup="true"':''));if(u.opera||u.gecko&&u.mac)t.push(' onkeypress="return false;"');
if(u.gecko)t.push(' onblur="this.style.cssText = this.style.cssText;"');t.push(' onkeydown="return CKEDITOR.ui.button._.keydown(',z,', event);" onfocus="return CKEDITOR.ui.button._.focus(',z,', event);" onclick="CKEDITOR.tools.callFunction(',y,', this); return false;"><span class="cke_icon"');if(this.icon){var B=(this.iconOffset||0)*-16;t.push(' style="background-image:url(',g.getUrl(this.icon),');background-position:0 '+B+'px;"');}t.push('>&nbsp;</span><span id="',v,'_label" class="cke_label">',this.label,'</span>');if(this.hasArrow)t.push('<span class="cke_buttonarrow">'+(h.hc?'&#9660;':'&nbsp;')+'</span>');t.push('</a>','</span>');if(this.onRender)this.onRender();return A;},setState:function(s){if(this._.state==s)return false;this._.state=s;var t=g.document.getById(this._.id);if(t){t.setState(s);s==0?t.setAttribute('aria-disabled',true):t.removeAttribute('aria-disabled');s==1?t.setAttribute('aria-pressed',true):t.removeAttribute('aria-pressed');return true;}else return false;}};q.button._={instances:[],keydown:function(s,t){var u=q.button._.instances[s];if(u.onkey){t=new j.event(t);return u.onkey(u,t.getKeystroke())!==false;}},focus:function(s,t){var u=q.button._.instances[s],v;if(u.onfocus)v=u.onfocus(u,new j.event(t))!==false;if(h.gecko&&h.version<10900)t.preventBubble();return v;}};q.prototype.addButton=function(s,t){this.add(s,1,t);};g.on('reset',function(){q.button._.instances=[];});(function(){var s=function(z,A){var B=z.document,C=B.getBody(),D=0,E=function(){D=1;};C.on(A,E);(h.version>7?B.$:B.$.selection.createRange()).execCommand(A);C.removeListener(A,E);return D;},t=i?function(z,A){return s(z,A);}:function(z,A){try{return z.document.$.execCommand(A);}catch(B){return false;}},u=function(z){this.type=z;this.canUndo=this.type=='cut';};u.prototype={exec:function(z,A){this.type=='cut'&&y(z);var B=t(z,this.type);if(!B)alert(z.lang.clipboard[this.type+'Error']);return B;}};var v={canUndo:false,exec:i?function(z){z.focus();if(!z.document.getBody().fire('beforepaste')&&!s(z,'paste')){z.fire('pasteDialog');return false;}}:function(z){try{if(!z.document.getBody().fire('beforepaste')&&!z.document.$.execCommand('Paste',false,null))throw 0;}catch(A){setTimeout(function(){z.fire('pasteDialog');},0);return false;}}},w=function(z){if(this.mode!='wysiwyg')return;switch(z.data.keyCode){case 1000+86:case 2000+45:var A=this.document.getBody();if(!i&&A.fire('beforepaste'))z.cancel();else if(h.opera||h.gecko&&h.version<10900)A.fire('paste');return;case 1000+88:case 2000+46:var B=this;
this.fire('saveSnapshot');setTimeout(function(){B.fire('saveSnapshot');},0);}};function x(z,A,B){var C=this.document;if(C.getById('cke_pastebin'))return;if(A=='text'&&z.data&&z.data.$.clipboardData){var D=z.data.$.clipboardData.getData('text/plain');if(D){z.data.preventDefault();B(D);return;}}var E=this.getSelection(),F=new j.range(C),G=new n(A=='text'?'textarea':h.webkit?'body':'div',C);G.setAttribute('id','cke_pastebin');h.webkit&&G.append(C.createText('\xa0'));C.getBody().append(G);G.setStyles({position:'absolute',top:E.getStartElement().getDocumentPosition().y+'px',width:'1px',height:'1px',overflow:'hidden'});G.setStyle(this.config.contentsLangDirection=='ltr'?'left':'right','-1000px');var H=E.createBookmarks();if(A=='text'){if(i){var I=C.getBody().$.createTextRange();I.moveToElementText(G.$);I.execCommand('Paste');z.data.preventDefault();}else{C.$.designMode='off';G.$.focus();}}else{F.setStartAt(G,1);F.setEndAt(G,2);F.select(true);}window.setTimeout(function(){A=='text'&&!i&&(C.$.designMode='on');G.remove();var J;G=h.webkit&&(J=G.getFirst())&&J.is&&J.hasClass('Apple-style-span')?J:G;E.selectBookmarks(H);B(G['get'+(A=='text'?'Value':'Html')]());},0);};function y(z){if(!i||h.quirks)return;var A=z.getSelection(),B;if(A.getType()==3&&(B=A.getSelectedElement())){var C=A.getRanges()[0],D=z.document.createText('');D.insertBefore(B);C.setStartBefore(D);C.setEndAfter(B);A.selectRanges([C]);setTimeout(function(){if(B.getParent()){D.remove();A.selectElement(B);}},0);}};p.add('clipboard',{requires:['dialog','htmldataprocessor'],init:function(z){z.on('paste',function(E){var F=E.data;if(F.html)z.insertHtml(F.html);else if(F.text)z.insertText(F.text);},null,null,1000);z.on('pasteDialog',function(E){setTimeout(function(){z.openDialog('paste');},0);});function A(E,F,G,H){var I=z.lang[F];z.addCommand(F,G);z.ui.addButton(E,{label:I,command:F});if(z.addMenuItems)z.addMenuItem(F,{label:I,command:F,group:'clipboard',order:H});};A('Cut','cut',new u('cut'),1);A('Copy','copy',new u('copy'),4);A('Paste','paste',v,8);g.dialog.add('paste',g.getUrl(this.path+'dialogs/paste.js'));z.on('key',w,z);var B=z.config.forcePasteAsPlainText?'text':'html';z.on('contentDom',function(){var E=z.document.getBody();E.on(B=='text'&&i||h.webkit?'paste':'beforepaste',function(F){if(C)return;x.call(z,F,B,function(G){if(!G)return;var H={};H[B]=G;z.fire('paste',H);});});E.on('beforecut',function(){!C&&y(z);});});if(z.contextMenu){var C;function D(E){i&&(C=1);var F=z.document.$.queryCommandEnabled(E)?2:0;
C=0;return F;};z.contextMenu.addListener(function(E,F){var G=F.getCommonAncestor().isReadOnly();return{cut:!G&&D('Cut'),copy:D('Copy'),paste:!G&&(h.webkit?2:D('Paste'))};});}}});})();p.add('colorbutton',{requires:['panelbutton','floatpanel','styles'],init:function(s){var t=s.config,u=s.lang.colorButton,v;if(!h.hc){w('TextColor','fore',u.textColorTitle);w('BGColor','back',u.bgColorTitle);}function w(y,z,A){s.ui.add(y,4,{label:A,title:A,className:'cke_button_'+y.toLowerCase(),modes:{wysiwyg:1},panel:{css:s.skin.editor.css,attributes:{role:'listbox','aria-label':u.panelTitle}},onBlock:function(B,C){C.autoSize=true;C.element.addClass('cke_colorblock');C.element.setHtml(x(B,z));C.element.getDocument().getBody().setStyle('overflow','hidden');var D=C.keys,E=s.lang.dir=='rtl';D[E?37:39]='next';D[40]='next';D[9]='next';D[E?39:37]='prev';D[38]='prev';D[2000+9]='prev';D[32]='click';}});};function x(y,z){var A=[],B=t.colorButton_colors.split(','),C=B.length+(t.colorButton_enableMore?2:1),D=k.addFunction(function(J,K){if(J=='?'){var L=arguments.callee;function M(O){this.removeListener('ok',M);this.removeListener('cancel',M);O.name=='ok'&&L(this.getContentElement('picker','selectedColor').getValue(),K);};s.openDialog('colordialog',function(){this.on('ok',M);this.on('cancel',M);});return;}s.focus();y.hide();s.fire('saveSnapshot');new g.style(t['colorButton_'+K+'Style'],{color:'inherit'}).remove(s.document);if(J){var N=t['colorButton_'+K+'Style'];N.childRule=K=='back'?function(){return false;}:function(O){return O.getName()!='a';};new g.style(N,{color:J}).apply(s.document);}s.fire('saveSnapshot');});A.push('<a class="cke_colorauto" _cke_focus=1 hidefocus=true title="',u.auto,'" onclick="CKEDITOR.tools.callFunction(',D,",null,'",z,"');return false;\" href=\"javascript:void('",u.auto,'\')" role="option" aria-posinset="1" aria-setsize="',C,'"><table role="presentation" cellspacing=0 cellpadding=0 width="100%"><tr><td><span class="cke_colorbox" style="background-color:#000"></span></td><td colspan=7 align=center>',u.auto,'</td></tr></table></a><table role="presentation" cellspacing=0 cellpadding=0 width="100%">');for(var E=0;E<B.length;E++){if(E%8===0)A.push('</tr><tr>');var F=B[E].split('/'),G=F[0],H=F[1]||G;if(!F[1])G='#'+G.replace(/^(.)(.)(.)$/,'$1$1$2$2$3$3');var I=s.lang.colors[H]||H;A.push('<td><a class="cke_colorbox" _cke_focus=1 hidefocus=true title="',I,'" onclick="CKEDITOR.tools.callFunction(',D,",'",G,"','",z,"'); return false;\" href=\"javascript:void('",I,'\')" role="option" aria-posinset="',E+2,'" aria-setsize="',C,'"><span class="cke_colorbox" style="background-color:#',H,'"></span></a></td>');
}if(t.colorButton_enableMore===undefined||t.colorButton_enableMore)A.push('</tr><tr><td colspan=8 align=center><a class="cke_colormore" _cke_focus=1 hidefocus=true title="',u.more,'" onclick="CKEDITOR.tools.callFunction(',D,",'?','",z,"');return false;\" href=\"javascript:void('",u.more,"')\"",' role="option" aria-posinset="',C,'" aria-setsize="',C,'">',u.more,'</a></td>');A.push('</tr></table>');return A.join('');};}});o.colorButton_colors='000,800000,8B4513,2F4F4F,008080,000080,4B0082,696969,B22222,A52A2A,DAA520,006400,40E0D0,0000CD,800080,808080,F00,FF8C00,FFD700,008000,0FF,00F,EE82EE,A9A9A9,FFA07A,FFA500,FFFF00,00FF00,AFEEEE,ADD8E6,DDA0DD,D3D3D3,FFF0F5,FAEBD7,FFFFE0,F0FFF0,F0FFFF,F0F8FF,E6E6FA,FFF';o.colorButton_foreStyle={element:'span',styles:{color:'#(color)'},overrides:[{element:'font',attributes:{color:null}}]};o.colorButton_backStyle={element:'span',styles:{'background-color':'#(color)'}};(function(){p.colordialog={init:function(s){s.addCommand('colordialog',new g.dialogCommand('colordialog'));g.dialog.add('colordialog',this.path+'dialogs/colordialog.js');}};p.add('colordialog',p.colordialog);})();p.add('contextmenu',{requires:['menu'],beforeInit:function(s){s.contextMenu=new p.contextMenu(s);s.addCommand('contextMenu',{exec:function(){s.contextMenu.show(s.document.getBody());}});}});p.contextMenu=k.createClass({$:function(s){this.id=k.getNextId();this.editor=s;this._.listeners=[];this._.functionId=k.addFunction(function(t){this._.panel.hide();s.focus();s.execCommand(t);},this);this.definition={panel:{className:s.skinClass+' cke_contextmenu',attributes:{'aria-label':s.lang.contextmenu.options}}};},_:{onMenu:function(s,t,u,v){var w=this._.menu,x=this.editor;if(w){w.hide();w.removeAll();}else{w=this._.menu=new g.menu(x,this.definition);w.onClick=k.bind(function(G){w.hide();if(G.onClick)G.onClick();else if(G.command)x.execCommand(G.command);},this);w.onEscape=function(G){var H=this.parent;if(H){H._.panel.hideChild();var I=H._.panel._.panel._.currentBlock,J=I._.focusIndex;I._.markItem(J);}else if(G==27){this.hide();x.focus();}return false;};}var y=this._.listeners,z=[],A=this.editor.getSelection(),B=A&&A.getStartElement();w.onHide=k.bind(function(){w.onHide=null;if(i){var G=x.getSelection();G&&G.unlock();}this.onHide&&this.onHide();},this);for(var C=0;C<y.length;C++){var D=y[C](B,A);if(D)for(var E in D){var F=this.editor.getMenuItem(E);if(F){F.state=D[E];w.add(F);}}}w.items.length&&w.show(s,t||(x.lang.dir=='rtl'?2:1),u,v);}},proto:{addTarget:function(s,t){if(h.opera&&!('oncontextmenu' in document.body)){var u;
s.on('mousedown',function(y){y=y.data;if(y.$.button!=2){if(y.getKeystroke()==1000+1)s.fire('contextmenu',y);return;}if(t&&(h.mac?y.$.metaKey:y.$.ctrlKey))return;var z=y.getTarget();if(!u){var A=z.getDocument();u=A.createElement('input');u.$.type='button';A.getBody().append(u);}u.setAttribute('style','position:absolute;top:'+(y.$.clientY-2)+'px;left:'+(y.$.clientX-2)+'px;width:5px;height:5px;opacity:0.01');});s.on('mouseup',function(y){if(u){u.remove();u=undefined;s.fire('contextmenu',y.data);}});}s.on('contextmenu',function(y){var z=y.data;if(t&&(h.webkit?v:h.mac?z.$.metaKey:z.$.ctrlKey))return;z.preventDefault();var A=z.getTarget().getDocument().getDocumentElement(),B=z.$.clientX,C=z.$.clientY;k.setTimeout(function(){this.show(A,null,B,C);},0,this);},this);if(h.opera)s.on('keypress',function(y){var z=y.data;if(z.$.keyCode===0)z.preventDefault();});if(h.webkit){var v,w=function(y){v=h.mac?y.data.$.metaKey:y.data.$.ctrlKey;},x=function(){v=0;};s.on('keydown',w);s.on('keyup',x);s.on('contextmenu',x);}},addListener:function(s){this._.listeners.push(s);},show:function(s,t,u,v){this.editor.focus();if(i){var w=this.editor.getSelection();w&&w.lock();}this._.onMenu(s||g.document.getDocumentElement(),t,u||0,v||0);}}});(function(){function s(u){var v=this.att,w=u&&u.hasAttribute(v)&&u.getAttribute(v)||'';if(w!==undefined)this.setValue(w);};function t(){var u;for(var v=0;v<arguments.length;v++){if(arguments[v] instanceof n){u=arguments[v];break;}}if(u){var w=this.att,x=this.getValue();if(w=='dir'){var y=u.getAttribute(w,x);if(y!=x&&u.getParent())this._.dialog._.editor.fire('dirChanged',u);}if(x)u.setAttribute(w,x);else u.removeAttribute(w,x);}};p.add('dialogadvtab',{createAdvancedTab:function(u,v){if(!v)v={id:1,dir:1,classes:1,styles:1};var w=u.lang.common,x={id:'advanced',label:w.advancedTab,title:w.advancedTab,elements:[{type:'vbox',padding:1,children:[]}]},y=[];if(v.id||v.dir){if(v.id)y.push({id:'advId',att:'id',type:'text',label:w.id,setup:s,commit:t});if(v.dir)y.push({id:'advLangDir',att:'dir',type:'select',label:w.langDir,'default':'',style:'width:100%',items:[[w.notSet,''],[w.langDirLTR,'ltr'],[w.langDirRTL,'rtl']],setup:s,commit:t});x.elements[0].children.push({type:'hbox',widths:['50%','50%'],children:[].concat(y)});}if(v.styles||v.classes){y=[];if(v.styles)y.push({id:'advStyles',att:'style',type:'text',label:w.styles,'default':'',getStyle:function(z,A){var B=this.getValue().match(new RegExp(z+'\\s*:s*([^;]*)','i'));return B?B[1]:A;},updateStyle:function(z,A){var B=this.getValue();
if(B)B=B.replace(new RegExp('\\s*'+z+'s*:[^;]*(?:$|;s*)','i'),'').replace(/^[;\s]+/,'').replace(/\s+$/,'');if(A){B&&!/;\s*$/.test(B)&&(B+='; ');B+=z+': '+A;}this.setValue(B,1);},setup:s,commit:t});if(v.classes)y.push({type:'hbox',widths:['45%','55%'],children:[{id:'advCSSClasses',att:'class',type:'text',label:w.cssClasses,'default':'',setup:s,commit:t}]});x.elements[0].children.push({type:'hbox',widths:['50%','50%'],children:[].concat(y)});}return x;}});})();(function(){p.add('div',{requires:['editingblock','domiterator','styles'],init:function(s){var t=s.lang.div;s.addCommand('creatediv',new g.dialogCommand('creatediv'));s.addCommand('editdiv',new g.dialogCommand('editdiv'));s.addCommand('removediv',{exec:function(u){var v=u.getSelection(),w=v&&v.getRanges(),x,y=v.createBookmarks(),z,A=[];function B(D){var E=new j.elementPath(D),F=E.blockLimit,G=F.is('div')&&F;if(G&&!G.getAttribute('_cke_div_added')){A.push(G);G.setAttribute('_cke_div_added');}};for(var C=0;C<w.length;C++){x=w[C];if(x.collapsed)B(v.getStartElement());else{z=new j.walker(x);z.evaluator=B;z.lastForward();}}for(C=0;C<A.length;C++)A[C].remove(true);v.selectBookmarks(y);}});s.ui.addButton('CreateDiv',{label:t.toolbar,command:'creatediv'});if(s.addMenuItems){s.addMenuItems({editdiv:{label:t.edit,command:'editdiv',group:'div',order:1},removediv:{label:t.remove,command:'removediv',group:'div',order:5}});if(s.contextMenu)s.contextMenu.addListener(function(u,v){if(!u||u.isReadOnly())return null;var w=new j.elementPath(u),x=w.blockLimit;if(x&&x.getAscendant('div',true))return{editdiv:2,removediv:2};return null;});}g.dialog.add('creatediv',this.path+'dialogs/div.js');g.dialog.add('editdiv',this.path+'dialogs/div.js');}});})();(function(){var s={toolbarFocus:{exec:function(u){var v=u._.elementsPath.idBase,w=g.document.getById(v+'0');if(w)w.focus();}}},t='<span class="cke_empty">&nbsp;</span>';p.add('elementspath',{requires:['selection'],init:function(u){var v='cke_path_'+u.name,w,x=function(){if(!w)w=g.document.getById(v);return w;},y='cke_elementspath_'+k.getNextNumber()+'_';u._.elementsPath={idBase:y,filters:[]};u.on('themeSpace',function(z){if(z.data.space=='bottom')z.data.html+='<span id="'+v+'_label" class="cke_voice_label">'+u.lang.elementsPath.eleLabel+'</span>'+'<div id="'+v+'" class="cke_path" role="group" aria-labelledby="'+v+'_label">'+t+'</div>';});u.on('selectionChange',function(z){var A=h,B=z.data.selection,C=B.getStartElement(),D=[],E=z.editor,F=E._.elementsPath.list=[],G=E._.elementsPath.filters;
while(C){var H=0;for(var I=0;I<G.length;I++){if(G[I](C)===false){H=1;break;}}if(!H){var J=F.push(C)-1,K;if(C.getAttribute('_cke_real_element_type'))K=C.getAttribute('_cke_real_element_type');else K=C.getName();var L='';if(A.opera||A.gecko&&A.mac)L+=' onkeypress="return false;"';if(A.gecko)L+=' onblur="this.style.cssText = this.style.cssText;"';var M=E.lang.elementsPath.eleTitle.replace(/%1/,K);D.unshift('<a id="',y,J,'" href="javascript:void(\'',K,'\')" tabindex="-1" title="',M,'"'+(h.gecko&&h.version<10900?' onfocus="event.preventBubble();"':'')+' hidefocus="true" '+" onkeydown=\"return CKEDITOR._.elementsPath.keydown('",E.name,"',",J,', event);"'+L," onclick=\"return CKEDITOR._.elementsPath.click('",E.name,"',",J,');"',' role="button" aria-labelledby="'+y+J+'_label">',K,'<span id="',y,J,'_label" class="cke_label">'+M+'</span>','</a>');}if(K=='body')break;C=C.getParent();}x().setHtml(D.join('')+t);});u.on('contentDomUnload',function(){w&&w.setHtml(t);});u.addCommand('elementsPathFocus',s.toolbarFocus);}});})();g._.elementsPath={click:function(s,t){var u=g.instances[s];u.focus();var v=u._.elementsPath.list[t];u.getSelection().selectElement(v);return false;},keydown:function(s,t,u){var v=q.button._.instances[t],w=g.instances[s],x=w._.elementsPath.idBase,y;u=new j.event(u);var z=w.lang.dir=='rtl';switch(u.getKeystroke()){case z?39:37:case 9:y=g.document.getById(x+(t+1));if(!y)y=g.document.getById(x+'0');y.focus();return false;case z?37:39:case 2000+9:y=g.document.getById(x+(t-1));if(!y)y=g.document.getById(x+(w._.elementsPath.list.length-1));y.focus();return false;case 27:w.focus();return false;case 13:case 32:this.click(s,t);return false;}return true;}};(function(){p.add('enterkey',{requires:['keystrokes','indent'],init:function(z){var A=z.specialKeys;A[13]=x;A[2000+13]=w;}});p.enterkey={enterBlock:function(z,A,B,C){B=B||y(z);if(!B)return;var D=B.document;if(B.checkStartOfBlock()&&B.checkEndOfBlock()){var E=new j.elementPath(B.startContainer),F=E.block;if(F&&(F.is('li')||F.getParent().is('li'))){z.execCommand('outdent');return;}}var G=A==3?'div':'p',H=B.splitBlock(G);if(!H)return;var I=H.previousBlock,J=H.nextBlock,K=H.wasStartOfBlock,L=H.wasEndOfBlock,M;if(J){M=J.getParent();if(M.is('li')){J.breakParent(M);J.move(J.getNext(),1);}}else if(I&&(M=I.getParent())&&M.is('li')){I.breakParent(M);B.moveToElementEditStart(I.getNext());I.move(I.getPrevious());}if(!K&&!L){if(J.is('li')&&(M=J.getFirst(j.walker.invisible(true)))&&M.is&&M.is('ul','ol'))(i?D.createText('\xa0'):D.createElement('br')).insertBefore(M);
if(J)B.moveToElementEditStart(J);}else{var N;if(I){if(I.is('li')||!v.test(I.getName()))N=I.clone();}else if(J)N=J.clone();if(!N)N=D.createElement(G);else if(C&&!N.is('li'))N.renameNode(G);var O=H.elementPath;if(O)for(var P=0,Q=O.elements.length;P<Q;P++){var R=O.elements[P];if(R.equals(O.block)||R.equals(O.blockLimit))break;if(l.$removeEmpty[R.getName()]){R=R.clone();N.moveChildren(R);N.append(R);}}if(!i)N.appendBogus();B.insertNode(N);if(i&&K&&(!L||!I.getChildCount())){B.moveToElementEditStart(L?I:N);B.select();}B.moveToElementEditStart(K&&!L?J:N);}if(!i)if(J){var S=D.createElement('span');S.setHtml('&nbsp;');B.insertNode(S);S.scrollIntoView();B.deleteContents();}else N.scrollIntoView();B.select();},enterBr:function(z,A,B,C){B=B||y(z);if(!B)return;var D=B.document,E=A==3?'div':'p',F=B.checkEndOfBlock(),G=new j.elementPath(z.getSelection().getStartElement()),H=G.block,I=H&&G.block.getName(),J=false;if(!C&&I=='li'){u(z,A,B,C);return;}if(!C&&F&&v.test(I)){D.createElement('br').insertAfter(H);if(h.gecko)D.createText('').insertAfter(H);B.setStartAt(H.getNext(),i?3:1);}else{var K;J=I=='pre';if(J&&!h.gecko)K=D.createText(i?'\r':'\n');else K=D.createElement('br');B.deleteContents();B.insertNode(K);if(!i)D.createText('\ufeff').insertAfter(K);if(F&&!i)K.getParent().appendBogus();if(!i)K.getNext().$.nodeValue='';if(i)B.setStartAt(K,4);else B.setStartAt(K.getNext(),1);if(!i){var L=null;if(!h.gecko){L=D.createElement('span');L.setHtml('&nbsp;');}else L=D.createElement('br');L.insertBefore(K.getNext());L.scrollIntoView();L.remove();}}B.collapse(true);B.select(J);}};var s=p.enterkey,t=s.enterBr,u=s.enterBlock,v=/^h[1-6]$/;function w(z){if(z.mode!='wysiwyg')return false;if(z.getSelection().getStartElement().hasAscendant('pre',true)){setTimeout(function(){u(z,z.config.enterMode,null,true);},0);return true;}else return x(z,z.config.shiftEnterMode,1);};function x(z,A,B){B=z.config.forceEnterMode||B;if(z.mode!='wysiwyg')return false;if(!A)A=z.config.enterMode;setTimeout(function(){z.fire('saveSnapshot');if(A==2||z.getSelection().getStartElement().hasAscendant('pre',1))t(z,A,null,B);else u(z,A,null,B);},0);return true;};function y(z){var A=z.getSelection().getRanges(true);for(var B=A.length-1;B>0;B--)A[B].deleteContents();return A[0];};})();(function(){var s='nbsp,gt,lt,quot',t='iexcl,cent,pound,curren,yen,brvbar,sect,uml,copy,ordf,laquo,not,shy,reg,macr,deg,plusmn,sup2,sup3,acute,micro,para,middot,cedil,sup1,ordm,raquo,frac14,frac12,frac34,iquest,times,divide,fnof,bull,hellip,prime,Prime,oline,frasl,weierp,image,real,trade,alefsym,larr,uarr,rarr,darr,harr,crarr,lArr,uArr,rArr,dArr,hArr,forall,part,exist,empty,nabla,isin,notin,ni,prod,sum,minus,lowast,radic,prop,infin,ang,and,or,cap,cup,int,there4,sim,cong,asymp,ne,equiv,le,ge,sub,sup,nsub,sube,supe,oplus,otimes,perp,sdot,lceil,rceil,lfloor,rfloor,lang,rang,loz,spades,clubs,hearts,diams,circ,tilde,ensp,emsp,thinsp,zwnj,zwj,lrm,rlm,ndash,mdash,lsquo,rsquo,sbquo,ldquo,rdquo,bdquo,dagger,Dagger,permil,lsaquo,rsaquo,euro',u='Agrave,Aacute,Acirc,Atilde,Auml,Aring,AElig,Ccedil,Egrave,Eacute,Ecirc,Euml,Igrave,Iacute,Icirc,Iuml,ETH,Ntilde,Ograve,Oacute,Ocirc,Otilde,Ouml,Oslash,Ugrave,Uacute,Ucirc,Uuml,Yacute,THORN,szlig,agrave,aacute,acirc,atilde,auml,aring,aelig,ccedil,egrave,eacute,ecirc,euml,igrave,iacute,icirc,iuml,eth,ntilde,ograve,oacute,ocirc,otilde,ouml,oslash,ugrave,uacute,ucirc,uuml,yacute,thorn,yuml,OElig,oelig,Scaron,scaron,Yuml',v='Alpha,Beta,Gamma,Delta,Epsilon,Zeta,Eta,Theta,Iota,Kappa,Lambda,Mu,Nu,Xi,Omicron,Pi,Rho,Sigma,Tau,Upsilon,Phi,Chi,Psi,Omega,alpha,beta,gamma,delta,epsilon,zeta,eta,theta,iota,kappa,lambda,mu,nu,xi,omicron,pi,rho,sigmaf,sigma,tau,upsilon,phi,chi,psi,omega,thetasym,upsih,piv';
function w(x,y){var z={},A=[],B={nbsp:'\xa0',shy:'­',gt:'>',lt:'<'};x=x.replace(/\b(nbsp|shy|gt|lt|amp)(?:,|$)/g,function(G,H){var I=y?'&'+H+';':B[H],J=y?B[H]:'&'+H+';';z[I]=J;A.push(I);return '';});if(!y){x=x.split(',');var C=document.createElement('div'),D;C.innerHTML='&'+x.join(';&')+';';D=C.innerHTML;C=null;for(var E=0;E<D.length;E++){var F=D.charAt(E);z[F]='&'+x[E]+';';A.push(F);}}z.regex=A.join(y?'|':'');return z;};p.add('entities',{afterInit:function(x){var y=x.config,z=x.dataProcessor,A=z&&z.htmlFilter;if(A){var B=s;if(y.entities){B+=','+t;if(y.entities_latin)B+=','+u;if(y.entities_greek)B+=','+v;if(y.entities_additional)B+=','+y.entities_additional;}var C=w(B),D='['+C.regex+']';delete C.regex;if(y.entities&&y.entities_processNumerical)D='[^ -~]|'+D;D=new RegExp(D,'g');function E(I){return y.entities_processNumerical=='force'||!C[I]?'&#'+I.charCodeAt(0)+';':C[I];};var F=w([s,'shy'].join(','),true),G=new RegExp(F.regex,'g');function H(I){return F[I];};A.addRules({text:function(I){return I.replace(G,H).replace(D,E);}});}}});})();o.entities=true;o.entities_latin=true;o.entities_greek=true;o.entities_additional='#39';(function(){function s(B,C){var D=[];if(!C)return B;else for(var E in C)D.push(E+'='+encodeURIComponent(C[E]));return B+(B.indexOf('?')!=-1?'&':'?')+D.join('&');};function t(B){B+='';var C=B.charAt(0).toUpperCase();return C+B.substr(1);};function u(B){var I=this;var C=I.getDialog(),D=C.getParentEditor();D._.filebrowserSe=I;var E=D.config['filebrowser'+t(C.getName())+'WindowWidth']||D.config.filebrowserWindowWidth||'80%',F=D.config['filebrowser'+t(C.getName())+'WindowHeight']||D.config.filebrowserWindowHeight||'70%',G=I.filebrowser.params||{};G.CKEditor=D.name;G.CKEditorFuncNum=D._.filebrowserFn;if(!G.langCode)G.langCode=D.langCode;var H=s(I.filebrowser.url,G);D.popup(H,E,F,D.config.fileBrowserWindowFeatures);};function v(B){var E=this;var C=E.getDialog(),D=C.getParentEditor();D._.filebrowserSe=E;if(!C.getContentElement(E['for'][0],E['for'][1]).getInputElement().$.value)return false;if(!C.getContentElement(E['for'][0],E['for'][1]).getAction())return false;return true;};function w(B,C,D){var E=D.params||{};E.CKEditor=B.name;E.CKEditorFuncNum=B._.filebrowserFn;if(!E.langCode)E.langCode=B.langCode;C.action=s(D.url,E);C.filebrowser=D;};function x(B,C,D,E){var F,G;for(var H in E){F=E[H];if(F.type=='hbox'||F.type=='vbox')x(B,C,D,F.children);if(!F.filebrowser)continue;if(typeof F.filebrowser=='string'){var I={action:F.type=='fileButton'?'QuickUpload':'Browse',target:F.filebrowser};
F.filebrowser=I;}if(F.filebrowser.action=='Browse'){var J=F.filebrowser.url;if(J===undefined){J=B.config['filebrowser'+t(C)+'BrowseUrl'];if(J===undefined)J=B.config.filebrowserBrowseUrl;}if(J){F.onClick=u;F.filebrowser.url=J;F.hidden=false;}}else if(F.filebrowser.action=='QuickUpload'&&F['for']){var J=F.filebrowser.url;if(J===undefined){J=B.config['filebrowser'+t(C)+'UploadUrl'];if(J===undefined)J=B.config.filebrowserUploadUrl;}if(J){var K=F.onClick;F.onClick=function(L){var M=L.sender;if(K&&K.call(M,L)===false)return false;return v.call(M,L);};F.filebrowser.url=J;F.hidden=false;w(B,D.getContents(F['for'][0]).get(F['for'][1]),F.filebrowser);}}}};function y(B,C){var D=C.getDialog(),E=C.filebrowser.target||null;B=B.replace(/#/g,'%23');if(E){var F=E.split(':'),G=D.getContentElement(F[0],F[1]);if(G){G.setValue(B);D.selectPage(F[0]);}}};function z(B,C,D){if(D.indexOf(';')!==-1){var E=D.split(';');for(var F=0;F<E.length;F++){if(z(B,C,E[F]))return true;}return false;}var G=B.getContents(C).get(D).filebrowser;return G&&G.url;};function A(B,C){var G=this;var D=G._.filebrowserSe.getDialog(),E=G._.filebrowserSe['for'],F=G._.filebrowserSe.filebrowser.onSelect;if(E)D.getContentElement(E[0],E[1]).reset();if(typeof C=='function'&&C.call(G._.filebrowserSe)===false)return;if(F&&F.call(G._.filebrowserSe,B,C)===false)return;if(typeof C=='string'&&C)alert(C);if(B)y(B,G._.filebrowserSe);};p.add('filebrowser',{init:function(B,C){B._.filebrowserFn=k.addFunction(A,B);}});g.on('dialogDefinition',function(B){var C=B.data.definition,D;for(var E in C.contents){if(D=C.contents[E]){x(B.editor,B.data.name,C,D.elements);if(D.hidden&&D.filebrowser)D.hidden=!z(C,D.id,D.filebrowser);}}});})();p.add('find',{init:function(s){var t=p.find;s.ui.addButton('Find',{label:s.lang.findAndReplace.find,command:'find'});var u=s.addCommand('find',new g.dialogCommand('find'));u.canUndo=false;s.ui.addButton('Replace',{label:s.lang.findAndReplace.replace,command:'replace'});var v=s.addCommand('replace',new g.dialogCommand('replace'));v.canUndo=false;g.dialog.add('find',this.path+'dialogs/find.js');g.dialog.add('replace',this.path+'dialogs/find.js');},requires:['styles']});o.find_highlight={element:'span',styles:{'background-color':'#004',color:'#fff'}};(function(){var s=/\.swf(?:$|\?)/i,t=k.cssLength;function u(w){var x=w.attributes;return x.type=='application/x-shockwave-flash'||s.test(x.src||'');};function v(w,x){var y=w.createFakeParserElement(x,'cke_flash','flash',true),z=y.attributes.style||'',A=x.attributes.width,B=x.attributes.height;
if(typeof A!='undefined')z=y.attributes.style=z+'width:'+t(A)+';';if(typeof B!='undefined')z=y.attributes.style=z+'height:'+t(B)+';';return y;};p.add('flash',{init:function(w){w.addCommand('flash',new g.dialogCommand('flash'));w.ui.addButton('Flash',{label:w.lang.common.flash,command:'flash'});g.dialog.add('flash',this.path+'dialogs/flash.js');w.addCss('img.cke_flash{background-image: url('+g.getUrl(this.path+'images/placeholder.png')+');'+'background-position: center center;'+'background-repeat: no-repeat;'+'border: 1px solid #a9a9a9;'+'width: 80px;'+'height: 80px;'+'}');if(w.addMenuItems)w.addMenuItems({flash:{label:w.lang.flash.properties,command:'flash',group:'flash'}});w.on('doubleclick',function(x){var y=x.data.element;if(y.is('img')&&y.getAttribute('_cke_real_element_type')=='flash')x.data.dialog='flash';});if(w.contextMenu)w.contextMenu.addListener(function(x,y){if(x&&x.is('img')&&!x.isReadOnly()&&x.getAttribute('_cke_real_element_type')=='flash')return{flash:2};});},afterInit:function(w){var x=w.dataProcessor,y=x&&x.dataFilter;if(y)y.addRules({elements:{'cke:object':function(z){var A=z.attributes,B=A.classid&&String(A.classid).toLowerCase();if(!B){for(var C=0;C<z.children.length;C++){if(z.children[C].name=='cke:embed'){if(!u(z.children[C]))return null;return v(w,z);}}return null;}return v(w,z);},'cke:embed':function(z){if(!u(z))return null;return v(w,z);}}},5);},requires:['fakeobjects']});})();(function(){function s(t,u,v,w,x,y,z){var A=t.config,B=x.split(';'),C=[],D={};for(var E=0;E<B.length;E++){var F=B[E];if(F){F=F.split('/');var G={},H=B[E]=F[0];G[v]=C[E]=F[1]||H;D[H]=new g.style(z,G);D[H]._.definition.name=H;}else B.splice(E--,1);}t.ui.addRichCombo(u,{label:w.label,title:w.panelTitle,className:'cke_'+(v=='size'?'fontSize':'font'),panel:{css:t.skin.editor.css.concat(A.contentsCss),multiSelect:false,attributes:{'aria-label':w.panelTitle}},init:function(){this.startGroup(w.panelTitle);for(var I=0;I<B.length;I++){var J=B[I];this.add(J,D[J].buildPreview(),J);}},onClick:function(I){t.focus();t.fire('saveSnapshot');var J=D[I];if(this.getValue()==I)J.remove(t.document);else J.apply(t.document);t.fire('saveSnapshot');},onRender:function(){t.on('selectionChange',function(I){var J=this.getValue(),K=I.data.path,L=K.elements;for(var M=0,N;M<L.length;M++){N=L[M];for(var O in D){if(D[O].checkElementRemovable(N,true)){if(O!=J)this.setValue(O);return;}}}this.setValue('',y);},this);}});};p.add('font',{requires:['richcombo','styles'],init:function(t){var u=t.config;
s(t,'Font','family',t.lang.font,u.font_names,u.font_defaultLabel,u.font_style);s(t,'FontSize','size',t.lang.fontSize,u.fontSize_sizes,u.fontSize_defaultLabel,u.fontSize_style);}});})();o.font_names='Arial/Arial, Helvetica, sans-serif;Comic Sans MS/Comic Sans MS, cursive;Courier New/Courier New, Courier, monospace;Georgia/Georgia, serif;Lucida Sans Unicode/Lucida Sans Unicode, Lucida Grande, sans-serif;Tahoma/Tahoma, Geneva, sans-serif;Times New Roman/Times New Roman, Times, serif;Trebuchet MS/Trebuchet MS, Helvetica, sans-serif;Verdana/Verdana, Geneva, sans-serif';o.font_defaultLabel='';o.font_style={element:'span',styles:{'font-family':'#(family)'},overrides:[{element:'font',attributes:{face:null}}]};o.fontSize_sizes='8/8px;9/9px;10/10px;11/11px;12/12px;14/14px;16/16px;18/18px;20/20px;22/22px;24/24px;26/26px;28/28px;36/36px;48/48px;72/72px';o.fontSize_defaultLabel='';o.fontSize_style={element:'span',styles:{'font-size':'#(size)'},overrides:[{element:'font',attributes:{size:null}}]};p.add('format',{requires:['richcombo','styles'],init:function(s){var t=s.config,u=s.lang.format,v=t.format_tags.split(';'),w={};for(var x=0;x<v.length;x++){var y=v[x];w[y]=new g.style(t['format_'+y]);w[y]._.enterMode=s.config.enterMode;}s.ui.addRichCombo('Format',{label:u.label,title:u.panelTitle,className:'cke_format',panel:{css:s.skin.editor.css.concat(t.contentsCss),multiSelect:false,attributes:{'aria-label':u.panelTitle}},init:function(){this.startGroup(u.panelTitle);for(var z in w){var A=u['tag_'+z];this.add(z,'<'+z+'>'+A+'</'+z+'>',A);}},onClick:function(z){s.focus();s.fire('saveSnapshot');w[z].apply(s.document);setTimeout(function(){s.fire('saveSnapshot');},0);},onRender:function(){s.on('selectionChange',function(z){var A=this.getValue(),B=z.data.path;for(var C in w){if(w[C].checkActive(B)){if(C!=A)this.setValue(C,s.lang.format['tag_'+C]);return;}}this.setValue('');},this);}});}});o.format_tags='p;h1;h2;h3;h4;h5;h6;pre;address;div';o.format_p={element:'p'};o.format_div={element:'div'};o.format_pre={element:'pre'};o.format_address={element:'address'};o.format_h1={element:'h1'};o.format_h2={element:'h2'};o.format_h3={element:'h3'};o.format_h4={element:'h4'};o.format_h5={element:'h5'};o.format_h6={element:'h6'};p.add('forms',{init:function(s){var t=s.lang;s.addCss('form{border: 1px dotted #FF0000;padding: 2px;}\n');s.addCss('img.cke_hidden{background-image: url('+g.getUrl(this.path+'images/hiddenfield.gif')+');'+'background-position: center center;'+'background-repeat: no-repeat;'+'border: 1px solid #a9a9a9;'+'width: 16px !important;'+'height: 16px !important;'+'}');
var u=function(w,x,y){s.addCommand(x,new g.dialogCommand(x));s.ui.addButton(w,{label:t.common[w.charAt(0).toLowerCase()+w.slice(1)],command:x});g.dialog.add(x,y);},v=this.path+'dialogs/';u('Form','form',v+'form.js');u('Checkbox','checkbox',v+'checkbox.js');u('Radio','radio',v+'radio.js');u('TextField','textfield',v+'textfield.js');u('Textarea','textarea',v+'textarea.js');u('Select','select',v+'select.js');u('Button','button',v+'button.js');u('ImageButton','imagebutton',p.getPath('image')+'dialogs/image.js');u('HiddenField','hiddenfield',v+'hiddenfield.js');if(s.addMenuItems)s.addMenuItems({form:{label:t.form.menu,command:'form',group:'form'},checkbox:{label:t.checkboxAndRadio.checkboxTitle,command:'checkbox',group:'checkbox'},radio:{label:t.checkboxAndRadio.radioTitle,command:'radio',group:'radio'},textfield:{label:t.textfield.title,command:'textfield',group:'textfield'},hiddenfield:{label:t.hidden.title,command:'hiddenfield',group:'hiddenfield'},imagebutton:{label:t.image.titleButton,command:'imagebutton',group:'imagebutton'},button:{label:t.button.title,command:'button',group:'button'},select:{label:t.select.title,command:'select',group:'select'},textarea:{label:t.textarea.title,command:'textarea',group:'textarea'}});if(s.contextMenu){s.contextMenu.addListener(function(w){if(w&&w.hasAscendant('form',true)&&!w.isReadOnly())return{form:2};});s.contextMenu.addListener(function(w){if(w&&!w.isReadOnly()){var x=w.getName();if(x=='select')return{select:2};if(x=='textarea')return{textarea:2};if(x=='input'){var y=w.getAttribute('type');if(y=='text'||y=='password')return{textfield:2};if(y=='button'||y=='submit'||y=='reset')return{button:2};if(y=='checkbox')return{checkbox:2};if(y=='radio')return{radio:2};if(y=='image')return{imagebutton:2};}if(x=='img'&&w.getAttribute('_cke_real_element_type')=='hiddenfield')return{hiddenfield:2};}});}s.on('doubleclick',function(w){var x=w.data.element;if(x.is('form'))w.data.dialog='form';else if(x.is('select'))w.data.dialog='select';else if(x.is('textarea'))w.data.dialog='textarea';else if(x.is('img')&&x.getAttribute('_cke_real_element_type')=='hiddenfield')w.data.dialog='hiddenfield';else if(x.is('input')){var y=x.getAttribute('type');switch(y){case 'text':case 'password':w.data.dialog='textfield';break;case 'button':case 'submit':case 'reset':w.data.dialog='button';break;case 'checkbox':w.data.dialog='checkbox';break;case 'radio':w.data.dialog='radio';break;case 'image':w.data.dialog='imagebutton';break;}}});},afterInit:function(s){var t=s.dataProcessor,u=t&&t.htmlFilter,v=t&&t.dataFilter;
if(i)u&&u.addRules({elements:{input:function(w){var x=w.attributes,y=x.type;if(y=='checkbox'||y=='radio')x.value=='on'&&delete x.value;}}});if(v)v.addRules({elements:{input:function(w){if(w.attributes.type=='hidden')return s.createFakeParserElement(w,'cke_hidden','hiddenfield');}}});},requires:['image','fakeobjects']});if(i)n.prototype.hasAttribute=function(s){var v=this;var t=v.$.attributes.getNamedItem(s);if(v.getName()=='input')switch(s){case 'class':return v.$.className.length>0;case 'checked':return!!v.$.checked;case 'value':var u=v.getAttribute('type');if(u=='checkbox'||u=='radio')return v.$.value!='on';break;default:}return!!(t&&t.specified);};(function(){var s={canUndo:false,exec:function(u){u.insertElement(u.document.createElement('hr'));}},t='horizontalrule';p.add(t,{init:function(u){u.addCommand(t,s);u.ui.addButton('HorizontalRule',{label:u.lang.horizontalrule,command:t});}});})();(function(){var s=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,t='{cke_protected}';function u(Z){var aa=Z.children.length,ab=Z.children[aa-1];while(ab&&ab.type==3&&!k.trim(ab.value))ab=Z.children[--aa];return ab;};function v(Z,aa){var ab=Z.children,ac=u(Z);if(ac){if((aa||!i)&&ac.type==1&&ac.name=='br')ab.pop();if(ac.type==3&&s.test(ac.value))ab.pop();}};function w(Z){var aa=u(Z);return!aa||aa.type==1&&aa.name=='br'||Z.name=='form'&&aa.name=='input';};function x(Z){v(Z,true);if(w(Z))if(i)Z.add(new g.htmlParser.text('\xa0'));else Z.add(new g.htmlParser.element('br',{}));};function y(Z){v(Z);if(w(Z))Z.add(new g.htmlParser.text('\xa0'));};var z=l,A=k.extend({},z.$block,z.$listItem,z.$tableContent);for(var B in A){if(!('br' in z[B]))delete A[B];}delete A.pre;var C={elements:{},attributeNames:[[/^on/,'_cke_pa_on']]},D={elements:{}};for(B in A)D.elements[B]=x;var E={elementNames:[[/^cke:/,''],[/^\?xml:namespace$/,'']],attributeNames:[[/^_cke_(saved|pa)_/,''],[/^_cke.*/,''],['hidefocus','']],elements:{$:function(Z){var aa=Z.attributes;if(aa){if(aa.cke_temp)return false;var ab=['name','href','src'],ac;for(var ad=0;ad<ab.length;ad++){ac='_cke_saved_'+ab[ad];ac in aa&&delete aa[ab[ad]];}}return Z;},embed:function(Z){var aa=Z.parent;if(aa&&aa.name=='object'){var ab=aa.attributes.width,ac=aa.attributes.height;ab&&(Z.attributes.width=ab);ac&&(Z.attributes.height=ac);}},param:function(Z){Z.children=[];Z.isEmpty=true;return Z;},a:function(Z){if(!(Z.children.length||Z.attributes.name||Z.attributes._cke_saved_name))return false;},html:function(Z){delete Z.attributes.contenteditable;delete Z.attributes['class'];
},body:function(Z){delete Z.attributes.spellcheck;delete Z.attributes.contenteditable;},style:function(Z){var aa=Z.children[0];aa&&aa.value&&(aa.value=k.trim(aa.value));if(!Z.attributes.type)Z.attributes.type='text/css';},title:function(Z){var aa=Z.children[0];aa&&(aa.value=Z.attributes._cke_title||'');}},attributes:{'class':function(Z,aa){return k.ltrim(Z.replace(/(?:^|\s+)cke_[^\s]*/g,''))||false;}},comment:function(Z){if(Z.substr(0,t.length)==t){if(Z.substr(t.length,3)=='{C}')Z=Z.substr(t.length+3);else Z=Z.substr(t.length);return new g.htmlParser.cdata(decodeURIComponent(Z));}return Z;}},F={elements:{}};for(B in A)F.elements[B]=y;if(i)E.attributes.style=function(Z,aa){return Z.toLowerCase();};function G(Z){Z.attributes.contenteditable='false';};function H(Z){delete Z.attributes.contenteditable;};for(B in {input:1,textarea:1}){C.elements[B]=G;E.elements[B]=H;}var I=/<((?:a|area|img|input)[\s\S]*?\s)((href|src|name)\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|(?:[^ "'>]+)))([^>]*)>/gi,J=/\s_cke_saved_src\s*=/,K=/(?:<style(?=[ >])[^>]*>[\s\S]*<\/style>)|(?:<(:?link|meta|base)[^>]*>)/gi,L=/<cke:encoded>([^<]*)<\/cke:encoded>/gi,M=/(<\/?)((?:object|embed|param|html|body|head|title)[^>]*>)/gi,N=/(<\/?)cke:((?:html|body|head|title)[^>]*>)/gi,O=/<cke:(param|embed)([^>]*?)\/?>(?!\s*<\/cke:\1)/gi;function P(Z){return Z.replace(I,function(aa,ab,ac,ad,ae){if(ad=='src'&&J.test(aa))return aa;else return '<'+ab+ac+' _cke_saved_'+ac+ae+'>';});};function Q(Z){return Z.replace(K,function(aa){return '<cke:encoded>'+encodeURIComponent(aa)+'</cke:encoded>';});};function R(Z){return Z.replace(L,function(aa,ab){return decodeURIComponent(ab);});};function S(Z){return Z.replace(M,'$1cke:$2');};function T(Z){return Z.replace(N,'$1$2');};function U(Z){return Z.replace(O,'<cke:$1$2></cke:$1>');};function V(Z){return Z.replace(/(<pre\b[^>]*>)(\r\n|\n)/g,'$1$2$2');};function W(Z){return Z.replace(/<!--(?!{cke_protected})[\s\S]+?-->/g,function(aa){return '<!--'+t+'{C}'+encodeURIComponent(aa).replace(/--/g,'%2D%2D')+'-->';});};function X(Z){return Z.replace(/<!--\{cke_protected\}\{C\}([\s\S]+?)-->/g,function(aa,ab){return decodeURIComponent(ab);});};function Y(Z,aa){var ab=[],ac=/<\!--\{cke_temp(comment)?\}(\d*?)-->/g,ad=[/<script[\s\S]*?<\/script>/gi,/<noscript[\s\S]*?<\/noscript>/gi].concat(aa);Z=Z.replace(/<!--[\s\S]*?-->/g,function(af){return '<!--{cke_tempcomment}'+(ab.push(af)-1)+'-->';});for(var ae=0;ae<ad.length;ae++)Z=Z.replace(ad[ae],function(af){af=af.replace(ac,function(ag,ah,ai){return ab[ai];
});return '<!--{cke_temp}'+(ab.push(af)-1)+'-->';});Z=Z.replace(ac,function(af,ag,ah){return '<!--'+t+(ag?'{C}':'')+encodeURIComponent(ab[ah]).replace(/--/g,'%2D%2D')+'-->';});return Z;};p.add('htmldataprocessor',{requires:['htmlwriter'],init:function(Z){var aa=Z.dataProcessor=new g.htmlDataProcessor(Z);aa.writer.forceSimpleAmpersand=Z.config.forceSimpleAmpersand;aa.dataFilter.addRules(C);aa.dataFilter.addRules(D);aa.htmlFilter.addRules(E);aa.htmlFilter.addRules(F);}});g.htmlDataProcessor=function(Z){var aa=this;aa.editor=Z;aa.writer=new g.htmlWriter();aa.dataFilter=new g.htmlParser.filter();aa.htmlFilter=new g.htmlParser.filter();};g.htmlDataProcessor.prototype={toHtml:function(Z,aa){Z=Y(Z,this.editor.config.protectedSource);Z=P(Z);Z=Q(Z);Z=S(Z);Z=U(Z);Z=V(Z);var ab=new n('div');ab.setHtml('a'+Z);Z=ab.getHtml().substr(1);Z=T(Z);Z=R(Z);Z=X(Z);var ac=g.htmlParser.fragment.fromHtml(Z,aa),ad=new g.htmlParser.basicWriter();ac.writeHtml(ad,this.dataFilter);Z=ad.getHtml(true);Z=W(Z);return Z;},toDataFormat:function(Z,aa){var ab=this.writer,ac=g.htmlParser.fragment.fromHtml(Z,aa);ab.reset();ac.writeHtml(ab,this.htmlFilter);return ab.getHtml(true);}};})();p.add('image',{init:function(s){var t='image';g.dialog.add(t,this.path+'dialogs/image.js');s.addCommand(t,new g.dialogCommand(t));s.ui.addButton('Image',{label:s.lang.common.image,command:t});s.on('doubleclick',function(u){var v=u.data.element;if(v.is('img')&&!v.getAttribute('_cke_realelement'))u.data.dialog='image';});if(s.addMenuItems)s.addMenuItems({image:{label:s.lang.image.menu,command:'image',group:'image'}});if(s.contextMenu)s.contextMenu.addListener(function(u,v){if(!u||!u.is('img')||u.getAttribute('_cke_realelement')||u.isReadOnly())return null;return{image:2};});}});o.image_removeLinkByEmptyURL=true;(function(){var s={ol:1,ul:1},t=j.walker.whitespaces(true),u=j.walker.bookmark(false,true);function v(A,B){A.getCommand(this.name).setState(B);};function w(A){var J=this;var B=A.editor,C=A.data.path,D=C&&C.contains(s);if(D)return v.call(J,B,2);if(!J.useIndentClasses&&J.name=='indent')return v.call(J,B,2);var E=A.data.path,F=E.block||E.blockLimit;if(!F)return v.call(J,B,0);if(J.useIndentClasses){var G=F.$.className.match(J.classNameRegex),H=0;if(G){G=G[1];H=J.indentClassMap[G];}if(J.name=='outdent'&&!H||J.name=='indent'&&H==B.config.indentClasses.length)return v.call(J,B,0);return v.call(J,B,2);}else{var I=parseInt(F.getStyle(y(F)),10);if(isNaN(I))I=0;if(I<=0)return v.call(J,B,0);return v.call(J,B,2);}};function x(A,B){var D=this;
D.name=B;D.useIndentClasses=A.config.indentClasses&&A.config.indentClasses.length>0;if(D.useIndentClasses){D.classNameRegex=new RegExp('(?:^|\\s+)('+A.config.indentClasses.join('|')+')(?=$|\\s)');D.indentClassMap={};for(var C=0;C<A.config.indentClasses.length;C++)D.indentClassMap[A.config.indentClasses[C]]=C+1;}D.startDisabled=B=='outdent';};function y(A){return A.getComputedStyle('direction')=='ltr'?'margin-left':'margin-right';};function z(A){return A.type=1&&A.is('li');};x.prototype={exec:function(A){var B=this,C={};function D(S){var T=J.startContainer,U=J.endContainer;while(T&&!T.getParent().equals(S))T=T.getParent();while(U&&!U.getParent().equals(S))U=U.getParent();if(!T||!U)return;var V=T,W=[],X=false;while(!X){if(V.equals(U))X=true;W.push(V);V=V.getNext();}if(W.length<1)return;var Y=S.getParents(true);for(var Z=0;Z<Y.length;Z++){if(Y[Z].getName&&s[Y[Z].getName()]){S=Y[Z];break;}}var aa=B.name=='indent'?1:-1,ab=W[0],ac=W[W.length-1],ad=p.list.listToArray(S,C),ae=ad[ac.getCustomData('listarray_index')].indent;for(Z=ab.getCustomData('listarray_index');Z<=ac.getCustomData('listarray_index');Z++){ad[Z].indent+=aa;var af=ad[Z].parent;ad[Z].parent=new n(af.getName(),af.getDocument());}for(Z=ac.getCustomData('listarray_index')+1;Z<ad.length&&ad[Z].indent>ae;Z++)ad[Z].indent+=aa;var ag=S.getAttribute('dir')||S.getStyle('direction'),ah=p.list.arrayToList(ad,C,null,A.config.enterMode,ag);if(B.name=='outdent'){var ai;if((ai=S.getParent())&&ai.is('li')){var aj=ah.listNode.getChildren(),ak=[],al=aj.count(),am;for(Z=al-1;Z>=0;Z--){if((am=aj.getItem(Z))&&am.is&&am.is('li'))ak.push(am);}}}if(ah)ah.listNode.replace(S);if(ak&&ak.length)for(Z=0;Z<ak.length;Z++){var an=ak[Z],ao=an;while((ao=ao.getNext())&&ao.is&&ao.getName() in s){if(i&&!an.getFirst(function(ap){return t(ap)&&u(ap);}))an.append(J.document.createText('\xa0'));an.append(ao);}an.insertAfter(ai);}};function E(){var S=J.createIterator(),T=A.config.enterMode;S.enforceRealBlocks=true;S.enlargeBr=T!=2;var U;while(U=S.getNextParagraph())F(U);};function F(S){if(S.getCustomData('indent_processed'))return false;if(B.useIndentClasses){var T=S.$.className.match(B.classNameRegex),U=0;if(T){T=T[1];U=B.indentClassMap[T];}if(B.name=='outdent')U--;else U++;if(U<0)return false;U=Math.min(U,A.config.indentClasses.length);U=Math.max(U,0);var V=k.ltrim(S.$.className.replace(B.classNameRegex,''));if(U<1)S.$.className=V;else S.addClass(A.config.indentClasses[U-1]);}else{var W=y(S),X=parseInt(S.getStyle(W),10);if(isNaN(X))X=0;var Y=A.config.indentOffset||40;
X+=(B.name=='indent'?1:-1)*Y;if(X<0)return false;X=Math.max(X,0);X=Math.ceil(X/Y)*Y;S.setStyle(W,X?X+(A.config.indentUnit||'px'):'');if(S.getAttribute('style')==='')S.removeAttribute('style');}n.setMarker(C,S,'indent_processed',1);return true;};var G=A.getSelection(),H=G.createBookmarks(1),I=G&&G.getRanges(1),J,K=I.createIterator();while(J=K.getNextRange()){var L=J.getCommonAncestor(),M=L;while(M&&!(M.type==1&&s[M.getName()]))M=M.getParent();if(!M){var N=J.getEnclosedNode();if(N&&N.type==1&&N.getName() in s){J.setStartAt(N,1);J.setEndAt(N,2);M=N;}}if(M&&J.startContainer.type==1&&J.startContainer.getName() in s){var O=new j.walker(J);O.evaluator=z;J.startContainer=O.next();}if(M&&J.endContainer.type==1&&J.endContainer.getName() in s){O=new j.walker(J);O.evaluator=z;J.endContainer=O.previous();}if(M){var P=M.getFirst(function(S){return S.type==1&&S.is('li');}),Q=J.startContainer,R=P.equals(Q)||P.contains(Q);if(!(R&&(B.name=='indent'||B.useIndentClasses||parseInt(M.getStyle(y(M)),10))&&F(M)))D(M);}else E();}n.clearAllMarkers(C);A.forceNextSelectionCheck();G.selectBookmarks(H);}};p.add('indent',{init:function(A){var B=new x(A,'indent'),C=new x(A,'outdent');A.addCommand('indent',B);A.addCommand('outdent',C);A.ui.addButton('Indent',{label:A.lang.indent,command:'indent'});A.ui.addButton('Outdent',{label:A.lang.outdent,command:'outdent'});A.on('selectionChange',k.bind(w,B));A.on('selectionChange',k.bind(w,C));if(h.ie6Compat||h.ie7Compat)A.addCss('ul,ol{\tmargin-left: 0px;\tpadding-left: 40px;}');A.on('dirChanged',function(D){var E=new j.range(A.document);E.setStartBefore(D.data);E.setEndAfter(D.data);var F=new j.walker(E),G;while(G=F.next()){if(G.type==1){if(!G.equals(D.data)&&G.getDirection()){E.setStartAfter(G);F=new j.walker(E);continue;}var H=G.getStyle('margin-right'),I=G.getStyle('margin-left');H?G.setStyle('margin-left',H):G.removeStyle('margin-left');I?G.setStyle('margin-right',I):G.removeStyle('margin-right');}}});},requires:['domiterator','list']});})();(function(){function s(x,y){var z=y.block||y.blockLimit;if(!z||z.getName()=='body')return 2;return t(z,x.config.useComputedState)==this.value?1:2;};function t(x,y){y=y===undefined||y;var z;if(y)z=x.getComputedStyle('text-align');else{while(!x.hasAttribute||!(x.hasAttribute('align')||x.getStyle('text-align'))){var A=x.getParent();if(!A)break;x=A;}z=x.getStyle('text-align')||x.getAttribute('align')||'';}z&&(z=z.replace(/-moz-|-webkit-|start|auto/i,''));!z&&y&&(z=x.getComputedStyle('direction')=='rtl'?'right':'left');
return z;};function u(x){var y=x.editor.getCommand(this.name);y.state=s.call(this,x.editor,x.data.path);y.fire('state');};function v(x,y,z){var B=this;B.name=y;B.value=z;var A=x.config.justifyClasses;if(A){switch(z){case 'left':B.cssClassName=A[0];break;case 'center':B.cssClassName=A[1];break;case 'right':B.cssClassName=A[2];break;case 'justify':B.cssClassName=A[3];break;}B.cssClassRegex=new RegExp('(?:^|\\s+)(?:'+A.join('|')+')(?=$|\\s)');}};function w(x){var y=x.editor,z=new j.range(y.document);z.setStartBefore(x.data);z.setEndAfter(x.data);var A=new j.walker(z),B;while(B=A.next()){if(B.type==1){if(!B.equals(x.data)&&B.getDirection()){z.setStartAfter(B);A=new j.walker(z);continue;}var C='text-align',D=B.getStyle(C);if(D=='left')B.setStyle(C,'right');else if(D=='right')B.setStyle(C,'left');}}};v.prototype={exec:function(x){var J=this;var y=x.getSelection(),z=x.config.enterMode;if(!y)return;var A=y.createBookmarks(),B=y.getRanges(true),C=J.cssClassName,D,E,F=x.config.useComputedState;F=F===undefined||F;for(var G=B.length-1;G>=0;G--){D=B[G].createIterator();D.enlargeBr=z!=2;while(E=D.getNextParagraph()){E.removeAttribute('align');E.removeStyle('text-align');var H=C&&(E.$.className=k.ltrim(E.$.className.replace(J.cssClassRegex,''))),I=J.state==2&&(!F||t(E,true)!=J.value);if(C){if(I)E.addClass(C);else if(!H)E.removeAttribute('class');}else if(I)E.setStyle('text-align',J.value);}}x.focus();x.forceNextSelectionCheck();y.selectBookmarks(A);}};p.add('justify',{init:function(x){var y=new v(x,'justifyleft','left'),z=new v(x,'justifycenter','center'),A=new v(x,'justifyright','right'),B=new v(x,'justifyblock','justify');x.addCommand('justifyleft',y);x.addCommand('justifycenter',z);x.addCommand('justifyright',A);x.addCommand('justifyblock',B);x.ui.addButton('JustifyLeft',{label:x.lang.justify.left,command:'justifyleft'});x.ui.addButton('JustifyCenter',{label:x.lang.justify.center,command:'justifycenter'});x.ui.addButton('JustifyRight',{label:x.lang.justify.right,command:'justifyright'});x.ui.addButton('JustifyBlock',{label:x.lang.justify.block,command:'justifyblock'});x.on('selectionChange',k.bind(u,y));x.on('selectionChange',k.bind(u,A));x.on('selectionChange',k.bind(u,z));x.on('selectionChange',k.bind(u,B));x.on('dirChanged',w);},requires:['domiterator']});})();p.add('keystrokes',{beforeInit:function(s){s.keystrokeHandler=new g.keystrokeHandler(s);s.specialKeys={};},init:function(s){var t=s.config.keystrokes,u=s.config.blockedKeystrokes,v=s.keystrokeHandler.keystrokes,w=s.keystrokeHandler.blockedKeystrokes;
for(var x=0;x<t.length;x++)v[t[x][0]]=t[x][1];for(x=0;x<u.length;x++)w[u[x]]=1;}});g.keystrokeHandler=function(s){var t=this;if(s.keystrokeHandler)return s.keystrokeHandler;t.keystrokes={};t.blockedKeystrokes={};t._={editor:s};return t;};(function(){var s,t=function(v){v=v.data;var w=v.getKeystroke(),x=this.keystrokes[w],y=this._.editor;s=y.fire('key',{keyCode:w})===true;if(!s){if(x){var z={from:'keystrokeHandler'};s=y.execCommand(x,z)!==false;}if(!s){var A=y.specialKeys[w];s=A&&A(y)===true;if(!s)s=!!this.blockedKeystrokes[w];}}if(s)v.preventDefault(true);return!s;},u=function(v){if(s){s=false;v.data.preventDefault(true);}};g.keystrokeHandler.prototype={attach:function(v){v.on('keydown',t,this);if(h.opera||h.gecko&&h.mac)v.on('keypress',u,this);}};})();o.blockedKeystrokes=[1000+66,1000+73,1000+85];o.keystrokes=[[4000+121,'toolbarFocus'],[4000+122,'elementsPathFocus'],[2000+121,'contextMenu'],[1000+2000+121,'contextMenu'],[1000+90,'undo'],[1000+89,'redo'],[1000+2000+90,'redo'],[1000+76,'link'],[1000+66,'bold'],[1000+73,'italic'],[1000+85,'underline'],[4000+109,'toolbarCollapse'],[4000+48,'a11yHelp']];p.add('link',{init:function(s){s.addCommand('link',new g.dialogCommand('link'));s.addCommand('anchor',new g.dialogCommand('anchor'));s.addCommand('unlink',new g.unlinkCommand());s.ui.addButton('Link',{label:s.lang.link.toolbar,command:'link'});s.ui.addButton('Unlink',{label:s.lang.unlink,command:'unlink'});s.ui.addButton('Anchor',{label:s.lang.anchor.toolbar,command:'anchor'});g.dialog.add('link',this.path+'dialogs/link.js');g.dialog.add('anchor',this.path+'dialogs/anchor.js');s.addCss('img.cke_anchor{background-image: url('+g.getUrl(this.path+'images/anchor.gif')+');'+'background-position: center center;'+'background-repeat: no-repeat;'+'border: 1px solid #a9a9a9;'+'width: 18px !important;'+'height: 18px !important;'+'}\n'+'a.cke_anchor'+'{'+'background-image: url('+g.getUrl(this.path+'images/anchor.gif')+');'+'background-position: 0 center;'+'background-repeat: no-repeat;'+'border: 1px solid #a9a9a9;'+'padding-left: 18px;'+'}');s.on('selectionChange',function(t){var u=s.getCommand('unlink'),v=t.data.path.lastElement&&t.data.path.lastElement.getAscendant('a',true);if(v&&v.getName()=='a'&&v.getAttribute('href'))u.setState(2);else u.setState(0);});s.on('doubleclick',function(t){var u=p.link.getSelectedLink(s)||t.data.element;if(u.is('a'))t.data.dialog=u.getAttribute('name')&&!u.getAttribute('href')?'anchor':'link';else if(u.is('img')&&u.getAttribute('_cke_real_element_type')=='anchor')t.data.dialog='anchor';
});if(s.addMenuItems)s.addMenuItems({anchor:{label:s.lang.anchor.menu,command:'anchor',group:'anchor'},link:{label:s.lang.link.menu,command:'link',group:'link',order:1},unlink:{label:s.lang.unlink,command:'unlink',group:'link',order:5}});if(s.contextMenu)s.contextMenu.addListener(function(t,u){if(!t||t.isReadOnly())return null;var v=t.is('img')&&t.getAttribute('_cke_real_element_type')=='anchor';if(!v){if(!(t=p.link.getSelectedLink(s)))return null;v=t.getAttribute('name')&&!t.getAttribute('href');}return v?{anchor:2}:{link:2,unlink:2};});},afterInit:function(s){var t=s.dataProcessor,u=t&&t.dataFilter;if(u)u.addRules({elements:{a:function(v){var w=v.attributes;if(w.name&&!w.href)return s.createFakeParserElement(v,'cke_anchor','anchor');}}});},requires:['fakeobjects']});p.link={getSelectedLink:function(s){try{var t=s.getSelection();if(t.getType()==3){var u=t.getSelectedElement();if(u.is('a'))return u;}var v=t.getRanges(true)[0];v.shrink(2);var w=v.getCommonAncestor();return w.getAscendant('a',true);}catch(x){return null;}}};g.unlinkCommand=function(){};g.unlinkCommand.prototype={exec:function(s){var t=s.getSelection(),u=t.createBookmarks(),v=t.getRanges(),w,x;for(var y=0;y<v.length;y++){w=v[y].getCommonAncestor(true);x=w.getAscendant('a',true);if(!x)continue;v[y].selectNodeContents(x);}t.selectRanges(v);s.document.$.execCommand('unlink',false,null);t.selectBookmarks(u);},startDisabled:true};k.extend(o,{linkShowAdvancedTab:true,linkShowTargetTab:true});(function(){var s={ol:1,ul:1},t=/^[\n\r\t ]*$/;p.list={listToArray:function(I,J,K,L,M){if(!s[I.getName()])return[];if(!L)L=0;if(!K)K=[];for(var N=0,O=I.getChildCount();N<O;N++){var P=I.getChild(N);if(P.$.nodeName.toLowerCase()!='li')continue;var Q={parent:I,indent:L,element:P,contents:[]};if(!M){Q.grandparent=I.getParent();if(Q.grandparent&&Q.grandparent.$.nodeName.toLowerCase()=='li')Q.grandparent=Q.grandparent.getParent();}else Q.grandparent=M;if(J)n.setMarker(J,P,'listarray_index',K.length);K.push(Q);for(var R=0,S=P.getChildCount(),T;R<S;R++){T=P.getChild(R);if(T.type==1&&s[T.getName()])p.list.listToArray(T,J,K,L+1,Q.grandparent);else Q.contents.push(T);}}return K;},arrayToList:function(I,J,K,L,M){if(!K)K=0;if(!I||I.length<K+1)return null;var N=I[K].parent.getDocument(),O=new j.documentFragment(N),P=null,Q=K,R=Math.max(I[K].indent,0),S=null,T=L==1?'p':'div';while(1){var U=I[Q];if(U.indent==R){if(!P||I[Q].parent.getName()!=P.getName()){P=I[Q].parent.clone(false,1);O.append(P);}S=P.append(U.element.clone(0,1));
for(var V=0;V<U.contents.length;V++)S.append(U.contents[V].clone(1,1));Q++;}else if(U.indent==Math.max(R,0)+1){var W=p.list.arrayToList(I,null,Q,L);S.append(W.listNode);Q=W.nextIndex;}else if(U.indent==-1&&!K&&U.grandparent){S;if(s[U.grandparent.getName()])S=U.element.clone(false,true);else if(M||U.element.hasAttributes()||L!=2&&U.grandparent.getName()!='td'){S=N.createElement(T);U.element.copyAttributes(S,{type:1,value:1});M&&S.setAttribute('dir',M);if(!M&&L==2&&!S.hasAttributes())S=new j.documentFragment(N);}else S=new j.documentFragment(N);for(V=0;V<U.contents.length;V++)S.append(U.contents[V].clone(1,1));if(S.type==11&&Q!=I.length-1){if(S.getLast()&&S.getLast().type==1&&S.getLast().getAttribute('type')=='_moz')S.getLast().remove();S.appendBogus();}if(S.type==1&&S.getName()==T&&S.$.firstChild){S.trim();var X=S.getFirst();if(X.type==1&&X.isBlockBoundary()){var Y=new j.documentFragment(N);S.moveChildren(Y);S=Y;}}var Z=S.$.nodeName.toLowerCase();if(!i&&(Z=='div'||Z=='p'))S.appendBogus();O.append(S);P=null;Q++;}else return null;if(I.length<=Q||Math.max(I[Q].indent,0)<R)break;}if(J){var aa=O.getFirst();while(aa){if(aa.type==1)n.clearMarkers(J,aa);aa=aa.getNextSourceNode();}}return{listNode:O,nextIndex:Q};}};function u(I,J){I.getCommand(this.name).setState(J);};function v(I){var J=I.data.path,K=J.blockLimit,L=J.elements,M;for(var N=0;N<L.length&&(M=L[N])&&!M.equals(K);N++){if(s[L[N].getName()])return u.call(this,I.editor,this.type==L[N].getName()?1:2);}return u.call(this,I.editor,2);};function w(I,J,K,L){var M=p.list.listToArray(J.root,K),N=[];for(var O=0;O<J.contents.length;O++){var P=J.contents[O];P=P.getAscendant('li',true);if(!P||P.getCustomData('list_item_processed'))continue;N.push(P);n.setMarker(K,P,'list_item_processed',true);}var Q=J.root,R=Q.getDocument().createElement(this.type);Q.copyAttributes(R,{start:1,type:1});R.removeStyle('list-style-type');for(O=0;O<N.length;O++){var S=N[O].getCustomData('listarray_index');M[S].parent=R;}var T=p.list.arrayToList(M,K,null,I.config.enterMode),U,V=T.listNode.getChildCount();for(O=0;O<V&&(U=T.listNode.getChild(O));O++){if(U.getName()==this.type)L.push(U);}T.listNode.replace(J.root);};var x=/^h[1-6]$/;function y(I,J,K){var L=J.contents,M=J.root.getDocument(),N=[];if(L.length==1&&L[0].equals(J.root)){var O=M.createElement('div');L[0].moveChildren&&L[0].moveChildren(O);L[0].append(O);L[0]=O;}var P=J.contents[0].getParent();for(var Q=0;Q<L.length;Q++)P=P.getCommonAncestor(L[Q].getParent());var R=I.config.useComputedState,S,T;
R=R===undefined||R;for(Q=0;Q<L.length;Q++){var U=L[Q],V;while(V=U.getParent()){if(V.equals(P)){N.push(U);if(!T&&U.getDirection())T=1;var W=U.getDirection(R);if(S!==null)if(S&&S!=W)S=null;else S=W;break;}U=V;}}if(N.length<1)return;var X=N[N.length-1].getNext(),Y=M.createElement(this.type);K.push(Y);var Z,aa;while(N.length){Z=N.shift();aa=M.createElement('li');if(Z.is('pre')||x.test(Z.getName()))Z.appendTo(aa);else{if(S&&Z.getDirection()){Z.removeStyle('direction');Z.removeAttribute('dir');}Z.copyAttributes(aa);Z.moveChildren(aa);Z.remove();}aa.appendTo(Y);}if(S&&T)Y.setAttribute('dir',S);if(X)Y.insertBefore(X);else Y.appendTo(P);};function z(I,J,K){var L=p.list.listToArray(J.root,K),M=[];for(var N=0;N<J.contents.length;N++){var O=J.contents[N];O=O.getAscendant('li',true);if(!O||O.getCustomData('list_item_processed'))continue;M.push(O);n.setMarker(K,O,'list_item_processed',true);}var P=null;for(N=0;N<M.length;N++){var Q=M[N].getCustomData('listarray_index');L[Q].indent=-1;P=Q;}for(N=P+1;N<L.length;N++){if(L[N].indent>L[N-1].indent+1){var R=L[N-1].indent+1-L[N].indent,S=L[N].indent;while(L[N]&&L[N].indent>=S){L[N].indent+=R;N++;}N--;}}var T=p.list.arrayToList(L,K,null,I.config.enterMode,J.root.getAttribute('dir')),U=T.listNode,V,W;function X(Y){if((V=U[Y?'getFirst':'getLast']())&&!(V.is&&V.isBlockBoundary())&&(W=J.root[Y?'getPrevious':'getNext'](j.walker.whitespaces(true)))&&!(W.is&&W.isBlockBoundary({br:1})))I.document.createElement('br')[Y?'insertBefore':'insertAfter'](V);};X(true);X();U.replace(J.root);};function A(I,J){this.name=I;this.type=J;};A.prototype={exec:function(I){I.focus();var J=I.document,K=I.getSelection(),L=K&&K.getRanges(true);if(!L||L.length<1)return;if(this.state==2){var M=J.getBody();M.trim();if(!M.getFirst()){var N=J.createElement(I.config.enterMode==1?'p':I.config.enterMode==3?'div':'br');N.appendTo(M);L=new j.rangeList([new j.range(J)]);if(N.is('br')){L[0].setStartBefore(N);L[0].setEndAfter(N);}else L[0].selectNodeContents(N);K.selectRanges(L);}else{var O=L.length==1&&L[0],P=O&&O.getEnclosedNode();if(P&&P.is&&this.type==P.getName())u.call(this,I,1);}}var Q=K.createBookmarks(true),R=[],S={},T=L.createIterator(),U=0;while((O=T.getNextRange())&&++U){var V=O.getBoundaryNodes(),W=V.startNode,X=V.endNode;if(W.type==1&&W.getName()=='td')O.setStartAt(V.startNode,1);if(X.type==1&&X.getName()=='td')O.setEndAt(V.endNode,2);var Y=O.createIterator(),Z;Y.forceBrBreak=this.state==2;while(Z=Y.getNextParagraph()){if(Z.getCustomData('list_block'))continue;
else n.setMarker(S,Z,'list_block',1);var aa=new j.elementPath(Z),ab=aa.elements,ac=ab.length,ad=null,ae=0,af=aa.blockLimit,ag;for(var ah=ac-1;ah>=0&&(ag=ab[ah]);ah--){if(s[ag.getName()]&&af.contains(ag)){af.removeCustomData('list_group_object_'+U);var ai=ag.getCustomData('list_group_object');if(ai)ai.contents.push(Z);else{ai={root:ag,contents:[Z]};R.push(ai);n.setMarker(S,ag,'list_group_object',ai);}ae=1;break;}}if(ae)continue;var aj=af;if(aj.getCustomData('list_group_object_'+U))aj.getCustomData('list_group_object_'+U).contents.push(Z);else{ai={root:aj,contents:[Z]};n.setMarker(S,aj,'list_group_object_'+U,ai);R.push(ai);}}}var ak=[];while(R.length>0){ai=R.shift();if(this.state==2){if(s[ai.root.getName()])w.call(this,I,ai,S,ak);else y.call(this,I,ai,ak);}else if(this.state==1&&s[ai.root.getName()])z.call(this,I,ai,S);}for(ah=0;ah<ak.length;ah++){ad=ak[ah];var al,am=this;(al=function(an){var ao=ad[an?'getPrevious':'getNext'](j.walker.whitespaces(true));if(ao&&ao.getName&&ao.getName()==am.type){ao.remove();ao.moveChildren(ad,an);}})();al(1);}n.clearAllMarkers(S);K.selectBookmarks(Q);I.focus();}};var B=l,C=/[\t\r\n ]*(?:&nbsp;|\xa0)$/;function D(I,J){var K,L=I.children,M=L.length;for(var N=0;N<M;N++){K=L[N];if(K.name&&K.name in J)return N;}return M;};function E(I){return function(J){var K=J.children,L=D(J,B.$list),M=K[L],N=M&&M.previous,O;if(N&&(N.name&&N.name=='br'||N.value&&(O=N.value.match(C)))){var P=N;if(!(O&&O.index)&&P==K[0])K[0]=I||i?new g.htmlParser.text('\xa0'):new g.htmlParser.element('br',{});else if(P.name=='br')K.splice(L-1,1);else P.value=P.value.replace(C,'');}};};var F={elements:{}};for(var G in B.$listItem)F.elements[G]=E();var H={elements:{}};for(G in B.$listItem)H.elements[G]=E(true);p.add('list',{init:function(I){var J=new A('numberedlist','ol'),K=new A('bulletedlist','ul');I.addCommand('numberedlist',J);I.addCommand('bulletedlist',K);I.ui.addButton('NumberedList',{label:I.lang.numberedlist,command:'numberedlist'});I.ui.addButton('BulletedList',{label:I.lang.bulletedlist,command:'bulletedlist'});I.on('selectionChange',k.bind(v,J));I.on('selectionChange',k.bind(v,K));},afterInit:function(I){var J=I.dataProcessor;if(J){J.dataFilter.addRules(F);J.htmlFilter.addRules(H);}},requires:['domiterator']});})();(function(){p.liststyle={requires:['dialog'],init:function(s){s.addCommand('numberedListStyle',new g.dialogCommand('numberedListStyle'));g.dialog.add('numberedListStyle',this.path+'dialogs/liststyle.js');s.addCommand('bulletedListStyle',new g.dialogCommand('bulletedListStyle'));
g.dialog.add('bulletedListStyle',this.path+'dialogs/liststyle.js');if(s.addMenuItems){s.addMenuGroup('list',108);s.addMenuItems({numberedlist:{label:s.lang.list.numberedTitle,group:'list',command:'numberedListStyle'},bulletedlist:{label:s.lang.list.bulletedTitle,group:'list',command:'bulletedListStyle'}});}if(s.contextMenu)s.contextMenu.addListener(function(t,u){if(!t||t.isReadOnly())return null;while(t){var v=t.getName();if(v=='ol')return{numberedlist:2};else if(v=='ul')return{bulletedlist:2};t=t.getParent();}return null;});}};p.add('liststyle',p.liststyle);})();(function(){function s(y){if(!y||y.type!=1||y.getName()!='form')return[];var z=[],A=['style','className'];for(var B=0;B<A.length;B++){var C=A[B],D=y.$.elements.namedItem(C);if(D){var E=new n(D);z.push([E,E.nextSibling]);E.remove();}}return z;};function t(y,z){if(!y||y.type!=1||y.getName()!='form')return;if(z.length>0)for(var A=z.length-1;A>=0;A--){var B=z[A][0],C=z[A][1];if(C)B.insertBefore(C);else B.appendTo(y);}};function u(y,z){var A=s(y),B={},C=y.$;if(!z){B['class']=C.className||'';C.className='';}B.inline=C.style.cssText||'';if(!z)C.style.cssText='position: static; overflow: visible';t(A);return B;};function v(y,z){var A=s(y),B=y.$;if('class' in z)B.className=z['class'];if('inline' in z)B.style.cssText=z.inline;t(A);};function w(y){var z=g.instances;for(var A in z){var B=z[A];if(B.mode=='wysiwyg'){var C=B.document.getBody();C.setAttribute('contentEditable',false);C.setAttribute('contentEditable',true);}}if(y.focusManager.hasFocus){y.toolbox.focus();y.focus();}};function x(y){if(!i||h.version>6)return null;var z=n.createFromHtml('<iframe frameborder="0" tabindex="-1" src="javascript:void((function(){document.open();'+(h.isCustomDomain()?"document.domain='"+this.getDocument().$.domain+"';":'')+'document.close();'+'})())"'+' style="display:block;position:absolute;z-index:-1;'+'progid:DXImageTransform.Microsoft.Alpha(opacity=0);'+'"></iframe>');return y.append(z,true);};p.add('maximize',{init:function(y){var z=y.lang,A=g.document,B=A.getWindow(),C,D,E,F;function G(){var I=B.getViewPaneSize();F&&F.setStyles({width:I.width+'px',height:I.height+'px'});y.resize(I.width,I.height,null,true);};var H=2;y.addCommand('maximize',{modes:{wysiwyg:1,source:1},editorFocus:false,exec:function(){var I=y.container.getChild(1),J=y.getThemeSpace('contents');if(y.mode=='wysiwyg'){var K=y.getSelection();C=K&&K.getRanges();D=B.getScrollPosition();}else{var L=y.textarea.$;C=!i&&[L.selectionStart,L.selectionEnd];D=[L.scrollLeft,L.scrollTop];
}if(this.state==2){B.on('resize',G);E=B.getScrollPosition();var M=y.container;while(M=M.getParent()){M.setCustomData('maximize_saved_styles',u(M));M.setStyle('z-index',y.config.baseFloatZIndex-1);}J.setCustomData('maximize_saved_styles',u(J,true));I.setCustomData('maximize_saved_styles',u(I,true));var N=B.getViewPaneSize(),O={overflow:'hidden',width:(h.opera?N.width:0)+'px',height:(h.opera?N.height-16:0)+'px'};if(i)A.$.documentElement.style.overflow=A.getBody().$.style.overflow='hidden';else A.getBody().setStyles(O);if(h.opera)A.getBody().getParent().setStyles(O);i?setTimeout(function(){B.$.scrollTo(0,0);},0):B.$.scrollTo(0,0);I.setStyle('position','absolute');I.$.offsetLeft;I.setStyles({'z-index':y.config.baseFloatZIndex-1,left:'0px',top:'0px'});F=x(I);I.addClass('cke_maximized');G();var P=I.getDocumentPosition();I.setStyles({left:-1*P.x+'px',top:-1*P.y+'px'});h.gecko&&w(y);}else if(this.state==1){B.removeListener('resize',G);var Q=[J,I];for(var R=0;R<Q.length;R++){v(Q[R],Q[R].getCustomData('maximize_saved_styles'));Q[R].removeCustomData('maximize_saved_styles');}M=y.container;while(M=M.getParent()){v(M,M.getCustomData('maximize_saved_styles'));M.removeCustomData('maximize_saved_styles');}i?setTimeout(function(){B.$.scrollTo(E.x,E.y);},0):B.$.scrollTo(E.x,E.y);I.removeClass('cke_maximized');if(F){F.remove();F=null;}y.fire('resize');}this.toggleState();var S=this.uiItems[0],T=this.state==2?z.maximize:z.minimize,U=y.element.getDocument().getById(S._.id);U.getChild(1).setHtml(T);U.setAttribute('title',T);U.setAttribute('href','javascript:void("'+T+'");');if(y.mode=='wysiwyg'){if(C){h.gecko&&w(y);y.getSelection().selectRanges(C);var V=y.getSelection().getStartElement();V&&V.scrollIntoView(true);}else B.$.scrollTo(D.x,D.y);}else{if(C){L.selectionStart=C[0];L.selectionEnd=C[1];}L.scrollLeft=D[0];L.scrollTop=D[1];}C=D=null;H=this.state;},canUndo:false});y.ui.addButton('Maximize',{label:z.maximize,command:'maximize'});y.on('mode',function(){var I=y.getCommand('maximize');I.setState(I.state==0?0:H);},null,null,100);}});})();var a={url:'',width:507,height:322,autoplay:'false',contentType:''},b={url:'',width:507,height:322,autoplay:'false',contentType:''},c='';(function(){p.add('mediaembed',{requires:['iframedialog'],init:function(s){var t=this;g.dialog.add('MediaEmbedDialog',function(u){return{title:'Embed Media Dialog',minWidth:550,minHeight:200,contents:[{id:'iframe',label:'Embed Media',expand:true,elements:[{type:'html',id:'pageMediaEmbed',label:'Embed Media',style:'width : 100%',html:'<iframe src="'+t.path.toLowerCase()+'dialogs/mediaembed_'+u.config.language+'.html" frameborder="0" name="iframeMediaEmbed" id="iframeMediaEmbed" allowtransparency="1" style="width:100%;height:250px;margin:0;padding:0;"></iframe>'}]}],onShow:function(){d('iframe#iframeMediaEmbed',true);
},onOk:function(){var v=this.getParentEditor(),w=$('iframe#iframeMediaEmbed'),x=w.contents(),y=x.find('#txtUrl').val();if(y!=''&&y.indexOf('.')!=-1){var z='${include:media-player url=['+unescape(y)+']',A=x.find('#txtContentType').val();if(A.length>0)z=z+' content-type=['+A+']';var B=x.find('#txtWidth').val();if(B.length>0&&B!=a.width)z=z+' width=['+B+']';var C=x.find('#txtHeight').val();if(C.length>0&&C!=a.height)z=z+' height=['+C+']';var D=x.find('#chkAutoplay');if(D.attr('checked')==true)z+=' autoplay=[true]';var E=x.find('#txtAlign').val();if(z.length>0)z+='}';var F='';if(A.length>0&&A=='audio/mp3')F='vrtx-media-player-audio';else if(e(y)=='mp3')F='vrtx-media-player-audio';else F='vrtx-media-player';var G=F;if(E!='')G=G+' '+E;selected=v.getSelection().getStartElement();if(selected.is('p'))selected.renameNode('div');selected.appendHtml('<div class="'+G+'">'+z+'</div>');}else{alert('Du må spesifisere en URL');return false;}}};});g.dialog.add('MediaEmbedDialogMod',function(u){return{title:'Embed Media Dialog',minWidth:550,minHeight:200,contents:[{id:'iframe',label:'Embed Media',expand:true,elements:[{type:'html',id:'pageMediaEmbedMod',label:'Embed Media',style:'width : 100%',html:'<iframe src="'+t.path.toLowerCase()+'dialogs/mediaembed_'+u.config.language+'.html" frameborder="0" name="iframeMediaEmbed" id="iframeMediaEmbedMod" allowtransparency="1" style="width:100%;height:250px;margin:0;padding:0;"></iframe>'}]}],onShow:function(){d('iframe#iframeMediaEmbedMod',false);},onOk:function(){var v=this.getParentEditor(),w=$('iframe#iframeMediaEmbedMod'),x=w.contents(),y=x.find('#txtUrl').val();if(y!=''&&y.indexOf('.')!=-1){var z='${include:media-player url=['+unescape(y)+']',A=x.find('#txtContentType').val();if(A.length>0)z=z+' content-type=['+A+']';var B=x.find('#txtWidth').val();if(B.length>0&&B!=a.width)z=z+' width=['+B+']';var C=x.find('#txtHeight').val();if(C.length>0&&C!=a.height)z=z+' height=['+C+']';var D=x.find('#chkAutoplay');if(D.attr('checked')==true)z+=' autoplay=[true]';var E=x.find('#txtAlign').val();if(z.length>0)z+='}';var F='';if(A.length>0&&A=='audio/mp3')F='vrtx-media-player-audio';else if(e(y)=='mp3')F='vrtx-media-player-audio';else F='vrtx-media-player';selected=v.getSelection().getStartElement();selected.removeAttribute('class');if(E!=''&&F!=''){selected.addClass(F);selected.addClass(E);}else selected.addClass(F);if(selected.is('p'))selected.renameNode('div');selected.setText(z);}else{alert('Du må spesifisere en URL');return false;}}};});s.addCommand('mediaembed',new g.dialogCommand('MediaEmbedDialog'));
s.addCommand('mediaembedmod',new g.dialogCommand('MediaEmbedDialogMod'));s.addCommand('MediaEmbedRemove',{exec:function(u){var v=u.getSelection(),w=v.createBookmarks(),x=v.getStartElement();x.remove(false);v.selectBookmarks(w);}});s.ui.addButton('MediaEmbed',{label:'Embed Media',command:'mediaembed',icon:this.path.toLowerCase()+'images/icon.gif'});s.on('doubleclick',function(u){var v=u.data,w=v.element,x=w.getHtml();if(x.indexOf('include:media-player')==-1)return null;f(x,w);v.dialog='MediaEmbedDialogMod';});if(s.addMenuItems){s.addMenuGroup('mediaembed');s.addMenuItems({MediaEmbedDialogMod:{label:'Mediaegenskaper',command:'mediaembedmod',group:'mediaembed',icon:this.path.toLowerCase()+'images/icon.gif',order:1},RemoveMedia:{label:'Fjern media',command:'MediaEmbedRemove',group:'mediaembed',icon:this.path.toLowerCase()+'images/iconremove.gif',order:5}});}if(s.contextMenu)s.contextMenu.addListener(function(u,v){var w=u.getHtml();if(w.indexOf('include:media-player')==-1)return null;f(w,u);return{MediaEmbedDialogMod:2,RemoveMedia:2};});}});})();function d(s,t){var u=setInterval(function(){var v=$(s);if(v){var w=v.contents();if(w.find('#chkAutoplay').length){w.find('#txtUrl').val(t?a.url:b.url);w.find('#txtWidth').val(t?a.width:b.width);w.find('#txtHeight').val(t?a.height:b.height);w.find('#txtContentType').val(t?a.contentType:b.contentType);var x=t?a.autoplay:b.autoplay;if(x=='true')w.find('#chkAutoplay').attr('checked',true);else w.find('#chkAutoplay').attr('checked',false);if(c!=''&&c!=' '&&!t)w.find('#txtAlign').val(c);else w.find('#txtAlign').val('');if(!t){b.url=a.url;b.width=a.width;b.height=a.height;b.autoplay=a.autoplay;b.contentType=a.contentType;c='';}clearInterval(u);}}},50);};function e(s){var t=s.match(/\.(avi|asf|fla|flv|mov|mp3|mp4|m4v|mpg|mpeg|mpv|qt|swf|wma|wmv)$/i);if(t!=null&&t.length&&t.length>0)t=t[1];else t='';return t;};function f(s,t){var u=[],v=s,w=t.$.className;c=$.trim(w.replace(/vrtx-media-player[\w-]*/g,''));for(var x in b){if(x!='contentType')u=new RegExp('(?:'+x+'=\\[)(.*?)(?=\\])');else u=new RegExp('(?:content\\-type=\\[)(.*?)(?=\\])');var y=u.exec(s);if(y!=null)if(y.length=2)b[x]=y[1];s=v;}};p.add('newpage',{init:function(s){s.addCommand('newpage',{modes:{wysiwyg:1,source:1},exec:function(t){var u=this;t.setData(t.config.newpage_html||'',function(){setTimeout(function(){t.fire('afterCommandExec',{name:u.name,command:u});},200);});t.focus();},async:true});s.ui.addButton('NewPage',{label:s.lang.newPage,command:'newpage'});}});p.add('pagebreak',{init:function(s){s.addCommand('pagebreak',p.pagebreakCmd);
s.ui.addButton('PageBreak',{label:s.lang.pagebreak,command:'pagebreak'});s.addCss('img.cke_pagebreak{background-image: url('+g.getUrl(this.path+'images/pagebreak.gif')+');'+'background-position: center center;'+'background-repeat: no-repeat;'+'clear: both;'+'display: block;'+'float: none;'+'width:100% !important; _width:99.9% !important;'+'border-top: #999999 1px dotted;'+'border-bottom: #999999 1px dotted;'+'height: 5px !important;'+'page-break-after: always;'+'}');},afterInit:function(s){var t=s.dataProcessor,u=t&&t.dataFilter;if(u)u.addRules({elements:{div:function(v){var w=v.attributes,x=w&&w.style,y=x&&v.children.length==1&&v.children[0],z=y&&y.name=='span'&&y.attributes.style;if(z&&/page-break-after\s*:\s*always/i.test(x)&&/display\s*:\s*none/i.test(z)){var A=s.createFakeParserElement(v,'cke_pagebreak','div'),B=s.lang.pagebreakAlt;A.attributes.alt=B;A.attributes['aria-label']=B;return A;}}}});},requires:['fakeobjects']});p.pagebreakCmd={exec:function(s){var t=s.lang.pagebreakAlt,u=n.createFromHtml('<div style="page-break-after: always;"><span style="display: none;">&nbsp;</span></div>');u=s.createFakeElement(u,'cke_pagebreak','div');u.setAttribute('alt',t);u.setAttribute('aria-label',t);var v=s.getSelection().getRanges(true);s.fire('saveSnapshot');for(var w,x=v.length-1;x>=0;x--){w=v[x];if(x<v.length-1)u=u.clone(true);w.splitBlock('p');w.insertNode(u);if(x==v.length-1){w.moveToPosition(u,4);w.select();}var y=u.getPrevious();if(y&&l[y.getName()].div)u.move(y);}s.fire('saveSnapshot');}};(function(){p.add('pastefromword',{init:function(s){var t=0,u=function(){setTimeout(function(){t=0;},0);};s.addCommand('pastefromword',{canUndo:false,exec:function(){t=1;if(s.execCommand('paste')===false)s.on('dialogHide',function(v){v.removeListener();u();});else u();}});s.ui.addButton('PasteFromWord',{label:s.lang.pastefromword.toolbar,command:'pastefromword'});s.on('paste',function(v){var w=v.data,x;if((x=w.html)&&(t||/(class=\"?Mso|style=\"[^\"]*\bmso\-|w:WordDocument)/.test(x))){var y=this.loadFilterRules(function(){if(y)s.fire('paste',w);else if(!s.config.pasteFromWordPromptCleanup||t||confirm(s.lang.pastefromword.confirmCleanup))w.html=g.cleanWord(x,s);});y&&v.cancel();}},this);},loadFilterRules:function(s){var t=g.cleanWord;if(t)s();else{var u=g.getUrl(o.pasteFromWordCleanupFile||this.path+'filter/default.js');g.scriptLoader.load(u,s,null,false,true);}return!t;}});})();(function(){var s={exec:function(v){var w=k.tryThese(function(){var x=window.clipboardData.getData('Text');
if(!x)throw 0;return x;});if(!w){v.openDialog('pastetext');return false;}else v.fire('paste',{text:w});return true;}};function t(v,w){if(i){var x=v.selection;if(x.type=='Control')x.clear();x.createRange().pasteHTML(w);}else v.execCommand('inserthtml',false,w);};p.add('pastetext',{init:function(v){var w='pastetext',x=v.addCommand(w,s);v.ui.addButton('PasteText',{label:v.lang.pasteText.button,command:w});g.dialog.add(w,g.getUrl(this.path+'dialogs/pastetext.js'));if(v.config.forcePasteAsPlainText)v.on('beforeCommandExec',function(y){if(y.data.name=='paste'){v.execCommand('pastetext');y.cancel();}},null,null,0);},requires:['clipboard']});function u(v,w,x,y){while(x--)p.enterkey[w==2?'enterBr':'enterBlock'](v,w,null,y);};g.editor.prototype.insertText=function(v){this.focus();this.fire('saveSnapshot');var w=this.getSelection().getStartElement().hasAscendant('pre',true)?2:this.config.enterMode,x=w==2,y=this.document.$,z=this,A;v=k.htmlEncode(v.replace(/\r\n|\r/g,'\n'));var B=0;v.replace(/\n+/g,function(C,D){A=v.substring(B,D);B=D+C.length;A.length&&t(y,A);var E=C.length,F=x?0:Math.floor(E/2),G=x?E:E%2;u(z,w,F);u(z,2,G,x?false:true);});A=v.substring(B,v.length);A.length&&t(y,A);this.fire('saveSnapshot');};})();p.add('popup');k.extend(g.editor.prototype,{popup:function(s,t,u,v){t=t||'80%';u=u||'70%';if(typeof t=='string'&&t.length>1&&t.substr(t.length-1,1)=='%')t=parseInt(window.screen.width*parseInt(t,10)/100,10);if(typeof u=='string'&&u.length>1&&u.substr(u.length-1,1)=='%')u=parseInt(window.screen.height*parseInt(u,10)/100,10);if(t<640)t=640;if(u<420)u=420;var w=parseInt((window.screen.height-u)/2,10),x=parseInt((window.screen.width-t)/2,10);v=(v||'location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes,scrollbars=yes')+',width='+t+',height='+u+',top='+w+',left='+x;var y=window.open('',null,v,true);if(!y)return false;try{y.moveTo(x,w);y.resizeTo(t,u);y.focus();y.location.href=s;}catch(z){y=window.open(s,null,v,true);}return true;}});(function(){var s={modes:{wysiwyg:1,source:1},canUndo:false,exec:function(u){var v,w=u.config,x=w.baseHref?'<base href="'+w.baseHref+'"/>':'',y=h.isCustomDomain();if(w.fullPage)v=u.getData().replace(/<head>/,'$&'+x).replace(/[^>]*(?=<\/title>)/,u.lang.preview);else{var z='<body ',A=u.document&&u.document.getBody();if(A){if(A.getAttribute('id'))z+='id="'+A.getAttribute('id')+'" ';if(A.getAttribute('class'))z+='class="'+A.getAttribute('class')+'" ';}z+='>';v=u.config.docType+'<html dir="'+u.config.contentsLangDirection+'">'+'<head>'+x+'<title>'+u.lang.preview+'</title>'+k.buildStyleHtml(u.config.contentsCss)+'</head>'+z+u.getData()+'</body></html>';
}var B=640,C=420,D=80;try{var E=window.screen;B=Math.round(E.width*0.8);C=Math.round(E.height*0.7);D=Math.round(E.width*0.1);}catch(H){}var F='';if(y){window._cke_htmlToLoad=v;F='javascript:void( (function(){document.open();document.domain="'+document.domain+'";'+'document.write( window.opener._cke_htmlToLoad );'+'document.close();'+'window.opener._cke_htmlToLoad = null;'+'})() )';}var G=window.open(F,null,'toolbar=yes,location=no,status=yes,menubar=yes,scrollbars=yes,resizable=yes,width='+B+',height='+C+',left='+D);if(!y){G.document.open();G.document.write(v);G.document.close();}}},t='preview';p.add(t,{init:function(u){u.addCommand(t,s);u.ui.addButton('Preview',{label:u.lang.preview,command:t});}});})();p.add('print',{init:function(s){var t='print',u=s.addCommand(t,p.print);s.ui.addButton('Print',{label:s.lang.print,command:t});}});p.print={exec:function(s){if(h.opera)return;else if(h.gecko)s.window.$.print();else s.document.$.execCommand('Print');},canUndo:false,modes:{wysiwyg:!h.opera}};p.add('removeformat',{requires:['selection'],init:function(s){s.addCommand('removeFormat',p.removeformat.commands.removeformat);s.ui.addButton('RemoveFormat',{label:s.lang.removeFormat,command:'removeFormat'});s._.removeFormat={filters:[]};}});p.removeformat={commands:{removeformat:{exec:function(s){var t=s._.removeFormatRegex||(s._.removeFormatRegex=new RegExp('^(?:'+s.config.removeFormatTags.replace(/,/g,'|')+')$','i')),u=s._.removeAttributes||(s._.removeAttributes=s.config.removeFormatAttributes.split(',')),v=p.removeformat.filter,w=s.getSelection().getRanges(1),x=w.createIterator(),y;while(y=x.getNextRange()){if(y.collapsed)continue;y.enlarge(1);var z=y.createBookmark(),A=z.startNode,B=z.endNode,C=function(F){var G=new j.elementPath(F),H=G.elements;for(var I=1,J;J=H[I];I++){if(J.equals(G.block)||J.equals(G.blockLimit))break;if(t.test(J.getName())&&v(s,J))F.breakParent(J);}};C(A);C(B);var D=A.getNextSourceNode(true,1);while(D){if(D.equals(B))break;var E=D.getNextSourceNode(false,1);if(!(D.getName()=='img'&&D.getAttribute('_cke_realelement'))&&v(s,D))if(t.test(D.getName()))D.remove(1);else{D.removeAttributes(u);s.fire('removeFormatCleanup',D);}D=E;}y.moveToBookmark(z);}s.getSelection().selectRanges(w);}}},filter:function(s,t){var u=s._.removeFormat.filters;for(var v=0;v<u.length;v++){if(u[v](t)===false)return false;}return true;}};g.editor.prototype.addRemoveFormatFilter=function(s){this._.removeFormat.filters.push(s);};o.removeFormatTags='b,big,code,del,dfn,em,font,i,ins,kbd,q,samp,small,span,strike,strong,sub,sup,tt,u,var';
o.removeFormatAttributes='class,style,lang,width,height,align,hspace,valign';p.add('resize',{init:function(s){var t=s.config;!t.resize_dir&&(t.resize_dir='both');t.resize_maxWidth==undefined&&(t.resize_maxWidth=3000);t.resize_maxHeight==undefined&&(t.resize_maxHeight=3000);t.resize_minWidth==undefined&&(t.resize_minWidth=750);t.resize_minHeight==undefined&&(t.resize_minHeight=250);if(t.resize_enabled!==false){var u=null,v,w,x=(t.resize_dir=='both'||t.resize_dir=='horizontal')&&t.resize_minWidth!=t.resize_maxWidth,y=(t.resize_dir=='both'||t.resize_dir=='vertical')&&t.resize_minHeight!=t.resize_maxHeight;function z(C){var D=C.data.$.screenX-v.x,E=C.data.$.screenY-v.y,F=w.width,G=w.height,H=F+D*(s.lang.dir=='rtl'?-1:1),I=G+E;if(x)F=Math.max(t.resize_minWidth,Math.min(H,t.resize_maxWidth));if(y)G=Math.max(t.resize_minHeight,Math.min(I,t.resize_maxHeight));s.resize(F,G);};function A(C){g.document.removeListener('mousemove',z);g.document.removeListener('mouseup',A);if(s.document){s.document.removeListener('mousemove',z);s.document.removeListener('mouseup',A);}};var B=k.addFunction(function(C){if(!u)u=s.getResizable();w={width:u.$.offsetWidth||0,height:u.$.offsetHeight||0};v={x:C.screenX,y:C.screenY};t.resize_minWidth>w.width&&(t.resize_minWidth=w.width);t.resize_minHeight>w.height&&(t.resize_minHeight=w.height);g.document.on('mousemove',z);g.document.on('mouseup',A);if(s.document){s.document.on('mousemove',z);s.document.on('mouseup',A);}});s.on('destroy',function(){k.removeFunction(B);});s.on('themeSpace',function(C){if(C.data.space=='bottom'){var D='';if(x&&!y)D=' cke_resizer_horizontal';if(!x&&y)D=' cke_resizer_vertical';C.data.html+='<div class="cke_resizer'+D+'"'+' title="'+k.htmlEncode(s.lang.resize)+'"'+' onmousedown="CKEDITOR.tools.callFunction('+B+', event)"'+'></div>';}},s,null,100);}}});(function(){var s={modes:{wysiwyg:1,source:1},exec:function(u){var v=u.element.$.form;if(v)try{v.submit();}catch(w){if(v.submit.click)v.submit.click();}}},t='save';p.add(t,{init:function(u){var v=u.addCommand(t,s);v.modes={wysiwyg:!!u.element.$.form};u.ui.addButton('Save',{label:u.lang.save,command:t});}});})();(function(){var s='scaytcheck',t='';function u(z,A){var B=0,C;for(C in A){if(A[C]==z){B=1;break;}}return B;};var v=function(){var z=this,A=function(){var E=z.config,F={};F.srcNodeRef=z.document.getWindow().$.frameElement;F.assocApp='CKEDITOR.'+g.version+'@'+g.revision;F.customerid=E.scayt_customerid||'1:WvF0D4-UtPqN1-43nkD4-NKvUm2-daQqk3-LmNiI-z7Ysb4-mwry24-T8YrS3-Q2tpq2';
F.customDictionaryIds=E.scayt_customDictionaryIds||'';F.userDictionaryName=E.scayt_userDictionaryName||'';F.sLang=E.scayt_sLang||'en_US';F.onLoad=function(){if(!(i&&h.version<8))this.addStyle(this.selectorCss(),'padding-bottom: 2px !important;');if(z.focusManager.hasFocus&&!w.isControlRestored(z))this.focus();};F.onBeforeChange=function(){if(w.getScayt(z)&&!z.checkDirty())setTimeout(function(){z.resetDirty();},0);};var G=window.scayt_custom_params;if(typeof G=='object')for(var H in G)F[H]=G[H];if(w.getControlId(z))F.id=w.getControlId(z);var I=new window.scayt(F);I.afterMarkupRemove.push(function(P){new n(P,I.document).mergeSiblings();});var J=w.instances[z.name];if(J){I.sLang=J.sLang;I.option(J.option());I.paused=J.paused;}w.instances[z.name]=I;var K='scaytButton',L=window.scayt.uiTags,M=[];for(var N=0,O=4;N<O;N++)M.push(L[N]&&w.uiTabs[N]);w.uiTabs=M;try{I.setDisabled(w.isPaused(z)===false);}catch(P){}z.fire('showScaytState');};z.on('contentDom',A);z.on('contentDomUnload',function(){var E=g.document.getElementsByTag('script'),F=/^dojoIoScript(\d+)$/i,G=/^https?:\/\/svc\.spellchecker\.net\/spellcheck\/script\/ssrv\.cgi/i;for(var H=0;H<E.count();H++){var I=E.getItem(H),J=I.getId(),K=I.getAttribute('src');if(J&&K&&J.match(F)&&K.match(G))I.remove();}});z.on('beforeCommandExec',function(E){if((E.data.name=='source'||E.data.name=='newpage')&&z.mode=='wysiwyg'){var F=w.getScayt(z);if(F){w.setPaused(z,!F.disabled);w.setControlId(z,F.id);F.destroy(true);delete w.instances[z.name];}}else if(E.data.name=='source'&&z.mode=='source')w.markControlRestore(z);});z.on('afterCommandExec',function(E){if(!w.isScaytEnabled(z))return;if(z.mode=='wysiwyg'&&(E.data.name=='undo'||E.data.name=='redo'))window.setTimeout(function(){w.getScayt(z).refresh();},10);});z.on('destroy',function(E){var F=E.editor,G=w.getScayt(F);if(!G)return;delete w.instances[F.name];w.setControlId(F,G.id);G.destroy(true);});z.on('afterSetData',function(){if(w.isScaytEnabled(z))window.setTimeout(function(){var E=w.getScayt(z);E&&E.refresh();},10);});z.on('insertElement',function(){var E=w.getScayt(z);if(w.isScaytEnabled(z)){if(i)z.getSelection().unlock(true);window.setTimeout(function(){E.focus();E.refresh();},10);}},this,null,50);z.on('insertHtml',function(){var E=w.getScayt(z);if(w.isScaytEnabled(z)){if(i)z.getSelection().unlock(true);window.setTimeout(function(){E.focus();E.refresh();},10);}},this,null,50);z.on('scaytDialog',function(E){E.data.djConfig=window.djConfig;E.data.scayt_control=w.getScayt(z);E.data.tab=t;
E.data.scayt=window.scayt;});var B=z.dataProcessor,C=B&&B.htmlFilter;if(C)C.addRules({elements:{span:function(E){if(E.attributes.scayt_word&&E.attributes.scaytid){delete E.name;return E;}}}});var D=p.undo.Image.prototype;D.equals=k.override(D.equals,function(E){return function(F){var K=this;var G=K.contents,H=F.contents,I=w.getScayt(K.editor);if(I&&w.isScaytReady(K.editor)){K.contents=I.reset(G)||'';F.contents=I.reset(H)||'';}var J=E.apply(K,arguments);K.contents=G;F.contents=H;return J;};});if(z.document)A();};p.scayt={engineLoaded:false,instances:{},controlInfo:{},setControlInfo:function(z,A){if(z&&z.name&&typeof this.controlInfo[z.name]!='object')this.controlInfo[z.name]={};for(var B in A)this.controlInfo[z.name][B]=A[B];},isControlRestored:function(z){if(z&&z.name&&this.controlInfo[z.name])return this.controlInfo[z.name].restored;return false;},markControlRestore:function(z){this.setControlInfo(z,{restored:true});},setControlId:function(z,A){this.setControlInfo(z,{id:A});},getControlId:function(z){if(z&&z.name&&this.controlInfo[z.name]&&this.controlInfo[z.name].id)return this.controlInfo[z.name].id;return null;},setPaused:function(z,A){this.setControlInfo(z,{paused:A});},isPaused:function(z){if(z&&z.name&&this.controlInfo[z.name])return this.controlInfo[z.name].paused;return undefined;},getScayt:function(z){return this.instances[z.name];},isScaytReady:function(z){return this.engineLoaded===true&&'undefined'!==typeof window.scayt&&this.getScayt(z);},isScaytEnabled:function(z){var A=this.getScayt(z);return A?A.disabled===false:false;},loadEngine:function(z){if(h.gecko&&h.version<10900||h.opera)return z.fire('showScaytState');if(this.engineLoaded===true)return v.apply(z);else if(this.engineLoaded==-1)return g.on('scaytReady',function(){v.apply(z);});g.on('scaytReady',v,z);g.on('scaytReady',function(){this.engineLoaded=true;},this,null,0);this.engineLoaded=-1;var A=document.location.protocol;A=A.search(/https?:/)!=-1?A:'http:';var B='svc.spellchecker.net/scayt25/loader__base.js',C=z.config.scayt_srcUrl||A+'//'+B,D=w.parseUrl(C).path+'/';if(window.scayt==undefined){g._djScaytConfig={baseUrl:D,addOnLoad:[function(){g.fireOnce('scaytReady');}],isDebug:false};g.document.getHead().append(g.document.createElement('script',{attributes:{type:'text/javascript',async:'true',src:C}}));}else g.fireOnce('scaytReady');return null;},parseUrl:function(z){var A;if(z.match&&(A=z.match(/(.*)[\/\\](.*?\.\w+)$/)))return{path:A[1],file:A[2]};else return z;}};var w=p.scayt,x=function(z,A,B,C,D,E,F){z.addCommand(C,D);
z.addMenuItem(C,{label:B,command:C,group:E,order:F});},y={preserveState:true,editorFocus:false,canUndo:false,exec:function(z){if(w.isScaytReady(z)){var A=w.isScaytEnabled(z);this.setState(A?2:1);var B=w.getScayt(z);B.focus();B.setDisabled(A);}else if(!z.config.scayt_autoStartup&&w.engineLoaded>=0){this.setState(0);w.loadEngine(z);}}};p.add('scayt',{requires:['menubutton'],beforeInit:function(z){var A=z.config.scayt_contextMenuItemsOrder||'suggest|moresuggest|control',B='';A=A.split('|');if(A&&A.length)for(var C=0;C<A.length;C++)B+='scayt_'+A[C]+(A.length!=parseInt(C,10)+1?',':'');z.config.menu_groups=B+','+z.config.menu_groups;},init:function(z){var A={},B={},C=z.addCommand(s,y);g.dialog.add(s,g.getUrl(this.path+'dialogs/options.js'));var D=z.config.scayt_uiTabs||'1,1,1',E=[];D=D.split(',');for(var F=0,G=3;F<G;F++){var H=parseInt(D[F]||'1',10);E.push(H);}var I='scaytButton';z.addMenuGroup(I);var J={},K=z.lang.scayt;J.scaytToggle={label:K.enable,command:s,group:I};if(E[0]==1)J.scaytOptions={label:K.options,group:I,onClick:function(){t='options';z.openDialog(s);}};if(E[1]==1)J.scaytLangs={label:K.langs,group:I,onClick:function(){t='langs';z.openDialog(s);}};if(E[2]==1)J.scaytDict={label:K.dictionariesTab,group:I,onClick:function(){t='dictionaries';z.openDialog(s);}};J.scaytAbout={label:z.lang.scayt.about,group:I,onClick:function(){t='about';z.openDialog(s);}};E[3]=1;w.uiTabs=E;z.addMenuItems(J);z.ui.add('Scayt',5,{label:K.title,title:h.opera?K.opera_title:K.title,className:'cke_button_scayt',onRender:function(){C.on('state',function(){this.setState(C.state);},this);},onMenu:function(){var M=w.isScaytEnabled(z);z.getMenuItem('scaytToggle').label=K[M?'disable':'enable'];return{scaytToggle:2,scaytOptions:M&&w.uiTabs[0]?2:0,scaytLangs:M&&w.uiTabs[1]?2:0,scaytDict:M&&w.uiTabs[2]?2:0,scaytAbout:M&&w.uiTabs[3]?2:0};}});if(z.contextMenu&&z.addMenuItems)z.contextMenu.addListener(function(M,N){if(!w.isScaytEnabled(z)||N.getCommonAncestor().isReadOnly())return null;var O=w.getScayt(z),P=O.getScaytNode();if(!P)return null;var Q=O.getWord(P);if(!Q)return null;var R=O.getLang(),S={},T=window.scayt.getSuggestion(Q,R);if(!T||!T.length)return null;for(F in A){delete z._.menuItems[F];delete z._.commands[F];}for(F in B){delete z._.menuItems[F];delete z._.commands[F];}A={};B={};var U=z.config.scayt_moreSuggestions||'on',V=false,W=z.config.scayt_maxSuggestions;typeof W!='number'&&(W=5);!W&&(W=T.length);var X=z.config.scayt_contextCommands||'all';X=X.split('|');for(var Y=0,Z=T.length;
Y<Z;Y+=1){var aa='scayt_suggestion_'+T[Y].replace(' ','_'),ab=(function(af,ag){return{exec:function(){O.replace(af,ag);}};})(P,T[Y]);if(Y<W){x(z,'button_'+aa,T[Y],aa,ab,'scayt_suggest',Y+1);S[aa]=2;B[aa]=2;}else if(U=='on'){x(z,'button_'+aa,T[Y],aa,ab,'scayt_moresuggest',Y+1);A[aa]=2;V=true;}}if(V){z.addMenuItem('scayt_moresuggest',{label:K.moreSuggestions,group:'scayt_moresuggest',order:10,getItems:function(){return A;}});B.scayt_moresuggest=2;}if(u('all',X)||u('ignore',X)){var ac={exec:function(){O.ignore(P);}};x(z,'ignore',K.ignore,'scayt_ignore',ac,'scayt_control',1);B.scayt_ignore=2;}if(u('all',X)||u('ignoreall',X)){var ad={exec:function(){O.ignoreAll(P);}};x(z,'ignore_all',K.ignoreAll,'scayt_ignore_all',ad,'scayt_control',2);B.scayt_ignore_all=2;}if(u('all',X)||u('add',X)){var ae={exec:function(){window.scayt.addWordToUserDictionary(P);}};x(z,'add_word',K.addWord,'scayt_add_word',ae,'scayt_control',3);B.scayt_add_word=2;}if(O.fireOnContextMenu)O.fireOnContextMenu(z);return B;});var L=function(){z.removeListener('showScaytState',L);if(!h.opera)C.setState(w.isScaytEnabled(z)?1:2);else C.setState(0);};z.on('showScaytState',L);if(h.opera)z.on('instanceReady',function(){L();});if(z.config.scayt_autoStartup)z.on('instanceReady',function(){w.loadEngine(z);});},afterInit:function(z){var A,B=function(C){if(C.hasAttribute('scaytid'))return false;};if(z._.elementsPath&&(A=z._.elementsPath.filters))A.push(B);z.addRemoveFormatFilter&&z.addRemoveFormatFilter(B);}});})();p.add('smiley',{requires:['dialog'],init:function(s){s.config.smiley_path=s.config.smiley_path||this.path+'images/';s.addCommand('smiley',new g.dialogCommand('smiley'));s.ui.addButton('Smiley',{label:s.lang.smiley.toolbar,command:'smiley'});g.dialog.add('smiley',this.path+'dialogs/smiley.js');}});o.smiley_images=['regular_smile.gif','sad_smile.gif','wink_smile.gif','teeth_smile.gif','confused_smile.gif','tounge_smile.gif','embaressed_smile.gif','omg_smile.gif','whatchutalkingabout_smile.gif','angry_smile.gif','angel_smile.gif','shades_smile.gif','devil_smile.gif','cry_smile.gif','lightbulb.gif','thumbs_down.gif','thumbs_up.gif','heart.gif','broken_heart.gif','kiss.gif','envelope.gif'];o.smiley_descriptions=['smiley','sad','wink','laugh','frown','cheeky','blush','surprise','indecision','angry','angel','cool','devil','crying','enlightened','no','yes','heart','broken heart','kiss','mail'];(function(){var s='.%2 p,.%2 div,.%2 pre,.%2 address,.%2 blockquote,.%2 h1,.%2 h2,.%2 h3,.%2 h4,.%2 h5,.%2 h6{background-repeat: no-repeat;background-position: top %3;border: 1px dotted gray;padding-top: 8px;padding-%3: 8px;}.%2 p{%1p.png);}.%2 div{%1div.png);}.%2 pre{%1pre.png);}.%2 address{%1address.png);}.%2 blockquote{%1blockquote.png);}.%2 h1{%1h1.png);}.%2 h2{%1h2.png);}.%2 h3{%1h3.png);}.%2 h4{%1h4.png);}.%2 h5{%1h5.png);}.%2 h6{%1h6.png);}',t=/%1/g,u=/%2/g,v=/%3/g,w={preserveState:true,editorFocus:false,exec:function(x){this.toggleState();
this.refresh(x);},refresh:function(x){var y=this.state==1?'addClass':'removeClass';x.document.getBody()[y]('cke_show_blocks');}};p.add('showblocks',{requires:['wysiwygarea'],init:function(x){var y=x.addCommand('showblocks',w);y.canUndo=false;if(x.config.startupOutlineBlocks)y.setState(1);x.addCss(s.replace(t,'background-image: url('+g.getUrl(this.path)+'images/block_').replace(u,'cke_show_blocks ').replace(v,x.lang.dir=='rtl'?'right':'left'));x.ui.addButton('ShowBlocks',{label:x.lang.showBlocks,command:'showblocks'});x.on('mode',function(){if(y.state!=0)y.refresh(x);});x.on('contentDom',function(){if(y.state!=0)y.refresh(x);});}});})();(function(){var s='cke_show_border',t,u=(h.ie6Compat?['.%1 table.%2,','.%1 table.%2 td, .%1 table.%2 th,','{','border : #d3d3d3 1px dotted','}']:['.%1 table.%2,','.%1 table.%2 > tr > td, .%1 table.%2 > tr > th,','.%1 table.%2 > tbody > tr > td, .%1 table.%2 > tbody > tr > th,','.%1 table.%2 > thead > tr > td, .%1 table.%2 > thead > tr > th,','.%1 table.%2 > tfoot > tr > td, .%1 table.%2 > tfoot > tr > th','{','border : #d3d3d3 1px dotted','}']).join('');t=u.replace(/%2/g,s).replace(/%1/g,'cke_show_borders ');var v={preserveState:true,editorFocus:false,exec:function(w){this.toggleState();this.refresh(w);},refresh:function(w){var x=this.state==1?'addClass':'removeClass';w.document.getBody()[x]('cke_show_borders');}};p.add('showborders',{requires:['wysiwygarea'],modes:{wysiwyg:1},init:function(w){var x=w.addCommand('showborders',v);x.canUndo=false;if(w.config.startupShowBorders!==false)x.setState(1);w.addCss(t);w.on('mode',function(){if(x.state!=0)x.refresh(w);},null,null,100);w.on('contentDom',function(){if(x.state!=0)x.refresh(w);});w.on('removeFormatCleanup',function(y){var z=y.data;if(w.getCommand('showborders').state==1&&z.is('table')&&(!z.hasAttribute('border')||parseInt(z.getAttribute('border'),10)<=0))z.addClass(s);});},afterInit:function(w){var x=w.dataProcessor,y=x&&x.dataFilter,z=x&&x.htmlFilter;if(y)y.addRules({elements:{table:function(A){var B=A.attributes,C=B['class'],D=parseInt(B.border,10);if(!D||D<=0)B['class']=(C||'')+' '+s;}}});if(z)z.addRules({elements:{table:function(A){var B=A.attributes,C=B['class'];C&&(B['class']=C.replace(s,'').replace(/\s{2}/,' ').replace(/^\s+|\s+$/,''));}}});}});g.on('dialogDefinition',function(w){var x=w.data.name;if(x=='table'||x=='tableProperties'){var y=w.data.definition,z=y.getContents('info'),A=z.get('txtBorder'),B=A.commit;A.commit=k.override(B,function(E){return function(F,G){E.apply(this,arguments);
var H=parseInt(this.getValue(),10);G[!H||H<=0?'addClass':'removeClass'](s);};});var C=y.getContents('advanced'),D=C&&C.get('advCSSClasses');if(D){D.setup=k.override(D.setup,function(E){return function(){E.apply(this,arguments);this.setValue(this.getValue().replace(/cke_show_border/,''));};});D.commit=k.override(D.commit,function(E){return function(F,G){E.apply(this,arguments);if(!parseInt(G.getAttribute('border'),10))G.addClass('cke_show_border');};});}}});})();p.add('sourcearea',{requires:['editingblock'],init:function(s){var t=p.sourcearea,u=g.document.getWindow();s.on('editingBlockReady',function(){var v,w;s.addMode('source',{load:function(x,y){if(i&&h.version<8)x.setStyle('position','relative');s.textarea=v=new n('textarea');v.setAttributes({dir:'ltr',tabIndex:h.webkit?-1:s.tabIndex,role:'textbox','aria-label':s.lang.editorTitle.replace('%1',s.name)});v.addClass('cke_source');v.addClass('cke_enable_context_menu');var z={width:h.ie7Compat?'99%':'100%',height:'100%',resize:'none',outline:'none','text-align':'left'};if(i){w=function(){v.hide();v.setStyle('height',x.$.clientHeight+'px');v.setStyle('width',x.$.clientWidth+'px');v.show();};s.on('resize',w);u.on('resize',w);setTimeout(w,0);}if(document.addEventListener)v.on('mousedown',function(B){B.data.stopPropagation();});x.setHtml('');x.append(v);v.setStyles(z);s.fire('ariaWidget',v);v.on('blur',function(){s.focusManager.blur();});v.on('focus',function(){s.focusManager.focus();});s.mayBeDirty=true;this.loadData(y);var A=s.keystrokeHandler;if(A)A.attach(v);setTimeout(function(){s.mode='source';s.fire('mode');},h.gecko||h.webkit?100:0);},loadData:function(x){v.setValue(x);s.fire('dataReady');},getData:function(){return v.getValue();},getSnapshotData:function(){return v.getValue();},unload:function(x){v.clearCustomData();s.textarea=v=null;if(w){s.removeListener('resize',w);u.removeListener('resize',w);}if(i&&h.version<8)x.removeStyle('position');},focus:function(){v.focus();}});});s.addCommand('source',t.commands.source);if(s.ui.addButton)s.ui.addButton('Source',{label:s.lang.source,command:'source'});s.on('mode',function(){s.getCommand('source').setState(s.mode=='source'?1:2);});}});p.sourcearea={commands:{source:{modes:{wysiwyg:1,source:1},editorFocus:false,exec:function(s){if(s.mode=='wysiwyg')s.fire('saveSnapshot');s.getCommand('source').setState(0);s.setMode(s.mode=='source'?'wysiwyg':'source');},canUndo:false}}};(function(){p.add('stylescombo',{requires:['richcombo','styles'],init:function(t){var u=t.config,v=t.lang.stylesCombo,w={},x=[];
function y(z){t.getStylesSet(function(A){if(!x.length){var B,C;for(var D=0,E=A.length;D<E;D++){var F=A[D];C=F.name;B=w[C]=new g.style(F);B._name=C;B._.enterMode=u.enterMode;x.push(B);}x.sort(s);}z&&z();});};t.ui.addRichCombo('Styles',{label:v.label,title:v.panelTitle,className:'cke_styles',panel:{css:t.skin.editor.css.concat(u.contentsCss),multiSelect:true,attributes:{'aria-label':v.panelTitle}},init:function(){var z=this;y(function(){var A,B,C;for(var D=0,E=x.length;D<E;D++){A=x[D];B=A._name;var F=A.type;if(F!=C){z.startGroup(v['panelTitle'+String(F)]);C=F;}z.add(B,A.type==3?B:A.buildPreview(),B);}z.commit();z.onOpen();});},onClick:function(z){t.focus();t.fire('saveSnapshot');var A=w[z],B=t.getSelection(),C=new j.elementPath(B.getStartElement());if(A.type==2&&A.checkActive(C))A.remove(t.document);else if(A.type==3&&A.checkActive(C))A.remove(t.document);else A.apply(t.document);t.fire('saveSnapshot');},onRender:function(){t.on('selectionChange',function(z){var A=this.getValue(),B=z.data.path,C=B.elements;for(var D=0,E=C.length,F;D<E;D++){F=C[D];for(var G in w){if(w[G].checkElementRemovable(F,true)){if(G!=A)this.setValue(G);return;}}}this.setValue('');},this);},onOpen:function(){var G=this;if(i||h.webkit)t.focus();var z=t.getSelection(),A=z.getSelectedElement(),B=new j.elementPath(A||z.getStartElement()),C=[0,0,0,0];G.showAll();G.unmarkAll();for(var D in w){var E=w[D],F=E.type;if(E.checkActive(B))G.mark(D);else if(F==3&&!E.checkApplicable(B)){G.hideItem(D);C[F]--;}C[F]++;}if(!C[1])G.hideGroup(v['panelTitle'+String(1)]);if(!C[2])G.hideGroup(v['panelTitle'+String(2)]);if(!C[3])G.hideGroup(v['panelTitle'+String(3)]);}});t.on('instanceReady',function(){y();});}});function s(t,u){var v=t.type,w=u.type;return v==w?0:v==3?-1:w==3?1:w==1?1:-1;};})();p.add('table',{init:function(s){var t=p.table,u=s.lang.table;s.addCommand('table',new g.dialogCommand('table'));s.addCommand('tableProperties',new g.dialogCommand('tableProperties'));s.ui.addButton('Table',{label:u.toolbar,command:'table'});g.dialog.add('table',this.path+'dialogs/table.js');g.dialog.add('tableProperties',this.path+'dialogs/table.js');if(s.addMenuItems)s.addMenuItems({table:{label:u.menu,command:'tableProperties',group:'table',order:5},tabledelete:{label:u.deleteTable,command:'tableDelete',group:'table',order:1}});s.on('doubleclick',function(v){var w=v.data.element;if(w.is('table'))v.data.dialog='tableProperties';});if(s.contextMenu)s.contextMenu.addListener(function(v,w){if(!v||v.isReadOnly())return null;
var x=v.hasAscendant('table',1);if(x)return{tabledelete:2,table:2};return null;});}});(function(){function s(M,N){if(i)M.removeAttribute(N);else delete M[N];};var t=/^(?:td|th)$/;function u(M){var N=M.createBookmarks(),O=M.getRanges(),P=[],Q={};function R(Z){if(P.length>0)return;if(Z.type==1&&t.test(Z.getName())&&!Z.getCustomData('selected_cell')){n.setMarker(Q,Z,'selected_cell',true);P.push(Z);}};for(var S=0;S<O.length;S++){var T=O[S];if(T.collapsed){var U=T.getCommonAncestor(),V=U.getAscendant('td',true)||U.getAscendant('th',true);if(V)P.push(V);}else{var W=new j.walker(T),X;W.guard=R;while(X=W.next()){var Y=X.getParent();if(Y&&t.test(Y.getName())&&!Y.getCustomData('selected_cell')){n.setMarker(Q,Y,'selected_cell',true);P.push(Y);}}}}n.clearAllMarkers(Q);M.selectBookmarks(N);return P;};function v(M){var N=0,O=M.length-1,P={},Q,R,S;while(Q=M[N++])n.setMarker(P,Q,'delete_cell',true);N=0;while(Q=M[N++]){if((R=Q.getPrevious())&&!R.getCustomData('delete_cell')||(R=Q.getNext())&&!R.getCustomData('delete_cell')){n.clearAllMarkers(P);return R;}}n.clearAllMarkers(P);S=M[0].getParent();if(S=S.getPrevious())return S.getLast();S=M[O].getParent();if(S=S.getNext())return S.getChild(0);return null;};function w(M){var N=M.cells;for(var O=0;O<N.length;O++){N[O].innerHTML='';if(!i)new n(N[O]).appendBogus();}};function x(M,N){var O=M.getStartElement().getAscendant('tr');if(!O)return;var P=O.clone(1);N?P.insertBefore(O):P.insertAfter(O);w(P.$);};function y(M){if(M instanceof j.selection){var N=u(M),O=N.length,P=[],Q,R,S;for(var T=0;T<O;T++){var U=N[T].getParent(),V=U.$.rowIndex;!T&&(R=V-1);P[V]=U;T==O-1&&(S=V+1);}var W=U.getAscendant('table'),X=W.$.rows,Y=X.length;Q=new n(S<Y&&W.$.rows[S]||R>0&&W.$.rows[R]||W.$.parentNode);for(T=P.length;T>=0;T--){if(P[T])y(P[T]);}return Q;}else if(M instanceof n){W=M.getAscendant('table');if(W.$.rows.length==1)W.remove();else M.remove();}return 0;};function z(M,N){var O=M.getStartElement(),P=O.getAscendant('td',1)||O.getAscendant('th',1);if(!P)return;var Q=P.getAscendant('table'),R=P.$.cellIndex;for(var S=0;S<Q.$.rows.length;S++){var T=Q.$.rows[S];if(T.cells.length<R+1)continue;P=new n(T.cells[R]).clone(0);if(!i)P.appendBogus();var U=new n(T.cells[R]);if(N)P.insertBefore(U);else P.insertAfter(U);}};function A(M){var N=[],O=M[0]&&M[0].getAscendant('table'),P,Q,R,S;for(P=0,Q=M.length;P<Q;P++)N.push(M[P].$.cellIndex);N.sort();for(P=1,Q=N.length;P<Q;P++){if(N[P]-N[P-1]>1){R=N[P-1]+1;break;}}if(!R)R=N[0]>0?N[0]-1:N[N.length-1]+1;var T=O.$.rows;for(P=0,Q=T.length;
P<Q;P++){S=T[P].cells[R];if(S)break;}return S?new n(S):O.getPrevious();};function B(M){if(M instanceof j.selection){var N=u(M),O=A(N);for(var P=N.length-1;P>=0;P--){if(N[P])B(N[P]);}return O;}else if(M instanceof n){var Q=M.getAscendant('table');if(!Q)return null;var R=M.$.cellIndex;for(P=Q.$.rows.length-1;P>=0;P--){var S=new n(Q.$.rows[P]);if(!R&&S.$.cells.length==1){y(S);continue;}if(S.$.cells[R])S.$.removeChild(S.$.cells[R]);}}return null;};function C(M,N){var O=M.getStartElement(),P=O.getAscendant('td',1)||O.getAscendant('th',1);if(!P)return;var Q=P.clone();if(!i)Q.appendBogus();if(N)Q.insertBefore(P);else Q.insertAfter(P);};function D(M){if(M instanceof j.selection){var N=u(M),O=N[0]&&N[0].getAscendant('table'),P=v(N);for(var Q=N.length-1;Q>=0;Q--)D(N[Q]);if(P)F(P,true);else if(O)O.remove();}else if(M instanceof n){var R=M.getParent();if(R.getChildCount()==1)R.remove();else M.remove();}};function E(M){var N=M.getBogus();N&&N.remove();M.trim();};function F(M,N){var O=new j.range(M.getDocument());if(!O['moveToElementEdit'+(N?'End':'Start')](M)){O.selectNodeContents(M);O.collapse(N?false:true);}O.select(true);};function G(M,N,O){var P=M[N];if(typeof O=='undefined')return P;for(var Q=0;P&&Q<P.length;Q++){if(O.is&&P[Q]==O.$)return Q;else if(Q==O)return new n(P[Q]);}return O.is?-1:null;};function H(M,N,O){var P=[];for(var Q=0;Q<M.length;Q++){var R=M[Q];if(typeof O=='undefined')P.push(R[N]);else if(O.is&&R[N]==O.$)return Q;else if(Q==O)return new n(R[N]);}return typeof O=='undefined'?P:O.is?-1:null;};function I(M,N,O){var P=u(M),Q;if((N?P.length!=1:P.length<2)||(Q=M.getCommonAncestor())&&Q.type==1&&Q.is('table'))return false;var R,S=P[0],T=S.getAscendant('table'),U=k.buildTableMap(T),V=U.length,W=U[0].length,X=S.getParent().$.rowIndex,Y=G(U,X,S);if(N){var Z;try{Z=U[N=='up'?X-1:N=='down'?X+1:X][N=='left'?Y-1:N=='right'?Y+1:Y];}catch(ar){return false;}if(!Z||S.$==Z)return false;P[N=='up'||N=='left'?'unshift':'push'](new n(Z));}var aa=S.getDocument(),ab=X,ac=0,ad=0,ae=!O&&new j.documentFragment(aa),af=0;for(var ag=0;ag<P.length;ag++){R=P[ag];var ah=R.getParent(),ai=R.getFirst(),aj=R.$.colSpan,ak=R.$.rowSpan,al=ah.$.rowIndex,am=G(U,al,R);af+=aj*ak;ad=Math.max(ad,am-Y+aj);ac=Math.max(ac,al-X+ak);if(!O){if(E(R),R.getChildren().count()){if(al!=ab&&ai&&!(ai.isBlockBoundary&&ai.isBlockBoundary({br:1}))){var an=ae.getLast(j.walker.whitespaces(true));if(an&&!(an.is&&an.is('br')))ae.append(new n('br'));}R.moveChildren(ae);}ag?R.remove():R.setHtml('');}ab=al;}if(!O){ae.moveChildren(S);
if(!i)S.appendBogus();if(ad>=W)S.removeAttribute('rowSpan');else S.$.rowSpan=ac;if(ac>=V)S.removeAttribute('colSpan');else S.$.colSpan=ad;var ao=new j.nodeList(T.$.rows),ap=ao.count();for(ag=ap-1;ag>=0;ag--){var aq=ao.getItem(ag);if(!aq.$.cells.length){aq.remove();ap++;continue;}}return S;}else return ac*ad==af;};function J(M,N){var O=u(M);if(O.length>1)return false;else if(N)return true;var P=O[0],Q=P.getParent(),R=Q.getAscendant('table'),S=k.buildTableMap(R),T=Q.$.rowIndex,U=G(S,T,P),V=P.$.rowSpan,W,X,Y,Z;if(V>1){X=Math.ceil(V/2);Y=Math.floor(V/2);Z=T+X;var aa=new n(R.$.rows[Z]),ab=G(S,Z),ac;W=P.clone();for(var ad=0;ad<ab.length;ad++){ac=ab[ad];if(ac.parentNode==aa.$&&ad>U){W.insertBefore(new n(ac));break;}else ac=null;}if(!ac)aa.append(W,true);}else{Y=X=1;aa=Q.clone();aa.insertAfter(Q);aa.append(W=P.clone());var ae=G(S,T);for(var af=0;af<ae.length;af++)ae[af].rowSpan++;}if(!i)W.appendBogus();P.$.rowSpan=X;W.$.rowSpan=Y;if(X==1)P.removeAttribute('rowSpan');if(Y==1)W.removeAttribute('rowSpan');return W;};function K(M,N){var O=u(M);if(O.length>1)return false;else if(N)return true;var P=O[0],Q=P.getParent(),R=Q.getAscendant('table'),S=k.buildTableMap(R),T=Q.$.rowIndex,U=G(S,T,P),V=P.$.colSpan,W,X,Y;if(V>1){X=Math.ceil(V/2);Y=Math.floor(V/2);}else{Y=X=1;var Z=H(S,U);for(var aa=0;aa<Z.length;aa++)Z[aa].colSpan++;}W=P.clone();W.insertAfter(P);if(!i)W.appendBogus();P.$.colSpan=X;W.$.colSpan=Y;if(X==1)P.removeAttribute('colSpan');if(Y==1)W.removeAttribute('colSpan');return W;};var L={thead:1,tbody:1,tfoot:1,td:1,tr:1,th:1};p.tabletools={init:function(M){var N=M.lang.table;M.addCommand('cellProperties',new g.dialogCommand('cellProperties'));g.dialog.add('cellProperties',this.path+'dialogs/tableCell.js');M.addCommand('tableDelete',{exec:function(O){var P=O.getSelection(),Q=P&&P.getStartElement(),R=Q&&Q.getAscendant('table',1);if(!R)return;P.selectElement(R);var S=P.getRanges()[0];S.collapse();P.selectRanges([S]);var T=R.getParent();if(T.getChildCount()==1&&!T.is('body','td','th'))T.remove();else R.remove();}});M.addCommand('rowDelete',{exec:function(O){var P=O.getSelection();F(y(P));}});M.addCommand('rowInsertBefore',{exec:function(O){var P=O.getSelection();x(P,true);}});M.addCommand('rowInsertAfter',{exec:function(O){var P=O.getSelection();x(P);}});M.addCommand('columnDelete',{exec:function(O){var P=O.getSelection(),Q=B(P);Q&&F(Q,true);}});M.addCommand('columnInsertBefore',{exec:function(O){var P=O.getSelection();z(P,true);}});M.addCommand('columnInsertAfter',{exec:function(O){var P=O.getSelection();
z(P);}});M.addCommand('cellDelete',{exec:function(O){var P=O.getSelection();D(P);}});M.addCommand('cellMerge',{exec:function(O){F(I(O.getSelection()),true);}});M.addCommand('cellMergeRight',{exec:function(O){F(I(O.getSelection(),'right'),true);}});M.addCommand('cellMergeDown',{exec:function(O){F(I(O.getSelection(),'down'),true);}});M.addCommand('cellVerticalSplit',{exec:function(O){F(J(O.getSelection()));}});M.addCommand('cellHorizontalSplit',{exec:function(O){F(K(O.getSelection()));}});M.addCommand('cellInsertBefore',{exec:function(O){var P=O.getSelection();C(P,true);}});M.addCommand('cellInsertAfter',{exec:function(O){var P=O.getSelection();C(P);}});if(M.addMenuItems)M.addMenuItems({tablecell:{label:N.cell.menu,group:'tablecell',order:1,getItems:function(){var O=M.getSelection(),P=u(O);return{tablecell_insertBefore:2,tablecell_insertAfter:2,tablecell_delete:2,tablecell_merge:I(O,null,true)?2:0,tablecell_merge_right:I(O,'right',true)?2:0,tablecell_merge_down:I(O,'down',true)?2:0,tablecell_split_vertical:J(O,true)?2:0,tablecell_split_horizontal:K(O,true)?2:0,tablecell_properties:P.length>0?2:0};}},tablecell_insertBefore:{label:N.cell.insertBefore,group:'tablecell',command:'cellInsertBefore',order:5},tablecell_insertAfter:{label:N.cell.insertAfter,group:'tablecell',command:'cellInsertAfter',order:10},tablecell_delete:{label:N.cell.deleteCell,group:'tablecell',command:'cellDelete',order:15},tablecell_merge:{label:N.cell.merge,group:'tablecell',command:'cellMerge',order:16},tablecell_merge_right:{label:N.cell.mergeRight,group:'tablecell',command:'cellMergeRight',order:17},tablecell_merge_down:{label:N.cell.mergeDown,group:'tablecell',command:'cellMergeDown',order:18},tablecell_split_horizontal:{label:N.cell.splitHorizontal,group:'tablecell',command:'cellHorizontalSplit',order:19},tablecell_split_vertical:{label:N.cell.splitVertical,group:'tablecell',command:'cellVerticalSplit',order:20},tablecell_properties:{label:N.cell.title,group:'tablecellproperties',command:'cellProperties',order:21},tablerow:{label:N.row.menu,group:'tablerow',order:1,getItems:function(){return{tablerow_insertBefore:2,tablerow_insertAfter:2,tablerow_delete:2};}},tablerow_insertBefore:{label:N.row.insertBefore,group:'tablerow',command:'rowInsertBefore',order:5},tablerow_insertAfter:{label:N.row.insertAfter,group:'tablerow',command:'rowInsertAfter',order:10},tablerow_delete:{label:N.row.deleteRow,group:'tablerow',command:'rowDelete',order:15},tablecolumn:{label:N.column.menu,group:'tablecolumn',order:1,getItems:function(){return{tablecolumn_insertBefore:2,tablecolumn_insertAfter:2,tablecolumn_delete:2};
}},tablecolumn_insertBefore:{label:N.column.insertBefore,group:'tablecolumn',command:'columnInsertBefore',order:5},tablecolumn_insertAfter:{label:N.column.insertAfter,group:'tablecolumn',command:'columnInsertAfter',order:10},tablecolumn_delete:{label:N.column.deleteColumn,group:'tablecolumn',command:'columnDelete',order:15}});if(M.contextMenu)M.contextMenu.addListener(function(O,P){if(!O||O.isReadOnly())return null;while(O){if(O.getName() in L)return{tablecell:2,tablerow:2,tablecolumn:2};O=O.getParent();}return null;});},getSelectedCells:u};p.add('tabletools',p.tabletools);})();k.buildTableMap=function(s){var t=s.$.rows,u=-1,v=[];for(var w=0;w<t.length;w++){u++;!v[u]&&(v[u]=[]);var x=-1;for(var y=0;y<t[w].cells.length;y++){var z=t[w].cells[y];x++;while(v[u][x])x++;var A=isNaN(z.colSpan)?1:z.colSpan,B=isNaN(z.rowSpan)?1:z.rowSpan;for(var C=0;C<B;C++){if(!v[u+C])v[u+C]=[];for(var D=0;D<A;D++)v[u+C][x+D]=t[w].cells[y];}x+=A-1;}}return v;};p.add('specialchar',{init:function(s){var t='specialchar';g.dialog.add(t,this.path+'dialogs/specialchar.js');s.addCommand(t,new g.dialogCommand(t));s.ui.addButton('SpecialChar',{label:s.lang.specialChar.toolbar,command:t});}});(function(){var s={editorFocus:false,modes:{wysiwyg:1,source:1}},t={exec:function(w){w.container.focusNext(true,w.tabIndex);}},u={exec:function(w){w.container.focusPrevious(true,w.tabIndex);}};function v(w){return{editorFocus:false,canUndo:false,modes:{wysiwyg:1},exec:function(x){if(x.focusManager.hasFocus){var y=x.getSelection(),z=y.getCommonAncestor(),A;if(A=z.getAscendant('td',true)||z.getAscendant('th',true)){var B=new j.range(x.document),C=k.tryThese(function(){var J=A.getParent(),K=J.$.cells[A.$.cellIndex+(w?-1:1)];K.parentNode.parentNode;return K;},function(){var J=A.getParent(),K=J.getAscendant('table'),L=K.$.rows[J.$.rowIndex+(w?-1:1)];return L.cells[w?L.cells.length-1:0];});if(!(C||w)){var D=A.getAscendant('table').$,E=A.getParent().$.cells,F=new n(D.insertRow(-1),x.document);for(var G=0,H=E.length;G<H;G++){var I=F.append(new n(E[G],x.document).clone(false,false));!i&&I.appendBogus();}B.moveToElementEditStart(F);}else if(C){C=new n(C);B.moveToElementEditStart(C);if(!(B.checkStartOfBlock()&&B.checkEndOfBlock()))B.selectNodeContents(C);}else return true;B.select(true);return true;}}return false;}};};p.add('tab',{requires:['keystrokes'],init:function(w){var x=w.config.enableTabKeyTools!==false,y=w.config.tabSpaces||0,z='';while(y--)z+='\xa0';if(z)w.on('key',function(A){if(A.data.keyCode==9){w.insertHtml(z);
A.cancel();}});if(x)w.on('key',function(A){if(A.data.keyCode==9&&w.execCommand('selectNextCell')||A.data.keyCode==2000+9&&w.execCommand('selectPreviousCell'))A.cancel();});if(h.webkit||h.gecko)w.on('key',function(A){var B=A.data.keyCode;if(B==9&&!z){A.cancel();w.execCommand('blur');}if(B==2000+9){w.execCommand('blurBack');A.cancel();}});w.addCommand('blur',k.extend(t,s));w.addCommand('blurBack',k.extend(u,s));w.addCommand('selectNextCell',v());w.addCommand('selectPreviousCell',v(true));}});})();n.prototype.focusNext=function(s,t){var C=this;var u=C.$,v=t===undefined?C.getTabIndex():t,w,x,y,z,A,B;if(v<=0){A=C.getNextSourceNode(s,1);while(A){if(A.isVisible()&&A.getTabIndex()===0){y=A;break;}A=A.getNextSourceNode(false,1);}}else{A=C.getDocument().getBody().getFirst();while(A=A.getNextSourceNode(false,1)){if(!w)if(!x&&A.equals(C)){x=true;if(s){if(!(A=A.getNextSourceNode(true,1)))break;w=1;}}else if(x&&!C.contains(A))w=1;if(!A.isVisible()||(B=A.getTabIndex())<0)continue;if(w&&B==v){y=A;break;}if(B>v&&(!y||!z||B<z)){y=A;z=B;}else if(!y&&B===0){y=A;z=B;}}}if(y)y.focus();};n.prototype.focusPrevious=function(s,t){var C=this;var u=C.$,v=t===undefined?C.getTabIndex():t,w,x,y,z=0,A,B=C.getDocument().getBody().getLast();while(B=B.getPreviousSourceNode(false,1)){if(!w)if(!x&&B.equals(C)){x=true;if(s){if(!(B=B.getPreviousSourceNode(true,1)))break;w=1;}}else if(x&&!C.contains(B))w=1;if(!B.isVisible()||(A=B.getTabIndex())<0)continue;if(v<=0){if(w&&A===0){y=B;break;}if(A>z){y=B;z=A;}}else{if(w&&A==v){y=B;break;}if(A<v&&(!y||A>z)){y=B;z=A;}}}if(y)y.focus();};(function(){p.add('templates',{requires:['dialog'],init:function(u){g.dialog.add('templates',g.getUrl(this.path+'dialogs/templates.js'));u.addCommand('templates',new g.dialogCommand('templates'));u.ui.addButton('Templates',{label:u.lang.templates.button,command:'templates'});}});var s={},t={};g.addTemplates=function(u,v){s[u]=v;};g.getTemplates=function(u){return s[u];};g.loadTemplates=function(u,v){var w=[];for(var x=0,y=u.length;x<y;x++){if(!t[u[x]]){w.push(u[x]);t[u[x]]=1;}}if(w.length)g.scriptLoader.load(w,v);else setTimeout(v,0);};})();o.templates_files=[g.getUrl('plugins/templates/templates/default.js')];o.templates_replaceContent=true;(function(){var s=function(){this.toolbars=[];this.focusCommandExecuted=false;};s.prototype.focus=function(){for(var u=0,v;v=this.toolbars[u++];)for(var w=0,x;x=v.items[w++];){if(x.focus){x.focus();return;}}};var t={toolbarFocus:{modes:{wysiwyg:1,source:1},exec:function(u){if(u.toolbox){u.toolbox.focusCommandExecuted=true;
if(i)setTimeout(function(){u.toolbox.focus();},100);else u.toolbox.focus();}}}};p.add('toolbar',{init:function(u){var v=function(w,x){var y,z,A,B=u.lang.dir=='rtl';switch(x){case B?37:39:case 9:do{y=w.next;if(!y){z=w.toolbar.next;A=z&&z.items.length;while(A===0){z=z.next;A=z&&z.items.length;}if(z)y=z.items[0];}w=y;}while(w&&!w.focus)if(w)w.focus();else u.toolbox.focus();return false;case B?39:37:case 2000+9:do{y=w.previous;if(!y){z=w.toolbar.previous;A=z&&z.items.length;while(A===0){z=z.previous;A=z&&z.items.length;}if(z)y=z.items[A-1];}w=y;}while(w&&!w.focus)if(w)w.focus();else{var C=u.toolbox.toolbars[u.toolbox.toolbars.length-1].items;C[C.length-1].focus();}return false;case 27:u.focus();return false;case 13:case 32:w.execute();return false;}return true;};u.on('themeSpace',function(w){if(w.data.space==u.config.toolbarLocation){u.toolbox=new s();var x=k.getNextId(),y=['<div class="cke_toolbox" role="toolbar" aria-labelledby="',x,'"'],z=u.config.toolbarStartupExpanded!==false,A;y.push(z?'>':' style="display:none">');y.push('<span id="',x,'" class="cke_voice_label">',u.lang.toolbar,'</span>');var B=u.toolbox.toolbars,C=u.config.toolbar instanceof Array?u.config.toolbar:u.config['toolbar_'+u.config.toolbar];for(var D=0;D<C.length;D++){var E=C[D];if(!E)continue;var F=k.getNextId(),G={id:F,items:[]};if(A){y.push('</div>');A=0;}if(E==='/'){y.push('<div class="cke_break"></div>');continue;}y.push('<span id="',F,'" class="cke_toolbar" role="presentation"><span class="cke_toolbar_start"></span>');var H=B.push(G)-1;if(H>0){G.previous=B[H-1];G.previous.next=G;}for(var I=0;I<E.length;I++){var J,K=E[I];if(K=='-')J=q.separator;else J=u.ui.create(K);if(J){if(J.canGroup){if(!A){y.push('<span class="cke_toolgroup" role="presentation">');A=1;}}else if(A){y.push('</span>');A=0;}var L=J.render(u,y);H=G.items.push(L)-1;if(H>0){L.previous=G.items[H-1];L.previous.next=L;}L.toolbar=G;L.onkey=v;L.onfocus=function(){if(!u.toolbox.focusCommandExecuted)u.focus();};}}if(A){y.push('</span>');A=0;}y.push('<span class="cke_toolbar_end"></span></span>');}y.push('</div>');if(u.config.toolbarCanCollapse){var M=k.addFunction(function(){u.execCommand('toolbarCollapse');});u.on('destroy',function(){k.removeFunction(M);});var N=k.getNextId();u.addCommand('toolbarCollapse',{exec:function(O){var P=g.document.getById(N),Q=P.getPrevious(),R=O.getThemeSpace('contents'),S=Q.getParent(),T=parseInt(R.$.style.height,10),U=S.$.offsetHeight,V=!Q.isVisible();if(!V){Q.hide();P.addClass('cke_toolbox_collapser_min');
P.setAttribute('title',O.lang.toolbarExpand);}else{Q.show();P.removeClass('cke_toolbox_collapser_min');P.setAttribute('title',O.lang.toolbarCollapse);}P.getFirst().setText(V?'▲':'◀');var W=S.$.offsetHeight-U;R.setStyle('height',T-W+'px');O.fire('resize');},modes:{wysiwyg:1,source:1}});y.push('<a title="'+(z?u.lang.toolbarCollapse:u.lang.toolbarExpand)+'" id="'+N+'" tabIndex="-1" class="cke_toolbox_collapser');if(!z)y.push(' cke_toolbox_collapser_min');y.push('" onclick="CKEDITOR.tools.callFunction('+M+')">','<span>&#9650;</span>','</a>');}w.data.html+=y.join('');}});u.addCommand('toolbarFocus',t.toolbarFocus);}});})();q.separator={render:function(s,t){t.push('<span class="cke_separator" role="separator"></span>');return{};}};o.toolbarLocation='top';o.toolbar_Basic=[['Bold','Italic','-','NumberedList','BulletedList','-','Link','Unlink','-','About']];o.toolbar_Full=[['Source','-','Save','NewPage','Preview','-','Templates'],['Cut','Copy','Paste','PasteText','PasteFromWord','-','Print','SpellChecker','Scayt'],['Undo','Redo','-','Find','Replace','-','SelectAll','RemoveFormat'],['Form','Checkbox','Radio','TextField','Textarea','Select','Button','ImageButton','HiddenField'],'/',['Bold','Italic','Underline','Strike','-','Subscript','Superscript'],['NumberedList','BulletedList','-','Outdent','Indent','Blockquote','CreateDiv'],['JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock'],['BidiLtr','BidiRtl'],['Link','Unlink','Anchor'],['Image','Flash','Table','HorizontalRule','Smiley','SpecialChar','PageBreak'],'/',['Styles','Format','Font','FontSize'],['TextColor','BGColor'],['Maximize','ShowBlocks','-','About']];o.toolbar='Full';o.toolbarCanCollapse=true;(function(){p.add('undo',{requires:['selection','wysiwygarea'],init:function(y){var z=new u(y),A=y.addCommand('undo',{exec:function(){if(z.undo()){y.selectionChange();this.fire('afterUndo');}},state:0,canUndo:false}),B=y.addCommand('redo',{exec:function(){if(z.redo()){y.selectionChange();this.fire('afterRedo');}},state:0,canUndo:false});z.onChange=function(){A.setState(z.undoable()?2:0);B.setState(z.redoable()?2:0);};function C(D){if(z.enabled&&D.data.command.canUndo!==false)z.save();};y.on('beforeCommandExec',C);y.on('afterCommandExec',C);y.on('saveSnapshot',function(){z.save();});y.on('contentDom',function(){y.document.on('keydown',function(D){if(!D.data.$.ctrlKey&&!D.data.$.metaKey)z.type(D);});});y.on('beforeModeUnload',function(){y.mode=='wysiwyg'&&z.save(true);});y.on('mode',function(){z.enabled=y.mode=='wysiwyg';
z.onChange();});y.ui.addButton('Undo',{label:y.lang.undo,command:'undo'});y.ui.addButton('Redo',{label:y.lang.redo,command:'redo'});y.resetUndo=function(){z.reset();y.fire('saveSnapshot');};y.on('updateSnapshot',function(){if(z.currentImage&&new s(y).equals(z.currentImage))setTimeout(function(){z.update();},0);});}});p.undo={};var s=p.undo.Image=function(y){this.editor=y;var z=y.getSnapshot(),A=z&&y.getSelection();i&&z&&(z=z.replace(/\s+_cke_expando=".*?"/g,''));this.contents=z;this.bookmarks=A&&A.createBookmarks2(true);},t=/\b(?:href|src|name)="[^"]*?"/gi;s.prototype={equals:function(y,z){var A=this.contents,B=y.contents;if(i&&(h.ie7Compat||h.ie6Compat)){A=A.replace(t,'');B=B.replace(t,'');}if(A!=B)return false;if(z)return true;var C=this.bookmarks,D=y.bookmarks;if(C||D){if(!C||!D||C.length!=D.length)return false;for(var E=0;E<C.length;E++){var F=C[E],G=D[E];if(F.startOffset!=G.startOffset||F.endOffset!=G.endOffset||!k.arrayCompare(F.start,G.start)||!k.arrayCompare(F.end,G.end))return false;}}return true;}};function u(y){this.editor=y;this.reset();};var v={8:1,46:1},w={16:1,17:1,18:1},x={37:1,38:1,39:1,40:1};u.prototype={type:function(y){var z=y&&y.data.getKey(),A=z in w,B=z in v,C=this.lastKeystroke in v,D=B&&z==this.lastKeystroke,E=z in x,F=this.lastKeystroke in x,G=!B&&!E,H=B&&!D,I=!(A||this.typing)||G&&(C||F);if(I||H){var J=new s(this.editor);k.setTimeout(function(){var L=this;var K=L.editor.getSnapshot();if(i)K=K.replace(/\s+_cke_expando=".*?"/g,'');if(J.contents!=K){L.typing=true;if(!L.save(false,J,false))L.snapshots.splice(L.index+1,L.snapshots.length-L.index-1);L.hasUndo=true;L.hasRedo=false;L.typesCount=1;L.modifiersCount=1;L.onChange();}},0,this);}this.lastKeystroke=z;if(B){this.typesCount=0;this.modifiersCount++;if(this.modifiersCount>25){this.save(false,null,false);this.modifiersCount=1;}}else if(!E){this.modifiersCount=0;this.typesCount++;if(this.typesCount>25){this.save(false,null,false);this.typesCount=1;}}},reset:function(){var y=this;y.lastKeystroke=0;y.snapshots=[];y.index=-1;y.limit=y.editor.config.undoStackSize||20;y.currentImage=null;y.hasUndo=false;y.hasRedo=false;y.resetType();},resetType:function(){var y=this;y.typing=false;delete y.lastKeystroke;y.typesCount=0;y.modifiersCount=0;},fireChange:function(){var y=this;y.hasUndo=!!y.getNextImage(true);y.hasRedo=!!y.getNextImage(false);y.resetType();y.onChange();},save:function(y,z,A){var C=this;var B=C.snapshots;if(!z)z=new s(C.editor);if(z.contents===false)return false;if(C.currentImage&&z.equals(C.currentImage,y))return false;
B.splice(C.index+1,B.length-C.index-1);if(B.length==C.limit)B.shift();C.index=B.push(z)-1;C.currentImage=z;if(A!==false)C.fireChange();return true;},restoreImage:function(y){var A=this;A.editor.loadSnapshot(y.contents);if(y.bookmarks)A.editor.getSelection().selectBookmarks(y.bookmarks);else if(i){var z=A.editor.document.getBody().$.createTextRange();z.collapse(true);z.select();}A.index=y.index;A.update();A.fireChange();},getNextImage:function(y){var D=this;var z=D.snapshots,A=D.currentImage,B,C;if(A)if(y)for(C=D.index-1;C>=0;C--){B=z[C];if(!A.equals(B,true)){B.index=C;return B;}}else for(C=D.index+1;C<z.length;C++){B=z[C];if(!A.equals(B,true)){B.index=C;return B;}}return null;},redoable:function(){return this.enabled&&this.hasRedo;},undoable:function(){return this.enabled&&this.hasUndo;},undo:function(){var z=this;if(z.undoable()){z.save(true);var y=z.getNextImage(true);if(y)return z.restoreImage(y),true;}return false;},redo:function(){var z=this;if(z.redoable()){z.save(true);if(z.redoable()){var y=z.getNextImage(false);if(y)return z.restoreImage(y),true;}}return false;},update:function(){var y=this;y.snapshots.splice(y.index,1,y.currentImage=new s(y.editor));}};})();(function(){var s={table:1,pre:1},t=/(^|<body\b[^>]*>)\s*<(p|div|address|h\d|center)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\2>)?\s*(?=$|<\/body>)/gi,u=j.walker.whitespaces(true);function v(H){if(H.getType()==3)return H.getSelectedElement().isReadOnly();else return H.getCommonAncestor().isReadOnly();};function w(H){if(this.mode=='wysiwyg'){this.focus();var I=this.getSelection();if(v(I))return;var J=H.data;this.fire('saveSnapshot');if(this.dataProcessor)J=this.dataProcessor.toHtml(J);if(i){var K=I.isLocked;if(K)I.unlock();var L=I.getNative();if(L.type=='Control')L.clear();else if(I.getType()==2){var M=I.getRanges()[0],N=M&&M.endContainer;if(N&&N.type==1&&N.getAttribute('contenteditable')=='false'&&M.checkBoundaryOfElement(N,2)){M.setEndAfter(M.endContainer);M.deleteContents();}}try{L.createRange().pasteHTML(J);}catch(P){}if(K)this.getSelection().lock();}else this.document.$.execCommand('inserthtml',false,J);if(h.webkit){this.document.$.execCommand('inserthtml',false,'<span id="cke_paste_marker" cke_temp="1"></span>');var O=this.document.getById('cke_paste_marker');O.scrollIntoView();O.remove();O=null;}k.setTimeout(function(){this.fire('saveSnapshot');},0,this);}};function x(H){if(this.mode=='wysiwyg'){this.focus();var I=this.getSelection();if(v(I))return;this.fire('saveSnapshot');var J=I.getRanges(),K=H.data,L=K.getName(),M=l.$block[L],N=I.isLocked;
if(N)I.unlock();var O,P,Q,R;for(var S=J.length-1;S>=0;S--){O=J[S];O.deleteContents();P=!S&&K||K.clone(1);var T,U;if(M)while((T=O.getCommonAncestor(0,1))&&(U=l[T.getName()])&&!(U&&U[L])){if(T.getName() in l.span)O.splitElement(T);else if(O.checkStartOfBlock()&&O.checkEndOfBlock()){O.setStartBefore(T);O.collapse(true);T.remove();}else O.splitBlock();}O.insertNode(P);if(!Q)Q=P;}O.moveToPosition(Q,4);if(M){var V=Q.getNext(u),W=V&&V.type==1&&V.getName();if(W&&l.$block[W]&&l[W]['#'])O.moveToElementEditStart(V);}I.selectRanges([O]);if(N)this.getSelection().lock();k.setTimeout(function(){this.fire('saveSnapshot');},0,this);}};function y(H){if(!H.checkDirty())setTimeout(function(){H.resetDirty();},0);};var z=j.walker.whitespaces(true),A=j.walker.bookmark(false,true);function B(H){return z(H)&&A(H);};function C(H){return H.type==3&&k.trim(H.getText()).match(/^(?:&nbsp;|\xa0)$/);};function D(H){if(H.isLocked){H.unlock();setTimeout(function(){H.lock();},0);}};function E(H){return H.getOuterHtml().match(t);};z=j.walker.whitespaces(true);function F(H){var I=H.window,J=H.document,K=H.document.getBody(),L=K.getChildren().count();if(!L||L==1&&K.getFirst().hasAttribute('_moz_editor_bogus_node')){y(H);var M=H.element.getDocument(),N=M.getDocumentElement(),O=N.$.scrollTop,P=N.$.scrollLeft,Q=J.$.createEvent('KeyEvents');Q.initKeyEvent('keypress',true,true,I.$,false,false,false,false,0,32);J.$.dispatchEvent(Q);if(O!=N.$.scrollTop||P!=N.$.scrollLeft)M.getWindow().$.scrollTo(P,O);L&&K.getFirst().remove();J.getBody().appendBogus();var R=new j.range(J);R.setStartAt(K,1);R.select();}};function G(H){var I=H.editor,J=H.data.path,K=J.blockLimit,L=H.data.selection,M=L.getRanges()[0],N=I.document.getBody(),O=I.config.enterMode;h.gecko&&F(I);if(O!=2&&M.collapsed&&K.getName()=='body'&&!J.block){I.fire('updateSnapshot');y(I);i&&D(L);var P=M.fixBlock(true,I.config.enterMode==3?'div':'p');if(i){var Q=P.getFirst(B);Q&&C(Q)&&Q.remove();}if(E(P)){var R=P.getNext(z);if(R&&R.type==1&&!s[R.getName()]){M.moveToElementEditStart(R);P.remove();}else{R=P.getPrevious(z);if(R&&R.type==1&&!s[R.getName()]){M.moveToElementEditEnd(R);P.remove();}}}M.select();if(!i)I.selectionChange();}var S=new j.range(I.document),T=new j.walker(S);S.selectNodeContents(N);T.evaluator=function(V){return V.type==1&&V.getName() in s;};T.guard=function(V,W){return!(V.type==3&&z(V)||W);};if(T.previous()){I.fire('updateSnapshot');y(I);i&&D(L);var U;if(O!=2)U=N.append(new n(O==1?'p':'div'));else U=N;if(!i)U.appendBogus();}};p.add('wysiwygarea',{requires:['editingblock'],init:function(H){var I=H.config.enterMode!=2?H.config.enterMode==3?'div':'p':false,J=H.lang.editorTitle.replace('%1',H.name),K;
H.on('editingBlockReady',function(){var Q,R,S,T,U,V,W=h.isCustomDomain(),X=function(aa){if(R)R.remove();var ab='document.open();'+(W?'document.domain="'+document.domain+'";':'')+'document.close();';R=n.createFromHtml('<iframe style="width:100%;height:100%" frameBorder="0" title="'+J+'"'+' src="'+(i?'javascript:void(function(){'+encodeURIComponent(ab)+'}())':'')+'"'+' tabIndex="'+(h.webkit?-1:H.tabIndex)+'"'+' allowTransparency="true"'+'></iframe>');if(document.location.protocol=='chrome:')g.event.useCapture=true;R.on('load',function(af){U=1;af.removeListener();var ag=R.getFrameDocument().$;ag.open('text/html','replace');ag.write(aa);ag.close();});if(document.location.protocol=='chrome:')g.event.useCapture=false;var ac=H.element,ad=h.gecko&&!ac.isVisible(),ae={};if(ad){ac.show();ae={position:ac.getStyle('position'),top:ac.getStyle('top')};ac.setStyles({position:'absolute',top:'-3000px'});}Q.append(R);if(ad)setTimeout(function(){ac.hide();ac.setStyles(ae);},1000);};K=k.addFunction(Z);var Y='<script id="cke_actscrpt" type="text/javascript" cke_temp="1">'+(W?'document.domain="'+document.domain+'";':'')+'window.parent.CKEDITOR.tools.callFunction( '+K+', window );'+'</script>';function Z(aa){if(!U)return;U=0;H.fire('ariaWidget',R);var ab=aa.document,ac=ab.body,ad=ab.getElementById('cke_actscrpt');ad.parentNode.removeChild(ad);ac.spellcheck=!H.config.disableNativeSpellChecker;if(i){ac.hideFocus=true;ac.disabled=true;ac.contentEditable=true;ac.removeAttribute('disabled');}else setTimeout(function(){if(h.gecko&&h.version>=10900||h.opera)ab.$.body.contentEditable=true;else if(h.webkit)ab.$.body.parentNode.contentEditable=true;else ab.$.designMode='on';},0);h.gecko&&k.setTimeout(F,0,null,H);aa=H.window=new j.window(aa);ab=H.document=new m(ab);ab.on('dblclick',function(ai){var aj=ai.data.getTarget(),ak={element:aj,dialog:''};H.fire('doubleclick',ak);ak.dialog&&H.openDialog(ak.dialog);});if(!(i||h.opera))ab.on('mousedown',function(ai){var aj=ai.data.getTarget();if(aj.is('img','hr','input','textarea','select'))H.getSelection().selectElement(aj);});if(h.gecko)ab.on('mouseup',function(ai){if(ai.data.$.button==2){var aj=ai.data.getTarget();if(!aj.getOuterHtml().replace(t,'')){var ak=new j.range(ab);ak.moveToElementEditStart(aj);ak.select(true);}}});ab.on('click',function(ai){ai=ai.data;if(ai.getTarget().is('a')&&ai.$.button!=2)ai.preventDefault();});if(h.webkit){ab.on('click',function(ai){if(ai.data.getTarget().is('input','select'))ai.data.preventDefault();});ab.on('mouseup',function(ai){if(ai.data.getTarget().is('input','textarea'))ai.data.preventDefault();
});}if(i&&ab.$.compatMode=='CSS1Compat'||h.gecko||h.opera){var ae=ab.getDocumentElement();ae.on('mousedown',function(ai){if(ai.data.getTarget().equals(ae)){if(h.gecko&&h.version>=10900)O();P.focus();}});}aa.on('blur',function(){H.focusManager.blur();});var af;aa.on('focus',function(){var ai=H.document;if(h.gecko&&h.version>=10900)O();else if(h.opera)ai.getBody().focus();else if(h.webkit)if(!af){H.document.getDocumentElement().focus();af=1;}H.focusManager.focus();});var ag=H.keystrokeHandler;if(ag)ag.attach(ab);if(i){ab.getDocumentElement().addClass(ab.$.compatMode);ab.on('keydown',function(ai){var aj=ai.data.getKeystroke();if(aj in {8:1,46:1}){var ak=H.getSelection(),al=ak.getSelectedElement();if(al){H.fire('saveSnapshot');var am=ak.getRanges()[0].createBookmark();al.remove();ak.selectBookmarks([am]);H.fire('saveSnapshot');ai.data.preventDefault();}}});if(ab.$.compatMode=='CSS1Compat'){var ah={33:1,34:1};ab.on('keydown',function(ai){if(ai.data.getKeystroke() in ah)setTimeout(function(){H.getSelection().scrollIntoView();},0);});}}if(H.contextMenu)H.contextMenu.addTarget(ab,H.config.browserContextMenuOnCtrl!==false);setTimeout(function(){H.fire('contentDom');if(V){H.mode='wysiwyg';H.fire('mode');V=false;}S=false;if(T){H.focus();T=false;}setTimeout(function(){H.fire('dataReady');},0);try{H.document.$.execCommand('enableObjectResizing',false,!H.config.disableObjectResizing);}catch(ai){}try{H.document.$.execCommand('enableInlineTableEditing',false,!H.config.disableNativeTableHandles);}catch(aj){}if(i)setTimeout(function(){if(H.document){var ak=H.document.$.body;ak.runtimeStyle.marginBottom='0px';ak.runtimeStyle.marginBottom='';}},1000);},0);};H.addMode('wysiwyg',{load:function(aa,ab,ac){Q=aa;if(i&&h.quirks)aa.setStyle('position','relative');H.mayBeDirty=true;V=true;if(ac)this.loadSnapshotData(ab);else this.loadData(ab);},loadData:function(aa){S=true;var ab=H.config,ac=ab.fullPage,ad=ab.docType,ae='<style type="text/css" cke_temp="1">'+H._.styles.join('\n')+'</style>';!ac&&(ae=k.buildStyleHtml(H.config.contentsCss)+ae);var af=ab.baseHref?'<base href="'+ab.baseHref+'" cke_temp="1" />':'';if(ac)aa=aa.replace(/<!DOCTYPE[^>]*>/i,function(ag){H.docType=ad=ag;return '';});if(H.dataProcessor)aa=H.dataProcessor.toHtml(aa,I);if(ac){if(!/<body[\s|>]/.test(aa))aa='<body>'+aa;if(!/<html[\s|>]/.test(aa))aa='<html>'+aa+'</html>';if(!/<head[\s|>]/.test(aa))aa=aa.replace(/<html[^>]*>/,'$&<head><title></title></head>');else if(!/<title[\s|>]/.test(aa))aa=aa.replace(/<head[^>]*>/,'$&<title></title>');
af&&(aa=aa.replace(/<head>/,'$&'+af));aa=aa.replace(/<\/head\s*>/,ae+'$&');aa=ad+aa;}else aa=ab.docType+'<html dir="'+ab.contentsLangDirection+'"'+' lang="'+(ab.contentsLanguage||H.langCode)+'">'+'<head>'+'<title>'+J+'</title>'+af+ae+'</head>'+'<body'+(ab.bodyId?' id="'+ab.bodyId+'"':'')+(ab.bodyClass?' class="'+ab.bodyClass+'"':'')+'>'+aa+'</html>';aa+=Y;this.onDispose();X(aa);},getData:function(){var aa=H.config,ab=aa.fullPage,ac=ab&&H.docType,ad=R.getFrameDocument(),ae=ab?ad.getDocumentElement().getOuterHtml():ad.getBody().getHtml();if(H.dataProcessor)ae=H.dataProcessor.toDataFormat(ae,I);if(aa.ignoreEmptyParagraph)ae=ae.replace(t,function(af,ag){return ag;});if(ac)ae=ac+'\n'+ae;return ae;},getSnapshotData:function(){return R.getFrameDocument().getBody().getHtml();},loadSnapshotData:function(aa){R.getFrameDocument().getBody().setHtml(aa);},onDispose:function(){if(!H.document)return;H.document.getDocumentElement().clearCustomData();H.document.getBody().clearCustomData();H.window.clearCustomData();H.document.clearCustomData();R.clearCustomData();R.remove();},unload:function(aa){this.onDispose();H.window=H.document=R=Q=T=null;H.fire('contentDomUnload');},focus:function(){if(S)T=true;else if(h.opera&&H.document){var aa=H.window.$.frameElement;aa.blur(),aa.focus();H.document.getBody().focus();H.selectionChange();}else if(!h.opera&&H.window){H.window.focus();H.selectionChange();}}});H.on('insertHtml',w,null,null,20);H.on('insertElement',x,null,null,20);H.on('selectionChange',G,null,null,1);});var L;H.on('contentDom',function(){var Q=H.document.getElementsByTag('title').getItem(0);Q.setAttribute('_cke_title',H.document.$.title);H.document.$.title=J;});if(h.ie8Compat){H.addCss('html.CSS1Compat [contenteditable=false]{ min-height:0 !important;}');var M=[];for(var N in l.$removeEmpty)M.push('html.CSS1Compat '+N+'[contenteditable=false]');H.addCss(M.join(',')+'{ display:inline-block;}');}else if(h.gecko)H.addCss('html { height: 100% !important; }');function O(Q){k.tryThese(function(){H.document.$.designMode='on';setTimeout(function(){H.document.$.designMode='off';if(g.currentInstance==H)H.document.getBody().focus();},50);},function(){H.document.$.designMode='off';var R=H.document.getBody();R.setAttribute('contentEditable',false);R.setAttribute('contentEditable',true);!Q&&O(1);});};if(h.gecko||i||h.opera){var P;H.on('uiReady',function(){P=H.container.append(n.createFromHtml('<span tabindex="-1" style="position:absolute; left:-10000" role="presentation"></span>'));P.on('focus',function(){H.focus();
});});H.on('destroy',function(){k.removeFunction(K);P.clearCustomData();});}H.on('insertElement',function(Q){var R=Q.data;if(R.type==1&&(R.is('input')||R.is('textarea')))if(!R.isReadOnly()){R.setAttribute('contentEditable',false);R.setCustomData('_cke_notReadOnly',1);}});}});if(h.gecko)(function(){var H=document.body;if(!H)window.addEventListener('load',arguments.callee,false);else{var I=H.getAttribute('onpageshow');H.setAttribute('onpageshow',(I?I+';':'')+'event.persisted && (function(){'+'var allInstances = CKEDITOR.instances, editor, doc;'+'for ( var i in allInstances )'+'{'+'\teditor = allInstances[ i ];'+'\tdoc = editor.document;'+'\tif ( doc )'+'\t{'+'\t\tdoc.$.designMode = "off";'+'\t\tdoc.$.designMode = "on";'+'\t}'+'}'+'})();');}})();})();o.disableObjectResizing=false;o.disableNativeTableHandles=true;o.disableNativeSpellChecker=true;o.ignoreEmptyParagraph=true;p.add('wsc',{requires:['dialog'],init:function(s){var t='checkspell',u=s.addCommand(t,new g.dialogCommand(t));u.modes={wysiwyg:!h.opera&&document.domain==window.location.hostname};s.ui.addButton('SpellChecker',{label:s.lang.spellCheck.toolbar,command:t});g.dialog.add(t,this.path+'dialogs/wsc.js');}});o.wsc_customerId=o.wsc_customerId||'1:ua3xw1-2XyGJ3-GWruD3-6OFNT1-oXcuB1-nR6Bp4-hgQHc-EcYng3-sdRXG3-NOfFk';o.wsc_customLoaderScript=o.wsc_customLoaderScript||null;g.DIALOG_RESIZE_NONE=0;g.DIALOG_RESIZE_WIDTH=1;g.DIALOG_RESIZE_HEIGHT=2;g.DIALOG_RESIZE_BOTH=3;(function(){var s=k.cssLength;function t(V){return!!this._.tabs[V][0].$.offsetHeight;};function u(){var Z=this;var V=Z._.currentTabId,W=Z._.tabIdList.length,X=k.indexOf(Z._.tabIdList,V)+W;for(var Y=X-1;Y>X-W;Y--){if(t.call(Z,Z._.tabIdList[Y%W]))return Z._.tabIdList[Y%W];}return null;};function v(){var Z=this;var V=Z._.currentTabId,W=Z._.tabIdList.length,X=k.indexOf(Z._.tabIdList,V);for(var Y=X+1;Y<X+W;Y++){if(t.call(Z,Z._.tabIdList[Y%W]))return Z._.tabIdList[Y%W];}return null;};function w(V,W){var X=V.$.getElementsByTagName('input');for(var Y=0,Z=X.length;Y<Z;Y++){var aa=new n(X[Y]);if(aa.getAttribute('type').toLowerCase()=='text')if(W){aa.setAttribute('value',aa.getCustomData('fake_value')||'');aa.removeCustomData('fake_value');}else{aa.setCustomData('fake_value',aa.getAttribute('value'));aa.setAttribute('value','');}}};g.dialog=function(V,W){var X=g.dialog._.dialogDefinitions[W];X=k.extend(X(V),y);X=k.clone(X);X=new C(this,X);var Y=g.document,Z=V.theme.buildDialog(V);this._={editor:V,element:Z.element,name:W,contentSize:{width:0,height:0},size:{width:0,height:0},updateSize:false,contents:{},buttons:{},accessKeyMap:{},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:false,focusList:[],currentFocusIndex:0,hasFocus:false};
this.parts=Z.parts;k.setTimeout(function(){V.fire('ariaWidget',this.parts.contents);},0,this);this.parts.dialog.setStyles({position:h.ie6Compat?'absolute':'fixed',top:0,left:0,visibility:'hidden'});g.event.call(this);this.definition=X=g.fire('dialogDefinition',{name:W,definition:X},V).definition;if(X.onLoad)this.on('load',X.onLoad);if(X.onShow)this.on('show',X.onShow);if(X.onHide)this.on('hide',X.onHide);if(X.onOk)this.on('ok',function(am){V.fire('saveSnapshot');setTimeout(function(){V.fire('saveSnapshot');},0);if(X.onOk.call(this,am)===false)am.data.hide=false;});if(X.onCancel)this.on('cancel',function(am){if(X.onCancel.call(this,am)===false)am.data.hide=false;});var aa=this,ab=function(am){var an=aa._.contents,ao=false;for(var ap in an)for(var aq in an[ap]){ao=am.call(this,an[ap][aq]);if(ao)return;}};this.on('ok',function(am){ab(function(an){if(an.validate){var ao=an.validate(this);if(typeof ao=='string'){alert(ao);ao=false;}if(ao===false){if(an.select)an.select();else an.focus();am.data.hide=false;am.stop();return true;}}});},this,null,0);this.on('cancel',function(am){ab(function(an){if(an.isChanged()){if(!confirm(V.lang.common.confirmCancel))am.data.hide=false;return true;}});},this,null,0);this.parts.close.on('click',function(am){if(this.fire('cancel',{hide:true}).hide!==false)this.hide();am.data.preventDefault();},this);function ac(){var am=aa._.focusList;am.sort(function(ap,aq){if(ap.tabIndex!=aq.tabIndex)return aq.tabIndex-ap.tabIndex;else return ap.focusIndex-aq.focusIndex;});var an=am.length;for(var ao=0;ao<an;ao++)am[ao].focusIndex=ao;};function ad(am){var an=aa._.focusList,ao=am?1:-1;if(an.length<1)return;var ap=aa._.currentFocusIndex;try{an[ap].getInputElement().$.blur();}catch(as){}var aq=(ap+ao+an.length)%an.length,ar=aq;while(!an[ar].isFocusable()){ar=(ar+ao+an.length)%an.length;if(ar==aq)break;}an[ar].focus();if(an[ar].type=='text')an[ar].select();};this.changeFocus=ad;var ae;function af(am){var ar=this;if(aa!=g.dialog._.currentTop)return;var an=am.data.getKeystroke(),ao=V.lang.dir=='rtl';ae=0;if(an==9||an==2000+9){var ap=an==2000+9;if(aa._.tabBarMode){var aq=ap?u.call(aa):v.call(aa);aa.selectPage(aq);aa._.tabs[aq][0].focus();}else ad(!ap);ae=1;}else if(an==4000+121&&!aa._.tabBarMode&&aa.getPageCount()>1){aa._.tabBarMode=true;aa._.tabs[aa._.currentTabId][0].focus();ae=1;}else if((an==37||an==39)&&aa._.tabBarMode){aq=an==(ao?39:37)?u.call(aa):v.call(aa);aa.selectPage(aq);aa._.tabs[aq][0].focus();ae=1;}else if((an==13||an==32)&&aa._.tabBarMode){ar.selectPage(ar._.currentTabId);
ar._.tabBarMode=false;ar._.currentFocusIndex=-1;ad(true);ae=1;}if(ae){am.stop();am.data.preventDefault();}};function ag(am){ae&&am.data.preventDefault();};var ah=this._.element;this.on('show',function(){ah.on('keydown',af,this,null,0);if(h.opera||h.gecko&&h.mac)ah.on('keypress',ag,this);});this.on('hide',function(){ah.removeListener('keydown',af);if(h.opera||h.gecko&&h.mac)ah.removeListener('keypress',ag);});this.on('iframeAdded',function(am){var an=new m(am.data.iframe.$.contentWindow.document);an.on('keydown',af,this,null,0);});this.on('show',function(){var aq=this;ac();if(V.config.dialog_startupFocusTab&&aa._.pageCount>1){aa._.tabBarMode=true;aa._.tabs[aa._.currentTabId][0].focus();}else if(!aq._.hasFocus){aq._.currentFocusIndex=-1;if(X.onFocus){var am=X.onFocus.call(aq);am&&am.focus();}else ad(true);if(aq._.editor.mode=='wysiwyg'&&i){var an=V.document.$.selection,ao=an.createRange();if(ao)if(ao.parentElement&&ao.parentElement().ownerDocument==V.document.$||ao.item&&ao.item(0).ownerDocument==V.document.$){var ap=document.body.createTextRange();ap.moveToElementText(aq.getElement().getFirst().$);ap.collapse(true);ap.select();}}}},this,null,4294967295);if(h.ie6Compat)this.on('load',function(am){var an=this.getElement(),ao=an.getFirst();ao.remove();ao.appendTo(an);},this);E(this);F(this);new j.text(X.title,g.document).appendTo(this.parts.title);for(var ai=0;ai<X.contents.length;ai++){var aj=X.contents[ai];aj&&this.addPage(aj);}this.parts.tabs.on('click',function(am){var ap=this;var an=am.data.getTarget();if(an.hasClass('cke_dialog_tab')){var ao=an.$.id;ap.selectPage(ao.substring(4,ao.lastIndexOf('_')));if(ap._.tabBarMode){ap._.tabBarMode=false;ap._.currentFocusIndex=-1;ad(true);}am.data.preventDefault();}},this);var ak=[],al=g.dialog._.uiElementBuilders.hbox.build(this,{type:'hbox',className:'cke_dialog_footer_buttons',widths:[],children:X.buttons},ak).getChild();this.parts.footer.setHtml(ak.join(''));for(ai=0;ai<al.length;ai++)this._.buttons[al[ai].id]=al[ai];};function x(V,W,X){this.element=W;this.focusIndex=X;this.tabIndex=0;this.isFocusable=function(){return!W.getAttribute('disabled')&&W.isVisible();};this.focus=function(){V._.currentFocusIndex=this.focusIndex;this.element.focus();};W.on('keydown',function(Y){if(Y.data.getKeystroke() in {32:1,13:1})this.fire('click');});W.on('focus',function(){this.fire('mouseover');});W.on('blur',function(){this.fire('mouseout');});};g.dialog.prototype={destroy:function(){this.hide();this._.element.remove();},resize:(function(){return function(V,W){var X=this;
if(X._.contentSize&&X._.contentSize.width==V&&X._.contentSize.height==W)return;g.dialog.fire('resize',{dialog:X,skin:X._.editor.skinName,width:V,height:W},X._.editor);X._.contentSize={width:V,height:W};X._.updateSize=true;};})(),getSize:function(){var X=this;if(!X._.updateSize)return X._.size;var V=X._.element.getFirst(),W=X._.size={width:V.$.offsetWidth||0,height:V.$.offsetHeight||0};X._.updateSize=!W.width||!W.height;return W;},move:(function(){var V;return function(W,X){var aa=this;var Y=aa._.element.getFirst();if(V===undefined)V=Y.getComputedStyle('position')=='fixed';if(V&&aa._.position&&aa._.position.x==W&&aa._.position.y==X)return;aa._.position={x:W,y:X};if(!V){var Z=g.document.getWindow().getScrollPosition();W+=Z.x;X+=Z.y;}Y.setStyles({left:(W>0?W:0)+'px',top:(X>0?X:0)+'px'});};})(),getPosition:function(){return k.extend({},this._.position);},show:function(){var V=this._.editor;if(V.mode=='wysiwyg'&&i){var W=V.getSelection();W&&W.lock();}var X=this._.element,Y=this.definition;if(!(X.getParent()&&X.getParent().equals(g.document.getBody())))X.appendTo(g.document.getBody());else X.setStyle('display','block');if(h.gecko&&h.version<10900){var Z=this.parts.dialog;Z.setStyle('position','absolute');setTimeout(function(){Z.setStyle('position','fixed');},0);}this.resize(Y.minWidth,Y.minHeight);this.reset();this.selectPage(this.definition.contents[0].id);if(g.dialog._.currentZIndex===null)g.dialog._.currentZIndex=this._.editor.config.baseFloatZIndex;this._.element.getFirst().setStyle('z-index',g.dialog._.currentZIndex+=10);if(g.dialog._.currentTop===null){g.dialog._.currentTop=this;this._.parentDialog=null;J(this._.editor);X.on('keydown',N);X.on(h.opera?'keypress':'keyup',O);for(var aa in {keyup:1,keydown:1,keypress:1})X.on(aa,U);}else{this._.parentDialog=g.dialog._.currentTop;var ab=this._.parentDialog.getElement().getFirst();ab.$.style.zIndex-=Math.floor(this._.editor.config.baseFloatZIndex/2);g.dialog._.currentTop=this;}P(this,this,'\x1b',null,function(){this.getButton('cancel')&&this.getButton('cancel').click();});this._.hasFocus=false;k.setTimeout(function(){var ac=g.document.getWindow().getViewPaneSize(),ad=this.getSize();this.move((ac.width-Y.minWidth)/2,(ac.height-ad.height)/2);this.parts.dialog.setStyle('visibility','');this.fireOnce('load',{});this.fire('show',{});this._.editor.fire('dialogShow',this);this.foreach(function(ae){ae.setInitValue&&ae.setInitValue();});},100,this);},foreach:function(V){var Y=this;for(var W in Y._.contents)for(var X in Y._.contents[W])V(Y._.contents[W][X]);
return Y;},reset:(function(){var V=function(W){if(W.reset)W.reset(1);};return function(){this.foreach(V);return this;};})(),setupContent:function(){var V=arguments;this.foreach(function(W){if(W.setup)W.setup.apply(W,V);});},commitContent:function(){var V=arguments;this.foreach(function(W){if(W.commit)W.commit.apply(W,V);});},hide:function(){if(!this.parts.dialog.isVisible())return;this.fire('hide',{});this._.editor.fire('dialogHide',this);var V=this._.element;V.setStyle('display','none');this.parts.dialog.setStyle('visibility','hidden');Q(this);while(g.dialog._.currentTop!=this)g.dialog._.currentTop.hide();if(!this._.parentDialog)K();else{var W=this._.parentDialog.getElement().getFirst();W.setStyle('z-index',parseInt(W.$.style.zIndex,10)+Math.floor(this._.editor.config.baseFloatZIndex/2));}g.dialog._.currentTop=this._.parentDialog;if(!this._.parentDialog){g.dialog._.currentZIndex=null;V.removeListener('keydown',N);V.removeListener(h.opera?'keypress':'keyup',O);for(var X in {keyup:1,keydown:1,keypress:1})V.removeListener(X,U);var Y=this._.editor;Y.focus();if(Y.mode=='wysiwyg'&&i){var Z=Y.getSelection();Z&&Z.unlock(true);}}else g.dialog._.currentZIndex-=10;delete this._.parentDialog;this.foreach(function(aa){aa.resetInitValue&&aa.resetInitValue();});},addPage:function(V){var ah=this;var W=[],X=V.label?' title="'+k.htmlEncode(V.label)+'"':'',Y=V.elements,Z=g.dialog._.uiElementBuilders.vbox.build(ah,{type:'vbox',className:'cke_dialog_page_contents',children:V.elements,expand:!!V.expand,padding:V.padding,style:V.style||'width: 100%; height: 100%;'},W),aa=n.createFromHtml(W.join(''));aa.setAttribute('role','tabpanel');var ab=h,ac='cke_'+V.id+'_'+k.getNextNumber(),ad=n.createFromHtml(['<a class="cke_dialog_tab"',ah._.pageCount>0?' cke_last':'cke_first',X,!!V.hidden?' style="display:none"':'',' id="',ac,'"',ab.gecko&&ab.version>=10900&&!ab.hc?'':' href="javascript:void(0)"',' tabIndex="-1"',' hidefocus="true"',' role="tab">',V.label,'</a>'].join(''));aa.setAttribute('aria-labelledby',ac);ah._.tabs[V.id]=[ad,aa];ah._.tabIdList.push(V.id);!V.hidden&&ah._.pageCount++;ah._.lastTab=ad;ah.updateStyle();var ae=ah._.contents[V.id]={},af,ag=Z.getChild();while(af=ag.shift()){ae[af.id]=af;if(typeof af.getChild=='function')ag.push.apply(ag,af.getChild());}aa.setAttribute('name',V.id);aa.appendTo(ah.parts.contents);ad.unselectable();ah.parts.tabs.append(ad);if(V.accessKey){P(ah,ah,'CTRL+'+V.accessKey,S,R);ah._.accessKeyMap['CTRL+'+V.accessKey]=V.id;}},selectPage:function(V){if(this._.currentTabId==V)return;
if(this.fire('selectPage',{page:V,currentPage:this._.currentTabId})===true)return;for(var W in this._.tabs){var X=this._.tabs[W][0],Y=this._.tabs[W][1];if(W!=V){X.removeClass('cke_dialog_tab_selected');Y.hide();}Y.setAttribute('aria-hidden',W!=V);}var Z=this._.tabs[V];Z[0].addClass('cke_dialog_tab_selected');if(h.ie6Compat||h.ie7Compat){w(Z[1]);Z[1].show();setTimeout(function(){w(Z[1],1);},0);}else Z[1].show();this._.currentTabId=V;this._.currentTabIndex=k.indexOf(this._.tabIdList,V);},updateStyle:function(){this.parts.dialog[(this._.pageCount===1?'add':'remove')+'Class']('cke_single_page');},hidePage:function(V){var X=this;var W=X._.tabs[V]&&X._.tabs[V][0];if(!W||X._.pageCount==1)return;else if(V==X._.currentTabId)X.selectPage(u.call(X));W.hide();X._.pageCount--;X.updateStyle();},showPage:function(V){var X=this;var W=X._.tabs[V]&&X._.tabs[V][0];if(!W)return;W.show();X._.pageCount++;X.updateStyle();},getElement:function(){return this._.element;},getName:function(){return this._.name;},getContentElement:function(V,W){var X=this._.contents[V];return X&&X[W];},getValueOf:function(V,W){return this.getContentElement(V,W).getValue();},setValueOf:function(V,W,X){return this.getContentElement(V,W).setValue(X);},getButton:function(V){return this._.buttons[V];},click:function(V){return this._.buttons[V].click();},disableButton:function(V){return this._.buttons[V].disable();},enableButton:function(V){return this._.buttons[V].enable();},getPageCount:function(){return this._.pageCount;},getParentEditor:function(){return this._.editor;},getSelectedElement:function(){return this.getParentEditor().getSelection().getSelectedElement();},addFocusable:function(V,W){var Y=this;if(typeof W=='undefined'){W=Y._.focusList.length;Y._.focusList.push(new x(Y,V,W));}else{Y._.focusList.splice(W,0,new x(Y,V,W));for(var X=W+1;X<Y._.focusList.length;X++)Y._.focusList[X].focusIndex++;}}};k.extend(g.dialog,{add:function(V,W){if(!this._.dialogDefinitions[V]||typeof W=='function')this._.dialogDefinitions[V]=W;},exists:function(V){return!!this._.dialogDefinitions[V];},getCurrent:function(){return g.dialog._.currentTop;},okButton:(function(){var V=function(W,X){X=X||{};return k.extend({id:'ok',type:'button',label:W.lang.common.ok,'class':'cke_dialog_ui_button_ok',onClick:function(Y){var Z=Y.data.dialog;if(Z.fire('ok',{hide:true}).hide!==false)Z.hide();}},X,true);};V.type='button';V.override=function(W){return k.extend(function(X){return V(X,W);},{type:'button'},true);};return V;})(),cancelButton:(function(){var V=function(W,X){X=X||{};
return k.extend({id:'cancel',type:'button',label:W.lang.common.cancel,'class':'cke_dialog_ui_button_cancel',onClick:function(Y){var Z=Y.data.dialog;if(Z.fire('cancel',{hide:true}).hide!==false)Z.hide();}},X,true);};V.type='button';V.override=function(W){return k.extend(function(X){return V(X,W);},{type:'button'},true);};return V;})(),addUIElement:function(V,W){this._.uiElementBuilders[V]=W;}});g.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null};g.event.implementOn(g.dialog);g.event.implementOn(g.dialog.prototype,true);var y={resizable:3,minWidth:600,minHeight:400,buttons:[g.dialog.okButton,g.dialog.cancelButton]};h.mac&&y.buttons.reverse();var z=function(V,W,X){for(var Y=0,Z;Z=V[Y];Y++){if(Z.id==W)return Z;if(X&&Z[X]){var aa=z(Z[X],W,X);if(aa)return aa;}}return null;},A=function(V,W,X,Y,Z){if(X){for(var aa=0,ab;ab=V[aa];aa++){if(ab.id==X){V.splice(aa,0,W);return W;}if(Y&&ab[Y]){var ac=A(ab[Y],W,X,Y,true);if(ac)return ac;}}if(Z)return null;}V.push(W);return W;},B=function(V,W,X){for(var Y=0,Z;Z=V[Y];Y++){if(Z.id==W)return V.splice(Y,1);if(X&&Z[X]){var aa=B(Z[X],W,X);if(aa)return aa;}}return null;},C=function(V,W){this.dialog=V;var X=W.contents;for(var Y=0,Z;Z=X[Y];Y++)X[Y]=Z&&new D(V,Z);k.extend(this,W);};C.prototype={getContents:function(V){return z(this.contents,V);},getButton:function(V){return z(this.buttons,V);},addContents:function(V,W){return A(this.contents,V,W);},addButton:function(V,W){return A(this.buttons,V,W);},removeContents:function(V){B(this.contents,V);},removeButton:function(V){B(this.buttons,V);}};function D(V,W){this._={dialog:V};k.extend(this,W);};D.prototype={get:function(V){return z(this.elements,V,'children');},add:function(V,W){return A(this.elements,V,W,'children');},remove:function(V){B(this.elements,V,'children');}};function E(V){var W=null,X=null,Y=V.getElement().getFirst(),Z=V.getParentEditor(),aa=Z.config.dialog_magnetDistance,ab=Z.skin.margins||[0,0,0,0];if(typeof aa=='undefined')aa=20;function ac(ae){var af=V.getSize(),ag=g.document.getWindow().getViewPaneSize(),ah=ae.data.$.screenX,ai=ae.data.$.screenY,aj=ah-W.x,ak=ai-W.y,al,am;W={x:ah,y:ai};X.x+=aj;X.y+=ak;if(X.x+ab[3]<aa)al=-ab[3];else if(X.x-ab[1]>ag.width-af.width-aa)al=ag.width-af.width+ab[1];else al=X.x;if(X.y+ab[0]<aa)am=-ab[0];else if(X.y-ab[2]>ag.height-af.height-aa)am=ag.height-af.height+ab[2];else am=X.y;V.move(al,am);ae.data.preventDefault();};function ad(ae){g.document.removeListener('mousemove',ac);g.document.removeListener('mouseup',ad);
if(h.ie6Compat){var af=I.getChild(0).getFrameDocument();af.removeListener('mousemove',ac);af.removeListener('mouseup',ad);}};V.parts.title.on('mousedown',function(ae){V._.updateSize=true;W={x:ae.data.$.screenX,y:ae.data.$.screenY};g.document.on('mousemove',ac);g.document.on('mouseup',ad);X=V.getPosition();if(h.ie6Compat){var af=I.getChild(0).getFrameDocument();af.on('mousemove',ac);af.on('mouseup',ad);}ae.data.preventDefault();},V);};function F(V){var W=V.definition,X=W.minWidth||0,Y=W.minHeight||0,Z=W.resizable,aa=V.getParentEditor().skin.margins||[0,0,0,0];function ab(am,an){am.y+=an;};function ac(am,an){am.x2+=an;};function ad(am,an){am.y2+=an;};function ae(am,an){am.x+=an;};var af=null,ag=null,ah=V._.editor.config.magnetDistance,ai=['tl','t','tr','l','r','bl','b','br'];function aj(am){var an=am.listenerData.part,ao=V.getSize();ag=V.getPosition();k.extend(ag,{x2:ag.x+ao.width,y2:ag.y+ao.height});af={x:am.data.$.screenX,y:am.data.$.screenY};g.document.on('mousemove',ak,V,{part:an});g.document.on('mouseup',al,V,{part:an});if(h.ie6Compat){var ap=I.getChild(0).getFrameDocument();ap.on('mousemove',ak,V,{part:an});ap.on('mouseup',al,V,{part:an});}am.data.preventDefault();};function ak(am){var an=am.data.$.screenX,ao=am.data.$.screenY,ap=an-af.x,aq=ao-af.y,ar=g.document.getWindow().getViewPaneSize(),as=am.listenerData.part;if(as.search('t')!=-1)ab(ag,aq);if(as.search('l')!=-1)ae(ag,ap);if(as.search('b')!=-1)ad(ag,aq);if(as.search('r')!=-1)ac(ag,ap);af={x:an,y:ao};var at,au,av,aw;if(ag.x+aa[3]<ah)at=-aa[3];else if(as.search('l')!=-1&&ag.x2-ag.x<X+ah)at=ag.x2-X;else at=ag.x;if(ag.y+aa[0]<ah)au=-aa[0];else if(as.search('t')!=-1&&ag.y2-ag.y<Y+ah)au=ag.y2-Y;else au=ag.y;if(ag.x2-aa[1]>ar.width-ah)av=ar.width+aa[1];else if(as.search('r')!=-1&&ag.x2-ag.x<X+ah)av=ag.x+X;else av=ag.x2;if(ag.y2-aa[2]>ar.height-ah)aw=ar.height+aa[2];else if(as.search('b')!=-1&&ag.y2-ag.y<Y+ah)aw=ag.y+Y;else aw=ag.y2;V.move(at,au);V.resize(av-at,aw-au);am.data.preventDefault();};function al(am){g.document.removeListener('mouseup',al);g.document.removeListener('mousemove',ak);if(h.ie6Compat){var an=I.getChild(0).getFrameDocument();an.removeListener('mouseup',al);an.removeListener('mousemove',ak);}};};var G,H={},I;function J(V){var W=g.document.getWindow(),X=V.config,Y=X.dialog_backgroundCoverColor||'white',Z=X.dialog_backgroundCoverOpacity,aa=X.baseFloatZIndex,ab=k.genKey(Y,Z,aa),ac=H[ab];if(!ac){var ad=['<div style="position: ',h.ie6Compat?'absolute':'fixed','; z-index: ',aa,'; top: 0px; left: 0px; ',!h.ie6Compat?'background-color: '+Y:'','" class="cke_dialog_background_cover">'];
if(h.ie6Compat){var ae=h.isCustomDomain(),af="<html><body style=\\'background-color:"+Y+";\\'></body></html>";ad.push('<iframe hidefocus="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:');ad.push('void((function(){document.open();'+(ae?"document.domain='"+document.domain+"';":'')+"document.write( '"+af+"' );"+'document.close();'+'})())');ad.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>');}ad.push('</div>');ac=n.createFromHtml(ad.join(''));ac.setOpacity(Z!=undefined?Z:0.5);ac.appendTo(g.document.getBody());H[ab]=ac;}else ac.show();I=ac;var ag=function(){var aj=W.getViewPaneSize();ac.setStyles({width:aj.width+'px',height:aj.height+'px'});},ah=function(){var aj=W.getScrollPosition(),ak=g.dialog._.currentTop;ac.setStyles({left:aj.x+'px',top:aj.y+'px'});do{var al=ak.getPosition();ak.move(al.x,al.y);}while(ak=ak._.parentDialog)};G=ag;W.on('resize',ag);ag();if(h.ie6Compat){var ai=function(){ah();arguments.callee.prevScrollHandler.apply(this,arguments);};W.$.setTimeout(function(){ai.prevScrollHandler=window.onscroll||(function(){});window.onscroll=ai;},0);ah();}};function K(){if(!I)return;var V=g.document.getWindow();I.hide();V.removeListener('resize',G);if(h.ie6Compat)V.$.setTimeout(function(){var W=window.onscroll&&window.onscroll.prevScrollHandler;window.onscroll=W||null;},0);G=null;};function L(){for(var V in H)H[V].remove();H={};};var M={},N=function(V){var W=V.data.$.ctrlKey||V.data.$.metaKey,X=V.data.$.altKey,Y=V.data.$.shiftKey,Z=String.fromCharCode(V.data.$.keyCode),aa=M[(W?'CTRL+':'')+(X?'ALT+':'')+(Y?'SHIFT+':'')+Z];if(!aa||!aa.length)return;aa=aa[aa.length-1];aa.keydown&&aa.keydown.call(aa.uiElement,aa.dialog,aa.key);V.data.preventDefault();},O=function(V){var W=V.data.$.ctrlKey||V.data.$.metaKey,X=V.data.$.altKey,Y=V.data.$.shiftKey,Z=String.fromCharCode(V.data.$.keyCode),aa=M[(W?'CTRL+':'')+(X?'ALT+':'')+(Y?'SHIFT+':'')+Z];if(!aa||!aa.length)return;aa=aa[aa.length-1];if(aa.keyup){aa.keyup.call(aa.uiElement,aa.dialog,aa.key);V.data.preventDefault();}},P=function(V,W,X,Y,Z){var aa=M[X]||(M[X]=[]);aa.push({uiElement:V,dialog:W,key:X,keyup:Z||V.accessKeyUp,keydown:Y||V.accessKeyDown});},Q=function(V){for(var W in M){var X=M[W];for(var Y=X.length-1;Y>=0;Y--){if(X[Y].dialog==V||X[Y].uiElement==V)X.splice(Y,1);}if(X.length===0)delete M[W];}},R=function(V,W){if(V._.accessKeyMap[W])V.selectPage(V._.accessKeyMap[W]);},S=function(V,W){},T={27:1,13:1},U=function(V){if(V.data.getKeystroke() in T)V.data.stopPropagation();
};(function(){q.dialog={uiElement:function(V,W,X,Y,Z,aa,ab){if(arguments.length<4)return;var ac=(Y.call?Y(W):Y)||'div',ad=['<',ac,' '],ae=(Z&&Z.call?Z(W):Z)||{},af=(aa&&aa.call?aa(W):aa)||{},ag=(ab&&ab.call?ab.call(this,V,W):ab)||'',ah=this.domId=af.id||k.getNextId()+'_uiElement',ai=this.id=W.id,aj;af.id=ah;var ak={};if(W.type)ak['cke_dialog_ui_'+W.type]=1;if(W.className)ak[W.className]=1;var al=af['class']&&af['class'].split?af['class'].split(' '):[];for(aj=0;aj<al.length;aj++){if(al[aj])ak[al[aj]]=1;}var am=[];for(aj in ak)am.push(aj);af['class']=am.join(' ');if(W.title)af.title=W.title;var an=(W.style||'').split(';');for(aj in ae)an.push(aj+':'+ae[aj]);if(W.hidden)an.push('display:none');for(aj=an.length-1;aj>=0;aj--){if(an[aj]==='')an.splice(aj,1);}if(an.length>0)af.style=(af.style?af.style+'; ':'')+an.join('; ');for(aj in af)ad.push(aj+'="'+k.htmlEncode(af[aj])+'" ');ad.push('>',ag,'</',ac,'>');X.push(ad.join(''));(this._||(this._={})).dialog=V;if(typeof W.isChanged=='boolean')this.isChanged=function(){return W.isChanged;};if(typeof W.isChanged=='function')this.isChanged=W.isChanged;g.event.implementOn(this);this.registerEvents(W);if(this.accessKeyUp&&this.accessKeyDown&&W.accessKey)P(this,V,'CTRL+'+W.accessKey);var ao=this;V.on('load',function(){if(ao.getInputElement())ao.getInputElement().on('focus',function(){V._.tabBarMode=false;V._.hasFocus=true;ao.fire('focus');},ao);});if(this.keyboardFocusable){this.tabIndex=W.tabIndex||0;this.focusIndex=V._.focusList.push(this)-1;this.on('focus',function(){V._.currentFocusIndex=ao.focusIndex;});}k.extend(this,W);},hbox:function(V,W,X,Y,Z){if(arguments.length<4)return;this._||(this._={});var aa=this._.children=W,ab=Z&&Z.widths||null,ac=Z&&Z.height||null,ad={},ae,af=function(){var ah=['<tbody><tr class="cke_dialog_ui_hbox">'];for(ae=0;ae<X.length;ae++){var ai='cke_dialog_ui_hbox_child',aj=[];if(ae===0)ai='cke_dialog_ui_hbox_first';if(ae==X.length-1)ai='cke_dialog_ui_hbox_last';ah.push('<td class="',ai,'" role="presentation" ');if(ab){if(ab[ae])aj.push('width:'+s(ab[ae]));}else aj.push('width:'+Math.floor(100/X.length)+'%');if(ac)aj.push('height:'+s(ac));if(Z&&Z.padding!=undefined)aj.push('padding:'+s(Z.padding));if(aj.length>0)ah.push('style="'+aj.join('; ')+'" ');ah.push('>',X[ae],'</td>');}ah.push('</tr></tbody>');return ah.join('');},ag={role:'presentation'};Z&&Z.align&&(ag.align=Z.align);q.dialog.uiElement.call(this,V,Z||{type:'hbox'},Y,'table',ad,ag,af);},vbox:function(V,W,X,Y,Z){if(arguments.length<3)return;
this._||(this._={});var aa=this._.children=W,ab=Z&&Z.width||null,ac=Z&&Z.heights||null,ad=function(){var ae=['<table role="presentation" cellspacing="0" border="0" '];ae.push('style="');if(Z&&Z.expand)ae.push('height:100%;');ae.push('width:'+s(ab||'100%'),';');ae.push('"');ae.push('align="',k.htmlEncode(Z&&Z.align||(V.getParentEditor().lang.dir=='ltr'?'left':'right')),'" ');ae.push('><tbody>');for(var af=0;af<X.length;af++){var ag=[];ae.push('<tr><td role="presentation" ');if(ab)ag.push('width:'+s(ab||'100%'));if(ac)ag.push('height:'+s(ac[af]));else if(Z&&Z.expand)ag.push('height:'+Math.floor(100/X.length)+'%');if(Z&&Z.padding!=undefined)ag.push('padding:'+s(Z.padding));if(ag.length>0)ae.push('style="',ag.join('; '),'" ');ae.push(' class="cke_dialog_ui_vbox_child">',X[af],'</td></tr>');}ae.push('</tbody></table>');return ae.join('');};q.dialog.uiElement.call(this,V,Z||{type:'vbox'},Y,'div',null,{role:'presentation'},ad);}};})();q.dialog.uiElement.prototype={getElement:function(){return g.document.getById(this.domId);},getInputElement:function(){return this.getElement();},getDialog:function(){return this._.dialog;},setValue:function(V,W){this.getInputElement().setValue(V);!W&&this.fire('change',{value:V});return this;},getValue:function(){return this.getInputElement().getValue();},isChanged:function(){return false;},selectParentTab:function(){var Y=this;var V=Y.getInputElement(),W=V,X;while((W=W.getParent())&&W.$.className.search('cke_dialog_page_contents')==-1){}if(!W)return Y;X=W.getAttribute('name');if(Y._.dialog._.currentTabId!=X)Y._.dialog.selectPage(X);return Y;},focus:function(){this.selectParentTab().getInputElement().focus();return this;},registerEvents:function(V){var W=/^on([A-Z]\w+)/,X,Y=function(aa,ab,ac,ad){ab.on('load',function(){aa.getInputElement().on(ac,ad,aa);});};for(var Z in V){if(!(X=Z.match(W)))continue;if(this.eventProcessors[Z])this.eventProcessors[Z].call(this,this._.dialog,V[Z]);else Y(this,this._.dialog,X[1].toLowerCase(),V[Z]);}return this;},eventProcessors:{onLoad:function(V,W){V.on('load',W,this);},onShow:function(V,W){V.on('show',W,this);},onHide:function(V,W){V.on('hide',W,this);}},accessKeyDown:function(V,W){this.focus();},accessKeyUp:function(V,W){},disable:function(){var V=this.getInputElement();V.setAttribute('disabled','true');V.addClass('cke_disabled');},enable:function(){var V=this.getInputElement();V.removeAttribute('disabled');V.removeClass('cke_disabled');},isEnabled:function(){return!this.getInputElement().getAttribute('disabled');
},isVisible:function(){return this.getInputElement().isVisible();},isFocusable:function(){if(!this.isEnabled()||!this.isVisible())return false;return true;}};q.dialog.hbox.prototype=k.extend(new q.dialog.uiElement(),{getChild:function(V){var W=this;if(arguments.length<1)return W._.children.concat();if(!V.splice)V=[V];if(V.length<2)return W._.children[V[0]];else return W._.children[V[0]]&&W._.children[V[0]].getChild?W._.children[V[0]].getChild(V.slice(1,V.length)):null;}},true);q.dialog.vbox.prototype=new q.dialog.hbox();(function(){var V={build:function(W,X,Y){var Z=X.children,aa,ab=[],ac=[];for(var ad=0;ad<Z.length&&(aa=Z[ad]);ad++){var ae=[];ab.push(ae);ac.push(g.dialog._.uiElementBuilders[aa.type].build(W,aa,ae));}return new q.dialog[X.type](W,ac,ab,Y,X);}};g.dialog.addUIElement('hbox',V);g.dialog.addUIElement('vbox',V);})();g.dialogCommand=function(V){this.dialogName=V;};g.dialogCommand.prototype={exec:function(V){V.openDialog(this.dialogName);},canUndo:false,editorFocus:i||h.webkit};(function(){var V=/^([a]|[^a])+$/,W=/^\d*$/,X=/^\d*(?:\.\d+)?$/;g.VALIDATE_OR=1;g.VALIDATE_AND=2;g.dialog.validate={functions:function(){return function(){var ae=this;var Y=ae&&ae.getValue?ae.getValue():arguments[0],Z=undefined,aa=2,ab=[],ac;for(ac=0;ac<arguments.length;ac++){if(typeof arguments[ac]=='function')ab.push(arguments[ac]);else break;}if(ac<arguments.length&&typeof arguments[ac]=='string'){Z=arguments[ac];ac++;}if(ac<arguments.length&&typeof arguments[ac]=='number')aa=arguments[ac];var ad=aa==2?true:false;for(ac=0;ac<ab.length;ac++){if(aa==2)ad=ad&&ab[ac](Y);else ad=ad||ab[ac](Y);}if(!ad){if(Z!==undefined)alert(Z);if(ae&&(ae.select||ae.focus))ae.select||ae.focus();return false;}return true;};},regex:function(Y,Z){return function(){var ab=this;var aa=ab&&ab.getValue?ab.getValue():arguments[0];if(!Y.test(aa)){if(Z!==undefined)alert(Z);if(ab&&(ab.select||ab.focus))if(ab.select)ab.select();else ab.focus();return false;}return true;};},notEmpty:function(Y){return this.regex(V,Y);},integer:function(Y){return this.regex(W,Y);},number:function(Y){return this.regex(X,Y);},equals:function(Y,Z){return this.functions(function(aa){return aa==Y;},Z);},notEqual:function(Y,Z){return this.functions(function(aa){return aa!=Y;},Z);}};g.on('instanceDestroyed',function(Y){if(k.isEmpty(g.instances)){var Z;while(Z=g.dialog._.currentTop)Z.hide();L();}var aa=Y.editor._.storedDialogs;for(var ab in aa)aa[ab].destroy();});})();})();k.extend(g.editor.prototype,{openDialog:function(s,t){var u=g.dialog._.dialogDefinitions[s],v=this.skin.dialog;
if(typeof u=='function'&&v._isLoaded){var w=this._.storedDialogs||(this._.storedDialogs={}),x=w[s]||(w[s]=new g.dialog(this,s));t&&t.call(x,x);x.show();return x;}else if(u=='failed')throw new Error('[CKEDITOR.dialog.openDialog] Dialog "'+s+'" failed when loading definition.');var y=g.document.getBody(),z=y.$.style.cursor,A=this;y.setStyle('cursor','wait');function B(D){var E=g.dialog._.dialogDefinitions[s],F=A.skin.dialog;if(!F._isLoaded||C&&typeof D=='undefined')return;if(typeof E!='function')g.dialog._.dialogDefinitions[s]='failed';A.openDialog(s,t);y.setStyle('cursor',z);};if(typeof u=='string'){var C=1;g.scriptLoader.load(g.getUrl(u),B);}g.skins.load(this,'dialog',B);return null;}});p.add('dialog',{requires:['dialogui']});p.add('styles',{requires:['selection']});g.editor.prototype.attachStyleStateChange=function(s,t){var u=this._.styleStateChangeCallbacks;if(!u){u=this._.styleStateChangeCallbacks=[];this.on('selectionChange',function(v){for(var w=0;w<u.length;w++){var x=u[w],y=x.style.checkActive(v.data.path)?1:2;if(x.state!==y){x.fn.call(this,y);x.state=y;}}});}u.push({style:s,fn:t});};g.STYLE_BLOCK=1;g.STYLE_INLINE=2;g.STYLE_OBJECT=3;(function(){var s={address:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1},t={a:1,embed:1,hr:1,img:1,li:1,object:1,ol:1,table:1,td:1,tr:1,th:1,ul:1,dl:1,dt:1,dd:1,form:1},u=/\s*(?:;\s*|$)/;g.style=function(W,X){if(X){W=k.clone(W);O(W.attributes,X);O(W.styles,X);}var Y=this.element=(W.element||'*').toLowerCase();this.type=Y=='#'||s[Y]?1:t[Y]?3:2;this._={definition:W};};g.style.prototype={apply:function(W){V.call(this,W,false);},remove:function(W){V.call(this,W,true);},applyToRange:function(W){var X=this;return(X.applyToRange=X.type==2?v:X.type==1?z:X.type==3?x:null).call(X,W);},removeFromRange:function(W){var X=this;return(X.removeFromRange=X.type==2?w:X.type==3?y:null).call(X,W);},applyToObject:function(W){M(W,this);},checkActive:function(W){var aa=this;switch(aa.type){case 1:return aa.checkElementRemovable(W.block||W.blockLimit,true);case 3:case 2:var X=W.elements;for(var Y=0,Z;Y<X.length;Y++){Z=X[Y];if(aa.type==2&&(Z==W.block||Z==W.blockLimit))continue;if(aa.type==3&&!(Z.getName() in t))continue;if(aa.checkElementRemovable(Z,true))return true;}}return false;},checkApplicable:function(W){switch(this.type){case 2:case 1:break;case 3:return W.lastElement.getAscendant(this.element,true);}return true;},checkElementRemovable:function(W,X){if(!W)return false;var Y=this._.definition,Z;if(W.getName()==this.element){if(!X&&!W.hasAttributes())return true;
Z=P(Y);if(Z._length){for(var aa in Z){if(aa=='_length')continue;var ab=W.getAttribute(aa)||'';if(aa=='style'?U(Z[aa],S(ab,false)):Z[aa]==ab){if(!X)return true;}else if(X)return false;}if(X)return true;}else return true;}var ac=Q(this)[W.getName()];if(ac){if(!(Z=ac.attributes))return true;for(var ad=0;ad<Z.length;ad++){aa=Z[ad][0];var ae=W.getAttribute(aa);if(ae){var af=Z[ad][1];if(af===null||typeof af=='string'&&ae==af||af.test(ae))return true;}}}return false;},buildPreview:function(){var W=this._.definition,X=[],Y=W.element;if(Y=='bdo')Y='span';X=['<',Y];var Z=W.attributes;if(Z)for(var aa in Z)X.push(' ',aa,'="',Z[aa],'"');var ab=g.style.getStyleText(W);if(ab)X.push(' style="',ab,'"');X.push('>',W.name,'</',Y,'>');return X.join('');}};g.style.getStyleText=function(W){var X=W._ST;if(X)return X;X=W.styles;var Y=W.attributes&&W.attributes.style||'',Z='';if(Y.length)Y=Y.replace(u,';');for(var aa in X){var ab=X[aa],ac=(aa+':'+ab).replace(u,';');if(ab=='inherit')Z+=ac;else Y+=ac;}if(Y.length)Y=S(Y);Y+=Z;return W._ST=Y;};function v(W){var av=this;var X=W.document;if(W.collapsed){var Y=L(av,X);W.insertNode(Y);W.moveToPosition(Y,2);return;}var Z=av.element,aa=av._.definition,ab,ac=l[Z]||(ab=true,l.span);W.enlarge(1);W.trim();var ad=W.createBookmark(),ae=ad.startNode,af=ad.endNode,ag=ae,ah;while(ag){var ai=false;if(ag.equals(af)){ag=null;ai=true;}else{var aj=ag.type,ak=aj==1?ag.getName():null;if(ak&&ag.getAttribute('_cke_bookmark')){ag=ag.getNextSourceNode(true);continue;}if(!ak||ac[ak]&&(ag.getPosition(af)|4|0|8)==4+0+8&&(!aa.childRule||aa.childRule(ag))){var al=ag.getParent();if(al&&((al.getDtd()||l.span)[Z]||ab)&&(!aa.parentRule||aa.parentRule(al))){if(!ah&&(!ak||!l.$removeEmpty[ak]||(ag.getPosition(af)|4|0|8)==4+0+8)){ah=new j.range(X);ah.setStartBefore(ag);}if(aj==3||aj==1&&!ag.getChildCount()){var am=ag,an;while(!am.$.nextSibling&&(an=am.getParent(),ac[an.getName()])&&(an.getPosition(ae)|2|0|8)==2+0+8&&(!aa.childRule||aa.childRule(an)))am=an;ah.setEndAfter(am);if(!am.$.nextSibling)ai=true;}}else ai=true;}else ai=true;ag=ag.getNextSourceNode();}if(ai&&ah&&!ah.collapsed){var ao=L(av,X),ap=ao.hasAttributes(),aq=ah.getCommonAncestor(),ar={styles:{},attrs:{},blockedStyles:{},blockedAttrs:{}},as,at,au;while(ao&&aq){if(aq.getName()==Z){for(as in aa.attributes){if(ar.blockedAttrs[as]||!(au=aq.getAttribute(at)))continue;if(ao.getAttribute(as)==au)ar.attrs[as]=1;else ar.blockedAttrs[as]=1;}for(at in aa.styles){if(ar.blockedStyles[at]||!(au=aq.getStyle(at)))continue;if(ao.getStyle(at)==au)ar.styles[at]=1;
else ar.blockedStyles[at]=1;}}aq=aq.getParent();}for(as in ar.attrs)ao.removeAttribute(as);for(at in ar.styles)ao.removeStyle(at);if(ap&&!ao.hasAttributes())ao=null;if(ao){ah.extractContents().appendTo(ao);I(av,ao);ah.insertNode(ao);ao.mergeSiblings();if(!i)ao.$.normalize();}else{ao=new n('span');ah.extractContents().appendTo(ao);ah.insertNode(ao);I(av,ao);ao.remove(true);}ah=null;}}W.moveToBookmark(ad);W.shrink(2);};function w(W){W.enlarge(1);var X=W.createBookmark(),Y=X.startNode;if(W.collapsed){var Z=new j.elementPath(Y.getParent()),aa;for(var ab=0,ac;ab<Z.elements.length&&(ac=Z.elements[ab]);ab++){if(ac==Z.block||ac==Z.blockLimit)break;if(this.checkElementRemovable(ac)){var ad;if(W.collapsed&&(W.checkBoundaryOfElement(ac,2)||(ad=W.checkBoundaryOfElement(ac,1)))){aa=ac;aa.match=ad?'start':'end';}else{ac.mergeSiblings();H(this,ac);}}}if(aa){var ae=Y;for(ab=0;true;ab++){var af=Z.elements[ab];if(af.equals(aa))break;else if(af.match)continue;else af=af.clone();af.append(ae);ae=af;}ae[aa.match=='start'?'insertBefore':'insertAfter'](aa);}}else{var ag=X.endNode,ah=this;function ai(){var al=new j.elementPath(Y.getParent()),am=new j.elementPath(ag.getParent()),an=null,ao=null;for(var ap=0;ap<al.elements.length;ap++){var aq=al.elements[ap];if(aq==al.block||aq==al.blockLimit)break;if(ah.checkElementRemovable(aq))an=aq;}for(ap=0;ap<am.elements.length;ap++){aq=am.elements[ap];if(aq==am.block||aq==am.blockLimit)break;if(ah.checkElementRemovable(aq))ao=aq;}if(ao)ag.breakParent(ao);if(an)Y.breakParent(an);};ai();var aj=Y.getNext();while(!aj.equals(ag)){var ak=aj.getNextSourceNode();if(aj.type==1&&this.checkElementRemovable(aj)){if(aj.getName()==this.element)H(this,aj);else J(aj,Q(this)[aj.getName()]);if(ak.type==1&&ak.contains(Y)){ai();ak=Y.getNext();}}aj=ak;}}W.moveToBookmark(X);};function x(W){var X=W.getCommonAncestor(true,true),Y=X.getAscendant(this.element,true);Y&&M(Y,this);};function y(W){var X=W.getCommonAncestor(true,true),Y=X.getAscendant(this.element,true);if(!Y)return;var Z=this,aa=Z._.definition,ab=aa.attributes,ac=g.style.getStyleText(aa);if(ab)for(var ad in ab)Y.removeAttribute(ad,ab[ad]);if(aa.styles)for(var ae in aa.styles){if(!aa.styles.hasOwnProperty(ae))continue;Y.removeStyle(ae);}};function z(W){var X=W.createBookmark(true),Y=W.createIterator();Y.enforceRealBlocks=true;if(this._.enterMode)Y.enlargeBr=this._.enterMode!=2;var Z,aa=W.document,ab;while(Z=Y.getNextParagraph()){var ac=L(this,aa,Z);A(Z,ac);}W.moveToBookmark(X);};function A(W,X){var Y=X.is('pre'),Z=W.is('pre'),aa=Y&&!Z,ab=!Y&&Z;
if(aa)X=G(W,X);else if(ab)X=F(D(W),X);else W.moveChildren(X);X.replace(W);if(Y)C(X);};var B=j.walker.whitespaces(true);function C(W){var X;if(!((X=W.getPrevious(B))&&X.is&&X.is('pre')))return;var Y=E(X.getHtml(),/\n$/,'')+'\n\n'+E(W.getHtml(),/^\n/,'');if(i)W.$.outerHTML='<pre>'+Y+'</pre>';else W.setHtml(Y);X.remove();};function D(W){var X=/(\S\s*)\n(?:\s|(<span[^>]+_cke_bookmark.*?\/span>))*\n(?!$)/gi,Y=W.getName(),Z=E(W.getOuterHtml(),X,function(ab,ac,ad){return ac+'</pre>'+ad+'<pre>';}),aa=[];Z.replace(/<pre\b.*?>([\s\S]*?)<\/pre>/gi,function(ab,ac){aa.push(ac);});return aa;};function E(W,X,Y){var Z='',aa='';W=W.replace(/(^<span[^>]+_cke_bookmark.*?\/span>)|(<span[^>]+_cke_bookmark.*?\/span>$)/gi,function(ab,ac,ad){ac&&(Z=ac);ad&&(aa=ad);return '';});return Z+W.replace(X,Y)+aa;};function F(W,X){var Y=new j.documentFragment(X.getDocument());for(var Z=0;Z<W.length;Z++){var aa=W[Z];aa=aa.replace(/(\r\n|\r)/g,'\n');aa=E(aa,/^[ \t]*\n/,'');aa=E(aa,/\n$/,'');aa=E(aa,/^[ \t]+|[ \t]+$/g,function(ac,ad,ae){if(ac.length==1)return '&nbsp;';else if(!ad)return k.repeat('&nbsp;',ac.length-1)+' ';else return ' '+k.repeat('&nbsp;',ac.length-1);});aa=aa.replace(/\n/g,'<br>');aa=aa.replace(/[ \t]{2,}/g,function(ac){return k.repeat('&nbsp;',ac.length-1)+' ';});var ab=X.clone();ab.setHtml(aa);Y.append(ab);}return Y;};function G(W,X){var Y=W.getHtml();Y=E(Y,/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,'');Y=Y.replace(/[ \t\r\n]*(<br[^>]*>)[ \t\r\n]*/gi,'$1');Y=Y.replace(/([ \t\n\r]+|&nbsp;)/g,' ');Y=Y.replace(/<br\b[^>]*>/gi,'\n');if(i){var Z=W.getDocument().createElement('div');Z.append(X);X.$.outerHTML='<pre>'+Y+'</pre>';X=Z.getFirst().remove();}else X.setHtml(Y);return X;};function H(W,X){var Y=W._.definition,Z=k.extend({},Y.attributes,Q(W)[X.getName()]),aa=Y.styles,ab=k.isEmpty(Z)&&k.isEmpty(aa);for(var ac in Z){if((ac=='class'||W._.definition.fullMatch)&&X.getAttribute(ac)!=R(ac,Z[ac]))continue;ab=X.hasAttribute(ac);X.removeAttribute(ac);}for(var ad in aa){if(W._.definition.fullMatch&&X.getStyle(ad)!=R(ad,aa[ad],true))continue;ab=ab||!!X.getStyle(ad);X.removeStyle(ad);}ab&&K(X);};function I(W,X){var Y=W._.definition,Z=Y.attributes,aa=Y.styles,ab=Q(W),ac=X.getElementsByTag(W.element);for(var ad=ac.count();--ad>=0;)H(W,ac.getItem(ad));for(var ae in ab){if(ae!=W.element){ac=X.getElementsByTag(ae);for(ad=ac.count()-1;ad>=0;ad--){var af=ac.getItem(ad);J(af,ab[ae]);}}}};function J(W,X){var Y=X&&X.attributes;if(Y)for(var Z=0;Z<Y.length;Z++){var aa=Y[Z][0],ab;if(ab=W.getAttribute(aa)){var ac=Y[Z][1];
if(ac===null||ac.test&&ac.test(ab)||typeof ac=='string'&&ab==ac)W.removeAttribute(aa);}}K(W);};function K(W){if(!W.hasAttributes()){var X=W.getFirst(),Y=W.getLast();W.remove(true);if(X){X.type==1&&X.mergeSiblings();if(Y&&!X.equals(Y)&&Y.type==1)Y.mergeSiblings();}}};function L(W,X,Y){var Z,aa=W._.definition,ab=W.element;if(ab=='*')ab='span';Z=new n(ab,X);if(Y)Y.copyAttributes(Z);return M(Z,W);};function M(W,X){var Y=X._.definition,Z=Y.attributes,aa=g.style.getStyleText(Y);if(Z)for(var ab in Z)W.setAttribute(ab,Z[ab]);if(aa)W.setAttribute('style',aa);return W;};var N=/#\((.+?)\)/g;function O(W,X){for(var Y in W)W[Y]=W[Y].replace(N,function(Z,aa){return X[aa];});};function P(W){var X=W._AC;if(X)return X;X={};var Y=0,Z=W.attributes;if(Z)for(var aa in Z){Y++;X[aa]=Z[aa];}var ab=g.style.getStyleText(W);if(ab){if(!X.style)Y++;X.style=ab;}X._length=Y;return W._AC=X;};function Q(W){if(W._.overrides)return W._.overrides;var X=W._.overrides={},Y=W._.definition.overrides;if(Y){if(!k.isArray(Y))Y=[Y];for(var Z=0;Z<Y.length;Z++){var aa=Y[Z],ab,ac,ad;if(typeof aa=='string')ab=aa.toLowerCase();else{ab=aa.element?aa.element.toLowerCase():W.element;ad=aa.attributes;}ac=X[ab]||(X[ab]={});if(ad){var ae=ac.attributes=ac.attributes||[];for(var af in ad)ae.push([af.toLowerCase(),ad[af]]);}}}return X;};function R(W,X,Y){var Z=new n('span');Z[Y?'setStyle':'setAttribute'](W,X);return Z[Y?'getStyle':'getAttribute'](W);};function S(W,X){var Y;if(X!==false){var Z=new n('span');Z.setAttribute('style',W);Y=Z.getAttribute('style')||'';}else Y=W;return Y.replace(/\s*([;:])\s*/,'$1').replace(/([^\s;])$/,'$1;').replace(/,\s+/g,',').replace(/\"/g,'').toLowerCase();};function T(W){var X={};W.replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(Y,Z,aa){X[Z]=aa;});return X;};function U(W,X){typeof W=='string'&&(W=T(W));typeof X=='string'&&(X=T(X));for(var Y in W){if(!(Y in X&&(X[Y]==W[Y]||W[Y]=='inherit'||X[Y]=='inherit')))return false;}return true;};function V(W,X){var Y=W.getSelection(),Z=Y.createBookmarks(1),aa=Y.getRanges(1),ab=X?this.removeFromRange:this.applyToRange,ac,ad=aa.createIterator();while(ac=ad.getNextRange())ab.call(this,ac);if(Z.length==1&&Z[0].collapsed){Y.selectRanges(aa);W.getById(Z[0].startNode).remove();}else Y.selectBookmarks(Z);};})();g.styleCommand=function(s){this.style=s;};g.styleCommand.prototype.exec=function(s){var u=this;s.focus();var t=s.document;if(t)if(u.state==2)u.style.apply(t);else if(u.state==1)u.style.remove(t);return!!t;};g.stylesSet=new g.resourceManager('','stylesSet');
g.addStylesSet=k.bind(g.stylesSet.add,g.stylesSet);g.loadStylesSet=function(s,t,u){g.stylesSet.addExternal(s,t,'');g.stylesSet.load(s,u);};g.editor.prototype.getStylesSet=function(s){if(!this._.stylesDefinitions){var t=this,u=t.config.stylesCombo_stylesSet||t.config.stylesSet||'default';if(u instanceof Array){t._.stylesDefinitions=u;s(u);return;}var v=u.split(':'),w=v[0],x=v[1],y=p.registered.styles.path;g.stylesSet.addExternal(w,x?v.slice(1).join(':'):y+'styles/'+w+'.js','');g.stylesSet.load(w,function(z){t._.stylesDefinitions=z[w];s(t._.stylesDefinitions);});}else s(this._.stylesDefinitions);};p.add('domiterator');(function(){function s(v){var w=this;if(arguments.length<1)return;w.range=v;w.forceBrBreak=0;w.enlargeBr=1;w.enforceRealBlocks=0;w._||(w._={});};var t=/^[\r\n\t ]+$/,u=j.walker.bookmark();s.prototype={getNextParagraph:function(v){var w,x,y,z,A,B;if(!this._.lastNode){x=this.range.clone();x.shrink(1,true);z=x.endContainer.hasAscendant('pre',true)||x.startContainer.hasAscendant('pre',true);x.enlarge(this.forceBrBreak&&!z||!this.enlargeBr?3:2);var C=new j.walker(x),D=j.walker.bookmark(true,true);C.evaluator=D;this._.nextNode=C.next();C=new j.walker(x);C.evaluator=D;var E=C.previous();this._.lastNode=E.getNextSourceNode(true);if(this._.lastNode&&this._.lastNode.type==3&&!k.trim(this._.lastNode.getText())&&this._.lastNode.getParent().isBlockBoundary()){var F=new j.range(x.document);F.moveToPosition(this._.lastNode,4);if(F.checkEndOfBlock()){var G=new j.elementPath(F.endContainer),H=G.block||G.blockLimit;this._.lastNode=H.getNextSourceNode(true);}}if(!this._.lastNode){this._.lastNode=this._.docEndMarker=x.document.createText('');this._.lastNode.insertAfter(E);}x=null;}var I=this._.nextNode;E=this._.lastNode;this._.nextNode=null;while(I){var J=0,K=I.hasAscendant('pre'),L=I.type!=1,M=0;if(!L){var N=I.getName();if(I.isBlockBoundary(this.forceBrBreak&&!K&&{br:1})){if(N=='br')L=1;else if(!x&&!I.getChildCount()&&N!='hr'){w=I;y=I.equals(E);break;}if(x){x.setEndAt(I,3);if(N!='br')this._.nextNode=I;}J=1;}else{if(I.getFirst()){if(!x){x=new j.range(this.range.document);x.setStartAt(I,3);}I=I.getFirst();continue;}L=1;}}else if(I.type==3)if(t.test(I.getText()))L=0;if(L&&!x){x=new j.range(this.range.document);x.setStartAt(I,3);}y=(!J||L)&&I.equals(E);if(x&&!J)while(!I.getNext()&&!y){var O=I.getParent();if(O.isBlockBoundary(this.forceBrBreak&&!K&&{br:1})){J=1;y=y||O.equals(E);break;}I=O;L=1;y=I.equals(E);M=1;}if(L)x.setEndAt(I,4);I=I.getNextSourceNode(M,null,E);y=!I;
if(y||J&&x)break;}if(!w){if(!x){this._.docEndMarker&&this._.docEndMarker.remove();this._.nextNode=null;return null;}var P=new j.elementPath(x.startContainer),Q=P.blockLimit,R={div:1,th:1,td:1};w=P.block;if(!w&&!this.enforceRealBlocks&&R[Q.getName()]&&x.checkStartOfBlock()&&x.checkEndOfBlock())w=Q;else if(!w||this.enforceRealBlocks&&w.getName()=='li'){w=this.range.document.createElement(v||'p');x.extractContents().appendTo(w);w.trim();x.insertNode(w);A=B=true;}else if(w.getName()!='li'){if(!x.checkStartOfBlock()||!x.checkEndOfBlock()){w=w.clone(false);x.extractContents().appendTo(w);w.trim();var S=x.splitBlock();A=!S.wasStartOfBlock;B=!S.wasEndOfBlock;x.insertNode(w);}}else if(!y)this._.nextNode=w.equals(E)?null:x.getBoundaryNodes().endNode.getNextSourceNode(true,null,E);}var T=j.walker.bookmark(false,true);if(A){var U=w.getPrevious();if(U&&U.type==1)if(U.getName()=='br')U.remove();else if(U.getLast()&&U.getLast().$.nodeName.toLowerCase()=='br')U.getLast().remove();}if(B){var V=w.getLast();if(V&&V.type==1&&V.getName()=='br')if(i||V.getPrevious(T)||V.getNext(T))V.remove();}if(!this._.nextNode)this._.nextNode=y||w.equals(E)?null:w.getNextSourceNode(true,null,E);if(!T(this._.nextNode))this._.nextNode=this._.nextNode.getNextSourceNode(true,null,function(W){return!W.equals(E)&&T(W);});return w;}};j.range.prototype.createIterator=function(){return new s(this);};})();p.add('panelbutton',{requires:['button'],beforeInit:function(s){s.ui.addHandler(4,q.panelButton.handler);}});g.UI_PANELBUTTON=4;(function(){var s=function(t){var v=this;var u=v._;if(u.state==0)return;v.createPanel(t);if(u.on){u.panel.hide();return;}u.panel.showBlock(v._.id,v.document.getById(v._.id),4);};q.panelButton=k.createClass({base:q.button,$:function(t){var v=this;var u=t.panel;delete t.panel;v.base(t);v.document=u&&u.parent&&u.parent.getDocument()||g.document;u.block={attributes:u.attributes};v.hasArrow=true;v.click=s;v._={panelDefinition:u};},statics:{handler:{create:function(t){return new q.panelButton(t);}}},proto:{createPanel:function(t){var u=this._;if(u.panel)return;var v=this._.panelDefinition||{},w=this._.panelDefinition.block,x=v.parent||g.document.getBody(),y=this._.panel=new q.floatPanel(t,x,v),z=y.addBlock(u.id,w),A=this;y.onShow=function(){if(A.className)this.element.getFirst().addClass(A.className+'_panel');u.oldState=A._.state;A.setState(1);u.on=1;if(A.onOpen)A.onOpen();};y.onHide=function(B){if(A.className)this.element.getFirst().removeClass(A.className+'_panel');A.setState(u.oldState);
u.on=0;if(!B&&A.onClose)A.onClose();};y.onEscape=function(){y.hide();A.document.getById(u.id).focus();};if(this.onBlock)this.onBlock(y,z);z.onHide=function(){u.on=0;A.setState(2);};}}});})();p.add('floatpanel',{requires:['panel']});(function(){var s={},t=false;function u(v,w,x,y,z){var A=k.genKey(w.getUniqueId(),x.getUniqueId(),v.skinName,v.lang.dir,v.uiColor||'',y.css||'',z||''),B=s[A];if(!B){B=s[A]=new q.panel(w,y);B.element=x.append(n.createFromHtml(B.renderHtml(v),w));B.element.setStyles({display:'none',position:'absolute'});}return B;};q.floatPanel=k.createClass({$:function(v,w,x,y){x.forceIFrame=1;var z=w.getDocument(),A=u(v,z,w,x,y||0),B=A.element,C=B.getFirst().getFirst();this.element=B;this._={panel:A,parentElement:w,definition:x,document:z,iframe:C,children:[],dir:v.lang.dir};},proto:{addBlock:function(v,w){return this._.panel.addBlock(v,w);},addListBlock:function(v,w){return this._.panel.addListBlock(v,w);},getBlock:function(v){return this._.panel.getBlock(v);},showBlock:function(v,w,x,y,z){var A=this._.panel,B=A.showBlock(v);this.allowBlur(false);t=1;var C=this.element,D=this._.iframe,E=this._.definition,F=w.getDocumentPosition(C.getDocument()),G=this._.dir=='rtl',H=F.x+(y||0),I=F.y+(z||0);if(G&&(x==1||x==4))H+=w.$.offsetWidth;else if(!G&&(x==2||x==3))H+=w.$.offsetWidth-1;if(x==3||x==4)I+=w.$.offsetHeight-1;this._.panel._.offsetParentId=w.getId();C.setStyles({top:0,left:0,display:''});C.setOpacity(0);C.getFirst().removeStyle('width');if(!this._.blurSet){var J=i?D:new j.window(D.$.contentWindow);g.event.useCapture=true;J.on('blur',function(K){var M=this;if(!M.allowBlur())return;var L;if(i&&!M.allowBlur()||(L=K.data.getTarget())&&L.getName&&L.getName()!='iframe')return;if(M.visible&&!M._.activeChild&&!t)M.hide();},this);J.on('focus',function(){this._.focused=true;this.hideChild();this.allowBlur(true);},this);g.event.useCapture=false;this._.blurSet=1;}A.onEscape=k.bind(function(K){if(this.onEscape&&this.onEscape(K)===false)return false;},this);k.setTimeout(function(){if(G)H-=C.$.offsetWidth;var K=k.bind(function(){var L=C.getFirst();if(B.autoSize){var M=B.element.$;if(h.gecko||h.opera)M=M.parentNode;if(i)M=M.document.body;var N=M.scrollWidth;if(i&&h.quirks&&N>0)N+=(L.$.offsetWidth||0)-(L.$.clientWidth||0);N+=4;L.setStyle('width',N+'px');B.element.addClass('cke_frameLoaded');var O=B.element.$.scrollHeight;if(i&&h.quirks&&O>0)O+=(L.$.offsetHeight||0)-(L.$.clientHeight||0);L.setStyle('height',O+'px');A._.currentBlock.element.setStyle('display','none').removeStyle('display');
}else L.removeStyle('height');var P=A.element,Q=P.getWindow(),R=Q.getScrollPosition(),S=Q.getViewPaneSize(),T={height:P.$.offsetHeight,width:P.$.offsetWidth};if(G?H<0:H+T.width>S.width+R.x)H+=T.width*(G?1:-1);if(I+T.height>S.height+R.y)I-=T.height;if(i){var U=new n(C.$.offsetParent),V=U;if(V.getName()=='html')V=V.getDocument().getBody();if(V.getComputedStyle('direction')=='rtl')if(h.ie8Compat)H-=C.getDocument().getDocumentElement().$.scrollLeft*2;else H-=U.$.scrollWidth-U.$.clientWidth;}var W=C.getFirst(),X;if(X=W.getCustomData('activePanel'))X.onHide&&X.onHide.call(this,1);W.setCustomData('activePanel',this);C.setStyles({top:I+'px',left:H+'px'});C.setOpacity(1);},this);A.isLoaded?K():A.onLoad=K;k.setTimeout(function(){D.$.contentWindow.focus();this.allowBlur(true);},0,this);},0,this);this.visible=1;if(this.onShow)this.onShow.call(this);t=0;},hide:function(){var v=this;if(v.visible&&(!v.onHide||v.onHide.call(v)!==true)){v.hideChild();v.element.setStyle('display','none');v.visible=0;v.element.getFirst().removeCustomData('activePanel');}},allowBlur:function(v){var w=this._.panel;if(v!=undefined)w.allowBlur=v;return w.allowBlur;},showAsChild:function(v,w,x,y,z,A){if(this._.activeChild==v&&v._.panel._.offsetParentId==x.getId())return;this.hideChild();v.onHide=k.bind(function(){k.setTimeout(function(){if(!this._.focused)this.hide();},0,this);},this);this._.activeChild=v;this._.focused=false;v.showBlock(w,x,y,z,A);if(h.ie7Compat||h.ie8&&h.ie6Compat)setTimeout(function(){v.element.getChild(0).$.style.cssText+='';},100);},hideChild:function(){var v=this._.activeChild;if(v){delete v.onHide;delete this._.activeChild;v.hide();}}}});g.on('instanceDestroyed',function(){var v=k.isEmpty(g.instances);for(var w in s){var x=s[w];if(v)x.destroy();else x.element.hide();}v&&(s={});});})();p.add('menu',{beforeInit:function(s){var t=s.config.menu_groups.split(','),u=s._.menuGroups={},v=s._.menuItems={};for(var w=0;w<t.length;w++)u[t[w]]=w+1;s.addMenuGroup=function(x,y){u[x]=y||100;};s.addMenuItem=function(x,y){if(u[y.group])v[x]=new g.menuItem(this,x,y);};s.addMenuItems=function(x){for(var y in x)this.addMenuItem(y,x[y]);};s.getMenuItem=function(x){return v[x];};},requires:['floatpanel']});(function(){g.menu=k.createClass({$:function(t,u){var x=this;u=x._.definition=u||{};x.id='cke_'+k.getNextNumber();x.editor=t;x.items=[];x._.level=u.level||1;var v=k.extend({},u.panel,{css:t.skin.editor.css,level:x._.level-1,block:{}}),w=v.block.attributes=v.attributes||{};!w.role&&(w.role='menu');
x._.panelDefinition=v;},_:{showSubMenu:function(t){var B=this;var u=B._.subMenu,v=B.items[t],w=v.getItems&&v.getItems();if(!w){B._.panel.hideChild();return;}var x=B._.panel.getBlock(B.id);x._.focusIndex=t;if(u)u.removeAll();else{u=B._.subMenu=new g.menu(B.editor,k.extend({},B._.definition,{level:B._.level+1},true));u.parent=B;u.onClick=k.bind(B.onClick,B);u.onEscape=B.onEscape;}for(var y in w){var z=B.editor.getMenuItem(y);if(z){z.state=w[y];u.add(z);}}var A=B._.panel.getBlock(B.id).element.getDocument().getById(B.id+String(t));u.show(A,2);}},proto:{add:function(t){if(!t.order)t.order=this.items.length;this.items.push(t);},removeAll:function(){this.items=[];},show:function(t,u,v,w){var x=this.items,y=this.editor,z=this._.panel,A=this._.element;if(!z){z=this._.panel=new q.floatPanel(this.editor,g.document.getBody(),this._.panelDefinition,this._.level);z.onEscape=k.bind(function(L){if(this.onEscape&&this.onEscape(L)===false)return false;},this);z.onHide=k.bind(function(){this.onHide&&this.onHide();},this);var B=z.addBlock(this.id,this._.panelDefinition.block);B.autoSize=true;var C=B.keys;C[40]='next';C[9]='next';C[38]='prev';C[2000+9]='prev';C[32]='click';C[y.lang.dir=='rtl'?37:39]='click';A=this._.element=B.element;A.addClass(y.skinClass);var D=A.getDocument();D.getBody().setStyle('overflow','hidden');D.getElementsByTag('html').getItem(0).setStyle('overflow','hidden');this._.itemOverFn=k.addFunction(function(L){var M=this;clearTimeout(M._.showSubTimeout);M._.showSubTimeout=k.setTimeout(M._.showSubMenu,y.config.menu_subMenuDelay||400,M,[L]);},this);this._.itemOutFn=k.addFunction(function(L){clearTimeout(this._.showSubTimeout);},this);this._.itemClickFn=k.addFunction(function(L){var N=this;var M=N.items[L];if(M.state==0){N.hide();return;}if(M.getItems)N._.showSubMenu(L);else N.onClick&&N.onClick(M);},this);}s(x);var E=y.container.getChild(1),F=E.hasClass('cke_mixed_dir_content')?' cke_mixed_dir_content':'',G=['<div class="cke_menu'+F+'" role="presentation">'],H=x.length,I=H&&x[0].group;for(var J=0;J<H;J++){var K=x[J];if(I!=K.group){G.push('<div class="cke_menuseparator" role="separator"></div>');I=K.group;}K.render(this,J,G);}G.push('</div>');A.setHtml(G.join(''));if(this.parent)this.parent._.panel.showAsChild(z,this.id,t,u,v,w);else z.showBlock(this.id,t,u,v,w);y.fire('menuShow',[z]);},hide:function(){this._.panel&&this._.panel.hide();}}});function s(t){t.sort(function(u,v){if(u.group<v.group)return-1;else if(u.group>v.group)return 1;return u.order<v.order?-1:u.order>v.order?1:0;
});};})();g.menuItem=k.createClass({$:function(s,t,u){var v=this;k.extend(v,u,{order:0,className:'cke_button_'+t});v.group=s._.menuGroups[v.group];v.editor=s;v.name=t;},proto:{render:function(s,t,u){var B=this;var v=s.id+String(t),w=typeof B.state=='undefined'?2:B.state,x=' cke_'+(w==1?'on':w==0?'disabled':'off'),y=B.label;if(B.className)x+=' '+B.className;var z=B.getItems;u.push('<span class="cke_menuitem"><a id="',v,'" class="',x,'" href="javascript:void(\'',(B.label||'').replace("'",''),'\')" title="',B.label,'" tabindex="-1"_cke_focus=1 hidefocus="true" role="menuitem"'+(z?'aria-haspopup="true"':'')+(w==0?'aria-disabled="true"':'')+(w==1?'aria-pressed="true"':''));if(h.opera||h.gecko&&h.mac)u.push(' onkeypress="return false;"');if(h.gecko)u.push(' onblur="this.style.cssText = this.style.cssText;"');var A=(B.iconOffset||0)*-16;u.push(' onmouseover="CKEDITOR.tools.callFunction(',s._.itemOverFn,',',t,');" onmouseout="CKEDITOR.tools.callFunction(',s._.itemOutFn,',',t,');" onclick="CKEDITOR.tools.callFunction(',s._.itemClickFn,',',t,'); return false;"><span class="cke_icon_wrapper"><span class="cke_icon"'+(B.icon?' style="background-image:url('+g.getUrl(B.icon)+');background-position:0 '+A+'px;"':'')+'></span></span>'+'<span class="cke_label">');if(z)u.push('<span class="cke_menuarrow">','<span>&#',B.editor.lang.dir=='rtl'?'9668':'9658',';</span>','</span>');u.push(y,'</span></a></span>');}}});o.menu_groups='clipboard,form,tablecell,tablecellproperties,tablerow,tablecolumn,table,anchor,link,image,flash,checkbox,radio,textfield,hiddenfield,imagebutton,button,select,textarea,div';(function(){var s=function(u,v){return u._.modes&&u._.modes[v||u.mode];},t;p.add('editingblock',{init:function(u){if(!u.config.editingBlock)return;u.on('themeSpace',function(v){if(v.data.space=='contents')v.data.html+='<br>';});u.on('themeLoaded',function(){u.fireOnce('editingBlockReady');});u.on('uiReady',function(){u.setMode(u.config.startupMode);});u.on('afterSetData',function(){if(!t){function v(){t=true;s(u).loadData(u.getData());t=false;};if(u.mode)v();else u.on('mode',function(){v();u.removeListener('mode',arguments.callee);});}});u.on('beforeGetData',function(){if(!t&&u.mode){t=true;u.setData(s(u).getData());t=false;}});u.on('getSnapshot',function(v){if(u.mode)v.data=s(u).getSnapshotData();});u.on('loadSnapshot',function(v){if(u.mode)s(u).loadSnapshotData(v.data);});u.on('mode',function(v){v.removeListener();h.webkit&&u.container.on('focus',function(){u.focus();});if(u.config.startupFocus)u.focus();
setTimeout(function(){u.fireOnce('instanceReady');g.fire('instanceReady',null,u);},0);});}});g.editor.prototype.mode='';g.editor.prototype.addMode=function(u,v){v.name=u;(this._.modes||(this._.modes={}))[u]=v;};g.editor.prototype.setMode=function(u){var v,w=this.getThemeSpace('contents'),x=this.checkDirty();if(this.mode){if(u==this.mode)return;this.fire('beforeModeUnload');var y=s(this);v=y.getData();y.unload(w);this.mode='';}w.setHtml('');var z=s(this,u);if(!z)throw '[CKEDITOR.editor.setMode] Unknown mode "'+u+'".';if(!x)this.on('mode',function(){this.resetDirty();this.removeListener('mode',arguments.callee);});z.load(w,typeof v!='string'?this.getData():v);};g.editor.prototype.focus=function(){var u=s(this);if(u)u.focus();};})();o.startupMode='wysiwyg';o.editingBlock=true;(function(){function s(){var C=this;try{var z=C.getSelection();if(!z||!z.document.getWindow().$)return;var A=z.getStartElement(),B=new j.elementPath(A);if(!B.compare(C._.selectionPreviousPath)){C._.selectionPreviousPath=B;C.fire('selectionChange',{selection:z,path:B,element:A});}}catch(D){}};var t,u;function v(){u=true;if(t)return;w.call(this);t=k.setTimeout(w,200,this);};function w(){t=null;if(u){k.setTimeout(s,0,this);u=false;}};var x={modes:{wysiwyg:1,source:1},exec:function(z){switch(z.mode){case 'wysiwyg':z.document.$.execCommand('SelectAll',false,null);break;case 'source':var A=z.textarea.$;if(i)A.createTextRange().execCommand('SelectAll');else{A.selectionStart=0;A.selectionEnd=A.value.length;}A.focus();}},canUndo:false};p.add('selection',{init:function(z){z.on('contentDom',function(){var A=z.document,B=A.getBody(),C=A.getDocumentElement();if(i){var D,E,F=1;B.on('focusin',function(J){if(J.data.$.srcElement.nodeName!='BODY')return;if(D){var K=A.getCustomData('cke_locked_selection');if(F&&!K)try{D.select();}catch(L){}D=null;}});B.on('focus',function(){E=1;I();});B.on('beforedeactivate',function(J){if(J.data.$.toElement)return;E=0;F=1;});if(i&&h.version<8)z.on('blur',function(J){try{z.document&&z.document.$.selection.empty();}catch(K){}});C.on('mousedown',function(){F=0;});C.on('mouseup',function(){F=1;});if(i&&(h.ie7Compat||h.version<8||h.quirks))C.on('click',function(J){if(J.data.getTarget().getName()=='html')z.getSelection().getRanges()[0].select();});var G;B.on('mousedown',function(J){if(J.data.$.button==2){var K=z.document.$.selection;if(K.type=='None')G=z.window.getScrollPosition();}H();});B.on('mouseup',function(J){if(J.data.$.button==2&&G){z.document.$.documentElement.scrollLeft=G.x;
z.document.$.documentElement.scrollTop=G.y;}G=null;E=1;setTimeout(function(){I(true);},0);});B.on('keydown',H);B.on('keyup',function(){E=1;I();});A.on('selectionchange',I);function H(){E=0;};function I(J){if(E){var K=z.document,L=z.getSelection(),M=L&&L.getNative();if(J&&M&&M.type=='None')if(!K.$.queryCommandEnabled('InsertImage')){k.setTimeout(I,50,this,true);return;}var N;if(M&&M.type&&M.type!='Control'&&(N=M.createRange())&&(N=N.parentElement())&&(N=N.nodeName)&&N.toLowerCase() in {input:1,textarea:1})return;D=M&&L.getRanges()[0];v.call(z);}};}else{A.on('mouseup',v,z);A.on('keyup',v,z);}});z.addCommand('selectAll',x);z.ui.addButton('SelectAll',{label:z.lang.selectAll,command:'selectAll'});z.selectionChange=v;}});g.editor.prototype.getSelection=function(){return this.document&&this.document.getSelection();};g.editor.prototype.forceNextSelectionCheck=function(){delete this._.selectionPreviousPath;};m.prototype.getSelection=function(){var z=new j.selection(this);return!z||z.isInvalid?null:z;};g.SELECTION_NONE=1;g.SELECTION_TEXT=2;g.SELECTION_ELEMENT=3;j.selection=function(z){var C=this;var A=z.getCustomData('cke_locked_selection');if(A)return A;C.document=z;C.isLocked=0;C._={cache:{}};if(i){var B=C.getNative().createRange();if(!B||B.item&&B.item(0).ownerDocument!=C.document.$||B.parentElement&&B.parentElement().ownerDocument!=C.document.$)C.isInvalid=true;}return C;};var y={img:1,hr:1,li:1,table:1,tr:1,td:1,th:1,embed:1,object:1,ol:1,ul:1,a:1,input:1,form:1,select:1,textarea:1,button:1,fieldset:1,th:1,thead:1,tfoot:1};j.selection.prototype={getNative:i?function(){return this._.cache.nativeSel||(this._.cache.nativeSel=this.document.$.selection);}:function(){return this._.cache.nativeSel||(this._.cache.nativeSel=this.document.getWindow().$.getSelection());},getType:i?function(){var z=this._.cache;if(z.type)return z.type;var A=1;try{var B=this.getNative(),C=B.type;if(C=='Text')A=2;if(C=='Control')A=3;if(B.createRange().parentElement)A=2;}catch(D){}return z.type=A;}:function(){var z=this._.cache;if(z.type)return z.type;var A=2,B=this.getNative();if(!B)A=1;else if(B.rangeCount==1){var C=B.getRangeAt(0),D=C.startContainer;if(D==C.endContainer&&D.nodeType==1&&C.endOffset-C.startOffset==1&&y[D.childNodes[C.startOffset].nodeName.toLowerCase()])A=3;}return z.type=A;},getRanges:(function(){var z=i?(function(){var A=function(B,C){B=B.duplicate();B.collapse(C);var D=B.parentElement(),E=D.childNodes,F;for(var G=0;G<E.length;G++){var H=E[G];if(H.nodeType==1){F=B.duplicate();
F.moveToElementText(H);var I=F.compareEndPoints('StartToStart',B),J=F.compareEndPoints('EndToStart',B);F.collapse();if(I>0)break;else if(!I||J==1&&I==-1)return{container:D,offset:G};else if(!J)return{container:D,offset:G+1};F=null;}}if(!F){F=B.duplicate();F.moveToElementText(D);F.collapse(false);}F.setEndPoint('StartToStart',B);var K=F.text.replace(/(\r\n|\r)/g,'\n').length;try{while(K>0)K-=E[--G].nodeValue.length;}catch(L){K=0;}if(K===0)return{container:D,offset:G};else return{container:E[G],offset:-K};};return function(){var L=this;var B=L.getNative(),C=B&&B.createRange(),D=L.getType(),E;if(!B)return[];if(D==2){E=new j.range(L.document);var F=A(C,true);E.setStart(new j.node(F.container),F.offset);F=A(C);E.setEnd(new j.node(F.container),F.offset);if(E.endContainer.getPosition(E.startContainer)&4&&E.endOffset<=E.startContainer.getIndex())E.collapse();return[E];}else if(D==3){var G=[];for(var H=0;H<C.length;H++){var I=C.item(H),J=I.parentNode,K=0;E=new j.range(L.document);for(;K<J.childNodes.length&&J.childNodes[K]!=I;K++){}E.setStart(new j.node(J),K);E.setEnd(new j.node(J),K+1);G.push(E);}return G;}return[];};})():function(){var A=[],B,C=this.document,D=this.getNative();if(!D)return A;if(!D.rangeCount){B=new j.range(C);B.moveToElementEditStart(C.getBody());A.push(B);}for(var E=0;E<D.rangeCount;E++){var F=D.getRangeAt(E);B=new j.range(C);B.setStart(new j.node(F.startContainer),F.startOffset);B.setEnd(new j.node(F.endContainer),F.endOffset);A.push(B);}return A;};return function(A){var B=this._.cache;if(B.ranges&&!A)return B.ranges;else if(!B.ranges)B.ranges=new j.rangeList(z.call(this));if(A){var C=B.ranges;for(var D=0;D<C.length;D++){var E=C[D],F=E.getCommonAncestor();if(F.isReadOnly())C.splice(D,1);if(E.collapsed)continue;var G=E.startContainer,H=E.endContainer,I=E.startOffset,J=E.endOffset,K=E.clone(),L;if(L=G.isReadOnly())E.setStartAfter(L);if(G&&G.type==3)if(I>=G.getLength())K.setStartAfter(G);else K.setStartBefore(G);if(H&&H.type==3)if(!J)K.setEndBefore(H);else K.setEndAfter(H);var M=new j.walker(K);M.evaluator=function(N){if(N.type==1&&N.getAttribute('contenteditable')=='false'){var O=E.clone();E.setEndBefore(N);if(E.collapsed)C.splice(D--,1);if(!(N.getPosition(K.endContainer)&16)){O.setStartAfter(N);if(!O.collapsed)C.splice(D+1,0,O);}return true;}return false;};M.next();}}return B.ranges;};})(),getStartElement:function(){var G=this;var z=G._.cache;if(z.startElement!==undefined)return z.startElement;var A,B=G.getNative();switch(G.getType()){case 3:return G.getSelectedElement();
case 2:var C=G.getRanges()[0];if(C){if(!C.collapsed){C.optimize();while(1){var D=C.startContainer,E=C.startOffset;if(E==(D.getChildCount?D.getChildCount():D.getLength())&&!D.isBlockBoundary())C.setStartAfter(D);else break;}A=C.startContainer;if(A.type!=1)return A.getParent();A=A.getChild(C.startOffset);if(!A||A.type!=1)A=C.startContainer;else{var F=A.getFirst();while(F&&F.type==1){A=F;F=F.getFirst();}}}else{A=C.startContainer;if(A.type!=1)A=A.getParent();}A=A.$;}}return z.startElement=A?new n(A):null;},getSelectedElement:function(){var z=this._.cache;if(z.selectedElement!==undefined)return z.selectedElement;var A=this,B=k.tryThese(function(){return A.getNative().createRange().item(0);},function(){var C=A.getRanges()[0],D,E;for(var F=2;F&&!((D=C.getEnclosedNode())&&D.type==1&&y[D.getName()]&&(E=D));F--)C.shrink(1);return E.$;});return z.selectedElement=B?new n(B):null;},lock:function(){var z=this;z.getRanges();z.getStartElement();z.getSelectedElement();z._.cache.nativeSel={};z.isLocked=1;z.document.setCustomData('cke_locked_selection',z);},unlock:function(z){var E=this;var A=E.document,B=A.getCustomData('cke_locked_selection');if(B){A.setCustomData('cke_locked_selection',null);if(z){var C=B.getSelectedElement(),D=!C&&B.getRanges();E.isLocked=0;E.reset();A.getBody().focus();if(C)E.selectElement(C);else E.selectRanges(D);}}if(!B||!z){E.isLocked=0;E.reset();}},reset:function(){this._.cache={};},selectElement:function(z){var C=this;if(C.isLocked){var A=new j.range(C.document);A.setStartBefore(z);A.setEndAfter(z);C._.cache.selectedElement=z;C._.cache.startElement=z;C._.cache.ranges=new j.rangeList(A);C._.cache.type=3;return;}if(i){C.getNative().empty();try{A=C.document.$.body.createControlRange();A.addElement(z.$);A.select();}catch(D){A=C.document.$.body.createTextRange();A.moveToElementText(z.$);A.select();}finally{C.document.fire('selectionchange');}C.reset();}else{A=C.document.$.createRange();A.selectNode(z.$);var B=C.getNative();B.removeAllRanges();B.addRange(A);C.reset();}},selectRanges:function(z){var J=this;if(J.isLocked){J._.cache.selectedElement=null;J._.cache.startElement=z[0]&&z[0].getTouchedStartNode();J._.cache.ranges=new j.rangeList(z);J._.cache.type=2;return;}if(i){if(z.length>1){var A=z[z.length-1];z[0].setEnd(A.endContainer,A.endOffset);z.length=1;}if(z[0])z[0].select();J.reset();}else{var B=J.getNative();if(z.length)B.removeAllRanges();for(var C=0;C<z.length;C++){if(C<z.length-1){var D=z[C],E=z[C+1],F=D.clone();F.setStart(D.endContainer,D.endOffset);
F.setEnd(E.startContainer,E.startOffset);if(!F.collapsed){F.shrink(1,true);if(F.getCommonAncestor().isReadOnly()){E.setStart(D.startContainer,D.startOffset);z.splice(C--,1);continue;}}}var G=z[C],H=J.document.$.createRange(),I=G.startContainer;if(G.collapsed&&(h.opera||h.gecko&&h.version<10900)&&I.type==1&&!I.getChildCount())I.appendText('');H.setStart(I.$,G.startOffset);H.setEnd(G.endContainer.$,G.endOffset);B.addRange(H);}J.reset();}},createBookmarks:function(z){return this.getRanges().createBookmarks(z);},createBookmarks2:function(z){return this.getRanges().createBookmarks2(z);},selectBookmarks:function(z){var A=[];for(var B=0;B<z.length;B++){var C=new j.range(this.document);C.moveToBookmark(z[B]);A.push(C);}this.selectRanges(A);return this;},getCommonAncestor:function(){var z=this.getRanges(),A=z[0].startContainer,B=z[z.length-1].endContainer;return A.getCommonAncestor(B);},scrollIntoView:function(){var z=this.getStartElement();z.scrollIntoView();}};})();(function(){var s=j.walker.whitespaces(true),t=/\ufeff|\u00a0/,u={table:1,tbody:1,tr:1};j.range.prototype.select=i?function(v){var F=this;var w=F.collapsed,x,y;if(F.startContainer.type==1&&F.startContainer.getName() in u||F.endContainer.type==1&&F.endContainer.getName() in u)F.shrink(1,true);var z=F.createBookmark(),A=z.startNode,B;if(!w)B=z.endNode;var C=F.document.$.body.createTextRange();C.moveToElementText(A.$);C.moveStart('character',1);if(B){var D=F.document.$.body.createTextRange();D.moveToElementText(B.$);C.setEndPoint('EndToEnd',D);C.moveEnd('character',-1);}else{var E=A.getNext(s);x=!(E&&E.getText&&E.getText().match(t))&&(v||!A.hasPrevious()||A.getPrevious().is&&A.getPrevious().is('br'));y=F.document.createElement('span');y.setHtml('&#65279;');y.insertBefore(A);if(x)F.document.createText('\ufeff').insertBefore(A);}F.setStartBefore(A);A.remove();if(w){if(x){C.moveStart('character',-1);C.select();F.document.$.selection.clear();}else C.select();F.moveToPosition(y,3);y.remove();}else{F.setEndBefore(B);B.remove();C.select();}F.document.fire('selectionchange');}:function(){var y=this;var v=y.startContainer;if(y.collapsed&&v.type==1&&!v.getChildCount())v.append(new j.text(''));var w=y.document.$.createRange();w.setStart(v.$,y.startOffset);try{w.setEnd(y.endContainer.$,y.endOffset);}catch(z){if(z.toString().indexOf('NS_ERROR_ILLEGAL_VALUE')>=0){y.collapse(true);w.setEnd(y.endContainer.$,y.endOffset);}else throw z;}var x=y.document.getSelection().getNative();x.removeAllRanges();x.addRange(w);};})();(function(){var s={elements:{$:function(t){var u=t.attributes,v=u&&u._cke_realelement,w=v&&new g.htmlParser.fragment.fromHtml(decodeURIComponent(v)),x=w&&w.children[0];
if(x&&t.attributes._cke_resizable){var y=t.attributes.style;if(y){var z=/(?:^|\s)width\s*:\s*(\d+)/i.exec(y),A=z&&z[1];z=/(?:^|\s)height\s*:\s*(\d+)/i.exec(y);var B=z&&z[1];if(A)x.attributes.width=A;if(B)x.attributes.height=B;}}return x;}}};p.add('fakeobjects',{requires:['htmlwriter'],afterInit:function(t){var u=t.dataProcessor,v=u&&u.htmlFilter;if(v)v.addRules(s);}});})();g.editor.prototype.createFakeElement=function(s,t,u,v){var w=this.lang.fakeobjects,x={'class':t,src:g.getUrl('images/spacer.gif'),_cke_realelement:encodeURIComponent(s.getOuterHtml()),_cke_real_node_type:s.type,alt:w[u]||w.unknown,align:s.getAttribute('align')||''};if(u)x._cke_real_element_type=u;if(v)x._cke_resizable=v;return this.document.createElement('img',{attributes:x});};g.editor.prototype.createFakeParserElement=function(s,t,u,v){var w=this.lang.fakeobjects,x,y=new g.htmlParser.basicWriter();s.writeHtml(y);x=y.getHtml();var z={'class':t,src:g.getUrl('images/spacer.gif'),_cke_realelement:encodeURIComponent(x),_cke_real_node_type:s.type,alt:w[u]||w.unknown,align:s.attributes.align||''};if(u)z._cke_real_element_type=u;if(v)z._cke_resizable=v;return new g.htmlParser.element('img',z);};g.editor.prototype.restoreRealElement=function(s){if(s.getAttribute('_cke_real_node_type')!=1)return null;return n.createFromHtml(decodeURIComponent(s.getAttribute('_cke_realelement')),this.document);};p.add('richcombo',{requires:['floatpanel','listblock','button'],beforeInit:function(s){s.ui.addHandler(3,q.richCombo.handler);}});g.UI_RICHCOMBO=3;q.richCombo=k.createClass({$:function(s){var u=this;k.extend(u,s,{title:s.label,modes:{wysiwyg:1}});var t=u.panel||{};delete u.panel;u.id=k.getNextNumber();u.document=t&&t.parent&&t.parent.getDocument()||g.document;t.className=(t.className||'')+' cke_rcombopanel';t.block={multiSelect:t.multiSelect,attributes:t.attributes};u._={panelDefinition:t,items:{},state:2};},statics:{handler:{create:function(s){return new q.richCombo(s);}}},proto:{renderHtml:function(s){var t=[];this.render(s,t);return t.join('');},render:function(s,t){var u=h,v='cke_'+this.id,w=k.addFunction(function(z){var C=this;var A=C._;if(A.state==0)return;C.createPanel(s);if(A.on){A.panel.hide();return;}if(!A.committed){A.list.commit();A.committed=1;}var B=C.getValue();if(B)A.list.mark(B);else A.list.unmarkAll();A.panel.showBlock(C.id,new n(z),4);},this),x={id:v,combo:this,focus:function(){var z=g.document.getById(v).getChild(1);z.focus();},clickFn:w};s.on('mode',function(){this.setState(this.modes[s.mode]?2:0);
},this);var y=k.addFunction(function(z,A){z=new j.event(z);var B=z.getKeystroke();switch(B){case 13:case 32:case 40:k.callFunction(w,A);break;default:x.onkey(x,B);}z.preventDefault();});x.keyDownFn=y;t.push('<span class="cke_rcombo">','<span id=',v);if(this.className)t.push(' class="',this.className,' cke_off"');t.push('>','<span id="'+v+'_label" class=cke_label>',this.label,'</span>','<a hidefocus=true title="',this.title,'" tabindex="-1"',u.gecko&&u.version>=10900&&!u.hc?'':" href=\"javascript:void('"+this.label+"')\"",' role="button" aria-labelledby="',v,'_label" aria-describedby="',v,'_text" aria-haspopup="true"');if(h.opera||h.gecko&&h.mac)t.push(' onkeypress="return false;"');if(h.gecko)t.push(' onblur="this.style.cssText = this.style.cssText;"');t.push(' onkeydown="CKEDITOR.tools.callFunction( ',y,', event, this );" onclick="CKEDITOR.tools.callFunction(',w,', this); return false;"><span><span id="'+v+'_text" class="cke_text cke_inline_label">'+this.label+'</span>'+'</span>'+'<span class=cke_openbutton>'+(h.hc?'<span>&#9660;</span>':'')+'</span>'+'</a>'+'</span>'+'</span>');if(this.onRender)this.onRender();return x;},createPanel:function(s){if(this._.panel)return;var t=this._.panelDefinition,u=this._.panelDefinition.block,v=t.parent||g.document.getBody(),w=new q.floatPanel(s,v,t),x=w.addListBlock(this.id,u),y=this;w.onShow=function(){if(y.className)this.element.getFirst().addClass(y.className+'_panel');y.setState(1);x.focus(!y.multiSelect&&y.getValue());y._.on=1;if(y.onOpen)y.onOpen();};w.onHide=function(z){if(y.className)this.element.getFirst().removeClass(y.className+'_panel');y.setState(2);y._.on=0;if(!z&&y.onClose)y.onClose();};w.onEscape=function(){w.hide();y.document.getById('cke_'+y.id).getFirst().getNext().focus();};x.onClick=function(z,A){y.document.getWindow().focus();if(y.onClick)y.onClick.call(y,z,A);if(A)y.setValue(z,y._.items[z]);else y.setValue('');w.hide();};this._.panel=w;this._.list=x;w.getBlock(this.id).onHide=function(){y._.on=0;y.setState(2);};if(this.init)this.init();},setValue:function(s,t){var v=this;v._.value=s;var u=v.document.getById('cke_'+v.id+'_text');if(!(s||t)){t=v.label;u.addClass('cke_inline_label');}else u.removeClass('cke_inline_label');u.setHtml(typeof t!='undefined'?t:s);},getValue:function(){return this._.value||'';},unmarkAll:function(){this._.list.unmarkAll();},mark:function(s){this._.list.mark(s);},hideItem:function(s){this._.list.hideItem(s);},hideGroup:function(s){this._.list.hideGroup(s);},showAll:function(){this._.list.showAll();
},add:function(s,t,u){this._.items[s]=u||s;this._.list.add(s,t,u);},startGroup:function(s){this._.list.startGroup(s);},commit:function(){this._.list.commit();},setState:function(s){var t=this;if(t._.state==s)return;t.document.getById('cke_'+t.id).setState(s);t._.state=s;}}});q.prototype.addRichCombo=function(s,t){this.add(s,3,t);};p.add('htmlwriter');g.htmlWriter=k.createClass({base:g.htmlParser.basicWriter,$:function(){var u=this;u.base();u.indentationChars='\t';u.selfClosingEnd=' />';u.lineBreakChars='\n';u.forceSimpleAmpersand=0;u.sortAttributes=1;u._.indent=0;u._.indentation='';u._.inPre=0;u._.rules={};var s=l;for(var t in k.extend({},s.$nonBodyContent,s.$block,s.$listItem,s.$tableContent))u.setRules(t,{indent:1,breakBeforeOpen:1,breakAfterOpen:1,breakBeforeClose:!s[t]['#'],breakAfterClose:1});u.setRules('br',{breakAfterOpen:1});u.setRules('title',{indent:0,breakAfterOpen:0});u.setRules('style',{indent:0,breakBeforeClose:1});u.setRules('pre',{indent:0});},proto:{openTag:function(s,t){var v=this;var u=v._.rules[s];if(v._.indent)v.indentation();else if(u&&u.breakBeforeOpen){v.lineBreak();v.indentation();}v._.output.push('<',s);},openTagClose:function(s,t){var v=this;var u=v._.rules[s];if(t)v._.output.push(v.selfClosingEnd);else{v._.output.push('>');if(u&&u.indent)v._.indentation+=v.indentationChars;}if(u&&u.breakAfterOpen)v.lineBreak();s=='pre'&&(v._.inPre=1);},attribute:function(s,t){if(typeof t=='string'){this.forceSimpleAmpersand&&(t=t.replace(/&amp;/g,'&'));t=k.htmlEncodeAttr(t);}this._.output.push(' ',s,'="',t,'"');},closeTag:function(s){var u=this;var t=u._.rules[s];if(t&&t.indent)u._.indentation=u._.indentation.substr(u.indentationChars.length);if(u._.indent)u.indentation();else if(t&&t.breakBeforeClose){u.lineBreak();u.indentation();}u._.output.push('</',s,'>');s=='pre'&&(u._.inPre=0);if(t&&t.breakAfterClose)u.lineBreak();},text:function(s){var t=this;if(t._.indent){t.indentation();!t._.inPre&&(s=k.ltrim(s));}t._.output.push(s);},comment:function(s){if(this._.indent)this.indentation();this._.output.push('<!--',s,'-->');},lineBreak:function(){var s=this;if(!s._.inPre&&s._.output.length>0)s._.output.push(s.lineBreakChars);s._.indent=1;},indentation:function(){var s=this;if(!s._.inPre)s._.output.push(s._.indentation);s._.indent=0;},setRules:function(s,t){var u=this._.rules[s];if(u)k.extend(u,t,true);else this._.rules[s]=t;}}});p.add('menubutton',{requires:['button','contextmenu'],beforeInit:function(s){s.ui.addHandler(5,q.menuButton.handler);}});g.UI_MENUBUTTON=5;
(function(){var s=function(t){var u=this._;if(u.state===0)return;u.previousState=u.state;var v=u.menu;if(!v){v=u.menu=new p.contextMenu(t);v.definition.panel.attributes['aria-label']=t.lang.common.options;v.onHide=k.bind(function(){this.setState(u.previousState);},this);if(this.onMenu)v.addListener(this.onMenu);}if(u.on){v.hide();return;}this.setState(1);v.show(g.document.getById(this._.id),4);};q.menuButton=k.createClass({base:q.button,$:function(t){var u=t.panel;delete t.panel;this.base(t);this.hasArrow=true;this.click=s;},statics:{handler:{create:function(t){return new q.menuButton(t);}}}});})();p.add('dialogui');(function(){var s=function(A){var D=this;D._||(D._={});D._['default']=D._.initValue=A['default']||'';D._.required=A.required||false;var B=[D._];for(var C=1;C<arguments.length;C++)B.push(arguments[C]);B.push(true);k.extend.apply(k,B);return D._;},t={build:function(A,B,C){return new q.dialog.textInput(A,B,C);}},u={build:function(A,B,C){return new q.dialog[B.type](A,B,C);}},v={build:function(A,B,C){var D=B.children,E,F=[],G=[];for(var H=0;H<D.length&&(E=D[H]);H++){var I=[];F.push(I);G.push(g.dialog._.uiElementBuilders[E.type].build(A,E,I));}return new q.dialog[B.type](A,G,F,C,B);}},w={isChanged:function(){return this.getValue()!=this.getInitValue();},reset:function(A){this.setValue(this.getInitValue(),A);},setInitValue:function(){this._.initValue=this.getValue();},resetInitValue:function(){this._.initValue=this._['default'];},getInitValue:function(){return this._.initValue;}},x=k.extend({},q.dialog.uiElement.prototype.eventProcessors,{onChange:function(A,B){if(!this._.domOnChangeRegistered){A.on('load',function(){this.getInputElement().on('change',function(){if(!A.parts.dialog.isVisible())return;this.fire('change',{value:this.getValue()});},this);},this);this._.domOnChangeRegistered=true;}this.on('change',B);}},true),y=/^on([A-Z]\w+)/,z=function(A){for(var B in A){if(y.test(B)||B=='title'||B=='type')delete A[B];}return A;};k.extend(q.dialog,{labeledElement:function(A,B,C,D){if(arguments.length<4)return;var E=s.call(this,B);E.labelId=k.getNextId()+'_label';var F=this._.children=[],G=function(){var H=[],I=B.required?' cke_required':'';if(B.labelLayout!='horizontal')H.push('<label class="cke_dialog_ui_labeled_label'+I+'" ',' id="'+E.labelId+'"',' for="'+E.inputId+'"',' style="'+B.labelStyle+'">',B.label,'</label>','<div class="cke_dialog_ui_labeled_content" role="presentation">',D.call(this,A,B),'</div>');else{var J={type:'hbox',widths:B.widths,padding:0,children:[{type:'html',html:'<label class="cke_dialog_ui_labeled_label'+I+'"'+' id="'+E.labelId+'"'+' for="'+E.inputId+'"'+' style="'+B.labelStyle+'">'+k.htmlEncode(B.label)+'</span>'},{type:'html',html:'<span class="cke_dialog_ui_labeled_content">'+D.call(this,A,B)+'</span>'}]};
g.dialog._.uiElementBuilders.hbox.build(A,J,H);}return H.join('');};q.dialog.uiElement.call(this,A,B,C,'div',null,{role:'presentation'},G);},textInput:function(A,B,C){if(arguments.length<3)return;s.call(this,B);var D=this._.inputId=k.getNextId()+'_textInput',E={'class':'cke_dialog_ui_input_'+B.type,id:D,type:'text'},F;if(B.validate)this.validate=B.validate;if(B.maxLength)E.maxlength=B.maxLength;if(B.size)E.size=B.size;if(B.controlStyle)E.style=B.controlStyle;var G=this,H=false;A.on('load',function(){G.getInputElement().on('keydown',function(J){if(J.data.getKeystroke()==13)H=true;});G.getInputElement().on('keyup',function(J){if(J.data.getKeystroke()==13&&H){A.getButton('ok')&&setTimeout(function(){A.getButton('ok').click();},0);H=false;}},null,null,1000);});var I=function(){var J=['<div class="cke_dialog_ui_input_',B.type,'" role="presentation"'];if(B.width)J.push('style="width:'+B.width+'" ');J.push('><input ');E['aria-labelledby']=this._.labelId;this._.required&&(E['aria-required']=this._.required);for(var K in E)J.push(K+'="'+E[K]+'" ');J.push(' /></div>');return J.join('');};q.dialog.labeledElement.call(this,A,B,C,I);},textarea:function(A,B,C){if(arguments.length<3)return;s.call(this,B);var D=this,E=this._.inputId=k.getNextId()+'_textarea',F={};if(B.validate)this.validate=B.validate;F.rows=B.rows||5;F.cols=B.cols||20;var G=function(){F['aria-labelledby']=this._.labelId;this._.required&&(F['aria-required']=this._.required);var H=['<div class="cke_dialog_ui_input_textarea" role="presentation"><textarea class="cke_dialog_ui_input_textarea" id="',E,'" '];for(var I in F)H.push(I+'="'+k.htmlEncode(F[I])+'" ');H.push('>',k.htmlEncode(D._['default']),'</textarea></div>');return H.join('');};q.dialog.labeledElement.call(this,A,B,C,G);},checkbox:function(A,B,C){if(arguments.length<3)return;var D=s.call(this,B,{'default':!!B['default']});if(B.validate)this.validate=B.validate;var E=function(){var F=k.extend({},B,{id:B.id?B.id+'_checkbox':k.getNextId()+'_checkbox'},true),G=[],H=k.getNextId()+'_label',I={'class':'cke_dialog_ui_checkbox_input',type:'checkbox','aria-labelledby':H};z(F);if(B['default'])I.checked='checked';if(typeof F.controlStyle!='undefined')F.style=F.controlStyle;D.checkbox=new q.dialog.uiElement(A,F,G,'input',null,I);G.push(' <label id="',H,'" for="',I.id,'">',k.htmlEncode(B.label),'</label>');return G.join('');};q.dialog.uiElement.call(this,A,B,C,'span',null,null,E);},radio:function(A,B,C){if(arguments.length<3)return;s.call(this,B);if(!this._['default'])this._['default']=this._.initValue=B.items[0][1];
if(B.validate)this.validate=B.valdiate;var D=[],E=this,F=function(){var G=[],H=[],I={'class':'cke_dialog_ui_radio_item','aria-labelledby':this._.labelId},J=B.id?B.id+'_radio':k.getNextId()+'_radio';for(var K=0;K<B.items.length;K++){var L=B.items[K],M=L[2]!==undefined?L[2]:L[0],N=L[1]!==undefined?L[1]:L[0],O=k.getNextId()+'_radio_input',P=O+'_label',Q=k.extend({},B,{id:O,title:null,type:null},true),R=k.extend({},Q,{title:M},true),S={type:'radio','class':'cke_dialog_ui_radio_input',name:J,value:N,'aria-labelledby':P},T=[];if(E._['default']==N)S.checked='checked';z(Q);z(R);if(typeof Q.controlStyle!='undefined')Q.style=Q.controlStyle;D.push(new q.dialog.uiElement(A,Q,T,'input',null,S));T.push(' ');new q.dialog.uiElement(A,R,T,'label',null,{id:P,'for':S.id},L[0]);G.push(T.join(''));}new q.dialog.hbox(A,[],G,H);return H.join('');};q.dialog.labeledElement.call(this,A,B,C,F);this._.children=D;},button:function(A,B,C){if(!arguments.length)return;if(typeof B=='function')B=B(A.getParentEditor());s.call(this,B,{disabled:B.disabled||false});g.event.implementOn(this);var D=this;A.on('load',function(G){var H=this.getElement();(function(){H.on('click',function(I){D.fire('click',{dialog:D.getDialog()});I.data.preventDefault();});H.on('keydown',function(I){if(I.data.getKeystroke() in {32:1}){D.click();I.data.preventDefault();}});})();H.unselectable();},this);var E=k.extend({},B);delete E.style;var F=k.getNextId()+'_label';q.dialog.uiElement.call(this,A,E,C,'a',null,{style:B.style,href:'javascript:void(0)',title:B.label,hidefocus:'true','class':B['class'],role:'button','aria-labelledby':F},'<span id="'+F+'" class="cke_dialog_ui_button">'+k.htmlEncode(B.label)+'</span>');},select:function(A,B,C){if(arguments.length<3)return;var D=s.call(this,B);if(B.validate)this.validate=B.validate;D.inputId=k.getNextId()+'_select';var E=function(){var F=k.extend({},B,{id:B.id?B.id+'_select':k.getNextId()+'_select'},true),G=[],H=[],I={id:D.inputId,'class':'cke_dialog_ui_input_select','aria-labelledby':this._.labelId};if(B.size!=undefined)I.size=B.size;if(B.multiple!=undefined)I.multiple=B.multiple;z(F);for(var J=0,K;J<B.items.length&&(K=B.items[J]);J++)H.push('<option value="',k.htmlEncode(K[1]!==undefined?K[1]:K[0]),'" /> ',k.htmlEncode(K[0]));if(typeof F.controlStyle!='undefined')F.style=F.controlStyle;D.select=new q.dialog.uiElement(A,F,G,'select',null,I,H.join(''));return G.join('');};q.dialog.labeledElement.call(this,A,B,C,E);},file:function(A,B,C){if(arguments.length<3)return;if(B['default']===undefined)B['default']='';
var D=k.extend(s.call(this,B),{definition:B,buttons:[]});if(B.validate)this.validate=B.validate;var E=function(){D.frameId=k.getNextId()+'_fileInput';var F=h.isCustomDomain(),G=['<iframe frameborder="0" allowtransparency="0" class="cke_dialog_ui_input_file" id="',D.frameId,'" title="',B.label,'" src="javascript:void('];G.push(F?"(function(){document.open();document.domain='"+document.domain+"';"+'document.close();'+'})()':'0');G.push(')"></iframe>');return G.join('');};A.on('load',function(){var F=g.document.getById(D.frameId),G=F.getParent();G.addClass('cke_dialog_ui_input_file');});q.dialog.labeledElement.call(this,A,B,C,E);},fileButton:function(A,B,C){if(arguments.length<3)return;var D=s.call(this,B),E=this;if(B.validate)this.validate=B.validate;var F=k.extend({},B),G=F.onClick;F.className=(F.className?F.className+' ':'')+'cke_dialog_ui_button';F.onClick=function(H){var I=B['for'];if(!G||G.call(this,H)!==false){A.getContentElement(I[0],I[1]).submit();this.disable();}};A.on('load',function(){A.getContentElement(B['for'][0],B['for'][1])._.buttons.push(E);});q.dialog.button.call(this,A,F,C);},html:(function(){var A=/^\s*<[\w:]+\s+([^>]*)?>/,B=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,C=/\/$/;return function(D,E,F){if(arguments.length<3)return;var G=[],H,I=E.html,J,K;if(I.charAt(0)!='<')I='<span>'+I+'</span>';var L=E.focus;if(L){var M=this.focus;this.focus=function(){M.call(this);typeof L=='function'&&L.call(this);this.fire('focus');};if(E.isFocusable){var N=this.isFocusable;this.isFocusable=N;}this.keyboardFocusable=true;}q.dialog.uiElement.call(this,D,E,G,'span',null,null,'');H=G.join('');J=H.match(A);K=I.match(B)||['','',''];if(C.test(K[1])){K[1]=K[1].slice(0,-1);K[2]='/'+K[2];}F.push([K[1],' ',J[1]||'',K[2]].join(''));};})(),fieldset:function(A,B,C,D,E){var F=E.label,G=function(){var H=[];F&&H.push('<legend>'+F+'</legend>');for(var I=0;I<C.length;I++)H.push(C[I]);return H.join('');};this._={children:B};q.dialog.uiElement.call(this,A,E,D,'fieldset',null,null,G);}},true);q.dialog.html.prototype=new q.dialog.uiElement();q.dialog.labeledElement.prototype=k.extend(new q.dialog.uiElement(),{setLabel:function(A){var B=g.document.getById(this._.labelId);if(B.getChildCount()<1)new j.text(A,g.document).appendTo(B);else B.getChild(0).$.nodeValue=A;return this;},getLabel:function(){var A=g.document.getById(this._.labelId);if(!A||A.getChildCount()<1)return '';else return A.getChild(0).getText();},eventProcessors:x},true);q.dialog.button.prototype=k.extend(new q.dialog.uiElement(),{click:function(){var A=this;
if(!A._.disabled)return A.fire('click',{dialog:A._.dialog});A.getElement().$.blur();return false;},enable:function(){this._.disabled=false;var A=this.getElement();A&&A.removeClass('cke_disabled');},disable:function(){this._.disabled=true;this.getElement().addClass('cke_disabled');},isVisible:function(){return this.getElement().getFirst().isVisible();},isEnabled:function(){return!this._.disabled;},eventProcessors:k.extend({},q.dialog.uiElement.prototype.eventProcessors,{onClick:function(A,B){this.on('click',B);}},true),accessKeyUp:function(){this.click();},accessKeyDown:function(){this.focus();},keyboardFocusable:true},true);q.dialog.textInput.prototype=k.extend(new q.dialog.labeledElement(),{getInputElement:function(){return g.document.getById(this._.inputId);},focus:function(){var A=this.selectParentTab();setTimeout(function(){var B=A.getInputElement();B&&B.$.focus();},0);},select:function(){var A=this.selectParentTab();setTimeout(function(){var B=A.getInputElement();if(B){B.$.focus();B.$.select();}},0);},accessKeyUp:function(){this.select();},setValue:function(A){!A&&(A='');return q.dialog.uiElement.prototype.setValue.apply(this,arguments);},keyboardFocusable:true},w,true);q.dialog.textarea.prototype=new q.dialog.textInput();q.dialog.select.prototype=k.extend(new q.dialog.labeledElement(),{getInputElement:function(){return this._.select.getElement();},add:function(A,B,C){var D=new n('option',this.getDialog().getParentEditor().document),E=this.getInputElement().$;D.$.text=A;D.$.value=B===undefined||B===null?A:B;if(C===undefined||C===null){if(i)E.add(D.$);else E.add(D.$,null);}else E.add(D.$,C);return this;},remove:function(A){var B=this.getInputElement().$;B.remove(A);return this;},clear:function(){var A=this.getInputElement().$;while(A.length>0)A.remove(0);return this;},keyboardFocusable:true},w,true);q.dialog.checkbox.prototype=k.extend(new q.dialog.uiElement(),{getInputElement:function(){return this._.checkbox.getElement();},setValue:function(A,B){this.getInputElement().$.checked=A;!B&&this.fire('change',{value:A});},getValue:function(){return this.getInputElement().$.checked;},accessKeyUp:function(){this.setValue(!this.getValue());},eventProcessors:{onChange:function(A,B){if(!i)return x.onChange.apply(this,arguments);else{A.on('load',function(){var C=this._.checkbox.getElement();C.on('propertychange',function(D){D=D.data.$;if(D.propertyName=='checked')this.fire('change',{value:C.$.checked});},this);},this);this.on('change',B);}return null;}},keyboardFocusable:true},w,true);
q.dialog.radio.prototype=k.extend(new q.dialog.uiElement(),{setValue:function(A,B){var C=this._.children,D;for(var E=0;E<C.length&&(D=C[E]);E++)D.getElement().$.checked=D.getValue()==A;!B&&this.fire('change',{value:A});},getValue:function(){var A=this._.children;for(var B=0;B<A.length;B++){if(A[B].getElement().$.checked)return A[B].getValue();}return null;},accessKeyUp:function(){var A=this._.children,B;for(B=0;B<A.length;B++){if(A[B].getElement().$.checked){A[B].getElement().focus();return;}}A[0].getElement().focus();},eventProcessors:{onChange:function(A,B){if(!i)return x.onChange.apply(this,arguments);else{A.on('load',function(){var C=this._.children,D=this;for(var E=0;E<C.length;E++){var F=C[E].getElement();F.on('propertychange',function(G){G=G.data.$;if(G.propertyName=='checked'&&this.$.checked)D.fire('change',{value:this.getAttribute('value')});});}},this);this.on('change',B);}return null;}},keyboardFocusable:true},w,true);q.dialog.file.prototype=k.extend(new q.dialog.labeledElement(),w,{getInputElement:function(){var A=g.document.getById(this._.frameId).getFrameDocument();return A.$.forms.length>0?new n(A.$.forms[0].elements[0]):this.getElement();},submit:function(){this.getInputElement().getParent().$.submit();return this;},getAction:function(){return this.getInputElement().getParent().$.action;},registerEvents:function(A){var B=/^on([A-Z]\w+)/,C,D=function(F,G,H,I){F.on('formLoaded',function(){F.getInputElement().on(H,I,F);});};for(var E in A){if(!(C=E.match(B)))continue;if(this.eventProcessors[E])this.eventProcessors[E].call(this,this._.dialog,A[E]);else D(this,this._.dialog,C[1].toLowerCase(),A[E]);}return this;},reset:function(){var A=this._,B=g.document.getById(A.frameId),C=B.getFrameDocument(),D=A.definition,E=A.buttons,F=this.formLoadedNumber,G=this.formUnloadNumber,H=A.dialog._.editor.lang.dir,I=A.dialog._.editor.langCode;if(!F){F=this.formLoadedNumber=k.addFunction(function(){this.fire('formLoaded');},this);G=this.formUnloadNumber=k.addFunction(function(){this.getInputElement().clearCustomData();},this);this.getDialog()._.editor.on('destroy',function(){k.removeFunction(F);k.removeFunction(G);});}function J(){C.$.open();if(h.isCustomDomain())C.$.domain=document.domain;var K='';if(D.size)K=D.size-(i?7:0);C.$.write(['<html dir="'+H+'" lang="'+I+'"><head><title></title></head><body style="margin: 0; overflow: hidden; background: transparent;">','<form enctype="multipart/form-data" method="POST" dir="'+H+'" lang="'+I+'" action="',k.htmlEncode(D.action),'">','<input type="file" name="',k.htmlEncode(D.id||'cke_upload'),'" size="',k.htmlEncode(K>0?K:''),'" />','</form>','</body></html>','<script>window.parent.CKEDITOR.tools.callFunction('+F+');','window.onbeforeunload = function() {window.parent.CKEDITOR.tools.callFunction('+G+')}</script>'].join(''));
C.$.close();for(var L=0;L<E.length;L++)E[L].enable();};if(h.gecko)setTimeout(J,500);else J();},getValue:function(){return this.getInputElement().$.value;},setInitValue:function(){this._.initValue='';},eventProcessors:{onChange:function(A,B){if(!this._.domOnChangeRegistered){this.on('formLoaded',function(){this.getInputElement().on('change',function(){this.fire('change',{value:this.getValue()});},this);},this);this._.domOnChangeRegistered=true;}this.on('change',B);}},keyboardFocusable:true},true);q.dialog.fileButton.prototype=new q.dialog.button();q.dialog.fieldset.prototype=k.clone(q.dialog.hbox.prototype);g.dialog.addUIElement('text',t);g.dialog.addUIElement('password',t);g.dialog.addUIElement('textarea',u);g.dialog.addUIElement('checkbox',u);g.dialog.addUIElement('radio',u);g.dialog.addUIElement('button',u);g.dialog.addUIElement('select',u);g.dialog.addUIElement('file',u);g.dialog.addUIElement('fileButton',u);g.dialog.addUIElement('html',u);g.dialog.addUIElement('fieldset',v);})();p.add('panel',{beforeInit:function(s){s.ui.addHandler(2,q.panel.handler);}});g.UI_PANEL=2;q.panel=function(s,t){var u=this;if(t)k.extend(u,t);k.extend(u,{className:'',css:[]});u.id=k.getNextId();u.document=s;u._={blocks:{}};};q.panel.handler={create:function(s){return new q.panel(s);}};q.panel.prototype={renderHtml:function(s){var t=[];this.render(s,t);return t.join('');},render:function(s,t){var v=this;var u=v.id;t.push('<div class="',s.skinClass,'" lang="',s.langCode,'" role="presentation" style="display:none;z-index:'+(s.config.baseFloatZIndex+1)+'">'+'<div'+' id=',u,' dir=',s.lang.dir,' role="presentation" class="cke_panel cke_',s.lang.dir);if(v.className)t.push(' ',v.className);t.push('">');if(v.forceIFrame||v.css.length){t.push('<iframe id="',u,'_frame" frameborder="0" role="application" src="javascript:void(');t.push(h.isCustomDomain()?"(function(){document.open();document.domain='"+document.domain+"';"+'document.close();'+'})()':'0');t.push(')"></iframe>');}t.push('</div></div>');return u;},getHolderElement:function(){var s=this._.holder;if(!s){if(this.forceIFrame||this.css.length){var t=this.document.getById(this.id+'_frame'),u=t.getParent(),v=u.getAttribute('dir'),w=u.getParent().getAttribute('class'),x=u.getParent().getAttribute('lang'),y=t.getFrameDocument();y.$.open();if(h.isCustomDomain())y.$.domain=document.domain;var z=k.addFunction(k.bind(function(B){this.isLoaded=true;if(this.onLoad)this.onLoad();},this));y.$.write('<!DOCTYPE html><html dir="'+v+'" class="'+w+'_container" lang="'+x+'">'+'<head>'+'<style>.'+w+'_container{visibility:hidden}</style>'+'</head>'+'<body class="cke_'+v+' cke_panel_frame '+h.cssClass+'" style="margin:0;padding:0"'+' onload="( window.CKEDITOR || window.parent.CKEDITOR ).tools.callFunction('+z+');"></body>'+k.buildStyleHtml(this.css)+'</html>');
y.$.close();var A=y.getWindow();A.$.CKEDITOR=g;y.on('key'+(h.opera?'press':'down'),function(B){var E=this;var C=B.data.getKeystroke(),D=E.document.getById(E.id).getAttribute('dir');if(E._.onKeyDown&&E._.onKeyDown(C)===false){B.data.preventDefault();return;}if(C==27||C==(D=='rtl'?39:37))if(E.onEscape&&E.onEscape(C)===false)B.data.preventDefault();},this);s=y.getBody();s.unselectable();}else s=this.document.getById(this.id);this._.holder=s;}return s;},addBlock:function(s,t){var u=this;t=u._.blocks[s]=t instanceof q.panel.block?t:new q.panel.block(u.getHolderElement(),t);if(!u._.currentBlock)u.showBlock(s);return t;},getBlock:function(s){return this._.blocks[s];},showBlock:function(s){var t=this._.blocks,u=t[s],v=this._.currentBlock,w=this.forceIFrame?this.document.getById(this.id+'_frame'):this._.holder;w.getParent().getParent().disableContextMenu();if(v){w.removeAttributes(v.attributes);v.hide();}this._.currentBlock=u;w.setAttributes(u.attributes);g.fire('ariaWidget',w);u._.focusIndex=-1;this._.onKeyDown=u.onKeyDown&&k.bind(u.onKeyDown,u);u.onMark=function(x){w.setAttribute('aria-activedescendant',x.getId()+'_option');};u.onUnmark=function(){w.removeAttribute('aria-activedescendant');};u.show();return u;},destroy:function(){this.element&&this.element.remove();}};q.panel.block=k.createClass({$:function(s,t){var u=this;u.element=s.append(s.getDocument().createElement('div',{attributes:{tabIndex:-1,'class':'cke_panel_block',role:'presentation'},styles:{display:'none'}}));if(t)k.extend(u,t);if(!u.attributes.title)u.attributes.title=u.attributes['aria-label'];u.keys={};u._.focusIndex=-1;u.element.disableContextMenu();},_:{markItem:function(s){var v=this;if(s==-1)return;var t=v.element.getElementsByTag('a'),u=t.getItem(v._.focusIndex=s);if(h.webkit||h.opera)u.getDocument().getWindow().focus();u.focus();v.onMark&&v.onMark(u);}},proto:{show:function(){this.element.setStyle('display','');},hide:function(){var s=this;if(!s.onHide||s.onHide.call(s)!==true)s.element.setStyle('display','none');},onKeyDown:function(s){var x=this;var t=x.keys[s];switch(t){case 'next':var u=x._.focusIndex,v=x.element.getElementsByTag('a'),w;while(w=v.getItem(++u)){if(w.getAttribute('_cke_focus')&&w.$.offsetWidth){x._.focusIndex=u;w.focus();break;}}return false;case 'prev':u=x._.focusIndex;v=x.element.getElementsByTag('a');while(u>0&&(w=v.getItem(--u))){if(w.getAttribute('_cke_focus')&&w.$.offsetWidth){x._.focusIndex=u;w.focus();break;}}return false;case 'click':u=x._.focusIndex;w=u>=0&&x.element.getElementsByTag('a').getItem(u);
if(w)w.$.click?w.$.click():w.$.onclick();return false;}return true;}}});p.add('listblock',{requires:['panel'],onLoad:function(){q.panel.prototype.addListBlock=function(s,t){return this.addBlock(s,new q.listBlock(this.getHolderElement(),t));};q.listBlock=k.createClass({base:q.panel.block,$:function(s,t){var w=this;t=t||{};var u=t.attributes||(t.attributes={});(w.multiSelect=!!t.multiSelect)&&(u['aria-multiselectable']=true);!u.role&&(u.role='listbox');w.base.apply(w,arguments);var v=w.keys;v[40]='next';v[9]='next';v[38]='prev';v[2000+9]='prev';v[32]='click';w._.pendingHtml=[];w._.items={};w._.groups={};},_:{close:function(){if(this._.started){this._.pendingHtml.push('</ul>');delete this._.started;}},getClick:function(){if(!this._.click)this._.click=k.addFunction(function(s){var u=this;var t=true;if(u.multiSelect)t=u.toggle(s);else u.mark(s);if(u.onClick)u.onClick(s,t);},this);return this._.click;}},proto:{add:function(s,t,u){var x=this;var v=x._.pendingHtml,w=k.getNextId();if(!x._.started){v.push('<ul role="presentation" class=cke_panel_list>');x._.started=1;x._.size=x._.size||0;}x._.items[s]=w;v.push('<li id=',w,' class=cke_panel_listItem><a id="',w,'_option" _cke_focus=1 hidefocus=true title="',u||s,'" href="javascript:void(\'',s,'\')" onclick="CKEDITOR.tools.callFunction(',x._.getClick(),",'",s,"'); return false;\"",' role="option" aria-posinset="'+ ++x._.size+'">',t||s,'</a></li>');},startGroup:function(s){this._.close();var t=k.getNextId();this._.groups[s]=t;this._.pendingHtml.push('<h1 role="presentation" id=',t,' class=cke_panel_grouptitle>',s,'</h1>');},commit:function(){var v=this;v._.close();v.element.appendHtml(v._.pendingHtml.join(''));var s=v._.items,t=v.element.getDocument();for(var u in s)t.getById(s[u]+'_option').setAttribute('aria-setsize',v._.size);delete v._.size;v._.pendingHtml=[];},toggle:function(s){var t=this.isMarked(s);if(t)this.unmark(s);else this.mark(s);return!t;},hideGroup:function(s){var t=this.element.getDocument().getById(this._.groups[s]),u=t&&t.getNext();if(t){t.setStyle('display','none');if(u&&u.getName()=='ul')u.setStyle('display','none');}},hideItem:function(s){this.element.getDocument().getById(this._.items[s]).setStyle('display','none');},showAll:function(){var s=this._.items,t=this._.groups,u=this.element.getDocument();for(var v in s)u.getById(s[v]).setStyle('display','');for(var w in t){var x=u.getById(t[w]),y=x.getNext();x.setStyle('display','');if(y&&y.getName()=='ul')y.setStyle('display','');}},mark:function(s){var v=this;
if(!v.multiSelect)v.unmarkAll();var t=v._.items[s],u=v.element.getDocument().getById(t);u.addClass('cke_selected');v.element.getDocument().getById(t+'_option').setAttribute('aria-selected',true);v.element.setAttribute('aria-activedescendant',t+'_option');v.onMark&&v.onMark(u);},unmark:function(s){var t=this;t.element.getDocument().getById(t._.items[s]).removeClass('cke_selected');t.onUnmark&&t.onUnmark(t._.items[s]);},unmarkAll:function(){var v=this;var s=v._.items,t=v.element.getDocument();for(var u in s)t.getById(s[u]).removeClass('cke_selected');v.onUnmark&&v.onUnmark();},isMarked:function(s){return this.element.getDocument().getById(this._.items[s]).hasClass('cke_selected');},focus:function(s){this._.focusIndex=-1;if(s){var t=this.element.getDocument().getById(this._.items[s]).getFirst(),u=this.element.getElementsByTag('a'),v,w=-1;while(v=u.getItem(++w)){if(v.equals(t)){this._.focusIndex=w;break;}}setTimeout(function(){t.focus();},0);}}}});}});g.themes.add('default',(function(){function s(t,u){var v,w;w=t.config.sharedSpaces;w=w&&w[u];w=w&&g.document.getById(w);if(w){var x='<span class="cke_shared"><span class="'+t.skinClass+' '+t.id+' cke_editor_'+t.name+'">'+'<span class="'+h.cssClass+'">'+'<span class="cke_wrapper cke_'+t.lang.dir+'">'+'<span class="cke_editor">'+'<div class="cke_'+u+'">'+'</div></span></span></span></span></span>',y=w.append(n.createFromHtml(x,w.getDocument()));if(w.getCustomData('cke_hasshared'))y.hide();else w.setCustomData('cke_hasshared',1);v=y.getChild([0,0,0,0]);t.on('focus',function(){for(var z=0,A,B=w.getChildren();A=B.getItem(z);z++){if(A.type==1&&!A.equals(y)&&A.hasClass('cke_shared'))A.hide();}y.show();});t.on('destroy',function(){y.remove();});}return v;};return{build:function(t,u){var v=t.name,w=t.element,x=t.elementMode;if(!w||x==0)return;if(x==1)w.hide();var y=t.fire('themeSpace',{space:'top',html:''}).html,z=t.fire('themeSpace',{space:'contents',html:''}).html,A=t.fireOnce('themeSpace',{space:'bottom',html:''}).html,B=z&&t.config.height,C=t.config.tabIndex||t.element.getAttribute('tabindex')||0;if(!z)B='auto';else if(!isNaN(B))B+='px';var D='',E=t.config.width;if(E){if(!isNaN(E))E+='px';D+='width: '+E+';';}var F=y&&s(t,'top'),G=s(t,'bottom');F&&(F.setHtml(y),y='');G&&(G.setHtml(A),A='');var H=n.createFromHtml(['<span id="cke_',v,'" onmousedown="return false;" class="',t.skinClass,' ',t.id,' cke_editor_',v,'" dir="',t.lang.dir,'" title="',h.gecko?' ':'','" lang="',t.langCode,'"'+(h.webkit?' tabindex="'+C+'"':'')+' role="application"'+' aria-labelledby="cke_',v,'_arialbl"'+(D?' style="'+D+'"':'')+'>'+'<span id="cke_',v,'_arialbl" class="cke_voice_label">'+t.lang.editor+'</span>'+'<span class="',h.cssClass,'" role="presentation"><span class="cke_wrapper cke_',t.lang.dir,'" role="presentation"><table class="cke_editor" border="0" cellspacing="0" cellpadding="0" role="presentation"><tbody><tr',y?'':' style="display:none"',' role="presentation"><td id="cke_top_',v,'" class="cke_top" role="presentation">',y,'</td></tr><tr',z?'':' style="display:none"',' role="presentation"><td id="cke_contents_',v,'" class="cke_contents" style="height:',B,'" role="presentation">',z,'</td></tr><tr',A?'':' style="display:none"',' role="presentation"><td id="cke_bottom_',v,'" class="cke_bottom" role="presentation">',A,'</td></tr></tbody></table><style>.',t.skinClass,'{visibility:hidden;}</style></span></span></span>'].join(''));
H.getChild([1,0,0,0,0]).unselectable();H.getChild([1,0,0,0,2]).unselectable();if(x==1)H.insertAfter(w);else w.append(H);t.container=H;H.disableContextMenu();t.fireOnce('themeLoaded');t.fireOnce('uiReady');},buildDialog:function(t){var u=k.getNextNumber(),v=n.createFromHtml(['<div class="',t.id,'_dialog cke_editor_',t.name.replace('.','\\.'),'_dialog cke_skin_',t.skinName,'" dir="',t.lang.dir,'" lang="',t.langCode,'" role="dialog" aria-labelledby="%title#"><table class="cke_dialog',' '+h.cssClass,' cke_',t.lang.dir,'" style="position:absolute" role="presentation"><tr><td role="presentation"><div class="%body" role="presentation"><div id="%title#" class="%title" role="presentation"></div><a id="%close_button#" class="%close_button" href="javascript:void(0)" title="'+t.lang.common.close+'" role="button"><span class="cke_label">X</span></a>'+'<div id="%tabs#" class="%tabs" role="tablist"></div>'+'<table class="%contents" role="presentation"><tr>'+'<td id="%contents#" class="%contents" role="presentation"></td>'+'</tr></table>'+'<div id="%footer#" class="%footer" role="presentation"></div>'+'</div>'+'<div id="%tl#" class="%tl"></div>'+'<div id="%tc#" class="%tc"></div>'+'<div id="%tr#" class="%tr"></div>'+'<div id="%ml#" class="%ml"></div>'+'<div id="%mr#" class="%mr"></div>'+'<div id="%bl#" class="%bl"></div>'+'<div id="%bc#" class="%bc"></div>'+'<div id="%br#" class="%br"></div>'+'</td></tr>'+'</table>',i?'':'<style>.cke_dialog{visibility:hidden;}</style>','</div>'].join('').replace(/#/g,'_'+u).replace(/%/g,'cke_dialog_')),w=v.getChild([0,0,0,0,0]),x=w.getChild(0),y=w.getChild(1);x.unselectable();y.unselectable();return{element:v,parts:{dialog:v.getChild(0),title:x,close:y,tabs:w.getChild(2),contents:w.getChild([3,0,0,0]),footer:w.getChild(4)}};},destroy:function(t){var u=t.container;u.clearCustomData();t.element.clearCustomData();if(u)u.remove();if(t.elementMode==1)t.element.show();delete t.element;}};})());g.editor.prototype.getThemeSpace=function(s){var t='cke_'+s,u=this._[t]||(this._[t]=g.document.getById(t+'_'+this.name));return u;};g.editor.prototype.resize=function(s,t,u,v){var w=this.container,x=g.document.getById('cke_contents_'+this.name),y=v?w.getChild(1):w;h.webkit&&y.setStyle('display','none');y.setSize('width',s,true);if(h.webkit){y.$.offsetWidth;y.setStyle('display','');}var z=u?0:(y.$.offsetHeight||0)-(x.$.clientHeight||0);x.setStyle('height',Math.max(t-z,0)+'px');this.fire('resize');};g.editor.prototype.getResizable=function(){return this.container.getChild(1);
};})();
