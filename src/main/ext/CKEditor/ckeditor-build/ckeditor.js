/*
Copyright (c) 2003-2010, CKSource - Frederico Knabben. All rights reserved.
For licensing, see LICENSE.html or http://ckeditor.com/license
*/

(function(){if(window.CKEDITOR&&window.CKEDITOR.dom)return;if(!window.CKEDITOR)window.CKEDITOR=(function(){var h={timestamp:'B49E5BQ',version:'3.6',revision:'6902',_:{},status:'unloaded',basePath:(function(){var k=window.CKEDITOR_BASEPATH||'';if(!k){var l=document.getElementsByTagName('script');for(var m=0;m<l.length;m++){var n=l[m].src.match(/(^|.*[\\\/])ckeditor(?:_basic)?(?:_source)?.js(?:\?.*)?$/i);if(n){k=n[1];break;}}}if(k.indexOf(':/')==-1)if(k.indexOf('/')===0)k=location.href.match(/^.*?:\/\/[^\/]*/)[0]+k;else k=location.href.match(/^[^\?]*\/(?:)/)[0]+k;if(!k)throw 'The CKEditor installation path could not be automatically detected. Please set the global variable "CKEDITOR_BASEPATH" before creating editor instances.';return k;})(),getUrl:function(k){if(k.indexOf(':/')==-1&&k.indexOf('/')!==0)k=this.basePath+k;if(this.timestamp&&k.charAt(k.length-1)!='/'&&!/[&?]t=/.test(k))k+=(k.indexOf('?')>=0?'&':'?')+'t='+this.timestamp;return k;}},i=window.CKEDITOR_GETURL;if(i){var j=h.getUrl;h.getUrl=function(k){return i.call(h,k)||j.call(h,k);};}return h;})();var h=CKEDITOR;if(!h.event){h.event=function(){};h.event.implementOn=function(i){var j=h.event.prototype;for(var k in j){if(i[k]==undefined)i[k]=j[k];}};h.event.prototype=(function(){var i=function(k){var l=k.getPrivate&&k.getPrivate()||k._||(k._={});return l.events||(l.events={});},j=function(k){this.name=k;this.listeners=[];};j.prototype={getListenerIndex:function(k){for(var l=0,m=this.listeners;l<m.length;l++){if(m[l].fn==k)return l;}return-1;}};return{on:function(k,l,m,n,o){var p=i(this),q=p[k]||(p[k]=new j(k));if(q.getListenerIndex(l)<0){var r=q.listeners;if(!m)m=this;if(isNaN(o))o=10;var s=this,t=function(v,w,x,y){var z={name:k,sender:this,editor:v,data:w,listenerData:n,stop:x,cancel:y,removeListener:function(){s.removeListener(k,l);}};l.call(m,z);return z.data;};t.fn=l;t.priority=o;for(var u=r.length-1;u>=0;u--){if(r[u].priority<=o){r.splice(u+1,0,t);return;}}r.unshift(t);}},fire:(function(){var k=false,l=function(){k=true;},m=false,n=function(){m=true;};return function(o,p,q){var r=i(this)[o],s=k,t=m;k=m=false;if(r){var u=r.listeners;if(u.length){u=u.slice(0);for(var v=0;v<u.length;v++){var w=u[v].call(this,q,p,l,n);if(typeof w!='undefined')p=w;if(k||m)break;}}}var x=m||(typeof p=='undefined'?false:p);k=s;m=t;return x;};})(),fireOnce:function(k,l,m){var n=this.fire(k,l,m);delete i(this)[k];return n;},removeListener:function(k,l){var m=i(this)[k];if(m){var n=m.getListenerIndex(l);if(n>=0)m.listeners.splice(n,1);
}},hasListeners:function(k){var l=i(this)[k];return l&&l.listeners.length>0;}};})();}if(!h.editor){h.ELEMENT_MODE_NONE=0;h.ELEMENT_MODE_REPLACE=1;h.ELEMENT_MODE_APPENDTO=2;h.editor=function(i,j,k,l){var m=this;m._={instanceConfig:i,element:j,data:l};m.elementMode=k||0;h.event.call(m);m._init();};h.editor.replace=function(i,j){var k=i;if(typeof k!='object'){k=document.getElementById(i);if(k&&k.tagName.toLowerCase() in {style:1,script:1,base:1,link:1,meta:1,title:1})k=null;if(!k){var l=0,m=document.getElementsByName(i);while((k=m[l++])&&k.tagName.toLowerCase()!='textarea'){}}if(!k)throw '[CKEDITOR.editor.replace] The element with id or name "'+i+'" was not found.';}k.style.visibility='hidden';return new h.editor(j,k,1);};h.editor.appendTo=function(i,j,k){var l=i;if(typeof l!='object'){l=document.getElementById(i);if(!l)throw '[CKEDITOR.editor.appendTo] The element with id "'+i+'" was not found.';}return new h.editor(j,l,2,k);};h.editor.prototype={_init:function(){var i=h.editor._pending||(h.editor._pending=[]);i.push(this);},fire:function(i,j){return h.event.prototype.fire.call(this,i,j,this);},fireOnce:function(i,j){return h.event.prototype.fireOnce.call(this,i,j,this);}};h.event.implementOn(h.editor.prototype,true);}if(!h.env)h.env=(function(){var i=navigator.userAgent.toLowerCase(),j=window.opera,k={ie:/*@cc_on!@*/false,opera:!!j&&j.version,webkit:i.indexOf(' applewebkit/')>-1,air:i.indexOf(' adobeair/')>-1,mac:i.indexOf('macintosh')>-1,quirks:document.compatMode=='BackCompat',mobile:i.indexOf('mobile')>-1,isCustomDomain:function(){if(!this.ie)return false;var n=document.domain,o=window.location.hostname;return n!=o&&n!='['+o+']';}};k.gecko=navigator.product=='Gecko'&&!k.webkit&&!k.opera;var l=0;if(k.ie){l=parseFloat(i.match(/msie (\d+)/)[1]);k.ie8=!!document.documentMode;k.ie8Compat=document.documentMode==8;k.ie9Compat=document.documentMode==9;k.ie7Compat=l==7&&!document.documentMode||document.documentMode==7;k.ie6Compat=l<7||k.quirks;}if(k.gecko){var m=i.match(/rv:([\d\.]+)/);if(m){m=m[1].split('.');l=m[0]*10000+(m[1]||0)*100+ +(m[2]||0);}}if(k.opera)l=parseFloat(j.version());if(k.air)l=parseFloat(i.match(/ adobeair\/(\d+)/)[1]);if(k.webkit)l=parseFloat(i.match(/ applewebkit\/(\d+)/)[1]);k.version=l;k.isCompatible=!k.mobile&&(k.ie&&l>=6||k.gecko&&l>=10801||k.opera&&l>=9.5||k.air&&l>=1||k.webkit&&l>=522||false);k.cssClass='cke_browser_'+(k.ie?'ie':k.gecko?'gecko':k.opera?'opera':k.webkit?'webkit':'unknown');if(k.quirks)k.cssClass+=' cke_browser_quirks';
if(k.ie){k.cssClass+=' cke_browser_ie'+(k.version<7?'6':k.version>=8?document.documentMode:'7');if(k.quirks)k.cssClass+=' cke_browser_iequirks';}if(k.gecko&&l<10900)k.cssClass+=' cke_browser_gecko18';if(k.air)k.cssClass+=' cke_browser_air';return k;})();var i=h.env;var j=i.ie;if(h.status=='unloaded')(function(){h.event.implementOn(h);h.loadFullCore=function(){if(h.status!='basic_ready'){h.loadFullCore._load=1;return;}delete h.loadFullCore;var l=document.createElement('script');l.type='text/javascript';l.src=h.basePath+'ckeditor.js';document.getElementsByTagName('head')[0].appendChild(l);};h.loadFullCoreTimeout=0;h.replaceClass='ckeditor';h.replaceByClassEnabled=1;var k=function(l,m,n,o){if(i.isCompatible){if(h.loadFullCore)h.loadFullCore();var p=n(l,m,o);h.add(p);return p;}return null;};h.replace=function(l,m){return k(l,m,h.editor.replace);};h.appendTo=function(l,m,n){return k(l,m,h.editor.appendTo,n);};h.add=function(l){var m=this._.pending||(this._.pending=[]);m.push(l);};h.replaceAll=function(){var l=document.getElementsByTagName('textarea');for(var m=0;m<l.length;m++){var n=null,o=l[m];if(!o.name&&!o.id)continue;if(typeof arguments[0]=='string'){var p=new RegExp('(?:^|\\s)'+arguments[0]+'(?:$|\\s)');if(!p.test(o.className))continue;}else if(typeof arguments[0]=='function'){n={};if(arguments[0](o,n)===false)continue;}this.replace(o,n);}};(function(){var l=function(){var m=h.loadFullCore,n=h.loadFullCoreTimeout;if(h.replaceByClassEnabled)h.replaceAll(h.replaceClass);h.status='basic_ready';if(m&&m._load)m();else if(n)setTimeout(function(){if(h.loadFullCore)h.loadFullCore();},n*1000);};if(window.addEventListener)window.addEventListener('load',l,false);else if(window.attachEvent)window.attachEvent('onload',l);})();h.status='basic_loaded';})();h.dom={};var k=h.dom;(function(){var l=[];h.on('reset',function(){l=[];});h.tools={arrayCompare:function(m,n){if(!m&&!n)return true;if(!m||!n||m.length!=n.length)return false;for(var o=0;o<m.length;o++){if(m[o]!=n[o])return false;}return true;},clone:function(m){var n;if(m&&m instanceof Array){n=[];for(var o=0;o<m.length;o++)n[o]=this.clone(m[o]);return n;}if(m===null||typeof m!='object'||m instanceof String||m instanceof Number||m instanceof Boolean||m instanceof Date||m instanceof RegExp)return m;n=new m.constructor();for(var p in m){var q=m[p];n[p]=this.clone(q);}return n;},capitalize:function(m){return m.charAt(0).toUpperCase()+m.substring(1).toLowerCase();},extend:function(m){var n=arguments.length,o,p;if(typeof (o=arguments[n-1])=='boolean')n--;
else if(typeof (o=arguments[n-2])=='boolean'){p=arguments[n-1];n-=2;}for(var q=1;q<n;q++){var r=arguments[q];for(var s in r){if(o===true||m[s]==undefined)if(!p||s in p)m[s]=r[s];}}return m;},prototypedCopy:function(m){var n=function(){};n.prototype=m;return new n();},isArray:function(m){return!!m&&m instanceof Array;},isEmpty:function(m){for(var n in m){if(m.hasOwnProperty(n))return false;}return true;},cssStyleToDomStyle:(function(){var m=document.createElement('div').style,n=typeof m.cssFloat!='undefined'?'cssFloat':typeof m.styleFloat!='undefined'?'styleFloat':'float';return function(o){if(o=='float')return n;else return o.replace(/-./g,function(p){return p.substr(1).toUpperCase();});};})(),buildStyleHtml:function(m){m=[].concat(m);var n,o=[];for(var p=0;p<m.length;p++){n=m[p];if(/@import|[{}]/.test(n))o.push('<style>'+n+'</style>');else o.push('<link type="text/css" rel=stylesheet href="'+n+'">');}return o.join('');},htmlEncode:function(m){var n=function(r){var s=new k.element('span');s.setText(r);return s.getHtml();},o=n('\n').toLowerCase()=='<br>'?function(r){return n(r).replace(/<br>/gi,'\n');}:n,p=n('>')=='>'?function(r){return o(r).replace(/>/g,'&gt;');}:o,q=n('  ')=='&nbsp; '?function(r){return p(r).replace(/&nbsp;/g,' ');}:p;this.htmlEncode=q;return this.htmlEncode(m);},htmlEncodeAttr:function(m){return m.replace(/"/g,'&quot;').replace(/</g,'&lt;').replace(/>/g,'&gt;');},getNextNumber:(function(){var m=0;return function(){return++m;};})(),getNextId:function(){return 'cke_'+this.getNextNumber();},override:function(m,n){return n(m);},setTimeout:function(m,n,o,p,q){if(!q)q=window;if(!o)o=q;return q.setTimeout(function(){if(p)m.apply(o,[].concat(p));else m.apply(o);},n||0);},trim:(function(){var m=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(n){return n.replace(m,'');};})(),ltrim:(function(){var m=/^[ \t\n\r]+/g;return function(n){return n.replace(m,'');};})(),rtrim:(function(){var m=/[ \t\n\r]+$/g;return function(n){return n.replace(m,'');};})(),indexOf:Array.prototype.indexOf?function(m,n){return m.indexOf(n);}:function(m,n){for(var o=0,p=m.length;o<p;o++){if(m[o]===n)return o;}return-1;},bind:function(m,n){return function(){return m.apply(n,arguments);};},createClass:function(m){var n=m.$,o=m.base,p=m.privates||m._,q=m.proto,r=m.statics;if(p){var s=n;n=function(){var w=this;var t=w._||(w._={});for(var u in p){var v=p[u];t[u]=typeof v=='function'?h.tools.bind(v,w):v;}s.apply(w,arguments);};}if(o){n.prototype=this.prototypedCopy(o.prototype);n.prototype['constructor']=n;
n.prototype.base=function(){this.base=o.prototype.base;o.apply(this,arguments);this.base=arguments.callee;};}if(q)this.extend(n.prototype,q,true);if(r)this.extend(n,r,true);return n;},addFunction:function(m,n){return l.push(function(){return m.apply(n||this,arguments);})-1;},removeFunction:function(m){l[m]=null;},callFunction:function(m){var n=l[m];return n&&n.apply(window,Array.prototype.slice.call(arguments,1));},cssLength:(function(){var m=/^\d+(?:\.\d+)?$/;return function(n){return n+(m.test(n)?'px':'');};})(),repeat:function(m,n){return new Array(n+1).join(m);},tryThese:function(){var m;for(var n=0,o=arguments.length;n<o;n++){var p=arguments[n];try{m=p();break;}catch(q){}}return m;},genKey:function(){return Array.prototype.slice.call(arguments).join('-');}};})();var l=h.tools;h.dtd=(function(){var m=l.extend,n={isindex:1,fieldset:1},o={input:1,button:1,select:1,textarea:1,label:1},p=m({a:1},o),q=m({iframe:1},p),r={hr:1,ul:1,menu:1,div:1,blockquote:1,noscript:1,table:1,center:1,address:1,dir:1,pre:1,h5:1,dl:1,h4:1,noframes:1,h6:1,ol:1,h1:1,h3:1,h2:1},s={ins:1,del:1,script:1,style:1},t=m({b:1,acronym:1,bdo:1,'var':1,'#':1,abbr:1,code:1,br:1,i:1,cite:1,kbd:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,dfn:1,span:1},s),u=m({sub:1,img:1,object:1,sup:1,basefont:1,map:1,applet:1,font:1,big:1,small:1},t),v=m({p:1},u),w=m({iframe:1},u,o),x={img:1,noscript:1,br:1,kbd:1,center:1,button:1,basefont:1,h5:1,h4:1,samp:1,h6:1,ol:1,h1:1,h3:1,h2:1,form:1,font:1,'#':1,select:1,menu:1,ins:1,abbr:1,label:1,code:1,table:1,script:1,cite:1,input:1,iframe:1,strong:1,textarea:1,noframes:1,big:1,small:1,span:1,hr:1,sub:1,bdo:1,'var':1,div:1,object:1,sup:1,strike:1,dir:1,map:1,dl:1,applet:1,del:1,isindex:1,fieldset:1,ul:1,b:1,acronym:1,a:1,blockquote:1,i:1,u:1,s:1,tt:1,address:1,q:1,pre:1,p:1,em:1,dfn:1},y=m({a:1},w),z={tr:1},A={'#':1},B=m({param:1},x),C=m({form:1},n,q,r,v),D={li:1},E={style:1,script:1},F={base:1,link:1,meta:1,title:1},G=m(F,E),H={head:1,body:1},I={html:1},J={address:1,blockquote:1,center:1,dir:1,div:1,dl:1,fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hr:1,isindex:1,menu:1,noframes:1,ol:1,p:1,pre:1,table:1,ul:1};return{$nonBodyContent:m(I,H,F),$block:J,$blockLimit:{body:1,div:1,td:1,th:1,caption:1,form:1},$inline:y,$body:m({script:1,style:1},J),$cdata:{script:1,style:1},$empty:{area:1,base:1,br:1,col:1,hr:1,img:1,input:1,link:1,meta:1,param:1},$listItem:{dd:1,dt:1,li:1},$list:{ul:1,ol:1,dl:1},$nonEditable:{applet:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,script:1,textarea:1,param:1},$removeEmpty:{abbr:1,acronym:1,address:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,'var':1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},html:H,head:G,style:A,script:A,body:C,base:{},link:{},meta:{},title:A,col:{},tr:{td:1,th:1},img:{},colgroup:{col:1},noscript:C,td:C,br:{},th:C,center:C,kbd:y,button:m(v,r),basefont:{},h5:y,h4:y,samp:y,h6:y,ol:D,h1:y,h3:y,option:A,h2:y,form:m(n,q,r,v),select:{optgroup:1,option:1},font:y,ins:y,menu:D,abbr:y,label:y,table:{thead:1,col:1,tbody:1,tr:1,colgroup:1,caption:1,tfoot:1},code:y,tfoot:z,cite:y,li:C,input:{},iframe:C,strong:y,textarea:A,noframes:C,big:y,small:y,span:y,hr:{},dt:y,sub:y,optgroup:{option:1},param:{},bdo:y,'var':y,div:C,object:B,sup:y,dd:C,strike:y,area:{},dir:D,map:m({area:1,form:1,p:1},n,s,r),applet:B,dl:{dt:1,dd:1},del:y,isindex:{},fieldset:m({legend:1},x),thead:z,ul:D,acronym:y,b:y,a:w,blockquote:C,caption:y,i:y,u:y,tbody:z,s:y,address:m(q,v),tt:y,legend:y,q:y,pre:m(t,p),p:y,em:y,dfn:y};
})();var m=h.dtd;k.event=function(n){this.$=n;};k.event.prototype={getKey:function(){return this.$.keyCode||this.$.which;},getKeystroke:function(){var o=this;var n=o.getKey();if(o.$.ctrlKey||o.$.metaKey)n+=1000;if(o.$.shiftKey)n+=2000;if(o.$.altKey)n+=4000;return n;},preventDefault:function(n){var o=this.$;if(o.preventDefault)o.preventDefault();else o.returnValue=false;if(n)this.stopPropagation();},stopPropagation:function(){var n=this.$;if(n.stopPropagation)n.stopPropagation();else n.cancelBubble=true;},getTarget:function(){var n=this.$.target||this.$.srcElement;return n?new k.node(n):null;}};h.CTRL=1000;h.SHIFT=2000;h.ALT=4000;k.domObject=function(n){if(n)this.$=n;};k.domObject.prototype=(function(){var n=function(o,p){return function(q){if(typeof h!='undefined')o.fire(p,new k.event(q));};};return{getPrivate:function(){var o;if(!(o=this.getCustomData('_')))this.setCustomData('_',o={});return o;},on:function(o){var r=this;var p=r.getCustomData('_cke_nativeListeners');if(!p){p={};r.setCustomData('_cke_nativeListeners',p);}if(!p[o]){var q=p[o]=n(r,o);if(r.$.attachEvent)r.$.attachEvent('on'+o,q);else if(r.$.addEventListener)r.$.addEventListener(o,q,!!h.event.useCapture);}return h.event.prototype.on.apply(r,arguments);},removeListener:function(o){var r=this;h.event.prototype.removeListener.apply(r,arguments);if(!r.hasListeners(o)){var p=r.getCustomData('_cke_nativeListeners'),q=p&&p[o];if(q){if(r.$.detachEvent)r.$.detachEvent('on'+o,q);else if(r.$.removeEventListener)r.$.removeEventListener(o,q,false);delete p[o];}}},removeAllListeners:function(){var r=this;var o=r.getCustomData('_cke_nativeListeners');for(var p in o){var q=o[p];if(r.$.detachEvent)r.$.detachEvent('on'+p,q);else if(r.$.removeEventListener)r.$.removeEventListener(p,q,false);delete o[p];}}};})();(function(n){var o={};h.on('reset',function(){o={};});n.equals=function(p){return p&&p.$===this.$;};n.setCustomData=function(p,q){var r=this.getUniqueId(),s=o[r]||(o[r]={});s[p]=q;return this;};n.getCustomData=function(p){var q=this.$['data-cke-expando'],r=q&&o[q];return r&&r[p];};n.removeCustomData=function(p){var q=this.$['data-cke-expando'],r=q&&o[q],s=r&&r[p];if(typeof s!='undefined')delete r[p];return s||null;};n.clearCustomData=function(){this.removeAllListeners();var p=this.$['data-cke-expando'];p&&delete o[p];};n.getUniqueId=function(){return this.$['data-cke-expando']||(this.$['data-cke-expando']=l.getNextNumber());};h.event.implementOn(n);})(k.domObject.prototype);k.window=function(n){k.domObject.call(this,n);
};k.window.prototype=new k.domObject();l.extend(k.window.prototype,{focus:function(){if(i.webkit&&this.$.parent)this.$.parent.focus();this.$.focus();},getViewPaneSize:function(){var n=this.$.document,o=n.compatMode=='CSS1Compat';return{width:(o?n.documentElement.clientWidth:n.body.clientWidth)||0,height:(o?n.documentElement.clientHeight:n.body.clientHeight)||0};},getScrollPosition:function(){var n=this.$;if('pageXOffset' in n)return{x:n.pageXOffset||0,y:n.pageYOffset||0};else{var o=n.document;return{x:o.documentElement.scrollLeft||o.body.scrollLeft||0,y:o.documentElement.scrollTop||o.body.scrollTop||0};}}});k.document=function(n){k.domObject.call(this,n);};var n=k.document;n.prototype=new k.domObject();l.extend(n.prototype,{appendStyleSheet:function(o){if(this.$.createStyleSheet)this.$.createStyleSheet(o);else{var p=new k.element('link');p.setAttributes({rel:'stylesheet',type:'text/css',href:o});this.getHead().append(p);}},appendStyleText:function(o){var r=this;if(r.$.createStyleSheet){var p=r.$.createStyleSheet('');p.cssText=o;}else{var q=new k.element('style',r);q.append(new k.text(o,r));r.getHead().append(q);}},createElement:function(o,p){var q=new k.element(o,this);if(p){if(p.attributes)q.setAttributes(p.attributes);if(p.styles)q.setStyles(p.styles);}return q;},createText:function(o){return new k.text(o,this);},focus:function(){this.getWindow().focus();},getById:function(o){var p=this.$.getElementById(o);return p?new k.element(p):null;},getByAddress:function(o,p){var q=this.$.documentElement;for(var r=0;q&&r<o.length;r++){var s=o[r];if(!p){q=q.childNodes[s];continue;}var t=-1;for(var u=0;u<q.childNodes.length;u++){var v=q.childNodes[u];if(p===true&&v.nodeType==3&&v.previousSibling&&v.previousSibling.nodeType==3)continue;t++;if(t==s){q=v;break;}}}return q?new k.node(q):null;},getElementsByTag:function(o,p){if(!(j&&!(document.documentMode>8))&&p)o=p+':'+o;return new k.nodeList(this.$.getElementsByTagName(o));},getHead:function(){var o=this.$.getElementsByTagName('head')[0];if(!o)o=this.getDocumentElement().append(new k.element('head'),true);else o=new k.element(o);return(this.getHead=function(){return o;})();},getBody:function(){var o=new k.element(this.$.body);return(this.getBody=function(){return o;})();},getDocumentElement:function(){var o=new k.element(this.$.documentElement);return(this.getDocumentElement=function(){return o;})();},getWindow:function(){var o=new k.window(this.$.parentWindow||this.$.defaultView);return(this.getWindow=function(){return o;
})();},write:function(o){var p=this;p.$.open('text/html','replace');i.isCustomDomain()&&(p.$.domain=document.domain);p.$.write(o);p.$.close();}});k.node=function(o){if(o){switch(o.nodeType){case 9:return new n(o);case 1:return new k.element(o);case 3:return new k.text(o);}k.domObject.call(this,o);}return this;};k.node.prototype=new k.domObject();h.NODE_ELEMENT=1;h.NODE_DOCUMENT=9;h.NODE_TEXT=3;h.NODE_COMMENT=8;h.NODE_DOCUMENT_FRAGMENT=11;h.POSITION_IDENTICAL=0;h.POSITION_DISCONNECTED=1;h.POSITION_FOLLOWING=2;h.POSITION_PRECEDING=4;h.POSITION_IS_CONTAINED=8;h.POSITION_CONTAINS=16;l.extend(k.node.prototype,{appendTo:function(o,p){o.append(this,p);return o;},clone:function(o,p){var q=this.$.cloneNode(o),r=function(s){if(s.nodeType!=1)return;if(!p)s.removeAttribute('id',false);s.removeAttribute('data-cke-expando',false);if(o){var t=s.childNodes;for(var u=0;u<t.length;u++)r(t[u]);}};r(q);return new k.node(q);},hasPrevious:function(){return!!this.$.previousSibling;},hasNext:function(){return!!this.$.nextSibling;},insertAfter:function(o){o.$.parentNode.insertBefore(this.$,o.$.nextSibling);return o;},insertBefore:function(o){o.$.parentNode.insertBefore(this.$,o.$);return o;},insertBeforeMe:function(o){this.$.parentNode.insertBefore(o.$,this.$);return o;},getAddress:function(o){var p=[],q=this.getDocument().$.documentElement,r=this.$;while(r&&r!=q){var s=r.parentNode;if(s)p.unshift(this.getIndex.call({$:r},o));r=s;}return p;},getDocument:function(){return new n(this.$.ownerDocument||this.$.parentNode.ownerDocument);},getIndex:function(o){var p=this.$,q=0;while(p=p.previousSibling){if(o&&p.nodeType==3&&(!p.nodeValue.length||p.previousSibling&&p.previousSibling.nodeType==3))continue;q++;}return q;},getNextSourceNode:function(o,p,q){if(q&&!q.call){var r=q;q=function(u){return!u.equals(r);};}var s=!o&&this.getFirst&&this.getFirst(),t;if(!s){if(this.type==1&&q&&q(this,true)===false)return null;s=this.getNext();}while(!s&&(t=(t||this).getParent())){if(q&&q(t,true)===false)return null;s=t.getNext();}if(!s)return null;if(q&&q(s)===false)return null;if(p&&p!=s.type)return s.getNextSourceNode(false,p,q);return s;},getPreviousSourceNode:function(o,p,q){if(q&&!q.call){var r=q;q=function(u){return!u.equals(r);};}var s=!o&&this.getLast&&this.getLast(),t;if(!s){if(this.type==1&&q&&q(this,true)===false)return null;s=this.getPrevious();}while(!s&&(t=(t||this).getParent())){if(q&&q(t,true)===false)return null;s=t.getPrevious();}if(!s)return null;if(q&&q(s)===false)return null;if(p&&s.type!=p)return s.getPreviousSourceNode(false,p,q);
return s;},getPrevious:function(o){var p=this.$,q;do{p=p.previousSibling;q=p&&new k.node(p);}while(q&&o&&!o(q))return q;},getNext:function(o){var p=this.$,q;do{p=p.nextSibling;q=p&&new k.node(p);}while(q&&o&&!o(q))return q;},getParent:function(){var o=this.$.parentNode;return o&&o.nodeType==1?new k.node(o):null;},getParents:function(o){var p=this,q=[];do q[o?'push':'unshift'](p);while(p=p.getParent())return q;},getCommonAncestor:function(o){var q=this;if(o.equals(q))return q;if(o.contains&&o.contains(q))return o;var p=q.contains?q:q.getParent();do{if(p.contains(o))return p;}while(p=p.getParent())return null;},getPosition:function(o){var p=this.$,q=o.$;if(p.compareDocumentPosition)return p.compareDocumentPosition(q);if(p==q)return 0;if(this.type==1&&o.type==1){if(p.contains){if(p.contains(q))return 16+4;if(q.contains(p))return 8+2;}if('sourceIndex' in p)return p.sourceIndex<0||q.sourceIndex<0?1:p.sourceIndex<q.sourceIndex?4:2;}var r=this.getAddress(),s=o.getAddress(),t=Math.min(r.length,s.length);for(var u=0;u<=t-1;u++){if(r[u]!=s[u]){if(u<t)return r[u]<s[u]?4:2;break;}}return r.length<s.length?16+4:8+2;},getAscendant:function(o,p){var q=this.$;if(!p)q=q.parentNode;while(q){if(q.nodeName&&q.nodeName.toLowerCase()==o)return new k.node(q);q=q.parentNode;}return null;},hasAscendant:function(o,p){var q=this.$;if(!p)q=q.parentNode;while(q){if(q.nodeName&&q.nodeName.toLowerCase()==o)return true;q=q.parentNode;}return false;},move:function(o,p){o.append(this.remove(),p);},remove:function(o){var p=this.$,q=p.parentNode;if(q){if(o)for(var r;r=p.firstChild;)q.insertBefore(p.removeChild(r),p);q.removeChild(p);}return this;},replace:function(o){this.insertBefore(o);o.remove();},trim:function(){this.ltrim();this.rtrim();},ltrim:function(){var r=this;var o;while(r.getFirst&&(o=r.getFirst())){if(o.type==3){var p=l.ltrim(o.getText()),q=o.getLength();if(!p){o.remove();continue;}else if(p.length<q){o.split(q-p.length);r.$.removeChild(r.$.firstChild);}}break;}},rtrim:function(){var r=this;var o;while(r.getLast&&(o=r.getLast())){if(o.type==3){var p=l.rtrim(o.getText()),q=o.getLength();if(!p){o.remove();continue;}else if(p.length<q){o.split(p.length);r.$.lastChild.parentNode.removeChild(r.$.lastChild);}}break;}if(!j&&!i.opera){o=r.$.lastChild;if(o&&o.type==1&&o.nodeName.toLowerCase()=='br')o.parentNode.removeChild(o);}},isReadOnly:function(){var o=this;while(o){if(o.type==1){if(o.is('body')||!!o.data('cke-editable'))break;if(o.getAttribute('contentEditable')=='false')return o;else if(o.getAttribute('contentEditable')=='true')break;
}o=o.getParent();}return false;}});k.nodeList=function(o){this.$=o;};k.nodeList.prototype={count:function(){return this.$.length;},getItem:function(o){var p=this.$[o];return p?new k.node(p):null;}};k.element=function(o,p){if(typeof o=='string')o=(p?p.$:document).createElement(o);k.domObject.call(this,o);};var o=k.element;o.get=function(p){return p&&(p.$?p:new o(p));};o.prototype=new k.node();o.createFromHtml=function(p,q){var r=new o('div',q);r.setHtml(p);return r.getFirst().remove();};o.setMarker=function(p,q,r,s){var t=q.getCustomData('list_marker_id')||q.setCustomData('list_marker_id',l.getNextNumber()).getCustomData('list_marker_id'),u=q.getCustomData('list_marker_names')||q.setCustomData('list_marker_names',{}).getCustomData('list_marker_names');p[t]=q;u[r]=1;return q.setCustomData(r,s);};o.clearAllMarkers=function(p){for(var q in p)o.clearMarkers(p,p[q],1);};o.clearMarkers=function(p,q,r){var s=q.getCustomData('list_marker_names'),t=q.getCustomData('list_marker_id');for(var u in s)q.removeCustomData(u);q.removeCustomData('list_marker_names');if(r){q.removeCustomData('list_marker_id');delete p[t];}};l.extend(o.prototype,{type:1,addClass:function(p){var q=this.$.className;if(q){var r=new RegExp('(?:^|\\s)'+p+'(?:\\s|$)','');if(!r.test(q))q+=' '+p;}this.$.className=q||p;},removeClass:function(p){var q=this.getAttribute('class');if(q){var r=new RegExp('(?:^|\\s+)'+p+'(?=\\s|$)','i');if(r.test(q)){q=q.replace(r,'').replace(/^\s+/,'');if(q)this.setAttribute('class',q);else this.removeAttribute('class');}}},hasClass:function(p){var q=new RegExp('(?:^|\\s+)'+p+'(?=\\s|$)','');return q.test(this.getAttribute('class'));},append:function(p,q){var r=this;if(typeof p=='string')p=r.getDocument().createElement(p);if(q)r.$.insertBefore(p.$,r.$.firstChild);else r.$.appendChild(p.$);return p;},appendHtml:function(p){var r=this;if(!r.$.childNodes.length)r.setHtml(p);else{var q=new o('div',r.getDocument());q.setHtml(p);q.moveChildren(r);}},appendText:function(p){if(this.$.text!=undefined)this.$.text+=p;else this.append(new k.text(p));},appendBogus:function(){var r=this;var p=r.getLast();while(p&&p.type==3&&!l.rtrim(p.getText()))p=p.getPrevious();if(!p||!p.is||!p.is('br')){var q=i.opera?r.getDocument().createText(''):r.getDocument().createElement('br');i.gecko&&q.setAttribute('type','_moz');r.append(q);}},breakParent:function(p){var s=this;var q=new k.range(s.getDocument());q.setStartAfter(s);q.setEndAfter(p);var r=q.extractContents();q.insertNode(s.remove());r.insertAfterNode(s);
},contains:j||i.webkit?function(p){var q=this.$;return p.type!=1?q.contains(p.getParent().$):q!=p.$&&q.contains(p.$);}:function(p){return!!(this.$.compareDocumentPosition(p.$)&16);},focus:(function(){function p(){try{this.$.focus();}catch(q){}};return function(q){if(q)l.setTimeout(p,100,this);else p.call(this);};})(),getHtml:function(){var p=this.$.innerHTML;return j?p.replace(/<\?[^>]*>/g,''):p;},getOuterHtml:function(){var q=this;if(q.$.outerHTML)return q.$.outerHTML.replace(/<\?[^>]*>/,'');var p=q.$.ownerDocument.createElement('div');p.appendChild(q.$.cloneNode(true));return p.innerHTML;},setHtml:function(p){return this.$.innerHTML=p;},setText:function(p){o.prototype.setText=this.$.innerText!=undefined?function(q){return this.$.innerText=q;}:function(q){return this.$.textContent=q;};return this.setText(p);},getAttribute:(function(){var p=function(q){return this.$.getAttribute(q,2);};if(j&&(i.ie7Compat||i.ie6Compat))return function(q){var u=this;switch(q){case 'class':q='className';break;case 'http-equiv':q='httpEquiv';break;case 'name':return u.$.name;case 'tabindex':var r=p.call(u,q);if(r!==0&&u.$.tabIndex===0)r=null;return r;break;case 'checked':var s=u.$.attributes.getNamedItem(q),t=s.specified?s.nodeValue:u.$.checked;return t?'checked':null;case 'hspace':case 'value':return u.$[q];case 'style':return u.$.style.cssText;}return p.call(u,q);};else return p;})(),getChildren:function(){return new k.nodeList(this.$.childNodes);},getComputedStyle:j?function(p){return this.$.currentStyle[l.cssStyleToDomStyle(p)];}:function(p){return this.getWindow().$.getComputedStyle(this.$,'').getPropertyValue(p);},getDtd:function(){var p=m[this.getName()];this.getDtd=function(){return p;};return p;},getElementsByTag:n.prototype.getElementsByTag,getTabIndex:j?function(){var p=this.$.tabIndex;if(p===0&&!m.$tabIndex[this.getName()]&&parseInt(this.getAttribute('tabindex'),10)!==0)p=-1;return p;}:i.webkit?function(){var p=this.$.tabIndex;if(p==undefined){p=parseInt(this.getAttribute('tabindex'),10);if(isNaN(p))p=-1;}return p;}:function(){return this.$.tabIndex;},getText:function(){return this.$.textContent||this.$.innerText||'';},getWindow:function(){return this.getDocument().getWindow();},getId:function(){return this.$.id||null;},getNameAtt:function(){return this.$.name||null;},getName:function(){var p=this.$.nodeName.toLowerCase();if(j&&!(document.documentMode>8)){var q=this.$.scopeName;if(q!='HTML')p=q.toLowerCase()+':'+p;}return(this.getName=function(){return p;})();},getValue:function(){return this.$.value;
},getFirst:function(p){var q=this.$.firstChild,r=q&&new k.node(q);if(r&&p&&!p(r))r=r.getNext(p);return r;},getLast:function(p){var q=this.$.lastChild,r=q&&new k.node(q);if(r&&p&&!p(r))r=r.getPrevious(p);return r;},getStyle:function(p){return this.$.style[l.cssStyleToDomStyle(p)];},is:function(){var p=this.getName();for(var q=0;q<arguments.length;q++){if(arguments[q]==p)return true;}return false;},isEditable:function(){if(this.isReadOnly())return false;var p=this.getName(),q=!m.$nonEditable[p]&&(m[p]||m.span);return q&&q['#'];},isIdentical:function(p){if(this.getName()!=p.getName())return false;var q=this.$.attributes,r=p.$.attributes,s=q.length,t=r.length;for(var u=0;u<s;u++){var v=q[u];if(v.nodeName=='_moz_dirty')continue;if((!j||v.specified&&v.nodeName!='data-cke-expando')&&v.nodeValue!=p.getAttribute(v.nodeName))return false;}if(j)for(u=0;u<t;u++){v=r[u];if(v.specified&&v.nodeName!='data-cke-expando'&&v.nodeValue!=this.getAttribute(v.nodeName))return false;}return true;},isVisible:function(){var p=!!this.$.offsetHeight&&this.getComputedStyle('visibility')!='hidden',q,r;if(p&&(i.webkit||i.opera)){q=this.getWindow();if(!q.equals(h.document.getWindow())&&(r=q.$.frameElement))p=new o(r).isVisible();}return p;},isEmptyInlineRemoveable:function(){if(!m.$removeEmpty[this.getName()])return false;var p=this.getChildren();for(var q=0,r=p.count();q<r;q++){var s=p.getItem(q);if(s.type==1&&s.data('cke-bookmark'))continue;if(s.type==1&&!s.isEmptyInlineRemoveable()||s.type==3&&l.trim(s.getText()))return false;}return true;},hasAttributes:j&&(i.ie7Compat||i.ie6Compat)?function(){var p=this.$.attributes;for(var q=0;q<p.length;q++){var r=p[q];switch(r.nodeName){case 'class':if(this.getAttribute('class'))return true;case 'data-cke-expando':continue;default:if(r.specified)return true;}}return false;}:function(){var p=this.$.attributes,q=p.length,r={'data-cke-expando':1,_moz_dirty:1};return q>0&&(q>2||!r[p[0].nodeName]||q==2&&!r[p[1].nodeName]);},hasAttribute:(function(){function p(q){var r=this.$.attributes.getNamedItem(q);return!!(r&&r.specified);};return j&&i.version<8?function(q){if(q=='name')return!!this.$.name;return p.call(this,q);}:p;})(),hide:function(){this.setStyle('display','none');},moveChildren:function(p,q){var r=this.$;p=p.$;if(r==p)return;var s;if(q)while(s=r.lastChild)p.insertBefore(r.removeChild(s),p.firstChild);else while(s=r.firstChild)p.appendChild(r.removeChild(s));},mergeSiblings:(function(){function p(q,r,s){if(r&&r.type==1){var t=[];while(r.data('cke-bookmark')||r.isEmptyInlineRemoveable()){t.push(r);
r=s?r.getNext():r.getPrevious();if(!r||r.type!=1)return;}if(q.isIdentical(r)){var u=s?q.getLast():q.getFirst();while(t.length)t.shift().move(q,!s);r.moveChildren(q,!s);r.remove();if(u&&u.type==1)u.mergeSiblings();}}};return function(q){var r=this;if(!(q===false||m.$removeEmpty[r.getName()]||r.is('a')))return;p(r,r.getNext(),true);p(r,r.getPrevious());};})(),show:function(){this.setStyles({display:'',visibility:''});},setAttribute:(function(){var p=function(q,r){this.$.setAttribute(q,r);return this;};if(j&&(i.ie7Compat||i.ie6Compat))return function(q,r){var s=this;if(q=='class')s.$.className=r;else if(q=='style')s.$.style.cssText=r;else if(q=='tabindex')s.$.tabIndex=r;else if(q=='checked')s.$.checked=r;else p.apply(s,arguments);return s;};else return p;})(),setAttributes:function(p){for(var q in p)this.setAttribute(q,p[q]);return this;},setValue:function(p){this.$.value=p;return this;},removeAttribute:(function(){var p=function(q){this.$.removeAttribute(q);};if(j&&(i.ie7Compat||i.ie6Compat))return function(q){if(q=='class')q='className';else if(q=='tabindex')q='tabIndex';p.call(this,q);};else return p;})(),removeAttributes:function(p){if(l.isArray(p))for(var q=0;q<p.length;q++)this.removeAttribute(p[q]);else for(var r in p)p.hasOwnProperty(r)&&this.removeAttribute(r);},removeStyle:function(p){var q=this;q.setStyle(p,'');if(q.$.style.removeAttribute)q.$.style.removeAttribute(l.cssStyleToDomStyle(p));if(!q.$.style.cssText)q.removeAttribute('style');},setStyle:function(p,q){this.$.style[l.cssStyleToDomStyle(p)]=q;return this;},setStyles:function(p){for(var q in p)this.setStyle(q,p[q]);return this;},setOpacity:function(p){if(j){p=Math.round(p*100);this.setStyle('filter',p>=100?'':'progid:DXImageTransform.Microsoft.Alpha(opacity='+p+')');}else this.setStyle('opacity',p);},unselectable:i.gecko?function(){this.$.style.MozUserSelect='none';this.on('dragstart',function(p){p.data.preventDefault();});}:i.webkit?function(){this.$.style.KhtmlUserSelect='none';this.on('dragstart',function(p){p.data.preventDefault();});}:function(){if(j||i.opera){var p=this.$,q,r=0;p.unselectable='on';while(q=p.all[r++])switch(q.tagName.toLowerCase()){case 'iframe':case 'textarea':case 'input':case 'select':break;default:q.unselectable='on';}}},getPositionedAncestor:function(){var p=this;while(p.getName()!='html'){if(p.getComputedStyle('position')!='static')return p;p=p.getParent();}return null;},getDocumentPosition:function(p){var K=this;var q=0,r=0,s=K.getDocument().getBody(),t=K.getDocument().$.compatMode=='BackCompat',u=K.getDocument();
if(document.documentElement.getBoundingClientRect){var v=K.$.getBoundingClientRect(),w=u.$,x=w.documentElement,y=x.clientTop||s.$.clientTop||0,z=x.clientLeft||s.$.clientLeft||0,A=true;if(j){var B=u.getDocumentElement().contains(K),C=u.getBody().contains(K);A=t&&C||!t&&B;}if(A){q=v.left+(!t&&x.scrollLeft||s.$.scrollLeft);q-=z;r=v.top+(!t&&x.scrollTop||s.$.scrollTop);r-=y;}}else{var D=K,E=null,F;while(D&&!(D.getName()=='body'||D.getName()=='html')){q+=D.$.offsetLeft-D.$.scrollLeft;r+=D.$.offsetTop-D.$.scrollTop;if(!D.equals(K)){q+=D.$.clientLeft||0;r+=D.$.clientTop||0;}var G=E;while(G&&!G.equals(D)){q-=G.$.scrollLeft;r-=G.$.scrollTop;G=G.getParent();}E=D;D=(F=D.$.offsetParent)?new o(F):null;}}if(p){var H=K.getWindow(),I=p.getWindow();if(!H.equals(I)&&H.$.frameElement){var J=new o(H.$.frameElement).getDocumentPosition(p);q+=J.x;r+=J.y;}}if(!document.documentElement.getBoundingClientRect)if(i.gecko&&!t){q+=K.$.clientLeft?1:0;r+=K.$.clientTop?1:0;}return{x:q,y:r};},scrollIntoView:function(p){var v=this;var q=v.getWindow(),r=q.getViewPaneSize().height,s=r*-1;if(p)s+=r;else{s+=v.$.offsetHeight||0;s+=parseInt(v.getComputedStyle('marginBottom')||0,10)||0;}var t=v.getDocumentPosition();s+=t.y;s=s<0?0:s;var u=q.getScrollPosition().y;if(s>u||s<u-r)q.$.scrollTo(0,s);},setState:function(p){var q=this;switch(p){case 1:q.addClass('cke_on');q.removeClass('cke_off');q.removeClass('cke_disabled');break;case 0:q.addClass('cke_disabled');q.removeClass('cke_off');q.removeClass('cke_on');break;default:q.addClass('cke_off');q.removeClass('cke_on');q.removeClass('cke_disabled');break;}},getFrameDocument:function(){var p=this.$;try{p.contentWindow.document;}catch(q){p.src=p.src;if(j&&i.version<7)window.showModalDialog('javascript:document.write("<script>window.setTimeout(function(){window.close();},50);</script>")');}return p&&new n(p.contentWindow.document);},copyAttributes:function(p,q){var w=this;var r=w.$.attributes;q=q||{};for(var s=0;s<r.length;s++){var t=r[s],u=t.nodeName.toLowerCase(),v;if(u in q)continue;if(u=='checked'&&(v=w.getAttribute(u)))p.setAttribute(u,v);else if(t.specified||j&&t.nodeValue&&u=='value'){v=w.getAttribute(u);if(v===null)v=t.nodeValue;p.setAttribute(u,v);}}if(w.$.style.cssText!=='')p.$.style.cssText=w.$.style.cssText;},renameNode:function(p){var s=this;if(s.getName()==p)return;var q=s.getDocument(),r=new o(p,q);s.copyAttributes(r);s.moveChildren(r);s.getParent()&&s.$.parentNode.replaceChild(r.$,s.$);r.$['data-cke-expando']=s.$['data-cke-expando'];s.$=r.$;
},getChild:function(p){var q=this.$;if(!p.slice)q=q.childNodes[p];else while(p.length>0&&q)q=q.childNodes[p.shift()];return q?new k.node(q):null;},getChildCount:function(){return this.$.childNodes.length;},disableContextMenu:function(){this.on('contextmenu',function(p){if(!p.data.getTarget().hasClass('cke_enable_context_menu'))p.data.preventDefault();});},getDirection:function(p){return p?this.getComputedStyle('direction'):this.getStyle('direction')||this.getAttribute('dir');},data:function(p,q){p='data-'+p;if(q===undefined)return this.getAttribute(p);else if(q===false)this.removeAttribute(p);else this.setAttribute(p,q);return null;}});(function(){var p={width:['border-left-width','border-right-width','padding-left','padding-right'],height:['border-top-width','border-bottom-width','padding-top','padding-bottom']};function q(r){var s=0;for(var t=0,u=p[r].length;t<u;t++)s+=parseInt(this.getComputedStyle(p[r][t])||0,10)||0;return s;};o.prototype.setSize=function(r,s,t){if(typeof s=='number'){if(t&&!(j&&i.quirks))s-=q.call(this,r);this.setStyle(r,s+'px');}};o.prototype.getSize=function(r,s){var t=Math.max(this.$['offset'+l.capitalize(r)],this.$['client'+l.capitalize(r)])||0;if(s)t-=q.call(this,r);return t;};})();h.command=function(p,q){this.uiItems=[];this.exec=function(r){if(this.state==0)return false;if(this.editorFocus)p.focus();return q.exec.call(this,p,r)!==false;};l.extend(this,q,{modes:{wysiwyg:1},editorFocus:1,state:2});h.event.call(this);};h.command.prototype={enable:function(){var p=this;if(p.state==0)p.setState(!p.preserveState||typeof p.previousState=='undefined'?2:p.previousState);},disable:function(){this.setState(0);},setState:function(p){var q=this;if(q.state==p)return false;q.previousState=q.state;q.state=p;q.fire('state');return true;},toggleState:function(){var p=this;if(p.state==2)p.setState(1);else if(p.state==1)p.setState(2);}};h.event.implementOn(h.command.prototype,true);h.ENTER_P=1;h.ENTER_BR=2;h.ENTER_DIV=3;h.config={customConfig:'config.js',autoUpdateElement:true,baseHref:'',contentsCss:h.basePath+'contents.css',contentsLangDirection:'ui',contentsLanguage:'',language:'',defaultLanguage:'en',enterMode:1,forceEnterMode:false,shiftEnterMode:2,corePlugins:'',docType:'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">',bodyId:'',bodyClass:'',fullPage:false,height:200,plugins:'about,a11yhelp,basicstyles,bidi,blockquote,button,clipboard,colorbutton,colordialog,contextmenu,dialogadvtab,div,elementspath,enterkey,entities,filebrowser,find,flash,font,format,forms,horizontalrule,htmldataprocessor,iframe,image,indent,justify,keystrokes,link,list,liststyle,maximize,newpage,pagebreak,pastefromword,pastetext,popup,preview,print,removeformat,resize,save,scayt,smiley,showblocks,showborders,sourcearea,stylescombo,table,tabletools,specialchar,tab,templates,toolbar,undo,wysiwygarea,wsc',extraPlugins:'',removePlugins:'',protectedSource:[],tabIndex:0,theme:'default',skin:'kama',width:'',baseFloatZIndex:10000};
var p=h.config;h.focusManager=function(q){if(q.focusManager)return q.focusManager;this.hasFocus=false;this._={editor:q};return this;};h.focusManager.prototype={focus:function(){var r=this;if(r._.timer)clearTimeout(r._.timer);if(!r.hasFocus){if(h.currentInstance)h.currentInstance.focusManager.forceBlur();var q=r._.editor;q.container.getChild(1).addClass('cke_focus');r.hasFocus=true;q.fire('focus');}},blur:function(){var q=this;if(q._.timer)clearTimeout(q._.timer);q._.timer=setTimeout(function(){delete q._.timer;q.forceBlur();},100);},forceBlur:function(){if(this.hasFocus){var q=this._.editor;q.container.getChild(1).removeClass('cke_focus');this.hasFocus=false;q.fire('blur');}}};(function(){var q={};h.lang={languages:{af:1,ar:1,bg:1,bn:1,bs:1,ca:1,cs:1,cy:1,da:1,de:1,el:1,'en-au':1,'en-ca':1,'en-gb':1,en:1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fo:1,'fr-ca':1,fr:1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,is:1,it:1,ja:1,ka:1,km:1,ko:1,lt:1,lv:1,mn:1,ms:1,nb:1,nl:1,no:1,pl:1,'pt-br':1,pt:1,ro:1,ru:1,sk:1,sl:1,'sr-latn':1,sr:1,sv:1,th:1,tr:1,uk:1,vi:1,'zh-cn':1,zh:1},load:function(r,s,t){if(!r||!h.lang.languages[r])r=this.detect(s,r);if(!this[r])h.scriptLoader.load(h.getUrl('lang/'+r+'.js'),function(){t(r,this[r]);},this);else t(r,this[r]);},detect:function(r,s){var t=this.languages;s=s||navigator.userLanguage||navigator.language;var u=s.toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/),v=u[1],w=u[2];if(t[v+'-'+w])v=v+'-'+w;else if(!t[v])v=null;h.lang.detect=v?function(){return v;}:function(x){return x;};return v||r;}};})();h.scriptLoader=(function(){var q={},r={};return{load:function(s,t,u,v){var w=typeof s=='string';if(w)s=[s];if(!u)u=h;var x=s.length,y=[],z=[],A=function(F){if(t)if(w)t.call(u,F);else t.call(u,y,z);};if(x===0){A(true);return;}var B=function(F,G){(G?y:z).push(F);if(--x<=0){v&&h.document.getDocumentElement().removeStyle('cursor');A(G);}},C=function(F,G){q[F]=1;var H=r[F];delete r[F];for(var I=0;I<H.length;I++)H[I](F,G);},D=function(F){if(q[F]){B(F,true);return;}var G=r[F]||(r[F]=[]);G.push(B);if(G.length>1)return;var H=new o('script');H.setAttributes({type:'text/javascript',src:F});if(t)if(j)H.$.onreadystatechange=function(){if(H.$.readyState=='loaded'||H.$.readyState=='complete'){H.$.onreadystatechange=null;C(F,true);}};else{H.$.onload=function(){setTimeout(function(){C(F,true);},0);};H.$.onerror=function(){C(F,false);};}H.appendTo(h.document.getHead());};v&&h.document.getDocumentElement().setStyle('cursor','wait');for(var E=0;E<x;E++)D(s[E]);}};})();h.resourceManager=function(q,r){var s=this;
s.basePath=q;s.fileName=r;s.registered={};s.loaded={};s.externals={};s._={waitingList:{}};};h.resourceManager.prototype={add:function(q,r){if(this.registered[q])throw '[CKEDITOR.resourceManager.add] The resource name "'+q+'" is already registered.';h.fire(q+l.capitalize(this.fileName)+'Ready',this.registered[q]=r||{});},get:function(q){return this.registered[q]||null;},getPath:function(q){var r=this.externals[q];return h.getUrl(r&&r.dir||this.basePath+q+'/');},getFilePath:function(q){var r=this.externals[q];return h.getUrl(this.getPath(q)+(r&&typeof r.file=='string'?r.file:this.fileName+'.js'));},addExternal:function(q,r,s){q=q.split(',');for(var t=0;t<q.length;t++){var u=q[t];this.externals[u]={dir:r,file:s};}},load:function(q,r,s){if(!l.isArray(q))q=q?[q]:[];var t=this.loaded,u=this.registered,v=[],w={},x={};for(var y=0;y<q.length;y++){var z=q[y];if(!z)continue;if(!t[z]&&!u[z]){var A=this.getFilePath(z);v.push(A);if(!(A in w))w[A]=[];w[A].push(z);}else x[z]=this.get(z);}h.scriptLoader.load(v,function(B,C){if(C.length)throw '[CKEDITOR.resourceManager.load] Resource name "'+w[C[0]].join(',')+'" was not found at "'+C[0]+'".';for(var D=0;D<B.length;D++){var E=w[B[D]];for(var F=0;F<E.length;F++){var G=E[F];x[G]=this.get(G);t[G]=1;}}r.call(s,x);},this);}};h.plugins=new h.resourceManager('plugins/','plugin');var q=h.plugins;q.load=l.override(q.load,function(r){return function(s,t,u){var v={},w=function(x){r.call(this,x,function(y){l.extend(v,y);var z=[];for(var A in y){var B=y[A],C=B&&B.requires;if(C)for(var D=0;D<C.length;D++){if(!v[C[D]])z.push(C[D]);}}if(z.length)w.call(this,z);else{for(A in v){B=v[A];if(B.onLoad&&!B.onLoad._called){B.onLoad();B.onLoad._called=1;}}if(t)t.call(u||window,v);}},this);};w.call(this,s);};});q.setLang=function(r,s,t){var u=this.get(r),v=u.langEntries||(u.langEntries={}),w=u.lang||(u.lang=[]);if(l.indexOf(w,s)==-1)w.push(s);v[s]=t;};h.skins=(function(){var r={},s={},t=function(u,v,w,x){var y=r[v];if(!u.skin){u.skin=y;if(y.init)y.init(u);}var z=function(I){for(var J=0;J<I.length;J++)I[J]=h.getUrl(s[v]+I[J]);};function A(I,J){return I.replace(/url\s*\(([\s'"]*)(.*?)([\s"']*)\)/g,function(K,L,M,N){if(/^\/|^\w?:/.test(M))return K;else return 'url('+J+L+M+N+')';});};w=y[w];var B=!w||!!w._isLoaded;if(B)x&&x();else{var C=w._pending||(w._pending=[]);C.push(x);if(C.length>1)return;var D=!w.css||!w.css.length,E=!w.js||!w.js.length,F=function(){if(D&&E){w._isLoaded=1;for(var I=0;I<C.length;I++){if(C[I])C[I]();}}};if(!D){var G=w.css;if(l.isArray(G)){z(G);
for(var H=0;H<G.length;H++)h.document.appendStyleSheet(G[H]);}else{G=A(G,h.getUrl(s[v]));h.document.appendStyleText(G);}w.css=G;D=1;}if(!E){z(w.js);h.scriptLoader.load(w.js,function(){E=1;F();});}F();}};return{add:function(u,v){r[u]=v;v.skinPath=s[u]||(s[u]=h.getUrl('skins/'+u+'/'));},load:function(u,v,w){var x=u.skinName,y=u.skinPath;if(r[x])t(u,x,v,w);else{s[x]=y;h.scriptLoader.load(h.getUrl(y+'skin.js'),function(){t(u,x,v,w);});}}};})();h.themes=new h.resourceManager('themes/','theme');h.ui=function(r){if(r.ui)return r.ui;this._={handlers:{},items:{},editor:r};return this;};var r=h.ui;r.prototype={add:function(s,t,u){this._.items[s]={type:t,command:u.command||null,args:Array.prototype.slice.call(arguments,2)};},create:function(s){var x=this;var t=x._.items[s],u=t&&x._.handlers[t.type],v=t&&t.command&&x._.editor.getCommand(t.command),w=u&&u.create.apply(x,t.args);t&&(w=l.extend(w,x._.editor.skin[t.type],true));if(v)v.uiItems.push(w);return w;},addHandler:function(s,t){this._.handlers[s]=t;}};h.event.implementOn(r);(function(){var s=0,t=function(){var E='editor'+ ++s;return h.instances&&h.instances[E]?t():E;},u={},v=function(E){var F=E.config.customConfig;if(!F)return false;F=h.getUrl(F);var G=u[F]||(u[F]={});if(G.fn){G.fn.call(E,E.config);if(h.getUrl(E.config.customConfig)==F||!v(E))E.fireOnce('customConfigLoaded');}else h.scriptLoader.load(F,function(){if(h.editorConfig)G.fn=h.editorConfig;else G.fn=function(){};v(E);});return true;},w=function(E,F){E.on('customConfigLoaded',function(){if(F){if(F.on)for(var G in F.on)E.on(G,F.on[G]);l.extend(E.config,F,true);delete E.config.on;}x(E);});if(F&&F.customConfig!=undefined)E.config.customConfig=F.customConfig;if(!v(E))E.fireOnce('customConfigLoaded');},x=function(E){var F=E.config.skin.split(','),G=F[0],H=h.getUrl(F[1]||'skins/'+G+'/');E.skinName=G;E.skinPath=H;E.skinClass='cke_skin_'+G;E.tabIndex=E.config.tabIndex||E.element.getAttribute('tabindex')||0;E.readOnly=!!(E.config.readOnly||E.element.getAttribute('disabled'));E.fireOnce('configLoaded');A(E);},y=function(E){h.lang.load(E.config.language,E.config.defaultLanguage,function(F,G){E.langCode=F;E.lang=l.prototypedCopy(G);if(i.gecko&&i.version<10900&&E.lang.dir=='rtl')E.lang.dir='ltr';var H=E.config;H.contentsLangDirection=='ui'&&(H.contentsLangDirection=E.lang.dir);z(E);});},z=function(E){var F=E.config,G=F.plugins,H=F.extraPlugins,I=F.removePlugins;if(H){var J=new RegExp('(?:^|,)(?:'+H.replace(/\s*,\s*/g,'|')+')(?=,|$)','g');G=G.replace(J,'');G+=','+H;}if(I){J=new RegExp('(?:^|,)(?:'+I.replace(/\s*,\s*/g,'|')+')(?=,|$)','g');
G=G.replace(J,'');}i.air&&(G+=',adobeair');q.load(G.split(','),function(K){var L=[],M=[],N=[];E.plugins=K;for(var O in K){var P=K[O],Q=P.lang,R=q.getPath(O),S=null;P.path=R;if(Q){S=l.indexOf(Q,E.langCode)>=0?E.langCode:Q[0];if(!P.langEntries||!P.langEntries[S])N.push(h.getUrl(R+'lang/'+S+'.js'));else{l.extend(E.lang,P.langEntries[S]);S=null;}}M.push(S);L.push(P);}h.scriptLoader.load(N,function(){var T=['beforeInit','init','afterInit'];for(var U=0;U<T.length;U++)for(var V=0;V<L.length;V++){var W=L[V];if(U===0&&M[V]&&W.lang)l.extend(E.lang,W.langEntries[M[V]]);if(W[T[U]])W[T[U]](E);}E.fire('pluginsLoaded');B(E);});});},A=function(E){h.skins.load(E,'editor',function(){y(E);});},B=function(E){var F=E.config.theme;h.themes.load(F,function(){var G=E.theme=h.themes.get(F);G.path=h.themes.getPath(F);G.build(E);if(E.config.autoUpdateElement)C(E);});},C=function(E){var F=E.element;if(E.elementMode==1&&F.is('textarea')){var G=F.$.form&&new o(F.$.form);if(G){function H(){E.updateElement();};G.on('submit',H);if(!G.$.submit.nodeName&&!G.$.submit.length)G.$.submit=l.override(G.$.submit,function(I){return function(){E.updateElement();if(I.apply)I.apply(this,arguments);else I();};});E.on('destroy',function(){G.removeListener('submit',H);});}}};function D(){var E,F=this._.commands,G=this.mode;if(!G)return;for(var H in F){E=F[H];E[E.startDisabled?'disable':this.readOnly&&!E.readOnly?'disable':E.modes[G]?'enable':'disable']();}};h.editor.prototype._init=function(){var G=this;var E=o.get(G._.element),F=G._.instanceConfig;delete G._.element;delete G._.instanceConfig;G._.commands={};G._.styles=[];G.element=E;G.name=E&&G.elementMode==1&&(E.getId()||E.getNameAtt())||t();if(G.name in h.instances)throw '[CKEDITOR.editor] The instance "'+G.name+'" already exists.';G.id=l.getNextId();G.config=l.prototypedCopy(p);G.ui=new r(G);G.focusManager=new h.focusManager(G);h.fire('instanceCreated',null,G);G.on('mode',D,null,null,1);G.on('readOnly',D,null,null,1);w(G,F);};})();l.extend(h.editor.prototype,{addCommand:function(s,t){return this._.commands[s]=new h.command(this,t);},addCss:function(s){this._.styles.push(s);},destroy:function(s){var t=this;if(!s)t.updateElement();t.fire('destroy');t.theme&&t.theme.destroy(t);h.remove(t);h.fire('instanceDestroyed',null,t);},execCommand:function(s,t){var u=this.getCommand(s),v={name:s,commandData:t,command:u};if(u&&u.state!=0)if(this.fire('beforeCommandExec',v)!==true){v.returnValue=u.exec(v.commandData);if(!u.async&&this.fire('afterCommandExec',v)!==true)return v.returnValue;
}return false;},getCommand:function(s){return this._.commands[s];},getData:function(){var u=this;u.fire('beforeGetData');var s=u._.data;if(typeof s!='string'){var t=u.element;if(t&&u.elementMode==1)s=t.is('textarea')?t.getValue():t.getHtml();else s='';}s={dataValue:s};u.fire('getData',s);return s.dataValue;},getSnapshot:function(){var s=this.fire('getSnapshot');if(typeof s!='string'){var t=this.element;if(t&&this.elementMode==1)s=t.is('textarea')?t.getValue():t.getHtml();}return s;},loadSnapshot:function(s){this.fire('loadSnapshot',s);},setData:function(s,t,u){if(t)this.on('dataReady',function(w){w.removeListener();t.call(w.editor);});var v={dataValue:s};!u&&this.fire('setData',v);this._.data=v.dataValue;!u&&this.fire('afterSetData',v);},setReadOnly:function(s){if(this.readOnly!=!s){this.readOnly=!s;this.fire('readOnly');}},insertHtml:function(s){this.fire('insertHtml',s);},insertText:function(s){this.fire('insertText',s);},insertElement:function(s){this.fire('insertElement',s);},checkDirty:function(){return this.mayBeDirty&&this._.previousValue!==this.getSnapshot();},resetDirty:function(){if(this.mayBeDirty)this._.previousValue=this.getSnapshot();},updateElement:function(){var u=this;var s=u.element;if(s&&u.elementMode==1){var t=u.getData();if(u.config.htmlEncodeOutput)t=l.htmlEncode(t);if(s.is('textarea'))s.setValue(t);else s.setHtml(t);}}});h.on('loaded',function(){var s=h.editor._pending;if(s){delete h.editor._pending;for(var t=0;t<s.length;t++)s[t]._init();}});h.htmlParser=function(){this._={htmlPartsRegex:new RegExp("<(?:(?:\\/([^>]+)>)|(?:!--([\\S|\\s]*?)-->)|(?:([^\\s>]+)\\s*((?:(?:\"[^\"]*\")|(?:'[^']*')|[^\"'>])*)\\/?>))",'g')};};(function(){var s=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,t={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1};h.htmlParser.prototype={onTagOpen:function(){},onTagClose:function(){},onText:function(){},onCDATA:function(){},onComment:function(){},parse:function(u){var H=this;var v,w,x=0,y;while(v=H._.htmlPartsRegex.exec(u)){var z=v.index;if(z>x){var A=u.substring(x,z);if(y)y.push(A);else H.onText(A);}x=H._.htmlPartsRegex.lastIndex;if(w=v[1]){w=w.toLowerCase();if(y&&m.$cdata[w]){H.onCDATA(y.join(''));y=null;}if(!y){H.onTagClose(w);continue;}}if(y){y.push(v[0]);continue;}if(w=v[3]){w=w.toLowerCase();if(/="/.test(w))continue;var B={},C,D=v[4],E=!!(D&&D.charAt(D.length-1)=='/');if(D)while(C=s.exec(D)){var F=C[1].toLowerCase(),G=C[2]||C[3]||C[4]||'';
if(!G&&t[F])B[F]=F;else B[F]=G;}H.onTagOpen(w,B,E);if(!y&&m.$cdata[w])y=[];continue;}if(w=v[2])H.onComment(w);}if(u.length>x)H.onText(u.substring(x,u.length));}};})();h.htmlParser.comment=function(s){this.value=s;this._={isBlockLike:false};};h.htmlParser.comment.prototype={type:8,writeHtml:function(s,t){var u=this.value;if(t){if(!(u=t.onComment(u,this)))return;if(typeof u!='string'){u.parent=this.parent;u.writeHtml(s,t);return;}}s.comment(u);}};(function(){var s=/[\t\r\n ]{2,}|[\t\r\n]/g;h.htmlParser.text=function(t){this.value=t;this._={isBlockLike:false};};h.htmlParser.text.prototype={type:3,writeHtml:function(t,u){var v=this.value;if(u&&!(v=u.onText(v,this)))return;t.text(v);}};})();(function(){h.htmlParser.cdata=function(s){this.value=s;};h.htmlParser.cdata.prototype={type:3,writeHtml:function(s){s.write(this.value);}};})();h.htmlParser.fragment=function(){this.children=[];this.parent=null;this._={isBlockLike:true,hasInlineStarted:false};};(function(){var s=l.extend({table:1,ul:1,ol:1,dl:1},m.table,m.ul,m.ol,m.dl),t={ol:1,ul:1},u=l.extend({},{html:1},m.html,m.body,m.head,{style:1,script:1});h.htmlParser.fragment.fromHtml=function(v,w,x){var y=new h.htmlParser(),z=x||new h.htmlParser.fragment(),A=[],B=[],C=z,D=false;function E(H){var I;if(A.length>0)for(var J=0;J<A.length;J++){var K=A[J],L=K.name,M=m[L],N=C.name&&m[C.name];if((!N||N[L])&&(!H||!M||M[H]||!m[H])){if(!I){F();I=1;}K=K.clone();K.parent=C;C=K;A.splice(J,1);J--;}}};function F(){while(B.length)C.add(B.shift());};function G(H,I,J){if(H.previous!==undefined)return;I=I||C||z;var K=C;if(w&&(!I.type||I.name=='body')){var L,M;if(H.attributes&&(M=H.attributes['data-cke-real-element-type']))L=M;else L=H.name;if(L&&!(L in m.$body||L=='body'||H.isOrphan)){C=I;y.onTagOpen(w,{});H.returnPoint=I=C;}}if(H._.isBlockLike&&H.name!='pre'){var N=H.children.length,O=H.children[N-1],P;if(O&&O.type==3)if(!(P=l.rtrim(O.value)))H.children.length=N-1;else O.value=P;}I.add(H);if(H.returnPoint){C=H.returnPoint;delete H.returnPoint;}else C=J?I:K;};y.onTagOpen=function(H,I,J,K){var L=new h.htmlParser.element(H,I);if(L.isUnknown&&J)L.isEmpty=true;L.isOptionalClose=K;if(m.$removeEmpty[H]){A.push(L);return;}else if(H=='pre')D=true;else if(H=='br'&&D){C.add(new h.htmlParser.text('\n'));return;}if(H=='br'){B.push(L);return;}while(1){var M=C.name,N=M?m[M]||(C._.isBlockLike?m.div:m.span):u;if(!L.isUnknown&&!C.isUnknown&&!N[H]){if(C.isOptionalClose)y.onTagClose(M);else if(H in t&&M in t){var O=C.children,P=O[O.length-1];if(!(P&&P.name=='li'))G(P=new h.htmlParser.element('li'),C);
!L.returnPoint&&(L.returnPoint=C);C=P;}else if(H in m.$listItem&&M!=H)y.onTagOpen(H=='li'?'ul':'dl',{},0,1);else if(M in s&&M!=H){!L.returnPoint&&(L.returnPoint=C);C=C.parent;}else{if(M in m.$inline)A.unshift(C);if(C.parent)G(C,C.parent,1);else{L.isOrphan=1;break;}}}else break;}E(H);F();L.parent=C;if(L.isEmpty)G(L);else C=L;};y.onTagClose=function(H){for(var I=A.length-1;I>=0;I--){if(H==A[I].name){A.splice(I,1);return;}}var J=[],K=[],L=C;while(L!=z&&L.name!=H){if(!L._.isBlockLike)K.unshift(L);J.push(L);L=L.returnPoint||L.parent;}if(L!=z){for(I=0;I<J.length;I++){var M=J[I];G(M,M.parent);}C=L;if(C.name=='pre')D=false;if(L._.isBlockLike)F();G(L,L.parent);if(L==C)C=C.parent;A=A.concat(K);}if(H=='body')w=false;};y.onText=function(H){if((!C._.hasInlineStarted||B.length)&&!D){H=l.ltrim(H);if(H.length===0)return;}F();E();if(w&&(!C.type||C.name=='body')&&l.trim(H))this.onTagOpen(w,{},0,1);if(!D)H=H.replace(/[\t\r\n ]{2,}|[\t\r\n]/g,' ');C.add(new h.htmlParser.text(H));};y.onCDATA=function(H){C.add(new h.htmlParser.cdata(H));};y.onComment=function(H){F();E();C.add(new h.htmlParser.comment(H));};y.parse(v);F(!j&&1);while(C!=z)G(C,C.parent,1);return z;};h.htmlParser.fragment.prototype={add:function(v){var y=this;var w=y.children.length,x=w>0&&y.children[w-1]||null;if(x){if(v._.isBlockLike&&x.type==3){x.value=l.rtrim(x.value);if(x.value.length===0){y.children.pop();y.add(v);return;}}x.next=v;}v.previous=x;v.parent=y;y.children.push(v);y._.hasInlineStarted=v.type==3||v.type==1&&!v._.isBlockLike;},writeHtml:function(v,w){var x;this.filterChildren=function(){var y=new h.htmlParser.basicWriter();this.writeChildrenHtml.call(this,y,w,true);var z=y.getHtml();this.children=new h.htmlParser.fragment.fromHtml(z).children;x=1;};!this.name&&w&&w.onFragment(this);this.writeChildrenHtml(v,x?null:w);},writeChildrenHtml:function(v,w){for(var x=0;x<this.children.length;x++)this.children[x].writeHtml(v,w);}};})();h.htmlParser.element=function(s,t){var z=this;z.name=s;z.attributes=t||(t={});z.children=[];var u=t['data-cke-real-element-type']||s||'',v=u.match(/^cke:(.*)/);v&&(u=v[1]);var w=m,x=!!(w.$nonBodyContent[u]||w.$block[u]||w.$listItem[u]||w.$tableContent[u]||w.$nonEditable[u]||u=='br'),y=!!w.$empty[s];z.isEmpty=y;z.isUnknown=!w[s];z._={isBlockLike:x,hasInlineStarted:y||!x};};(function(){var s=function(t,u){t=t[0];u=u[0];return t<u?-1:t>u?1:0;};h.htmlParser.element.prototype={type:1,add:h.htmlParser.fragment.prototype.add,clone:function(){return new h.htmlParser.element(this.name,this.attributes);
},writeHtml:function(t,u){var v=this.attributes,w=this,x=w.name,y,z,A,B;w.filterChildren=function(){if(!B){var G=new h.htmlParser.basicWriter();h.htmlParser.fragment.prototype.writeChildrenHtml.call(w,G,u);w.children=new h.htmlParser.fragment.fromHtml(G.getHtml(),0,w.clone()).children;B=1;}};if(u){for(;;){if(!(x=u.onElementName(x)))return;w.name=x;if(!(w=u.onElement(w)))return;w.parent=this.parent;if(w.name==x)break;if(w.type!=1){w.writeHtml(t,u);return;}x=w.name;if(!x){this.writeChildrenHtml.call(w,t,B?null:u);return;}}v=w.attributes;}t.openTag(x,v);var C=[];for(var D=0;D<2;D++)for(y in v){z=y;A=v[y];if(D==1)C.push([y,A]);else if(u){for(;;){if(!(z=u.onAttributeName(y))){delete v[y];break;}else if(z!=y){delete v[y];y=z;continue;}else break;}if(z)if((A=u.onAttribute(w,z,A))===false)delete v[z];else v[z]=A;}}if(t.sortAttributes)C.sort(s);var E=C.length;for(D=0;D<E;D++){var F=C[D];t.attribute(F[0],F[1]);}t.openTagClose(x,w.isEmpty);if(!w.isEmpty){this.writeChildrenHtml.call(w,t,B?null:u);t.closeTag(x);}},writeChildrenHtml:function(t,u){h.htmlParser.fragment.prototype.writeChildrenHtml.apply(this,arguments);}};})();(function(){h.htmlParser.filter=l.createClass({$:function(x){this._={elementNames:[],attributeNames:[],elements:{$length:0},attributes:{$length:0}};if(x)this.addRules(x,10);},proto:{addRules:function(x,y){var z=this;if(typeof y!='number')y=10;t(z._.elementNames,x.elementNames,y);t(z._.attributeNames,x.attributeNames,y);u(z._.elements,x.elements,y);u(z._.attributes,x.attributes,y);z._.text=v(z._.text,x.text,y)||z._.text;z._.comment=v(z._.comment,x.comment,y)||z._.comment;z._.root=v(z._.root,x.root,y)||z._.root;},onElementName:function(x){return s(x,this._.elementNames);},onAttributeName:function(x){return s(x,this._.attributeNames);},onText:function(x){var y=this._.text;return y?y.filter(x):x;},onComment:function(x,y){var z=this._.comment;return z?z.filter(x,y):x;},onFragment:function(x){var y=this._.root;return y?y.filter(x):x;},onElement:function(x){var C=this;var y=[C._.elements['^'],C._.elements[x.name],C._.elements.$],z,A;for(var B=0;B<3;B++){z=y[B];if(z){A=z.filter(x,C);if(A===false)return null;if(A&&A!=x)return C.onNode(A);if(x.parent&&!x.name)break;}}return x;},onNode:function(x){var y=x.type;return y==1?this.onElement(x):y==3?new h.htmlParser.text(this.onText(x.value)):y==8?new h.htmlParser.comment(this.onComment(x.value)):null;},onAttribute:function(x,y,z){var A=this._.attributes[y];if(A){var B=A.filter(z,x,this);if(B===false)return false;if(typeof B!='undefined')return B;
}return z;}}});function s(x,y){for(var z=0;x&&z<y.length;z++){var A=y[z];x=x.replace(A[0],A[1]);}return x;};function t(x,y,z){if(typeof y=='function')y=[y];var A,B,C=x.length,D=y&&y.length;if(D){for(A=0;A<C&&x[A].pri<z;A++){}for(B=D-1;B>=0;B--){var E=y[B];if(E){E.pri=z;x.splice(A,0,E);}}}};function u(x,y,z){if(y)for(var A in y){var B=x[A];x[A]=v(B,y[A],z);if(!B)x.$length++;}};function v(x,y,z){if(y){y.pri=z;if(x){if(!x.splice){if(x.pri>z)x=[y,x];else x=[x,y];x.filter=w;}else t(x,y,z);return x;}else{y.filter=y;return y;}}};function w(x){var y=x.type||x instanceof h.htmlParser.fragment;for(var z=0;z<this.length;z++){if(y)var A=x.type,B=x.name;var C=this[z],D=C.apply(window,arguments);if(D===false)return D;if(y){if(D&&(D.name!=B||D.type!=A))return D;}else if(typeof D!='string')return D;D!=undefined&&(x=D);}return x;};})();h.htmlParser.basicWriter=l.createClass({$:function(){this._={output:[]};},proto:{openTag:function(s,t){this._.output.push('<',s);},openTagClose:function(s,t){if(t)this._.output.push(' />');else this._.output.push('>');},attribute:function(s,t){if(typeof t=='string')t=l.htmlEncodeAttr(t);this._.output.push(' ',s,'="',t,'"');},closeTag:function(s){this._.output.push('</',s,'>');},text:function(s){this._.output.push(s);},comment:function(s){this._.output.push('<!--',s,'-->');},write:function(s){this._.output.push(s);},reset:function(){this._.output=[];this._.indent=false;},getHtml:function(s){var t=this._.output.join('');if(s)this.reset();return t;}}});delete h.loadFullCore;h.instances={};h.document=new n(document);h.add=function(s){h.instances[s.name]=s;s.on('focus',function(){if(h.currentInstance!=s){h.currentInstance=s;h.fire('currentInstance');}});s.on('blur',function(){if(h.currentInstance==s){h.currentInstance=null;h.fire('currentInstance');}});};h.remove=function(s){delete h.instances[s.name];};h.on('instanceDestroyed',function(){if(l.isEmpty(this.instances))h.fire('reset');});h.TRISTATE_ON=1;h.TRISTATE_OFF=2;h.TRISTATE_DISABLED=0;k.comment=l.createClass({base:k.node,$:function(s,t){if(typeof s=='string')s=(t?t.$:document).createComment(s);this.base(s);},proto:{type:8,getOuterHtml:function(){return '<!--'+this.$.nodeValue+'-->';}}});(function(){var s={address:1,blockquote:1,dl:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,li:1,dt:1,dd:1,legend:1},t={body:1,div:1,table:1,tbody:1,tr:1,td:1,th:1,caption:1,form:1,fieldset:1},u=function(v){var w=v.getChildren();for(var x=0,y=w.count();x<y;x++){var z=w.getItem(x);if(z.type==1&&m.$block[z.getName()])return true;
}return false;};k.elementPath=function(v){var B=this;var w=null,x=null,y=[],z=v;while(z){if(z.type==1){if(!B.lastElement)B.lastElement=z;var A=z.getName();if(j&&z.$.scopeName!='HTML')A=z.$.scopeName.toLowerCase()+':'+A;if(!x){if(!w&&s[A])w=z;if(t[A])if(!w&&A=='div'&&!u(z))w=z;else x=z;}y.push(z);if(A=='body')break;}z=z.getParent();}B.block=w;B.blockLimit=x;B.elements=y;};})();k.elementPath.prototype={compare:function(s){var t=this.elements,u=s&&s.elements;if(!u||t.length!=u.length)return false;for(var v=0;v<t.length;v++){if(!t[v].equals(u[v]))return false;}return true;},contains:function(s){var t=this.elements;for(var u=0;u<t.length;u++){if(t[u].getName() in s)return t[u];}return null;}};k.text=function(s,t){if(typeof s=='string')s=(t?t.$:document).createTextNode(s);this.$=s;};k.text.prototype=new k.node();l.extend(k.text.prototype,{type:3,getLength:function(){return this.$.nodeValue.length;},getText:function(){return this.$.nodeValue;},setText:function(s){this.$.nodeValue=s;},split:function(s){var x=this;if(j&&s==x.getLength()){var t=x.getDocument().createText('');t.insertAfter(x);return t;}var u=x.getDocument(),v=new k.text(x.$.splitText(s),u);if(i.ie8){var w=new k.text('',u);w.insertAfter(v);w.remove();}return v;},substring:function(s,t){if(typeof t!='number')return this.$.nodeValue.substr(s);else return this.$.nodeValue.substring(s,t);}});k.documentFragment=function(s){s=s||h.document;this.$=s.$.createDocumentFragment();};l.extend(k.documentFragment.prototype,o.prototype,{type:11,insertAfterNode:function(s){s=s.$;s.parentNode.insertBefore(this.$,s.nextSibling);}},true,{append:1,appendBogus:1,getFirst:1,getLast:1,appendTo:1,moveChildren:1,insertBefore:1,insertAfterNode:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,getChildCount:1,getChild:1,getChildren:1});(function(){function s(z,A){if(this._.end)return null;var B,C=this.range,D,E=this.guard,F=this.type,G=z?'getPreviousSourceNode':'getNextSourceNode';if(!this._.start){this._.start=1;C.trim();if(C.collapsed){this.end();return null;}}if(!z&&!this._.guardLTR){var H=C.endContainer,I=H.getChild(C.endOffset);this._.guardLTR=function(M,N){return(!N||!H.equals(M))&&(!I||!M.equals(I))&&(M.type!=1||!N||M.getName()!='body');};}if(z&&!this._.guardRTL){var J=C.startContainer,K=C.startOffset>0&&J.getChild(C.startOffset-1);this._.guardRTL=function(M,N){return(!N||!J.equals(M))&&(!K||!M.equals(K))&&(M.type!=1||!N||M.getName()!='body');};}var L=z?this._.guardRTL:this._.guardLTR;if(E)D=function(M,N){if(L(M,N)===false)return false;
return E(M,N);};else D=L;if(this.current)B=this.current[G](false,F,D);else if(z){B=C.endContainer;if(C.endOffset>0){B=B.getChild(C.endOffset-1);if(D(B)===false)B=null;}else B=D(B,true)===false?null:B.getPreviousSourceNode(true,F,D);}else{B=C.startContainer;B=B.getChild(C.startOffset);if(B){if(D(B)===false)B=null;}else B=D(C.startContainer,true)===false?null:C.startContainer.getNextSourceNode(true,F,D);}while(B&&!this._.end){this.current=B;if(!this.evaluator||this.evaluator(B)!==false){if(!A)return B;}else if(A&&this.evaluator)return false;B=B[G](false,F,D);}this.end();return this.current=null;};function t(z){var A,B=null;while(A=s.call(this,z))B=A;return B;};k.walker=l.createClass({$:function(z){this.range=z;this._={};},proto:{end:function(){this._.end=1;},next:function(){return s.call(this);},previous:function(){return s.call(this,1);},checkForward:function(){return s.call(this,0,1)!==false;},checkBackward:function(){return s.call(this,1,1)!==false;},lastForward:function(){return t.call(this);},lastBackward:function(){return t.call(this,1);},reset:function(){delete this.current;this._={};}}});var u={block:1,'list-item':1,table:1,'table-row-group':1,'table-header-group':1,'table-footer-group':1,'table-row':1,'table-column-group':1,'table-column':1,'table-cell':1,'table-caption':1};o.prototype.isBlockBoundary=function(z){var A=z?l.extend({},m.$block,z||{}):m.$block;return this.getComputedStyle('float')=='none'&&u[this.getComputedStyle('display')]||A[this.getName()];};k.walker.blockBoundary=function(z){return function(A,B){return!(A.type==1&&A.isBlockBoundary(z));};};k.walker.listItemBoundary=function(){return this.blockBoundary({br:1});};k.walker.bookmark=function(z,A){function B(C){return C&&C.getName&&C.getName()=='span'&&C.data('cke-bookmark');};return function(C){var D,E;D=C&&!C.getName&&(E=C.getParent())&&B(E);D=z?D:D||B(C);return!!(A^D);};};k.walker.whitespaces=function(z){return function(A){var B=A&&A.type==3&&!l.trim(A.getText());return!!(z^B);};};k.walker.invisible=function(z){var A=k.walker.whitespaces();return function(B){var C=A(B)||B.is&&!B.$.offsetHeight;return!!(z^C);};};k.walker.nodeType=function(z,A){return function(B){return!!(A^B.type==z);};};var v=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,w=k.walker.whitespaces(),x=k.walker.bookmark(),y=function(z){return x(z)||w(z)||z.type==1&&z.getName() in m.$inline&&!(z.getName() in m.$empty);};o.prototype.getBogus=function(){var z=this;do z=z.getPreviousSourceNode();while(y(z))if(z&&(!j?z.is&&z.is('br'):z.getText&&v.test(z.getText())))return z;
return false;};})();k.range=function(s){var t=this;t.startContainer=null;t.startOffset=null;t.endContainer=null;t.endOffset=null;t.collapsed=true;t.document=s;};(function(){var s=function(A){A.collapsed=A.startContainer&&A.endContainer&&A.startContainer.equals(A.endContainer)&&A.startOffset==A.endOffset;},t=function(A,B,C,D){A.optimizeBookmark();var E=A.startContainer,F=A.endContainer,G=A.startOffset,H=A.endOffset,I,J;if(F.type==3)F=F.split(H);else if(F.getChildCount()>0)if(H>=F.getChildCount()){F=F.append(A.document.createText(''));J=true;}else F=F.getChild(H);if(E.type==3){E.split(G);if(E.equals(F))F=E.getNext();}else if(!G){E=E.getFirst().insertBeforeMe(A.document.createText(''));I=true;}else if(G>=E.getChildCount()){E=E.append(A.document.createText(''));I=true;}else E=E.getChild(G).getPrevious();var K=E.getParents(),L=F.getParents(),M,N,O;for(M=0;M<K.length;M++){N=K[M];O=L[M];if(!N.equals(O))break;}var P=C,Q,R,S,T;for(var U=M;U<K.length;U++){Q=K[U];if(P&&!Q.equals(E))R=P.append(Q.clone());S=Q.getNext();while(S){if(S.equals(L[U])||S.equals(F))break;T=S.getNext();if(B==2)P.append(S.clone(true));else{S.remove();if(B==1)P.append(S);}S=T;}if(P)P=R;}P=C;for(var V=M;V<L.length;V++){Q=L[V];if(B>0&&!Q.equals(F))R=P.append(Q.clone());if(!K[V]||Q.$.parentNode!=K[V].$.parentNode){S=Q.getPrevious();while(S){if(S.equals(K[V])||S.equals(E))break;T=S.getPrevious();if(B==2)P.$.insertBefore(S.$.cloneNode(true),P.$.firstChild);else{S.remove();if(B==1)P.$.insertBefore(S.$,P.$.firstChild);}S=T;}}if(P)P=R;}if(B==2){var W=A.startContainer;if(W.type==3){W.$.data+=W.$.nextSibling.data;W.$.parentNode.removeChild(W.$.nextSibling);}var X=A.endContainer;if(X.type==3&&X.$.nextSibling){X.$.data+=X.$.nextSibling.data;X.$.parentNode.removeChild(X.$.nextSibling);}}else{if(N&&O&&(E.$.parentNode!=N.$.parentNode||F.$.parentNode!=O.$.parentNode)){var Y=O.getIndex();if(I&&O.$.parentNode==E.$.parentNode)Y--;if(D&&N.type==1){var Z=o.createFromHtml('<span data-cke-bookmark="1" style="display:none">&nbsp;</span>',A.document);Z.insertAfter(N);N.mergeSiblings(false);A.moveToBookmark({startNode:Z});}else A.setStart(O.getParent(),Y);}A.collapse(true);}if(I)E.remove();if(J&&F.$.parentNode)F.remove();},u={abbr:1,acronym:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,'var':1};function v(A){var B=false,C=k.walker.bookmark(true);return function(D){if(C(D))return true;if(D.type==3){if(D.hasAscendant('pre')||l.trim(D.getText()).length)return false;
}else if(D.type==1)if(!u[D.getName()])if(!A&&!j&&D.getName()=='br'&&!B)B=true;else return false;return true;};};function w(A){return A.type!=3&&A.getName() in m.$removeEmpty||!l.trim(A.getText())||!!A.getParent().data('cke-bookmark');};var x=new k.walker.whitespaces(),y=new k.walker.bookmark();function z(A){return!x(A)&&!y(A);};k.range.prototype={clone:function(){var B=this;var A=new k.range(B.document);A.startContainer=B.startContainer;A.startOffset=B.startOffset;A.endContainer=B.endContainer;A.endOffset=B.endOffset;A.collapsed=B.collapsed;return A;},collapse:function(A){var B=this;if(A){B.endContainer=B.startContainer;B.endOffset=B.startOffset;}else{B.startContainer=B.endContainer;B.startOffset=B.endOffset;}B.collapsed=true;},cloneContents:function(){var A=new k.documentFragment(this.document);if(!this.collapsed)t(this,2,A);return A;},deleteContents:function(A){if(this.collapsed)return;t(this,0,null,A);},extractContents:function(A){var B=new k.documentFragment(this.document);if(!this.collapsed)t(this,1,B,A);return B;},createBookmark:function(A){var G=this;var B,C,D,E,F=G.collapsed;B=G.document.createElement('span');B.data('cke-bookmark',1);B.setStyle('display','none');B.setHtml('&nbsp;');if(A){D='cke_bm_'+l.getNextNumber();B.setAttribute('id',D+'S');}if(!F){C=B.clone();C.setHtml('&nbsp;');if(A)C.setAttribute('id',D+'E');E=G.clone();E.collapse();E.insertNode(C);}E=G.clone();E.collapse(true);E.insertNode(B);if(C){G.setStartAfter(B);G.setEndBefore(C);}else G.moveToPosition(B,4);return{startNode:A?D+'S':B,endNode:A?D+'E':C,serializable:A,collapsed:F};},createBookmark2:function(A){var I=this;var B=I.startContainer,C=I.endContainer,D=I.startOffset,E=I.endOffset,F=I.collapsed,G,H;if(!B||!C)return{start:0,end:0};if(A){if(B.type==1){G=B.getChild(D);if(G&&G.type==3&&D>0&&G.getPrevious().type==3){B=G;D=0;}if(G&&G.type==1)D=G.getIndex(1);}while(B.type==3&&(H=B.getPrevious())&&H.type==3){B=H;D+=H.getLength();}if(!F){if(C.type==1){G=C.getChild(E);if(G&&G.type==3&&E>0&&G.getPrevious().type==3){C=G;E=0;}if(G&&G.type==1)E=G.getIndex(1);}while(C.type==3&&(H=C.getPrevious())&&H.type==3){C=H;E+=H.getLength();}}}return{start:B.getAddress(A),end:F?null:C.getAddress(A),startOffset:D,endOffset:E,normalized:A,collapsed:F,is2:true};},moveToBookmark:function(A){var I=this;if(A.is2){var B=I.document.getByAddress(A.start,A.normalized),C=A.startOffset,D=A.end&&I.document.getByAddress(A.end,A.normalized),E=A.endOffset;I.setStart(B,C);if(D)I.setEnd(D,E);else I.collapse(true);}else{var F=A.serializable,G=F?I.document.getById(A.startNode):A.startNode,H=F?I.document.getById(A.endNode):A.endNode;
I.setStartBefore(G);G.remove();if(H){I.setEndBefore(H);H.remove();}else I.collapse(true);}},getBoundaryNodes:function(){var F=this;var A=F.startContainer,B=F.endContainer,C=F.startOffset,D=F.endOffset,E;if(A.type==1){E=A.getChildCount();if(E>C)A=A.getChild(C);else if(E<1)A=A.getPreviousSourceNode();else{A=A.$;while(A.lastChild)A=A.lastChild;A=new k.node(A);A=A.getNextSourceNode()||A;}}if(B.type==1){E=B.getChildCount();if(E>D)B=B.getChild(D).getPreviousSourceNode(true);else if(E<1)B=B.getPreviousSourceNode();else{B=B.$;while(B.lastChild)B=B.lastChild;B=new k.node(B);}}if(A.getPosition(B)&2)A=B;return{startNode:A,endNode:B};},getCommonAncestor:function(A,B){var F=this;var C=F.startContainer,D=F.endContainer,E;if(C.equals(D)){if(A&&C.type==1&&F.startOffset==F.endOffset-1)E=C.getChild(F.startOffset);else E=C;}else E=C.getCommonAncestor(D);return B&&!E.is?E.getParent():E;},optimize:function(){var C=this;var A=C.startContainer,B=C.startOffset;if(A.type!=1)if(!B)C.setStartBefore(A);else if(B>=A.getLength())C.setStartAfter(A);A=C.endContainer;B=C.endOffset;if(A.type!=1)if(!B)C.setEndBefore(A);else if(B>=A.getLength())C.setEndAfter(A);},optimizeBookmark:function(){var C=this;var A=C.startContainer,B=C.endContainer;if(A.is&&A.is('span')&&A.data('cke-bookmark'))C.setStartAt(A,3);if(B&&B.is&&B.is('span')&&B.data('cke-bookmark'))C.setEndAt(B,4);},trim:function(A,B){var I=this;var C=I.startContainer,D=I.startOffset,E=I.collapsed;if((!A||E)&&C&&C.type==3){if(!D){D=C.getIndex();C=C.getParent();}else if(D>=C.getLength()){D=C.getIndex()+1;C=C.getParent();}else{var F=C.split(D);D=C.getIndex()+1;C=C.getParent();if(I.startContainer.equals(I.endContainer))I.setEnd(F,I.endOffset-I.startOffset);else if(C.equals(I.endContainer))I.endOffset+=1;}I.setStart(C,D);if(E){I.collapse(true);return;}}var G=I.endContainer,H=I.endOffset;if(!(B||E)&&G&&G.type==3){if(!H){H=G.getIndex();G=G.getParent();}else if(H>=G.getLength()){H=G.getIndex()+1;G=G.getParent();}else{G.split(H);H=G.getIndex()+1;G=G.getParent();}I.setEnd(G,H);}},enlarge:function(A,B){switch(A){case 1:if(this.collapsed)return;var C=this.getCommonAncestor(),D=this.document.getBody(),E,F,G,H,I,J=false,K,L,M=this.startContainer,N=this.startOffset;if(M.type==3){if(N){M=!l.trim(M.substring(0,N)).length&&M;J=!!M;}if(M)if(!(H=M.getPrevious()))G=M.getParent();}else{if(N)H=M.getChild(N-1)||M.getLast();if(!H)G=M;}while(G||H){if(G&&!H){if(!I&&G.equals(C))I=true;if(!D.contains(G))break;if(!J||G.getComputedStyle('display')!='inline'){J=false;if(I)E=G;
else this.setStartBefore(G);}H=G.getPrevious();}while(H){K=false;if(H.type==3){L=H.getText();if(/[^\s\ufeff]/.test(L))H=null;K=/[\s\ufeff]$/.test(L);}else if((H.$.offsetWidth>0||B&&H.is('br'))&&!H.data('cke-bookmark'))if(J&&m.$removeEmpty[H.getName()]){L=H.getText();if(/[^\s\ufeff]/.test(L))H=null;else{var O=H.$.all||H.$.getElementsByTagName('*');for(var P=0,Q;Q=O[P++];){if(!m.$removeEmpty[Q.nodeName.toLowerCase()]){H=null;break;}}}if(H)K=!!L.length;}else H=null;if(K)if(J){if(I)E=G;else if(G)this.setStartBefore(G);}else J=true;if(H){var R=H.getPrevious();if(!G&&!R){G=H;H=null;break;}H=R;}else G=null;}if(G)G=G.getParent();}M=this.endContainer;N=this.endOffset;G=H=null;I=J=false;if(M.type==3){M=!l.trim(M.substring(N)).length&&M;J=!(M&&M.getLength());if(M)if(!(H=M.getNext()))G=M.getParent();}else{H=M.getChild(N);if(!H)G=M;}while(G||H){if(G&&!H){if(!I&&G.equals(C))I=true;if(!D.contains(G))break;if(!J||G.getComputedStyle('display')!='inline'){J=false;if(I)F=G;else if(G)this.setEndAfter(G);}H=G.getNext();}while(H){K=false;if(H.type==3){L=H.getText();if(/[^\s\ufeff]/.test(L))H=null;K=/^[\s\ufeff]/.test(L);}else if((H.$.offsetWidth>0||B&&H.is('br'))&&!H.data('cke-bookmark'))if(J&&m.$removeEmpty[H.getName()]){L=H.getText();if(/[^\s\ufeff]/.test(L))H=null;else{O=H.$.all||H.$.getElementsByTagName('*');for(P=0;Q=O[P++];){if(!m.$removeEmpty[Q.nodeName.toLowerCase()]){H=null;break;}}}if(H)K=!!L.length;}else H=null;if(K)if(J)if(I)F=G;else this.setEndAfter(G);if(H){R=H.getNext();if(!G&&!R){G=H;H=null;break;}H=R;}else G=null;}if(G)G=G.getParent();}if(E&&F){C=E.contains(F)?F:E;this.setStartBefore(C);this.setEndAfter(C);}break;case 2:case 3:var S=new k.range(this.document);D=this.document.getBody();S.setStartAt(D,1);S.setEnd(this.startContainer,this.startOffset);var T=new k.walker(S),U,V,W=k.walker.blockBoundary(A==3?{br:1}:null),X=function(Z){var aa=W(Z);if(!aa)U=Z;return aa;},Y=function(Z){var aa=X(Z);if(!aa&&Z.is&&Z.is('br'))V=Z;return aa;};T.guard=X;G=T.lastBackward();U=U||D;this.setStartAt(U,!U.is('br')&&(!G&&this.checkStartOfBlock()||G&&U.contains(G))?1:4);S=this.clone();S.collapse();S.setEndAt(D,2);T=new k.walker(S);T.guard=A==3?Y:X;U=null;G=T.lastForward();U=U||D;this.setEndAt(U,!G&&this.checkEndOfBlock()||G&&U.contains(G)?2:3);if(V)this.setEndAfter(V);}},shrink:function(A,B){if(!this.collapsed){A=A||2;var C=this.clone(),D=this.startContainer,E=this.endContainer,F=this.startOffset,G=this.endOffset,H=this.collapsed,I=1,J=1;if(D&&D.type==3)if(!F)C.setStartBefore(D);else if(F>=D.getLength())C.setStartAfter(D);
else{C.setStartBefore(D);I=0;}if(E&&E.type==3)if(!G)C.setEndBefore(E);else if(G>=E.getLength())C.setEndAfter(E);else{C.setEndAfter(E);J=0;}var K=new k.walker(C),L=k.walker.bookmark();K.evaluator=function(P){return P.type==(A==1?1:3);};var M;K.guard=function(P,Q){if(L(P))return true;if(A==1&&P.type==3)return false;if(Q&&P.equals(M))return false;if(!Q&&P.type==1)M=P;return true;};if(I){var N=K[A==1?'lastForward':'next']();N&&this.setStartAt(N,B?1:3);}if(J){K.reset();var O=K[A==1?'lastBackward':'previous']();O&&this.setEndAt(O,B?2:4);}return!!(I||J);}},insertNode:function(A){var E=this;E.optimizeBookmark();E.trim(false,true);var B=E.startContainer,C=E.startOffset,D=B.getChild(C);if(D)A.insertBefore(D);else B.append(A);if(A.getParent().equals(E.endContainer))E.endOffset++;E.setStartBefore(A);},moveToPosition:function(A,B){this.setStartAt(A,B);this.collapse(true);},selectNodeContents:function(A){this.setStart(A,0);this.setEnd(A,A.type==3?A.getLength():A.getChildCount());},setStart:function(A,B){var C=this;if(A.type==1&&m.$empty[A.getName()])B=A.getIndex(),A=A.getParent();C.startContainer=A;C.startOffset=B;if(!C.endContainer){C.endContainer=A;C.endOffset=B;}s(C);},setEnd:function(A,B){var C=this;if(A.type==1&&m.$empty[A.getName()])B=A.getIndex()+1,A=A.getParent();C.endContainer=A;C.endOffset=B;if(!C.startContainer){C.startContainer=A;C.startOffset=B;}s(C);},setStartAfter:function(A){this.setStart(A.getParent(),A.getIndex()+1);},setStartBefore:function(A){this.setStart(A.getParent(),A.getIndex());},setEndAfter:function(A){this.setEnd(A.getParent(),A.getIndex()+1);},setEndBefore:function(A){this.setEnd(A.getParent(),A.getIndex());},setStartAt:function(A,B){var C=this;switch(B){case 1:C.setStart(A,0);break;case 2:if(A.type==3)C.setStart(A,A.getLength());else C.setStart(A,A.getChildCount());break;case 3:C.setStartBefore(A);break;case 4:C.setStartAfter(A);}s(C);},setEndAt:function(A,B){var C=this;switch(B){case 1:C.setEnd(A,0);break;case 2:if(A.type==3)C.setEnd(A,A.getLength());else C.setEnd(A,A.getChildCount());break;case 3:C.setEndBefore(A);break;case 4:C.setEndAfter(A);}s(C);},fixBlock:function(A,B){var E=this;var C=E.createBookmark(),D=E.document.createElement(B);E.collapse(A);E.enlarge(2);E.extractContents().appendTo(D);D.trim();if(!j)D.appendBogus();E.insertNode(D);E.moveToBookmark(C);return D;},splitBlock:function(A){var K=this;var B=new k.elementPath(K.startContainer),C=new k.elementPath(K.endContainer),D=B.blockLimit,E=C.blockLimit,F=B.block,G=C.block,H=null;
if(!D.equals(E))return null;if(A!='br'){if(!F){F=K.fixBlock(true,A);G=new k.elementPath(K.endContainer).block;}if(!G)G=K.fixBlock(false,A);}var I=F&&K.checkStartOfBlock(),J=G&&K.checkEndOfBlock();K.deleteContents();if(F&&F.equals(G))if(J){H=new k.elementPath(K.startContainer);K.moveToPosition(G,4);G=null;}else if(I){H=new k.elementPath(K.startContainer);K.moveToPosition(F,3);F=null;}else{G=K.splitElement(F);if(!j&&!F.is('ul','ol'))F.appendBogus();}return{previousBlock:F,nextBlock:G,wasStartOfBlock:I,wasEndOfBlock:J,elementPath:H};},splitElement:function(A){var D=this;if(!D.collapsed)return null;D.setEndAt(A,2);var B=D.extractContents(),C=A.clone(false);B.appendTo(C);C.insertAfter(A);D.moveToPosition(A,4);return C;},checkBoundaryOfElement:function(A,B){var C=B==1,D=this.clone();D.collapse(C);D[C?'setStartAt':'setEndAt'](A,C?1:2);var E=new k.walker(D);E.evaluator=w;return E[C?'checkBackward':'checkForward']();},checkStartOfBlock:function(){var G=this;var A=G.startContainer,B=G.startOffset;if(B&&A.type==3){var C=l.ltrim(A.substring(0,B));if(C.length)return false;}G.trim();var D=new k.elementPath(G.startContainer),E=G.clone();E.collapse(true);E.setStartAt(D.block||D.blockLimit,1);var F=new k.walker(E);F.evaluator=v(true);return F.checkBackward();},checkEndOfBlock:function(){var G=this;var A=G.endContainer,B=G.endOffset;if(A.type==3){var C=l.rtrim(A.substring(B));if(C.length)return false;}G.trim();var D=new k.elementPath(G.endContainer),E=G.clone();E.collapse(false);E.setEndAt(D.block||D.blockLimit,2);var F=new k.walker(E);F.evaluator=v(false);return F.checkForward();},checkReadOnly:(function(){function A(B,C){while(B){if(B.type==1)if(B.getAttribute('contentEditable')=='false'&&!B.data('cke-editable'))return 0;else if(B.is('html')||B.getAttribute('contentEditable')=='true'&&(B.contains(C)||B.equals(C)))break;B=B.getParent();}return 1;};return function(){var B=this.startContainer,C=this.endContainer;return!(A(B,C)&&A(C,B));};})(),moveToElementEditablePosition:function(A,B){var C;if(m.$empty[A.getName()])return false;while(A&&A.type==1){C=A.isEditable();if(C)this.moveToPosition(A,B?2:1);else if(m.$inline[A.getName()]){this.moveToPosition(A,B?4:3);return true;}if(m.$empty[A.getName()])A=A[B?'getPrevious':'getNext'](z);else A=A[B?'getLast':'getFirst'](z);if(A&&A.type==3){this.moveToPosition(A,B?4:3);return true;}}return C;},moveToElementEditStart:function(A){return this.moveToElementEditablePosition(A);},moveToElementEditEnd:function(A){return this.moveToElementEditablePosition(A,true);
},getEnclosedNode:function(){var A=this.clone();A.optimize();if(A.startContainer.type!=1||A.endContainer.type!=1)return null;var B=new k.walker(A),C=k.walker.bookmark(true),D=k.walker.whitespaces(true),E=function(G){return D(G)&&C(G);};A.evaluator=E;var F=B.next();B.reset();return F&&F.equals(B.previous())?F:null;},getTouchedStartNode:function(){var A=this.startContainer;if(this.collapsed||A.type!=1)return A;return A.getChild(this.startOffset)||A;},getTouchedEndNode:function(){var A=this.endContainer;if(this.collapsed||A.type!=1)return A;return A.getChild(this.endOffset-1)||A;}};})();h.POSITION_AFTER_START=1;h.POSITION_BEFORE_END=2;h.POSITION_BEFORE_START=3;h.POSITION_AFTER_END=4;h.ENLARGE_ELEMENT=1;h.ENLARGE_BLOCK_CONTENTS=2;h.ENLARGE_LIST_ITEM_CONTENTS=3;h.START=1;h.END=2;h.STARTEND=3;h.SHRINK_ELEMENT=1;h.SHRINK_TEXT=2;(function(){k.rangeList=function(u){if(u instanceof k.rangeList)return u;if(!u)u=[];else if(u instanceof k.range)u=[u];return l.extend(u,s);};var s={createIterator:function(){var u=this,v=k.walker.bookmark(),w=function(z){return!(z.is&&z.is('tr'));},x=[],y;return{getNextRange:function(z){y=y==undefined?0:y+1;var A=u[y];if(A&&u.length>1){if(!y)for(var B=u.length-1;B>=0;B--)x.unshift(u[B].createBookmark(true));if(z){var C=0;while(u[y+C+1]){var D=A.document,E=0,F=D.getById(x[C].endNode),G=D.getById(x[C+1].startNode),H;while(1){H=F.getNextSourceNode(false);if(!G.equals(H)){if(v(H)||H.type==1&&H.isBlockBoundary()){F=H;continue;}}else E=1;break;}if(!E)break;C++;}}A.moveToBookmark(x.shift());while(C--){H=u[++y];H.moveToBookmark(x.shift());A.setEnd(H.endContainer,H.endOffset);}}return A;}};},createBookmarks:function(u){var z=this;var v=[],w;for(var x=0;x<z.length;x++){v.push(w=z[x].createBookmark(u,true));for(var y=x+1;y<z.length;y++){z[y]=t(w,z[y]);z[y]=t(w,z[y],true);}}return v;},createBookmarks2:function(u){var v=[];for(var w=0;w<this.length;w++)v.push(this[w].createBookmark2(u));return v;},moveToBookmarks:function(u){for(var v=0;v<this.length;v++)this[v].moveToBookmark(u[v]);}};function t(u,v,w){var x=u.serializable,y=v[w?'endContainer':'startContainer'],z=w?'endOffset':'startOffset',A=x?v.document.getById(u.startNode):u.startNode,B=x?v.document.getById(u.endNode):u.endNode;if(y.equals(A.getPrevious())){v.startOffset=v.startOffset-y.getLength()-B.getPrevious().getLength();y=B.getNext();}else if(y.equals(B.getPrevious())){v.startOffset=v.startOffset-y.getLength();y=B.getNext();}y.equals(A.getParent())&&v[z]++;y.equals(B.getParent())&&v[z]++;v[w?'endContainer':'startContainer']=y;
return v;};})();(function(){if(i.webkit){i.hc=false;return;}var s=o.createFromHtml('<div style="width:0px;height:0px;position:absolute;left:-10000px;border: 1px solid;border-color: red blue;"></div>',h.document);s.appendTo(h.document.getHead());try{i.hc=s.getComputedStyle('border-top-color')==s.getComputedStyle('border-right-color');}catch(t){i.hc=false;}if(i.hc)i.cssClass+=' cke_hc';s.remove();})();q.load(p.corePlugins.split(','),function(){h.status='loaded';h.fire('loaded');var s=h._.pending;if(s){delete h._.pending;for(var t=0;t<s.length;t++)h.add(s[t]);}});if(j)try{document.execCommand('BackgroundImageCache',false,true);}catch(s){}h.skins.add('kama',(function(){var t='cke_ui_color';return{editor:{css:['editor.css']},dialog:{css:['dialog.css']},richcombo:{canGroup:false},templates:{css:['templates.css']},margins:[0,0,0,0],init:function(u){if(u.config.width&&!isNaN(u.config.width))u.config.width-=12;var v=[],w=/\$color/g,x='/* UI Color Support */.cke_skin_kama .cke_menuitem .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a:focus .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a:active .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover .cke_label,.cke_skin_kama .cke_menuitem a:focus .cke_label,.cke_skin_kama .cke_menuitem a:active .cke_label{\tbackground-color: $color !important;}.cke_skin_kama .cke_menuitem a.cke_disabled:hover .cke_label,.cke_skin_kama .cke_menuitem a.cke_disabled:focus .cke_label,.cke_skin_kama .cke_menuitem a.cke_disabled:active .cke_label{\tbackground-color: transparent !important;}.cke_skin_kama .cke_menuitem a.cke_disabled:hover .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a.cke_disabled:focus .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a.cke_disabled:active .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuitem a.cke_disabled .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuseparator{\tbackground-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover,.cke_skin_kama .cke_menuitem a:focus,.cke_skin_kama .cke_menuitem a:active{\tbackground-color: $color !important;}';if(i.webkit){x=x.split('}').slice(0,-1);for(var y=0;y<x.length;y++)x[y]=x[y].split('{');}function z(C){var D=C.getById(t);if(!D){D=C.getHead().append('style');
D.setAttribute('id',t);D.setAttribute('type','text/css');}return D;};function A(C,D,E){var F,G,H;for(var I=0;I<C.length;I++){if(i.webkit)for(G=0;G<D.length;G++){H=D[G][1];for(F=0;F<E.length;F++)H=H.replace(E[F][0],E[F][1]);C[I].$.sheet.addRule(D[G][0],H);}else{H=D;for(F=0;F<E.length;F++)H=H.replace(E[F][0],E[F][1]);if(j)C[I].$.styleSheet.cssText+=H;else C[I].$.innerHTML+=H;}}};var B=/\$color/g;l.extend(u,{uiColor:null,getUiColor:function(){return this.uiColor;},setUiColor:function(C){var D,E=z(h.document),F='.'+u.id,G=[F+' .cke_wrapper',F+'_dialog .cke_dialog_contents',F+'_dialog a.cke_dialog_tab',F+'_dialog .cke_dialog_footer'].join(','),H='background-color: $color !important;';if(i.webkit)D=[[G,H]];else D=G+'{'+H+'}';return(this.setUiColor=function(I){var J=[[B,I]];u.uiColor=I;A([E],D,J);A(v,x,J);})(C);}});u.on('menuShow',function(C){var D=C.data[0],E=D.element.getElementsByTag('iframe').getItem(0).getFrameDocument();if(!E.getById('cke_ui_color')){var F=z(E);v.push(F);var G=u.getUiColor();if(G)A([F],x,[[B,G]]);}});if(u.config.uiColor)u.setUiColor(u.config.uiColor);}};})());(function(){h.dialog?t():h.on('dialogPluginReady',t);function t(){h.dialog.on('resize',function(u){var v=u.data,w=v.width,x=v.height,y=v.dialog,z=y.parts.contents;if(v.skin!='kama')return;z.setStyles({width:w+'px',height:x+'px'});});};})();q.add('about',{requires:['dialog'],init:function(t){var u=t.addCommand('about',new h.dialogCommand('about'));u.modes={wysiwyg:1,source:1};u.canUndo=false;u.readOnly=1;t.ui.addButton('About',{label:t.lang.about.title,command:'about'});h.dialog.add('about',this.path+'dialogs/about.js');}});(function(){var t='a11yhelp',u='a11yHelp';q.add(t,{availableLangs:{en:1,he:1},init:function(v){var w=this;v.addCommand(u,{exec:function(){var x=v.langCode;x=w.availableLangs[x]?x:'en';h.scriptLoader.load(h.getUrl(w.path+'lang/'+x+'.js'),function(){l.extend(v.lang,w.langEntries[x]);v.openDialog(u);});},modes:{wysiwyg:1,source:1},readOnly:1,canUndo:false});h.dialog.add(u,this.path+'dialogs/a11yhelp.js');}});})();q.add('basicstyles',{requires:['styles','button'],init:function(t){var u=function(x,y,z,A){var B=new h.style(A);t.attachStyleStateChange(B,function(C){!t.readOnly&&t.getCommand(z).setState(C);});t.addCommand(z,new h.styleCommand(B));t.ui.addButton(x,{label:y,command:z});},v=t.config,w=t.lang;u('Bold',w.bold,'bold',v.coreStyles_bold);u('Italic',w.italic,'italic',v.coreStyles_italic);u('Underline',w.underline,'underline',v.coreStyles_underline);u('Strike',w.strike,'strike',v.coreStyles_strike);
u('Subscript',w.subscript,'subscript',v.coreStyles_subscript);u('Superscript',w.superscript,'superscript',v.coreStyles_superscript);}});p.coreStyles_bold={element:'strong',overrides:'b'};p.coreStyles_italic={element:'em',overrides:'i'};p.coreStyles_underline={element:'u'};p.coreStyles_strike={element:'strike'};p.coreStyles_subscript={element:'sub'};p.coreStyles_superscript={element:'sup'};(function(){var t={table:1,ul:1,ol:1,blockquote:1,div:1},u={},v={};l.extend(u,t,{tr:1,p:1,div:1,li:1});l.extend(v,u,{td:1});function w(I){x(I);y(I);};function x(I){var J=I.editor,K=I.data.path;if(J.readOnly)return;var L=J.config.useComputedState,M;L=L===undefined||L;if(!L)M=z(K.lastElement);M=M||K.block||K.blockLimit;M.is('body')&&(M=J.getSelection().getRanges()[0].getEnclosedNode());if(!M)return;var N=L?M.getComputedStyle('direction'):M.getStyle('direction')||M.getAttribute('dir');J.getCommand('bidirtl').setState(N=='rtl'?1:2);J.getCommand('bidiltr').setState(N=='ltr'?1:2);};function y(I){var J=I.editor,K=I.data.path.block||I.data.path.blockLimit;J.fire('contentDirChanged',K?K.getComputedStyle('direction'):J.lang.dir);};function z(I){while(I&&!(I.getName() in v||I.is('body'))){var J=I.getParent();if(!J)break;I=J;}return I;};function A(I,J,K,L){if(I.isReadOnly())return;o.setMarker(L,I,'bidi_processed',1);var M=I;while((M=M.getParent())&&!M.is('body')){if(M.getCustomData('bidi_processed')){I.removeStyle('direction');I.removeAttribute('dir');return;}}var N='useComputedState' in K.config?K.config.useComputedState:1,O=N?I.getComputedStyle('direction'):I.getStyle('direction')||I.hasAttribute('dir');if(O==J)return;I.removeStyle('direction');if(N){I.removeAttribute('dir');if(J!=I.getComputedStyle('direction'))I.setAttribute('dir',J);}else I.setAttribute('dir',J);K.forceNextSelectionCheck();};function B(I,J,K){var L=I.getCommonAncestor(false,true);I=I.clone();I.enlarge(K==2?3:2);if(I.checkBoundaryOfElement(L,1)&&I.checkBoundaryOfElement(L,2)){var M;while(L&&L.type==1&&(M=L.getParent())&&M.getChildCount()==1&&!(L.getName() in J))L=M;return L.type==1&&L.getName() in J&&L;}};function C(I){return function(J){var K=J.getSelection(),L=J.config.enterMode,M=K.getRanges();if(M&&M.length){var N={},O=K.createBookmarks(),P=M.createIterator(),Q,R=0;while(Q=P.getNextRange(1)){var S=Q.getEnclosedNode();if(!S||S&&!(S.type==1&&S.getName() in u))S=B(Q,t,L);S&&A(S,I,J,N);var T,U,V=new k.walker(Q),W=O[R].startNode,X=O[R++].endNode;V.evaluator=function(Y){return!!(Y.type==1&&Y.getName() in t&&!(Y.getName()==(L==1?'p':'div')&&Y.getParent().type==1&&Y.getParent().getName()=='blockquote')&&Y.getPosition(W)&2&&(Y.getPosition(X)&4+16)==4);
};while(U=V.next())A(U,I,J,N);T=Q.createIterator();T.enlargeBr=L!=2;while(U=T.getNextParagraph(L==1?'p':'div'))A(U,I,J,N);}o.clearAllMarkers(N);J.forceNextSelectionCheck();K.selectBookmarks(O);J.focus();}};};q.add('bidi',{requires:['styles','button'],init:function(I){var J=function(L,M,N,O){I.addCommand(N,new h.command(I,{exec:O}));I.ui.addButton(L,{label:M,command:N});},K=I.lang.bidi;J('BidiLtr',K.ltr,'bidiltr',C('ltr'));J('BidiRtl',K.rtl,'bidirtl',C('rtl'));I.on('selectionChange',w);I.on('contentDom',function(){I.document.on('dirChanged',function(L){I.fire('dirChanged',{node:L.data,dir:L.data.getDirection(1)});});});}});function D(I){var J=I.getDocument().getBody().getParent();while(I){if(I.equals(J))return false;I=I.getParent();}return true;};function E(I){var J=I==F.setAttribute,K=I==F.removeAttribute,L=/\bdirection\s*:\s*(.*?)\s*(:?$|;)/;return function(M,N){var Q=this;if(!Q.getDocument().equals(h.document)){var O;if((M==(J||K?'dir':'direction')||M=='style'&&(K||L.test(N)))&&!D(Q)){O=Q.getDirection(1);var P=I.apply(Q,arguments);if(O!=Q.getDirection(1)){Q.getDocument().fire('dirChanged',Q);return P;}}}return I.apply(Q,arguments);};};var F=o.prototype,G=['setStyle','removeStyle','setAttribute','removeAttribute'];for(var H=0;H<G.length;H++)F[G[H]]=l.override(F[G[H]],E);})();(function(){function t(x,y){var z=y.block||y.blockLimit;if(!z||z.getName()=='body')return 2;if(z.getAscendant('blockquote',true))return 1;return 2;};function u(x){var y=x.editor;if(y.readOnly)return;var z=y.getCommand('blockquote');z.state=t(y,x.data.path);z.fire('state');};function v(x){for(var y=0,z=x.getChildCount(),A;y<z&&(A=x.getChild(y));y++){if(A.type==1&&A.isBlockBoundary())return false;}return true;};var w={exec:function(x){var y=x.getCommand('blockquote').state,z=x.getSelection(),A=z&&z.getRanges(true)[0];if(!A)return;var B=z.createBookmarks();if(j){var C=B[0].startNode,D=B[0].endNode,E;if(C&&C.getParent().getName()=='blockquote'){E=C;while(E=E.getNext()){if(E.type==1&&E.isBlockBoundary()){C.move(E,true);break;}}}if(D&&D.getParent().getName()=='blockquote'){E=D;while(E=E.getPrevious()){if(E.type==1&&E.isBlockBoundary()){D.move(E);break;}}}}var F=A.createIterator(),G;F.enlargeBr=x.config.enterMode!=2;if(y==2){var H=[];while(G=F.getNextParagraph())H.push(G);if(H.length<1){var I=x.document.createElement(x.config.enterMode==1?'p':'div'),J=B.shift();A.insertNode(I);I.append(new k.text('\ufeff',x.document));A.moveToBookmark(J);A.selectNodeContents(I);A.collapse(true);J=A.createBookmark();
H.push(I);B.unshift(J);}var K=H[0].getParent(),L=[];for(var M=0;M<H.length;M++){G=H[M];K=K.getCommonAncestor(G.getParent());}var N={table:1,tbody:1,tr:1,ol:1,ul:1};while(N[K.getName()])K=K.getParent();var O=null;while(H.length>0){G=H.shift();while(!G.getParent().equals(K))G=G.getParent();if(!G.equals(O))L.push(G);O=G;}while(L.length>0){G=L.shift();if(G.getName()=='blockquote'){var P=new k.documentFragment(x.document);while(G.getFirst()){P.append(G.getFirst().remove());H.push(P.getLast());}P.replace(G);}else H.push(G);}var Q=x.document.createElement('blockquote');Q.insertBefore(H[0]);while(H.length>0){G=H.shift();Q.append(G);}}else if(y==1){var R=[],S={};while(G=F.getNextParagraph()){var T=null,U=null;while(G.getParent()){if(G.getParent().getName()=='blockquote'){T=G.getParent();U=G;break;}G=G.getParent();}if(T&&U&&!U.getCustomData('blockquote_moveout')){R.push(U);o.setMarker(S,U,'blockquote_moveout',true);}}o.clearAllMarkers(S);var V=[],W=[];S={};while(R.length>0){var X=R.shift();Q=X.getParent();if(!X.getPrevious())X.remove().insertBefore(Q);else if(!X.getNext())X.remove().insertAfter(Q);else{X.breakParent(X.getParent());W.push(X.getNext());}if(!Q.getCustomData('blockquote_processed')){W.push(Q);o.setMarker(S,Q,'blockquote_processed',true);}V.push(X);}o.clearAllMarkers(S);for(M=W.length-1;M>=0;M--){Q=W[M];if(v(Q))Q.remove();}if(x.config.enterMode==2){var Y=true;while(V.length){X=V.shift();if(X.getName()=='div'){P=new k.documentFragment(x.document);var Z=Y&&X.getPrevious()&&!(X.getPrevious().type==1&&X.getPrevious().isBlockBoundary());if(Z)P.append(x.document.createElement('br'));var aa=X.getNext()&&!(X.getNext().type==1&&X.getNext().isBlockBoundary());while(X.getFirst())X.getFirst().remove().appendTo(P);if(aa)P.append(x.document.createElement('br'));P.replace(X);Y=false;}}}}z.selectBookmarks(B);x.focus();}};q.add('blockquote',{init:function(x){x.addCommand('blockquote',w);x.ui.addButton('Blockquote',{label:x.lang.blockquote,command:'blockquote'});x.on('selectionChange',u);},requires:['domiterator']});})();q.add('button',{beforeInit:function(t){t.ui.addHandler(1,r.button.handler);}});h.UI_BUTTON='button';r.button=function(t){l.extend(this,t,{title:t.label,className:t.className||t.command&&'cke_button_'+t.command||'',click:t.click||(function(u){u.execCommand(t.command);})});this._={};};r.button.handler={create:function(t){return new r.button(t);}};(function(){r.button.prototype={render:function(t,u){var v=i,w=this._.id=l.getNextId(),x='',y=this.command,z;this._.editor=t;
var A={id:w,button:this,editor:t,focus:function(){var G=h.document.getById(w);G.focus();},execute:function(){this.button.click(t);}},B=l.addFunction(function(G){if(A.onkey){G=new k.event(G);return A.onkey(A,G.getKeystroke())!==false;}}),C=l.addFunction(function(G){var H;if(A.onfocus)H=A.onfocus(A,new k.event(G))!==false;if(i.gecko&&i.version<10900)G.preventBubble();return H;});A.clickFn=z=l.addFunction(A.execute,A);if(this.modes){var D={};function E(){var G=t.mode;if(G){var H=this.modes[G]?D[G]!=undefined?D[G]:2:0;this.setState(t.readOnly&&!this.readOnly?0:H);}};t.on('beforeModeUnload',function(){if(t.mode&&this._.state!=0)D[t.mode]=this._.state;},this);t.on('mode',E,this);!this.readOnly&&t.on('readOnly',E,this);}else if(y){y=t.getCommand(y);if(y){y.on('state',function(){this.setState(y.state);},this);x+='cke_'+(y.state==1?'on':y.state==0?'disabled':'off');}}if(!y)x+='cke_off';if(this.className)x+=' '+this.className;u.push('<span class="cke_button'+(this.icon&&this.icon.indexOf('.png')==-1?' cke_noalphafix':'')+'">','<a id="',w,'" class="',x,'"',v.gecko&&v.version>=10900&&!v.hc?'':'" href="javascript:void(\''+(this.title||'').replace("'",'')+"')\"",' title="',this.title,'" tabindex="-1" hidefocus="true" role="button" aria-labelledby="'+w+'_label"'+(this.hasArrow?' aria-haspopup="true"':''));if(v.opera||v.gecko&&v.mac)u.push(' onkeypress="return false;"');if(v.gecko)u.push(' onblur="this.style.cssText = this.style.cssText;"');u.push(' onkeydown="return CKEDITOR.tools.callFunction(',B,', event);" onfocus="return CKEDITOR.tools.callFunction(',C,', event);" onclick="CKEDITOR.tools.callFunction(',z,', this); return false;"><span class="cke_icon"');if(this.icon){var F=(this.iconOffset||0)*-16;u.push(' style="background-image:url(',h.getUrl(this.icon),');background-position:0 '+F+'px;"');}u.push('>&nbsp;</span><span id="',w,'_label" class="cke_label">',this.label,'</span>');if(this.hasArrow)u.push('<span class="cke_buttonarrow">'+(i.hc?'&#9660;':'&nbsp;')+'</span>');u.push('</a>','</span>');if(this.onRender)this.onRender();return A;},setState:function(t){if(this._.state==t)return false;this._.state=t;var u=h.document.getById(this._.id);if(u){u.setState(t);t==0?u.setAttribute('aria-disabled',true):u.removeAttribute('aria-disabled');t==1?u.setAttribute('aria-pressed',true):u.removeAttribute('aria-pressed');return true;}else return false;}};})();r.prototype.addButton=function(t,u){this.add(t,1,u);};(function(){var t=function(F,G){var H=F.document,I=H.getBody(),J=0,K=function(){J=1;
};I.on(G,K);(i.version>7?H.$:H.$.selection.createRange()).execCommand(G);I.removeListener(G,K);return J;},u=j?function(F,G){return t(F,G);}:function(F,G){try{return F.document.$.execCommand(G,false,null);}catch(H){return false;}},v=function(F){var G=this;G.type=F;G.canUndo=G.type=='cut';G.startDisabled=true;};v.prototype={exec:function(F,G){this.type=='cut'&&A(F);var H=u(F,this.type);if(!H)alert(F.lang.clipboard[this.type+'Error']);return H;}};var w={canUndo:false,exec:j?function(F){F.focus();if(!F.document.getBody().fire('beforepaste')&&!t(F,'paste')){F.fire('pasteDialog');return false;}}:function(F){try{if(!F.document.getBody().fire('beforepaste')&&!F.document.$.execCommand('Paste',false,null))throw 0;}catch(G){setTimeout(function(){F.fire('pasteDialog');},0);return false;}}},x=function(F){if(this.mode!='wysiwyg')return;switch(F.data.keyCode){case 1000+86:case 2000+45:var G=this.document.getBody();if(!j&&G.fire('beforepaste'))F.cancel();else if(i.opera||i.gecko&&i.version<10900)G.fire('paste');return;case 1000+88:case 2000+46:var H=this;this.fire('saveSnapshot');setTimeout(function(){H.fire('saveSnapshot');},0);}};function y(F){F.cancel();};function z(F,G,H){var I=this.document;if(I.getById('cke_pastebin'))return;if(G=='text'&&F.data&&F.data.$.clipboardData){var J=F.data.$.clipboardData.getData('text/plain');if(J){F.data.preventDefault();H(J);return;}}var K=this.getSelection(),L=new k.range(I),M=new o(G=='text'?'textarea':i.webkit?'body':'div',I);M.setAttribute('id','cke_pastebin');i.webkit&&M.append(I.createText('\xa0'));I.getBody().append(M);M.setStyles({position:'absolute',top:K.getStartElement().getDocumentPosition().y+'px',width:'1px',height:'1px',overflow:'hidden'});M.setStyle(this.config.contentsLangDirection=='ltr'?'left':'right','-1000px');var N=K.createBookmarks();this.on('selectionChange',y,null,null,0);if(G=='text')M.$.focus();else{L.setStartAt(M,1);L.setEndAt(M,2);L.select(true);}var O=this;window.setTimeout(function(){G=='text'&&i.gecko&&O.focusGrabber.focus();M.remove();O.removeListener('selectionChange',y);var P;M=i.webkit&&(P=M.getFirst())&&P.is&&P.hasClass('Apple-style-span')?P:M;K.selectBookmarks(N);H(M['get'+(G=='text'?'Value':'Html')]());},0);};function A(F){if(!j||i.quirks)return;var G=F.getSelection(),H;if(G.getType()==3&&(H=G.getSelectedElement())){var I=G.getRanges()[0],J=F.document.createText('');J.insertBefore(H);I.setStartBefore(J);I.setEndAfter(H);G.selectRanges([I]);setTimeout(function(){if(H.getParent()){J.remove();G.selectElement(H);
}},0);}};var B;function C(F,G){j&&(B=1);var H=2;try{H=G.document.$.queryCommandEnabled(F)?2:0;}catch(I){}B=0;return H;};var D;function E(){var G=this;if(G.mode!='wysiwyg')return;G.getCommand('cut').setState(D?0:C('Cut',G));G.getCommand('copy').setState(C('Copy',G));var F=D?0:i.webkit?2:C('Paste',G);G.fire('pasteState',F);};q.add('clipboard',{requires:['dialog','htmldataprocessor'],init:function(F){F.on('paste',function(H){var I=H.data;if(I.html)F.insertHtml(I.html);else if(I.text)F.insertText(I.text);setTimeout(function(){F.fire('afterPaste');},0);},null,null,1000);F.on('pasteDialog',function(H){setTimeout(function(){F.openDialog('paste');},0);});F.on('pasteState',function(H){F.getCommand('paste').setState(H.data);});function G(H,I,J,K){var L=F.lang[I];F.addCommand(I,J);F.ui.addButton(H,{label:L,command:I});if(F.addMenuItems)F.addMenuItem(I,{label:L,command:I,group:'clipboard',order:K});};G('Cut','cut',new v('cut'),1);G('Copy','copy',new v('copy'),4);G('Paste','paste',w,8);h.dialog.add('paste',h.getUrl(this.path+'dialogs/paste.js'));F.on('key',x,F);F.on('contentDom',function(){var H=F.document.getBody();H.on(i.webkit?'paste':'beforepaste',function(I){if(B)return;var J={mode:'html'};F.fire('beforePaste',J);z.call(F,I,J.mode,function(K){if(!(K=l.trim(K.replace(/<span[^>]+data-cke-bookmark[^<]*?<\/span>/ig,''))))return;var L={};L[J.mode]=K;F.fire('paste',L);});});H.on('beforecut',function(){!B&&A(F);});H.on('mouseup',function(){setTimeout(function(){E.call(F);},0);},F);H.on('keyup',E,F);});F.on('selectionChange',function(H){D=H.data.selection.getRanges()[0].checkReadOnly();E.call(F);});if(F.contextMenu)F.contextMenu.addListener(function(H,I){var J=I.getRanges()[0].checkReadOnly();return{cut:!J&&C('Cut',F),copy:C('Copy',F),paste:!J&&(i.webkit?2:C('Paste',F))};});}});})();q.add('colorbutton',{requires:['panelbutton','floatpanel','styles'],init:function(t){var u=t.config,v=t.lang.colorButton,w;if(!i.hc){x('TextColor','fore',v.textColorTitle);x('BGColor','back',v.bgColorTitle);}function x(A,B,C){var D=l.getNextId()+'_colorBox';t.ui.add(A,4,{label:C,title:C,className:'cke_button_'+A.toLowerCase(),modes:{wysiwyg:1},panel:{css:t.skin.editor.css,attributes:{role:'listbox','aria-label':v.panelTitle}},onBlock:function(E,F){F.autoSize=true;F.element.addClass('cke_colorblock');F.element.setHtml(y(E,B,D));F.element.getDocument().getBody().setStyle('overflow','hidden');r.fire('ready',this);var G=F.keys,H=t.lang.dir=='rtl';G[H?37:39]='next';G[40]='next';G[9]='next';G[H?39:37]='prev';
G[38]='prev';G[2000+9]='prev';G[32]='click';},onOpen:function(){var E=t.getSelection(),F=E&&E.getStartElement(),G=new k.elementPath(F),H;F=G.block||G.blockLimit||t.document.getBody();do H=F&&F.getComputedStyle(B=='back'?'background-color':'color')||'transparent';while(B=='back'&&H=='transparent'&&F&&(F=F.getParent()))if(!H||H=='transparent')H='#ffffff';this._.panel._.iframe.getFrameDocument().getById(D).setStyle('background-color',H);}});};function y(A,B,C){var D=[],E=u.colorButton_colors.split(','),F=E.length+(u.colorButton_enableMore?2:1),G=l.addFunction(function(M,N){if(M=='?'){var O=arguments.callee;function P(R){this.removeListener('ok',P);this.removeListener('cancel',P);R.name=='ok'&&O(this.getContentElement('picker','selectedColor').getValue(),N);};t.openDialog('colordialog',function(){this.on('ok',P);this.on('cancel',P);});return;}t.focus();A.hide();t.fire('saveSnapshot');new h.style(u['colorButton_'+N+'Style'],{color:'inherit'}).remove(t.document);if(M){var Q=u['colorButton_'+N+'Style'];Q.childRule=N=='back'?function(R){return z(R);}:function(R){return R.getName()!='a'||z(R);};new h.style(Q,{color:M}).apply(t.document);}t.fire('saveSnapshot');});D.push('<a class="cke_colorauto" _cke_focus=1 hidefocus=true title="',v.auto,'" onclick="CKEDITOR.tools.callFunction(',G,",null,'",B,"');return false;\" href=\"javascript:void('",v.auto,'\')" role="option" aria-posinset="1" aria-setsize="',F,'"><table role="presentation" cellspacing=0 cellpadding=0 width="100%"><tr><td><span class="cke_colorbox" id="',C,'"></span></td><td colspan=7 align=center>',v.auto,'</td></tr></table></a><table role="presentation" cellspacing=0 cellpadding=0 width="100%">');for(var H=0;H<E.length;H++){if(H%8===0)D.push('</tr><tr>');var I=E[H].split('/'),J=I[0],K=I[1]||J;if(!I[1])J='#'+J.replace(/^(.)(.)(.)$/,'$1$1$2$2$3$3');var L=t.lang.colors[K]||K;D.push('<td><a class="cke_colorbox" _cke_focus=1 hidefocus=true title="',L,'" onclick="CKEDITOR.tools.callFunction(',G,",'",J,"','",B,"'); return false;\" href=\"javascript:void('",L,'\')" role="option" aria-posinset="',H+2,'" aria-setsize="',F,'"><span class="cke_colorbox" style="background-color:#',K,'"></span></a></td>');}if(u.colorButton_enableMore===undefined||u.colorButton_enableMore)D.push('</tr><tr><td colspan=8 align=center><a class="cke_colormore" _cke_focus=1 hidefocus=true title="',v.more,'" onclick="CKEDITOR.tools.callFunction(',G,",'?','",B,"');return false;\" href=\"javascript:void('",v.more,"')\"",' role="option" aria-posinset="',F,'" aria-setsize="',F,'">',v.more,'</a></td>');
D.push('</tr></table>');return D.join('');};function z(A){return A.getAttribute('contentEditable')=='false'||A.getAttribute('data-nostyle');};}});p.colorButton_colors='000,800000,8B4513,2F4F4F,008080,000080,4B0082,696969,B22222,A52A2A,DAA520,006400,40E0D0,0000CD,800080,808080,F00,FF8C00,FFD700,008000,0FF,00F,EE82EE,A9A9A9,FFA07A,FFA500,FFFF00,00FF00,AFEEEE,ADD8E6,DDA0DD,D3D3D3,FFF0F5,FAEBD7,FFFFE0,F0FFF0,F0FFFF,F0F8FF,E6E6FA,FFF';p.colorButton_foreStyle={element:'span',styles:{color:'#(color)'},overrides:[{element:'font',attributes:{color:null}}]};p.colorButton_backStyle={element:'span',styles:{'background-color':'#(color)'}};q.colordialog={init:function(t){t.addCommand('colordialog',new h.dialogCommand('colordialog'));h.dialog.add('colordialog',this.path+'dialogs/colordialog.js');}};q.add('colordialog',q.colordialog);q.add('contextmenu',{requires:['menu'],onLoad:function(){q.contextMenu=l.createClass({base:h.menu,$:function(t){this.base.call(this,t,{panel:{className:t.skinClass+' cke_contextmenu',attributes:{'aria-label':t.lang.contextmenu.options}}});},proto:{addTarget:function(t,u){if(i.opera&&!('oncontextmenu' in document.body)){var v;t.on('mousedown',function(z){z=z.data;if(z.$.button!=2){if(z.getKeystroke()==1000+1)t.fire('contextmenu',z);return;}if(u&&(i.mac?z.$.metaKey:z.$.ctrlKey))return;var A=z.getTarget();if(!v){var B=A.getDocument();v=B.createElement('input');v.$.type='button';B.getBody().append(v);}v.setAttribute('style','position:absolute;top:'+(z.$.clientY-2)+'px;left:'+(z.$.clientX-2)+'px;width:5px;height:5px;opacity:0.01');});t.on('mouseup',function(z){if(v){v.remove();v=undefined;t.fire('contextmenu',z.data);}});}t.on('contextmenu',function(z){var A=z.data;if(u&&(i.webkit?w:i.mac?A.$.metaKey:A.$.ctrlKey))return;A.preventDefault();var B=A.getTarget().getDocument().getDocumentElement(),C=A.$.clientX,D=A.$.clientY;l.setTimeout(function(){this.open(B,null,C,D);},0,this);},this);if(i.opera)t.on('keypress',function(z){var A=z.data;if(A.$.keyCode===0)A.preventDefault();});if(i.webkit){var w,x=function(z){w=i.mac?z.data.$.metaKey:z.data.$.ctrlKey;},y=function(){w=0;};t.on('keydown',x);t.on('keyup',y);t.on('contextmenu',y);}},open:function(t,u,v,w){this.editor.focus();t=t||h.document.getDocumentElement();this.show(t,u,v,w);}}});},beforeInit:function(t){t.contextMenu=new q.contextMenu(t);t.addCommand('contextMenu',{exec:function(){t.contextMenu.open(t.document.getBody());}});}});(function(){function t(v){var w=this.att,x=v&&v.hasAttribute(w)&&v.getAttribute(w)||'';
if(x!==undefined)this.setValue(x);};function u(){var v;for(var w=0;w<arguments.length;w++){if(arguments[w] instanceof o){v=arguments[w];break;}}if(v){var x=this.att,y=this.getValue();if(y)v.setAttribute(x,y);else v.removeAttribute(x,y);}};q.add('dialogadvtab',{createAdvancedTab:function(v,w){if(!w)w={id:1,dir:1,classes:1,styles:1};var x=v.lang.common,y={id:'advanced',label:x.advancedTab,title:x.advancedTab,elements:[{type:'vbox',padding:1,children:[]}]},z=[];if(w.id||w.dir){if(w.id)z.push({id:'advId',att:'id',type:'text',label:x.id,setup:t,commit:u});if(w.dir)z.push({id:'advLangDir',att:'dir',type:'select',label:x.langDir,'default':'',style:'width:100%',items:[[x.notSet,''],[x.langDirLTR,'ltr'],[x.langDirRTL,'rtl']],setup:t,commit:u});y.elements[0].children.push({type:'hbox',widths:['50%','50%'],children:[].concat(z)});}if(w.styles||w.classes){z=[];if(w.styles)z.push({id:'advStyles',att:'style',type:'text',label:x.styles,'default':'',getStyle:function(A,B){var C=this.getValue().match(new RegExp(A+'\\s*:s*([^;]*)','i'));return C?C[1]:B;},updateStyle:function(A,B){var C=this.getValue();if(C)C=C.replace(new RegExp('\\s*'+A+'s*:[^;]*(?:$|;s*)','i'),'').replace(/^[;\s]+/,'').replace(/\s+$/,'');if(B){C&&!/;\s*$/.test(C)&&(C+='; ');C+=A+': '+B;}this.setValue(C,1);},setup:t,commit:u});if(w.classes)z.push({type:'hbox',widths:['45%','55%'],children:[{id:'advCSSClasses',att:'class',type:'text',label:x.cssClasses,'default':'',setup:t,commit:u}]});y.elements[0].children.push({type:'hbox',widths:['50%','50%'],children:[].concat(z)});}return y;}});})();(function(){q.add('div',{requires:['editingblock','domiterator','styles'],init:function(t){var u=t.lang.div;t.addCommand('creatediv',new h.dialogCommand('creatediv'));t.addCommand('editdiv',new h.dialogCommand('editdiv'));t.addCommand('removediv',{exec:function(v){var w=v.getSelection(),x=w&&w.getRanges(),y,z=w.createBookmarks(),A,B=[];function C(E){var F=new k.elementPath(E),G=F.blockLimit,H=G.is('div')&&G;if(H&&!H.data('cke-div-added')){B.push(H);H.data('cke-div-added');}};for(var D=0;D<x.length;D++){y=x[D];if(y.collapsed)C(w.getStartElement());else{A=new k.walker(y);A.evaluator=C;A.lastForward();}}for(D=0;D<B.length;D++)B[D].remove(true);w.selectBookmarks(z);}});t.ui.addButton('CreateDiv',{label:u.toolbar,command:'creatediv'});if(t.addMenuItems){t.addMenuItems({editdiv:{label:u.edit,command:'editdiv',group:'div',order:1},removediv:{label:u.remove,command:'removediv',group:'div',order:5}});if(t.contextMenu)t.contextMenu.addListener(function(v,w){if(!v||v.isReadOnly())return null;
var x=new k.elementPath(v),y=x.blockLimit;if(y&&y.getAscendant('div',true))return{editdiv:2,removediv:2};return null;});}h.dialog.add('creatediv',this.path+'dialogs/div.js');h.dialog.add('editdiv',this.path+'dialogs/div.js');}});})();(function(){var t={toolbarFocus:{editorFocus:false,readOnly:1,exec:function(v){var w=v._.elementsPath.idBase,x=h.document.getById(w+'0');x&&x.focus(j||i.air);}}},u='<span class="cke_empty">&nbsp;</span>';q.add('elementspath',{requires:['selection'],init:function(v){var w='cke_path_'+v.name,x,y=function(){if(!x)x=h.document.getById(w);return x;},z='cke_elementspath_'+l.getNextNumber()+'_';v._.elementsPath={idBase:z,filters:[]};v.on('themeSpace',function(E){if(E.data.space=='bottom')E.data.html+='<span id="'+w+'_label" class="cke_voice_label">'+v.lang.elementsPath.eleLabel+'</span>'+'<div id="'+w+'" class="cke_path" role="group" aria-labelledby="'+w+'_label">'+u+'</div>';});function A(E){v.focus();var F=v._.elementsPath.list[E];if(F.is('body')){var G=new k.range(v.document);G.selectNodeContents(F);G.select();}else v.getSelection().selectElement(F);};var B=l.addFunction(A),C=l.addFunction(function(E,F){var G=v._.elementsPath.idBase,H;F=new k.event(F);var I=v.lang.dir=='rtl';switch(F.getKeystroke()){case I?39:37:case 9:H=h.document.getById(G+(E+1));if(!H)H=h.document.getById(G+'0');H.focus();return false;case I?37:39:case 2000+9:H=h.document.getById(G+(E-1));if(!H)H=h.document.getById(G+(v._.elementsPath.list.length-1));H.focus();return false;case 27:v.focus();return false;case 13:case 32:A(E);return false;}return true;});v.on('selectionChange',function(E){var F=i,G=E.data.selection,H=G.getStartElement(),I=[],J=E.editor,K=J._.elementsPath.list=[],L=J._.elementsPath.filters;while(H){var M=0,N;if(H.data('cke-display-name'))N=H.data('cke-display-name');else if(H.data('cke-real-element-type'))N=H.data('cke-real-element-type');else N=H.getName();for(var O=0;O<L.length;O++){var P=L[O](H,N);if(P===false){M=1;break;}N=P||N;}if(!M){var Q=K.push(H)-1,R='';if(F.opera||F.gecko&&F.mac)R+=' onkeypress="return false;"';if(F.gecko)R+=' onblur="this.style.cssText = this.style.cssText;"';var S=J.lang.elementsPath.eleTitle.replace(/%1/,N);I.unshift('<a id="',z,Q,'" href="javascript:void(\'',N,'\')" tabindex="-1" title="',S,'"'+(i.gecko&&i.version<10900?' onfocus="event.preventBubble();"':'')+' hidefocus="true" '+' onkeydown="return CKEDITOR.tools.callFunction(',C,',',Q,', event );"'+R,' onclick="CKEDITOR.tools.callFunction('+B,',',Q,'); return false;"',' role="button" aria-labelledby="'+z+Q+'_label">',N,'<span id="',z,Q,'_label" class="cke_label">'+S+'</span>','</a>');
}if(N=='body')break;H=H.getParent();}var T=y();T.setHtml(I.join('')+u);J.fire('elementsPathUpdate',{space:T});});function D(){x&&x.setHtml(u);delete v._.elementsPath.list;};v.on('readOnly',D);v.on('contentDomUnload',D);v.addCommand('elementsPathFocus',t.toolbarFocus);}});})();(function(){q.add('enterkey',{requires:['keystrokes','indent'],init:function(A){A.addCommand('enter',{modes:{wysiwyg:1},editorFocus:false,exec:function(C){y(C);}});A.addCommand('shiftEnter',{modes:{wysiwyg:1},editorFocus:false,exec:function(C){x(C);}});var B=A.keystrokeHandler.keystrokes;B[13]='enter';B[2000+13]='shiftEnter';}});q.enterkey={enterBlock:function(A,B,C,D){C=C||z(A);if(!C)return;var E=C.document,F=C.checkStartOfBlock(),G=C.checkEndOfBlock(),H=new k.elementPath(C.startContainer),I=H.block;if(F&&G){if(I&&(I.is('li')||I.getParent().is('li'))){A.execCommand('outdent');return;}}else if(!G&&I&&I.is('pre'))u(A,B,C,D);var J=B==3?'div':'p',K=C.splitBlock(J);if(!K)return;var L=K.previousBlock,M=K.nextBlock,N=K.wasStartOfBlock,O=K.wasEndOfBlock,P;if(M){P=M.getParent();if(P.is('li')){M.breakParent(P);M.move(M.getNext(),1);}}else if(L&&(P=L.getParent())&&P.is('li')){L.breakParent(P);P=L.getNext();C.moveToElementEditStart(P);L.move(L.getPrevious());}if(!N&&!O){if(M.is('li')&&(P=M.getFirst(k.walker.invisible(true)))&&P.is&&P.is('ul','ol'))(j?E.createText('\xa0'):E.createElement('br')).insertBefore(P);if(M)C.moveToElementEditStart(M);}else{var Q,R;if(L){if(L.is('li')||!(w.test(L.getName())||L.is('pre'))){Q=L.clone();Q.is('li')&&Q.removeAttribute('value');}}else if(M)Q=M.clone();if(!Q){if(P&&P.is('li'))Q=P;else{Q=E.createElement(J);if(L&&(R=L.getDirection()))Q.setAttribute('dir',R);}}else if(D&&!Q.is('li'))Q.renameNode(J);var S=K.elementPath;if(S)for(var T=0,U=S.elements.length;T<U;T++){var V=S.elements[T];if(V.equals(S.block)||V.equals(S.blockLimit))break;if(m.$removeEmpty[V.getName()]){V=V.clone();Q.moveChildren(V);Q.append(V);}}if(!j)Q.appendBogus();if(!Q.getParent())C.insertNode(Q);if(j&&N&&(!O||!L.getChildCount())){C.moveToElementEditStart(O?L:Q);C.select();}C.moveToElementEditStart(N&&!O?M:Q);}if(!j)if(M){var W=E.createElement('span');W.setHtml('&nbsp;');C.insertNode(W);W.scrollIntoView();C.deleteContents();}else Q.scrollIntoView();C.select();},enterBr:function(A,B,C,D){C=C||z(A);if(!C)return;var E=C.document,F=B==3?'div':'p',G=C.checkEndOfBlock(),H=new k.elementPath(A.getSelection().getStartElement()),I=H.block,J=I&&H.block.getName(),K=false;if(!D&&J=='li'){v(A,B,C,D);return;}if(!D&&G&&w.test(J)){var L,M;
if(M=I.getDirection()){L=E.createElement('div');L.setAttribute('dir',M);L.insertAfter(I);C.setStart(L,0);}else{E.createElement('br').insertAfter(I);if(i.gecko)E.createText('').insertAfter(I);C.setStartAt(I.getNext(),j?3:1);}}else{var N;K=J=='pre';if(K&&!i.gecko)N=E.createText(j?'\r':'\n');else N=E.createElement('br');C.deleteContents();C.insertNode(N);if(j)C.setStartAt(N,4);else{E.createText('\ufeff').insertAfter(N);if(G)N.getParent().appendBogus();N.getNext().$.nodeValue='';C.setStartAt(N.getNext(),1);var O=null;if(!i.gecko){O=E.createElement('span');O.setHtml('&nbsp;');}else O=E.createElement('br');O.insertBefore(N.getNext());O.scrollIntoView();O.remove();}}C.collapse(true);C.select(K);}};var t=q.enterkey,u=t.enterBr,v=t.enterBlock,w=/^h[1-6]$/;function x(A){if(A.mode!='wysiwyg')return false;return y(A,A.config.shiftEnterMode,1);};function y(A,B,C){C=A.config.forceEnterMode||C;if(A.mode!='wysiwyg')return false;if(!B)B=A.config.enterMode;setTimeout(function(){A.fire('saveSnapshot');if(B==2)u(A,B,null,C);else v(A,B,null,C);},0);return true;};function z(A){var B=A.getSelection().getRanges(true);for(var C=B.length-1;C>0;C--)B[C].deleteContents();return B[0];};})();(function(){var t='nbsp,gt,lt,amp',u='quot,iexcl,cent,pound,curren,yen,brvbar,sect,uml,copy,ordf,laquo,not,shy,reg,macr,deg,plusmn,sup2,sup3,acute,micro,para,middot,cedil,sup1,ordm,raquo,frac14,frac12,frac34,iquest,times,divide,fnof,bull,hellip,prime,Prime,oline,frasl,weierp,image,real,trade,alefsym,larr,uarr,rarr,darr,harr,crarr,lArr,uArr,rArr,dArr,hArr,forall,part,exist,empty,nabla,isin,notin,ni,prod,sum,minus,lowast,radic,prop,infin,ang,and,or,cap,cup,int,there4,sim,cong,asymp,ne,equiv,le,ge,sub,sup,nsub,sube,supe,oplus,otimes,perp,sdot,lceil,rceil,lfloor,rfloor,lang,rang,loz,spades,clubs,hearts,diams,circ,tilde,ensp,emsp,thinsp,zwnj,zwj,lrm,rlm,ndash,mdash,lsquo,rsquo,sbquo,ldquo,rdquo,bdquo,dagger,Dagger,permil,lsaquo,rsaquo,euro',v='Agrave,Aacute,Acirc,Atilde,Auml,Aring,AElig,Ccedil,Egrave,Eacute,Ecirc,Euml,Igrave,Iacute,Icirc,Iuml,ETH,Ntilde,Ograve,Oacute,Ocirc,Otilde,Ouml,Oslash,Ugrave,Uacute,Ucirc,Uuml,Yacute,THORN,szlig,agrave,aacute,acirc,atilde,auml,aring,aelig,ccedil,egrave,eacute,ecirc,euml,igrave,iacute,icirc,iuml,eth,ntilde,ograve,oacute,ocirc,otilde,ouml,oslash,ugrave,uacute,ucirc,uuml,yacute,thorn,yuml,OElig,oelig,Scaron,scaron,Yuml',w='Alpha,Beta,Gamma,Delta,Epsilon,Zeta,Eta,Theta,Iota,Kappa,Lambda,Mu,Nu,Xi,Omicron,Pi,Rho,Sigma,Tau,Upsilon,Phi,Chi,Psi,Omega,alpha,beta,gamma,delta,epsilon,zeta,eta,theta,iota,kappa,lambda,mu,nu,xi,omicron,pi,rho,sigmaf,sigma,tau,upsilon,phi,chi,psi,omega,thetasym,upsih,piv';
function x(y,z){var A={},B=[],C={nbsp:'\xa0',shy:'­',gt:'>',lt:'<',amp:'&'};y=y.replace(/\b(nbsp|shy|gt|lt|amp)(?:,|$)/g,function(H,I){var J=z?'&'+I+';':C[I],K=z?C[I]:'&'+I+';';A[J]=K;B.push(J);return '';});if(!z&&y){y=y.split(',');var D=document.createElement('div'),E;D.innerHTML='&'+y.join(';&')+';';E=D.innerHTML;D=null;for(var F=0;F<E.length;F++){var G=E.charAt(F);A[G]='&'+y[F]+';';B.push(G);}}A.regex=B.join(z?'|':'');return A;};q.add('entities',{afterInit:function(y){var z=y.config,A=y.dataProcessor,B=A&&A.htmlFilter;if(B){var C='';if(z.basicEntities!==false)C+=t;if(z.entities){C+=','+u;if(z.entities_latin)C+=','+v;if(z.entities_greek)C+=','+w;if(z.entities_additional)C+=','+z.entities_additional;}var D=x(C),E=D.regex?'['+D.regex+']':'a^';delete D.regex;if(z.entities&&z.entities_processNumerical)E='[^ -~]|'+E;E=new RegExp(E,'g');function F(J){return z.entities_processNumerical=='force'||!D[J]?'&#'+J.charCodeAt(0)+';':D[J];};var G=x([t,'shy'].join(','),true),H=new RegExp(G.regex,'g');function I(J){return G[J];};B.addRules({text:function(J){return J.replace(H,I).replace(E,F);}});}}});})();p.basicEntities=true;p.entities=true;p.entities_latin=true;p.entities_greek=true;p.entities_additional='#39';(function(){function t(C,D){var E=[];if(!D)return C;else for(var F in D)E.push(F+'='+encodeURIComponent(D[F]));return C+(C.indexOf('?')!=-1?'&':'?')+E.join('&');};function u(C){C+='';var D=C.charAt(0).toUpperCase();return D+C.substr(1);};function v(C){var J=this;var D=J.getDialog(),E=D.getParentEditor();E._.filebrowserSe=J;var F=E.config['filebrowser'+u(D.getName())+'WindowWidth']||E.config.filebrowserWindowWidth||'80%',G=E.config['filebrowser'+u(D.getName())+'WindowHeight']||E.config.filebrowserWindowHeight||'70%',H=J.filebrowser.params||{};H.CKEditor=E.name;H.CKEditorFuncNum=E._.filebrowserFn;if(!H.langCode)H.langCode=E.langCode;var I=t(J.filebrowser.url,H);E.popup(I,F,G,E.config.fileBrowserWindowFeatures);};function w(C){var F=this;var D=F.getDialog(),E=D.getParentEditor();E._.filebrowserSe=F;if(!D.getContentElement(F['for'][0],F['for'][1]).getInputElement().$.value)return false;if(!D.getContentElement(F['for'][0],F['for'][1]).getAction())return false;return true;};function x(C,D,E){var F=E.params||{};F.CKEditor=C.name;F.CKEditorFuncNum=C._.filebrowserFn;if(!F.langCode)F.langCode=C.langCode;D.action=t(E.url,F);D.filebrowser=E;};function y(C,D,E,F){var G,H;for(var I in F){G=F[I];if(G.type=='hbox'||G.type=='vbox')y(C,D,E,G.children);if(!G.filebrowser)continue;if(typeof G.filebrowser=='string'){var J={action:G.type=='fileButton'?'QuickUpload':'Browse',target:G.filebrowser};
G.filebrowser=J;}if(G.filebrowser.action=='Browse'){var K=G.filebrowser.url;if(K===undefined){K=C.config['filebrowser'+u(D)+'BrowseUrl'];if(K===undefined)K=C.config.filebrowserBrowseUrl;}if(K){G.onClick=v;G.filebrowser.url=K;G.hidden=false;}}else if(G.filebrowser.action=='QuickUpload'&&G['for']){K=G.filebrowser.url;if(K===undefined){K=C.config['filebrowser'+u(D)+'UploadUrl'];if(K===undefined)K=C.config.filebrowserUploadUrl;}if(K){var L=G.onClick;G.onClick=function(M){var N=M.sender;if(L&&L.call(N,M)===false)return false;return w.call(N,M);};G.filebrowser.url=K;G.hidden=false;x(C,E.getContents(G['for'][0]).get(G['for'][1]),G.filebrowser);}}}};function z(C,D){var E=D.getDialog(),F=D.filebrowser.target||null;C=C.replace(/#/g,'%23');if(F){var G=F.split(':'),H=E.getContentElement(G[0],G[1]);if(H){H.setValue(C);E.selectPage(G[0]);}}};function A(C,D,E){if(E.indexOf(';')!==-1){var F=E.split(';');for(var G=0;G<F.length;G++){if(A(C,D,F[G]))return true;}return false;}var H=C.getContents(D).get(E).filebrowser;return H&&H.url;};function B(C,D){var H=this;var E=H._.filebrowserSe.getDialog(),F=H._.filebrowserSe['for'],G=H._.filebrowserSe.filebrowser.onSelect;if(F)E.getContentElement(F[0],F[1]).reset();if(typeof D=='function'&&D.call(H._.filebrowserSe)===false)return;if(G&&G.call(H._.filebrowserSe,C,D)===false)return;if(typeof D=='string'&&D)alert(D);if(C)z(C,H._.filebrowserSe);};q.add('filebrowser',{init:function(C,D){C._.filebrowserFn=l.addFunction(B,C);C.on('destroy',function(){l.removeFunction(this._.filebrowserFn);});}});h.on('dialogDefinition',function(C){var D=C.data.definition,E;for(var F in D.contents){if(E=D.contents[F]){y(C.editor,C.data.name,D,E.elements);if(E.hidden&&E.filebrowser)E.hidden=!A(D,E.id,E.filebrowser);}}});})();q.add('find',{init:function(t){var u=q.find;t.ui.addButton('Find',{label:t.lang.findAndReplace.find,command:'find'});var v=t.addCommand('find',new h.dialogCommand('find'));v.canUndo=false;v.readOnly=1;t.ui.addButton('Replace',{label:t.lang.findAndReplace.replace,command:'replace'});var w=t.addCommand('replace',new h.dialogCommand('replace'));w.canUndo=false;h.dialog.add('find',this.path+'dialogs/find.js');h.dialog.add('replace',this.path+'dialogs/find.js');},requires:['styles']});p.find_highlight={element:'span',styles:{'background-color':'#004',color:'#fff'}};(function(){var t=/\.swf(?:$|\?)/i,u=l.cssLength;function v(x){var y=x.attributes;return y.type=='application/x-shockwave-flash'||t.test(y.src||'');};function w(x,y){var z=x.createFakeParserElement(y,'cke_flash','flash',true),A=z.attributes.style||'',B=y.attributes.width,C=y.attributes.height;
if(typeof B!='undefined')A=z.attributes.style=A+'width:'+u(B)+';';if(typeof C!='undefined')A=z.attributes.style=A+'height:'+u(C)+';';return z;};q.add('flash',{init:function(x){x.addCommand('flash',new h.dialogCommand('flash'));x.ui.addButton('Flash',{label:x.lang.common.flash,command:'flash'});h.dialog.add('flash',this.path+'dialogs/flash.js');x.addCss('img.cke_flash{background-image: url('+h.getUrl(this.path+'images/placeholder.png')+');'+'background-position: center center;'+'background-repeat: no-repeat;'+'border: 1px solid #a9a9a9;'+'width: 80px;'+'height: 80px;'+'}');if(x.addMenuItems)x.addMenuItems({flash:{label:x.lang.flash.properties,command:'flash',group:'flash'}});x.on('doubleclick',function(y){var z=y.data.element;if(z.is('img')&&z.data('cke-real-element-type')=='flash')y.data.dialog='flash';});if(x.contextMenu)x.contextMenu.addListener(function(y,z){if(y&&y.is('img')&&!y.isReadOnly()&&y.data('cke-real-element-type')=='flash')return{flash:2};});},afterInit:function(x){var y=x.dataProcessor,z=y&&y.dataFilter;if(z)z.addRules({elements:{'cke:object':function(A){var B=A.attributes,C=B.classid&&String(B.classid).toLowerCase();if(!C&&!v(A)){for(var D=0;D<A.children.length;D++){if(A.children[D].name=='cke:embed'){if(!v(A.children[D]))return null;return w(x,A);}}return null;}return w(x,A);},'cke:embed':function(A){if(!v(A))return null;return w(x,A);}}},5);},requires:['fakeobjects']});})();l.extend(p,{flashEmbedTagOnly:false,flashAddEmbedTag:true,flashConvertOnEdit:false});(function(){function t(u,v,w,x,y,z,A){var B=u.config,C=y.split(';'),D=[],E={};for(var F=0;F<C.length;F++){var G=C[F];if(G){G=G.split('/');var H={},I=C[F]=G[0];H[w]=D[F]=G[1]||I;E[I]=new h.style(A,H);E[I]._.definition.name=I;}else C.splice(F--,1);}u.ui.addRichCombo(v,{label:x.label,title:x.panelTitle,className:'cke_'+(w=='size'?'fontSize':'font'),panel:{css:u.skin.editor.css.concat(B.contentsCss),multiSelect:false,attributes:{'aria-label':x.panelTitle}},init:function(){this.startGroup(x.panelTitle);for(var J=0;J<C.length;J++){var K=C[J];this.add(K,E[K].buildPreview(),K);}},onClick:function(J){u.focus();u.fire('saveSnapshot');var K=E[J];if(this.getValue()==J)K.remove(u.document);else K.apply(u.document);u.fire('saveSnapshot');},onRender:function(){u.on('selectionChange',function(J){var K=this.getValue(),L=J.data.path,M=L.elements;for(var N=0,O;N<M.length;N++){O=M[N];for(var P in E){if(E[P].checkElementRemovable(O,true)){if(P!=K)this.setValue(P);return;}}}this.setValue('',z);},this);}});};
q.add('font',{requires:['richcombo','styles'],init:function(u){var v=u.config;t(u,'Font','family',u.lang.font,v.font_names,v.font_defaultLabel,v.font_style);t(u,'FontSize','size',u.lang.fontSize,v.fontSize_sizes,v.fontSize_defaultLabel,v.fontSize_style);}});})();p.font_names='Arial/Arial, Helvetica, sans-serif;Comic Sans MS/Comic Sans MS, cursive;Courier New/Courier New, Courier, monospace;Georgia/Georgia, serif;Lucida Sans Unicode/Lucida Sans Unicode, Lucida Grande, sans-serif;Tahoma/Tahoma, Geneva, sans-serif;Times New Roman/Times New Roman, Times, serif;Trebuchet MS/Trebuchet MS, Helvetica, sans-serif;Verdana/Verdana, Geneva, sans-serif';p.font_defaultLabel='';p.font_style={element:'span',styles:{'font-family':'#(family)'},overrides:[{element:'font',attributes:{face:null}}]};p.fontSize_sizes='8/8px;9/9px;10/10px;11/11px;12/12px;14/14px;16/16px;18/18px;20/20px;22/22px;24/24px;26/26px;28/28px;36/36px;48/48px;72/72px';p.fontSize_defaultLabel='';p.fontSize_style={element:'span',styles:{'font-size':'#(size)'},overrides:[{element:'font',attributes:{size:null}}]};q.add('format',{requires:['richcombo','styles'],init:function(t){var u=t.config,v=t.lang.format,w=u.format_tags.split(';'),x={};for(var y=0;y<w.length;y++){var z=w[y];x[z]=new h.style(u['format_'+z]);x[z]._.enterMode=t.config.enterMode;}t.ui.addRichCombo('Format',{label:v.label,title:v.panelTitle,className:'cke_format',panel:{css:t.skin.editor.css.concat(u.contentsCss),multiSelect:false,attributes:{'aria-label':v.panelTitle}},init:function(){this.startGroup(v.panelTitle);for(var A in x){var B=v['tag_'+A];this.add(A,x[A].buildPreview(B),B);}},onClick:function(A){t.focus();t.fire('saveSnapshot');var B=x[A],C=new k.elementPath(t.getSelection().getStartElement());B[B.checkActive(C)?'remove':'apply'](t.document);setTimeout(function(){t.fire('saveSnapshot');},0);},onRender:function(){t.on('selectionChange',function(A){var B=this.getValue(),C=A.data.path;for(var D in x){if(x[D].checkActive(C)){if(D!=B)this.setValue(D,t.lang.format['tag_'+D]);return;}}this.setValue('');},this);}});}});p.format_tags='p;h1;h2;h3;h4;h5;h6;pre;address;div';p.format_p={element:'p'};p.format_div={element:'div'};p.format_pre={element:'pre'};p.format_address={element:'address'};p.format_h1={element:'h1'};p.format_h2={element:'h2'};p.format_h3={element:'h3'};p.format_h4={element:'h4'};p.format_h5={element:'h5'};p.format_h6={element:'h6'};q.add('forms',{init:function(t){var u=t.lang;t.addCss('form{border: 1px dotted #FF0000;padding: 2px;}\n');
t.addCss('img.cke_hidden{background-image: url('+h.getUrl(this.path+'images/hiddenfield.gif')+');'+'background-position: center center;'+'background-repeat: no-repeat;'+'border: 1px solid #a9a9a9;'+'width: 16px !important;'+'height: 16px !important;'+'}');var v=function(x,y,z){t.addCommand(y,new h.dialogCommand(y));t.ui.addButton(x,{label:u.common[x.charAt(0).toLowerCase()+x.slice(1)],command:y});h.dialog.add(y,z);},w=this.path+'dialogs/';v('Form','form',w+'form.js');v('Checkbox','checkbox',w+'checkbox.js');v('Radio','radio',w+'radio.js');v('TextField','textfield',w+'textfield.js');v('Textarea','textarea',w+'textarea.js');v('Select','select',w+'select.js');v('Button','button',w+'button.js');v('ImageButton','imagebutton',q.getPath('image')+'dialogs/image.js');v('HiddenField','hiddenfield',w+'hiddenfield.js');if(t.addMenuItems)t.addMenuItems({form:{label:u.form.menu,command:'form',group:'form'},checkbox:{label:u.checkboxAndRadio.checkboxTitle,command:'checkbox',group:'checkbox'},radio:{label:u.checkboxAndRadio.radioTitle,command:'radio',group:'radio'},textfield:{label:u.textfield.title,command:'textfield',group:'textfield'},hiddenfield:{label:u.hidden.title,command:'hiddenfield',group:'hiddenfield'},imagebutton:{label:u.image.titleButton,command:'imagebutton',group:'imagebutton'},button:{label:u.button.title,command:'button',group:'button'},select:{label:u.select.title,command:'select',group:'select'},textarea:{label:u.textarea.title,command:'textarea',group:'textarea'}});if(t.contextMenu){t.contextMenu.addListener(function(x){if(x&&x.hasAscendant('form',true)&&!x.isReadOnly())return{form:2};});t.contextMenu.addListener(function(x){if(x&&!x.isReadOnly()){var y=x.getName();if(y=='select')return{select:2};if(y=='textarea')return{textarea:2};if(y=='input')switch(x.getAttribute('type')){case 'button':case 'submit':case 'reset':return{button:2};case 'checkbox':return{checkbox:2};case 'radio':return{radio:2};case 'image':return{imagebutton:2};default:return{textfield:2};}if(y=='img'&&x.data('cke-real-element-type')=='hiddenfield')return{hiddenfield:2};}});}t.on('doubleclick',function(x){var y=x.data.element;if(y.is('form'))x.data.dialog='form';else if(y.is('select'))x.data.dialog='select';else if(y.is('textarea'))x.data.dialog='textarea';else if(y.is('img')&&y.data('cke-real-element-type')=='hiddenfield')x.data.dialog='hiddenfield';else if(y.is('input'))switch(y.getAttribute('type')){case 'button':case 'submit':case 'reset':x.data.dialog='button';break;case 'checkbox':x.data.dialog='checkbox';
break;case 'radio':x.data.dialog='radio';break;case 'image':x.data.dialog='imagebutton';break;default:x.data.dialog='textfield';break;}});},afterInit:function(t){var u=t.dataProcessor,v=u&&u.htmlFilter,w=u&&u.dataFilter;if(j)v&&v.addRules({elements:{input:function(x){var y=x.attributes,z=y.type;if(!z)y.type='text';if(z=='checkbox'||z=='radio')y.value=='on'&&delete y.value;}}});if(w)w.addRules({elements:{input:function(x){if(x.attributes.type=='hidden')return t.createFakeParserElement(x,'cke_hidden','hiddenfield');}}});},requires:['image','fakeobjects']});if(j)o.prototype.hasAttribute=l.override(o.prototype.hasAttribute,function(t){return function(u){var x=this;var v=x.$.attributes.getNamedItem(u);if(x.getName()=='input')switch(u){case 'class':return x.$.className.length>0;case 'checked':return!!x.$.checked;case 'value':var w=x.getAttribute('type');return w=='checkbox'||w=='radio'?x.$.value!='on':x.$.value;}return t.apply(x,arguments);};});(function(){var t={canUndo:false,exec:function(v){v.insertElement(v.document.createElement('hr'));}},u='horizontalrule';q.add(u,{init:function(v){v.addCommand(u,t);v.ui.addButton('HorizontalRule',{label:v.lang.horizontalrule,command:u});}});})();(function(){var t=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,u='{cke_protected}';function v(aa){var ab=aa.children.length,ac=aa.children[ab-1];while(ac&&ac.type==3&&!l.trim(ac.value))ac=aa.children[--ab];return ac;};function w(aa,ab){var ac=aa.children,ad=v(aa);if(ad){if((ab||!j)&&ad.type==1&&ad.name=='br')ac.pop();if(ad.type==3&&t.test(ad.value))ac.pop();}};function x(aa,ab,ac){if(!ab&&(!ac||typeof ac=='function'&&ac(aa)===false))return false;if(ab&&j&&(document.documentMode>7||aa.name in m.tr||aa.name in m.$listItem))return false;var ad=v(aa);return!ad||ad&&(ad.type==1&&ad.name=='br'||aa.name=='form'&&ad.name=='input');};function y(aa,ab){return function(ac){w(ac,!aa);if(x(ac,!aa,ab))if(aa||j)ac.add(new h.htmlParser.text('\xa0'));else ac.add(new h.htmlParser.element('br',{}));};};var z=m,A=['caption','colgroup','col','thead','tfoot','tbody'],B=l.extend({},z.$block,z.$listItem,z.$tableContent);for(var C in B){if(!('br' in z[C]))delete B[C];}delete B.pre;var D={elements:{},attributeNames:[[/^on/,'data-cke-pa-on']]},E={elements:{}};for(C in B)E.elements[C]=y();var F={elementNames:[[/^cke:/,''],[/^\?xml:namespace$/,'']],attributeNames:[[/^data-cke-(saved|pa)-/,''],[/^data-cke-.*/,''],['hidefocus','']],elements:{$:function(aa){var ab=aa.attributes;if(ab){if(ab['data-cke-temp'])return false;var ac=['name','href','src'],ad;
for(var ae=0;ae<ac.length;ae++){ad='data-cke-saved-'+ac[ae];ad in ab&&delete ab[ac[ae]];}}return aa;},table:function(aa){var ab=aa.children;ab.sort(function(ac,ad){return ac.type==1&&ad.type==ac.type?l.indexOf(A,ac.name)>l.indexOf(A,ad.name)?1:-1:0;});},embed:function(aa){var ab=aa.parent;if(ab&&ab.name=='object'){var ac=ab.attributes.width,ad=ab.attributes.height;ac&&(aa.attributes.width=ac);ad&&(aa.attributes.height=ad);}},param:function(aa){aa.children=[];aa.isEmpty=true;return aa;},a:function(aa){if(!(aa.children.length||aa.attributes.name||aa.attributes['data-cke-saved-name']))return false;},span:function(aa){if(aa.attributes['class']=='Apple-style-span')delete aa.name;},pre:function(aa){j&&w(aa);},html:function(aa){delete aa.attributes.contenteditable;delete aa.attributes['class'];},body:function(aa){delete aa.attributes.spellcheck;delete aa.attributes.contenteditable;},style:function(aa){var ab=aa.children[0];ab&&ab.value&&(ab.value=l.trim(ab.value));if(!aa.attributes.type)aa.attributes.type='text/css';},title:function(aa){var ab=aa.children[0];ab&&(ab.value=aa.attributes['data-cke-title']||'');}},attributes:{'class':function(aa,ab){return l.ltrim(aa.replace(/(?:^|\s+)cke_[^\s]*/g,''))||false;}}};if(j)F.attributes.style=function(aa,ab){return aa.replace(/(^|;)([^\:]+)/g,function(ac){return ac.toLowerCase();});};function G(aa){var ab=aa.attributes;if(ab.contenteditable!='false')ab['data-cke-editable']=ab.contenteditable?'true':1;ab.contenteditable='false';};function H(aa){var ab=aa.attributes;switch(ab['data-cke-editable']){case 'true':ab.contenteditable='true';break;case '1':delete ab.contenteditable;break;}};for(C in {input:1,textarea:1}){D.elements[C]=G;F.elements[C]=H;}var I=/<(a|area|img|input)\b([^>]*)>/gi,J=/\b(href|src|name)\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|(?:[^ "'>]+))/gi,K=/(?:<style(?=[ >])[^>]*>[\s\S]*<\/style>)|(?:<(:?link|meta|base)[^>]*>)/gi,L=/<cke:encoded>([^<]*)<\/cke:encoded>/gi,M=/(<\/?)((?:object|embed|param|html|body|head|title)[^>]*>)/gi,N=/(<\/?)cke:((?:html|body|head|title)[^>]*>)/gi,O=/<cke:(param|embed)([^>]*?)\/?>(?!\s*<\/cke:\1)/gi;function P(aa){return aa.replace(I,function(ab,ac,ad){return '<'+ac+ad.replace(J,function(ae,af){if(ad.indexOf('data-cke-saved-'+af)==-1)return ' data-cke-saved-'+ae+' '+ae;return ae;})+'>';});};function Q(aa){return aa.replace(K,function(ab){return '<cke:encoded>'+encodeURIComponent(ab)+'</cke:encoded>';});};function R(aa){return aa.replace(L,function(ab,ac){return decodeURIComponent(ac);});};
function S(aa){return aa.replace(M,'$1cke:$2');};function T(aa){return aa.replace(N,'$1$2');};function U(aa){return aa.replace(O,'<cke:$1$2></cke:$1>');};function V(aa){return aa.replace(/(<pre\b[^>]*>)(\r\n|\n)/g,'$1$2$2');};function W(aa){return aa.replace(/<!--(?!{cke_protected})[\s\S]+?-->/g,function(ab){return '<!--'+u+'{C}'+encodeURIComponent(ab).replace(/--/g,'%2D%2D')+'-->';});};function X(aa){return aa.replace(/<!--\{cke_protected\}\{C\}([\s\S]+?)-->/g,function(ab,ac){return decodeURIComponent(ac);});};function Y(aa,ab){var ac=ab._.dataStore;return aa.replace(/<!--\{cke_protected\}([\s\S]+?)-->/g,function(ad,ae){return decodeURIComponent(ae);}).replace(/\{cke_protected_(\d+)\}/g,function(ad,ae){return ac&&ac[ae]||'';});};function Z(aa,ab){var ac=[],ad=ab.config.protectedSource,ae=ab._.dataStore||(ab._.dataStore={id:1}),af=/<\!--\{cke_temp(comment)?\}(\d*?)-->/g,ag=[/<script[\s\S]*?<\/script>/gi,/<noscript[\s\S]*?<\/noscript>/gi].concat(ad);aa=aa.replace(/<!--[\s\S]*?-->/g,function(ai){return '<!--{cke_tempcomment}'+(ac.push(ai)-1)+'-->';});for(var ah=0;ah<ag.length;ah++)aa=aa.replace(ag[ah],function(ai){ai=ai.replace(af,function(aj,ak,al){return ac[al];});return/cke_temp(comment)?/.test(ai)?ai:'<!--{cke_temp}'+(ac.push(ai)-1)+'-->';});aa=aa.replace(af,function(ai,aj,ak){return '<!--'+u+(aj?'{C}':'')+encodeURIComponent(ac[ak]).replace(/--/g,'%2D%2D')+'-->';});return aa.replace(/(['"]).*?\1/g,function(ai){return ai.replace(/<!--\{cke_protected\}([\s\S]+?)-->/g,function(aj,ak){ae[ae.id]=decodeURIComponent(ak);return '{cke_protected_'+ae.id++ +'}';});});};q.add('htmldataprocessor',{requires:['htmlwriter'],init:function(aa){var ab=aa.dataProcessor=new h.htmlDataProcessor(aa);ab.writer.forceSimpleAmpersand=aa.config.forceSimpleAmpersand;ab.dataFilter.addRules(D);ab.dataFilter.addRules(E);ab.htmlFilter.addRules(F);var ac={elements:{}};for(C in B)ac.elements[C]=y(true,aa.config.fillEmptyBlocks);ab.htmlFilter.addRules(ac);},onLoad:function(){!('fillEmptyBlocks' in p)&&(p.fillEmptyBlocks=1);}});h.htmlDataProcessor=function(aa){var ab=this;ab.editor=aa;ab.writer=new h.htmlWriter();ab.dataFilter=new h.htmlParser.filter();ab.htmlFilter=new h.htmlParser.filter();};h.htmlDataProcessor.prototype={toHtml:function(aa,ab){aa=Z(aa,this.editor);aa=P(aa);aa=Q(aa);aa=S(aa);aa=U(aa);aa=V(aa);var ac=new o('div');ac.setHtml('a'+aa);aa=ac.getHtml().substr(1);aa=T(aa);aa=R(aa);aa=X(aa);var ad=h.htmlParser.fragment.fromHtml(aa,ab),ae=new h.htmlParser.basicWriter();ad.writeHtml(ae,this.dataFilter);
aa=ae.getHtml(true);aa=W(aa);return aa;},toDataFormat:function(aa,ab){var ac=this.writer,ad=h.htmlParser.fragment.fromHtml(aa,ab);ac.reset();ad.writeHtml(ac,this.htmlFilter);var ae=ac.getHtml(true);ae=X(ae);ae=Y(ae,this.editor);return ae;}};})();(function(){function t(u,v){var w=u.createFakeParserElement(v,'cke_iframe','iframe',true),x=w.attributes.style||'',y=v.attributes.width,z=v.attributes.height;if(typeof y!='undefined')x+='width:'+l.cssLength(y)+';';if(typeof z!='undefined')x+='height:'+l.cssLength(z)+';';w.attributes.style=x;return w;};q.add('iframe',{requires:['dialog','fakeobjects'],init:function(u){var v='iframe',w=u.lang.iframe;h.dialog.add(v,this.path+'dialogs/iframe.js');u.addCommand(v,new h.dialogCommand(v));u.addCss('img.cke_iframe{background-image: url('+h.getUrl(this.path+'images/placeholder.png')+');'+'background-position: center center;'+'background-repeat: no-repeat;'+'border: 1px solid #a9a9a9;'+'width: 80px;'+'height: 80px;'+'}');u.ui.addButton('Iframe',{label:w.toolbar,command:v});u.on('doubleclick',function(x){var y=x.data.element;if(y.is('img')&&y.data('cke-real-element-type')=='iframe')x.data.dialog='iframe';});if(u.addMenuItems)u.addMenuItems({iframe:{label:w.title,command:'iframe',group:'image'}});if(u.contextMenu)u.contextMenu.addListener(function(x,y){if(x&&x.is('img')&&x.data('cke-real-element-type')=='iframe')return{iframe:2};});},afterInit:function(u){var v=u.dataProcessor,w=v&&v.dataFilter;if(w)w.addRules({elements:{iframe:function(x){return t(u,x);}}});}});})();q.add('image',{init:function(t){var u='image';h.dialog.add(u,this.path+'dialogs/image.js');t.addCommand(u,new h.dialogCommand(u));t.ui.addButton('Image',{label:t.lang.common.image,command:u});t.on('doubleclick',function(v){var w=v.data.element;if(w.is('img')&&!w.data('cke-realelement')&&!w.isReadOnly())v.data.dialog='image';});if(t.addMenuItems)t.addMenuItems({image:{label:t.lang.image.menu,command:'image',group:'image'}});if(t.contextMenu)t.contextMenu.addListener(function(v,w){if(!v||!v.is('img')||v.data('cke-realelement')||v.isReadOnly())return null;return{image:2};});}});p.image_removeLinkByEmptyURL=true;(function(){var t={ol:1,ul:1},u=k.walker.whitespaces(true),v=k.walker.bookmark(false,true);function w(A){var I=this;if(A.editor.readOnly)return null;var B=A.editor,C=A.data.path,D=C&&C.contains(t),E=C.block||C.blockLimit;if(D)return I.setState(2);if(!I.useIndentClasses&&I.name=='indent')return I.setState(2);if(!E)return I.setState(0);if(I.useIndentClasses){var F=E.$.className.match(I.classNameRegex),G=0;
if(F){F=F[1];G=I.indentClassMap[F];}if(I.name=='outdent'&&!G||I.name=='indent'&&G==B.config.indentClasses.length)return I.setState(0);return I.setState(2);}else{var H=parseInt(E.getStyle(y(E)),10);if(isNaN(H))H=0;if(H<=0)return I.setState(0);return I.setState(2);}};function x(A,B){var D=this;D.name=B;D.useIndentClasses=A.config.indentClasses&&A.config.indentClasses.length>0;if(D.useIndentClasses){D.classNameRegex=new RegExp('(?:^|\\s+)('+A.config.indentClasses.join('|')+')(?=$|\\s)');D.indentClassMap={};for(var C=0;C<A.config.indentClasses.length;C++)D.indentClassMap[A.config.indentClasses[C]]=C+1;}D.startDisabled=B=='outdent';};function y(A,B){return(B||A.getComputedStyle('direction'))=='ltr'?'margin-left':'margin-right';};function z(A){return A.type=1&&A.is('li');};x.prototype={exec:function(A){var B=this,C={};function D(T){var U=J.startContainer,V=J.endContainer;while(U&&!U.getParent().equals(T))U=U.getParent();while(V&&!V.getParent().equals(T))V=V.getParent();if(!U||!V)return;var W=U,X=[],Y=false;while(!Y){if(W.equals(V))Y=true;X.push(W);W=W.getNext();}if(X.length<1)return;var Z=T.getParents(true);for(var aa=0;aa<Z.length;aa++){if(Z[aa].getName&&t[Z[aa].getName()]){T=Z[aa];break;}}var ab=B.name=='indent'?1:-1,ac=X[0],ad=X[X.length-1],ae=q.list.listToArray(T,C),af=ae[ad.getCustomData('listarray_index')].indent;for(aa=ac.getCustomData('listarray_index');aa<=ad.getCustomData('listarray_index');aa++){ae[aa].indent+=ab;var ag=ae[aa].parent;ae[aa].parent=new o(ag.getName(),ag.getDocument());}for(aa=ad.getCustomData('listarray_index')+1;aa<ae.length&&ae[aa].indent>af;aa++)ae[aa].indent+=ab;var ah=q.list.arrayToList(ae,C,null,A.config.enterMode,T.getDirection());if(B.name=='outdent'){var ai;if((ai=T.getParent())&&ai.is('li')){var aj=ah.listNode.getChildren(),ak=[],al=aj.count(),am;for(aa=al-1;aa>=0;aa--){if((am=aj.getItem(aa))&&am.is&&am.is('li'))ak.push(am);}}}if(ah)ah.listNode.replace(T);if(ak&&ak.length)for(aa=0;aa<ak.length;aa++){var an=ak[aa],ao=an;while((ao=ao.getNext())&&ao.is&&ao.getName() in t){if(j&&!an.getFirst(function(ap){return u(ap)&&v(ap);}))an.append(J.document.createText('\xa0'));an.append(ao);}an.insertAfter(ai);}};function E(){var T=J.createIterator(),U=A.config.enterMode;T.enforceRealBlocks=true;T.enlargeBr=U!=2;var V;while(V=T.getNextParagraph(U==1?'p':'div'))F(V);};function F(T,U){if(T.getCustomData('indent_processed'))return false;if(B.useIndentClasses){var V=T.$.className.match(B.classNameRegex),W=0;if(V){V=V[1];W=B.indentClassMap[V];}if(B.name=='outdent')W--;
else W++;if(W<0)return false;W=Math.min(W,A.config.indentClasses.length);W=Math.max(W,0);T.$.className=l.ltrim(T.$.className.replace(B.classNameRegex,''));if(W>0)T.addClass(A.config.indentClasses[W-1]);}else{var X=y(T,U),Y=parseInt(T.getStyle(X),10);if(isNaN(Y))Y=0;var Z=A.config.indentOffset||40;Y+=(B.name=='indent'?1:-1)*Z;if(Y<0)return false;Y=Math.max(Y,0);Y=Math.ceil(Y/Z)*Z;T.setStyle(X,Y?Y+(A.config.indentUnit||'px'):'');if(T.getAttribute('style')==='')T.removeAttribute('style');}o.setMarker(C,T,'indent_processed',1);return true;};var G=A.getSelection(),H=G.createBookmarks(1),I=G&&G.getRanges(1),J,K=I.createIterator();while(J=K.getNextRange()){var L=J.getCommonAncestor(),M=L;while(M&&!(M.type==1&&t[M.getName()]))M=M.getParent();if(!M){var N=J.getEnclosedNode();if(N&&N.type==1&&N.getName() in t){J.setStartAt(N,1);J.setEndAt(N,2);M=N;}}if(M&&J.startContainer.type==1&&J.startContainer.getName() in t){var O=new k.walker(J);O.evaluator=z;J.startContainer=O.next();}if(M&&J.endContainer.type==1&&J.endContainer.getName() in t){O=new k.walker(J);O.evaluator=z;J.endContainer=O.previous();}if(M){var P=M.getFirst(z),Q=!!P.getNext(z),R=J.startContainer,S=P.equals(R)||P.contains(R);if(!(S&&(B.name=='indent'||B.useIndentClasses||parseInt(M.getStyle(y(M)),10))&&F(M,!Q&&P.getDirection())))D(M);}else E();}o.clearAllMarkers(C);A.forceNextSelectionCheck();G.selectBookmarks(H);}};q.add('indent',{init:function(A){var B=A.addCommand('indent',new x(A,'indent')),C=A.addCommand('outdent',new x(A,'outdent'));A.ui.addButton('Indent',{label:A.lang.indent,command:'indent'});A.ui.addButton('Outdent',{label:A.lang.outdent,command:'outdent'});A.on('selectionChange',l.bind(w,B));A.on('selectionChange',l.bind(w,C));if(i.ie6Compat||i.ie7Compat)A.addCss('ul,ol{\tmargin-left: 0px;\tpadding-left: 40px;}');A.on('dirChanged',function(D){var E=new k.range(A.document);E.setStartBefore(D.data.node);E.setEndAfter(D.data.node);var F=new k.walker(E),G;while(G=F.next()){if(G.type==1){if(!G.equals(D.data.node)&&G.getDirection()){E.setStartAfter(G);F=new k.walker(E);continue;}var H=A.config.indentClasses;if(H){var I=D.data.dir=='ltr'?['_rtl','']:['','_rtl'];for(var J=0;J<H.length;J++){if(G.hasClass(H[J]+I[0])){G.removeClass(H[J]+I[0]);G.addClass(H[J]+I[1]);}}}var K=G.getStyle('margin-right'),L=G.getStyle('margin-left');K?G.setStyle('margin-left',K):G.removeStyle('margin-left');L?G.setStyle('margin-right',L):G.removeStyle('margin-right');}}});},requires:['domiterator','list']});})();(function(){function t(y,z){var A=z.block||z.blockLimit;
if(!A||A.getName()=='body')return 2;return u(A,y.config.useComputedState)==this.value?1:2;};function u(y,z){z=z===undefined||z;var A;if(z)A=y.getComputedStyle('text-align');else{while(!y.hasAttribute||!(y.hasAttribute('align')||y.getStyle('text-align'))){var B=y.getParent();if(!B)break;y=B;}A=y.getStyle('text-align')||y.getAttribute('align')||'';}A&&(A=A.replace(/-moz-|-webkit-|start|auto/i,''));!A&&z&&(A=y.getComputedStyle('direction')=='rtl'?'right':'left');return A;};function v(y){if(y.editor.readOnly)return;var z=y.editor.getCommand(this.name);z.state=t.call(this,y.editor,y.data.path);z.fire('state');};function w(y,z,A){var C=this;C.name=z;C.value=A;var B=y.config.justifyClasses;if(B){switch(A){case 'left':C.cssClassName=B[0];break;case 'center':C.cssClassName=B[1];break;case 'right':C.cssClassName=B[2];break;case 'justify':C.cssClassName=B[3];break;}C.cssClassRegex=new RegExp('(?:^|\\s+)(?:'+B.join('|')+')(?=$|\\s)');}};function x(y){var z=y.editor,A=new k.range(z.document);A.setStartBefore(y.data.node);A.setEndAfter(y.data.node);var B=new k.walker(A),C;while(C=B.next()){if(C.type==1){if(!C.equals(y.data.node)&&C.getDirection()){A.setStartAfter(C);B=new k.walker(A);continue;}var D=z.config.justifyClasses;if(D)if(C.hasClass(D[0])){C.removeClass(D[0]);C.addClass(D[2]);}else if(C.hasClass(D[2])){C.removeClass(D[2]);C.addClass(D[0]);}var E='text-align',F=C.getStyle(E);if(F=='left')C.setStyle(E,'right');else if(F=='right')C.setStyle(E,'left');}}};w.prototype={exec:function(y){var K=this;var z=y.getSelection(),A=y.config.enterMode;if(!z)return;var B=z.createBookmarks(),C=z.getRanges(true),D=K.cssClassName,E,F,G=y.config.useComputedState;G=G===undefined||G;for(var H=C.length-1;H>=0;H--){E=C[H].createIterator();E.enlargeBr=A!=2;while(F=E.getNextParagraph(A==1?'p':'div')){F.removeAttribute('align');F.removeStyle('text-align');var I=D&&(F.$.className=l.ltrim(F.$.className.replace(K.cssClassRegex,''))),J=K.state==2&&(!G||u(F,true)!=K.value);if(D){if(J)F.addClass(D);else if(!I)F.removeAttribute('class');}else if(J)F.setStyle('text-align',K.value);}}y.focus();y.forceNextSelectionCheck();z.selectBookmarks(B);}};q.add('justify',{init:function(y){var z=new w(y,'justifyleft','left'),A=new w(y,'justifycenter','center'),B=new w(y,'justifyright','right'),C=new w(y,'justifyblock','justify');y.addCommand('justifyleft',z);y.addCommand('justifycenter',A);y.addCommand('justifyright',B);y.addCommand('justifyblock',C);y.ui.addButton('JustifyLeft',{label:y.lang.justify.left,command:'justifyleft'});
y.ui.addButton('JustifyCenter',{label:y.lang.justify.center,command:'justifycenter'});y.ui.addButton('JustifyRight',{label:y.lang.justify.right,command:'justifyright'});y.ui.addButton('JustifyBlock',{label:y.lang.justify.block,command:'justifyblock'});y.on('selectionChange',l.bind(v,z));y.on('selectionChange',l.bind(v,B));y.on('selectionChange',l.bind(v,A));y.on('selectionChange',l.bind(v,C));y.on('dirChanged',x);},requires:['domiterator']});})();q.add('keystrokes',{beforeInit:function(t){t.keystrokeHandler=new h.keystrokeHandler(t);t.specialKeys={};},init:function(t){var u=t.config.keystrokes,v=t.config.blockedKeystrokes,w=t.keystrokeHandler.keystrokes,x=t.keystrokeHandler.blockedKeystrokes;for(var y=0;y<u.length;y++)w[u[y][0]]=u[y][1];for(y=0;y<v.length;y++)x[v[y]]=1;}});h.keystrokeHandler=function(t){var u=this;if(t.keystrokeHandler)return t.keystrokeHandler;u.keystrokes={};u.blockedKeystrokes={};u._={editor:t};return u;};(function(){var t,u=function(w){w=w.data;var x=w.getKeystroke(),y=this.keystrokes[x],z=this._.editor;t=z.fire('key',{keyCode:x})===true;if(!t){if(y){var A={from:'keystrokeHandler'};t=z.execCommand(y,A)!==false;}if(!t){var B=z.specialKeys[x];t=B&&B(z)===true;if(!t)t=!!this.blockedKeystrokes[x];}}if(t)w.preventDefault(true);return!t;},v=function(w){if(t){t=false;w.data.preventDefault(true);}};h.keystrokeHandler.prototype={attach:function(w){w.on('keydown',u,this);if(i.opera||i.gecko&&i.mac)w.on('keypress',v,this);}};})();p.blockedKeystrokes=[1000+66,1000+73,1000+85];p.keystrokes=[[4000+121,'toolbarFocus'],[4000+122,'elementsPathFocus'],[2000+121,'contextMenu'],[1000+2000+121,'contextMenu'],[1000+90,'undo'],[1000+89,'redo'],[1000+2000+90,'redo'],[1000+76,'link'],[1000+66,'bold'],[1000+73,'italic'],[1000+85,'underline'],[4000+(j||i.webkit?189:109),'toolbarCollapse'],[4000+48,'a11yHelp']];q.add('link',{init:function(t){t.addCommand('link',new h.dialogCommand('link'));t.addCommand('anchor',new h.dialogCommand('anchor'));t.addCommand('unlink',new h.unlinkCommand());t.ui.addButton('Link',{label:t.lang.link.toolbar,command:'link'});t.ui.addButton('Unlink',{label:t.lang.unlink,command:'unlink'});t.ui.addButton('Anchor',{label:t.lang.anchor.toolbar,command:'anchor'});h.dialog.add('link',this.path+'dialogs/link.js');h.dialog.add('anchor',this.path+'dialogs/anchor.js');var u=t.lang.dir=='rtl'?'right':'left',v='background:url('+h.getUrl(this.path+'images/anchor.gif')+') no-repeat '+u+' center;'+'border:1px dotted #00f;';t.addCss('a.cke_anchor,a.cke_anchor_empty'+(j&&i.version<7?'':',a[name],a[data-cke-saved-name]')+'{'+v+'padding-'+u+':18px;'+'cursor:auto;'+'}'+(j?'a.cke_anchor_empty{display:inline-block;}':'')+'img.cke_anchor'+'{'+v+'width:16px;'+'min-height:15px;'+'height:1.15em;'+'vertical-align:'+(i.opera?'middle':'text-bottom')+';'+'}');
t.on('selectionChange',function(w){if(t.readOnly)return;var x=t.getCommand('unlink'),y=w.data.path.lastElement&&w.data.path.lastElement.getAscendant('a',true);if(y&&y.getName()=='a'&&y.getAttribute('href')&&y.getChildCount())x.setState(2);else x.setState(0);});t.on('doubleclick',function(w){var x=q.link.getSelectedLink(t)||w.data.element;if(!x.isReadOnly())if(x.is('a')){w.data.dialog=x.getAttribute('name')&&(!x.getAttribute('href')||!x.getChildCount())?'anchor':'link';t.getSelection().selectElement(x);}else if(q.link.tryRestoreFakeAnchor(t,x))w.data.dialog='anchor';});if(t.addMenuItems)t.addMenuItems({anchor:{label:t.lang.anchor.menu,command:'anchor',group:'anchor'},link:{label:t.lang.link.menu,command:'link',group:'link',order:1},unlink:{label:t.lang.unlink,command:'unlink',group:'link',order:5}});if(t.contextMenu)t.contextMenu.addListener(function(w,x){if(!w||w.isReadOnly())return null;var y=q.link.tryRestoreFakeAnchor(t,w);if(!y&&!(y=q.link.getSelectedLink(t)))return null;var z={};if(y.getAttribute('href')&&y.getChildCount())z={link:2,unlink:2};if(y&&y.hasAttribute('name'))z.anchor=2;return z;});},afterInit:function(t){var u=t.dataProcessor,v=u&&u.dataFilter,w=u&&u.htmlFilter,x=t._.elementsPath&&t._.elementsPath.filters;if(v)v.addRules({elements:{a:function(y){var z=y.attributes;if(!z.name)return null;var A=!y.children.length;if(q.link.synAnchorSelector){var B=A?'cke_anchor_empty':'cke_anchor',C=z['class'];if(z.name&&(!C||C.indexOf(B)<0))z['class']=(C||'')+' '+B;if(A&&q.link.emptyAnchorFix){z.contenteditable='false';z['data-cke-editable']=1;}}else if(q.link.fakeAnchor&&A)return t.createFakeParserElement(y,'cke_anchor','anchor');return null;}}});if(q.link.emptyAnchorFix&&w)w.addRules({elements:{a:function(y){delete y.attributes.contenteditable;}}});if(x)x.push(function(y,z){if(z=='a')if(q.link.tryRestoreFakeAnchor(t,y)||y.getAttribute('name')&&(!y.getAttribute('href')||!y.getChildCount()))return 'anchor';});},requires:['fakeobjects']});q.link={getSelectedLink:function(t){try{var u=t.getSelection();if(u.getType()==3){var v=u.getSelectedElement();if(v.is('a'))return v;}var w=u.getRanges(true)[0];w.shrink(2);var x=w.getCommonAncestor();return x.getAscendant('a',true);}catch(y){return null;}},fakeAnchor:i.opera||i.webkit,synAnchorSelector:j,emptyAnchorFix:j&&i.version<8,tryRestoreFakeAnchor:function(t,u){if(u&&u.data('cke-real-element-type')&&u.data('cke-real-element-type')=='anchor'){var v=t.restoreRealElement(u);if(v.data('cke-saved-name'))return v;}}};h.unlinkCommand=function(){};
h.unlinkCommand.prototype={exec:function(t){var u=t.getSelection(),v=u.createBookmarks(),w=u.getRanges(),x,y;for(var z=0;z<w.length;z++){x=w[z].getCommonAncestor(true);y=x.getAscendant('a',true);if(!y)continue;w[z].selectNodeContents(y);}u.selectRanges(w);t.document.$.execCommand('unlink',false,null);u.selectBookmarks(v);},startDisabled:true};l.extend(p,{linkShowAdvancedTab:true,linkShowTargetTab:false});(function(){var t={ol:1,ul:1},u=/^[\n\r\t ]*$/,v=k.walker.whitespaces(),w=k.walker.bookmark(),x=function(L){return!(v(L)||w(L));};q.list={listToArray:function(L,M,N,O,P){if(!t[L.getName()])return[];if(!O)O=0;if(!N)N=[];for(var Q=0,R=L.getChildCount();Q<R;Q++){var S=L.getChild(Q);if(S.type==1&&S.getName() in m.$list)q.list.listToArray(S,M,N,O+1);if(S.$.nodeName.toLowerCase()!='li')continue;var T={parent:L,indent:O,element:S,contents:[]};if(!P){T.grandparent=L.getParent();if(T.grandparent&&T.grandparent.$.nodeName.toLowerCase()=='li')T.grandparent=T.grandparent.getParent();}else T.grandparent=P;if(M)o.setMarker(M,S,'listarray_index',N.length);N.push(T);for(var U=0,V=S.getChildCount(),W;U<V;U++){W=S.getChild(U);if(W.type==1&&t[W.getName()])q.list.listToArray(W,M,N,O+1,T.grandparent);else T.contents.push(W);}}return N;},arrayToList:function(L,M,N,O,P){if(!N)N=0;if(!L||L.length<N+1)return null;var Q=L[N].parent.getDocument(),R=new k.documentFragment(Q),S=null,T=N,U=Math.max(L[N].indent,0),V=null,W,X=O==1?'p':'div';while(1){var Y=L[T];if(Y.indent==U){if(!S||L[T].parent.getName()!=S.getName()){S=L[T].parent.clone(false,1);P&&S.setAttribute('dir',P);R.append(S);}V=S.append(Y.element.clone(0,1));for(var Z=0;Z<Y.contents.length;Z++)V.append(Y.contents[Z].clone(1,1));T++;}else if(Y.indent==Math.max(U,0)+1){var aa=Y.element.getDirection(1),ab=L[T-1].element.getDirection(1),ac=q.list.arrayToList(L,null,T,O,ab!=aa?aa:null);if(!V.getChildCount()&&j&&!(Q.$.documentMode>7))V.append(Q.createText('\xa0'));V.append(ac.listNode);T=ac.nextIndex;}else if(Y.indent==-1&&!N&&Y.grandparent){if(t[Y.grandparent.getName()]){V=Y.element.clone(false,true);W=Y.element.getDirection(1);Y.grandparent.getDirection(1)!=W&&V.setAttribute('dir',W);}else if(P||Y.element.hasAttributes()||O!=2){V=Q.createElement(X);Y.element.copyAttributes(V,{type:1,value:1});W=Y.element.getDirection()||P;W&&V.setAttribute('dir',W);if(!P&&O==2&&!V.hasAttributes())V=new k.documentFragment(Q);}else V=new k.documentFragment(Q);for(Z=0;Z<Y.contents.length;Z++)V.append(Y.contents[Z].clone(1,1));if(V.type==11&&T!=L.length-1){var ad=V.getLast();
if(ad&&ad.type==1&&ad.getAttribute('type')=='_moz')ad.remove();if(!(ad=V.getLast(x)&&ad.type==1&&ad.getName() in m.$block))V.append(Q.createElement('br'));}if(V.type==1&&V.getName()==X&&V.$.firstChild){V.trim();var ae=V.getFirst();if(ae.type==1&&ae.isBlockBoundary()){var af=new k.documentFragment(Q);V.moveChildren(af);V=af;}}var ag=V.$.nodeName.toLowerCase();if(!j&&(ag=='div'||ag=='p'))V.appendBogus();R.append(V);S=null;T++;}else return null;if(L.length<=T||Math.max(L[T].indent,0)<U)break;}if(M){var ah=R.getFirst();while(ah){if(ah.type==1)o.clearMarkers(M,ah);ah=ah.getNextSourceNode();}}return{listNode:R,nextIndex:T};}};function y(L){if(L.editor.readOnly)return null;var M=L.data.path,N=M.blockLimit,O=M.elements,P,Q;for(Q=0;Q<O.length&&(P=O[Q])&&!P.equals(N);Q++){if(t[O[Q].getName()])return this.setState(this.type==O[Q].getName()?1:2);}return this.setState(2);};function z(L,M,N,O){var P=q.list.listToArray(M.root,N),Q=[];for(var R=0;R<M.contents.length;R++){var S=M.contents[R];S=S.getAscendant('li',true);if(!S||S.getCustomData('list_item_processed'))continue;Q.push(S);o.setMarker(N,S,'list_item_processed',true);}var T=M.root,U=T.getDocument().createElement(this.type);T.copyAttributes(U,{start:1,type:1});U.removeStyle('list-style-type');for(R=0;R<Q.length;R++){var V=Q[R].getCustomData('listarray_index');P[V].parent=U;}var W=q.list.arrayToList(P,N,null,L.config.enterMode),X,Y=W.listNode.getChildCount();for(R=0;R<Y&&(X=W.listNode.getChild(R));R++){if(X.getName()==this.type)O.push(X);}W.listNode.replace(M.root);};var A=/^h[1-6]$/;function B(L,M,N){var O=M.contents,P=M.root.getDocument(),Q=[];if(O.length==1&&O[0].equals(M.root)){var R=P.createElement('div');O[0].moveChildren&&O[0].moveChildren(R);O[0].append(R);O[0]=R;}var S=M.contents[0].getParent();for(var T=0;T<O.length;T++)S=S.getCommonAncestor(O[T].getParent());var U=L.config.useComputedState,V,W;U=U===undefined||U;for(T=0;T<O.length;T++){var X=O[T],Y;while(Y=X.getParent()){if(Y.equals(S)){Q.push(X);if(!W&&X.getDirection())W=1;var Z=X.getDirection(U);if(V!==null)if(V&&V!=Z)V=null;else V=Z;break;}X=Y;}}if(Q.length<1)return;var aa=Q[Q.length-1].getNext(),ab=P.createElement(this.type);N.push(ab);var ac,ad;while(Q.length){ac=Q.shift();ad=P.createElement('li');if(ac.is('pre')||A.test(ac.getName()))ac.appendTo(ad);else{if(V&&ac.getDirection()){ac.removeStyle('direction');ac.removeAttribute('dir');}ac.copyAttributes(ad);ac.moveChildren(ad);ac.remove();}ad.appendTo(ab);}if(V&&W)ab.setAttribute('dir',V);if(aa)ab.insertBefore(aa);
else ab.appendTo(S);};function C(L,M,N){var O=q.list.listToArray(M.root,N),P=[];for(var Q=0;Q<M.contents.length;Q++){var R=M.contents[Q];R=R.getAscendant('li',true);if(!R||R.getCustomData('list_item_processed'))continue;P.push(R);o.setMarker(N,R,'list_item_processed',true);}var S=null;for(Q=0;Q<P.length;Q++){var T=P[Q].getCustomData('listarray_index');O[T].indent=-1;S=T;}for(Q=S+1;Q<O.length;Q++){if(O[Q].indent>O[Q-1].indent+1){var U=O[Q-1].indent+1-O[Q].indent,V=O[Q].indent;while(O[Q]&&O[Q].indent>=V){O[Q].indent+=U;Q++;}Q--;}}var W=q.list.arrayToList(O,N,null,L.config.enterMode,M.root.getAttribute('dir')),X=W.listNode,Y,Z;function aa(ab){if((Y=X[ab?'getFirst':'getLast']())&&!(Y.is&&Y.isBlockBoundary())&&(Z=M.root[ab?'getPrevious':'getNext'](k.walker.whitespaces(true)))&&!(Z.is&&Z.isBlockBoundary({br:1})))L.document.createElement('br')[ab?'insertBefore':'insertAfter'](Y);};aa(true);aa();X.replace(M.root);};function D(L,M){this.name=L;this.type=M;};D.prototype={exec:function(L){var M=L.document,N=L.config,O=L.getSelection(),P=O&&O.getRanges(true);if(!P||P.length<1)return;if(this.state==2){var Q=M.getBody();if(!Q.getFirst(x)){N.enterMode==2?Q.appendBogus():P[0].fixBlock(1,N.enterMode==1?'p':'div');O.selectRanges(P);}else{var R=P.length==1&&P[0],S=R&&R.getEnclosedNode();if(S&&S.is&&this.type==S.getName())this.setState(1);}}var T=O.createBookmarks(true),U=[],V={},W=P.createIterator(),X=0;while((R=W.getNextRange())&&++X){var Y=R.getBoundaryNodes(),Z=Y.startNode,aa=Y.endNode;if(Z.type==1&&Z.getName()=='td')R.setStartAt(Y.startNode,1);if(aa.type==1&&aa.getName()=='td')R.setEndAt(Y.endNode,2);var ab=R.createIterator(),ac;ab.forceBrBreak=this.state==2;while(ac=ab.getNextParagraph()){if(ac.getCustomData('list_block'))continue;else o.setMarker(V,ac,'list_block',1);var ad=new k.elementPath(ac),ae=ad.elements,af=ae.length,ag=null,ah=0,ai=ad.blockLimit,aj;for(var ak=af-1;ak>=0&&(aj=ae[ak]);ak--){if(t[aj.getName()]&&ai.contains(aj)){ai.removeCustomData('list_group_object_'+X);var al=aj.getCustomData('list_group_object');if(al)al.contents.push(ac);else{al={root:aj,contents:[ac]};U.push(al);o.setMarker(V,aj,'list_group_object',al);}ah=1;break;}}if(ah)continue;var am=ai;if(am.getCustomData('list_group_object_'+X))am.getCustomData('list_group_object_'+X).contents.push(ac);else{al={root:am,contents:[ac]};o.setMarker(V,am,'list_group_object_'+X,al);U.push(al);}}}var an=[];while(U.length>0){al=U.shift();if(this.state==2){if(t[al.root.getName()])z.call(this,L,al,V,an);else B.call(this,L,al,an);
}else if(this.state==1&&t[al.root.getName()])C.call(this,L,al,V);}for(ak=0;ak<an.length;ak++){ag=an[ak];var ao,ap=this;(ao=function(aq){var ar=ag[aq?'getPrevious':'getNext'](k.walker.whitespaces(true));if(ar&&ar.getName&&ar.getName()==ap.type){ar.remove();ar.moveChildren(ag,aq);}})();ao(1);}o.clearAllMarkers(V);O.selectBookmarks(T);L.focus();}};var E=m,F=/[\t\r\n ]*(?:&nbsp;|\xa0)$/;function G(L,M){var N,O=L.children,P=O.length;for(var Q=0;Q<P;Q++){N=O[Q];if(N.name&&N.name in M)return Q;}return P;};function H(L){return function(M){var N=M.children,O=G(M,E.$list),P=N[O],Q=P&&P.previous,R;if(Q&&(Q.name&&Q.name=='br'||Q.value&&(R=Q.value.match(F)))){var S=Q;if(!(R&&R.index)&&S==N[0])N[0]=L||j?new h.htmlParser.text('\xa0'):new h.htmlParser.element('br',{});else if(S.name=='br')N.splice(O-1,1);else S.value=S.value.replace(F,'');}};};var I={elements:{}};for(var J in E.$listItem)I.elements[J]=H();var K={elements:{}};for(J in E.$listItem)K.elements[J]=H(true);q.add('list',{init:function(L){var M=L.addCommand('numberedlist',new D('numberedlist','ol')),N=L.addCommand('bulletedlist',new D('bulletedlist','ul'));L.ui.addButton('NumberedList',{label:L.lang.numberedlist,command:'numberedlist'});L.ui.addButton('BulletedList',{label:L.lang.bulletedlist,command:'bulletedlist'});L.on('selectionChange',l.bind(y,M));L.on('selectionChange',l.bind(y,N));},afterInit:function(L){var M=L.dataProcessor;if(M){M.dataFilter.addRules(I);M.htmlFilter.addRules(K);}},requires:['domiterator']});})();(function(){q.liststyle={requires:['dialog'],init:function(t){t.addCommand('numberedListStyle',new h.dialogCommand('numberedListStyle'));h.dialog.add('numberedListStyle',this.path+'dialogs/liststyle.js');t.addCommand('bulletedListStyle',new h.dialogCommand('bulletedListStyle'));h.dialog.add('bulletedListStyle',this.path+'dialogs/liststyle.js');if(t.addMenuItems){t.addMenuGroup('list',108);t.addMenuItems({numberedlist:{label:t.lang.list.numberedTitle,group:'list',command:'numberedListStyle'},bulletedlist:{label:t.lang.list.bulletedTitle,group:'list',command:'bulletedListStyle'}});}if(t.contextMenu)t.contextMenu.addListener(function(u,v){if(!u||u.isReadOnly())return null;while(u){var w=u.getName();if(w=='ol')return{numberedlist:2};else if(w=='ul')return{bulletedlist:2};u=u.getParent();}return null;});}};q.add('liststyle',q.liststyle);})();(function(){function t(z){if(!z||z.type!=1||z.getName()!='form')return[];var A=[],B=['style','className'];for(var C=0;C<B.length;C++){var D=B[C],E=z.$.elements.namedItem(D);
if(E){var F=new o(E);A.push([F,F.nextSibling]);F.remove();}}return A;};function u(z,A){if(!z||z.type!=1||z.getName()!='form')return;if(A.length>0)for(var B=A.length-1;B>=0;B--){var C=A[B][0],D=A[B][1];if(D)C.insertBefore(D);else C.appendTo(z);}};function v(z,A){var B=t(z),C={},D=z.$;if(!A){C['class']=D.className||'';D.className='';}C.inline=D.style.cssText||'';if(!A)D.style.cssText='position: static; overflow: visible';u(B);return C;};function w(z,A){var B=t(z),C=z.$;if('class' in A)C.className=A['class'];if('inline' in A)C.style.cssText=A.inline;u(B);};function x(z){var A=h.instances;for(var B in A){var C=A[B];if(C.mode=='wysiwyg'&&!C.readOnly){var D=C.document.getBody();D.setAttribute('contentEditable',false);D.setAttribute('contentEditable',true);}}if(z.focusManager.hasFocus){z.toolbox.focus();z.focus();}};function y(z){if(!j||i.version>6)return null;var A=o.createFromHtml('<iframe frameborder="0" tabindex="-1" src="javascript:void((function(){document.open();'+(i.isCustomDomain()?"document.domain='"+this.getDocument().$.domain+"';":'')+'document.close();'+'})())"'+' style="display:block;position:absolute;z-index:-1;'+'progid:DXImageTransform.Microsoft.Alpha(opacity=0);'+'"></iframe>');return z.append(A,true);};q.add('maximize',{init:function(z){var A=z.lang,B=h.document,C=B.getWindow(),D,E,F,G;function H(){var J=C.getViewPaneSize();G&&G.setStyles({width:J.width+'px',height:J.height+'px'});z.resize(J.width,J.height,null,true);};var I=2;z.addCommand('maximize',{modes:{wysiwyg:1,source:1},readOnly:1,editorFocus:false,exec:function(){var J=z.container.getChild(1),K=z.getThemeSpace('contents');if(z.mode=='wysiwyg'){var L=z.getSelection();D=L&&L.getRanges();E=C.getScrollPosition();}else{var M=z.textarea.$;D=!j&&[M.selectionStart,M.selectionEnd];E=[M.scrollLeft,M.scrollTop];}if(this.state==2){C.on('resize',H);F=C.getScrollPosition();var N=z.container;while(N=N.getParent()){N.setCustomData('maximize_saved_styles',v(N));N.setStyle('z-index',z.config.baseFloatZIndex-1);}K.setCustomData('maximize_saved_styles',v(K,true));J.setCustomData('maximize_saved_styles',v(J,true));var O={overflow:i.webkit?'':'hidden',width:0,height:0};B.getDocumentElement().setStyles(O);!i.gecko&&B.getDocumentElement().setStyle('position','fixed');!(i.gecko&&i.quirks)&&B.getBody().setStyles(O);j?setTimeout(function(){C.$.scrollTo(0,0);},0):C.$.scrollTo(0,0);J.setStyle('position',i.gecko&&i.quirks?'fixed':'absolute');J.$.offsetLeft;J.setStyles({'z-index':z.config.baseFloatZIndex-1,left:'0px',top:'0px'});
G=y(J);J.addClass('cke_maximized');H();var P=J.getDocumentPosition();J.setStyles({left:-1*P.x+'px',top:-1*P.y+'px'});i.gecko&&x(z);}else if(this.state==1){C.removeListener('resize',H);var Q=[K,J];for(var R=0;R<Q.length;R++){w(Q[R],Q[R].getCustomData('maximize_saved_styles'));Q[R].removeCustomData('maximize_saved_styles');}N=z.container;while(N=N.getParent()){w(N,N.getCustomData('maximize_saved_styles'));N.removeCustomData('maximize_saved_styles');}j?setTimeout(function(){C.$.scrollTo(F.x,F.y);},0):C.$.scrollTo(F.x,F.y);J.removeClass('cke_maximized');if(i.webkit){J.setStyle('display','inline');setTimeout(function(){J.setStyle('display','block');},0);}if(G){G.remove();G=null;}z.fire('resize');}this.toggleState();var S=this.uiItems[0];if(S){var T=this.state==2?A.maximize:A.minimize,U=z.element.getDocument().getById(S._.id);U.getChild(1).setHtml(T);U.setAttribute('title',T);U.setAttribute('href','javascript:void("'+T+'");');}if(z.mode=='wysiwyg'){if(D){i.gecko&&x(z);z.getSelection().selectRanges(D);var V=z.getSelection().getStartElement();V&&V.scrollIntoView(true);}else C.$.scrollTo(E.x,E.y);}else{if(D){M.selectionStart=D[0];M.selectionEnd=D[1];}M.scrollLeft=E[0];M.scrollTop=E[1];}D=E=null;I=this.state;},canUndo:false});z.ui.addButton('Maximize',{label:A.maximize,command:'maximize'});z.on('mode',function(){var J=z.getCommand('maximize');J.setState(J.state==0?0:I);},null,null,100);}});})();var a={url:'',poster:'',width:507,height:322,autoplay:'false',contentType:'',streamType:''},b={url:'',poster:'',width:507,height:322,autoplay:'false',contentType:'',streamType:''},c='';(function(){q.add('mediaembed',{requires:['iframedialog'],init:function(t){var u=t.lang.mediaembed,v=this;h.dialog.add('MediaEmbedDialog',function(w){return{title:'Embed Media Dialog',minWidth:550,minHeight:200,contents:[{id:'iframe',label:'Embed Media',expand:true,elements:[{type:'html',id:'pageMediaEmbed',label:'Embed Media',style:'width : 100%',html:'<iframe src="'+v.path.toLowerCase()+'dialogs/mediaembed_'+w.config.language+'.html" frameborder="0" name="iframeMediaEmbed" id="iframeMediaEmbed" allowtransparency="1" style="width:100%;height:250px;margin:0;padding:0;"></iframe>'}]}],onShow:function(){e('iframe#iframeMediaEmbed',true);},onOk:function(){d(this.getParentEditor(),'iframe#iframeMediaEmbed',true);}};});h.dialog.add('MediaEmbedDialogMod',function(w){return{title:'Embed Media Dialog',minWidth:550,minHeight:200,contents:[{id:'iframe',label:'Embed Media',expand:true,elements:[{type:'html',id:'pageMediaEmbedMod',label:'Embed Media',style:'width : 100%',html:'<iframe src="'+v.path.toLowerCase()+'dialogs/mediaembed_'+w.config.language+'.html" frameborder="0" name="iframeMediaEmbed" id="iframeMediaEmbedMod" allowtransparency="1" style="width:100%;height:250px;margin:0;padding:0;"></iframe>'}]}],onShow:function(){e('iframe#iframeMediaEmbedMod',false);
},onOk:function(){d(this.getParentEditor(),'iframe#iframeMediaEmbedMod',false);}};});t.addCommand('mediaembed',new h.dialogCommand('MediaEmbedDialog'));t.addCommand('mediaembedmod',new h.dialogCommand('MediaEmbedDialogMod'));t.addCommand('MediaEmbedRemove',{exec:function(w){var x=w.getSelection(),y=x.createBookmarks(),z=x.getStartElement();z.remove(false);x.selectBookmarks(y);}});t.ui.addButton('MediaEmbed',{label:'Embed Media',command:'mediaembed',icon:this.path.toLowerCase()+'images/icon.png'});t.on('doubleclick',function(w){var x=w.data,y=x.element,z=y.getHtml();if(z.indexOf('include:media-player')==-1)return null;g(z,y);x.dialog='MediaEmbedDialogMod';});if(t.addMenuItems){t.addMenuGroup('mediaembed');t.addMenuItems({MediaEmbedDialogMod:{label:u.edit,command:'mediaembedmod',group:'mediaembed',icon:this.path.toLowerCase()+'images/icon.png',order:1},RemoveMedia:{label:u.remove,command:'MediaEmbedRemove',group:'mediaembed',icon:this.path.toLowerCase()+'images/iconremove.png',order:5}});}if(t.contextMenu)t.contextMenu.addListener(function(w,x){var y=w.getHtml();if(y.indexOf('include:media-player')==-1)return null;g(y,w);return{MediaEmbedDialogMod:2,RemoveMedia:2};});}});})();function d(t,u,v){var w=$(u),x=w.contents(),y=x.find('#txtUrl').val();if(y!=''&&y.indexOf('.')!=-1){var z='${include:media-player url=['+encodeURI(y)+']',A=x.find('#txtPosterUrl').val();if(A.length>0)z=z+' poster=['+encodeURI(A)+']';var B=x.find('#txtContentType').val();if(B.length>0)z=z+' content-type=['+B+']';var C=x.find('#txtWidth').val();if(C.length>0&&C!=a.width)z=z+' width=['+C+']';var D=x.find('#txtHeight').val();if(D.length>0&&D!=a.height)z=z+' height=['+D+']';var E=x.find('#chkAutoplay');if(E.attr('checked')==true)z+=' autoplay=[true]';var F=x.find('#chkLiveStream');if(F.attr('checked')==true)z+=' stream-type=[live]';var G=x.find('#txtAlign').val();if(z.length>0)z+='}';var H='';if(B.length>0&&B=='audio/mp3')H='vrtx-media-player-audio';else if(f(y)=='mp3')H='vrtx-media-player-audio';else H='vrtx-media-player';var I=t.getSelection().getStartElement();if(I.is('p'))I.renameNode('div');if(v){var J=H;if(G!='')J=J+' '+G;I.appendHtml('<div class="'+J+'">'+z+'</div>');}else{I.removeAttribute('class');if(G!=''&&H!=''){I.addClass(H);I.addClass(G);}else I.addClass(H);I.setText(z);}}else{alert('Du må spesifisere en URL');return false;}};function e(t,u){var v=setInterval(function(){var w=$(t);if(w){var x=w.contents();if(x.find('#chkAutoplay').length){x.find('#txtUrl').val(u?a.url:b.url);x.find('#txtPosterUrl').val(u?a.poster:b.poster);
x.find('#txtWidth').val(u?a.width:b.width);x.find('#txtHeight').val(u?a.height:b.height);x.find('#txtContentType').val(u?a.contentType:b.contentType);var y=u?a.autoplay:b.autoplay;if(y=='true')x.find('#chkAutoplay').attr('checked',true);else x.find('#chkAutoplay').attr('checked',false);var z=u?a.streamType:b.streamType;if(z=='live')x.find('#chkLiveStream').attr('checked',true);else x.find('#chkLiveStream').attr('checked',false);if(c!=''&&c!=' '&&!u)x.find('#txtAlign').val(c);else x.find('#txtAlign').val('');if(!u){b.url=a.url;b.poster=a.poster;b.width=a.width;b.height=a.height;b.autoplay=a.autoplay;b.streamType=a.streamType;b.contentType=a.contentType;c='';}clearInterval(v);}}},50);};function f(t){var u=t.match(/\.(avi|asf|fla|flv|mov|mp3|mp4|m4v|mpg|mpeg|mpv|qt|swf|wma|wmv)$/i);if(u!=null&&u.length&&u.length>0)u=u[1];else u='';return u;};function g(t,u){var v=[],w=t,x=u.$.className;c=$.trim(x.replace(/vrtx-media-player[\w-]*/g,''));for(var y in b){if(y=='contentType')v=new RegExp('(?:content\\-type[\\s]*?=[\\s]*?\\[[\\s]*?)(.*?)(?=[\\s]*?\\])');else if(y=='streamType')v=new RegExp('(?:stream\\-type[\\s]*?=[\\s]*?\\[[\\s]*?)(.*?)(?=[\\s]*?\\])');else v=new RegExp('(?:'+y+'[\\s]*?=[\\s]*?\\[[\\s]*?)(.*?)(?=[\\s]*?\\])');var z=v.exec(t);if(z!=null)if(z.length=2)if(y=='url'||y=='poster')b[y]=decodeURI($.trim(z[1]));else b[y]=$.trim(z[1]);t=w;}};q.add('newpage',{init:function(t){t.addCommand('newpage',{modes:{wysiwyg:1,source:1},exec:function(u){var v=this;u.setData(u.config.newpage_html||'',function(){setTimeout(function(){u.fire('afterCommandExec',{name:v.name,command:v});u.selectionChange();},200);});u.focus();},async:true});t.ui.addButton('NewPage',{label:t.lang.newPage,command:'newpage'});}});q.add('pagebreak',{init:function(t){t.addCommand('pagebreak',q.pagebreakCmd);t.ui.addButton('PageBreak',{label:t.lang.pagebreak,command:'pagebreak'});var u=['{','background: url('+h.getUrl(this.path+'images/pagebreak.gif')+') no-repeat center center;','clear: both;','width:100%; _width:99.9%;','border-top: #999999 1px dotted;','border-bottom: #999999 1px dotted;','padding:0;','height: 5px;','cursor: default;','}'].join('').replace(/;/g,' !important;');t.addCss('div.cke_pagebreak'+u);i.opera&&t.on('contentDom',function(){t.document.on('click',function(v){var w=v.data.getTarget();if(w.is('div')&&w.hasClass('cke_pagebreak'))t.getSelection().selectElement(w);});});},afterInit:function(t){var u=t.lang.pagebreakAlt,v=t.dataProcessor,w=v&&v.dataFilter,x=v&&v.htmlFilter;if(x)x.addRules({attributes:{'class':function(y,z){var A=y.replace('cke_pagebreak','');
if(A!=y){var B=h.htmlParser.fragment.fromHtml('<span style="display: none;">&nbsp;</span>');z.children.length=0;z.add(B);var C=z.attributes;delete C['aria-label'];delete C.contenteditable;delete C.title;}return A;}}},5);if(w)w.addRules({elements:{div:function(y){var z=y.attributes,A=z&&z.style,B=A&&y.children.length==1&&y.children[0],C=B&&B.name=='span'&&B.attributes.style;if(C&&/page-break-after\s*:\s*always/i.test(A)&&/display\s*:\s*none/i.test(C)){z.contenteditable='false';z['class']='cke_pagebreak';z['data-cke-display-name']='pagebreak';z['aria-label']=u;z.title=u;y.children.length=0;}}}});},requires:['fakeobjects']});q.pagebreakCmd={exec:function(t){var u=t.lang.pagebreakAlt,v=o.createFromHtml('<div style="page-break-after: always;"contenteditable="false" title="'+u+'" '+'aria-label="'+u+'" '+'data-cke-display-name="pagebreak" '+'class="cke_pagebreak">'+'</div>'),w=t.getSelection().getRanges(true);t.fire('saveSnapshot');for(var x,y=w.length-1;y>=0;y--){x=w[y];if(y<w.length-1)v=v.clone(true);x.splitBlock('p');x.insertNode(v);if(y==w.length-1){var z=v.getNext();x.moveToPosition(v,4);if(!z||z.type==1&&!z.isEditable())x.fixBlock(true,t.config.enterMode==3?'div':'p');x.select();}}t.fire('saveSnapshot');}};(function(){function t(u){u.data.mode='html';};q.add('pastefromword',{init:function(u){var v=0,w=function(x){x&&x.removeListener();u.removeListener('beforePaste',t);v&&setTimeout(function(){v=0;},0);};u.addCommand('pastefromword',{canUndo:false,exec:function(){v=1;u.on('beforePaste',t);if(u.execCommand('paste','html')===false){u.on('dialogShow',function(x){x.removeListener();x.data.on('cancel',w);});u.on('dialogHide',function(x){x.data.removeListener('cancel',w);});}u.on('afterPaste',w);}});u.ui.addButton('PasteFromWord',{label:u.lang.pastefromword.toolbar,command:'pastefromword'});u.on('pasteState',function(x){u.getCommand('pastefromword').setState(x.data);});u.on('paste',function(x){var y=x.data,z;if((z=y.html)&&(v||/(class=\"?Mso|style=\"[^\"]*\bmso\-|w:WordDocument)/.test(z))){var A=this.loadFilterRules(function(){if(A)u.fire('paste',y);else if(!u.config.pasteFromWordPromptCleanup||v||confirm(u.lang.pastefromword.confirmCleanup))y.html=h.cleanWord(z,u);});A&&x.cancel();}},this);},loadFilterRules:function(u){var v=h.cleanWord;if(v)u();else{var w=h.getUrl(p.pasteFromWordCleanupFile||this.path+'filter/default.js');h.scriptLoader.load(w,u,null,true);}return!v;},requires:['clipboard']});})();(function(){var t={exec:function(u){var v=l.tryThese(function(){var w=window.clipboardData.getData('Text');
if(!w)throw 0;return w;});if(!v){u.openDialog('pastetext');return false;}else u.fire('paste',{text:v});return true;}};q.add('pastetext',{init:function(u){var v='pastetext',w=u.addCommand(v,t);u.ui.addButton('PasteText',{label:u.lang.pasteText.button,command:v});h.dialog.add(v,h.getUrl(this.path+'dialogs/pastetext.js'));if(u.config.forcePasteAsPlainText){u.on('beforeCommandExec',function(x){var y=x.data.commandData;if(x.data.name=='paste'&&y!='html'){u.execCommand('pastetext');x.cancel();}},null,null,0);u.on('beforePaste',function(x){x.data.mode='text';});}u.on('pasteState',function(x){u.getCommand('pastetext').setState(x.data);});},requires:['clipboard']});})();q.add('popup');l.extend(h.editor.prototype,{popup:function(t,u,v,w){u=u||'80%';v=v||'70%';if(typeof u=='string'&&u.length>1&&u.substr(u.length-1,1)=='%')u=parseInt(window.screen.width*parseInt(u,10)/100,10);if(typeof v=='string'&&v.length>1&&v.substr(v.length-1,1)=='%')v=parseInt(window.screen.height*parseInt(v,10)/100,10);if(u<640)u=640;if(v<420)v=420;var x=parseInt((window.screen.height-v)/2,10),y=parseInt((window.screen.width-u)/2,10);w=(w||'location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes,scrollbars=yes')+',width='+u+',height='+v+',top='+x+',left='+y;var z=window.open('',null,w,true);if(!z)return false;try{z.moveTo(y,x);z.resizeTo(u,v);z.focus();z.location.href=t;}catch(A){z=window.open(t,null,w,true);}return true;}});(function(){var t={modes:{wysiwyg:1,source:1},canUndo:false,readOnly:1,exec:function(v){var w,x=v.config,y=x.baseHref?'<base href="'+x.baseHref+'"/>':'',z=i.isCustomDomain();if(x.fullPage)w=v.getData().replace(/<head>/,'$&'+y).replace(/[^>]*(?=<\/title>)/,'$& &mdash; '+v.lang.preview);else{var A='<body ',B=v.document&&v.document.getBody();if(B){if(B.getAttribute('id'))A+='id="'+B.getAttribute('id')+'" ';if(B.getAttribute('class'))A+='class="'+B.getAttribute('class')+'" ';}A+='>';w=v.config.docType+'<html dir="'+v.config.contentsLangDirection+'">'+'<head>'+y+'<title>'+v.lang.preview+'</title>'+l.buildStyleHtml(v.config.contentsCss)+'</head>'+A+v.getData()+'</body></html>';}var C=640,D=420,E=80;try{var F=window.screen;C=Math.round(F.width*0.8);D=Math.round(F.height*0.7);E=Math.round(F.width*0.1);}catch(I){}var G='';if(z){window._cke_htmlToLoad=w;G='javascript:void( (function(){document.open();document.domain="'+document.domain+'";'+'document.write( window.opener._cke_htmlToLoad );'+'document.close();'+'window.opener._cke_htmlToLoad = null;'+'})() )';
}var H=window.open(G,null,'toolbar=yes,location=no,status=yes,menubar=yes,scrollbars=yes,resizable=yes,width='+C+',height='+D+',left='+E);if(!z){H.document.open();H.document.write(w);H.document.close();}}},u='preview';q.add(u,{init:function(v){v.addCommand(u,t);v.ui.addButton('Preview',{label:v.lang.preview,command:u});}});})();q.add('print',{init:function(t){var u='print',v=t.addCommand(u,q.print);t.ui.addButton('Print',{label:t.lang.print,command:u});}});q.print={exec:function(t){if(i.opera)return;else if(i.gecko)t.window.$.print();else t.document.$.execCommand('Print');},canUndo:false,readOnly:1,modes:{wysiwyg:!i.opera}};q.add('removeformat',{requires:['selection'],init:function(t){t.addCommand('removeFormat',q.removeformat.commands.removeformat);t.ui.addButton('RemoveFormat',{label:t.lang.removeFormat,command:'removeFormat'});t._.removeFormat={filters:[]};}});q.removeformat={commands:{removeformat:{exec:function(t){var u=t._.removeFormatRegex||(t._.removeFormatRegex=new RegExp('^(?:'+t.config.removeFormatTags.replace(/,/g,'|')+')$','i')),v=t._.removeAttributes||(t._.removeAttributes=t.config.removeFormatAttributes.split(',')),w=q.removeformat.filter,x=t.getSelection().getRanges(1),y=x.createIterator(),z;while(z=y.getNextRange()){if(!z.collapsed)z.enlarge(1);var A=z.createBookmark(),B=A.startNode,C=A.endNode,D,E=function(G){var H=new k.elementPath(G),I=H.elements;for(var J=1,K;K=I[J];J++){if(K.equals(H.block)||K.equals(H.blockLimit))break;if(u.test(K.getName())&&w(t,K))G.breakParent(K);}};E(B);if(C){E(C);D=B.getNextSourceNode(true,1);while(D){if(D.equals(C))break;var F=D.getNextSourceNode(false,1);if(!(D.getName()=='img'&&D.data('cke-realelement'))&&w(t,D))if(u.test(D.getName()))D.remove(1);else{D.removeAttributes(v);t.fire('removeFormatCleanup',D);}D=F;}}z.moveToBookmark(A);}t.getSelection().selectRanges(x);}}},filter:function(t,u){var v=t._.removeFormat.filters;for(var w=0;w<v.length;w++){if(v[w](u)===false)return false;}return true;}};h.editor.prototype.addRemoveFormatFilter=function(t){this._.removeFormat.filters.push(t);};p.removeFormatTags='b,big,code,del,dfn,em,font,i,ins,kbd,q,samp,small,span,strike,strong,sub,sup,tt,u,var';p.removeFormatAttributes='class,style,lang,width,height,align,hspace,valign';q.add('resize',{init:function(t){var u=t.config,v=t.element.getDirection(1);!u.resize_dir&&(u.resize_dir='both');u.resize_maxWidth==undefined&&(u.resize_maxWidth=3000);u.resize_maxHeight==undefined&&(u.resize_maxHeight=3000);u.resize_minWidth==undefined&&(u.resize_minWidth=750);
u.resize_minHeight==undefined&&(u.resize_minHeight=250);if(u.resize_enabled!==false){var w=null,x,y,z=(u.resize_dir=='both'||u.resize_dir=='horizontal')&&u.resize_minWidth!=u.resize_maxWidth,A=(u.resize_dir=='both'||u.resize_dir=='vertical')&&u.resize_minHeight!=u.resize_maxHeight;function B(E){var F=E.data.$.screenX-x.x,G=E.data.$.screenY-x.y,H=y.width,I=y.height,J=H+F*(v=='rtl'?-1:1),K=I+G;if(z)H=Math.max(u.resize_minWidth,Math.min(J,u.resize_maxWidth));if(A)I=Math.max(u.resize_minHeight,Math.min(K,u.resize_maxHeight));t.resize(H,I);};function C(E){h.document.removeListener('mousemove',B);h.document.removeListener('mouseup',C);if(t.document){t.document.removeListener('mousemove',B);t.document.removeListener('mouseup',C);}};var D=l.addFunction(function(E){if(!w)w=t.getResizable();y={width:w.$.offsetWidth||0,height:w.$.offsetHeight||0};x={x:E.screenX,y:E.screenY};u.resize_minWidth>y.width&&(u.resize_minWidth=y.width);u.resize_minHeight>y.height&&(u.resize_minHeight=y.height);h.document.on('mousemove',B);h.document.on('mouseup',C);if(t.document){t.document.on('mousemove',B);t.document.on('mouseup',C);}});t.on('destroy',function(){l.removeFunction(D);});t.on('themeSpace',function(E){if(E.data.space=='bottom'){var F='';if(z&&!A)F=' cke_resizer_horizontal';if(!z&&A)F=' cke_resizer_vertical';var G='<div class="cke_resizer'+F+' cke_resizer_'+v+'"'+' title="'+l.htmlEncode(t.lang.resize)+'"'+' onmousedown="CKEDITOR.tools.callFunction('+D+', event)"'+'></div>';v=='ltr'&&F=='ltr'?E.data.html+=G:E.data.html=G+E.data.html;}},t,null,100);}}});(function(){var t={modes:{wysiwyg:1,source:1},readOnly:1,exec:function(v){var w=v.element.$.form;if(w)try{w.submit();}catch(x){if(w.submit.click)w.submit.click();}}},u='save';q.add(u,{init:function(v){var w=v.addCommand(u,t);w.modes={wysiwyg:!!v.element.$.form};v.ui.addButton('Save',{label:v.lang.save,command:u});}});})();(function(){var t='scaytcheck',u='';function v(A,B){var C=0,D;for(D in B){if(B[D]==A){C=1;break;}}return C;};var w=function(){var A=this,B=function(){var F=A.config,G={};G.srcNodeRef=A.document.getWindow().$.frameElement;G.assocApp='CKEDITOR.'+h.version+'@'+h.revision;G.customerid=F.scayt_customerid||'1:WvF0D4-UtPqN1-43nkD4-NKvUm2-daQqk3-LmNiI-z7Ysb4-mwry24-T8YrS3-Q2tpq2';G.customDictionaryIds=F.scayt_customDictionaryIds||'';G.userDictionaryName=F.scayt_userDictionaryName||'';G.sLang=F.scayt_sLang||'en_US';G.onLoad=function(){if(!(j&&i.version<8))this.addStyle(this.selectorCss(),'padding-bottom: 2px !important;');
if(A.focusManager.hasFocus&&!x.isControlRestored(A))this.focus();};G.onBeforeChange=function(){if(x.getScayt(A)&&!A.checkDirty())setTimeout(function(){A.resetDirty();},0);};var H=window.scayt_custom_params;if(typeof H=='object')for(var I in H)G[I]=H[I];if(x.getControlId(A))G.id=x.getControlId(A);var J=new window.scayt(G);J.afterMarkupRemove.push(function(L){new o(L,J.document).mergeSiblings();});var K=x.instances[A.name];if(K){J.sLang=K.sLang;J.option(K.option());J.paused=K.paused;}x.instances[A.name]=J;try{J.setDisabled(x.isPaused(A)===false);}catch(L){}A.fire('showScaytState');};A.on('contentDom',B);A.on('contentDomUnload',function(){var F=h.document.getElementsByTag('script'),G=/^dojoIoScript(\d+)$/i,H=/^https?:\/\/svc\.spellchecker\.net\/spellcheck\/script\/ssrv\.cgi/i;for(var I=0;I<F.count();I++){var J=F.getItem(I),K=J.getId(),L=J.getAttribute('src');if(K&&L&&K.match(G)&&L.match(H))J.remove();}});A.on('beforeCommandExec',function(F){if((F.data.name=='source'||F.data.name=='newpage')&&A.mode=='wysiwyg'){var G=x.getScayt(A);if(G){x.setPaused(A,!G.disabled);x.setControlId(A,G.id);G.destroy(true);delete x.instances[A.name];}}else if(F.data.name=='source'&&A.mode=='source')x.markControlRestore(A);});A.on('afterCommandExec',function(F){if(!x.isScaytEnabled(A))return;if(A.mode=='wysiwyg'&&(F.data.name=='undo'||F.data.name=='redo'))window.setTimeout(function(){x.getScayt(A).refresh();},10);});A.on('destroy',function(F){var G=F.editor,H=x.getScayt(G);if(!H)return;delete x.instances[G.name];x.setControlId(G,H.id);H.destroy(true);});A.on('afterSetData',function(){if(x.isScaytEnabled(A))window.setTimeout(function(){var F=x.getScayt(A);F&&F.refresh();},10);});A.on('insertElement',function(){var F=x.getScayt(A);if(x.isScaytEnabled(A)){if(j)A.getSelection().unlock(true);window.setTimeout(function(){F.focus();F.refresh();},10);}},this,null,50);A.on('insertHtml',function(){var F=x.getScayt(A);if(x.isScaytEnabled(A)){if(j)A.getSelection().unlock(true);window.setTimeout(function(){F.focus();F.refresh();},10);}},this,null,50);A.on('scaytDialog',function(F){F.data.djConfig=window.djConfig;F.data.scayt_control=x.getScayt(A);F.data.tab=u;F.data.scayt=window.scayt;});var C=A.dataProcessor,D=C&&C.htmlFilter;if(D)D.addRules({elements:{span:function(F){if(F.attributes['data-scayt_word']&&F.attributes['data-scaytid']){delete F.name;return F;}}}});var E=q.undo.Image.prototype;E.equals=l.override(E.equals,function(F){return function(G){var L=this;var H=L.contents,I=G.contents,J=x.getScayt(L.editor);
if(J&&x.isScaytReady(L.editor)){L.contents=J.reset(H)||'';G.contents=J.reset(I)||'';}var K=F.apply(L,arguments);L.contents=H;G.contents=I;return K;};});if(A.document)B();};q.scayt={engineLoaded:false,instances:{},controlInfo:{},setControlInfo:function(A,B){if(A&&A.name&&typeof this.controlInfo[A.name]!='object')this.controlInfo[A.name]={};for(var C in B)this.controlInfo[A.name][C]=B[C];},isControlRestored:function(A){if(A&&A.name&&this.controlInfo[A.name])return this.controlInfo[A.name].restored;return false;},markControlRestore:function(A){this.setControlInfo(A,{restored:true});},setControlId:function(A,B){this.setControlInfo(A,{id:B});},getControlId:function(A){if(A&&A.name&&this.controlInfo[A.name]&&this.controlInfo[A.name].id)return this.controlInfo[A.name].id;return null;},setPaused:function(A,B){this.setControlInfo(A,{paused:B});},isPaused:function(A){if(A&&A.name&&this.controlInfo[A.name])return this.controlInfo[A.name].paused;return undefined;},getScayt:function(A){return this.instances[A.name];},isScaytReady:function(A){return this.engineLoaded===true&&'undefined'!==typeof window.scayt&&this.getScayt(A);},isScaytEnabled:function(A){var B=this.getScayt(A);return B?B.disabled===false:false;},getUiTabs:function(A){var B=[],C=A.config.scayt_uiTabs||'1,1,1';C=C.split(',');C[3]='1';for(var D=0;D<4;D++)B[D]=typeof window.scayt!='undefined'&&typeof window.scayt.uiTags!='undefined'?parseInt(C[D],10)&&window.scayt.uiTags[D]:parseInt(C[D],10);return B;},loadEngine:function(A){if(i.gecko&&i.version<10900||i.opera||i.air)return A.fire('showScaytState');if(this.engineLoaded===true)return w.apply(A);else if(this.engineLoaded==-1)return h.on('scaytReady',function(){w.apply(A);});h.on('scaytReady',w,A);h.on('scaytReady',function(){this.engineLoaded=true;},this,null,0);this.engineLoaded=-1;var B=document.location.protocol;B=B.search(/https?:/)!=-1?B:'http:';var C='svc.spellchecker.net/scayt26/loader__base.js',D=A.config.scayt_srcUrl||B+'//'+C,E=x.parseUrl(D).path+'/';if(window.scayt==undefined){h._djScaytConfig={baseUrl:E,addOnLoad:[function(){h.fireOnce('scaytReady');}],isDebug:false};h.document.getHead().append(h.document.createElement('script',{attributes:{type:'text/javascript',async:'true',src:D}}));}else h.fireOnce('scaytReady');return null;},parseUrl:function(A){var B;if(A.match&&(B=A.match(/(.*)[\/\\](.*?\.\w+)$/)))return{path:B[1],file:B[2]};else return A;}};var x=q.scayt,y=function(A,B,C,D,E,F,G){A.addCommand(D,E);A.addMenuItem(D,{label:C,command:D,group:F,order:G});
},z={preserveState:true,editorFocus:false,canUndo:false,exec:function(A){if(x.isScaytReady(A)){var B=x.isScaytEnabled(A);this.setState(B?2:1);var C=x.getScayt(A);C.focus();C.setDisabled(B);}else if(!A.config.scayt_autoStartup&&x.engineLoaded>=0){this.setState(0);x.loadEngine(A);}}};q.add('scayt',{requires:['menubutton'],beforeInit:function(A){var B=A.config.scayt_contextMenuItemsOrder||'suggest|moresuggest|control',C='';B=B.split('|');if(B&&B.length)for(var D=0;D<B.length;D++)C+='scayt_'+B[D]+(B.length!=parseInt(D,10)+1?',':'');A.config.menu_groups=C+','+A.config.menu_groups;},init:function(A){var B=A.dataProcessor&&A.dataProcessor.dataFilter,C={elements:{span:function(L){var M=L.attributes;if(M&&M['data-scaytid'])delete L.name;}}};B&&B.addRules(C);var D={},E={},F=A.addCommand(t,z);h.dialog.add(t,h.getUrl(this.path+'dialogs/options.js'));var G=x.getUiTabs(A),H='scaytButton';A.addMenuGroup(H);var I={},J=A.lang.scayt;I.scaytToggle={label:J.enable,command:t,group:H};if(G[0]==1)I.scaytOptions={label:J.options,group:H,onClick:function(){u='options';A.openDialog(t);}};if(G[1]==1)I.scaytLangs={label:J.langs,group:H,onClick:function(){u='langs';A.openDialog(t);}};if(G[2]==1)I.scaytDict={label:J.dictionariesTab,group:H,onClick:function(){u='dictionaries';A.openDialog(t);}};I.scaytAbout={label:A.lang.scayt.about,group:H,onClick:function(){u='about';A.openDialog(t);}};A.addMenuItems(I);A.ui.add('Scayt',5,{label:J.title,title:i.opera?J.opera_title:J.title,className:'cke_button_scayt',modes:{wysiwyg:1},onRender:function(){F.on('state',function(){this.setState(F.state);},this);},onMenu:function(){var L=x.isScaytEnabled(A);A.getMenuItem('scaytToggle').label=J[L?'disable':'enable'];var M=x.getUiTabs(A);return{scaytToggle:2,scaytOptions:L&&M[0]?2:0,scaytLangs:L&&M[1]?2:0,scaytDict:L&&M[2]?2:0,scaytAbout:L&&M[3]?2:0};}});if(A.contextMenu&&A.addMenuItems)A.contextMenu.addListener(function(L,M){if(!x.isScaytEnabled(A)||M.getRanges()[0].checkReadOnly())return null;var N=x.getScayt(A),O=N.getScaytNode();if(!O)return null;var P=N.getWord(O);if(!P)return null;var Q=N.getLang(),R={},S=window.scayt.getSuggestion(P,Q);if(!S||!S.length)return null;for(var T in D){delete A._.menuItems[T];delete A._.commands[T];}for(T in E){delete A._.menuItems[T];delete A._.commands[T];}D={};E={};var U=A.config.scayt_moreSuggestions||'on',V=false,W=A.config.scayt_maxSuggestions;typeof W!='number'&&(W=5);!W&&(W=S.length);var X=A.config.scayt_contextCommands||'all';X=X.split('|');for(var Y=0,Z=S.length;Y<Z;
Y+=1){var aa='scayt_suggestion_'+S[Y].replace(' ','_'),ab=(function(af,ag){return{exec:function(){N.replace(af,ag);}};})(O,S[Y]);if(Y<W){y(A,'button_'+aa,S[Y],aa,ab,'scayt_suggest',Y+1);R[aa]=2;E[aa]=2;}else if(U=='on'){y(A,'button_'+aa,S[Y],aa,ab,'scayt_moresuggest',Y+1);D[aa]=2;V=true;}}if(V){A.addMenuItem('scayt_moresuggest',{label:J.moreSuggestions,group:'scayt_moresuggest',order:10,getItems:function(){return D;}});E.scayt_moresuggest=2;}if(v('all',X)||v('ignore',X)){var ac={exec:function(){N.ignore(O);}};y(A,'ignore',J.ignore,'scayt_ignore',ac,'scayt_control',1);E.scayt_ignore=2;}if(v('all',X)||v('ignoreall',X)){var ad={exec:function(){N.ignoreAll(O);}};y(A,'ignore_all',J.ignoreAll,'scayt_ignore_all',ad,'scayt_control',2);E.scayt_ignore_all=2;}if(v('all',X)||v('add',X)){var ae={exec:function(){window.scayt.addWordToUserDictionary(O);}};y(A,'add_word',J.addWord,'scayt_add_word',ae,'scayt_control',3);E.scayt_add_word=2;}if(N.fireOnContextMenu)N.fireOnContextMenu(A);return E;});var K=function(){A.removeListener('showScaytState',K);if(!i.opera&&!i.air)F.setState(x.isScaytEnabled(A)?1:2);else F.setState(0);};A.on('showScaytState',K);if(i.opera||i.air)A.on('instanceReady',function(){K();});if(A.config.scayt_autoStartup)A.on('instanceReady',function(){x.loadEngine(A);});},afterInit:function(A){var B,C=function(D){if(D.hasAttribute('data-scaytid'))return false;};if(A._.elementsPath&&(B=A._.elementsPath.filters))B.push(C);A.addRemoveFormatFilter&&A.addRemoveFormatFilter(C);}});})();q.add('smiley',{requires:['dialog'],init:function(t){t.config.smiley_path=t.config.smiley_path||this.path+'images/';t.addCommand('smiley',new h.dialogCommand('smiley'));t.ui.addButton('Smiley',{label:t.lang.smiley.toolbar,command:'smiley'});h.dialog.add('smiley',this.path+'dialogs/smiley.js');}});p.smiley_images=['regular_smile.gif','sad_smile.gif','wink_smile.gif','teeth_smile.gif','confused_smile.gif','tounge_smile.gif','embaressed_smile.gif','omg_smile.gif','whatchutalkingabout_smile.gif','angry_smile.gif','angel_smile.gif','shades_smile.gif','devil_smile.gif','cry_smile.gif','lightbulb.gif','thumbs_down.gif','thumbs_up.gif','heart.gif','broken_heart.gif','kiss.gif','envelope.gif'];p.smiley_descriptions=['smiley','sad','wink','laugh','frown','cheeky','blush','surprise','indecision','angry','angel','cool','devil','crying','enlightened','no','yes','heart','broken heart','kiss','mail'];(function(){var t='.%2 p,.%2 div,.%2 pre,.%2 address,.%2 blockquote,.%2 h1,.%2 h2,.%2 h3,.%2 h4,.%2 h5,.%2 h6{background-repeat: no-repeat;background-position: top %3;border: 1px dotted gray;padding-top: 8px;padding-%3: 8px;}.%2 p{%1p.png);}.%2 div{%1div.png);}.%2 pre{%1pre.png);}.%2 address{%1address.png);}.%2 blockquote{%1blockquote.png);}.%2 h1{%1h1.png);}.%2 h2{%1h2.png);}.%2 h3{%1h3.png);}.%2 h4{%1h4.png);}.%2 h5{%1h5.png);}.%2 h6{%1h6.png);}',u=/%1/g,v=/%2/g,w=/%3/g,x={readOnly:1,preserveState:true,editorFocus:false,exec:function(y){this.toggleState();
this.refresh(y);},refresh:function(y){if(y.document){var z=this.state==1?'addClass':'removeClass';y.document.getBody()[z]('cke_show_blocks');}}};q.add('showblocks',{requires:['wysiwygarea'],init:function(y){var z=y.addCommand('showblocks',x);z.canUndo=false;if(y.config.startupOutlineBlocks)z.setState(1);y.addCss(t.replace(u,'background-image: url('+h.getUrl(this.path)+'images/block_').replace(v,'cke_show_blocks ').replace(w,y.lang.dir=='rtl'?'right':'left'));y.ui.addButton('ShowBlocks',{label:y.lang.showBlocks,command:'showblocks'});y.on('mode',function(){if(z.state!=0)z.refresh(y);});y.on('contentDom',function(){if(z.state!=0)z.refresh(y);});}});})();(function(){var t='cke_show_border',u,v=(i.ie6Compat?['.%1 table.%2,','.%1 table.%2 td, .%1 table.%2 th,','{','border : #d3d3d3 1px dotted','}']:['.%1 table.%2,','.%1 table.%2 > tr > td, .%1 table.%2 > tr > th,','.%1 table.%2 > tbody > tr > td, .%1 table.%2 > tbody > tr > th,','.%1 table.%2 > thead > tr > td, .%1 table.%2 > thead > tr > th,','.%1 table.%2 > tfoot > tr > td, .%1 table.%2 > tfoot > tr > th','{','border : #d3d3d3 1px dotted','}']).join('');u=v.replace(/%2/g,t).replace(/%1/g,'cke_show_borders ');var w={preserveState:true,editorFocus:false,readOnly:1,exec:function(x){this.toggleState();this.refresh(x);},refresh:function(x){if(x.document){var y=this.state==1?'addClass':'removeClass';x.document.getBody()[y]('cke_show_borders');}}};q.add('showborders',{requires:['wysiwygarea'],modes:{wysiwyg:1},init:function(x){var y=x.addCommand('showborders',w);y.canUndo=false;if(x.config.startupShowBorders!==false)y.setState(1);x.addCss(u);x.on('mode',function(){if(y.state!=0)y.refresh(x);},null,null,100);x.on('contentDom',function(){if(y.state!=0)y.refresh(x);});x.on('removeFormatCleanup',function(z){var A=z.data;if(x.getCommand('showborders').state==1&&A.is('table')&&(!A.hasAttribute('border')||parseInt(A.getAttribute('border'),10)<=0))A.addClass(t);});},afterInit:function(x){var y=x.dataProcessor,z=y&&y.dataFilter,A=y&&y.htmlFilter;if(z)z.addRules({elements:{table:function(B){var C=B.attributes,D=C['class'],E=parseInt(C.border,10);if(!E||E<=0)C['class']=(D||'')+' '+t;}}});if(A)A.addRules({elements:{table:function(B){var C=B.attributes,D=C['class'];D&&(C['class']=D.replace(t,'').replace(/\s{2}/,' ').replace(/^\s+|\s+$/,''));}}});}});h.on('dialogDefinition',function(x){var y=x.data.name;if(y=='table'||y=='tableProperties'){var z=x.data.definition,A=z.getContents('info'),B=A.get('txtBorder'),C=B.commit;B.commit=l.override(C,function(F){return function(G,H){F.apply(this,arguments);
var I=parseInt(this.getValue(),10);H[!I||I<=0?'addClass':'removeClass'](t);};});var D=z.getContents('advanced'),E=D&&D.get('advCSSClasses');if(E){E.setup=l.override(E.setup,function(F){return function(){F.apply(this,arguments);this.setValue(this.getValue().replace(/cke_show_border/,''));};});E.commit=l.override(E.commit,function(F){return function(G,H){F.apply(this,arguments);if(!parseInt(H.getAttribute('border'),10))H.addClass('cke_show_border');};});}}});})();q.add('sourcearea',{requires:['editingblock'],init:function(t){var u=q.sourcearea,v=h.document.getWindow();t.on('editingBlockReady',function(){var w,x;t.addMode('source',{load:function(y,z){if(j&&i.version<8)y.setStyle('position','relative');t.textarea=w=new o('textarea');w.setAttributes({dir:'ltr',tabIndex:i.webkit?-1:t.tabIndex,role:'textbox','aria-label':t.lang.editorTitle.replace('%1',t.name)});w.addClass('cke_source');w.addClass('cke_enable_context_menu');t.readOnly&&w.setAttribute('readOnly','readonly');var A={width:i.ie7Compat?'99%':'100%',height:'100%',resize:'none',outline:'none','text-align':'left'};if(j){x=function(){w.hide();w.setStyle('height',y.$.clientHeight+'px');w.setStyle('width',y.$.clientWidth+'px');w.show();};t.on('resize',x);v.on('resize',x);setTimeout(x,0);}y.setHtml('');y.append(w);w.setStyles(A);t.fire('ariaWidget',w);w.on('blur',function(){t.focusManager.blur();});w.on('focus',function(){t.focusManager.focus();});t.mayBeDirty=true;this.loadData(z);var B=t.keystrokeHandler;if(B)B.attach(w);setTimeout(function(){t.mode='source';t.fire('mode');},i.gecko||i.webkit?100:0);},loadData:function(y){w.setValue(y);t.fire('dataReady');},getData:function(){return w.getValue();},getSnapshotData:function(){return w.getValue();},unload:function(y){w.clearCustomData();t.textarea=w=null;if(x){t.removeListener('resize',x);v.removeListener('resize',x);}if(j&&i.version<8)y.removeStyle('position');},focus:function(){w.focus();}});});t.on('readOnly',function(){if(t.mode=='source')if(t.readOnly)t.textarea.setAttribute('readOnly','readonly');else t.textarea.removeAttribute('readOnly');});t.addCommand('source',u.commands.source);if(t.ui.addButton)t.ui.addButton('Source',{label:t.lang.source,command:'source'});t.on('mode',function(){t.getCommand('source').setState(t.mode=='source'?1:2);});}});q.sourcearea={commands:{source:{modes:{wysiwyg:1,source:1},editorFocus:false,readOnly:1,exec:function(t){if(t.mode=='wysiwyg')t.fire('saveSnapshot');t.getCommand('source').setState(0);t.setMode(t.mode=='source'?'wysiwyg':'source');
},canUndo:false}}};(function(){q.add('stylescombo',{requires:['richcombo','styles'],init:function(u){var v=u.config,w=u.lang.stylesCombo,x={},y=[],z;function A(B){u.getStylesSet(function(C){if(!y.length){var D,E;for(var F=0,G=C.length;F<G;F++){var H=C[F];E=H.name;D=x[E]=new h.style(H);D._name=E;D._.enterMode=v.enterMode;y.push(D);}y.sort(t);}B&&B();});};u.ui.addRichCombo('Styles',{label:w.label,title:w.panelTitle,className:'cke_styles',panel:{css:u.skin.editor.css.concat(v.contentsCss),multiSelect:true,attributes:{'aria-label':w.panelTitle}},init:function(){z=this;A(function(){var B,C,D,E,F,G;for(F=0,G=y.length;F<G;F++){B=y[F];C=B._name;E=B.type;if(E!=D){z.startGroup(w['panelTitle'+String(E)]);D=E;}z.add(C,B.type==3?C:B.buildPreview(),C);}z.commit();z.onOpen();});},onClick:function(B){u.focus();u.fire('saveSnapshot');var C=x[B],D=u.getSelection(),E=new k.elementPath(D.getStartElement());C[C.checkActive(E)?'remove':'apply'](u.document);u.fire('saveSnapshot');},onRender:function(){u.on('selectionChange',function(B){var C=this.getValue(),D=B.data.path,E=D.elements;for(var F=0,G=E.length,H;F<G;F++){H=E[F];for(var I in x){if(x[I].checkElementRemovable(H,true)){if(I!=C)this.setValue(I);return;}}}this.setValue('');},this);},onOpen:function(){var I=this;if(j||i.webkit)u.focus();var B=u.getSelection(),C=B.getSelectedElement(),D=new k.elementPath(C||B.getStartElement()),E=[0,0,0,0];I.showAll();I.unmarkAll();for(var F in x){var G=x[F],H=G.type;if(G.checkActive(D))I.mark(F);else if(H==3&&!G.checkApplicable(D)){I.hideItem(F);E[H]--;}E[H]++;}if(!E[1])I.hideGroup(w['panelTitle'+String(1)]);if(!E[2])I.hideGroup(w['panelTitle'+String(2)]);if(!E[3])I.hideGroup(w['panelTitle'+String(3)]);},reset:function(){if(z){delete z._.panel;delete z._.list;z._.committed=0;z._.items={};z._.state=2;}x={};y=[];A();}});u.on('instanceReady',function(){A();});}});function t(u,v){var w=u.type,x=v.type;return w==x?0:w==3?-1:x==3?1:x==1?1:-1;};})();q.add('table',{init:function(t){var u=q.table,v=t.lang.table;t.addCommand('table',new h.dialogCommand('table'));t.addCommand('tableProperties',new h.dialogCommand('tableProperties'));t.ui.addButton('Table',{label:v.toolbar,command:'table'});h.dialog.add('table',this.path+'dialogs/table.js');h.dialog.add('tableProperties',this.path+'dialogs/table.js');if(t.addMenuItems)t.addMenuItems({table:{label:v.menu,command:'tableProperties',group:'table',order:5},tabledelete:{label:v.deleteTable,command:'tableDelete',group:'table',order:1}});t.on('doubleclick',function(w){var x=w.data.element;
if(x.is('table'))w.data.dialog='tableProperties';});if(t.contextMenu)t.contextMenu.addListener(function(w,x){if(!w||w.isReadOnly())return null;var y=w.hasAscendant('table',1);if(y)return{tabledelete:2,table:2};return null;});}});(function(){var t=/^(?:td|th)$/;function u(N){var O=N.createBookmarks(),P=N.getRanges(),Q=[],R={};function S(aa){if(Q.length>0)return;if(aa.type==1&&t.test(aa.getName())&&!aa.getCustomData('selected_cell')){o.setMarker(R,aa,'selected_cell',true);Q.push(aa);}};for(var T=0;T<P.length;T++){var U=P[T];if(U.collapsed){var V=U.getCommonAncestor(),W=V.getAscendant('td',true)||V.getAscendant('th',true);if(W)Q.push(W);}else{var X=new k.walker(U),Y;X.guard=S;while(Y=X.next()){var Z=Y.getParent();if(Z&&t.test(Z.getName())&&!Z.getCustomData('selected_cell')){o.setMarker(R,Z,'selected_cell',true);Q.push(Z);}}}}o.clearAllMarkers(R);N.selectBookmarks(O);return Q;};function v(N){var O=0,P=N.length-1,Q={},R,S,T;while(R=N[O++])o.setMarker(Q,R,'delete_cell',true);O=0;while(R=N[O++]){if((S=R.getPrevious())&&!S.getCustomData('delete_cell')||(S=R.getNext())&&!S.getCustomData('delete_cell')){o.clearAllMarkers(Q);return S;}}o.clearAllMarkers(Q);T=N[0].getParent();if(T=T.getPrevious())return T.getLast();T=N[P].getParent();if(T=T.getNext())return T.getChild(0);return null;};function w(N,O){var P=u(N),Q=P[0],R=Q.getAscendant('table'),S=Q.getDocument(),T=P[0].getParent(),U=T.$.rowIndex,V=P[P.length-1],W=V.getParent().$.rowIndex+V.$.rowSpan-1,X=new o(R.$.rows[W]),Y=O?U:W,Z=O?T:X,aa=l.buildTableMap(R),ab=aa[Y],ac=O?aa[Y-1]:aa[Y+1],ad=aa[0].length,ae=S.createElement('tr');for(var af=0;af<ad;af++){var ag;if(ab[af].rowSpan>1&&ac&&ab[af]==ac[af]){ag=ab[af];ag.rowSpan+=1;}else{ag=new o(ab[af]).clone();ag.removeAttribute('rowSpan');!j&&ag.appendBogus();ae.append(ag);ag=ag.$;}af+=ag.colSpan-1;}O?ae.insertBefore(Z):ae.insertAfter(Z);};function x(N){if(N instanceof k.selection){var O=u(N),P=O[0],Q=P.getAscendant('table'),R=l.buildTableMap(Q),S=O[0].getParent(),T=S.$.rowIndex,U=O[O.length-1],V=U.getParent().$.rowIndex+U.$.rowSpan-1,W=[];for(var X=T;X<=V;X++){var Y=R[X],Z=new o(Q.$.rows[X]);for(var aa=0;aa<Y.length;aa++){var ab=new o(Y[aa]),ac=ab.getParent().$.rowIndex;if(ab.$.rowSpan==1)ab.remove();else{ab.$.rowSpan-=1;if(ac==X){var ad=R[X+1];ad[aa-1]?ab.insertAfter(new o(ad[aa-1])):new o(Q.$.rows[X+1]).append(ab,1);}}aa+=ab.$.colSpan-1;}W.push(Z);}var ae=Q.$.rows,af=new o(ae[T]||ae[T-1]||Q.$.parentNode);for(X=W.length;X>=0;X--)x(W[X]);return af;}else if(N instanceof o){Q=N.getAscendant('table');
if(Q.$.rows.length==1)Q.remove();else N.remove();}return null;};function y(N,O){var P=N.getParent(),Q=P.$.cells,R=0;for(var S=0;S<Q.length;S++){var T=Q[S];R+=O?1:T.colSpan;if(T==N.$)break;}return R-1;};function z(N,O){var P=O?Infinity:0;for(var Q=0;Q<N.length;Q++){var R=y(N[Q],O);if(O?R<P:R>P)P=R;}return P;};function A(N,O){var P=u(N),Q=P[0],R=Q.getAscendant('table'),S=z(P,1),T=z(P),U=O?S:T,V=l.buildTableMap(R),W=[],X=[],Y=V.length;for(var Z=0;Z<Y;Z++){W.push(V[Z][U]);var aa=O?V[Z][U-1]:V[Z][U+1];aa&&X.push(aa);}for(Z=0;Z<Y;Z++){var ab;if(W[Z].colSpan>1&&X.length&&X[Z]==W[Z]){ab=W[Z];ab.colSpan+=1;}else{ab=new o(W[Z]).clone();ab.removeAttribute('colSpan');!j&&ab.appendBogus();ab[O?'insertBefore':'insertAfter'].call(ab,new o(W[Z]));ab=ab.$;}Z+=ab.rowSpan-1;}};function B(N){var O=u(N),P=O[0],Q=O[O.length-1],R=P.getAscendant('table'),S=l.buildTableMap(R),T,U,V=[];for(var W=0,X=S.length;W<X;W++)for(var Y=0,Z=S[W].length;Y<Z;Y++){if(S[W][Y]==P.$)T=Y;if(S[W][Y]==Q.$)U=Y;}for(W=T;W<=U;W++)for(Y=0;Y<S.length;Y++){var aa=S[Y],ab=new o(R.$.rows[Y]),ac=new o(aa[W]);if(ac.$.colSpan==1)ac.remove();else ac.$.colSpan-=1;Y+=ac.$.rowSpan-1;if(!ab.$.cells.length)V.push(ab);}var ad=R.$.rows[0]&&R.$.rows[0].cells,ae=new o(ad[T]||(T?ad[T-1]:R.$.parentNode));if(V.length==X)R.remove();return ae;};function C(N){var O=[],P=N[0]&&N[0].getAscendant('table'),Q,R,S,T;for(Q=0,R=N.length;Q<R;Q++)O.push(N[Q].$.cellIndex);O.sort();for(Q=1,R=O.length;Q<R;Q++){if(O[Q]-O[Q-1]>1){S=O[Q-1]+1;break;}}if(!S)S=O[0]>0?O[0]-1:O[O.length-1]+1;var U=P.$.rows;for(Q=0,R=U.length;Q<R;Q++){T=U[Q].cells[S];if(T)break;}return T?new o(T):P.getPrevious();};function D(N,O){var P=N.getStartElement(),Q=P.getAscendant('td',1)||P.getAscendant('th',1);if(!Q)return;var R=Q.clone();if(!j)R.appendBogus();if(O)R.insertBefore(Q);else R.insertAfter(Q);};function E(N){if(N instanceof k.selection){var O=u(N),P=O[0]&&O[0].getAscendant('table'),Q=v(O);for(var R=O.length-1;R>=0;R--)E(O[R]);if(Q)G(Q,true);else if(P)P.remove();}else if(N instanceof o){var S=N.getParent();if(S.getChildCount()==1)S.remove();else N.remove();}};function F(N){var O=N.getBogus();O&&O.remove();N.trim();};function G(N,O){var P=new k.range(N.getDocument());if(!P['moveToElementEdit'+(O?'End':'Start')](N)){P.selectNodeContents(N);P.collapse(O?false:true);}P.select(true);};function H(N,O,P){var Q=N[O];if(typeof P=='undefined')return Q;for(var R=0;Q&&R<Q.length;R++){if(P.is&&Q[R]==P.$)return R;else if(R==P)return new o(Q[R]);}return P.is?-1:null;};function I(N,O,P){var Q=[];
for(var R=0;R<N.length;R++){var S=N[R];if(typeof P=='undefined')Q.push(S[O]);else if(P.is&&S[O]==P.$)return R;else if(R==P)return new o(S[O]);}return typeof P=='undefined'?Q:P.is?-1:null;};function J(N,O,P){var Q=u(N),R;if((O?Q.length!=1:Q.length<2)||(R=N.getCommonAncestor())&&R.type==1&&R.is('table'))return false;var S,T=Q[0],U=T.getAscendant('table'),V=l.buildTableMap(U),W=V.length,X=V[0].length,Y=T.getParent().$.rowIndex,Z=H(V,Y,T);if(O){var aa;try{var ab=parseInt(T.getAttribute('rowspan'),10)||1,ac=parseInt(T.getAttribute('colspan'),10)||1;aa=V[O=='up'?Y-ab:O=='down'?Y+ab:Y][O=='left'?Z-ac:O=='right'?Z+ac:Z];}catch(au){return false;}if(!aa||T.$==aa)return false;Q[O=='up'||O=='left'?'unshift':'push'](new o(aa));}var ad=T.getDocument(),ae=Y,af=0,ag=0,ah=!P&&new k.documentFragment(ad),ai=0;for(var aj=0;aj<Q.length;aj++){S=Q[aj];var ak=S.getParent(),al=S.getFirst(),am=S.$.colSpan,an=S.$.rowSpan,ao=ak.$.rowIndex,ap=H(V,ao,S);ai+=am*an;ag=Math.max(ag,ap-Z+am);af=Math.max(af,ao-Y+an);if(!P){if(F(S),S.getChildren().count()){if(ao!=ae&&al&&!(al.isBlockBoundary&&al.isBlockBoundary({br:1}))){var aq=ah.getLast(k.walker.whitespaces(true));if(aq&&!(aq.is&&aq.is('br')))ah.append('br');}S.moveChildren(ah);}aj?S.remove():S.setHtml('');}ae=ao;}if(!P){ah.moveChildren(T);if(!j)T.appendBogus();if(ag>=X)T.removeAttribute('rowSpan');else T.$.rowSpan=af;if(af>=W)T.removeAttribute('colSpan');else T.$.colSpan=ag;var ar=new k.nodeList(U.$.rows),as=ar.count();for(aj=as-1;aj>=0;aj--){var at=ar.getItem(aj);if(!at.$.cells.length){at.remove();as++;continue;}}return T;}else return af*ag==ai;};function K(N,O){var P=u(N);if(P.length>1)return false;else if(O)return true;var Q=P[0],R=Q.getParent(),S=R.getAscendant('table'),T=l.buildTableMap(S),U=R.$.rowIndex,V=H(T,U,Q),W=Q.$.rowSpan,X,Y,Z,aa;if(W>1){Y=Math.ceil(W/2);Z=Math.floor(W/2);aa=U+Y;var ab=new o(S.$.rows[aa]),ac=H(T,aa),ad;X=Q.clone();for(var ae=0;ae<ac.length;ae++){ad=ac[ae];if(ad.parentNode==ab.$&&ae>V){X.insertBefore(new o(ad));break;}else ad=null;}if(!ad)ab.append(X,true);}else{Z=Y=1;ab=R.clone();ab.insertAfter(R);ab.append(X=Q.clone());var af=H(T,U);for(var ag=0;ag<af.length;ag++)af[ag].rowSpan++;}if(!j)X.appendBogus();Q.$.rowSpan=Y;X.$.rowSpan=Z;if(Y==1)Q.removeAttribute('rowSpan');if(Z==1)X.removeAttribute('rowSpan');return X;};function L(N,O){var P=u(N);if(P.length>1)return false;else if(O)return true;var Q=P[0],R=Q.getParent(),S=R.getAscendant('table'),T=l.buildTableMap(S),U=R.$.rowIndex,V=H(T,U,Q),W=Q.$.colSpan,X,Y,Z;if(W>1){Y=Math.ceil(W/2);
Z=Math.floor(W/2);}else{Z=Y=1;var aa=I(T,V);for(var ab=0;ab<aa.length;ab++)aa[ab].colSpan++;}X=Q.clone();X.insertAfter(Q);if(!j)X.appendBogus();Q.$.colSpan=Y;X.$.colSpan=Z;if(Y==1)Q.removeAttribute('colSpan');if(Z==1)X.removeAttribute('colSpan');return X;};var M={thead:1,tbody:1,tfoot:1,td:1,tr:1,th:1};q.tabletools={init:function(N){var O=N.lang.table;N.addCommand('cellProperties',new h.dialogCommand('cellProperties'));h.dialog.add('cellProperties',this.path+'dialogs/tableCell.js');N.addCommand('tableDelete',{exec:function(P){var Q=P.getSelection(),R=Q&&Q.getStartElement(),S=R&&R.getAscendant('table',1);if(!S)return;var T=S.getParent();if(T.getChildCount()==1&&!T.is('body','td','th'))S=T;var U=new k.range(P.document);U.moveToPosition(S,3);S.remove();U.select();}});N.addCommand('rowDelete',{exec:function(P){var Q=P.getSelection();G(x(Q));}});N.addCommand('rowInsertBefore',{exec:function(P){var Q=P.getSelection();w(Q,true);}});N.addCommand('rowInsertAfter',{exec:function(P){var Q=P.getSelection();w(Q);}});N.addCommand('columnDelete',{exec:function(P){var Q=P.getSelection(),R=B(Q);R&&G(R,true);}});N.addCommand('columnInsertBefore',{exec:function(P){var Q=P.getSelection();A(Q,true);}});N.addCommand('columnInsertAfter',{exec:function(P){var Q=P.getSelection();A(Q);}});N.addCommand('cellDelete',{exec:function(P){var Q=P.getSelection();E(Q);}});N.addCommand('cellMerge',{exec:function(P){G(J(P.getSelection()),true);}});N.addCommand('cellMergeRight',{exec:function(P){G(J(P.getSelection(),'right'),true);}});N.addCommand('cellMergeDown',{exec:function(P){G(J(P.getSelection(),'down'),true);}});N.addCommand('cellVerticalSplit',{exec:function(P){G(K(P.getSelection()));}});N.addCommand('cellHorizontalSplit',{exec:function(P){G(L(P.getSelection()));}});N.addCommand('cellInsertBefore',{exec:function(P){var Q=P.getSelection();D(Q,true);}});N.addCommand('cellInsertAfter',{exec:function(P){var Q=P.getSelection();D(Q);}});if(N.addMenuItems)N.addMenuItems({tablecell:{label:O.cell.menu,group:'tablecell',order:1,getItems:function(){var P=N.getSelection(),Q=u(P);return{tablecell_insertBefore:2,tablecell_insertAfter:2,tablecell_delete:2,tablecell_merge:J(P,null,true)?2:0,tablecell_merge_right:J(P,'right',true)?2:0,tablecell_merge_down:J(P,'down',true)?2:0,tablecell_split_vertical:K(P,true)?2:0,tablecell_split_horizontal:L(P,true)?2:0,tablecell_properties:Q.length>0?2:0};}},tablecell_insertBefore:{label:O.cell.insertBefore,group:'tablecell',command:'cellInsertBefore',order:5},tablecell_insertAfter:{label:O.cell.insertAfter,group:'tablecell',command:'cellInsertAfter',order:10},tablecell_delete:{label:O.cell.deleteCell,group:'tablecell',command:'cellDelete',order:15},tablecell_merge:{label:O.cell.merge,group:'tablecell',command:'cellMerge',order:16},tablecell_merge_right:{label:O.cell.mergeRight,group:'tablecell',command:'cellMergeRight',order:17},tablecell_merge_down:{label:O.cell.mergeDown,group:'tablecell',command:'cellMergeDown',order:18},tablecell_split_horizontal:{label:O.cell.splitHorizontal,group:'tablecell',command:'cellHorizontalSplit',order:19},tablecell_split_vertical:{label:O.cell.splitVertical,group:'tablecell',command:'cellVerticalSplit',order:20},tablecell_properties:{label:O.cell.title,group:'tablecellproperties',command:'cellProperties',order:21},tablerow:{label:O.row.menu,group:'tablerow',order:1,getItems:function(){return{tablerow_insertBefore:2,tablerow_insertAfter:2,tablerow_delete:2};
}},tablerow_insertBefore:{label:O.row.insertBefore,group:'tablerow',command:'rowInsertBefore',order:5},tablerow_insertAfter:{label:O.row.insertAfter,group:'tablerow',command:'rowInsertAfter',order:10},tablerow_delete:{label:O.row.deleteRow,group:'tablerow',command:'rowDelete',order:15},tablecolumn:{label:O.column.menu,group:'tablecolumn',order:1,getItems:function(){return{tablecolumn_insertBefore:2,tablecolumn_insertAfter:2,tablecolumn_delete:2};}},tablecolumn_insertBefore:{label:O.column.insertBefore,group:'tablecolumn',command:'columnInsertBefore',order:5},tablecolumn_insertAfter:{label:O.column.insertAfter,group:'tablecolumn',command:'columnInsertAfter',order:10},tablecolumn_delete:{label:O.column.deleteColumn,group:'tablecolumn',command:'columnDelete',order:15}});if(N.contextMenu)N.contextMenu.addListener(function(P,Q){if(!P||P.isReadOnly())return null;while(P){if(P.getName() in M)return{tablecell:2,tablerow:2,tablecolumn:2};P=P.getParent();}return null;});},getSelectedCells:u};q.add('tabletools',q.tabletools);})();l.buildTableMap=function(t){var u=t.$.rows,v=-1,w=[];for(var x=0;x<u.length;x++){v++;!w[v]&&(w[v]=[]);var y=-1;for(var z=0;z<u[x].cells.length;z++){var A=u[x].cells[z];y++;while(w[v][y])y++;var B=isNaN(A.colSpan)?1:A.colSpan,C=isNaN(A.rowSpan)?1:A.rowSpan;for(var D=0;D<C;D++){if(!w[v+D])w[v+D]=[];for(var E=0;E<B;E++)w[v+D][y+E]=u[x].cells[z];}y+=B-1;}}return w;};q.add('specialchar',{availableLangs:{en:1},init:function(t){var u='specialchar',v=this;h.dialog.add(u,this.path+'dialogs/specialchar.js');t.addCommand(u,{exec:function(){var w=t.langCode;w=v.availableLangs[w]?w:'en';h.scriptLoader.load(h.getUrl(v.path+'lang/'+w+'.js'),function(){l.extend(t.lang.specialChar,v.langEntries[w]);t.openDialog(u);});},modes:{wysiwyg:1},canUndo:false});t.ui.addButton('SpecialChar',{label:t.lang.specialChar.toolbar,command:u});}});p.specialChars=['!','&quot;','#','$','%','&amp;',"'",'(',')','*','+','-','.','/','0','1','2','3','4','5','6','7','8','9',':',';','&lt;','=','&gt;','?','@','A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z','[',']','^','_','`','a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','{','|','}','~','&euro;','&lsquo;','&rsquo;','&ldquo;','&rdquo;','&ndash;','&mdash;','&iexcl;','&cent;','&pound;','&curren;','&yen;','&brvbar;','&sect;','&uml;','&copy;','&ordf;','&laquo;','&raquo;','&not;','&reg;','&macr;','&deg;','&','&sup2;','&sup3;','&acute;','&micro;','&para;','&middot;','&cedil;','&sup1;','&ordm;','&','&frac14;','&frac12;','&frac34;','&iquest;','&Agrave;','&Aacute;','&Acirc;','&Atilde;','&Auml;','&Aring;','&AElig;','&Ccedil;','&Egrave;','&Eacute;','&Ecirc;','&Euml;','&Igrave;','&Iacute;','&Icirc;','&Iuml;','&ETH;','&Ntilde;','&Ograve;','&Oacute;','&Ocirc;','&Otilde;','&Ouml;','&times;','&Oslash;','&Ugrave;','&Uacute;','&Ucirc;','&Uuml;','&Yacute;','&THORN;','&szlig;','&agrave;','&aacute;','&acirc;','&atilde;','&auml;','&aring;','&aelig;','&ccedil;','&egrave;','&eacute;','&ecirc;','&euml;','&igrave;','&iacute;','&icirc;','&iuml;','&eth;','&ntilde;','&ograve;','&oacute;','&ocirc;','&otilde;','&ouml;','&divide;','&oslash;','&ugrave;','&uacute;','&ucirc;','&uuml;','&uuml;','&yacute;','&thorn;','&yuml;','&OElig;','&oelig;','&#372;','&#374','&#373','&#375;','&sbquo;','&#8219;','&bdquo;','&hellip;','&trade;','&#9658;','&bull;','&rarr;','&rArr;','&hArr;','&diams;','&asymp;'];
(function(){var t={editorFocus:false,modes:{wysiwyg:1,source:1}},u={exec:function(x){x.container.focusNext(true,x.tabIndex);}},v={exec:function(x){x.container.focusPrevious(true,x.tabIndex);}};function w(x){return{editorFocus:false,canUndo:false,modes:{wysiwyg:1},exec:function(y){if(y.focusManager.hasFocus){var z=y.getSelection(),A=z.getCommonAncestor(),B;if(B=A.getAscendant('td',true)||A.getAscendant('th',true)){var C=new k.range(y.document),D=l.tryThese(function(){var K=B.getParent(),L=K.$.cells[B.$.cellIndex+(x?-1:1)];L.parentNode.parentNode;return L;},function(){var K=B.getParent(),L=K.getAscendant('table'),M=L.$.rows[K.$.rowIndex+(x?-1:1)];return M.cells[x?M.cells.length-1:0];});if(!(D||x)){var E=B.getAscendant('table').$,F=B.getParent().$.cells,G=new o(E.insertRow(-1),y.document);for(var H=0,I=F.length;H<I;H++){var J=G.append(new o(F[H],y.document).clone(false,false));!j&&J.appendBogus();}C.moveToElementEditStart(G);}else if(D){D=new o(D);C.moveToElementEditStart(D);if(!(C.checkStartOfBlock()&&C.checkEndOfBlock()))C.selectNodeContents(D);}else return true;C.select(true);return true;}}return false;}};};q.add('tab',{requires:['keystrokes'],init:function(x){var y=x.config.enableTabKeyTools!==false,z=x.config.tabSpaces||0,A='';while(z--)A+='\xa0';if(A)x.on('key',function(B){if(B.data.keyCode==9){x.insertHtml(A);B.cancel();}});if(y)x.on('key',function(B){if(B.data.keyCode==9&&x.execCommand('selectNextCell')||B.data.keyCode==2000+9&&x.execCommand('selectPreviousCell'))B.cancel();});if(i.webkit||i.gecko)x.on('key',function(B){var C=B.data.keyCode;if(C==9&&!A){B.cancel();x.execCommand('blur');}if(C==2000+9){x.execCommand('blurBack');B.cancel();}});x.addCommand('blur',l.extend(u,t));x.addCommand('blurBack',l.extend(v,t));x.addCommand('selectNextCell',w());x.addCommand('selectPreviousCell',w(true));}});})();o.prototype.focusNext=function(t,u){var D=this;var v=D.$,w=u===undefined?D.getTabIndex():u,x,y,z,A,B,C;if(w<=0){B=D.getNextSourceNode(t,1);while(B){if(B.isVisible()&&B.getTabIndex()===0){z=B;break;}B=B.getNextSourceNode(false,1);}}else{B=D.getDocument().getBody().getFirst();while(B=B.getNextSourceNode(false,1)){if(!x)if(!y&&B.equals(D)){y=true;if(t){if(!(B=B.getNextSourceNode(true,1)))break;x=1;}}else if(y&&!D.contains(B))x=1;if(!B.isVisible()||(C=B.getTabIndex())<0)continue;if(x&&C==w){z=B;break;}if(C>w&&(!z||!A||C<A)){z=B;A=C;}else if(!z&&C===0){z=B;A=C;}}}if(z)z.focus();};o.prototype.focusPrevious=function(t,u){var D=this;var v=D.$,w=u===undefined?D.getTabIndex():u,x,y,z,A=0,B,C=D.getDocument().getBody().getLast();
while(C=C.getPreviousSourceNode(false,1)){if(!x)if(!y&&C.equals(D)){y=true;if(t){if(!(C=C.getPreviousSourceNode(true,1)))break;x=1;}}else if(y&&!D.contains(C))x=1;if(!C.isVisible()||(B=C.getTabIndex())<0)continue;if(w<=0){if(x&&B===0){z=C;break;}if(B>A){z=C;A=B;}}else{if(x&&B==w){z=C;break;}if(B<w&&(!z||B>A)){z=C;A=B;}}}if(z)z.focus();};(function(){q.add('templates',{requires:['dialog'],init:function(v){h.dialog.add('templates',h.getUrl(this.path+'dialogs/templates.js'));v.addCommand('templates',new h.dialogCommand('templates'));v.ui.addButton('Templates',{label:v.lang.templates.button,command:'templates'});}});var t={},u={};h.addTemplates=function(v,w){t[v]=w;};h.getTemplates=function(v){return t[v];};h.loadTemplates=function(v,w){var x=[];for(var y=0,z=v.length;y<z;y++){if(!u[v[y]]){x.push(v[y]);u[v[y]]=1;}}if(x.length)h.scriptLoader.load(x,w);else setTimeout(w,0);};})();p.templates_files=[h.getUrl('plugins/templates/templates/default.js')];p.templates_replaceContent=true;(function(){var t=function(){this.toolbars=[];this.focusCommandExecuted=false;};t.prototype.focus=function(){for(var v=0,w;w=this.toolbars[v++];)for(var x=0,y;y=w.items[x++];){if(y.focus){y.focus();return;}}};var u={toolbarFocus:{modes:{wysiwyg:1,source:1},readOnly:1,exec:function(v){if(v.toolbox){v.toolbox.focusCommandExecuted=true;if(j||i.air)setTimeout(function(){v.toolbox.focus();},100);else v.toolbox.focus();}}}};q.add('toolbar',{init:function(v){var w,x=function(y,z){var A,B,C=v.lang.dir=='rtl',D=v.config.toolbarGroupCycling;D=D===undefined||D;switch(z){case 9:case 2000+9:while(!B||!B.items.length){B=z==9?(B?B.next:y.toolbar.next)||v.toolbox.toolbars[0]:(B?B.previous:y.toolbar.previous)||v.toolbox.toolbars[v.toolbox.toolbars.length-1];if(B.items.length){y=B.items[w?B.items.length-1:0];while(y&&!y.focus){y=w?y.previous:y.next;if(!y)B=0;}}}if(y)y.focus();return false;case C?37:39:case 40:A=y;do{A=A.next;if(!A&&D)A=y.toolbar.items[0];}while(A&&!A.focus)if(A)A.focus();else x(y,9);return false;case C?39:37:case 38:A=y;do{A=A.previous;if(!A&&D)A=y.toolbar.items[y.toolbar.items.length-1];}while(A&&!A.focus)if(A)A.focus();else{w=1;x(y,2000+9);w=0;}return false;case 27:v.focus();return false;case 13:case 32:y.execute();return false;}return true;};v.on('themeSpace',function(y){if(y.data.space==v.config.toolbarLocation){v.toolbox=new t();var z=l.getNextId(),A=['<div class="cke_toolbox" role="group" aria-labelledby="',z,'" onmousedown="return false;"'],B=v.config.toolbarStartupExpanded!==false,C;
A.push(B?'>':' style="display:none">');A.push('<span id="',z,'" class="cke_voice_label">',v.lang.toolbars,'</span>');var D=v.toolbox.toolbars,E=v.config.toolbar instanceof Array?v.config.toolbar:v.config['toolbar_'+v.config.toolbar];for(var F=0;F<E.length;F++){var G,H=0,I,J=E[F],K;if(!J)continue;if(C){A.push('</div>');C=0;}if(J==='/'){A.push('<div class="cke_break"></div>');continue;}K=J.items||J;for(var L=0;L<K.length;L++){var M,N=K[L],O;M=v.ui.create(N);if(M){O=M.canGroup!==false;if(!H){G=l.getNextId();H={id:G,items:[]};I=J.name&&(v.lang.toolbarGroups[J.name]||J.name);A.push('<span id="',G,'" class="cke_toolbar"',I?' aria-labelledby="'+G+'_label"':'',' role="toolbar">');I&&A.push('<span id="',G,'_label" class="cke_voice_label">',I,'</span>');A.push('<span class="cke_toolbar_start"></span>');var P=D.push(H)-1;if(P>0){H.previous=D[P-1];H.previous.next=H;}}if(O){if(!C){A.push('<span class="cke_toolgroup" role="presentation">');C=1;}}else if(C){A.push('</span>');C=0;}var Q=M.render(v,A);P=H.items.push(Q)-1;if(P>0){Q.previous=H.items[P-1];Q.previous.next=Q;}Q.toolbar=H;Q.onkey=x;Q.onfocus=function(){if(!v.toolbox.focusCommandExecuted)v.focus();};}}if(C){A.push('</span>');C=0;}if(H)A.push('<span class="cke_toolbar_end"></span></span>');}A.push('</div>');if(v.config.toolbarCanCollapse){var R=l.addFunction(function(){v.execCommand('toolbarCollapse');});v.on('destroy',function(){l.removeFunction(R);});var S=l.getNextId();v.addCommand('toolbarCollapse',{readOnly:1,exec:function(T){var U=h.document.getById(S),V=U.getPrevious(),W=T.getThemeSpace('contents'),X=V.getParent(),Y=parseInt(W.$.style.height,10),Z=X.$.offsetHeight,aa=!V.isVisible();if(!aa){V.hide();U.addClass('cke_toolbox_collapser_min');U.setAttribute('title',T.lang.toolbarExpand);}else{V.show();U.removeClass('cke_toolbox_collapser_min');U.setAttribute('title',T.lang.toolbarCollapse);}U.getFirst().setText(aa?'▲':'◀');var ab=X.$.offsetHeight-Z;W.setStyle('height',Y-ab+'px');T.fire('resize');},modes:{wysiwyg:1,source:1}});A.push('<a title="'+(B?v.lang.toolbarCollapse:v.lang.toolbarExpand)+'" id="'+S+'" tabIndex="-1" class="cke_toolbox_collapser');if(!B)A.push(' cke_toolbox_collapser_min');A.push('" onclick="CKEDITOR.tools.callFunction('+R+')">','<span>&#9650;</span>','</a>');}y.data.html+=A.join('');}});v.on('destroy',function(){var y,z=0,A,B,C;y=this.toolbox.toolbars;for(;z<y.length;z++){B=y[z].items;for(A=0;A<B.length;A++){C=B[A];if(C.clickFn)l.removeFunction(C.clickFn);if(C.keyDownFn)l.removeFunction(C.keyDownFn);
}}});v.addCommand('toolbarFocus',u.toolbarFocus);v.ui.add('-',h.UI_SEPARATOR,{});v.ui.addHandler(h.UI_SEPARATOR,{create:function(){return{render:function(y,z){z.push('<span class="cke_separator" role="separator"></span>');return{};}};}});}});})();h.UI_SEPARATOR='separator';p.toolbarLocation='top';p.toolbar_Basic=[['Bold','Italic','-','NumberedList','BulletedList','-','Link','Unlink','-','About']];p.toolbar_Full=[{name:'document',items:['Source','-','Save','NewPage','DocProps','Preview','Print','-','Templates']},{name:'clipboard',items:['Cut','Copy','Paste','PasteText','PasteFromWord','-','Undo','Redo']},{name:'editing',items:['Find','Replace','-','SelectAll','-','SpellChecker','Scayt']},{name:'forms',items:['Form','Checkbox','Radio','TextField','Textarea','Select','Button','ImageButton','HiddenField']},'/',{name:'basicstyles',items:['Bold','Italic','Underline','Strike','Subscript','Superscript','-','RemoveFormat']},{name:'paragraph',items:['NumberedList','BulletedList','-','Outdent','Indent','-','Blockquote','CreateDiv','-','JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock','-','BidiLtr','BidiRtl']},{name:'links',items:['Link','Unlink','Anchor']},{name:'insert',items:['Image','Flash','Table','HorizontalRule','Smiley','SpecialChar','PageBreak','Iframe']},'/',{name:'styles',items:['Styles','Format','Font','FontSize']},{name:'colors',items:['TextColor','BGColor']},{name:'tools',items:['Maximize','ShowBlocks','-','About']}];p.toolbar='Full';p.toolbarCanCollapse=true;(function(){q.add('undo',{requires:['selection','wysiwygarea'],init:function(z){var A=new v(z),B=z.addCommand('undo',{exec:function(){if(A.undo()){z.selectionChange();this.fire('afterUndo');}},state:0,canUndo:false}),C=z.addCommand('redo',{exec:function(){if(A.redo()){z.selectionChange();this.fire('afterRedo');}},state:0,canUndo:false});A.onChange=function(){B.setState(A.undoable()?2:0);C.setState(A.redoable()?2:0);};function D(E){if(A.enabled&&E.data.command.canUndo!==false)A.save();};z.on('beforeCommandExec',D);z.on('afterCommandExec',D);z.on('saveSnapshot',function(){A.save();});z.on('contentDom',function(){z.document.on('keydown',function(E){if(!E.data.$.ctrlKey&&!E.data.$.metaKey)A.type(E);});});z.on('beforeModeUnload',function(){z.mode=='wysiwyg'&&A.save(true);});z.on('mode',function(){A.enabled=z.readOnly?false:z.mode=='wysiwyg';A.onChange();});z.ui.addButton('Undo',{label:z.lang.undo,command:'undo'});z.ui.addButton('Redo',{label:z.lang.redo,command:'redo'});z.resetUndo=function(){A.reset();
z.fire('saveSnapshot');};z.on('updateSnapshot',function(){if(A.currentImage&&new t(z).equals(A.currentImage))setTimeout(function(){A.update();},0);});}});q.undo={};var t=q.undo.Image=function(z){this.editor=z;z.fire('beforeUndoImage');var A=z.getSnapshot(),B=A&&z.getSelection();j&&A&&(A=A.replace(/\s+data-cke-expando=".*?"/g,''));this.contents=A;this.bookmarks=B&&B.createBookmarks2(true);z.fire('afterUndoImage');},u=/\b(?:href|src|name)="[^"]*?"/gi;t.prototype={equals:function(z,A){var B=this.contents,C=z.contents;if(j&&(i.ie7Compat||i.ie6Compat)){B=B.replace(u,'');C=C.replace(u,'');}if(B!=C)return false;if(A)return true;var D=this.bookmarks,E=z.bookmarks;if(D||E){if(!D||!E||D.length!=E.length)return false;for(var F=0;F<D.length;F++){var G=D[F],H=E[F];if(G.startOffset!=H.startOffset||G.endOffset!=H.endOffset||!l.arrayCompare(G.start,H.start)||!l.arrayCompare(G.end,H.end))return false;}}return true;}};function v(z){this.editor=z;this.reset();};var w={8:1,46:1},x={16:1,17:1,18:1},y={37:1,38:1,39:1,40:1};v.prototype={type:function(z){var A=z&&z.data.getKey(),B=A in x,C=A in w,D=this.lastKeystroke in w,E=C&&A==this.lastKeystroke,F=A in y,G=this.lastKeystroke in y,H=!C&&!F,I=C&&!E,J=!(B||this.typing)||H&&(D||G);if(J||I){var K=new t(this.editor);l.setTimeout(function(){var M=this;var L=M.editor.getSnapshot();if(j)L=L.replace(/\s+data-cke-expando=".*?"/g,'');if(K.contents!=L){M.typing=true;if(!M.save(false,K,false))M.snapshots.splice(M.index+1,M.snapshots.length-M.index-1);M.hasUndo=true;M.hasRedo=false;M.typesCount=1;M.modifiersCount=1;M.onChange();}},0,this);}this.lastKeystroke=A;if(C){this.typesCount=0;this.modifiersCount++;if(this.modifiersCount>25){this.save(false,null,false);this.modifiersCount=1;}}else if(!F){this.modifiersCount=0;this.typesCount++;if(this.typesCount>25){this.save(false,null,false);this.typesCount=1;}}},reset:function(){var z=this;z.lastKeystroke=0;z.snapshots=[];z.index=-1;z.limit=z.editor.config.undoStackSize||20;z.currentImage=null;z.hasUndo=false;z.hasRedo=false;z.resetType();},resetType:function(){var z=this;z.typing=false;delete z.lastKeystroke;z.typesCount=0;z.modifiersCount=0;},fireChange:function(){var z=this;z.hasUndo=!!z.getNextImage(true);z.hasRedo=!!z.getNextImage(false);z.resetType();z.onChange();},save:function(z,A,B){var D=this;var C=D.snapshots;if(!A)A=new t(D.editor);if(A.contents===false)return false;if(D.currentImage&&A.equals(D.currentImage,z))return false;C.splice(D.index+1,C.length-D.index-1);if(C.length==D.limit)C.shift();
D.index=C.push(A)-1;D.currentImage=A;if(B!==false)D.fireChange();return true;},restoreImage:function(z){var B=this;B.editor.loadSnapshot(z.contents);if(z.bookmarks)B.editor.getSelection().selectBookmarks(z.bookmarks);else if(j){var A=B.editor.document.getBody().$.createTextRange();A.collapse(true);A.select();}B.index=z.index;B.update();B.fireChange();},getNextImage:function(z){var E=this;var A=E.snapshots,B=E.currentImage,C,D;if(B)if(z)for(D=E.index-1;D>=0;D--){C=A[D];if(!B.equals(C,true)){C.index=D;return C;}}else for(D=E.index+1;D<A.length;D++){C=A[D];if(!B.equals(C,true)){C.index=D;return C;}}return null;},redoable:function(){return this.enabled&&this.hasRedo;},undoable:function(){return this.enabled&&this.hasUndo;},undo:function(){var A=this;if(A.undoable()){A.save(true);var z=A.getNextImage(true);if(z)return A.restoreImage(z),true;}return false;},redo:function(){var A=this;if(A.redoable()){A.save(true);if(A.redoable()){var z=A.getNextImage(false);if(z)return A.restoreImage(z),true;}}return false;},update:function(){var z=this;z.snapshots.splice(z.index,1,z.currentImage=new t(z.editor));}};})();(function(){var t=/(^|<body\b[^>]*>)\s*<(p|div|address|h\d|center|pre)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\2>)?\s*(?=$|<\/body>)/gi,u=k.walker.whitespaces(true);function v(J){return J.isBlockBoundary()&&m.$empty[J.getName()];};function w(J){return function(K){if(this.mode=='wysiwyg'){this.focus();this.fire('saveSnapshot');J.call(this,K.data);l.setTimeout(function(){this.fire('saveSnapshot');},0,this);}};};function x(J){var P=this;if(P.dataProcessor)J=P.dataProcessor.toHtml(J);var K=P.getSelection(),L=K.getRanges()[0];if(L.checkReadOnly())return;if(j){var M=K.isLocked;if(M)K.unlock();var N=K.getNative();if(N.type=='Control')N.clear();else if(K.getType()==2){L=K.getRanges()[0];var O=L&&L.endContainer;if(O&&O.type==1&&O.getAttribute('contenteditable')=='false'&&L.checkBoundaryOfElement(O,2)){L.setEndAfter(L.endContainer);L.deleteContents();}}try{N.createRange().pasteHTML(J);}catch(Q){}if(M)P.getSelection().lock();}else P.document.$.execCommand('inserthtml',false,J);if(i.webkit){K=P.getSelection();K.scrollIntoView();}};function y(J){var K=this.getSelection(),L=K.getStartElement().hasAscendant('pre',true)?2:this.config.enterMode,M=L==2,N=l.htmlEncode(J.replace(/\r\n|\r/g,'\n'));N=N.replace(/^[ \t]+|[ \t]+$/g,function(T,U,V){if(T.length==1)return '&nbsp;';else if(!U)return l.repeat('&nbsp;',T.length-1)+' ';else return ' '+l.repeat('&nbsp;',T.length-1);
});N=N.replace(/[ \t]{2,}/g,function(T){return l.repeat('&nbsp;',T.length-1)+' ';});var O=L==1?'p':'div';if(!M)N=N.replace(/(\n{2})([\s\S]*?)(?:$|\1)/g,function(T,U,V){return '<'+O+'>'+V+'</'+O+'>';});N=N.replace(/\n/g,'<br>');if(!(M||j))N=N.replace(new RegExp('<br>(?=</'+O+'>)'),function(T){return l.repeat(T,2);});if(i.gecko||i.webkit){var P=new k.elementPath(K.getStartElement()),Q=[];for(var R=0;R<P.elements.length;R++){var S=P.elements[R].getName();if(S in m.$inline)Q.unshift(P.elements[R].getOuterHtml().match(/^<.*?>/));else if(S in m.$block)break;}N=Q.join('')+N;}x.call(this,N);};function z(J){var K=this.getSelection(),L=K.getRanges(),M=J.getName(),N=m.$block[M],O=K.isLocked;if(O)K.unlock();var P,Q,R,S;for(var T=L.length-1;T>=0;T--){P=L[T];if(!P.checkReadOnly()){P.deleteContents(1);Q=!T&&J||J.clone(1);var U,V;if(N)while((U=P.getCommonAncestor(0,1))&&(V=m[U.getName()])&&!(V&&V[M])){if(U.getName() in m.span)P.splitElement(U);else if(P.checkStartOfBlock()&&P.checkEndOfBlock()){P.setStartBefore(U);P.collapse(true);U.remove();}else P.splitBlock();}P.insertNode(Q);if(!R)R=Q;}}if(R){P.moveToPosition(R,4);if(N){var W=R.getNext(u),X=W&&W.type==1&&W.getName();if(X&&m.$block[X]&&m[X]['#'])P.moveToElementEditStart(W);}}K.selectRanges([P]);if(O)this.getSelection().lock();};function A(J){if(!J.checkDirty())setTimeout(function(){J.resetDirty();},0);};var B=k.walker.whitespaces(true),C=k.walker.bookmark(false,true);function D(J){return B(J)&&C(J);};function E(J){return J.type==3&&l.trim(J.getText()).match(/^(?:&nbsp;|\xa0)$/);};function F(J){if(J.isLocked){J.unlock();setTimeout(function(){J.lock();},0);}};function G(J){return J.getOuterHtml().match(t);};B=k.walker.whitespaces(true);function H(J){var K=J.window,L=J.document,M=J.document.getBody(),N=M.getFirst(),O=M.getChildren().count();if(!O||O==1&&N.type==1&&N.hasAttribute('_moz_editor_bogus_node')){A(J);var P=J.element.getDocument(),Q=P.getDocumentElement(),R=Q.$.scrollTop,S=Q.$.scrollLeft,T=L.$.createEvent('KeyEvents');T.initKeyEvent('keypress',true,true,K.$,false,false,false,false,0,32);L.$.dispatchEvent(T);if(R!=Q.$.scrollTop||S!=Q.$.scrollLeft)P.getWindow().$.scrollTo(S,R);O&&M.getFirst().remove();L.getBody().appendBogus();var U=new k.range(L);U.setStartAt(M,1);U.select();}};function I(J){var K=J.editor,L=J.data.path,M=L.blockLimit,N=J.data.selection,O=N.getRanges()[0],P=K.document.getBody(),Q=K.config.enterMode;if(i.gecko){H(K);var R=L.block||L.blockLimit,S=R&&R.getLast(D);if(R&&R.isBlockBoundary()&&!(S&&S.type==1&&S.isBlockBoundary())&&!R.is('pre')&&!R.getBogus()){K.fire('updateSnapshot');
A(K);R.appendBogus();}}if(K.config.autoParagraph!==false&&Q!=2&&O.collapsed&&M.getName()=='body'&&!L.block){K.fire('updateSnapshot');A(K);j&&F(N);var T=O.fixBlock(true,K.config.enterMode==3?'div':'p');if(j){var U=T.getFirst(D);U&&E(U)&&U.remove();}if(G(T)){var V=T.getNext(B);if(V&&V.type==1&&!v(V)){O.moveToElementEditStart(V);T.remove();}else{V=T.getPrevious(B);if(V&&V.type==1&&!v(V)){O.moveToElementEditEnd(V);T.remove();}}}O.select();J.cancel();}var W=new k.range(K.document);W.moveToElementEditEnd(K.document.getBody());var X=new k.elementPath(W.startContainer);if(!X.blockLimit.is('body')){K.fire('updateSnapshot');A(K);j&&F(N);var Y;if(Q!=2)Y=P.append(K.document.createElement(Q==1?'p':'div'));else Y=P;if(!j)Y.appendBogus();}};q.add('wysiwygarea',{requires:['editingblock'],init:function(J){var K=J.config.enterMode!=2&&J.config.autoParagraph!==false?J.config.enterMode==3?'div':'p':false,L=J.lang.editorTitle.replace('%1',J.name),M;J.on('editingBlockReady',function(){var S,T,U,V,W,X,Y=i.isCustomDomain(),Z=function(ac){if(T)T.remove();var ad='document.open();'+(Y?'document.domain="'+document.domain+'";':'')+'document.close();';ad=i.air?'javascript:void(0)':j?'javascript:void(function(){'+encodeURIComponent(ad)+'}())':'';T=o.createFromHtml('<iframe style="width:100%;height:100%" frameBorder="0" title="'+L+'"'+' src="'+ad+'"'+' tabIndex="'+(i.webkit?-1:J.tabIndex)+'"'+' allowTransparency="true"'+'></iframe>');if(document.location.protocol=='chrome:')h.event.useCapture=true;T.on('load',function(ah){W=1;ah.removeListener();var ai=T.getFrameDocument();ai.write(ac);i.air&&ab(ai.getWindow().$);});if(document.location.protocol=='chrome:')h.event.useCapture=false;var ae=J.element,af=i.gecko&&!ae.isVisible(),ag={};if(af){ae.show();ag={position:ae.getStyle('position'),top:ae.getStyle('top')};ae.setStyles({position:'absolute',top:'-3000px'});}S.append(T);if(af)setTimeout(function(){ae.hide();ae.setStyles(ag);},1000);};M=l.addFunction(ab);var aa='<script id="cke_actscrpt" type="text/javascript" data-cke-temp="1">'+(Y?'document.domain="'+document.domain+'";':'')+'window.parent.CKEDITOR.tools.callFunction( '+M+', window );'+'</script>';function ab(ac){if(!W)return;W=0;J.fire('ariaWidget',T);var ad=ac.document,ae=ad.body,af=ad.getElementById('cke_actscrpt');af&&af.parentNode.removeChild(af);ae.spellcheck=!J.config.disableNativeSpellChecker;var ag=!J.readOnly;if(j){ae.hideFocus=true;ae.disabled=true;ae.contentEditable=ag;ae.removeAttribute('disabled');}else setTimeout(function(){if(i.gecko&&i.version>=10900||i.opera)ad.$.body.contentEditable=ag;
else if(i.webkit)ad.$.body.parentNode.contentEditable=ag;else ad.$.designMode=ag?'off':'on';},0);ag&&i.gecko&&l.setTimeout(H,0,null,J);ac=J.window=new k.window(ac);ad=J.document=new n(ad);ag&&ad.on('dblclick',function(am){var an=am.data.getTarget(),ao={element:an,dialog:''};J.fire('doubleclick',ao);ao.dialog&&J.openDialog(ao.dialog);});j&&ad.on('click',function(am){var an=am.data.getTarget();if(an.is('input')){var ao=an.getAttribute('type');if(ao=='submit'||ao=='reset')am.data.preventDefault();}});if(!(j||i.opera))ad.on('mousedown',function(am){var an=am.data.getTarget();if(an.is('img','hr','input','textarea','select'))J.getSelection().selectElement(an);});if(i.gecko)ad.on('mouseup',function(am){if(am.data.$.button==2){var an=am.data.getTarget();if(!an.getOuterHtml().replace(t,'')){var ao=new k.range(ad);ao.moveToElementEditStart(an);ao.select(true);}}});ad.on('click',function(am){am=am.data;if(am.getTarget().is('a')&&am.$.button!=2)am.preventDefault();});if(i.webkit){ad.on('mousedown',function(){aj=1;});ad.on('click',function(am){if(am.data.getTarget().is('input','select'))am.data.preventDefault();});ad.on('mouseup',function(am){if(am.data.getTarget().is('input','textarea'))am.data.preventDefault();});}if(ag&&j&&ad.$.compatMode=='CSS1Compat'||i.gecko||i.opera){var ah=ad.getDocumentElement();ah.on('mousedown',function(am){if(am.data.getTarget().equals(ah)){if(i.gecko&&i.version>=10900)Q();R.focus();}});}var ai=j?T:ac;ai.on('blur',function(){J.focusManager.blur();});var aj;ai.on('focus',function(){var am=J.document;if(ag&&i.gecko&&i.version>=10900)Q();else if(i.opera)am.getBody().focus();else if(i.webkit)if(!aj){J.document.getDocumentElement().focus();aj=1;}J.focusManager.focus();});var ak=J.keystrokeHandler;ak.blockedKeystrokes[8]=!ag;ak.attach(ad);if(j){ad.getDocumentElement().addClass(ad.$.compatMode);ag&&ad.on('keydown',function(am){var an=am.data.getKeystroke();if(an in {8:1,46:1}){var ao=J.getSelection(),ap=ao.getSelectedElement();if(ap){J.fire('saveSnapshot');var aq=ao.getRanges()[0].createBookmark();ap.remove();ao.selectBookmarks([aq]);J.fire('saveSnapshot');am.data.preventDefault();}}});if(ad.$.compatMode=='CSS1Compat'){var al={33:1,34:1};ad.on('keydown',function(am){if(am.data.getKeystroke() in al)setTimeout(function(){J.getSelection().scrollIntoView();},0);});}J.config.enterMode!=1&&ad.on('selectionchange',function(){var am=ad.getBody(),an=J.getSelection().getRanges()[0];if(am.getHtml().match(/^<p>&nbsp;<\/p>$/i)&&an.startContainer.equals(am))setTimeout(function(){an=J.getSelection().getRanges()[0];
if(!an.startContainer.equals('body')){am.getFirst().remove(1);an.moveToElementEditEnd(am);an.select(1);}},0);});}if(J.contextMenu)J.contextMenu.addTarget(ad,J.config.browserContextMenuOnCtrl!==false);setTimeout(function(){J.fire('contentDom');if(X){J.mode='wysiwyg';J.fire('mode');X=false;}U=false;if(V){J.focus();V=false;}setTimeout(function(){J.fire('dataReady');},0);try{J.document.$.execCommand('enableInlineTableEditing',false,!J.config.disableNativeTableHandles);}catch(am){}if(J.config.disableObjectResizing)try{J.document.$.execCommand('enableObjectResizing',false,false);}catch(an){J.document.getBody().on(j?'resizestart':'resize',function(ao){ao.data.preventDefault();});}if(j)setTimeout(function(){if(J.document){var ao=J.document.$.body;ao.runtimeStyle.marginBottom='0px';ao.runtimeStyle.marginBottom='';}},1000);},0);};J.addMode('wysiwyg',{load:function(ac,ad,ae){S=ac;if(j&&i.quirks)ac.setStyle('position','relative');J.mayBeDirty=true;X=true;if(ae)this.loadSnapshotData(ad);else this.loadData(ad);},loadData:function(ac){U=true;J._.dataStore={id:1};var ad=J.config,ae=ad.fullPage,af=ad.docType,ag='<style type="text/css" data-cke-temp="1">'+J._.styles.join('\n')+'</style>';!ae&&(ag=l.buildStyleHtml(J.config.contentsCss)+ag);var ah=ad.baseHref?'<base href="'+ad.baseHref+'" data-cke-temp="1" />':'';if(ae)ac=ac.replace(/<!DOCTYPE[^>]*>/i,function(ai){J.docType=af=ai;return '';}).replace(/<\?xml\s[^\?]*\?>/i,function(ai){J.xmlDeclaration=ai;return '';});if(J.dataProcessor)ac=J.dataProcessor.toHtml(ac,K);if(ae){if(!/<body[\s|>]/.test(ac))ac='<body>'+ac;if(!/<html[\s|>]/.test(ac))ac='<html>'+ac+'</html>';if(!/<head[\s|>]/.test(ac))ac=ac.replace(/<html[^>]*>/,'$&<head><title></title></head>');else if(!/<title[\s|>]/.test(ac))ac=ac.replace(/<head[^>]*>/,'$&<title></title>');ah&&(ac=ac.replace(/<head>/,'$&'+ah));ac=ac.replace(/<\/head\s*>/,ag+'$&');ac=af+ac;}else ac=ad.docType+'<html dir="'+ad.contentsLangDirection+'"'+' lang="'+(ad.contentsLanguage||J.langCode)+'">'+'<head>'+'<title>'+L+'</title>'+ah+ag+'</head>'+'<body'+(ad.bodyId?' id="'+ad.bodyId+'"':'')+(ad.bodyClass?' class="'+ad.bodyClass+'"':'')+'>'+ac+'</html>';if(i.gecko)ac=ac.replace(/<br \/>(?=\s*<\/(:?html|body)>)/,'$&<br type="_moz" />');ac+=aa;this.onDispose();Z(ac);},getData:function(){var ac=J.config,ad=ac.fullPage,ae=ad&&J.docType,af=ad&&J.xmlDeclaration,ag=T.getFrameDocument(),ah=ad?ag.getDocumentElement().getOuterHtml():ag.getBody().getHtml();if(i.gecko)ah=ah.replace(/<br>(?=\s*(:?$|<\/body>))/,'');
if(J.dataProcessor)ah=J.dataProcessor.toDataFormat(ah,K);if(ac.ignoreEmptyParagraph)ah=ah.replace(t,function(ai,aj){return aj;});if(af)ah=af+'\n'+ah;if(ae)ah=ae+'\n'+ah;return ah;},getSnapshotData:function(){return T.getFrameDocument().getBody().getHtml();},loadSnapshotData:function(ac){T.getFrameDocument().getBody().setHtml(ac);},onDispose:function(){if(!J.document)return;J.document.getDocumentElement().clearCustomData();J.document.getBody().clearCustomData();J.window.clearCustomData();J.document.clearCustomData();T.clearCustomData();T.remove();},unload:function(ac){this.onDispose();J.window=J.document=T=S=V=null;J.fire('contentDomUnload');},focus:function(){var ac=J.window;if(U)V=true;else if(i.opera&&J.document){var ad=J.window.$.frameElement;ad.blur(),ad.focus();J.document.getBody().focus();J.selectionChange();}else if(!i.opera&&ac){i.air?setTimeout(function(){ac.focus();},0):ac.focus();J.selectionChange();}}});J.on('insertHtml',w(x),null,null,20);J.on('insertElement',w(z),null,null,20);J.on('insertText',w(y),null,null,20);J.on('selectionChange',I,null,null,1);});var N;J.on('contentDom',function(){var S=J.document.getElementsByTag('title').getItem(0);S.data('cke-title',J.document.$.title);J.document.$.title=L;});J.on('readOnly',function(){if(J.mode=='wysiwyg'){var S=J.getMode();S.loadData(S.getData());}});if(h.document.$.documentMode>=8){J.addCss('html.CSS1Compat [contenteditable=false]{ min-height:0 !important;}');var O=[];for(var P in m.$removeEmpty)O.push('html.CSS1Compat '+P+'[contenteditable=false]');J.addCss(O.join(',')+'{ display:inline-block;}');}else if(i.gecko){J.addCss('html { height: 100% !important; }');J.addCss('img:-moz-broken { -moz-force-broken-image-icon : 1;\twidth : 24px; height : 24px; }');}J.addCss('html {\t_overflow-y: scroll; cursor: text;\t*cursor:auto;}');J.addCss('img, input, textarea { cursor: default;}');function Q(S){if(J.readOnly)return;l.tryThese(function(){J.document.$.designMode='on';setTimeout(function(){J.document.$.designMode='off';if(h.currentInstance==J)J.document.getBody().focus();},50);},function(){J.document.$.designMode='off';var T=J.document.getBody();T.setAttribute('contentEditable',false);T.setAttribute('contentEditable',true);!S&&Q(1);});};if(i.gecko||j||i.opera){var R;J.on('uiReady',function(){R=J.container.append(o.createFromHtml('<span tabindex="-1" style="position:absolute;" role="presentation"></span>'));R.on('focus',function(){J.focus();});J.focusGrabber=R;});J.on('destroy',function(){l.removeFunction(M);
R.clearCustomData();delete J.focusGrabber;});}J.on('insertElement',function(S){var T=S.data;if(T.type==1&&(T.is('input')||T.is('textarea'))){if(!T.isReadOnly())T.data('cke-editable',T.hasAttribute('contenteditable')?'true':'1');T.setAttribute('contentEditable',false);}});}});if(i.gecko)(function(){var J=document.body;if(!J)window.addEventListener('load',arguments.callee,false);else{var K=J.getAttribute('onpageshow');J.setAttribute('onpageshow',(K?K+';':'')+'event.persisted && (function(){'+'var allInstances = CKEDITOR.instances, editor, doc;'+'for ( var i in allInstances )'+'{'+'\teditor = allInstances[ i ];'+'\tdoc = editor.document;'+'\tif ( doc )'+'\t{'+'\t\tdoc.$.designMode = "off";'+'\t\tdoc.$.designMode = "on";'+'\t}'+'}'+'})();');}})();})();p.disableObjectResizing=false;p.disableNativeTableHandles=true;p.disableNativeSpellChecker=true;p.ignoreEmptyParagraph=true;q.add('wsc',{requires:['dialog'],init:function(t){var u='checkspell',v=t.addCommand(u,new h.dialogCommand(u));v.modes={wysiwyg:!i.opera&&!i.air&&document.domain==window.location.hostname};t.ui.addButton('SpellChecker',{label:t.lang.spellCheck.toolbar,command:u});h.dialog.add(u,this.path+'dialogs/wsc.js');}});p.wsc_customerId=p.wsc_customerId||'1:ua3xw1-2XyGJ3-GWruD3-6OFNT1-oXcuB1-nR6Bp4-hgQHc-EcYng3-sdRXG3-NOfFk';p.wsc_customLoaderScript=p.wsc_customLoaderScript||null;h.DIALOG_RESIZE_NONE=0;h.DIALOG_RESIZE_WIDTH=1;h.DIALOG_RESIZE_HEIGHT=2;h.DIALOG_RESIZE_BOTH=3;(function(){var t=l.cssLength;function u(X){return!!this._.tabs[X][0].$.offsetHeight;};function v(){var ab=this;var X=ab._.currentTabId,Y=ab._.tabIdList.length,Z=l.indexOf(ab._.tabIdList,X)+Y;for(var aa=Z-1;aa>Z-Y;aa--){if(u.call(ab,ab._.tabIdList[aa%Y]))return ab._.tabIdList[aa%Y];}return null;};function w(){var ab=this;var X=ab._.currentTabId,Y=ab._.tabIdList.length,Z=l.indexOf(ab._.tabIdList,X);for(var aa=Z+1;aa<Z+Y;aa++){if(u.call(ab,ab._.tabIdList[aa%Y]))return ab._.tabIdList[aa%Y];}return null;};function x(X,Y){var Z=X.$.getElementsByTagName('input');for(var aa=0,ab=Z.length;aa<ab;aa++){var ac=new o(Z[aa]);if(ac.getAttribute('type').toLowerCase()=='text')if(Y){ac.setAttribute('value',ac.getCustomData('fake_value')||'');ac.removeCustomData('fake_value');}else{ac.setCustomData('fake_value',ac.getAttribute('value'));ac.setAttribute('value','');}}};h.dialog=function(X,Y){var Z=h.dialog._.dialogDefinitions[Y],aa=l.clone(z),ab=X.config.dialog_buttonsOrder||'OS',ac=X.lang.dir;if(ab=='OS'&&i.mac||ab=='rtl'&&ac=='ltr'||ab=='ltr'&&ac=='rtl')aa.buttons.reverse();
Z=l.extend(Z(X),aa);Z=l.clone(Z);Z=new D(this,Z);var ad=h.document,ae=X.theme.buildDialog(X);this._={editor:X,element:ae.element,name:Y,contentSize:{width:0,height:0},size:{width:0,height:0},contents:{},buttons:{},accessKeyMap:{},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:false,focusList:[],currentFocusIndex:0,hasFocus:false};this.parts=ae.parts;l.setTimeout(function(){X.fire('ariaWidget',this.parts.contents);},0,this);var af={position:i.ie6Compat?'absolute':'fixed',top:0,visibility:'hidden'};af[ac=='rtl'?'right':'left']=0;this.parts.dialog.setStyles(af);h.event.call(this);this.definition=Z=h.fire('dialogDefinition',{name:Y,definition:Z},X).definition;var ag={};if(!('removeDialogTabs' in X._)&&X.config.removeDialogTabs){var ah=X.config.removeDialogTabs.split(';');for(i=0;i<ah.length;i++){var ai=ah[i].split(':');if(ai.length==2){var aj=ai[0];if(!ag[aj])ag[aj]=[];ag[aj].push(ai[1]);}}X._.removeDialogTabs=ag;}if(X._.removeDialogTabs&&(ag=X._.removeDialogTabs[Y]))for(i=0;i<ag.length;i++)Z.removeContents(ag[i]);if(Z.onLoad)this.on('load',Z.onLoad);if(Z.onShow)this.on('show',Z.onShow);if(Z.onHide)this.on('hide',Z.onHide);if(Z.onOk)this.on('ok',function(aw){X.fire('saveSnapshot');setTimeout(function(){X.fire('saveSnapshot');},0);if(Z.onOk.call(this,aw)===false)aw.data.hide=false;});if(Z.onCancel)this.on('cancel',function(aw){if(Z.onCancel.call(this,aw)===false)aw.data.hide=false;});var ak=this,al=function(aw){var ax=ak._.contents,ay=false;for(var az in ax)for(var aA in ax[az]){ay=aw.call(this,ax[az][aA]);if(ay)return;}};this.on('ok',function(aw){al(function(ax){if(ax.validate){var ay=ax.validate(this);if(typeof ay=='string'){alert(ay);ay=false;}if(ay===false){if(ax.select)ax.select();else ax.focus();aw.data.hide=false;aw.stop();return true;}}});},this,null,0);this.on('cancel',function(aw){al(function(ax){if(ax.isChanged()){if(!confirm(X.lang.common.confirmCancel))aw.data.hide=false;return true;}});},this,null,0);this.parts.close.on('click',function(aw){if(this.fire('cancel',{hide:true}).hide!==false)this.hide();aw.data.preventDefault();},this);function am(){var aw=ak._.focusList;aw.sort(function(az,aA){if(az.tabIndex!=aA.tabIndex)return aA.tabIndex-az.tabIndex;else return az.focusIndex-aA.focusIndex;});var ax=aw.length;for(var ay=0;ay<ax;ay++)aw[ay].focusIndex=ay;};function an(aw){var ax=ak._.focusList,ay=aw?1:-1;if(ax.length<1)return;var az=ak._.currentFocusIndex;try{ax[az].getInputElement().$.blur();}catch(aC){}var aA=(az+ay+ax.length)%ax.length,aB=aA;
while(!ax[aB].isFocusable()){aB=(aB+ay+ax.length)%ax.length;if(aB==aA)break;}ax[aB].focus();if(ax[aB].type=='text')ax[aB].select();};this.changeFocus=an;var ao;function ap(aw){var aB=this;if(ak!=h.dialog._.currentTop)return;var ax=aw.data.getKeystroke(),ay=X.lang.dir=='rtl';ao=0;if(ax==9||ax==2000+9){var az=ax==2000+9;if(ak._.tabBarMode){var aA=az?v.call(ak):w.call(ak);ak.selectPage(aA);ak._.tabs[aA][0].focus();}else an(!az);ao=1;}else if(ax==4000+121&&!ak._.tabBarMode&&ak.getPageCount()>1){ak._.tabBarMode=true;ak._.tabs[ak._.currentTabId][0].focus();ao=1;}else if((ax==37||ax==39)&&ak._.tabBarMode){aA=ax==(ay?39:37)?v.call(ak):w.call(ak);ak.selectPage(aA);ak._.tabs[aA][0].focus();ao=1;}else if((ax==13||ax==32)&&ak._.tabBarMode){aB.selectPage(aB._.currentTabId);aB._.tabBarMode=false;aB._.currentFocusIndex=-1;an(true);ao=1;}if(ao){aw.stop();aw.data.preventDefault();}};function aq(aw){ao&&aw.data.preventDefault();};var ar=this._.element;this.on('show',function(){ar.on('keydown',ap,this,null,0);if(i.opera||i.gecko&&i.mac)ar.on('keypress',aq,this);});this.on('hide',function(){ar.removeListener('keydown',ap);if(i.opera||i.gecko&&i.mac)ar.removeListener('keypress',aq);});this.on('iframeAdded',function(aw){var ax=new n(aw.data.iframe.$.contentWindow.document);ax.on('keydown',ap,this,null,0);});this.on('show',function(){var aA=this;am();if(X.config.dialog_startupFocusTab&&ak._.pageCount>1){ak._.tabBarMode=true;ak._.tabs[ak._.currentTabId][0].focus();}else if(!aA._.hasFocus){aA._.currentFocusIndex=-1;if(Z.onFocus){var aw=Z.onFocus.call(aA);aw&&aw.focus();}else an(true);if(aA._.editor.mode=='wysiwyg'&&j){var ax=X.document.$.selection,ay=ax.createRange();if(ay)if(ay.parentElement&&ay.parentElement().ownerDocument==X.document.$||ay.item&&ay.item(0).ownerDocument==X.document.$){var az=document.body.createTextRange();az.moveToElementText(aA.getElement().getFirst().$);az.collapse(true);az.select();}}}},this,null,4294967295);if(i.ie6Compat)this.on('load',function(aw){var ax=this.getElement(),ay=ax.getFirst();ay.remove();ay.appendTo(ax);},this);F(this);G(this);new k.text(Z.title,h.document).appendTo(this.parts.title);for(var as=0;as<Z.contents.length;as++){var at=Z.contents[as];at&&this.addPage(at);}this.parts.tabs.on('click',function(aw){var az=this;var ax=aw.data.getTarget();if(ax.hasClass('cke_dialog_tab')){var ay=ax.$.id;az.selectPage(ay.substring(4,ay.lastIndexOf('_')));if(az._.tabBarMode){az._.tabBarMode=false;az._.currentFocusIndex=-1;an(true);}aw.data.preventDefault();
}},this);var au=[],av=h.dialog._.uiElementBuilders.hbox.build(this,{type:'hbox',className:'cke_dialog_footer_buttons',widths:[],children:Z.buttons},au).getChild();this.parts.footer.setHtml(au.join(''));for(as=0;as<av.length;as++)this._.buttons[av[as].id]=av[as];};function y(X,Y,Z){this.element=Y;this.focusIndex=Z;this.tabIndex=0;this.isFocusable=function(){return!Y.getAttribute('disabled')&&Y.isVisible();};this.focus=function(){X._.currentFocusIndex=this.focusIndex;this.element.focus();};Y.on('keydown',function(aa){if(aa.data.getKeystroke() in {32:1,13:1})this.fire('click');});Y.on('focus',function(){this.fire('mouseover');});Y.on('blur',function(){this.fire('mouseout');});};h.dialog.prototype={destroy:function(){this.hide();this._.element.remove();},resize:(function(){return function(X,Y){var Z=this;if(Z._.contentSize&&Z._.contentSize.width==X&&Z._.contentSize.height==Y)return;h.dialog.fire('resize',{dialog:Z,skin:Z._.editor.skinName,width:X,height:Y},Z._.editor);Z.fire('resize',{skin:Z._.editor.skinName,width:X,height:Y},Z._.editor);if(Z._.editor.lang.dir=='rtl'&&Z._.position)Z._.position.x=h.document.getWindow().getViewPaneSize().width-Z._.contentSize.width-parseInt(Z._.element.getFirst().getStyle('right'),10);Z._.contentSize={width:X,height:Y};};})(),getSize:function(){var X=this._.element.getFirst();return{width:X.$.offsetWidth||0,height:X.$.offsetHeight||0};},move:(function(){var X;return function(Y,Z,aa){var ah=this;var ab=ah._.element.getFirst(),ac=ah._.editor.lang.dir=='rtl';if(X===undefined)X=ab.getComputedStyle('position')=='fixed';if(X&&ah._.position&&ah._.position.x==Y&&ah._.position.y==Z)return;ah._.position={x:Y,y:Z};if(!X){var ad=h.document.getWindow().getScrollPosition();Y+=ad.x;Z+=ad.y;}if(ac){var ae=ah.getSize(),af=h.document.getWindow().getViewPaneSize();Y=af.width-ae.width-Y;}var ag={top:(Z>0?Z:0)+'px'};ag[ac?'right':'left']=(Y>0?Y:0)+'px';ab.setStyles(ag);aa&&(ah._.moved=1);};})(),getPosition:function(){return l.extend({},this._.position);},show:function(){var X=this._.element,Y=this.definition;if(!(X.getParent()&&X.getParent().equals(h.document.getBody())))X.appendTo(h.document.getBody());else X.setStyle('display','block');if(i.gecko&&i.version<10900){var Z=this.parts.dialog;Z.setStyle('position','absolute');setTimeout(function(){Z.setStyle('position','fixed');},0);}this.resize(this._.contentSize&&this._.contentSize.width||Y.width||Y.minWidth,this._.contentSize&&this._.contentSize.height||Y.height||Y.minHeight);this.reset();this.selectPage(this.definition.contents[0].id);
if(h.dialog._.currentZIndex===null)h.dialog._.currentZIndex=this._.editor.config.baseFloatZIndex;this._.element.getFirst().setStyle('z-index',h.dialog._.currentZIndex+=10);if(h.dialog._.currentTop===null){h.dialog._.currentTop=this;this._.parentDialog=null;L(this._.editor);X.on('keydown',P);X.on(i.opera?'keypress':'keyup',Q);for(var aa in {keyup:1,keydown:1,keypress:1})X.on(aa,W);}else{this._.parentDialog=h.dialog._.currentTop;var ab=this._.parentDialog.getElement().getFirst();ab.$.style.zIndex-=Math.floor(this._.editor.config.baseFloatZIndex/2);h.dialog._.currentTop=this;}R(this,this,'\x1b',null,function(){this.getButton('cancel')&&this.getButton('cancel').click();});this._.hasFocus=false;l.setTimeout(function(){this.layout();this.parts.dialog.setStyle('visibility','');this.fireOnce('load',{});r.fire('ready',this);this.fire('show',{});this._.editor.fire('dialogShow',this);this.foreach(function(ac){ac.setInitValue&&ac.setInitValue();});},100,this);},layout:function(){var Z=this;var X=h.document.getWindow().getViewPaneSize(),Y=Z.getSize();Z.move(Z._.moved?Z._.position.x:(X.width-Y.width)/2,Z._.moved?Z._.position.y:(X.height-Y.height)/2);},foreach:function(X){var aa=this;for(var Y in aa._.contents)for(var Z in aa._.contents[Y])X(aa._.contents[Y][Z]);return aa;},reset:(function(){var X=function(Y){if(Y.reset)Y.reset(1);};return function(){this.foreach(X);return this;};})(),setupContent:function(){var X=arguments;this.foreach(function(Y){if(Y.setup)Y.setup.apply(Y,X);});},commitContent:function(){var X=arguments;this.foreach(function(Y){if(Y.commit)Y.commit.apply(Y,X);});},hide:function(){if(!this.parts.dialog.isVisible())return;this.fire('hide',{});this._.editor.fire('dialogHide',this);var X=this._.element;X.setStyle('display','none');this.parts.dialog.setStyle('visibility','hidden');S(this);while(h.dialog._.currentTop!=this)h.dialog._.currentTop.hide();if(!this._.parentDialog)M();else{var Y=this._.parentDialog.getElement().getFirst();Y.setStyle('z-index',parseInt(Y.$.style.zIndex,10)+Math.floor(this._.editor.config.baseFloatZIndex/2));}h.dialog._.currentTop=this._.parentDialog;if(!this._.parentDialog){h.dialog._.currentZIndex=null;X.removeListener('keydown',P);X.removeListener(i.opera?'keypress':'keyup',Q);for(var Z in {keyup:1,keydown:1,keypress:1})X.removeListener(Z,W);var aa=this._.editor;aa.focus();if(aa.mode=='wysiwyg'&&j){var ab=aa.getSelection();ab&&ab.unlock(true);}}else h.dialog._.currentZIndex-=10;delete this._.parentDialog;this.foreach(function(ac){ac.resetInitValue&&ac.resetInitValue();
});},addPage:function(X){var aj=this;var Y=[],Z=X.label?' title="'+l.htmlEncode(X.label)+'"':'',aa=X.elements,ab=h.dialog._.uiElementBuilders.vbox.build(aj,{type:'vbox',className:'cke_dialog_page_contents',children:X.elements,expand:!!X.expand,padding:X.padding,style:X.style||'width: 100%;height:100%'},Y),ac=o.createFromHtml(Y.join(''));ac.setAttribute('role','tabpanel');var ad=i,ae='cke_'+X.id+'_'+l.getNextNumber(),af=o.createFromHtml(['<a class="cke_dialog_tab"',aj._.pageCount>0?' cke_last':'cke_first',Z,!!X.hidden?' style="display:none"':'',' id="',ae,'"',ad.gecko&&ad.version>=10900&&!ad.hc?'':' href="javascript:void(0)"',' tabIndex="-1"',' hidefocus="true"',' role="tab">',X.label,'</a>'].join(''));ac.setAttribute('aria-labelledby',ae);aj._.tabs[X.id]=[af,ac];aj._.tabIdList.push(X.id);!X.hidden&&aj._.pageCount++;aj._.lastTab=af;aj.updateStyle();var ag=aj._.contents[X.id]={},ah,ai=ab.getChild();while(ah=ai.shift()){ag[ah.id]=ah;if(typeof ah.getChild=='function')ai.push.apply(ai,ah.getChild());}ac.setAttribute('name',X.id);ac.appendTo(aj.parts.contents);af.unselectable();aj.parts.tabs.append(af);if(X.accessKey){R(aj,aj,'CTRL+'+X.accessKey,U,T);aj._.accessKeyMap['CTRL+'+X.accessKey]=X.id;}},selectPage:function(X){if(this._.currentTabId==X)return;if(this.fire('selectPage',{page:X,currentPage:this._.currentTabId})===true)return;for(var Y in this._.tabs){var Z=this._.tabs[Y][0],aa=this._.tabs[Y][1];if(Y!=X){Z.removeClass('cke_dialog_tab_selected');aa.hide();}aa.setAttribute('aria-hidden',Y!=X);}var ab=this._.tabs[X];ab[0].addClass('cke_dialog_tab_selected');if(i.ie6Compat||i.ie7Compat){x(ab[1]);ab[1].show();setTimeout(function(){x(ab[1],1);},0);}else ab[1].show();this._.currentTabId=X;this._.currentTabIndex=l.indexOf(this._.tabIdList,X);},updateStyle:function(){this.parts.dialog[(this._.pageCount===1?'add':'remove')+'Class']('cke_single_page');},hidePage:function(X){var Z=this;var Y=Z._.tabs[X]&&Z._.tabs[X][0];if(!Y||Z._.pageCount==1||!Y.isVisible())return;else if(X==Z._.currentTabId)Z.selectPage(v.call(Z));Y.hide();Z._.pageCount--;Z.updateStyle();},showPage:function(X){var Z=this;var Y=Z._.tabs[X]&&Z._.tabs[X][0];if(!Y)return;Y.show();Z._.pageCount++;Z.updateStyle();},getElement:function(){return this._.element;},getName:function(){return this._.name;},getContentElement:function(X,Y){var Z=this._.contents[X];return Z&&Z[Y];},getValueOf:function(X,Y){return this.getContentElement(X,Y).getValue();},setValueOf:function(X,Y,Z){return this.getContentElement(X,Y).setValue(Z);
},getButton:function(X){return this._.buttons[X];},click:function(X){return this._.buttons[X].click();},disableButton:function(X){return this._.buttons[X].disable();},enableButton:function(X){return this._.buttons[X].enable();},getPageCount:function(){return this._.pageCount;},getParentEditor:function(){return this._.editor;},getSelectedElement:function(){return this.getParentEditor().getSelection().getSelectedElement();},addFocusable:function(X,Y){var aa=this;if(typeof Y=='undefined'){Y=aa._.focusList.length;aa._.focusList.push(new y(aa,X,Y));}else{aa._.focusList.splice(Y,0,new y(aa,X,Y));for(var Z=Y+1;Z<aa._.focusList.length;Z++)aa._.focusList[Z].focusIndex++;}}};l.extend(h.dialog,{add:function(X,Y){if(!this._.dialogDefinitions[X]||typeof Y=='function')this._.dialogDefinitions[X]=Y;},exists:function(X){return!!this._.dialogDefinitions[X];},getCurrent:function(){return h.dialog._.currentTop;},okButton:(function(){var X=function(Y,Z){Z=Z||{};return l.extend({id:'ok',type:'button',label:Y.lang.common.ok,'class':'cke_dialog_ui_button_ok',onClick:function(aa){var ab=aa.data.dialog;if(ab.fire('ok',{hide:true}).hide!==false)ab.hide();}},Z,true);};X.type='button';X.override=function(Y){return l.extend(function(Z){return X(Z,Y);},{type:'button'},true);};return X;})(),cancelButton:(function(){var X=function(Y,Z){Z=Z||{};return l.extend({id:'cancel',type:'button',label:Y.lang.common.cancel,'class':'cke_dialog_ui_button_cancel',onClick:function(aa){var ab=aa.data.dialog;if(ab.fire('cancel',{hide:true}).hide!==false)ab.hide();}},Z,true);};X.type='button';X.override=function(Y){return l.extend(function(Z){return X(Z,Y);},{type:'button'},true);};return X;})(),addUIElement:function(X,Y){this._.uiElementBuilders[X]=Y;}});h.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null};h.event.implementOn(h.dialog);h.event.implementOn(h.dialog.prototype,true);var z={resizable:3,minWidth:600,minHeight:400,buttons:[h.dialog.okButton,h.dialog.cancelButton]},A=function(X,Y,Z){for(var aa=0,ab;ab=X[aa];aa++){if(ab.id==Y)return ab;if(Z&&ab[Z]){var ac=A(ab[Z],Y,Z);if(ac)return ac;}}return null;},B=function(X,Y,Z,aa,ab){if(Z){for(var ac=0,ad;ad=X[ac];ac++){if(ad.id==Z){X.splice(ac,0,Y);return Y;}if(aa&&ad[aa]){var ae=B(ad[aa],Y,Z,aa,true);if(ae)return ae;}}if(ab)return null;}X.push(Y);return Y;},C=function(X,Y,Z){for(var aa=0,ab;ab=X[aa];aa++){if(ab.id==Y)return X.splice(aa,1);if(Z&&ab[Z]){var ac=C(ab[Z],Y,Z);if(ac)return ac;}}return null;},D=function(X,Y){this.dialog=X;
var Z=Y.contents;for(var aa=0,ab;ab=Z[aa];aa++)Z[aa]=ab&&new E(X,ab);l.extend(this,Y);};D.prototype={getContents:function(X){return A(this.contents,X);},getButton:function(X){return A(this.buttons,X);},addContents:function(X,Y){return B(this.contents,X,Y);},addButton:function(X,Y){return B(this.buttons,X,Y);},removeContents:function(X){C(this.contents,X);},removeButton:function(X){C(this.buttons,X);}};function E(X,Y){this._={dialog:X};l.extend(this,Y);};E.prototype={get:function(X){return A(this.elements,X,'children');},add:function(X,Y){return B(this.elements,X,Y,'children');},remove:function(X){C(this.elements,X,'children');}};function F(X){var Y=null,Z=null,aa=X.getElement().getFirst(),ab=X.getParentEditor(),ac=ab.config.dialog_magnetDistance,ad=ab.skin.margins||[0,0,0,0];if(typeof ac=='undefined')ac=20;function ae(ag){var ah=X.getSize(),ai=h.document.getWindow().getViewPaneSize(),aj=ag.data.$.screenX,ak=ag.data.$.screenY,al=aj-Y.x,am=ak-Y.y,an,ao;Y={x:aj,y:ak};Z.x+=al;Z.y+=am;if(Z.x+ad[3]<ac)an=-ad[3];else if(Z.x-ad[1]>ai.width-ah.width-ac)an=ai.width-ah.width+(ab.lang.dir=='rtl'?0:ad[1]);else an=Z.x;if(Z.y+ad[0]<ac)ao=-ad[0];else if(Z.y-ad[2]>ai.height-ah.height-ac)ao=ai.height-ah.height+ad[2];else ao=Z.y;X.move(an,ao,1);ag.data.preventDefault();};function af(ag){h.document.removeListener('mousemove',ae);h.document.removeListener('mouseup',af);if(i.ie6Compat){var ah=J.getChild(0).getFrameDocument();ah.removeListener('mousemove',ae);ah.removeListener('mouseup',af);}};X.parts.title.on('mousedown',function(ag){Y={x:ag.data.$.screenX,y:ag.data.$.screenY};h.document.on('mousemove',ae);h.document.on('mouseup',af);Z=X.getPosition();if(i.ie6Compat){var ah=J.getChild(0).getFrameDocument();ah.on('mousemove',ae);ah.on('mouseup',af);}ag.data.preventDefault();},X);};function G(X){var Y=X.definition,Z=Y.resizable;if(Z==0)return;var aa=X.getParentEditor(),ab,ac,ad,ae,af,ag,ah=l.addFunction(function(ak){af=X.getSize();var al=X.parts.contents,am=al.$.getElementsByTagName('iframe').length;if(am){ag=o.createFromHtml('<div class="cke_dialog_resize_cover" style="height: 100%; position: absolute; width: 100%;"></div>');al.append(ag);}ac=af.height-X.parts.contents.getSize('height',!(i.gecko||i.opera||j&&i.quirks));ab=af.width-X.parts.contents.getSize('width',1);ae={x:ak.screenX,y:ak.screenY};ad=h.document.getWindow().getViewPaneSize();h.document.on('mousemove',ai);h.document.on('mouseup',aj);if(i.ie6Compat){var an=J.getChild(0).getFrameDocument();an.on('mousemove',ai);an.on('mouseup',aj);
}ak.preventDefault&&ak.preventDefault();});X.on('load',function(){var ak='';if(Z==1)ak=' cke_resizer_horizontal';else if(Z==2)ak=' cke_resizer_vertical';var al=o.createFromHtml('<div class="cke_resizer'+ak+' cke_resizer_'+aa.lang.dir+'"'+' title="'+l.htmlEncode(aa.lang.resize)+'"'+' onmousedown="CKEDITOR.tools.callFunction('+ah+', event )"></div>');X.parts.footer.append(al,1);});aa.on('destroy',function(){l.removeFunction(ah);});function ai(ak){var al=aa.lang.dir=='rtl',am=(ak.data.$.screenX-ae.x)*(al?-1:1),an=ak.data.$.screenY-ae.y,ao=af.width,ap=af.height,aq=ao+am*(X._.moved?1:2),ar=ap+an*(X._.moved?1:2),as=X._.element.getFirst(),at=al&&as.getComputedStyle('right'),au=X.getPosition();if(au.y+ar>ad.height)ar=ad.height-au.y;if((al?at:au.x)+aq>ad.width)aq=ad.width-(al?at:au.x);if(Z==1||Z==3)ao=Math.max(Y.minWidth||0,aq-ab);if(Z==2||Z==3)ap=Math.max(Y.minHeight||0,ar-ac);X.resize(ao,ap);if(!X._.moved)X.layout();ak.data.preventDefault();};function aj(){h.document.removeListener('mouseup',aj);h.document.removeListener('mousemove',ai);if(ag){ag.remove();ag=null;}if(i.ie6Compat){var ak=J.getChild(0).getFrameDocument();ak.removeListener('mouseup',aj);ak.removeListener('mousemove',ai);}};};var H,I={},J;function K(X){X.data.preventDefault(1);};function L(X){var Y=h.document.getWindow(),Z=X.config,aa=Z.dialog_backgroundCoverColor||'white',ab=Z.dialog_backgroundCoverOpacity,ac=Z.baseFloatZIndex,ad=l.genKey(aa,ab,ac),ae=I[ad];if(!ae){var af=['<div tabIndex="-1" style="position: ',i.ie6Compat?'absolute':'fixed','; z-index: ',ac,'; top: 0px; left: 0px; ',!i.ie6Compat?'background-color: '+aa:'','" class="cke_dialog_background_cover">'];if(i.ie6Compat){var ag=i.isCustomDomain(),ah="<html><body style=\\'background-color:"+aa+";\\'></body></html>";af.push('<iframe hidefocus="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:');af.push('void((function(){document.open();'+(ag?"document.domain='"+document.domain+"';":'')+"document.write( '"+ah+"' );"+'document.close();'+'})())');af.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>');}af.push('</div>');ae=o.createFromHtml(af.join(''));ae.setOpacity(ab!=undefined?ab:0.5);ae.on('keydown',K);ae.on('keypress',K);ae.on('keyup',K);ae.appendTo(h.document.getBody());I[ad]=ae;}else ae.show();J=ae;var ai=function(){var al=Y.getViewPaneSize();ae.setStyles({width:al.width+'px',height:al.height+'px'});},aj=function(){var al=Y.getScrollPosition(),am=h.dialog._.currentTop;
ae.setStyles({left:al.x+'px',top:al.y+'px'});if(am)do{var an=am.getPosition();am.move(an.x,an.y);}while(am=am._.parentDialog)};H=ai;Y.on('resize',ai);ai();if(!(i.mac&&i.webkit))ae.focus();if(i.ie6Compat){var ak=function(){aj();arguments.callee.prevScrollHandler.apply(this,arguments);};Y.$.setTimeout(function(){ak.prevScrollHandler=window.onscroll||(function(){});window.onscroll=ak;},0);aj();}};function M(){if(!J)return;var X=h.document.getWindow();J.hide();X.removeListener('resize',H);if(i.ie6Compat)X.$.setTimeout(function(){var Y=window.onscroll&&window.onscroll.prevScrollHandler;window.onscroll=Y||null;},0);H=null;};function N(){for(var X in I)I[X].remove();I={};};var O={},P=function(X){var Y=X.data.$.ctrlKey||X.data.$.metaKey,Z=X.data.$.altKey,aa=X.data.$.shiftKey,ab=String.fromCharCode(X.data.$.keyCode),ac=O[(Y?'CTRL+':'')+(Z?'ALT+':'')+(aa?'SHIFT+':'')+ab];if(!ac||!ac.length)return;ac=ac[ac.length-1];ac.keydown&&ac.keydown.call(ac.uiElement,ac.dialog,ac.key);X.data.preventDefault();},Q=function(X){var Y=X.data.$.ctrlKey||X.data.$.metaKey,Z=X.data.$.altKey,aa=X.data.$.shiftKey,ab=String.fromCharCode(X.data.$.keyCode),ac=O[(Y?'CTRL+':'')+(Z?'ALT+':'')+(aa?'SHIFT+':'')+ab];if(!ac||!ac.length)return;ac=ac[ac.length-1];if(ac.keyup){ac.keyup.call(ac.uiElement,ac.dialog,ac.key);X.data.preventDefault();}},R=function(X,Y,Z,aa,ab){var ac=O[Z]||(O[Z]=[]);ac.push({uiElement:X,dialog:Y,key:Z,keyup:ab||X.accessKeyUp,keydown:aa||X.accessKeyDown});},S=function(X){for(var Y in O){var Z=O[Y];for(var aa=Z.length-1;aa>=0;aa--){if(Z[aa].dialog==X||Z[aa].uiElement==X)Z.splice(aa,1);}if(Z.length===0)delete O[Y];}},T=function(X,Y){if(X._.accessKeyMap[Y])X.selectPage(X._.accessKeyMap[Y]);},U=function(X,Y){},V={27:1,13:1},W=function(X){if(X.data.getKeystroke() in V)X.data.stopPropagation();};(function(){r.dialog={uiElement:function(X,Y,Z,aa,ab,ac,ad){if(arguments.length<4)return;var ae=(aa.call?aa(Y):aa)||'div',af=['<',ae,' '],ag=(ab&&ab.call?ab(Y):ab)||{},ah=(ac&&ac.call?ac(Y):ac)||{},ai=(ad&&ad.call?ad.call(this,X,Y):ad)||'',aj=this.domId=ah.id||l.getNextId()+'_uiElement',ak=this.id=Y.id,al;ah.id=aj;var am={};if(Y.type)am['cke_dialog_ui_'+Y.type]=1;if(Y.className)am[Y.className]=1;if(Y.disabled)am.cke_disabled=1;var an=ah['class']&&ah['class'].split?ah['class'].split(' '):[];for(al=0;al<an.length;al++){if(an[al])am[an[al]]=1;}var ao=[];for(al in am)ao.push(al);ah['class']=ao.join(' ');if(Y.title)ah.title=Y.title;var ap=(Y.style||'').split(';');for(al in ag)ap.push(al+':'+ag[al]);
if(Y.hidden)ap.push('display:none');for(al=ap.length-1;al>=0;al--){if(ap[al]==='')ap.splice(al,1);}if(ap.length>0)ah.style=(ah.style?ah.style+'; ':'')+ap.join('; ');for(al in ah)af.push(al+'="'+l.htmlEncode(ah[al])+'" ');af.push('>',ai,'</',ae,'>');Z.push(af.join(''));(this._||(this._={})).dialog=X;if(typeof Y.isChanged=='boolean')this.isChanged=function(){return Y.isChanged;};if(typeof Y.isChanged=='function')this.isChanged=Y.isChanged;h.event.implementOn(this);this.registerEvents(Y);if(this.accessKeyUp&&this.accessKeyDown&&Y.accessKey)R(this,X,'CTRL+'+Y.accessKey);var aq=this;X.on('load',function(){if(aq.getInputElement())aq.getInputElement().on('focus',function(){X._.tabBarMode=false;X._.hasFocus=true;aq.fire('focus');},aq);});if(this.keyboardFocusable){this.tabIndex=Y.tabIndex||0;this.focusIndex=X._.focusList.push(this)-1;this.on('focus',function(){X._.currentFocusIndex=aq.focusIndex;});}l.extend(this,Y);},hbox:function(X,Y,Z,aa,ab){if(arguments.length<4)return;this._||(this._={});var ac=this._.children=Y,ad=ab&&ab.widths||null,ae=ab&&ab.height||null,af={},ag,ah=function(){var aj=['<tbody><tr class="cke_dialog_ui_hbox">'];for(ag=0;ag<Z.length;ag++){var ak='cke_dialog_ui_hbox_child',al=[];if(ag===0)ak='cke_dialog_ui_hbox_first';if(ag==Z.length-1)ak='cke_dialog_ui_hbox_last';aj.push('<td class="',ak,'" role="presentation" ');if(ad){if(ad[ag])al.push('width:'+t(ad[ag]));}else al.push('width:'+Math.floor(100/Z.length)+'%');if(ae)al.push('height:'+t(ae));if(ab&&ab.padding!=undefined)al.push('padding:'+t(ab.padding));if(al.length>0)aj.push('style="'+al.join('; ')+'" ');aj.push('>',Z[ag],'</td>');}aj.push('</tr></tbody>');return aj.join('');},ai={role:'presentation'};ab&&ab.align&&(ai.align=ab.align);r.dialog.uiElement.call(this,X,ab||{type:'hbox'},aa,'table',af,ai,ah);},vbox:function(X,Y,Z,aa,ab){if(arguments.length<3)return;this._||(this._={});var ac=this._.children=Y,ad=ab&&ab.width||null,ae=ab&&ab.heights||null,af=function(){var ag=['<table role="presentation" cellspacing="0" border="0" '];ag.push('style="');if(ab&&ab.expand)ag.push('height:100%;');ag.push('width:'+t(ad||'100%'),';');ag.push('"');ag.push('align="',l.htmlEncode(ab&&ab.align||(X.getParentEditor().lang.dir=='ltr'?'left':'right')),'" ');ag.push('><tbody>');for(var ah=0;ah<Z.length;ah++){var ai=[];ag.push('<tr><td role="presentation" ');if(ad)ai.push('width:'+t(ad||'100%'));if(ae)ai.push('height:'+t(ae[ah]));else if(ab&&ab.expand)ai.push('height:'+Math.floor(100/Z.length)+'%');if(ab&&ab.padding!=undefined)ai.push('padding:'+t(ab.padding));
if(ai.length>0)ag.push('style="',ai.join('; '),'" ');ag.push(' class="cke_dialog_ui_vbox_child">',Z[ah],'</td></tr>');}ag.push('</tbody></table>');return ag.join('');};r.dialog.uiElement.call(this,X,ab||{type:'vbox'},aa,'div',null,{role:'presentation'},af);}};})();r.dialog.uiElement.prototype={getElement:function(){return h.document.getById(this.domId);},getInputElement:function(){return this.getElement();},getDialog:function(){return this._.dialog;},setValue:function(X,Y){this.getInputElement().setValue(X);!Y&&this.fire('change',{value:X});return this;},getValue:function(){return this.getInputElement().getValue();},isChanged:function(){return false;},selectParentTab:function(){var aa=this;var X=aa.getInputElement(),Y=X,Z;while((Y=Y.getParent())&&Y.$.className.search('cke_dialog_page_contents')==-1){}if(!Y)return aa;Z=Y.getAttribute('name');if(aa._.dialog._.currentTabId!=Z)aa._.dialog.selectPage(Z);return aa;},focus:function(){this.selectParentTab().getInputElement().focus();return this;},registerEvents:function(X){var Y=/^on([A-Z]\w+)/,Z,aa=function(ac,ad,ae,af){ad.on('load',function(){ac.getInputElement().on(ae,af,ac);});};for(var ab in X){if(!(Z=ab.match(Y)))continue;if(this.eventProcessors[ab])this.eventProcessors[ab].call(this,this._.dialog,X[ab]);else aa(this,this._.dialog,Z[1].toLowerCase(),X[ab]);}return this;},eventProcessors:{onLoad:function(X,Y){X.on('load',Y,this);},onShow:function(X,Y){X.on('show',Y,this);},onHide:function(X,Y){X.on('hide',Y,this);}},accessKeyDown:function(X,Y){this.focus();},accessKeyUp:function(X,Y){},disable:function(){var X=this.getElement();X.setAttribute('disabled','true');X.addClass('cke_disabled');},enable:function(){var X=this.getElement();X.removeAttribute('disabled');X.removeClass('cke_disabled');},isEnabled:function(){return!this.getInputElement().getAttribute('disabled');},isVisible:function(){return this.getInputElement().isVisible();},isFocusable:function(){if(!this.isEnabled()||!this.isVisible())return false;return true;}};r.dialog.hbox.prototype=l.extend(new r.dialog.uiElement(),{getChild:function(X){var Y=this;if(arguments.length<1)return Y._.children.concat();if(!X.splice)X=[X];if(X.length<2)return Y._.children[X[0]];else return Y._.children[X[0]]&&Y._.children[X[0]].getChild?Y._.children[X[0]].getChild(X.slice(1,X.length)):null;}},true);r.dialog.vbox.prototype=new r.dialog.hbox();(function(){var X={build:function(Y,Z,aa){var ab=Z.children,ac,ad=[],ae=[];for(var af=0;af<ab.length&&(ac=ab[af]);af++){var ag=[];
ad.push(ag);ae.push(h.dialog._.uiElementBuilders[ac.type].build(Y,ac,ag));}return new r.dialog[Z.type](Y,ae,ad,aa,Z);}};h.dialog.addUIElement('hbox',X);h.dialog.addUIElement('vbox',X);})();h.dialogCommand=function(X){this.dialogName=X;};h.dialogCommand.prototype={exec:function(X){X.openDialog(this.dialogName);},canUndo:false,editorFocus:j||i.webkit};(function(){var X=/^([a]|[^a])+$/,Y=/^\d*$/,Z=/^\d*(?:\.\d+)?$/;h.VALIDATE_OR=1;h.VALIDATE_AND=2;h.dialog.validate={functions:function(){return function(){var ag=this;var aa=ag&&ag.getValue?ag.getValue():arguments[0],ab=undefined,ac=2,ad=[],ae;for(ae=0;ae<arguments.length;ae++){if(typeof arguments[ae]=='function')ad.push(arguments[ae]);else break;}if(ae<arguments.length&&typeof arguments[ae]=='string'){ab=arguments[ae];ae++;}if(ae<arguments.length&&typeof arguments[ae]=='number')ac=arguments[ae];var af=ac==2?true:false;for(ae=0;ae<ad.length;ae++){if(ac==2)af=af&&ad[ae](aa);else af=af||ad[ae](aa);}if(!af){if(ab!==undefined)alert(ab);if(ag&&(ag.select||ag.focus))ag.select||ag.focus();return false;}return true;};},regex:function(aa,ab){return function(){var ad=this;var ac=ad&&ad.getValue?ad.getValue():arguments[0];if(!aa.test(ac)){if(ab!==undefined)alert(ab);if(ad&&(ad.select||ad.focus))if(ad.select)ad.select();else ad.focus();return false;}return true;};},notEmpty:function(aa){return this.regex(X,aa);},integer:function(aa){return this.regex(Y,aa);},number:function(aa){return this.regex(Z,aa);},equals:function(aa,ab){return this.functions(function(ac){return ac==aa;},ab);},notEqual:function(aa,ab){return this.functions(function(ac){return ac!=aa;},ab);}};h.on('instanceDestroyed',function(aa){if(l.isEmpty(h.instances)){var ab;while(ab=h.dialog._.currentTop)ab.hide();N();}var ac=aa.editor._.storedDialogs;for(var ad in ac)ac[ad].destroy();});})();l.extend(h.editor.prototype,{openDialog:function(X,Y){if(this.mode=='wysiwyg'&&j){var Z=this.getSelection();Z&&Z.lock();}var aa=h.dialog._.dialogDefinitions[X],ab=this.skin.dialog;if(h.dialog._.currentTop===null)L(this);if(typeof aa=='function'&&ab._isLoaded){var ac=this._.storedDialogs||(this._.storedDialogs={}),ad=ac[X]||(ac[X]=new h.dialog(this,X));Y&&Y.call(ad,ad);ad.show();return ad;}else if(aa=='failed'){M();throw new Error('[CKEDITOR.dialog.openDialog] Dialog "'+X+'" failed when loading definition.');}var ae=this;function af(ah){var ai=h.dialog._.dialogDefinitions[X],aj=ae.skin.dialog;if(!aj._isLoaded||ag&&typeof ah=='undefined')return;if(typeof ai!='function')h.dialog._.dialogDefinitions[X]='failed';
ae.openDialog(X,Y);};if(typeof aa=='string'){var ag=1;h.scriptLoader.load(h.getUrl(aa),af,null,0,1);}h.skins.load(this,'dialog',af);return null;}});})();q.add('dialog',{requires:['dialogui']});q.add('styles',{requires:['selection'],init:function(t){t.on('contentDom',function(){t.document.setCustomData('cke_includeReadonly',!t.config.disableReadonlyStyling);});}});h.editor.prototype.attachStyleStateChange=function(t,u){var v=this._.styleStateChangeCallbacks;if(!v){v=this._.styleStateChangeCallbacks=[];this.on('selectionChange',function(w){for(var x=0;x<v.length;x++){var y=v[x],z=y.style.checkActive(w.data.path)?1:2;y.fn.call(this,z);}});}v.push({style:t,fn:u});};h.STYLE_BLOCK=1;h.STYLE_INLINE=2;h.STYLE_OBJECT=3;(function(){var t={address:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1},u={a:1,embed:1,hr:1,img:1,li:1,object:1,ol:1,table:1,td:1,tr:1,th:1,ul:1,dl:1,dt:1,dd:1,form:1},v=/\s*(?:;\s*|$)/,w=/#\((.+?)\)/g,x=k.walker.bookmark(0,1),y=k.walker.whitespaces(1);h.style=function(aa,ab){if(ab){aa=l.clone(aa);S(aa.attributes,ab);S(aa.styles,ab);}var ac=this.element=(aa.element||'*').toLowerCase();this.type=t[ac]?1:u[ac]?3:2;this._={definition:aa};};h.style.prototype={apply:function(aa){Z.call(this,aa,false);},remove:function(aa){Z.call(this,aa,true);},applyToRange:function(aa){var ab=this;return(ab.applyToRange=ab.type==2?A:ab.type==1?E:ab.type==3?C:null).call(ab,aa);},removeFromRange:function(aa){var ab=this;return(ab.removeFromRange=ab.type==2?B:ab.type==1?F:ab.type==3?D:null).call(ab,aa);},applyToObject:function(aa){R(aa,this);},checkActive:function(aa){var ae=this;switch(ae.type){case 1:return ae.checkElementRemovable(aa.block||aa.blockLimit,true);case 3:case 2:var ab=aa.elements;for(var ac=0,ad;ac<ab.length;ac++){ad=ab[ac];if(ae.type==2&&(ad==aa.block||ad==aa.blockLimit))continue;if(ae.type==3&&!(ad.getName() in u))continue;if(ae.checkElementRemovable(ad,true))return true;}}return false;},checkApplicable:function(aa){switch(this.type){case 2:case 1:break;case 3:return aa.lastElement.getAscendant(this.element,true);}return true;},checkElementRemovable:function(aa,ab){if(!aa||aa.isReadOnly())return false;var ac=this._.definition,ad;if(aa.getName()==this.element){if(!ab&&!aa.hasAttributes())return true;ad=T(ac);if(ad._length){for(var ae in ad){if(ae=='_length')continue;var af=aa.getAttribute(ae)||'';if(ae=='style'?Y(ad[ae],W(af,false)):ad[ae]==af){if(!ab)return true;}else if(ab)return false;}if(ab)return true;}else return true;}var ag=U(this)[aa.getName()];
if(ag){if(!(ad=ag.attributes))return true;for(var ah=0;ah<ad.length;ah++){ae=ad[ah][0];var ai=aa.getAttribute(ae);if(ai){var aj=ad[ah][1];if(aj===null||typeof aj=='string'&&ai==aj||aj.test(ai))return true;}}}return false;},buildPreview:function(aa){var ab=this._.definition,ac=[],ad=ab.element;if(ad=='bdo')ad='span';ac=['<',ad];var ae=ab.attributes;if(ae)for(var af in ae)ac.push(' ',af,'="',ae[af],'"');var ag=h.style.getStyleText(ab);if(ag)ac.push(' style="',ag,'"');ac.push('>',aa||ab.name,'</',ad,'>');return ac.join('');}};h.style.getStyleText=function(aa){var ab=aa._ST;if(ab)return ab;ab=aa.styles;var ac=aa.attributes&&aa.attributes.style||'',ad='';if(ac.length)ac=ac.replace(v,';');for(var ae in ab){var af=ab[ae],ag=(ae+':'+af).replace(v,';');if(af=='inherit')ad+=ag;else ac+=ag;}if(ac.length)ac=W(ac);ac+=ad;return aa._ST=ac;};function z(aa){var ab,ac;while(aa=aa.getParent()){if(aa.getName()=='body')break;if(aa.getAttribute('data-nostyle'))ab=aa;else if(!ac){var ad=aa.getAttribute('contentEditable');if(ad=='false')ab=aa;else if(ad=='true')ac=1;}}return ab;};function A(aa){var aE=this;var ab=aa.document;if(aa.collapsed){var ac=Q(aE,ab);aa.insertNode(ac);aa.moveToPosition(ac,2);return;}var ad=aE.element,ae=aE._.definition,af,ag=ae.includeReadonly;if(ag==undefined)ag=ab.getCustomData('cke_includeReadonly');var ah=m[ad]||(af=true,m.span);aa.enlarge(1,1);aa.trim();var ai=aa.createBookmark(),aj=ai.startNode,ak=ai.endNode,al=aj,am,an=z(aj),ao=z(ak);if(an)al=an.getNextSourceNode(true);if(ao)ak=ao;if(al.getPosition(ak)==2)al=0;while(al){var ap=false;if(al.equals(ak)){al=null;ap=true;}else{var aq=al.type,ar=aq==1?al.getName():null,as=ar&&al.getAttribute('contentEditable')=='false',at=ar&&al.getAttribute('data-nostyle');if(ar&&al.data('cke-bookmark')){al=al.getNextSourceNode(true);continue;}if(!ar||ah[ar]&&!at&&(!as||ag)&&(al.getPosition(ak)|4|0|8)==4+0+8&&(!ae.childRule||ae.childRule(al))){var au=al.getParent();if(au&&((au.getDtd()||m.span)[ad]||af)&&(!ae.parentRule||ae.parentRule(au))){if(!am&&(!ar||!m.$removeEmpty[ar]||(al.getPosition(ak)|4|0|8)==4+0+8)){am=new k.range(ab);am.setStartBefore(al);}if(aq==3||as||aq==1&&!al.getChildCount()){var av=al,aw;while((ap=!av.getNext(x))&&(aw=av.getParent(),ah[aw.getName()])&&(aw.getPosition(aj)|2|0|8)==2+0+8&&(!ae.childRule||ae.childRule(aw)))av=aw;am.setEndAfter(av);}}else ap=true;}else ap=true;al=al.getNextSourceNode(at||as);}if(ap&&am&&!am.collapsed){var ax=Q(aE,ab),ay=ax.hasAttributes(),az=am.getCommonAncestor(),aA={styles:{},attrs:{},blockedStyles:{},blockedAttrs:{}},aB,aC,aD;
while(ax&&az){if(az.getName()==ad){for(aB in ae.attributes){if(aA.blockedAttrs[aB]||!(aD=az.getAttribute(aC)))continue;if(ax.getAttribute(aB)==aD)aA.attrs[aB]=1;else aA.blockedAttrs[aB]=1;}for(aC in ae.styles){if(aA.blockedStyles[aC]||!(aD=az.getStyle(aC)))continue;if(ax.getStyle(aC)==aD)aA.styles[aC]=1;else aA.blockedStyles[aC]=1;}}az=az.getParent();}for(aB in aA.attrs)ax.removeAttribute(aB);for(aC in aA.styles)ax.removeStyle(aC);if(ay&&!ax.hasAttributes())ax=null;if(ax){am.extractContents().appendTo(ax);N(aE,ax);am.insertNode(ax);ax.mergeSiblings();if(!j)ax.$.normalize();}else{ax=new o('span');am.extractContents().appendTo(ax);am.insertNode(ax);N(aE,ax);ax.remove(true);}am=null;}}aa.moveToBookmark(ai);aa.shrink(2);};function B(aa){aa.enlarge(1,1);var ab=aa.createBookmark(),ac=ab.startNode;if(aa.collapsed){var ad=new k.elementPath(ac.getParent()),ae;for(var af=0,ag;af<ad.elements.length&&(ag=ad.elements[af]);af++){if(ag==ad.block||ag==ad.blockLimit)break;if(this.checkElementRemovable(ag)){var ah;if(aa.collapsed&&(aa.checkBoundaryOfElement(ag,2)||(ah=aa.checkBoundaryOfElement(ag,1)))){ae=ag;ae.match=ah?'start':'end';}else{ag.mergeSiblings();if(ag.getName()==this.element)M(this,ag);else O(ag,U(this)[ag.getName()]);}}}if(ae){var ai=ac;for(af=0;true;af++){var aj=ad.elements[af];if(aj.equals(ae))break;else if(aj.match)continue;else aj=aj.clone();aj.append(ai);ai=aj;}ai[ae.match=='start'?'insertBefore':'insertAfter'](ae);}}else{var ak=ab.endNode,al=this;function am(){var ap=new k.elementPath(ac.getParent()),aq=new k.elementPath(ak.getParent()),ar=null,as=null;for(var at=0;at<ap.elements.length;at++){var au=ap.elements[at];if(au==ap.block||au==ap.blockLimit)break;if(al.checkElementRemovable(au))ar=au;}for(at=0;at<aq.elements.length;at++){au=aq.elements[at];if(au==aq.block||au==aq.blockLimit)break;if(al.checkElementRemovable(au))as=au;}if(as)ak.breakParent(as);if(ar)ac.breakParent(ar);};am();var an=ac.getNext();while(!an.equals(ak)){var ao=an.getNextSourceNode();if(an.type==1&&this.checkElementRemovable(an)){if(an.getName()==this.element)M(this,an);else O(an,U(this)[an.getName()]);if(ao.type==1&&ao.contains(ac)){am();ao=ac.getNext();}}an=ao;}}aa.moveToBookmark(ab);};function C(aa){var ab=aa.getCommonAncestor(true,true),ac=ab.getAscendant(this.element,true);ac&&!ac.isReadOnly()&&R(ac,this);};function D(aa){var ab=aa.getCommonAncestor(true,true),ac=ab.getAscendant(this.element,true);if(!ac)return;var ad=this,ae=ad._.definition,af=ae.attributes,ag=h.style.getStyleText(ae);
if(af)for(var ah in af)ac.removeAttribute(ah,af[ah]);if(ae.styles)for(var ai in ae.styles){if(!ae.styles.hasOwnProperty(ai))continue;ac.removeStyle(ai);}};function E(aa){var ab=aa.createBookmark(true),ac=aa.createIterator();ac.enforceRealBlocks=true;if(this._.enterMode)ac.enlargeBr=this._.enterMode!=2;var ad,ae=aa.document,af;while(ad=ac.getNextParagraph()){if(!ad.isReadOnly()){var ag=Q(this,ae,ad);G(ad,ag);}}aa.moveToBookmark(ab);};function F(aa){var af=this;var ab=aa.createBookmark(1),ac=aa.createIterator();ac.enforceRealBlocks=true;ac.enlargeBr=af._.enterMode!=2;var ad;while(ad=ac.getNextParagraph()){if(af.checkElementRemovable(ad))if(ad.is('pre')){var ae=af._.enterMode==2?null:aa.document.createElement(af._.enterMode==1?'p':'div');ae&&ad.copyAttributes(ae);G(ad,ae);}else M(af,ad,1);}aa.moveToBookmark(ab);};function G(aa,ab){var ac=!ab;if(ac){ab=aa.getDocument().createElement('div');aa.copyAttributes(ab);}var ad=ab&&ab.is('pre'),ae=aa.is('pre'),af=ad&&!ae,ag=!ad&&ae;if(af)ab=L(aa,ab);else if(ag)ab=K(ac?[aa.getHtml()]:I(aa),ab);else aa.moveChildren(ab);ab.replace(aa);if(ad)H(ab);else if(ac)P(ab);};function H(aa){var ab;if(!((ab=aa.getPrevious(y))&&ab.is&&ab.is('pre')))return;var ac=J(ab.getHtml(),/\n$/,'')+'\n\n'+J(aa.getHtml(),/^\n/,'');if(j)aa.$.outerHTML='<pre>'+ac+'</pre>';else aa.setHtml(ac);ab.remove();};function I(aa){var ab=/(\S\s*)\n(?:\s|(<span[^>]+data-cke-bookmark.*?\/span>))*\n(?!$)/gi,ac=aa.getName(),ad=J(aa.getOuterHtml(),ab,function(af,ag,ah){return ag+'</pre>'+ah+'<pre>';}),ae=[];ad.replace(/<pre\b.*?>([\s\S]*?)<\/pre>/gi,function(af,ag){ae.push(ag);});return ae;};function J(aa,ab,ac){var ad='',ae='';aa=aa.replace(/(^<span[^>]+data-cke-bookmark.*?\/span>)|(<span[^>]+data-cke-bookmark.*?\/span>$)/gi,function(af,ag,ah){ag&&(ad=ag);ah&&(ae=ah);return '';});return ad+aa.replace(ab,ac)+ae;};function K(aa,ab){var ac;if(aa.length>1)ac=new k.documentFragment(ab.getDocument());for(var ad=0;ad<aa.length;ad++){var ae=aa[ad];ae=ae.replace(/(\r\n|\r)/g,'\n');ae=J(ae,/^[ \t]*\n/,'');ae=J(ae,/\n$/,'');ae=J(ae,/^[ \t]+|[ \t]+$/g,function(ag,ah,ai){if(ag.length==1)return '&nbsp;';else if(!ah)return l.repeat('&nbsp;',ag.length-1)+' ';else return ' '+l.repeat('&nbsp;',ag.length-1);});ae=ae.replace(/\n/g,'<br>');ae=ae.replace(/[ \t]{2,}/g,function(ag){return l.repeat('&nbsp;',ag.length-1)+' ';});if(ac){var af=ab.clone();af.setHtml(ae);ac.append(af);}else ab.setHtml(ae);}return ac||ab;};function L(aa,ab){var ac=aa.getBogus();ac&&ac.remove();var ad=aa.getHtml();
ad=J(ad,/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,'');ad=ad.replace(/[ \t\r\n]*(<br[^>]*>)[ \t\r\n]*/gi,'$1');ad=ad.replace(/([ \t\n\r]+|&nbsp;)/g,' ');ad=ad.replace(/<br\b[^>]*>/gi,'\n');if(j){var ae=aa.getDocument().createElement('div');ae.append(ab);ab.$.outerHTML='<pre>'+ad+'</pre>';ab.copyAttributes(ae.getFirst());ab=ae.getFirst().remove();}else ab.setHtml(ad);return ab;};function M(aa,ab){var ac=aa._.definition,ad=l.extend({},ac.attributes,U(aa)[ab.getName()]),ae=ac.styles,af=l.isEmpty(ad)&&l.isEmpty(ae);for(var ag in ad){if((ag=='class'||aa._.definition.fullMatch)&&ab.getAttribute(ag)!=V(ag,ad[ag]))continue;af=ab.hasAttribute(ag);ab.removeAttribute(ag);}for(var ah in ae){if(aa._.definition.fullMatch&&ab.getStyle(ah)!=V(ah,ae[ah],true))continue;af=af||!!ab.getStyle(ah);ab.removeStyle(ah);}if(af)!m.$block[ab.getName()]||aa._.enterMode==2&&!ab.hasAttributes()?P(ab):ab.renameNode(aa._.enterMode==1?'p':'div');};function N(aa,ab){var ac=aa._.definition,ad=ac.attributes,ae=ac.styles,af=U(aa),ag=ab.getElementsByTag(aa.element);for(var ah=ag.count();--ah>=0;)M(aa,ag.getItem(ah));for(var ai in af){if(ai!=aa.element){ag=ab.getElementsByTag(ai);for(ah=ag.count()-1;ah>=0;ah--){var aj=ag.getItem(ah);O(aj,af[ai]);}}}};function O(aa,ab){var ac=ab&&ab.attributes;if(ac)for(var ad=0;ad<ac.length;ad++){var ae=ac[ad][0],af;if(af=aa.getAttribute(ae)){var ag=ac[ad][1];if(ag===null||ag.test&&ag.test(af)||typeof ag=='string'&&af==ag)aa.removeAttribute(ae);}}P(aa);};function P(aa){if(!aa.hasAttributes())if(m.$block[aa.getName()]){var ab=aa.getPrevious(y),ac=aa.getNext(y);if(ab&&(ab.type==3||!ab.isBlockBoundary({br:1})))aa.append('br',1);if(ac&&(ac.type==3||!ac.isBlockBoundary({br:1})))aa.append('br');aa.remove(true);}else{var ad=aa.getFirst(),ae=aa.getLast();aa.remove(true);if(ad){ad.type==1&&ad.mergeSiblings();if(ae&&!ad.equals(ae)&&ae.type==1)ae.mergeSiblings();}}};function Q(aa,ab,ac){var ad,ae=aa._.definition,af=aa.element;if(af=='*')af='span';ad=new o(af,ab);if(ac)ac.copyAttributes(ad);ad=R(ad,aa);if(ab.getCustomData('doc_processing_style')&&ad.hasAttribute('id'))ad.removeAttribute('id');else ab.setCustomData('doc_processing_style',1);return ad;};function R(aa,ab){var ac=ab._.definition,ad=ac.attributes,ae=h.style.getStyleText(ac);if(ad)for(var af in ad)aa.setAttribute(af,ad[af]);if(ae)aa.setAttribute('style',ae);return aa;};function S(aa,ab){for(var ac in aa)aa[ac]=aa[ac].replace(w,function(ad,ae){return ab[ae];});};function T(aa){var ab=aa._AC;if(ab)return ab;ab={};var ac=0,ad=aa.attributes;
if(ad)for(var ae in ad){ac++;ab[ae]=ad[ae];}var af=h.style.getStyleText(aa);if(af){if(!ab.style)ac++;ab.style=af;}ab._length=ac;return aa._AC=ab;};function U(aa){if(aa._.overrides)return aa._.overrides;var ab=aa._.overrides={},ac=aa._.definition.overrides;if(ac){if(!l.isArray(ac))ac=[ac];for(var ad=0;ad<ac.length;ad++){var ae=ac[ad],af,ag,ah;if(typeof ae=='string')af=ae.toLowerCase();else{af=ae.element?ae.element.toLowerCase():aa.element;ah=ae.attributes;}ag=ab[af]||(ab[af]={});if(ah){var ai=ag.attributes=ag.attributes||[];for(var aj in ah)ai.push([aj.toLowerCase(),ah[aj]]);}}}return ab;};function V(aa,ab,ac){var ad=new o('span');ad[ac?'setStyle':'setAttribute'](aa,ab);return ad[ac?'getStyle':'getAttribute'](aa);};function W(aa,ab){var ac;if(ab!==false){var ad=new o('span');ad.setAttribute('style',aa);ac=ad.getAttribute('style')||'';}else ac=aa;ac=ac.replace(/(font-family:)(.*?)(?=;|$)/,function(ae,af,ag){var ah=ag.split(',');for(var ai=0;ai<ah.length;ai++)ah[ai]=l.trim(ah[ai].replace(/["']/g,''));return af+ah.join(',');});return ac.replace(/\s*([;:])\s*/,'$1').replace(/([^\s;])$/,'$1;').replace(/,\s+/g,',').replace(/\"/g,'').toLowerCase();};function X(aa){var ab={};aa.replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(ac,ad,ae){ab[ad]=ae;});return ab;};function Y(aa,ab){typeof aa=='string'&&(aa=X(aa));typeof ab=='string'&&(ab=X(ab));for(var ac in aa){if(!(ac in ab&&(ab[ac]==aa[ac]||aa[ac]=='inherit'||ab[ac]=='inherit')))return false;}return true;};function Z(aa,ab){var ac=aa.getSelection(),ad=ac.getRanges(),ae=ab?this.removeFromRange:this.applyToRange,af,ag=ad.createIterator();while(af=ag.getNextRange())ae.call(this,af);ac.selectRanges(ad);aa.removeCustomData('doc_processing_style');};})();h.styleCommand=function(t){this.style=t;};h.styleCommand.prototype.exec=function(t){var v=this;t.focus();var u=t.document;if(u)if(v.state==2)v.style.apply(u);else if(v.state==1)v.style.remove(u);return!!u;};h.stylesSet=new h.resourceManager('','stylesSet');h.addStylesSet=l.bind(h.stylesSet.add,h.stylesSet);h.loadStylesSet=function(t,u,v){h.stylesSet.addExternal(t,u,'');h.stylesSet.load(t,v);};h.editor.prototype.getStylesSet=function(t){if(!this._.stylesDefinitions){var u=this,v=u.config.stylesCombo_stylesSet||u.config.stylesSet||'default';if(v instanceof Array){u._.stylesDefinitions=v;t(v);return;}var w=v.split(':'),x=w[0],y=w[1],z=q.registered.styles.path;h.stylesSet.addExternal(x,y?w.slice(1).join(':'):z+'styles/'+x+'.js','');h.stylesSet.load(x,function(A){u._.stylesDefinitions=A[x];
t(u._.stylesDefinitions);});}else t(this._.stylesDefinitions);};q.add('domiterator');(function(){function t(z){var A=this;if(arguments.length<1)return;A.range=z;A.forceBrBreak=0;A.enlargeBr=1;A.enforceRealBlocks=0;A._||(A._={});};var u=/^[\r\n\t ]+$/,v=k.walker.bookmark(false,true),w=k.walker.whitespaces(true),x=function(z){return v(z)&&w(z);};function y(z,A,B){var C=z.getNextSourceNode(A,null,B);while(!v(C))C=C.getNextSourceNode(A,null,B);return C;};t.prototype={getNextParagraph:function(z){var Z=this;var A,B,C,D,E,F;if(!Z._.lastNode){B=Z.range.clone();B.shrink(1,true);D=B.endContainer.hasAscendant('pre',true)||B.startContainer.hasAscendant('pre',true);B.enlarge(Z.forceBrBreak&&!D||!Z.enlargeBr?3:2);var G=new k.walker(B),H=k.walker.bookmark(true,true);G.evaluator=H;Z._.nextNode=G.next();G=new k.walker(B);G.evaluator=H;var I=G.previous();Z._.lastNode=I.getNextSourceNode(true);if(Z._.lastNode&&Z._.lastNode.type==3&&!l.trim(Z._.lastNode.getText())&&Z._.lastNode.getParent().isBlockBoundary()){var J=new k.range(B.document);J.moveToPosition(Z._.lastNode,4);if(J.checkEndOfBlock()){var K=new k.elementPath(J.endContainer),L=K.block||K.blockLimit;Z._.lastNode=L.getNextSourceNode(true);}}if(!Z._.lastNode){Z._.lastNode=Z._.docEndMarker=B.document.createText('');Z._.lastNode.insertAfter(I);}B=null;}var M=Z._.nextNode;I=Z._.lastNode;Z._.nextNode=null;while(M){var N=0,O=M.hasAscendant('pre'),P=M.type!=1,Q=0;if(!P){var R=M.getName();if(M.isBlockBoundary(Z.forceBrBreak&&!O&&{br:1})){if(R=='br')P=1;else if(!B&&!M.getChildCount()&&R!='hr'){A=M;C=M.equals(I);break;}if(B){B.setEndAt(M,3);if(R!='br')Z._.nextNode=M;}N=1;}else{if(M.getFirst()){if(!B){B=new k.range(Z.range.document);B.setStartAt(M,3);}M=M.getFirst();continue;}P=1;}}else if(M.type==3)if(u.test(M.getText()))P=0;if(P&&!B){B=new k.range(Z.range.document);B.setStartAt(M,3);}C=(!N||P)&&M.equals(I);if(B&&!N)while(!M.getNext(x)&&!C){var S=M.getParent();if(S.isBlockBoundary(Z.forceBrBreak&&!O&&{br:1})){N=1;P=0;C=C||S.equals(I);B.setEndAt(S,2);break;}M=S;P=1;C=M.equals(I);Q=1;}if(P)B.setEndAt(M,4);M=y(M,Q,I);C=!M;if(C||N&&B)break;}if(!A){if(!B){Z._.docEndMarker&&Z._.docEndMarker.remove();Z._.nextNode=null;return null;}var T=new k.elementPath(B.startContainer),U=T.blockLimit,V={div:1,th:1,td:1};A=T.block;if(!A&&!Z.enforceRealBlocks&&V[U.getName()]&&B.checkStartOfBlock()&&B.checkEndOfBlock())A=U;else if(!A||Z.enforceRealBlocks&&A.getName()=='li'){A=Z.range.document.createElement(z||'p');B.extractContents().appendTo(A);A.trim();
B.insertNode(A);E=F=true;}else if(A.getName()!='li'){if(!B.checkStartOfBlock()||!B.checkEndOfBlock()){A=A.clone(false);B.extractContents().appendTo(A);A.trim();var W=B.splitBlock();E=!W.wasStartOfBlock;F=!W.wasEndOfBlock;B.insertNode(A);}}else if(!C)Z._.nextNode=A.equals(I)?null:y(B.getBoundaryNodes().endNode,1,I);}if(E){var X=A.getPrevious();if(X&&X.type==1)if(X.getName()=='br')X.remove();else if(X.getLast()&&X.getLast().$.nodeName.toLowerCase()=='br')X.getLast().remove();}if(F){var Y=A.getLast();if(Y&&Y.type==1&&Y.getName()=='br')if(j||Y.getPrevious(v)||Y.getNext(v))Y.remove();}if(!Z._.nextNode)Z._.nextNode=C||A.equals(I)?null:y(A,1,I);return A;}};k.range.prototype.createIterator=function(){return new t(this);};})();q.add('panelbutton',{requires:['button'],beforeInit:function(t){t.ui.addHandler(4,r.panelButton.handler);}});h.UI_PANELBUTTON='panelbutton';(function(){var t=function(u){var w=this;var v=w._;if(v.state==0)return;w.createPanel(u);if(v.on){v.panel.hide();return;}v.panel.showBlock(w._.id,w.document.getById(w._.id),4);};r.panelButton=l.createClass({base:r.button,$:function(u){var w=this;var v=u.panel;delete u.panel;w.base(u);w.document=v&&v.parent&&v.parent.getDocument()||h.document;v.block={attributes:v.attributes};w.hasArrow=true;w.click=t;w._={panelDefinition:v};},statics:{handler:{create:function(u){return new r.panelButton(u);}}},proto:{createPanel:function(u){var v=this._;if(v.panel)return;var w=this._.panelDefinition||{},x=this._.panelDefinition.block,y=w.parent||h.document.getBody(),z=this._.panel=new r.floatPanel(u,y,w),A=z.addBlock(v.id,x),B=this;z.onShow=function(){if(B.className)this.element.getFirst().addClass(B.className+'_panel');B.setState(1);v.on=1;if(B.onOpen)B.onOpen();};z.onHide=function(C){if(B.className)this.element.getFirst().removeClass(B.className+'_panel');B.setState(B.modes&&B.modes[u.mode]?2:0);v.on=0;if(!C&&B.onClose)B.onClose();};z.onEscape=function(){z.hide();B.document.getById(v.id).focus();};if(this.onBlock)this.onBlock(z,A);A.onHide=function(){v.on=0;B.setState(2);};}}});})();q.add('floatpanel',{requires:['panel']});(function(){var t={},u=false;function v(w,x,y,z,A){var B=l.genKey(x.getUniqueId(),y.getUniqueId(),w.skinName,w.lang.dir,w.uiColor||'',z.css||'',A||''),C=t[B];if(!C){C=t[B]=new r.panel(x,z);C.element=y.append(o.createFromHtml(C.renderHtml(w),x));C.element.setStyles({display:'none',position:'absolute'});}return C;};r.floatPanel=l.createClass({$:function(w,x,y,z){y.forceIFrame=1;var A=x.getDocument(),B=v(w,A,x,y,z||0),C=B.element,D=C.getFirst().getFirst();
this.element=C;this._={panel:B,parentElement:x,definition:y,document:A,iframe:D,children:[],dir:w.lang.dir};w.on('mode',function(){this.hide();},this);},proto:{addBlock:function(w,x){return this._.panel.addBlock(w,x);},addListBlock:function(w,x){return this._.panel.addListBlock(w,x);},getBlock:function(w){return this._.panel.getBlock(w);},showBlock:function(w,x,y,z,A){var B=this._.panel,C=B.showBlock(w);this.allowBlur(false);u=1;var D=this.element,E=this._.iframe,F=this._.definition,G=x.getDocumentPosition(D.getDocument()),H=this._.dir=='rtl',I=G.x+(z||0),J=G.y+(A||0);if(H&&(y==1||y==4))I+=x.$.offsetWidth;else if(!H&&(y==2||y==3))I+=x.$.offsetWidth-1;if(y==3||y==4)J+=x.$.offsetHeight-1;this._.panel._.offsetParentId=x.getId();D.setStyles({top:J+'px',left:0,display:''});D.setOpacity(0);D.getFirst().removeStyle('width');if(!this._.blurSet){var K=j?E:new k.window(E.$.contentWindow);h.event.useCapture=true;K.on('blur',function(L){var N=this;if(!N.allowBlur())return;var M;if(j&&!N.allowBlur()||(M=L.data.getTarget())&&M.getName&&M.getName()!='iframe')return;if(N.visible&&!N._.activeChild&&!u)N.hide();},this);K.on('focus',function(){this._.focused=true;this.hideChild();this.allowBlur(true);},this);h.event.useCapture=false;this._.blurSet=1;}B.onEscape=l.bind(function(L){if(this.onEscape&&this.onEscape(L)===false)return false;},this);l.setTimeout(function(){if(H)I-=D.$.offsetWidth;var L=l.bind(function(){var M=D.getFirst();if(C.autoSize){var N=C.element.$;if(i.gecko||i.opera)N=N.parentNode;if(j)N=N.document.body;var O=N.scrollWidth;if(j&&i.quirks&&O>0)O+=(M.$.offsetWidth||0)-(M.$.clientWidth||0);O+=4;M.setStyle('width',O+'px');C.element.addClass('cke_frameLoaded');var P=C.element.$.scrollHeight;if(j&&i.quirks&&P>0)P+=(M.$.offsetHeight||0)-(M.$.clientHeight||0);M.setStyle('height',P+'px');B._.currentBlock.element.setStyle('display','none').removeStyle('display');}else M.removeStyle('height');var Q=B.element,R=Q.getWindow(),S=R.getScrollPosition(),T=R.getViewPaneSize(),U={height:Q.$.offsetHeight,width:Q.$.offsetWidth};if(H?I<0:I+U.width>T.width+S.x)I+=U.width*(H?1:-1);if(J+U.height>T.height+S.y)J-=U.height;if(j){var V=new o(D.$.offsetParent),W=V;if(W.getName()=='html')W=W.getDocument().getBody();if(W.getComputedStyle('direction')=='rtl')if(i.ie8Compat)I-=D.getDocument().getDocumentElement().$.scrollLeft*2;else I-=V.$.scrollWidth-V.$.clientWidth;}var X=D.getFirst(),Y;if(Y=X.getCustomData('activePanel'))Y.onHide&&Y.onHide.call(this,1);X.setCustomData('activePanel',this);
D.setStyles({top:J+'px',left:I+'px'});D.setOpacity(1);},this);B.isLoaded?L():B.onLoad=L;l.setTimeout(function(){E.$.contentWindow.focus();this.allowBlur(true);},0,this);},i.air?200:0,this);this.visible=1;if(this.onShow)this.onShow.call(this);u=0;},hide:function(){var w=this;if(w.visible&&(!w.onHide||w.onHide.call(w)!==true)){w.hideChild();w.element.setStyle('display','none');w.visible=0;w.element.getFirst().removeCustomData('activePanel');}},allowBlur:function(w){var x=this._.panel;if(w!=undefined)x.allowBlur=w;return x.allowBlur;},showAsChild:function(w,x,y,z,A,B){if(this._.activeChild==w&&w._.panel._.offsetParentId==y.getId())return;this.hideChild();w.onHide=l.bind(function(){l.setTimeout(function(){if(!this._.focused)this.hide();},0,this);},this);this._.activeChild=w;this._.focused=false;w.showBlock(x,y,z,A,B);if(i.ie7Compat||i.ie8&&i.ie6Compat)setTimeout(function(){w.element.getChild(0).$.style.cssText+='';},100);},hideChild:function(){var w=this._.activeChild;if(w){delete w.onHide;delete this._.activeChild;w.hide();}}}});h.on('instanceDestroyed',function(){var w=l.isEmpty(h.instances);for(var x in t){var y=t[x];if(w)y.destroy();else y.element.hide();}w&&(t={});});})();q.add('menu',{beforeInit:function(t){var u=t.config.menu_groups.split(','),v=t._.menuGroups={},w=t._.menuItems={};for(var x=0;x<u.length;x++)v[u[x]]=x+1;t.addMenuGroup=function(y,z){v[y]=z||100;};t.addMenuItem=function(y,z){if(v[z.group])w[y]=new h.menuItem(this,y,z);};t.addMenuItems=function(y){for(var z in y)this.addMenuItem(z,y[z]);};t.getMenuItem=function(y){return w[y];};},requires:['floatpanel']});(function(){h.menu=l.createClass({$:function(u,v){var y=this;v=y._.definition=v||{};y.id=l.getNextId();y.editor=u;y.items=[];y._.listeners=[];y._.level=v.level||1;var w=l.extend({},v.panel,{css:u.skin.editor.css,level:y._.level-1,block:{}}),x=w.block.attributes=w.attributes||{};!x.role&&(x.role='menu');y._.panelDefinition=w;},_:{onShow:function(){var C=this;var u=C.editor.getSelection();if(j)u&&u.lock();var v=u&&u.getStartElement(),w=C._.listeners,x=[];C.removeAll();for(var y=0;y<w.length;y++){var z=w[y](v,u);if(z)for(var A in z){var B=C.editor.getMenuItem(A);if(B&&(!B.command||C.editor.getCommand(B.command).state)){B.state=z[A];C.add(B);}}}},onClick:function(u){this.hide();if(u.onClick)u.onClick();else if(u.command)this.editor.execCommand(u.command);},onEscape:function(u){var v=this.parent;if(v){v._.panel.hideChild();var w=v._.panel._.panel._.currentBlock,x=w._.focusIndex;w._.markItem(x);
}else if(u==27){this.hide();this.editor.focus();}return false;},onHide:function(){if(j){var u=this.editor.getSelection();u&&u.unlock();}this.onHide&&this.onHide();},showSubMenu:function(u){var C=this;var v=C._.subMenu,w=C.items[u],x=w.getItems&&w.getItems();if(!x){C._.panel.hideChild();return;}var y=C._.panel.getBlock(C.id);y._.focusIndex=u;if(v)v.removeAll();else{v=C._.subMenu=new h.menu(C.editor,l.extend({},C._.definition,{level:C._.level+1},true));v.parent=C;v._.onClick=l.bind(C._.onClick,C);}for(var z in x){var A=C.editor.getMenuItem(z);if(A){A.state=x[z];v.add(A);}}var B=C._.panel.getBlock(C.id).element.getDocument().getById(C.id+String(u));v.show(B,2);}},proto:{add:function(u){if(!u.order)u.order=this.items.length;this.items.push(u);},removeAll:function(){this.items=[];},show:function(u,v,w,x){if(!this.parent){this._.onShow();if(!this.items.length)return;}v=v||(this.editor.lang.dir=='rtl'?2:1);var y=this.items,z=this.editor,A=this._.panel,B=this._.element;if(!A){A=this._.panel=new r.floatPanel(this.editor,h.document.getBody(),this._.panelDefinition,this._.level);A.onEscape=l.bind(function(M){if(this._.onEscape(M)===false)return false;},this);A.onHide=l.bind(function(){this._.onHide&&this._.onHide();},this);var C=A.addBlock(this.id,this._.panelDefinition.block);C.autoSize=true;var D=C.keys;D[40]='next';D[9]='next';D[38]='prev';D[2000+9]='prev';D[32]='click';D[z.lang.dir=='rtl'?37:39]='click';B=this._.element=C.element;B.addClass(z.skinClass);var E=B.getDocument();E.getBody().setStyle('overflow','hidden');E.getElementsByTag('html').getItem(0).setStyle('overflow','hidden');this._.itemOverFn=l.addFunction(function(M){var N=this;clearTimeout(N._.showSubTimeout);N._.showSubTimeout=l.setTimeout(N._.showSubMenu,z.config.menu_subMenuDelay||400,N,[M]);},this);this._.itemOutFn=l.addFunction(function(M){clearTimeout(this._.showSubTimeout);},this);this._.itemClickFn=l.addFunction(function(M){var O=this;var N=O.items[M];if(N.state==0){O.hide();return;}if(N.getItems)O._.showSubMenu(M);else O._.onClick(N);},this);}t(y);var F=z.container.getChild(1),G=F.hasClass('cke_mixed_dir_content')?' cke_mixed_dir_content':'',H=['<div class="cke_menu'+G+'" role="presentation">'],I=y.length,J=I&&y[0].group;for(var K=0;K<I;K++){var L=y[K];if(J!=L.group){H.push('<div class="cke_menuseparator" role="separator"></div>');J=L.group;}L.render(this,K,H);}H.push('</div>');B.setHtml(H.join(''));r.fire('ready',this);if(this.parent)this.parent._.panel.showAsChild(A,this.id,u,v,w,x);else A.showBlock(this.id,u,v,w,x);
z.fire('menuShow',[A]);},addListener:function(u){this._.listeners.push(u);},hide:function(){var u=this;u._.onHide&&u._.onHide();u._.panel&&u._.panel.hide();}}});function t(u){u.sort(function(v,w){if(v.group<w.group)return-1;else if(v.group>w.group)return 1;return v.order<w.order?-1:v.order>w.order?1:0;});};h.menuItem=l.createClass({$:function(u,v,w){var x=this;l.extend(x,w,{order:0,className:'cke_button_'+v});x.group=u._.menuGroups[x.group];x.editor=u;x.name=v;},proto:{render:function(u,v,w){var D=this;var x=u.id+String(v),y=typeof D.state=='undefined'?2:D.state,z=' cke_'+(y==1?'on':y==0?'disabled':'off'),A=D.label;if(D.className)z+=' '+D.className;var B=D.getItems;w.push('<span class="cke_menuitem'+(D.icon&&D.icon.indexOf('.png')==-1?' cke_noalphafix':'')+'">'+'<a id="',x,'" class="',z,'" href="javascript:void(\'',(D.label||'').replace("'",''),'\')" title="',D.label,'" tabindex="-1"_cke_focus=1 hidefocus="true" role="menuitem"'+(B?'aria-haspopup="true"':'')+(y==0?'aria-disabled="true"':'')+(y==1?'aria-pressed="true"':''));if(i.opera||i.gecko&&i.mac)w.push(' onkeypress="return false;"');if(i.gecko)w.push(' onblur="this.style.cssText = this.style.cssText;"');var C=(D.iconOffset||0)*-16;w.push(' onmouseover="CKEDITOR.tools.callFunction(',u._.itemOverFn,',',v,');" onmouseout="CKEDITOR.tools.callFunction(',u._.itemOutFn,',',v,');" onclick="CKEDITOR.tools.callFunction(',u._.itemClickFn,',',v,'); return false;"><span class="cke_icon_wrapper"><span class="cke_icon"'+(D.icon?' style="background-image:url('+h.getUrl(D.icon)+');background-position:0 '+C+'px;"':'')+'></span></span>'+'<span class="cke_label">');if(B)w.push('<span class="cke_menuarrow">','<span>&#',D.editor.lang.dir=='rtl'?'9668':'9658',';</span>','</span>');w.push(A,'</span></a></span>');}}});})();p.menu_groups='clipboard,form,tablecell,tablecellproperties,tablerow,tablecolumn,table,anchor,link,image,flash,checkbox,radio,textfield,hiddenfield,imagebutton,button,select,textarea,div';(function(){var t;q.add('editingblock',{init:function(u){if(!u.config.editingBlock)return;u.on('themeSpace',function(v){if(v.data.space=='contents')v.data.html+='<br>';});u.on('themeLoaded',function(){u.fireOnce('editingBlockReady');});u.on('uiReady',function(){u.setMode(u.config.startupMode);});u.on('afterSetData',function(){if(!t){function v(){t=true;u.getMode().loadData(u.getData());t=false;};if(u.mode)v();else u.on('mode',function(){if(u.mode){v();u.removeListener('mode',arguments.callee);}});}});u.on('beforeGetData',function(){if(!t&&u.mode){t=true;
u.setData(u.getMode().getData(),null,1);t=false;}});u.on('getSnapshot',function(v){if(u.mode)v.data=u.getMode().getSnapshotData();});u.on('loadSnapshot',function(v){if(u.mode)u.getMode().loadSnapshotData(v.data);});u.on('mode',function(v){v.removeListener();i.webkit&&u.container.on('focus',function(){u.focus();});if(u.config.startupFocus)u.focus();setTimeout(function(){u.fireOnce('instanceReady');h.fire('instanceReady',null,u);},0);});u.on('destroy',function(){var v=this;if(v.mode)v._.modes[v.mode].unload(v.getThemeSpace('contents'));});}});h.editor.prototype.mode='';h.editor.prototype.addMode=function(u,v){v.name=u;(this._.modes||(this._.modes={}))[u]=v;};h.editor.prototype.setMode=function(u){this.fire('beforeSetMode',{newMode:u});var v,w=this.getThemeSpace('contents'),x=this.checkDirty();if(this.mode){if(u==this.mode)return;this.fire('beforeModeUnload');var y=this.getMode();v=y.getData();y.unload(w);this.mode='';}w.setHtml('');var z=this.getMode(u);if(!z)throw '[CKEDITOR.editor.setMode] Unknown mode "'+u+'".';if(!x)this.on('mode',function(){this.resetDirty();this.removeListener('mode',arguments.callee);});z.load(w,typeof v!='string'?this.getData():v);};h.editor.prototype.getMode=function(u){return this._.modes&&this._.modes[u||this.mode];};h.editor.prototype.focus=function(){this.forceNextSelectionCheck();var u=this.getMode();if(u)u.focus();};})();p.startupMode='wysiwyg';p.editingBlock=true;(function(){function t(){var I=this;try{var F=I.getSelection();if(!F||!F.document.getWindow().$)return;var G=F.getStartElement(),H=new k.elementPath(G);if(!H.compare(I._.selectionPreviousPath)){I._.selectionPreviousPath=H;I.fire('selectionChange',{selection:F,path:H,element:G});}}catch(J){}};var u,v;function w(){v=true;if(u)return;x.call(this);u=l.setTimeout(x,200,this);};function x(){u=null;if(v){l.setTimeout(t,0,this);v=false;}};function y(F){function G(J){return J&&J.type==1&&J.getName() in m.$removeEmpty;};var H=F.startContainer,I=F.startOffset;if(H.type==3)return false;return!l.trim(H.getHtml())?G(H):G(H.getChild(I-1))||G(H.getChild(I));};var z={modes:{wysiwyg:1,source:1},readOnly:j||i.webkit,exec:function(F){switch(F.mode){case 'wysiwyg':F.document.$.execCommand('SelectAll',false,null);F.forceNextSelectionCheck();F.selectionChange();break;case 'source':var G=F.textarea.$;if(j)G.createTextRange().execCommand('SelectAll');else{G.selectionStart=0;G.selectionEnd=G.value.length;}G.focus();}},canUndo:false};function A(F){D(F);var G=F.createText('​');F.setCustomData('cke-fillingChar',G);
return G;};function B(F){return F&&F.getCustomData('cke-fillingChar');};function C(F){var G=F&&B(F);if(G)if(G.getCustomData('ready'))D(F);else G.setCustomData('ready',1);};function D(F){var G=F&&F.removeCustomData('cke-fillingChar');if(G){G.setText(G.getText().replace(/\u200B/g,''));G=0;}};q.add('selection',{init:function(F){if(i.webkit){F.on('selectionChange',function(){C(F.document);});F.on('beforeSetMode',function(){D(F.document);});F.on('key',function(K){switch(K.data.keyCode){case 13:case 2000+13:case 37:case 39:case 8:D(F.document);}},null,null,10);var G,H;function I(){var K=F.document,L=B(K);if(L){var M=K.$.defaultView.getSelection();if(M.type=='Caret'&&M.anchorNode==L.$)H=1;G=L.getText();L.setText(G.replace(/\u200B/g,''));}};function J(){var K=F.document,L=B(K);if(L){L.setText(G);if(H){K.$.defaultView.getSelection().setPosition(L.$,L.getLength());H=0;}}};F.on('beforeUndoImage',I);F.on('afterUndoImage',J);F.on('beforeGetData',I,null,null,0);F.on('getData',J);}F.on('contentDom',function(){var K=F.document,L=K.getBody(),M=K.getDocumentElement();if(j){var N,O,P=1;L.on('focusin',function(T){if(T.data.$.srcElement.nodeName!='BODY')return;if(N){if(P){try{N.select();}catch(V){}var U=K.getCustomData('cke_locked_selection');if(U){U.unlock();U.lock();}}N=null;}});L.on('focus',function(){O=1;S();});L.on('beforedeactivate',function(T){if(T.data.$.toElement)return;O=0;P=1;});if(j&&i.version<8)F.on('blur',function(T){try{F.document&&F.document.$.selection.empty();}catch(U){}});M.on('mousedown',function(){P=0;});M.on('mouseup',function(){P=1;});if(j&&(i.ie7Compat||i.version<8||i.quirks))M.on('click',function(T){if(T.data.getTarget().getName()=='html')F.getSelection().getRanges()[0].select();});var Q;L.on('mousedown',function(T){if(T.data.$.button==2){var U=F.document.$.selection;if(U.type=='None')Q=F.window.getScrollPosition();}R();});L.on('mouseup',function(T){if(T.data.$.button==2&&Q){F.document.$.documentElement.scrollLeft=Q.x;F.document.$.documentElement.scrollTop=Q.y;}Q=null;O=1;setTimeout(function(){S(true);},0);});L.on('keydown',R);L.on('keyup',function(){O=1;S();});K.on('selectionchange',S);function R(){O=0;};function S(T){if(O){var U=F.document,V=F.getSelection(),W=V&&V.getNative();if(T&&W&&W.type=='None')if(!U.$.queryCommandEnabled('InsertImage')){l.setTimeout(S,50,this,true);return;}var X;if(W&&W.type&&W.type!='Control'&&(X=W.createRange())&&(X=X.parentElement())&&(X=X.nodeName)&&X.toLowerCase() in {input:1,textarea:1})return;N=W&&V.getRanges()[0];w.call(F);
}};}else{K.on('mouseup',w,F);K.on('keyup',w,F);}});F.on('contentDomUnload',F.forceNextSelectionCheck,F);F.addCommand('selectAll',z);F.ui.addButton('SelectAll',{label:F.lang.selectAll,command:'selectAll'});F.selectionChange=w;}});h.editor.prototype.getSelection=function(){return this.document&&this.document.getSelection();};h.editor.prototype.forceNextSelectionCheck=function(){delete this._.selectionPreviousPath;};n.prototype.getSelection=function(){var F=new k.selection(this);return!F||F.isInvalid?null:F;};h.SELECTION_NONE=1;h.SELECTION_TEXT=2;h.SELECTION_ELEMENT=3;k.selection=function(F){var I=this;var G=F.getCustomData('cke_locked_selection');if(G)return G;I.document=F;I.isLocked=0;I._={cache:{}};if(j){var H=I.getNative().createRange();if(!H||H.item&&H.item(0).ownerDocument!=I.document.$||H.parentElement&&H.parentElement().ownerDocument!=I.document.$)I.isInvalid=true;}return I;};var E={img:1,hr:1,li:1,table:1,tr:1,td:1,th:1,embed:1,object:1,ol:1,ul:1,a:1,input:1,form:1,select:1,textarea:1,button:1,fieldset:1,thead:1,tfoot:1};k.selection.prototype={getNative:j?function(){return this._.cache.nativeSel||(this._.cache.nativeSel=this.document.$.selection);}:function(){return this._.cache.nativeSel||(this._.cache.nativeSel=this.document.getWindow().$.getSelection());},getType:j?function(){var F=this._.cache;if(F.type)return F.type;var G=1;try{var H=this.getNative(),I=H.type;if(I=='Text')G=2;if(I=='Control')G=3;if(H.createRange().parentElement)G=2;}catch(J){}return F.type=G;}:function(){var F=this._.cache;if(F.type)return F.type;var G=2,H=this.getNative();if(!H)G=1;else if(H.rangeCount==1){var I=H.getRangeAt(0),J=I.startContainer;if(J==I.endContainer&&J.nodeType==1&&I.endOffset-I.startOffset==1&&E[J.childNodes[I.startOffset].nodeName.toLowerCase()])G=3;}return F.type=G;},getRanges:(function(){var F=j?(function(){function G(I){return new k.node(I).getIndex();};var H=function(I,J){I=I.duplicate();I.collapse(J);var K=I.parentElement(),L=K.ownerDocument;if(!K.hasChildNodes())return{container:K,offset:0};var M=K.children,N,O,P=I.duplicate(),Q=0,R=M.length-1,S=-1,T,U;while(Q<=R){S=Math.floor((Q+R)/2);N=M[S];P.moveToElementText(N);T=P.compareEndPoints('StartToStart',I);if(T>0)R=S-1;else if(T<0)Q=S+1;else if(i.ie9Compat&&N.tagName=='BR'){var V='cke_range_marker';I.execCommand('CreateBookmark',false,V);N=L.getElementsByName(V)[0];var W=G(N);K.removeChild(N);return{container:K,offset:W};}else return{container:K,offset:G(N)};}if(S==-1||S==M.length-1&&T<0){P.moveToElementText(K);
P.setEndPoint('StartToStart',I);U=P.text.replace(/(\r\n|\r)/g,'\n').length;M=K.childNodes;if(!U){N=M[M.length-1];if(N.nodeType==1)return{container:K,offset:M.length};else return{container:N,offset:N.nodeValue.length};}var X=M.length;while(U>0)U-=M[--X].nodeValue.length;return{container:M[X],offset:-U};}else{P.collapse(T>0?true:false);P.setEndPoint(T>0?'StartToStart':'EndToStart',I);U=P.text.replace(/(\r\n|\r)/g,'\n').length;if(!U)return{container:K,offset:G(N)+(T>0?0:1)};while(U>0)try{O=N[T>0?'previousSibling':'nextSibling'];U-=O.nodeValue.length;N=O;}catch(Y){return{container:K,offset:G(N)};}return{container:N,offset:T>0?-U:N.nodeValue.length+U};}};return function(){var S=this;var I=S.getNative(),J=I&&I.createRange(),K=S.getType(),L;if(!I)return[];if(K==2){L=new k.range(S.document);var M=H(J,true);L.setStart(new k.node(M.container),M.offset);M=H(J);L.setEnd(new k.node(M.container),M.offset);if(L.endContainer.getPosition(L.startContainer)&4&&L.endOffset<=L.startContainer.getIndex())L.collapse();return[L];}else if(K==3){var N=[];for(var O=0;O<J.length;O++){var P=J.item(O),Q=P.parentNode,R=0;L=new k.range(S.document);for(;R<Q.childNodes.length&&Q.childNodes[R]!=P;R++){}L.setStart(new k.node(Q),R);L.setEnd(new k.node(Q),R+1);N.push(L);}return N;}return[];};})():function(){var G=[],H,I=this.document,J=this.getNative();if(!J)return G;if(!J.rangeCount){H=new k.range(I);H.moveToElementEditStart(I.getBody());G.push(H);}for(var K=0;K<J.rangeCount;K++){var L=J.getRangeAt(K);H=new k.range(I);H.setStart(new k.node(L.startContainer),L.startOffset);H.setEnd(new k.node(L.endContainer),L.endOffset);G.push(H);}return G;};return function(G){var H=this._.cache;if(H.ranges&&!G)return H.ranges;else if(!H.ranges)H.ranges=new k.rangeList(F.call(this));if(G){var I=H.ranges;for(var J=0;J<I.length;J++){var K=I[J],L=K.getCommonAncestor();if(L.isReadOnly())I.splice(J,1);if(K.collapsed)continue;var M=K.startContainer,N=K.endContainer,O=K.startOffset,P=K.endOffset,Q=K.clone(),R;if(R=M.isReadOnly())K.setStartAfter(R);if(M&&M.type==3)if(O>=M.getLength())Q.setStartAfter(M);else Q.setStartBefore(M);if(N&&N.type==3)if(!P)Q.setEndBefore(N);else Q.setEndAfter(N);var S=new k.walker(Q);S.evaluator=function(T){if(T.type==1&&T.isReadOnly()){var U=K.clone();K.setEndBefore(T);if(K.collapsed)I.splice(J--,1);if(!(T.getPosition(Q.endContainer)&16)){U.setStartAfter(T);if(!U.collapsed)I.splice(J+1,0,U);}return true;}return false;};S.next();}}return H.ranges;};})(),getStartElement:function(){var M=this;var F=M._.cache;
if(F.startElement!==undefined)return F.startElement;var G,H=M.getNative();switch(M.getType()){case 3:return M.getSelectedElement();case 2:var I=M.getRanges()[0];if(I){if(!I.collapsed){I.optimize();while(1){var J=I.startContainer,K=I.startOffset;if(K==(J.getChildCount?J.getChildCount():J.getLength())&&!J.isBlockBoundary())I.setStartAfter(J);else break;}G=I.startContainer;if(G.type!=1)return G.getParent();G=G.getChild(I.startOffset);if(!G||G.type!=1)G=I.startContainer;else{var L=G.getFirst();while(L&&L.type==1){G=L;L=L.getFirst();}}}else{G=I.startContainer;if(G.type!=1)G=G.getParent();}G=G.$;}}return F.startElement=G?new o(G):null;},getSelectedElement:function(){var F=this._.cache;if(F.selectedElement!==undefined)return F.selectedElement;var G=this,H=l.tryThese(function(){return G.getNative().createRange().item(0);},function(){var I=G.getRanges()[0],J,K;for(var L=2;L&&!((J=I.getEnclosedNode())&&J.type==1&&E[J.getName()]&&(K=J));L--)I.shrink(1);return K.$;});return F.selectedElement=H?new o(H):null;},lock:function(){var F=this;F.getRanges();F.getStartElement();F.getSelectedElement();F._.cache.nativeSel={};F.isLocked=1;F.document.setCustomData('cke_locked_selection',F);},unlock:function(F){var K=this;var G=K.document,H=G.getCustomData('cke_locked_selection');if(H){G.setCustomData('cke_locked_selection',null);if(F){var I=H.getSelectedElement(),J=!I&&H.getRanges();K.isLocked=0;K.reset();G.getBody().focus();if(I)K.selectElement(I);else K.selectRanges(J);}}if(!H||!F){K.isLocked=0;K.reset();}},reset:function(){this._.cache={};},selectElement:function(F){var H=this;if(H.isLocked){var G=new k.range(H.document);G.setStartBefore(F);G.setEndAfter(F);H._.cache.selectedElement=F;H._.cache.startElement=F;H._.cache.ranges=new k.rangeList(G);H._.cache.type=3;return;}G=new k.range(F.getDocument());G.setStartBefore(F);G.setEndAfter(F);G.select();H.document.fire('selectionchange');H.reset();},selectRanges:function(F){var T=this;if(T.isLocked){T._.cache.selectedElement=null;T._.cache.startElement=F[0]&&F[0].getTouchedStartNode();T._.cache.ranges=new k.rangeList(F);T._.cache.type=2;return;}if(j){if(F.length>1){var G=F[F.length-1];F[0].setEnd(G.endContainer,G.endOffset);F.length=1;}if(F[0])F[0].select();T.reset();}else{var H=T.getNative();if(!H)return;if(F.length){H.removeAllRanges();i.webkit&&D(T.document);}for(var I=0;I<F.length;I++){if(I<F.length-1){var J=F[I],K=F[I+1],L=J.clone();L.setStart(J.endContainer,J.endOffset);L.setEnd(K.startContainer,K.startOffset);if(!L.collapsed){L.shrink(1,true);
var M=L.getCommonAncestor(),N=L.getEnclosedNode();if(M.isReadOnly()||N&&N.isReadOnly()){K.setStart(J.startContainer,J.startOffset);F.splice(I--,1);continue;}}}var O=F[I],P=T.document.$.createRange(),Q=O.startContainer;if(O.collapsed&&(i.opera||i.gecko&&i.version<10900)&&Q.type==1&&!Q.getChildCount())Q.appendText('');if(O.collapsed&&i.webkit&&y(O)){var R=A(T.document);O.insertNode(R);var S=R.getNext();if(S&&!R.getPrevious()&&S.type==1&&S.getName()=='br'){D(T.document);O.moveToPosition(S,3);}else O.moveToPosition(R,4);}P.setStart(O.startContainer.$,O.startOffset);try{P.setEnd(O.endContainer.$,O.endOffset);}catch(U){if(U.toString().indexOf('NS_ERROR_ILLEGAL_VALUE')>=0){O.collapse(1);P.setEnd(O.endContainer.$,O.endOffset);}else throw U;}H.addRange(P);}T.reset();}},createBookmarks:function(F){return this.getRanges().createBookmarks(F);},createBookmarks2:function(F){return this.getRanges().createBookmarks2(F);},selectBookmarks:function(F){var G=[];for(var H=0;H<F.length;H++){var I=new k.range(this.document);I.moveToBookmark(F[H]);G.push(I);}this.selectRanges(G);return this;},getCommonAncestor:function(){var F=this.getRanges(),G=F[0].startContainer,H=F[F.length-1].endContainer;return G.getCommonAncestor(H);},scrollIntoView:function(){var F=this.getStartElement();F.scrollIntoView();}};})();(function(){var t=k.walker.whitespaces(true),u=/\ufeff|\u00a0/,v={table:1,tbody:1,tr:1};k.range.prototype.select=j?function(w){var H=this;var x=H.collapsed,y,z,A,B=H.getEnclosedNode();if(B)try{A=H.document.$.body.createControlRange();A.addElement(B.$);A.select();return;}catch(I){}if(H.startContainer.type==1&&H.startContainer.getName() in v||H.endContainer.type==1&&H.endContainer.getName() in v)H.shrink(1,true);var C=H.createBookmark(),D=C.startNode,E;if(!x)E=C.endNode;A=H.document.$.body.createTextRange();A.moveToElementText(D.$);A.moveStart('character',1);if(E){var F=H.document.$.body.createTextRange();F.moveToElementText(E.$);A.setEndPoint('EndToEnd',F);A.moveEnd('character',-1);}else{var G=D.getNext(t);y=!(G&&G.getText&&G.getText().match(u))&&(w||!D.hasPrevious()||D.getPrevious().is&&D.getPrevious().is('br'));z=H.document.createElement('span');z.setHtml('&#65279;');z.insertBefore(D);if(y)H.document.createText('\ufeff').insertBefore(D);}H.setStartBefore(D);D.remove();if(x){if(y){A.moveStart('character',-1);A.select();H.document.$.selection.clear();}else A.select();H.moveToPosition(z,3);z.remove();}else{H.setEndBefore(E);E.remove();A.select();}H.document.fire('selectionchange');
}:function(){this.document.getSelection().selectRanges([this]);};})();(function(){var t={elements:{$:function(u){var v=u.attributes,w=v&&v['data-cke-realelement'],x=w&&new h.htmlParser.fragment.fromHtml(decodeURIComponent(w)),y=x&&x.children[0];if(y&&u.attributes['data-cke-resizable']){var z=u.attributes.style;if(z){var A=/(?:^|\s)width\s*:\s*(\d+)/i.exec(z),B=A&&A[1];A=/(?:^|\s)height\s*:\s*(\d+)/i.exec(z);var C=A&&A[1];if(B)y.attributes.width=B;if(C)y.attributes.height=C;}}return y;}}};q.add('fakeobjects',{requires:['htmlwriter'],afterInit:function(u){var v=u.dataProcessor,w=v&&v.htmlFilter;if(w)w.addRules(t);}});})();h.editor.prototype.createFakeElement=function(t,u,v,w){var x=this.lang.fakeobjects,y=x[v]||x.unknown,z={'class':u,src:h.getUrl('images/spacer.gif'),'data-cke-realelement':encodeURIComponent(t.getOuterHtml()),'data-cke-real-node-type':t.type,alt:y,title:y,align:t.getAttribute('align')||''};if(v)z['data-cke-real-element-type']=v;if(w)z['data-cke-resizable']=w;return this.document.createElement('img',{attributes:z});};h.editor.prototype.createFakeParserElement=function(t,u,v,w){var x=this.lang.fakeobjects,y=x[v]||x.unknown,z,A=new h.htmlParser.basicWriter();t.writeHtml(A);z=A.getHtml();var B={'class':u,src:h.getUrl('images/spacer.gif'),'data-cke-realelement':encodeURIComponent(z),'data-cke-real-node-type':t.type,alt:y,title:y,align:t.attributes.align||''};if(v)B['data-cke-real-element-type']=v;if(w)B['data-cke-resizable']=w;return new h.htmlParser.element('img',B);};h.editor.prototype.restoreRealElement=function(t){if(t.data('cke-real-node-type')!=1)return null;return o.createFromHtml(decodeURIComponent(t.data('cke-realelement')),this.document);};q.add('richcombo',{requires:['floatpanel','listblock','button'],beforeInit:function(t){t.ui.addHandler(3,r.richCombo.handler);}});h.UI_RICHCOMBO='richcombo';r.richCombo=l.createClass({$:function(t){var v=this;l.extend(v,t,{title:t.label,modes:{wysiwyg:1}});var u=v.panel||{};delete v.panel;v.id=l.getNextNumber();v.document=u&&u.parent&&u.parent.getDocument()||h.document;u.className=(u.className||'')+' cke_rcombopanel';u.block={multiSelect:u.multiSelect,attributes:u.attributes};v._={panelDefinition:u,items:{},state:2};},statics:{handler:{create:function(t){return new r.richCombo(t);}}},proto:{renderHtml:function(t){var u=[];this.render(t,u);return u.join('');},render:function(t,u){var v=i,w='cke_'+this.id,x=l.addFunction(function(B){var E=this;var C=E._;if(C.state==0)return;E.createPanel(t);if(C.on){C.panel.hide();
return;}E.commit();var D=E.getValue();if(D)C.list.mark(D);else C.list.unmarkAll();C.panel.showBlock(E.id,new o(B),4);},this),y={id:w,combo:this,focus:function(){var B=h.document.getById(w).getChild(1);B.focus();},clickFn:x};function z(){var C=this;var B=C.modes[t.mode]?2:0;C.setState(t.readOnly&&!C.readOnly?0:B);C.setValue('');};t.on('mode',z,this);!this.readOnly&&t.on('readOnly',z,this);var A=l.addFunction(function(B,C){B=new k.event(B);var D=B.getKeystroke();switch(D){case 13:case 32:case 40:l.callFunction(x,C);break;default:y.onkey(y,D);}B.preventDefault();});y.keyDownFn=A;u.push('<span class="cke_rcombo" role="presentation">','<span id=',w);if(this.className)u.push(' class="',this.className,' cke_off"');u.push(' role="presentation">','<span id="'+w+'_label" class=cke_label>',this.label,'</span>','<a hidefocus=true title="',this.title,'" tabindex="-1"',v.gecko&&v.version>=10900&&!v.hc?'':" href=\"javascript:void('"+this.label+"')\"",' role="button" aria-labelledby="',w,'_label" aria-describedby="',w,'_text" aria-haspopup="true"');if(i.opera||i.gecko&&i.mac)u.push(' onkeypress="return false;"');if(i.gecko)u.push(' onblur="this.style.cssText = this.style.cssText;"');u.push(' onkeydown="CKEDITOR.tools.callFunction( ',A,', event, this );" onclick="CKEDITOR.tools.callFunction(',x,', this); return false;"><span><span id="'+w+'_text" class="cke_text cke_inline_label">'+this.label+'</span>'+'</span>'+'<span class=cke_openbutton><span class=cke_icon>'+(i.hc?'&#9660;':i.air?'&nbsp;':'')+'</span></span>'+'</a>'+'</span>'+'</span>');if(this.onRender)this.onRender();return y;},createPanel:function(t){if(this._.panel)return;var u=this._.panelDefinition,v=this._.panelDefinition.block,w=u.parent||h.document.getBody(),x=new r.floatPanel(t,w,u),y=x.addListBlock(this.id,v),z=this;x.onShow=function(){if(z.className)this.element.getFirst().addClass(z.className+'_panel');z.setState(1);y.focus(!z.multiSelect&&z.getValue());z._.on=1;if(z.onOpen)z.onOpen();};x.onHide=function(A){if(z.className)this.element.getFirst().removeClass(z.className+'_panel');z.setState(z.modes&&z.modes[t.mode]?2:0);z._.on=0;if(!A&&z.onClose)z.onClose();};x.onEscape=function(){x.hide();z.document.getById('cke_'+z.id).getFirst().getNext().focus();};y.onClick=function(A,B){z.document.getWindow().focus();if(z.onClick)z.onClick.call(z,A,B);if(B)z.setValue(A,z._.items[A]);else z.setValue('');x.hide();};this._.panel=x;this._.list=y;x.getBlock(this.id).onHide=function(){z._.on=0;z.setState(2);};if(this.init)this.init();
},setValue:function(t,u){var w=this;w._.value=t;var v=w.document.getById('cke_'+w.id+'_text');if(v){if(!(t||u)){u=w.label;v.addClass('cke_inline_label');}else v.removeClass('cke_inline_label');v.setHtml(typeof u!='undefined'?u:t);}},getValue:function(){return this._.value||'';},unmarkAll:function(){this._.list.unmarkAll();},mark:function(t){this._.list.mark(t);},hideItem:function(t){this._.list.hideItem(t);},hideGroup:function(t){this._.list.hideGroup(t);},showAll:function(){this._.list.showAll();},add:function(t,u,v){this._.items[t]=v||t;this._.list.add(t,u,v);},startGroup:function(t){this._.list.startGroup(t);},commit:function(){var t=this;if(!t._.committed){t._.list.commit();t._.committed=1;r.fire('ready',t);}t._.committed=1;},setState:function(t){var u=this;if(u._.state==t)return;u.document.getById('cke_'+u.id).setState(t);u._.state=t;}}});r.prototype.addRichCombo=function(t,u){this.add(t,3,u);};q.add('htmlwriter');h.htmlWriter=l.createClass({base:h.htmlParser.basicWriter,$:function(){var v=this;v.base();v.indentationChars='\t';v.selfClosingEnd=' />';v.lineBreakChars='\n';v.forceSimpleAmpersand=0;v.sortAttributes=1;v._.indent=0;v._.indentation='';v._.inPre=0;v._.rules={};var t=m;for(var u in l.extend({},t.$nonBodyContent,t.$block,t.$listItem,t.$tableContent))v.setRules(u,{indent:1,breakBeforeOpen:1,breakAfterOpen:1,breakBeforeClose:!t[u]['#'],breakAfterClose:1});v.setRules('br',{breakAfterOpen:1});v.setRules('title',{indent:0,breakAfterOpen:0});v.setRules('style',{indent:0,breakBeforeClose:1});v.setRules('pre',{indent:0});},proto:{openTag:function(t,u){var w=this;var v=w._.rules[t];if(w._.indent)w.indentation();else if(v&&v.breakBeforeOpen){w.lineBreak();w.indentation();}w._.output.push('<',t);},openTagClose:function(t,u){var w=this;var v=w._.rules[t];if(u)w._.output.push(w.selfClosingEnd);else{w._.output.push('>');if(v&&v.indent)w._.indentation+=w.indentationChars;}if(v&&v.breakAfterOpen)w.lineBreak();t=='pre'&&(w._.inPre=1);},attribute:function(t,u){if(typeof u=='string'){this.forceSimpleAmpersand&&(u=u.replace(/&amp;/g,'&'));u=l.htmlEncodeAttr(u);}this._.output.push(' ',t,'="',u,'"');},closeTag:function(t){var v=this;var u=v._.rules[t];if(u&&u.indent)v._.indentation=v._.indentation.substr(v.indentationChars.length);if(v._.indent)v.indentation();else if(u&&u.breakBeforeClose){v.lineBreak();v.indentation();}v._.output.push('</',t,'>');t=='pre'&&(v._.inPre=0);if(u&&u.breakAfterClose)v.lineBreak();},text:function(t){var u=this;if(u._.indent){u.indentation();
!u._.inPre&&(t=l.ltrim(t));}u._.output.push(t);},comment:function(t){if(this._.indent)this.indentation();this._.output.push('<!--',t,'-->');},lineBreak:function(){var t=this;if(!t._.inPre&&t._.output.length>0)t._.output.push(t.lineBreakChars);t._.indent=1;},indentation:function(){var t=this;if(!t._.inPre)t._.output.push(t._.indentation);t._.indent=0;},setRules:function(t,u){var v=this._.rules[t];if(v)l.extend(v,u,true);else this._.rules[t]=u;}}});q.add('menubutton',{requires:['button','menu'],beforeInit:function(t){t.ui.addHandler(5,r.menuButton.handler);}});h.UI_MENUBUTTON='menubutton';(function(){var t=function(u){var v=this._;if(v.state===0)return;v.previousState=v.state;var w=v.menu;if(!w){w=v.menu=new h.menu(u,{panel:{className:u.skinClass+' cke_contextmenu',attributes:{'aria-label':u.lang.common.options}}});w.onHide=l.bind(function(){this.setState(this.modes&&this.modes[u.mode]?v.previousState:0);},this);if(this.onMenu)w.addListener(this.onMenu);}if(v.on){w.hide();return;}this.setState(1);w.show(h.document.getById(this._.id),4);};r.menuButton=l.createClass({base:r.button,$:function(u){var v=u.panel;delete u.panel;this.base(u);this.hasArrow=true;this.click=t;},statics:{handler:{create:function(u){return new r.menuButton(u);}}}});})();q.add('dialogui');(function(){var t=function(B){var E=this;E._||(E._={});E._['default']=E._.initValue=B['default']||'';E._.required=B.required||false;var C=[E._];for(var D=1;D<arguments.length;D++)C.push(arguments[D]);C.push(true);l.extend.apply(l,C);return E._;},u={build:function(B,C,D){return new r.dialog.textInput(B,C,D);}},v={build:function(B,C,D){return new r.dialog[C.type](B,C,D);}},w={build:function(B,C,D){var E=C.children,F,G=[],H=[];for(var I=0;I<E.length&&(F=E[I]);I++){var J=[];G.push(J);H.push(h.dialog._.uiElementBuilders[F.type].build(B,F,J));}return new r.dialog[C.type](B,H,G,D,C);}},x={isChanged:function(){return this.getValue()!=this.getInitValue();},reset:function(B){this.setValue(this.getInitValue(),B);},setInitValue:function(){this._.initValue=this.getValue();},resetInitValue:function(){this._.initValue=this._['default'];},getInitValue:function(){return this._.initValue;}},y=l.extend({},r.dialog.uiElement.prototype.eventProcessors,{onChange:function(B,C){if(!this._.domOnChangeRegistered){B.on('load',function(){this.getInputElement().on('change',function(){if(!B.parts.dialog.isVisible())return;this.fire('change',{value:this.getValue()});},this);},this);this._.domOnChangeRegistered=true;}this.on('change',C);
}},true),z=/^on([A-Z]\w+)/,A=function(B){for(var C in B){if(z.test(C)||C=='title'||C=='type')delete B[C];}return B;};l.extend(r.dialog,{labeledElement:function(B,C,D,E){if(arguments.length<4)return;var F=t.call(this,C);F.labelId=l.getNextId()+'_label';var G=this._.children=[],H=function(){var I=[],J=C.required?' cke_required':'';if(C.labelLayout!='horizontal')I.push('<label class="cke_dialog_ui_labeled_label'+J+'" ',' id="'+F.labelId+'"',' for="'+F.inputId+'"',' style="'+C.labelStyle+'">',C.label,'</label>','<div class="cke_dialog_ui_labeled_content" role="presentation">',E.call(this,B,C),'</div>');else{var K={type:'hbox',widths:C.widths,padding:0,children:[{type:'html',html:'<label class="cke_dialog_ui_labeled_label'+J+'"'+' id="'+F.labelId+'"'+' for="'+F.inputId+'"'+' style="'+C.labelStyle+'">'+l.htmlEncode(C.label)+'</span>'},{type:'html',html:'<span class="cke_dialog_ui_labeled_content">'+E.call(this,B,C)+'</span>'}]};h.dialog._.uiElementBuilders.hbox.build(B,K,I);}return I.join('');};r.dialog.uiElement.call(this,B,C,D,'div',null,{role:'presentation'},H);},textInput:function(B,C,D){if(arguments.length<3)return;t.call(this,C);var E=this._.inputId=l.getNextId()+'_textInput',F={'class':'cke_dialog_ui_input_'+C.type,id:E,type:'text'},G;if(C.validate)this.validate=C.validate;if(C.maxLength)F.maxlength=C.maxLength;if(C.size)F.size=C.size;if(C.controlStyle)F.style=C.controlStyle;var H=this,I=false;B.on('load',function(){H.getInputElement().on('keydown',function(K){if(K.data.getKeystroke()==13)I=true;});H.getInputElement().on('keyup',function(K){if(K.data.getKeystroke()==13&&I){B.getButton('ok')&&setTimeout(function(){B.getButton('ok').click();},0);I=false;}},null,null,1000);});var J=function(){var K=['<div class="cke_dialog_ui_input_',C.type,'" role="presentation"'];if(C.width)K.push('style="width:'+C.width+'" ');K.push('><input ');F['aria-labelledby']=this._.labelId;this._.required&&(F['aria-required']=this._.required);for(var L in F)K.push(L+'="'+F[L]+'" ');K.push(' /></div>');return K.join('');};r.dialog.labeledElement.call(this,B,C,D,J);},textarea:function(B,C,D){if(arguments.length<3)return;t.call(this,C);var E=this,F=this._.inputId=l.getNextId()+'_textarea',G={};if(C.validate)this.validate=C.validate;G.rows=C.rows||5;G.cols=C.cols||20;var H=function(){G['aria-labelledby']=this._.labelId;this._.required&&(G['aria-required']=this._.required);var I=['<div class="cke_dialog_ui_input_textarea" role="presentation"><textarea class="cke_dialog_ui_input_textarea" id="',F,'" '];
for(var J in G)I.push(J+'="'+l.htmlEncode(G[J])+'" ');I.push('>',l.htmlEncode(E._['default']),'</textarea></div>');return I.join('');};r.dialog.labeledElement.call(this,B,C,D,H);},checkbox:function(B,C,D){if(arguments.length<3)return;var E=t.call(this,C,{'default':!!C['default']});if(C.validate)this.validate=C.validate;var F=function(){var G=l.extend({},C,{id:C.id?C.id+'_checkbox':l.getNextId()+'_checkbox'},true),H=[],I=l.getNextId()+'_label',J={'class':'cke_dialog_ui_checkbox_input',type:'checkbox','aria-labelledby':I};A(G);if(C['default'])J.checked='checked';if(typeof G.controlStyle!='undefined')G.style=G.controlStyle;E.checkbox=new r.dialog.uiElement(B,G,H,'input',null,J);H.push(' <label id="',I,'" for="',J.id,'">',l.htmlEncode(C.label),'</label>');return H.join('');};r.dialog.uiElement.call(this,B,C,D,'span',null,null,F);},radio:function(B,C,D){if(arguments.length<3)return;t.call(this,C);if(!this._['default'])this._['default']=this._.initValue=C.items[0][1];if(C.validate)this.validate=C.valdiate;var E=[],F=this,G=function(){var H=[],I=[],J={'class':'cke_dialog_ui_radio_item','aria-labelledby':this._.labelId},K=C.id?C.id+'_radio':l.getNextId()+'_radio';for(var L=0;L<C.items.length;L++){var M=C.items[L],N=M[2]!==undefined?M[2]:M[0],O=M[1]!==undefined?M[1]:M[0],P=l.getNextId()+'_radio_input',Q=P+'_label',R=l.extend({},C,{id:P,title:null,type:null},true),S=l.extend({},R,{title:N},true),T={type:'radio','class':'cke_dialog_ui_radio_input',name:K,value:O,'aria-labelledby':Q},U=[];if(F._['default']==O)T.checked='checked';A(R);A(S);if(typeof R.controlStyle!='undefined')R.style=R.controlStyle;E.push(new r.dialog.uiElement(B,R,U,'input',null,T));U.push(' ');new r.dialog.uiElement(B,S,U,'label',null,{id:Q,'for':T.id},M[0]);H.push(U.join(''));}new r.dialog.hbox(B,[],H,I);return I.join('');};r.dialog.labeledElement.call(this,B,C,D,G);this._.children=E;},button:function(B,C,D){if(!arguments.length)return;if(typeof C=='function')C=C(B.getParentEditor());t.call(this,C,{disabled:C.disabled||false});h.event.implementOn(this);var E=this;B.on('load',function(H){var I=this.getElement();(function(){I.on('click',function(J){E.fire('click',{dialog:E.getDialog()});J.data.preventDefault();});I.on('keydown',function(J){if(J.data.getKeystroke() in {32:1}){E.click();J.data.preventDefault();}});})();I.unselectable();},this);var F=l.extend({},C);delete F.style;var G=l.getNextId()+'_label';r.dialog.uiElement.call(this,B,F,D,'a',null,{style:C.style,href:'javascript:void(0)',title:C.label,hidefocus:'true','class':C['class'],role:'button','aria-labelledby':G},'<span id="'+G+'" class="cke_dialog_ui_button">'+l.htmlEncode(C.label)+'</span>');
},select:function(B,C,D){if(arguments.length<3)return;var E=t.call(this,C);if(C.validate)this.validate=C.validate;E.inputId=l.getNextId()+'_select';var F=function(){var G=l.extend({},C,{id:C.id?C.id+'_select':l.getNextId()+'_select'},true),H=[],I=[],J={id:E.inputId,'class':'cke_dialog_ui_input_select','aria-labelledby':this._.labelId};if(C.size!=undefined)J.size=C.size;if(C.multiple!=undefined)J.multiple=C.multiple;A(G);for(var K=0,L;K<C.items.length&&(L=C.items[K]);K++)I.push('<option value="',l.htmlEncode(L[1]!==undefined?L[1]:L[0]).replace(/"/g,'&quot;'),'" /> ',l.htmlEncode(L[0]));if(typeof G.controlStyle!='undefined')G.style=G.controlStyle;E.select=new r.dialog.uiElement(B,G,H,'select',null,J,I.join(''));return H.join('');};r.dialog.labeledElement.call(this,B,C,D,F);},file:function(B,C,D){if(arguments.length<3)return;if(C['default']===undefined)C['default']='';var E=l.extend(t.call(this,C),{definition:C,buttons:[]});if(C.validate)this.validate=C.validate;var F=function(){E.frameId=l.getNextId()+'_fileInput';var G=i.isCustomDomain(),H=['<iframe frameborder="0" allowtransparency="0" class="cke_dialog_ui_input_file" id="',E.frameId,'" title="',C.label,'" src="javascript:void('];H.push(G?"(function(){document.open();document.domain='"+document.domain+"';"+'document.close();'+'})()':'0');H.push(')"></iframe>');return H.join('');};B.on('load',function(){var G=h.document.getById(E.frameId),H=G.getParent();H.addClass('cke_dialog_ui_input_file');});r.dialog.labeledElement.call(this,B,C,D,F);},fileButton:function(B,C,D){if(arguments.length<3)return;var E=t.call(this,C),F=this;if(C.validate)this.validate=C.validate;var G=l.extend({},C),H=G.onClick;G.className=(G.className?G.className+' ':'')+'cke_dialog_ui_button';G.onClick=function(I){var J=C['for'];if(!H||H.call(this,I)!==false){B.getContentElement(J[0],J[1]).submit();this.disable();}};B.on('load',function(){B.getContentElement(C['for'][0],C['for'][1])._.buttons.push(F);});r.dialog.button.call(this,B,G,D);},html:(function(){var B=/^\s*<[\w:]+\s+([^>]*)?>/,C=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,D=/\/$/;return function(E,F,G){if(arguments.length<3)return;var H=[],I,J=F.html,K,L;if(J.charAt(0)!='<')J='<span>'+J+'</span>';var M=F.focus;if(M){var N=this.focus;this.focus=function(){N.call(this);typeof M=='function'&&M.call(this);this.fire('focus');};if(F.isFocusable){var O=this.isFocusable;this.isFocusable=O;}this.keyboardFocusable=true;}r.dialog.uiElement.call(this,E,F,H,'span',null,null,'');I=H.join('');K=I.match(B);
L=J.match(C)||['','',''];if(D.test(L[1])){L[1]=L[1].slice(0,-1);L[2]='/'+L[2];}G.push([L[1],' ',K[1]||'',L[2]].join(''));};})(),fieldset:function(B,C,D,E,F){var G=F.label,H=function(){var I=[];G&&I.push('<legend>'+G+'</legend>');for(var J=0;J<D.length;J++)I.push(D[J]);return I.join('');};this._={children:C};r.dialog.uiElement.call(this,B,F,E,'fieldset',null,null,H);}},true);r.dialog.html.prototype=new r.dialog.uiElement();r.dialog.labeledElement.prototype=l.extend(new r.dialog.uiElement(),{setLabel:function(B){var C=h.document.getById(this._.labelId);if(C.getChildCount()<1)new k.text(B,h.document).appendTo(C);else C.getChild(0).$.nodeValue=B;return this;},getLabel:function(){var B=h.document.getById(this._.labelId);if(!B||B.getChildCount()<1)return '';else return B.getChild(0).getText();},eventProcessors:y},true);r.dialog.button.prototype=l.extend(new r.dialog.uiElement(),{click:function(){var B=this;if(!B._.disabled)return B.fire('click',{dialog:B._.dialog});B.getElement().$.blur();return false;},enable:function(){this._.disabled=false;var B=this.getElement();B&&B.removeClass('cke_disabled');},disable:function(){this._.disabled=true;this.getElement().addClass('cke_disabled');},isVisible:function(){return this.getElement().getFirst().isVisible();},isEnabled:function(){return!this._.disabled;},eventProcessors:l.extend({},r.dialog.uiElement.prototype.eventProcessors,{onClick:function(B,C){this.on('click',C);}},true),accessKeyUp:function(){this.click();},accessKeyDown:function(){this.focus();},keyboardFocusable:true},true);r.dialog.textInput.prototype=l.extend(new r.dialog.labeledElement(),{getInputElement:function(){return h.document.getById(this._.inputId);},focus:function(){var B=this.selectParentTab();setTimeout(function(){var C=B.getInputElement();C&&C.$.focus();},0);},select:function(){var B=this.selectParentTab();setTimeout(function(){var C=B.getInputElement();if(C){C.$.focus();C.$.select();}},0);},accessKeyUp:function(){this.select();},setValue:function(B){!B&&(B='');return r.dialog.uiElement.prototype.setValue.apply(this,arguments);},keyboardFocusable:true},x,true);r.dialog.textarea.prototype=new r.dialog.textInput();r.dialog.select.prototype=l.extend(new r.dialog.labeledElement(),{getInputElement:function(){return this._.select.getElement();},add:function(B,C,D){var E=new o('option',this.getDialog().getParentEditor().document),F=this.getInputElement().$;E.$.text=B;E.$.value=C===undefined||C===null?B:C;if(D===undefined||D===null){if(j)F.add(E.$);else F.add(E.$,null);
}else F.add(E.$,D);return this;},remove:function(B){var C=this.getInputElement().$;C.remove(B);return this;},clear:function(){var B=this.getInputElement().$;while(B.length>0)B.remove(0);return this;},keyboardFocusable:true},x,true);r.dialog.checkbox.prototype=l.extend(new r.dialog.uiElement(),{getInputElement:function(){return this._.checkbox.getElement();},setValue:function(B,C){this.getInputElement().$.checked=B;!C&&this.fire('change',{value:B});},getValue:function(){return this.getInputElement().$.checked;},accessKeyUp:function(){this.setValue(!this.getValue());},eventProcessors:{onChange:function(B,C){if(!j)return y.onChange.apply(this,arguments);else{B.on('load',function(){var D=this._.checkbox.getElement();D.on('propertychange',function(E){E=E.data.$;if(E.propertyName=='checked')this.fire('change',{value:D.$.checked});},this);},this);this.on('change',C);}return null;}},keyboardFocusable:true},x,true);r.dialog.radio.prototype=l.extend(new r.dialog.uiElement(),{setValue:function(B,C){var D=this._.children,E;for(var F=0;F<D.length&&(E=D[F]);F++)E.getElement().$.checked=E.getValue()==B;!C&&this.fire('change',{value:B});},getValue:function(){var B=this._.children;for(var C=0;C<B.length;C++){if(B[C].getElement().$.checked)return B[C].getValue();}return null;},accessKeyUp:function(){var B=this._.children,C;for(C=0;C<B.length;C++){if(B[C].getElement().$.checked){B[C].getElement().focus();return;}}B[0].getElement().focus();},eventProcessors:{onChange:function(B,C){if(!j)return y.onChange.apply(this,arguments);else{B.on('load',function(){var D=this._.children,E=this;for(var F=0;F<D.length;F++){var G=D[F].getElement();G.on('propertychange',function(H){H=H.data.$;if(H.propertyName=='checked'&&this.$.checked)E.fire('change',{value:this.getAttribute('value')});});}},this);this.on('change',C);}return null;}},keyboardFocusable:true},x,true);r.dialog.file.prototype=l.extend(new r.dialog.labeledElement(),x,{getInputElement:function(){var B=h.document.getById(this._.frameId).getFrameDocument();return B.$.forms.length>0?new o(B.$.forms[0].elements[0]):this.getElement();},submit:function(){this.getInputElement().getParent().$.submit();return this;},getAction:function(){return this.getInputElement().getParent().$.action;},registerEvents:function(B){var C=/^on([A-Z]\w+)/,D,E=function(G,H,I,J){G.on('formLoaded',function(){G.getInputElement().on(I,J,G);});};for(var F in B){if(!(D=F.match(C)))continue;if(this.eventProcessors[F])this.eventProcessors[F].call(this,this._.dialog,B[F]);
else E(this,this._.dialog,D[1].toLowerCase(),B[F]);}return this;},reset:function(){var B=this._,C=h.document.getById(B.frameId),D=C.getFrameDocument(),E=B.definition,F=B.buttons,G=this.formLoadedNumber,H=this.formUnloadNumber,I=B.dialog._.editor.lang.dir,J=B.dialog._.editor.langCode;if(!G){G=this.formLoadedNumber=l.addFunction(function(){this.fire('formLoaded');},this);H=this.formUnloadNumber=l.addFunction(function(){this.getInputElement().clearCustomData();},this);this.getDialog()._.editor.on('destroy',function(){l.removeFunction(G);l.removeFunction(H);});}function K(){D.$.open();if(i.isCustomDomain())D.$.domain=document.domain;var L='';if(E.size)L=E.size-(j?7:0);D.$.write(['<html dir="'+I+'" lang="'+J+'"><head><title></title></head><body style="margin: 0; overflow: hidden; background: transparent;">','<form enctype="multipart/form-data" method="POST" dir="'+I+'" lang="'+J+'" action="',l.htmlEncode(E.action),'">','<input type="file" name="',l.htmlEncode(E.id||'cke_upload'),'" size="',l.htmlEncode(L>0?L:''),'" />','</form>','</body></html>','<script>window.parent.CKEDITOR.tools.callFunction('+G+');','window.onbeforeunload = function() {window.parent.CKEDITOR.tools.callFunction('+H+')}</script>'].join(''));D.$.close();for(var M=0;M<F.length;M++)F[M].enable();};if(i.gecko)setTimeout(K,500);else K();},getValue:function(){return this.getInputElement().$.value||'';},setInitValue:function(){this._.initValue='';},eventProcessors:{onChange:function(B,C){if(!this._.domOnChangeRegistered){this.on('formLoaded',function(){this.getInputElement().on('change',function(){this.fire('change',{value:this.getValue()});},this);},this);this._.domOnChangeRegistered=true;}this.on('change',C);}},keyboardFocusable:true},true);r.dialog.fileButton.prototype=new r.dialog.button();r.dialog.fieldset.prototype=l.clone(r.dialog.hbox.prototype);h.dialog.addUIElement('text',u);h.dialog.addUIElement('password',u);h.dialog.addUIElement('textarea',v);h.dialog.addUIElement('checkbox',v);h.dialog.addUIElement('radio',v);h.dialog.addUIElement('button',v);h.dialog.addUIElement('select',v);h.dialog.addUIElement('file',v);h.dialog.addUIElement('fileButton',v);h.dialog.addUIElement('html',v);h.dialog.addUIElement('fieldset',w);})();q.add('panel',{beforeInit:function(t){t.ui.addHandler(2,r.panel.handler);}});h.UI_PANEL='panel';r.panel=function(t,u){var v=this;if(u)l.extend(v,u);l.extend(v,{className:'',css:[]});v.id=l.getNextId();v.document=t;v._={blocks:{}};};r.panel.handler={create:function(t){return new r.panel(t);
}};r.panel.prototype={renderHtml:function(t){var u=[];this.render(t,u);return u.join('');},render:function(t,u){var w=this;var v=w.id;u.push('<div class="',t.skinClass,'" lang="',t.langCode,'" role="presentation" style="display:none;z-index:'+(t.config.baseFloatZIndex+1)+'">'+'<div'+' id=',v,' dir=',t.lang.dir,' role="presentation" class="cke_panel cke_',t.lang.dir);if(w.className)u.push(' ',w.className);u.push('">');if(w.forceIFrame||w.css.length){u.push('<iframe id="',v,'_frame" frameborder="0" role="application" src="javascript:void(');u.push(i.isCustomDomain()?"(function(){document.open();document.domain='"+document.domain+"';"+'document.close();'+'})()':'0');u.push(')"></iframe>');}u.push('</div></div>');return v;},getHolderElement:function(){var t=this._.holder;if(!t){if(this.forceIFrame||this.css.length){var u=this.document.getById(this.id+'_frame'),v=u.getParent(),w=v.getAttribute('dir'),x=v.getParent().getAttribute('class'),y=v.getParent().getAttribute('lang'),z=u.getFrameDocument(),A=l.addFunction(l.bind(function(D){this.isLoaded=true;if(this.onLoad)this.onLoad();},this)),B='<!DOCTYPE html><html dir="'+w+'" class="'+x+'_container" lang="'+y+'">'+'<head>'+'<style>.'+x+'_container{visibility:hidden}</style>'+'</head>'+'<body class="cke_'+w+' cke_panel_frame '+i.cssClass+'" style="margin:0;padding:0"'+' onload="( window.CKEDITOR || window.parent.CKEDITOR ).tools.callFunction('+A+');"></body>'+l.buildStyleHtml(this.css)+'</html>';z.write(B);var C=z.getWindow();C.$.CKEDITOR=h;z.on('key'+(i.opera?'press':'down'),function(D){var G=this;var E=D.data.getKeystroke(),F=G.document.getById(G.id).getAttribute('dir');if(G._.onKeyDown&&G._.onKeyDown(E)===false){D.data.preventDefault();return;}if(E==27||E==(F=='rtl'?39:37))if(G.onEscape&&G.onEscape(E)===false)D.data.preventDefault();},this);t=z.getBody();t.unselectable();i.air&&l.callFunction(A);}else t=this.document.getById(this.id);this._.holder=t;}return t;},addBlock:function(t,u){var v=this;u=v._.blocks[t]=u instanceof r.panel.block?u:new r.panel.block(v.getHolderElement(),u);if(!v._.currentBlock)v.showBlock(t);return u;},getBlock:function(t){return this._.blocks[t];},showBlock:function(t){var u=this._.blocks,v=u[t],w=this._.currentBlock,x=this.forceIFrame?this.document.getById(this.id+'_frame'):this._.holder;x.getParent().getParent().disableContextMenu();if(w){x.removeAttributes(w.attributes);w.hide();}this._.currentBlock=v;x.setAttributes(v.attributes);h.fire('ariaWidget',x);v._.focusIndex=-1;this._.onKeyDown=v.onKeyDown&&l.bind(v.onKeyDown,v);
v.onMark=function(y){x.setAttribute('aria-activedescendant',y.getId()+'_option');};v.onUnmark=function(){x.removeAttribute('aria-activedescendant');};v.show();return v;},destroy:function(){this.element&&this.element.remove();}};r.panel.block=l.createClass({$:function(t,u){var v=this;v.element=t.append(t.getDocument().createElement('div',{attributes:{tabIndex:-1,'class':'cke_panel_block',role:'presentation'},styles:{display:'none'}}));if(u)l.extend(v,u);if(!v.attributes.title)v.attributes.title=v.attributes['aria-label'];v.keys={};v._.focusIndex=-1;v.element.disableContextMenu();},_:{markItem:function(t){var w=this;if(t==-1)return;var u=w.element.getElementsByTag('a'),v=u.getItem(w._.focusIndex=t);if(i.webkit||i.opera)v.getDocument().getWindow().focus();v.focus();w.onMark&&w.onMark(v);}},proto:{show:function(){this.element.setStyle('display','');},hide:function(){var t=this;if(!t.onHide||t.onHide.call(t)!==true)t.element.setStyle('display','none');},onKeyDown:function(t){var y=this;var u=y.keys[t];switch(u){case 'next':var v=y._.focusIndex,w=y.element.getElementsByTag('a'),x;while(x=w.getItem(++v)){if(x.getAttribute('_cke_focus')&&x.$.offsetWidth){y._.focusIndex=v;x.focus();break;}}return false;case 'prev':v=y._.focusIndex;w=y.element.getElementsByTag('a');while(v>0&&(x=w.getItem(--v))){if(x.getAttribute('_cke_focus')&&x.$.offsetWidth){y._.focusIndex=v;x.focus();break;}}return false;case 'click':v=y._.focusIndex;x=v>=0&&y.element.getElementsByTag('a').getItem(v);if(x)x.$.click?x.$.click():x.$.onclick();return false;}return true;}}});q.add('listblock',{requires:['panel'],onLoad:function(){r.panel.prototype.addListBlock=function(t,u){return this.addBlock(t,new r.listBlock(this.getHolderElement(),u));};r.listBlock=l.createClass({base:r.panel.block,$:function(t,u){var x=this;u=u||{};var v=u.attributes||(u.attributes={});(x.multiSelect=!!u.multiSelect)&&(v['aria-multiselectable']=true);!v.role&&(v.role='listbox');x.base.apply(x,arguments);var w=x.keys;w[40]='next';w[9]='next';w[38]='prev';w[2000+9]='prev';w[32]='click';x._.pendingHtml=[];x._.items={};x._.groups={};},_:{close:function(){if(this._.started){this._.pendingHtml.push('</ul>');delete this._.started;}},getClick:function(){if(!this._.click)this._.click=l.addFunction(function(t){var v=this;var u=true;if(v.multiSelect)u=v.toggle(t);else v.mark(t);if(v.onClick)v.onClick(t,u);},this);return this._.click;}},proto:{add:function(t,u,v){var y=this;var w=y._.pendingHtml,x=l.getNextId();if(!y._.started){w.push('<ul role="presentation" class=cke_panel_list>');
y._.started=1;y._.size=y._.size||0;}y._.items[t]=x;w.push('<li id=',x,' class=cke_panel_listItem role=presentation><a id="',x,'_option" _cke_focus=1 hidefocus=true title="',v||t,'" href="javascript:void(\'',t,'\')" onclick="CKEDITOR.tools.callFunction(',y._.getClick(),",'",t,"'); return false;\"",' role="option" aria-posinset="'+ ++y._.size+'">',u||t,'</a></li>');},startGroup:function(t){this._.close();var u=l.getNextId();this._.groups[t]=u;this._.pendingHtml.push('<h1 role="presentation" id=',u,' class=cke_panel_grouptitle>',t,'</h1>');},commit:function(){var w=this;w._.close();w.element.appendHtml(w._.pendingHtml.join(''));var t=w._.items,u=w.element.getDocument();for(var v in t)u.getById(t[v]+'_option').setAttribute('aria-setsize',w._.size);delete w._.size;w._.pendingHtml=[];},toggle:function(t){var u=this.isMarked(t);if(u)this.unmark(t);else this.mark(t);return!u;},hideGroup:function(t){var u=this.element.getDocument().getById(this._.groups[t]),v=u&&u.getNext();if(u){u.setStyle('display','none');if(v&&v.getName()=='ul')v.setStyle('display','none');}},hideItem:function(t){this.element.getDocument().getById(this._.items[t]).setStyle('display','none');},showAll:function(){var t=this._.items,u=this._.groups,v=this.element.getDocument();for(var w in t)v.getById(t[w]).setStyle('display','');for(var x in u){var y=v.getById(u[x]),z=y.getNext();y.setStyle('display','');if(z&&z.getName()=='ul')z.setStyle('display','');}},mark:function(t){var w=this;if(!w.multiSelect)w.unmarkAll();var u=w._.items[t],v=w.element.getDocument().getById(u);v.addClass('cke_selected');w.element.getDocument().getById(u+'_option').setAttribute('aria-selected',true);w.element.setAttribute('aria-activedescendant',u+'_option');w.onMark&&w.onMark(v);},unmark:function(t){var u=this;u.element.getDocument().getById(u._.items[t]).removeClass('cke_selected');u.onUnmark&&u.onUnmark(u._.items[t]);},unmarkAll:function(){var w=this;var t=w._.items,u=w.element.getDocument();for(var v in t)u.getById(t[v]).removeClass('cke_selected');w.onUnmark&&w.onUnmark();},isMarked:function(t){return this.element.getDocument().getById(this._.items[t]).hasClass('cke_selected');},focus:function(t){this._.focusIndex=-1;if(t){var u=this.element.getDocument().getById(this._.items[t]).getFirst(),v=this.element.getElementsByTag('a'),w,x=-1;while(w=v.getItem(++x)){if(w.equals(u)){this._.focusIndex=x;break;}}setTimeout(function(){u.focus();},0);}}}});}});h.themes.add('default',(function(){var t={};function u(v,w){var x,y;y=v.config.sharedSpaces;
y=y&&y[w];y=y&&h.document.getById(y);if(y){var z='<span class="cke_shared " dir="'+v.lang.dir+'"'+'>'+'<span class="'+v.skinClass+' '+v.id+' cke_editor_'+v.name+'">'+'<span class="'+i.cssClass+'">'+'<span class="cke_wrapper cke_'+v.lang.dir+'">'+'<span class="cke_editor">'+'<div class="cke_'+w+'">'+'</div></span></span></span></span></span>',A=y.append(o.createFromHtml(z,y.getDocument()));if(y.getCustomData('cke_hasshared'))A.hide();else y.setCustomData('cke_hasshared',1);x=A.getChild([0,0,0,0]);!v.sharedSpaces&&(v.sharedSpaces={});v.sharedSpaces[w]=x;v.on('focus',function(){for(var B=0,C,D=y.getChildren();C=D.getItem(B);B++){if(C.type==1&&!C.equals(A)&&C.hasClass('cke_shared'))C.hide();}A.show();});v.on('destroy',function(){A.remove();});}return x;};return{build:function(v,w){var x=v.name,y=v.element,z=v.elementMode;if(!y||z==0)return;if(z==1)y.hide();var A=v.fire('themeSpace',{space:'top',html:''}).html,B=v.fire('themeSpace',{space:'contents',html:''}).html,C=v.fireOnce('themeSpace',{space:'bottom',html:''}).html,D=B&&v.config.height,E=v.config.tabIndex||v.element.getAttribute('tabindex')||0;if(!B)D='auto';else if(!isNaN(D))D+='px';var F='',G=v.config.width;if(G){if(!isNaN(G))G+='px';F+='width: '+G+';';}var H=A&&u(v,'top'),I=u(v,'bottom');H&&(H.setHtml(A),A='');I&&(I.setHtml(C),C='');var J='<style>.'+v.skinClass+'{visibility:hidden;}</style>';if(t[v.skinClass])J='';else t[v.skinClass]=1;var K=o.createFromHtml(['<span id="cke_',x,'" class="',v.skinClass,' ',v.id,' cke_editor_',x,'" dir="',v.lang.dir,'" title="',i.gecko?' ':'','" lang="',v.langCode,'"'+(i.webkit?' tabindex="'+E+'"':'')+' role="application"'+' aria-labelledby="cke_',x,'_arialbl"'+(F?' style="'+F+'"':'')+'>'+'<span id="cke_',x,'_arialbl" class="cke_voice_label">'+v.lang.editor+'</span>'+'<span class="',i.cssClass,'" role="presentation"><span class="cke_wrapper cke_',v.lang.dir,'" role="presentation"><table class="cke_editor" border="0" cellspacing="0" cellpadding="0" role="presentation"><tbody><tr',A?'':' style="display:none"',' role="presentation"><td id="cke_top_',x,'" class="cke_top" role="presentation">',A,'</td></tr><tr',B?'':' style="display:none"',' role="presentation"><td id="cke_contents_',x,'" class="cke_contents" style="height:',D,'" role="presentation">',B,'</td></tr><tr',C?'':' style="display:none"',' role="presentation"><td id="cke_bottom_',x,'" class="cke_bottom" role="presentation">',C,'</td></tr></tbody></table>'+J+'</span>'+'</span>'+'</span>'].join(''));K.getChild([1,0,0,0,0]).unselectable();
K.getChild([1,0,0,0,2]).unselectable();if(z==1)K.insertAfter(y);else y.append(K);v.container=K;K.disableContextMenu();v.on('contentDirChanged',function(L){var M=(v.lang.dir!=L.data?'add':'remove')+'Class';K.getChild(1)[M]('cke_mixed_dir_content');var N=this.sharedSpaces&&this.sharedSpaces[this.config.toolbarLocation];N&&N.getParent().getParent()[M]('cke_mixed_dir_content');});v.fireOnce('themeLoaded');v.fireOnce('uiReady');},buildDialog:function(v){var w=l.getNextNumber(),x=o.createFromHtml(['<div class="',v.id,'_dialog cke_editor_',v.name.replace('.','\\.'),'_dialog cke_skin_',v.skinName,'" dir="',v.lang.dir,'" lang="',v.langCode,'" role="dialog" aria-labelledby="%title#"><table class="cke_dialog',' '+i.cssClass,' cke_',v.lang.dir,'" style="position:absolute" role="presentation"><tr><td role="presentation"><div class="%body" role="presentation"><div id="%title#" class="%title" role="presentation"></div><a id="%close_button#" class="%close_button" href="javascript:void(0)" title="'+v.lang.common.close+'" role="button"><span class="cke_label">X</span></a>'+'<div id="%tabs#" class="%tabs" role="tablist"></div>'+'<table class="%contents" role="presentation">'+'<tr>'+'<td id="%contents#" class="%contents" role="presentation"></td>'+'</tr>'+'<tr>'+'<td id="%footer#" class="%footer" role="presentation"></td>'+'</tr>'+'</table>'+'</div>'+'<div id="%tl#" class="%tl"></div>'+'<div id="%tc#" class="%tc"></div>'+'<div id="%tr#" class="%tr"></div>'+'<div id="%ml#" class="%ml"></div>'+'<div id="%mr#" class="%mr"></div>'+'<div id="%bl#" class="%bl"></div>'+'<div id="%bc#" class="%bc"></div>'+'<div id="%br#" class="%br"></div>'+'</td></tr>'+'</table>',j?'':'<style>.cke_dialog{visibility:hidden;}</style>','</div>'].join('').replace(/#/g,'_'+w).replace(/%/g,'cke_dialog_')),y=x.getChild([0,0,0,0,0]),z=y.getChild(0),A=y.getChild(1);z.unselectable();A.unselectable();return{element:x,parts:{dialog:x.getChild(0),title:z,close:A,tabs:y.getChild(2),contents:y.getChild([3,0,0,0]),footer:y.getChild([3,0,1,0])}};},destroy:function(v){var w=v.container,x=v.element;if(w){w.clearCustomData();w.remove();}if(x){x.clearCustomData();v.elementMode==1&&x.show();delete v.element;}}};})());h.editor.prototype.getThemeSpace=function(t){var u='cke_'+t,v=this._[u]||(this._[u]=h.document.getById(u+'_'+this.name));return v;};h.editor.prototype.resize=function(t,u,v,w){var x=this.container,y=h.document.getById('cke_contents_'+this.name),z=w?x.getChild(1):x;i.webkit&&z.setStyle('display','none');z.setSize('width',t,true);
if(i.webkit){z.$.offsetWidth;z.setStyle('display','');}var A=v?0:(z.$.offsetHeight||0)-(y.$.clientHeight||0);y.setStyle('height',Math.max(u-A,0)+'px');this.fire('resize');};h.editor.prototype.getResizable=function(){return this.container;};})();
