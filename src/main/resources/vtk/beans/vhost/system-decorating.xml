<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd">



  <bean id="system.csrfPreventionHandler"
        class="vtk.security.web.CSRFPreventionHandler" />

  <bean id="system.decoratingFilter" class="vtk.web.decorating.DecoratingServiceFilter">
    <constructor-arg name="htmlParser" ref="decorating.htmlParser" />
    <constructor-arg name="filters" ><list></list></constructor-arg>
    <!--constructor-arg ref="decorating.userFilters" /-->
    <constructor-arg name="resolver" ref="system.decorationResolver" />
    <constructor-arg name="componentResolver" ref="system.decoratorComponentResolver" />
    <constructor-arg name="preventDecoratingParameter" value="x-prevent-decorating" />
    <constructor-arg name="staticHeaders">
      <map>
        <entry key="Cache-Control" value="no-cache, must-revalidate" />
        <entry key="Expires" value="0" />
      </map>
    </constructor-arg>
  </bean>

  <bean id="system.decorationResolver"
        class="vtk.web.decorating.ServiceAttributeDecorationResolver">
    <property name="attributeName" ref="system.decoratorTemplateAttribute" />
    <property name="templateManager" ref="system.decoratorTemplateManager" />
  </bean>

  <bean id="system.decoratorTemplateAttribute" class="java.lang.String">
    <constructor-arg type="java.lang.String" value="manage.decoratorTemplateAttribute" />
  </bean>


  <bean id="system.decoratorTemplateManager"
        class="vtk.web.decorating.StaticTemplateManager">
    <property name="templateFactory" ref="system.decoratorTemplateFactory" />
    <property name="uriPrefix" value="${manage.decoratorTemplatesLocation}" />
    <property name="characterEncoding" value="utf-8" />
  </bean>

  <bean id="system.decoratorTemplateFactory"
        class="vtk.web.decorating.TextualDecoratorTemplateFactory">
    <property name="parser" ref="system.decoratorTemplateParser" />
    <property name="componentResolver" ref="system.decoratorComponentResolver" />
  </bean>

  <bean id="system.decoratorComponentResolver"
        class="vtk.web.decorating.BeanContextComponentResolver">
    <property name="availableComponentNamespaces">
      <set>
        <value>*</value>
      </set>
    </property>
  </bean>


  <bean id="system.decoratorTemplateParser"
        class="vtk.web.decorating.DollarSyntaxComponentParser">
  </bean>


</beans>
