<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" 
                       "http://www.springframework.org/dtd/spring-beans.dtd">

<beans>
 
  <bean id="autoCompleteService" class="org.vortikal.web.service.ServiceImpl">
    <property name="order" value="-999" />
    <property name="assertions">
      <list>
        <ref bean="autoComplete.appResourceAssertion" />
        <bean class="org.vortikal.web.service.RequestParameterAssertion">
          <property name="parameterName" value="action" />
          <property name="parameterValue" value="autocomplete" />
        </bean>
      </list>
    </property>
  </bean>
  
  <bean id="tagsAutoCompleteService" class="org.vortikal.web.service.ServiceImpl">
    <property name="parent" ref="autoCompleteService" />
    <property name="order" value="-2" />
    <property name="assertions">
      <list>
        <bean class="org.vortikal.web.service.RequestParameterAssertion">
          <property name="parameterName" value="field" />
          <property name="parameterValue" ref="tagAutoCompleteFieldName" />
        </bean>
      </list>
    </property>
    <property name="handler" ref="tagsAutoCompleteHandler" />
  </bean>
  
  <bean id="tagsAutoCompleteHandler"
    class="org.vortikal.web.controller.autocomplete.AutoCompleteController">
    <property name="fieldName" ref="tagAutoCompleteFieldName" />
    <property name="dataProvider" ref="tagsAutoCompleteDataProvider" />
  </bean>
  
  <bean id="tagAutoCompleteFieldName" class="java.lang.String">
    <constructor-arg value="keywords" />
  </bean>
  
  <bean id="tagsAutoCompleteDataProvider"
    class="org.vortikal.web.tags.RepositoryTagsDataProvider">
    <property name="tagsReporter" ref="tagsReporter" />
  </bean>
  
  <bean id="autoComplete.appResourceAssertion"
    class="org.vortikal.web.service.RequestURIRegexpAssertion">
    <property name="pattern" value="${autoComplete.appResourceURL}" />
  </bean>

</beans>