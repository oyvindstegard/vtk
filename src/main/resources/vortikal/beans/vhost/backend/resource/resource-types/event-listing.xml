<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">
<beans>
	
	<import resource="collection.xml" />
	
	<bean id="eventListingResourceTypeDefinition"
		class="org.vortikal.repository.resourcetype.PrimaryResourceTypeDefinitionImpl">
		<property name="name" value="event-listing" />
		<property name="namespace" ref="EVENT_LISTING_NAMESPACE" />
		<property name="parentTypeDefinition" ref="collectionResourceTypeDefinition" />
		<property name="assertions">
			<list>
				<bean class="org.vortikal.web.service.ResourcePropertyAssertion">
					<property name="namespace" ref="DEFAULT_NAMESPACE" />
					<property name="name" value="collection-type" />
					<property name="value" value="event-listing" />
					<property name="checkExistenceOnly" value="false" />
				</bean>
			</list>
		</property>
		<property name="propertyTypeDefinitions">
			<list>
				<ref bean="eventListing.recursiveListingPropDef" />
				<ref bean="eventListing.hideEndDatePropDef" />
				<ref bean="eventListing.hideLocationPropDef" />
				<ref bean="eventListing.hideNumberOfComments" />
			</list>
		</property>
	</bean>
	
	<bean id="eventListing.recursiveListingPropDef"
		class="org.vortikal.repository.resourcetype.PropertyTypeDefinitionImpl"
		parent="abstractPropDef">
		<property name="name" value="recursive-listing" />
		<property name="type" value="BOOLEAN" />
		<property name="protectionLevel" ref="PROTECTION_LEVEL_ACL_WRITE" />
		<property name="valueFormatter">
			<bean
				class="org.vortikal.repository.resourcetype.MessageSourceValueFormatter">
				<constructor-arg
					value="vortikal.beans.vhost.backend.resource.resource-types.properties.article-listing-recursive-listing" />
				<constructor-arg value="BOOLEAN" />
			</bean>
		</property>
		<property name="vocabulary">
			<bean class="org.vortikal.repository.resourcetype.ValueVocabulary">
				<property name="values">
					<list>
						<ref bean="VALUE_FALSE" />
					</list>
				</property>
			</bean>
		</property>
		<property name="metadata">
			<map>
				<entry key="editingHints">
					<map>
						<entry key="radio" value="true" />
					</map>
				</entry>
			</map>
		</property>
	</bean>
	
	<bean id="eventListing.hideEndDatePropDef"
		class="org.vortikal.repository.resourcetype.PropertyTypeDefinitionImpl"
		parent="abstractPropDef">
		<property name="name" value="hide-end-date" />
		<property name="type" value="BOOLEAN" />
		<property name="protectionLevel" ref="PROTECTION_LEVEL_ACL_WRITE" />
		<property name="vocabulary">
			<bean class="org.vortikal.repository.resourcetype.ValueVocabulary">
				<property name="values">
					<list>
						<ref bean="VALUE_TRUE" />
					</list>
				</property>
			</bean>
		</property>
		<property name="metadata">
			<map>
				<entry key="editingHints">
					<map>
						<entry key="hideLabel" value="true" />
					</map>
				</entry>
			</map>
		</property>
	</bean>
	
	<bean id="eventListing.hideLocationPropDef"
		class="org.vortikal.repository.resourcetype.PropertyTypeDefinitionImpl"
		parent="abstractPropDef">
		<property name="name" value="hide-location" />
		<property name="type" value="BOOLEAN" />
		<property name="protectionLevel" ref="PROTECTION_LEVEL_ACL_WRITE" />
		<property name="vocabulary">
			<bean class="org.vortikal.repository.resourcetype.ValueVocabulary">
				<property name="values">
					<list>
						<ref bean="VALUE_TRUE" />
					</list>
				</property>
			</bean>
		</property>
		<property name="metadata">
			<map>
				<entry key="editingHints">
					<map>
						<entry key="hideLabel" value="true" />
					</map>
				</entry>
			</map>
		</property>
	</bean>
	
	<bean id="eventListing.hideNumberOfComments"
		class="org.vortikal.repository.resourcetype.PropertyTypeDefinitionImpl"
		parent="abstractPropDef">
		<property name="name" value="hide-number-of-comments" />
		<property name="type" value="BOOLEAN" />
		<property name="protectionLevel" ref="PROTECTION_LEVEL_ACL_WRITE" />
		<property name="vocabulary">
			<bean class="org.vortikal.repository.resourcetype.ValueVocabulary">
				<property name="values">
					<list>
						<ref bean="VALUE_TRUE" />
					</list>
				</property>
			</bean>
		</property>
		<property name="metadata">
			<map>
				<entry key="editingHints">
					<map>
						<entry key="hideLabel" value="true" />
					</map>
				</entry>
			</map>
		</property>
	</bean>
	
	<bean id="resourceIsEventListing" class="org.vortikal.web.service.ResourceTypeAssertion">
		<property name="resourceTypeDefinition" ref="eventListingResourceTypeDefinition" />
		<property name="exactMatch" value="true" />
	</bean>
	
</beans>