<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">
<beans>
	
	<import resource="../managed-xml.xml" />

    <!-- Studieprogram XML resource -->
	<bean id="studieprogramXmlResource"
		class="org.vortikal.repository.resourcetype.PrimaryResourceTypeDefinitionImpl">
		<property name="name" value="studieprogram" />
		<property name="namespace" ref="STUDIEPROGRAM_NAMESPACE" />
		<property name="parentTypeDefinition" ref="managedXmlResource" />
		<property name="propertyTypeDefinitions">
			<list>
				<ref bean="studieprogramProgramkodePropDef" />
				<ref bean="studieprogramProgramnavnPropDef" />
				<ref bean="studieprogramProgramtypePropDef" />
				<ref bean="studieprogramAntallaarPropDef" />
				<ref bean="studieprogramStudiepoengPropDef" />
				<ref bean="studieprogramOmfangoppgavePropDef" />
				<ref bean="studieprogramSoknadsfristPropDef" />
				<ref bean="studieprogramStudieplasserPropDef" />
				<ref bean="studieprogramSokodePropDef" />
			</list>
		</property>
		<property name="assertions">
			<list>
				<ref bean="schemaIsStudieprogram" />
			</list>
		</property>
	</bean>
	
	<bean id="STUDIEPROGRAM_NAMESPACE" class="org.vortikal.repository.Namespace">
		<constructor-arg value="studieprogram" />
		<constructor-arg value="http://www.uio.no/xsd/studier/studieprogram" />
	</bean>
	
	<bean id="schemaIsStudieprogram"
		class="org.vortikal.web.service.ResourcePropertyRegexpAssertion">
		<property name="namespace" ref="DEFAULT_NAMESPACE" />
		<property name="name" value="schema" />
		<property name="pattern"
			value="http://www.uio.no/xsd/studier/studieprogram-hjemmeside/v00.*" />
	</bean>
	
	<bean id="studieprogramProgramkodePropDef"
		class="org.vortikal.repository.resourcetype.PropertyTypeDefinitionImpl"
		parent="abstractPropDef">
		<property name="name" value="programkode" />
		<property name="type" value="STRING" />
		<property name="protectionLevel" ref="PROTECTION_LEVEL_UNEDITABLE" />
		<property name="mandatory" value="false" />
		<property name="contentModificationEvaluator" ref="studieprogramProgramkodeEvaluator" />
	</bean>
	
	<bean id="studieprogramProgramkodeEvaluator" parent="abstractXPathEvaluator">
		<property name="expression" value="/studieprogram-hjemmeside/programkode" />
	</bean>
	
	<bean id="studieprogramProgramnavnPropDef"
		class="org.vortikal.repository.resourcetype.PropertyTypeDefinitionImpl"
		parent="abstractPropDef">
		<property name="name" value="programnavn" />
		<property name="type" value="STRING" />
		<property name="protectionLevel" ref="PROTECTION_LEVEL_UNEDITABLE" />
		<property name="mandatory" value="false" />
		<property name="contentModificationEvaluator" ref="studieprogramProgramnavnEvaluator" />
	</bean>
	
	<bean id="studieprogramProgramnavnEvaluator" parent="abstractXPathEvaluator">
		<property name="expression" value="/studieprogram-hjemmeside/programnavn" />
	</bean>
	
	<bean id="studieprogramProgramtypePropDef"
		class="org.vortikal.repository.resourcetype.PropertyTypeDefinitionImpl"
		parent="abstractPropDef">
		<property name="name" value="programtype" />
		<property name="type" value="STRING" />
		<property name="protectionLevel" ref="PROTECTION_LEVEL_UNEDITABLE" />
		<property name="mandatory" value="false" />
		<property name="contentModificationEvaluator" ref="studieprogramProgramtypeEvaluator" />
	</bean>
	
	<bean id="studieprogramProgramtypeEvaluator" parent="abstractXPathEvaluator">
		<property name="expression" value="/studieprogram-hjemmeside/programtype" />
	</bean>
	
	<bean id="studieprogramAntallaarPropDef"
		class="org.vortikal.repository.resourcetype.PropertyTypeDefinitionImpl"
		parent="abstractPropDef">
		<property name="name" value="antallaar" />
		<property name="type" value="STRING" />
		<property name="protectionLevel" ref="PROTECTION_LEVEL_UNEDITABLE" />
		<property name="mandatory" value="false" />
		<property name="contentModificationEvaluator" ref="studieprogramAntallaarEvaluator" />
	</bean>
	
	<bean id="studieprogramAntallaarEvaluator" parent="abstractXPathEvaluator">
		<property name="expression"
			value="/studieprogram-hjemmeside/faktaboks/antall-aar" />
	</bean>
	
	<bean id="studieprogramStudiepoengPropDef"
		class="org.vortikal.repository.resourcetype.PropertyTypeDefinitionImpl"
		parent="abstractPropDef">
		<property name="name" value="studiepoeng" />
		<property name="type" value="STRING" />
		<property name="protectionLevel" ref="PROTECTION_LEVEL_UNEDITABLE" />
		<property name="mandatory" value="false" />
		<property name="contentModificationEvaluator" ref="studieprogramStudiepoengEvaluator" />
	</bean>
	
	<bean id="studieprogramStudiepoengEvaluator" parent="abstractXPathEvaluator">
		<property name="expression"
			value="/studieprogram-hjemmeside/faktaboks/studiepoeng" />
	</bean>
	
	<bean id="studieprogramOmfangoppgavePropDef"
		class="org.vortikal.repository.resourcetype.PropertyTypeDefinitionImpl"
		parent="abstractPropDef">
		<property name="name" value="omfangoppgave" />
		<property name="type" value="STRING" />
		<property name="protectionLevel" ref="PROTECTION_LEVEL_UNEDITABLE" />
		<property name="mandatory" value="false" />
		<property name="contentModificationEvaluator" ref="studieprogramOmfangoppgaveEvaluator" />
	</bean>
	
	<bean id="studieprogramOmfangoppgaveEvaluator" parent="abstractXPathEvaluator">
		<property name="expression"
			value="/studieprogram-hjemmeside/faktaboks/omfang-oppgave" />
	</bean>
	
	<bean id="studieprogramSoknadsfristPropDef"
		class="org.vortikal.repository.resourcetype.PropertyTypeDefinitionImpl"
		parent="abstractPropDef">
		<property name="name" value="soknadsfrist" />
		<property name="type" value="STRING" />
		<property name="protectionLevel" ref="PROTECTION_LEVEL_UNEDITABLE" />
		<property name="mandatory" value="false" />
		<property name="contentModificationEvaluator" ref="studieprogramSoknadsfristEvaluator" />
	</bean>
	
	<bean id="studieprogramSoknadsfristEvaluator" parent="abstractXPathEvaluator">
		<property name="expression"
			value="/studieprogram-hjemmeside/faktaboks/soknadsfrist" />
	</bean>
	
	<bean id="studieprogramStudieplasserPropDef"
		class="org.vortikal.repository.resourcetype.PropertyTypeDefinitionImpl"
		parent="abstractPropDef">
		<property name="name" value="studieplasser" />
		<property name="type" value="STRING" />
		<property name="protectionLevel" ref="PROTECTION_LEVEL_UNEDITABLE" />
		<property name="mandatory" value="false" />
		<property name="contentModificationEvaluator" ref="studieprogramStudieplasserEvaluator" />
	</bean>
	
	<bean id="studieprogramStudieplasserEvaluator" parent="abstractXPathEvaluator">
		<property name="expression"
			value="/studieprogram-hjemmeside/faktaboks/studieplasser" />
	</bean>
	
	<bean id="studieprogramSokodePropDef"
		class="org.vortikal.repository.resourcetype.PropertyTypeDefinitionImpl"
		parent="abstractPropDef">
		<property name="name" value="sokode" />
		<property name="type" value="STRING" />
		<property name="protectionLevel" ref="PROTECTION_LEVEL_UNEDITABLE" />
		<property name="mandatory" value="false" />
		<property name="contentModificationEvaluator" ref="studieprogramSokodeEvaluator" />
	</bean>
	
	<bean id="studieprogramSokodeEvaluator" parent="abstractXPathEvaluator">
		<property name="expression" value="/studieprogram-hjemmeside/faktaboks/so-kode" />
	</bean>
	
</beans>