<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">

<beans>

   <!-- Context Initializers -->

   <bean id="requestContextInitializer"
         class="org.vortikal.web.RequestContextInitializer">
     <description>
       This bean is required in order to initialize requests with the
       request context. The request context contains the service and
       the URI for each request.
       (See classes org.vortikal.web.RequestContext
       and org.vortikal.web.service.Service)
     </description>
      <property name="trustedToken" ref="trustedToken" />
      <property name="repository" ref="repository" />
      <property name="indexFileList" ref="indexFileList" />
   </bean>

  <bean id="indexFileList" class="org.vortikal.context.CSVListFactoryBean">
    <property name="csvList"
              value="${indexFiles}" />
  </bean>
      
  <bean id="securityInitializer"
    class="org.vortikal.security.web.SecurityInitializer">
    <description>
      This bean initializes the security context for each request. The
      security context contains the authenticated principal and the
      repository token.
    </description>
    <property name="tokenManager" ref="tokenManager" />
  </bean>

  <bean id="repositoryContextInitializer"
        class="org.vortikal.web.RepositoryContextInitializer" />

   <!-- HandlerMapping -->

   <bean id="serviceMapping" class="org.vortikal.web.service.ServiceHandlerMapping">
     <description>
       The service handler mapping must be set in order for the
       service framework to function.
     </description>
   </bean>

   <bean id="messageSource"
         class="org.vortikal.web.context.ChildDelegatingMessageSource">
   </bean>

   <bean id="defaultMessageSource"
         class="org.springframework.context.support.ResourceBundleMessageSource">
     <property name="basenames">
       <list>
         <value>vortikal.i18n.messages</value>
       </list>
     </property>
   </bean>

</beans>
