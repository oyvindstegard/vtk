<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" 
                       "http://www.springframework.org/dtd/spring-beans.dtd">

<beans>

  <bean id="emailafriendService" class="org.vortikal.web.service.ServiceImpl">
  <property name="parent" ref="webService" />
    <property name="order" value="-999" />
    <property name="handler" ref="emailafriendHandler" />
    <property name="assertions">
        <bean class="org.vortikal.web.service.RequestParameterAssertion">
          <property name="parameterName" value="vrtx" />
          <property name="parameterValue" value="email-a-friend" />
        </bean>
    </property>
    <!-- 
    <property name="attributes">
      <map>
        <entry key="localeResolver" value-ref="manageLocaleResolver" />
        <entry key-ref="system.decoratorTemplateAttribute" value="email-a-friend.html" />
      </map>
    </property>-->
  </bean>

  <bean id="emailafriend.viewResolver" parent="decoratorViewResolver">
    <property name="views">
      <map>
        <entry key="emailafriend.view"  value-ref="emailafriend.view" />
      </map>
    </property>
  </bean> 
  
  <bean id="emailafriend.view" parent="freemarkerView">
    <property name="url" value="pages/email-a-friend.ftl" />
  </bean>
  
  <bean id="javaMailSenderImpl" class="org.springframework.mail.javamail.JavaMailSenderImpl">
    <property name="host" value="smtp.uio.no" />
    <property name="port" value="465" />
    <property name="protocol" value="smtps" />
    <property name="defaultEncoding" value="utf-8"/>
  </bean>

  <bean id="emailafriendHandler" class="org.vortikal.web.controller.tipafriend.TipAFriendController">
    <property name="repository" ref="repository" />
    <property name="viewName" value="emailafriend.view" />
    <property name="resourceManager" ref="resourceManager"/>
    <property name="javaMailSenderImpl" ref="javaMailSenderImpl"/>
  </bean> 

  <!--  
  <bean id="tip.redirectToDefaultView" 
    class="org.vortikal.web.view.RedirectView">
    <property name="referenceDataProviders">
      <list>
        <ref bean="tip.redirectToDefaultProvider" />
      </list>
    </property>
  </bean>

  <bean id="tip.redirectToDefaultProvider" 
        class="org.vortikal.web.referencedata.provider.RedirectProvider"
        parent="requestLocalRepositoryAware">
    <property name="redirectToService" ref="displayResourceService" />
    <property name="urlAnchor" value="tip" />
  </bean>-->

</beans>