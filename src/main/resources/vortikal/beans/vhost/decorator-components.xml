<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">

<beans>

  <bean id="decorating.documentNamespace" class="java.lang.String">
    <constructor-arg type="java.lang.String" value="document" />
  </bean>


  <bean id="decorating.bodyComponent"
        class="org.vortikal.web.view.decorating.components.HtmlElementComponent">
    <property name="namespace" ref="decorating.documentNamespace" />
    <property name="name" value="body" />
    <property name="select" value="html.body" />
    <property name="enclosed" value="false" />
    <property name="description" value="Outputs the contents of the &lt;body&gt; tag of the original HTML document" />
  </bean>

  <bean id="decorating.headComponent"
        class="org.vortikal.web.view.decorating.components.HtmlElementComponent">
    <property name="namespace" ref="decorating.documentNamespace" />
    <property name="name" value="head" />
    <property name="select" value="html.head" />
    <property name="enclosed" value="false" />
    <property name="exclude" value="title" />
    <property name="description" value="Outputs the contents of the &lt;head&gt; tag of the original HTML document, but with the &lt;title&gt; tag removed" />
  </bean>

  <bean id="decorating.titleComponent"
        class="org.vortikal.web.view.decorating.components.HtmlElementComponent">
    <property name="namespace" ref="decorating.documentNamespace" />
    <property name="name" value="title" />
    <property name="select" value="html.head.title" />
    <property name="enclosed" value="false" />
    <property name="description" value="Outputs the contents of the &lt;title&gt; tag of the original HTML document" />
  </bean>

  <bean id="decorating.elementContentComponent"
        class="org.vortikal.web.view.decorating.components.HtmlElementComponent">
    <property name="namespace" value="element" />
    <property name="name" value="content" />
    <property name="description" value="Outputs the contents of a specified element" />
  </bean>

  <bean id="decorating.elementAttributesComponent"
        class="org.vortikal.web.view.decorating.components.HtmlAttributesComponent">
    <property name="namespace" value="element" />
    <property name="name" value="attributes" />
    <property name="description" value="Outputs the attributes of a specified element" />
  </bean>


  <bean id="decorating.manageURLComponent"
        class="org.vortikal.web.view.decorating.components.ViewRenderingDecoratorComponent">
    <property name="namespace" value="manage" />
    <property name="name" value="manageURL" />
    <property name="description" value="Inserts the admin URL of the current document" />
    <property name="view" ref="manageURLView" />
    <property name="referenceDataProviders">
      <list>
        <ref bean="decorating.manageURLComponent.urlProvider" />
      </list>
    </property>
  </bean>

  <bean id="decorating.manageURLComponent.urlProvider"
        class="org.vortikal.web.referencedata.provider.ResourceServiceURLProvider"
        parent="requestLocalRepositoryAware">
    <property name="modelName" value="manageLink" />
    <property name="urlName" value="url" />
    <property name="service" ref="manageService" />
  </bean>


  <bean id="decorating.resourcePropertyComponent" parent="requestLocalRepositoryAware"
        class="org.vortikal.web.view.decorating.components.ResourcePropertiesDecoratorCompontent">
    <property name="namespace" value="resource" />
    <property name="name" value="property" />
    <property name="description" value="Inserts the last modified date of the current document" />
    <property name="valueFormatter" ref="valueFormatter" />
    <property name="resourceTypeTree" ref="resourceTypeTree" />
  </bean>

  <bean id="decorating.breadcrumbComponent" class="org.vortikal.web.view.decorating.components.ViewRenderingDecoratorComponent">
    <property name="namespace" value="view" />
    <property name="name" value="breadcrumb" />
    <property name="view" ref="decorating.breadcrumbComponent.view" />
    <property name="description" value="Inserts a breadcrumb trail to the current document" />
  </bean>


  <bean id="decorating.breadcrumbComponent.view" parent="freemarkerView">
    <property name="url" value="layouts/breadcrumb.ftl" />
    <property name="referenceDataProviders">
      <list>
        <ref bean="viewBreadCrumbProvider" />
      </list>
    </property>
  </bean>


  <bean id="decorating.feedComponent"
        class="org.vortikal.web.view.decorating.components.SyndicationFeedComponent">
    <property name="namespace" value="feed" />
    <property name="name" value="include" />
    <property name="view" ref="decorating.feedComponent.view" />
    <property name="description" value="Inserts a feed (RSS, Atom) component on the page" />
    <property name="contentCache" ref="decorating.feedComponent.contentCache" />
  </bean>

  <bean id="decorating.feedComponent.view" parent="freemarkerView">
    <property name="url" value="layouts/feed-listing.ftl" />
  </bean>

  <bean id="decorating.feedComponent.contentCache" class="org.vortikal.util.cache.ContentCache">
    <property name="cacheLoader" ref="decorating.feedComponent.contentCache.loader" />
    <property name="cacheSeconds" value="${decorating.feedComponent.cacheTimeoutSeconds}" />
    <property name="asynchronousRefresh" value="true" />
    <property name="refreshInterval" value="30" />
    <property name="maxItems" value="${decorating.feedComponent.maxCachedItems}" />
  </bean>

  <bean id="decorating.feedComponent.contentCache.loader"
        class="org.vortikal.web.view.decorating.components.SyndFeedLoader">
    <property name="connectTimeoutSeconds" value="${decorating.feedComponent.connectTimeoutSeconds}" />
    <property name="readTimeoutSeconds" value="${decorating.feedComponent.readTimeoutSeconds}" />
    <property name="clientIdentifier" value="${decorating.feedComponent.identifier}" />
  </bean>


  <bean id="decorating.listMenuComponent"
        class="org.vortikal.web.view.decorating.components.ListMenuComponent">
    <property name="namespace" value="menu" />
    <property name="name" value="listmenu" />
    <property name="queryManager" ref="queryManager" />
    <property name="view" ref="decorating.listMenuComponent.view" />
    <property name="titlePropdef" ref="titlePropDef" />
    <property name="viewService" ref="webService" />
    <property name="modelName" value="tabs" />
    <property name="description" value="Inserts a menu component on the page, based on a folder " />
  </bean>

  <bean name="decorating.listMenuComponent.view" parent="freemarkerView">
    <property name="url" value="layouts/tabs.ftl" />
  </bean>



  <bean id="decorating.includeComponent"
        class="org.vortikal.web.view.decorating.components.IncludeComponent"
        parent="requestLocalRepositoryAware">
    <property name="namespace" value="file" />
    <property name="name" value="include" />
    <property name="description" value="Includes the contents of another document in the page" />
    <property name="httpIncludeCache" ref="decorating.includeComponent.httpIncludeCache" />
  </bean>

  <bean id="decorating.includeComponent.httpIncludeCache"
        class="org.vortikal.util.cache.ContentCache">
    <property name="cacheLoader" ref="decorating.includeComponent.httpIncludeCache.loader" />
    <property name="cacheSeconds" value="${decorating.includeComponent.cacheTimeoutSeconds}" />
    <property name="asynchronousRefresh" value="false" />
    <property name="refreshInterval" value="30" />
    <property name="maxItems" value="${decorating.includeComponent.maxCachedItems}" />
  </bean>

  <bean id="decorating.includeComponent.httpIncludeCache.loader"
        class="org.vortikal.web.view.decorating.components.URLToStringLoader">
    <property name="connectTimeoutSeconds" value="${decorating.includeComponent.connectTimeoutSeconds}" />
    <property name="readTimeoutSeconds" value="${decorating.includeComponent.readTimeoutSeconds}" />
    <property name="clientIdentifier" value="${decorating.includeComponent.identifier}" />
  </bean>

</beans>
