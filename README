To set up a minimal version of the Vortikal server the following steps
are necessary:

1. Download and install Maven 3
   ( http://maven.apache.org/download.html )

2. Create a database using the DDL in the
   'src/main/sql/postgresql-schema.sql' (currently only PostgreSQL is
   supported, but HSQLDB has also been known to work in the past). The
   current PostgreSQL usage requires the language 'plpgsql' to be
   installed in the database which can be installed with the following
   command 'createlang plpgsql <database>'.

3. Set up the configuration. Configuration should be placed in the
   files ~/.vtk.properties and ~/.vrtx.properties

   indexStorageRootPath = [an empty directory for storing indices]
   jdbcUsername = [your JDBC user]
   jdbcPassword = [your JDBC password]
   repositoryDataDirectory = [an empty directory for storing files]
   repositoryTrashCanDirectory = [an empty directory for storing "deleted" files]
   repositoryRevisionDirectory = [an empty directory for storing file revisions]
   databaseURL = [your JDBC URL, e.g. jdbc:postgresql:my-user>]
  
4. Run the command 'mvn jetty:run' (standing in the project
   directory). 

5. You should now be able to access the web service on
   http:localhost:9322/ and the WebDAV service on
   http://localhost:9321/. 
   
   Log in as 'root@localhost:fish' or user 'user@localhost:pw'.

6. See the default configuration file
   'src/main/resources/vtk/beans/vtk.properties' for
   descriptions of the various configuration settings.

7. Custom bean definitions and overriding can be placed in the file
   ~/.vrtx-context.xml (loaded if it exists).


JBOSS

For determining the master node in a JBoss cluster a singleton service is used.
This special service is started by the file:

src/main/resources/META-INF/services/org.jboss.msc.service.ServiceActivator

The JBoss management code for singleton requires OSGi, and this breaks normal
jetty:run, so we have defined a special profile in pom.xml for it. Build with:

mvn -Dcontainer=jboss clean compile war:war

When running, include the following (e.g. as an import in ~/vrtx-context.xml)

/vtk/beans/standard-extensions/cluster/cluster.jboss.xml
