<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">

<beans>

  <!-- Resource type 'collection' -->
  <bean id="collectionResourceTypeDefinition"
    class="org.vortikal.repository.resourcetype.PrimaryResourceTypeDefinitionImpl">
    <property name="name" value="collection"/>
    <property name="namespace" ref="DEFAULT_NAMESPACE"/>
    <property name="assertions">
      <list>
        <ref bean="collectionAssertion"/>
      </list>
    </property>
    <property name="mixinTypeDefinitions">
      <list>
        <ref bean="visualProfileMixinResourceTypeDef" />
      </list>
    </property>    
    <property name="parentTypeDefinition" ref="resourceResourceTypeDefinition"/>
    <property name="propertyTypeDefinitions">
      <list>
        <ref bean="skipInPathPropDef"/>
        <ref bean="typePropDef" />
        <ref bean="titlePropDef" />
      </list>
    </property>
    
  </bean>
  
  <bean id="typePropDef" class="org.vortikal.repository.resourcetype.PropertyTypeDefinitionImpl">
    <property name="name" value="type"/>
    <property name="type" ref="TYPE_STRING"/>
    <property name="protectionLevel" ref="PROTECTION_LEVEL_ACL_WRITE"/>
    <property name="mandatory" value="false"/>
    <property name="allowedValues">
      <list>
      </list>
    </property>
  </bean>
  
  <bean id="skipInPathPropDef" class="org.vortikal.repository.resourcetype.PropertyTypeDefinitionImpl">
    <property name="name" value="skipInPath"/>
    <property name="type" ref="TYPE_BOOLEAN"/>
    <property name="protectionLevel" ref="PROTECTION_LEVEL_ACL_WRITE"/>
    <property name="mandatory" value="false"/>
    <property name="allowedValues">
      <list>
        <bean class="org.vortikal.repository.resourcetype.Value">
          <constructor-arg type="boolean">
            <value>true</value>
          </constructor-arg>
        </bean>
      </list>
    </property>
  </bean>
  
  <bean id="titlePropDef" class="org.vortikal.repository.resourcetype.PropertyTypeDefinitionImpl">
    <property name="name" value="title"/>
    <property name="type" ref="TYPE_STRING"/>
    <property name="protectionLevel" ref="PROTECTION_LEVEL_ACL_WRITE"/>
    <property name="mandatory" value="false"/>
  </bean>

  <!-- Assertion that matches all collection resources -->
  <bean id="collectionAssertion"
        class="org.vortikal.web.service.ResourceIsCollectionAssertion" />

  <!-- For testing only. List of integers. -->
  <bean id="intListPropDef" class="org.vortikal.repository.resourcetype.PropertyTypeDefinitionImpl">
    <property name="name" value="intList"/>
    <property name="type" ref="TYPE_INT"/>
    <property name="multiple" value="true"/>
    <property name="protectionLevel" ref="PROTECTION_LEVEL_ACL_WRITE" />
    <property name="mandatory" value="false"/>
  </bean>

</beans>
