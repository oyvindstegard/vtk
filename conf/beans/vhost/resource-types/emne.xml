<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">

<beans>

  <!-- Emne XML resource -->


  <bean id="emneXmlResource" class="org.vortikal.repository.resourcetype.PrimaryResourceTypeDefinitionImpl">
    <property name="name" value="emne"/>
    <property name="namespace" ref="EMNE_NAMESPACE" />
    <property name="parentTypeDefinition" ref="managedXmlResource" />
    <property name="propertyTypeDefinitions">
      <list>
        <ref bean="emneEmnekodePropDef" />
        <ref bean="emneEmnenavnPropDef" />
        <ref bean="emneStudiepoengPropDef" />
        <ref bean="emneUndervisningsSpraakPropDef" />
        <ref bean="emneUndervisningsSemesterPropDef" />
        <ref bean="emneUndervisningsSemesterBestemteSemestrePropDef" />
        <ref bean="emneUndervisningsSemesterAnnetPropDef" />
        <ref bean="emneEksamensSemesterPropDef" />
        <ref bean="emneEksamensSemesterBestemteSemestrePropDef" />
        <ref bean="emneStatusPropDef" />
        <ref bean="emneEmnetypePropDef" />
        <ref bean="emneSpraakPropDef" />
      </list>
    </property>
    <property name="assertions">
      <list>
        <ref bean="schemaIsEmne" />
      </list>
    </property>
  </bean>

  <bean id="EMNE_NAMESPACE" class="org.vortikal.repository.Namespace">
    <constructor-arg value="emne" />
    <constructor-arg value="http://www.uio.no/xsd/studier/emne" />
  </bean>

  <bean id="schemaIsEmne" 
        class="org.vortikal.web.service.ResourcePropertyRegexpAssertion">
    <property name="namespace" value="http://www.uio.no/vortex/custom-properties" />
    <property name="name" value="schema" />
    <property name="pattern" value="http://www.uio.no/xsd/studier/emne/v00.*" />
  </bean>


  <bean id="emneEmnekodePropDef" class="org.vortikal.repository.resourcetype.PropertyTypeDefinitionImpl">
    <property name="name" value="emnekode" />
    <property name="type" ref="TYPE_STRING" />
    <property name="protectionLevel" ref="PROTECTION_LEVEL_UNEDITABLE" />
    <property name="mandatory" value="false" />
    <property name="contentModificationEvaluator" ref="emneEmnekodeEvaluator" />
  </bean>

  <bean id="emneEmnekodeEvaluator" class="org.vortikal.repository.resourcetype.property.XMLSchemaEvaluator" />


  <bean id="emneEmnenavnPropDef" class="org.vortikal.repository.resourcetype.PropertyTypeDefinitionImpl">
    <property name="name" value="emnenavn" />
    <property name="type" ref="TYPE_STRING" />
    <property name="protectionLevel" ref="PROTECTION_LEVEL_UNEDITABLE" />
    <property name="mandatory" value="false" />
    <property name="contentModificationEvaluator" ref="emneEmnenavnEvaluator" />
  </bean>

  <bean id="emneEmnenavnEvaluator" class="org.vortikal.repository.resourcetype.property.XMLSchemaEvaluator" />


  <bean id="emneStudiepoengPropDef" class="org.vortikal.repository.resourcetype.PropertyTypeDefinitionImpl">
    <property name="name" value="studiepoeng" />
    <property name="type" ref="TYPE_INT" />
    <property name="protectionLevel" ref="PROTECTION_LEVEL_UNEDITABLE" />
    <property name="mandatory" value="false" />
    <property name="contentModificationEvaluator" ref="emneStudiepoengEvaluator" />
  </bean>

  <bean id="emneStudiepoengEvaluator" class="org.vortikal.repository.resourcetype.property.XMLSchemaEvaluator" />
            

  <bean id="emneUndervisningsSpraakPropDef" class="org.vortikal.repository.resourcetype.PropertyTypeDefinitionImpl">
    <property name="name" value="undervisningsspraak" />
    <property name="type" ref="TYPE_STRING" />
    <property name="protectionLevel" ref="PROTECTION_LEVEL_UNEDITABLE" />
    <property name="mandatory" value="true" /> 
    <property name="defaultValue">
      <bean class="org.vortikal.repository.resourcetype.Value">
        <property name="value" value="annet" />
      </bean>
    </property>
    <property name="contentModificationEvaluator" ref="emneUndervisningsSpraakEvaluator" />
  </bean>

  <bean id="emneUndervisningsSpraakEvaluator" class="org.vortikal.repository.resourcetype.property.XMLSchemaEvaluator" />


  <bean id="emneUndervisningsSemesterPropDef" class="org.vortikal.repository.resourcetype.PropertyTypeDefinitionImpl">
    <property name="name" value="undervisningssemester" />
    <property name="type" ref="TYPE_STRING" />
    <property name="protectionLevel" ref="PROTECTION_LEVEL_UNEDITABLE" />
    <property name="mandatory" value="true" />
    <property name="defaultValue">
      <bean class="org.vortikal.repository.resourcetype.Value">
        <property name="value" value="annet" />
      </bean>
    </property>
    <property name="contentModificationEvaluator" ref="emneUndervisningsSemesterEvaluator" />
  </bean>

  <bean id="emneUndervisningsSemesterEvaluator" class="org.vortikal.repository.resourcetype.property.XMLSchemaEvaluator" />


  <bean id="emneUndervisningsSemesterBestemteSemestrePropDef" class="org.vortikal.repository.resourcetype.PropertyTypeDefinitionImpl">
    <property name="name" value="undervisningssemester.bestemte" />
    <property name="type" ref="TYPE_STRING" /> <!-- egentlig en liste - hÃ¥ndteres av evaluator ? -->
    <property name="protectionLevel" ref="PROTECTION_LEVEL_UNEDITABLE" />
    <property name="mandatory" value="false" />
    <property name="contentModificationEvaluator" ref="emneUndervisningsSemesterBestemteSemestreEvaluator" />
  </bean>

  <bean id="emneUndervisningsSemesterBestemteSemestreEvaluator" class="org.vortikal.repository.resourcetype.property.XMLSchemaEvaluator" />

  <bean id="emneUndervisningsSemesterAnnetPropDef" class="org.vortikal.repository.resourcetype.PropertyTypeDefinitionImpl">
    <property name="name" value="undervisningssemester.annet" />
    <property name="type" ref="TYPE_STRING" />
    <property name="protectionLevel" ref="PROTECTION_LEVEL_UNEDITABLE" />
    <property name="mandatory" value="false" />
    <property name="contentModificationEvaluator" ref="emneUndervisningsSemesterAnnetEvaluator" />
  </bean>

  <bean id="emneUndervisningsSemesterAnnetEvaluator" class="org.vortikal.repository.resourcetype.property.XMLSchemaEvaluator" />


  <bean id="emneEksamensSemesterPropDef" class="org.vortikal.repository.resourcetype.PropertyTypeDefinitionImpl">
    <property name="name" value="eksamenssemester" />
    <property name="type" ref="TYPE_STRING" />
    <property name="protectionLevel" ref="PROTECTION_LEVEL_UNEDITABLE" />
    <property name="mandatory" value="true" />
    <property name="defaultValue">
      <bean class="org.vortikal.repository.resourcetype.Value">
        <property name="value" value="annet" />
      </bean>
    </property>
    <property name="contentModificationEvaluator" ref="emneEksamensSemesterEvaluator" />
  </bean>

  <bean id="emneEksamensSemesterEvaluator" class="org.vortikal.repository.resourcetype.property.XMLSchemaEvaluator" />


  <bean id="emneEksamensSemesterBestemteSemestrePropDef" class="org.vortikal.repository.resourcetype.PropertyTypeDefinitionImpl">
    <property name="name" value="eksamenssemester.bestemte" />
    <property name="type" ref="TYPE_STRING" /> <!-- egentlig liste -->
    <property name="protectionLevel" ref="PROTECTION_LEVEL_UNEDITABLE" />
    <property name="mandatory" value="false" />
    <property name="contentModificationEvaluator" ref="emneEksamensSemesterBestemteSemestreEvaluator" />
  </bean>

  <bean id="emneEksamensSemesterBestemteSemestreEvaluator" class="org.vortikal.repository.resourcetype.property.XMLSchemaEvaluator" />


  <bean id="emneStatusPropDef" class="org.vortikal.repository.resourcetype.PropertyTypeDefinitionImpl">
    <property name="name" value="status" />
    <property name="type" ref="TYPE_STRING" />
    <property name="protectionLevel" ref="PROTECTION_LEVEL_UNEDITABLE" />
    <property name="mandatory" value="false" />
    <property name="contentModificationEvaluator" ref="emneStatusEvaluator" />
  </bean>

  <bean id="emneStatusEvaluator" class="org.vortikal.repository.resourcetype.property.XMLSchemaEvaluator" />


  <bean id="emneEmnetypePropDef" class="org.vortikal.repository.resourcetype.PropertyTypeDefinitionImpl">
    <property name="name" value="emnetype" />
    <property name="type" ref="TYPE_STRING" />
    <property name="protectionLevel" ref="PROTECTION_LEVEL_UNEDITABLE" />
    <property name="mandatory" value="false" /> 
    <property name="contentModificationEvaluator" ref="emneEmnetypeEvaluator" />
  </bean>

  <bean id="emneEmnetypeEvaluator" class="org.vortikal.repository.resourcetype.property.XMLSchemaEvaluator" />


  <bean id="emneSpraakPropDef" class="org.vortikal.repository.resourcetype.PropertyTypeDefinitionImpl">
    <property name="name" value="spraak" />
    <property name="type" ref="TYPE_STRING" />
    <property name="protectionLevel" ref="PROTECTION_LEVEL_UNEDITABLE" />
    <property name="mandatory" value="true" />
    <property name="defaultValue">
      <bean class="org.vortikal.repository.resourcetype.Value">
        <property name="value" value="bokmaal" />
      </bean>
    </property>
    <property name="contentModificationEvaluator" ref="emneSpraakEvaluator" />
  </bean>

  <bean id="emneSpraakEvaluator" class="org.vortikal.repository.resourcetype.property.XMLSchemaEvaluator" />



</beans>
