<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" 
"http://www.springframework.org/dtd/spring-beans.dtd">

<beans>


  <bean id="editPropertiesService" class="org.vortikal.web.service.ServiceImpl">
    <property name="parent" ref="manageService" />
    <property name="categories">
      <set>
        <value>tabMenu</value>
      </set>
    </property>
    <property name="attributes">
      <map>
        <entry key="tabOrder"><value type="java.lang.Integer">400</value></entry>
      </map>
    </property>
    <property name="assertions">
      <list>
        <bean class="org.vortikal.web.service.RequestParameterAssertion">
          <property name="parameterName" value="mode" />
          <property name="parameterValue" value="edit-properties" />
        </bean>      
      </list>
    </property>
    <property name="handler" ref="editPropertiesHandler" />
  </bean>        


  <bean id="editPropertiesHandler" 
        class="org.vortikal.web.controller.properties.PropertyEditController"
        parent="requestLocalRepositoryAware">
    <property name="principalManager" ref="principalManager" />
    <property name="propertyTypeDefinitions">
      <list>
        <ref bean="lastModifiedPropDef" />
        <ref bean="modifiedByPropDef" />
        <ref bean="creationTimePropDef" />
        <ref bean="createdByPropDef" />
        <ref bean="ownerPropDef" />
        <!-- resourceType -->
        <!-- webadress -->
        <!-- webDAVadress -->
        <ref bean="contentLocalePropDef" />
        <ref bean="contentLengthPropDef" />

        <ref bean="unitPropDef" />
        <ref bean="topicPropDef" />

        <!-- ref bean="titlePropDef" / -->
        <ref bean="shortTitlePropDef" />
        <ref bean="keywordsPropDef" />
        <ref bean="descriptionPropDef" />

        <ref bean="contentTypePropDef" />
        <ref bean="userSpecifiedCharacterEncodingPropDef" />
        <ref bean="guessedCharacterEncodingPropDef" />
        <ref bean="characterEncodingPropDef" />

      </list>
    </property>
    <property name="propertyListModelName" value="basicPropList" />
    <property name="propertyMapModelName" value="aboutItems" />

    <property name="valueFactory" ref="valueFactory" />
    <property name="formView" value="about" />
    <property name="successView" value="about" />

    <property name="commandName" value="form" />
    <property name="dateFormat" value="dd.MM.yyyy HH:mm:ss" />
    <!--
    <property name="commandClass">
      <value>org.vortikal.web.controller.properties.ResourceEnumerationPropertyCommand</value>
    </property>
    -->
  </bean>


  <bean id="aboutView" parent="freemarkerView">
    <property name="url" value="pages/about.ftl" />
    <property name="referenceDataProviders">
      <list>
        <ref bean="editPropertiesHandler" /> 
        <ref bean="adminCSSProvider" />
        <ref bean="resourceDetailProvider" />
        <ref bean="aboutResourcePropertiesProvider" />
      </list>
    </property>
  </bean>


  <bean id="editPropertiesViewResolver" 
        parent="adminViewResolver">
    <property name="views">
      <map>
        <entry key="about" value-ref="aboutView" />
      </map>
    </property>
  </bean>


</beans>
