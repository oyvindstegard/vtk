<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">

<beans>

  <bean id="rootResourceTypeDefinition" class="org.vortikal.repository.resourcetype.ResourceTypeDefinitionImpl">
    <property name="name" value="resource"/>

    <!-- Properties valid for the resource type -->
    <property name="propertyTypeDefinitions">
      <list>
        <ref bean="ownerPropDef" />
        <ref bean="collectionPropDef" />
      </list>
    </property>
  </bean>

  <bean id="ownerPropDef" class="org.vortikal.repository.resourcetype.PropertyTypeDefinitionImpl">
    <property name="name" value="owner" />
    <property name="protectionLevel" ref="PROTECTION_LEVEL_OWNER_EDITABLE" />
    <property name="isMandatory" value="true" />
    <property name="propertyEvaluator">
      <bean class="org.vortikal.repository.resourcetype.property.OwnerEvaluator">
        <property name="principalManager" ref="principalManager" />
      </bean>
    </property>
    
  <bean id="collectionPropDef" class="org.vortikal.repository.resourcetype.PropertyTypeDefinitionImpl">
    <property name="name" value="collection" />
    <property name="protectionLevel" ref="PROTECTION_LEVEL_UNEDITABLE" />
    <property name="isMandatory" value="true" />
    <property name="propertyEvaluator">
      <bean class="org.vortikal.repository.resourcetype.property.CollectionEvaluator" />
    </property>

  </bean>


<!-- CONSTANTS -->

  <bean id="PROTECTION_LEVEL_EDITABLE"
        class="org.springframework.beans.factory.config.FieldRetrievingFactoryBean">
    <property name="staticField"
              value="org.vortikal.repository.resourcetype.PropertyType.PROTECTION_LEVEL_EDITABLE" />
  </bean>

  <bean id="PROTECTION_LEVEL_PROTECTED"
        class="org.springframework.beans.factory.config.FieldRetrievingFactoryBean">
    <property name="staticField"
              value="org.vortikal.repository.resourcetype.PropertyType.PROTECTION_LEVEL_PROTECTED" />
  </bean>

  <bean id="PROTECTION_LEVEL_OWNER_EDITABLE"
        class="org.springframework.beans.factory.config.FieldRetrievingFactoryBean">
    <property name="staticField"
              value="org.vortikal.repository.resourcetype.PropertyType.PROTECTION_LEVEL_OWNER_EDITABLE" />
  </bean>

  <bean id="PROTECTION_LEVEL_ROOT_EDITABLE"
        class="org.springframework.beans.factory.config.FieldRetrievingFactoryBean">
    <property name="staticField"
              value="org.vortikal.repository.resourcetype.PropertyType.PROTECTION_LEVEL_ROOT_EDITABLE" />
  </bean>

  <bean id="PROTECTION_LEVEL_UNEDITABLE"
        class="org.springframework.beans.factory.config.FieldRetrievingFactoryBean">
    <property name="staticField"
              value="org.vortikal.repository.resourcetype.PropertyType.PROTECTION_LEVEL_UNEDITABLE" />
  </bean>

  <bean id="TYPE_STRING"
        class="org.springframework.beans.factory.config.FieldRetrievingFactoryBean">
    <property name="staticField"
              value="org.vortikal.repository.resourcetype.PropertyType.TYPE_STRING" />
  </bean>

  <bean id="TYPE_DATE"
        class="org.springframework.beans.factory.config.FieldRetrievingFactoryBean">
    <property name="staticField"
              value="org.vortikal.repository.resourcetype.PropertyType.TYPE_DATE" />
  </bean>

  <bean id="TYPE_BOOLEAN"
        class="org.springframework.beans.factory.config.FieldRetrievingFactoryBean">
    <property name="staticField"
              value="org.vortikal.repository.resourcetype.PropertyType.TYPE_BOOLEAN" />
  </bean>

</beans>

